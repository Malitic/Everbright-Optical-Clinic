var e,t,r,n,a,s,i,o,l,c,d,u,h,m,p,f,x,y,v,g,b,j,w,N,S,k,_,O,C,A,E,P,T,M,D,I,R,F,L,B,q,z,$,U,V,W,H,K,Y,G,X,Q,J,Z,ee,te,re,ne,ae,se,ie,oe,le,ce,de,ue,he,me,pe,fe,xe,ye,ve,ge,be,je,we,Ne=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Se=(e,t,r)=>(Ne(e,t,"read from private field"),r?r.call(e):t.get(e)),ke=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},_e=(e,t,r,n)=>(Ne(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Oe=(e,t,r,n)=>({set _(n){_e(e,t,n,r)},get _(){return Se(e,t,n)}}),Ce=(e,t,r)=>(Ne(e,t,"access private method"),r);import{j as Ae,P as Ee,c as Pe,a as Te,u as Me,B as De,b as Ie,d as Re,e as Fe,f as Le,R as Be,g as qe,h as ze,i as $e,k as Ue,A as Ve,D as We,C as He,l as Ke,m as Ye,S as Ge,n as Xe,o as Qe,p as Je,q as Ze,I as et,r as tt,s as rt,t as nt,L as at,v as st,w as it,T as ot,x as lt,y as ct,z as dt,F as ut,E as ht,G as mt,H as pt,J as ft,O as xt,K as yt,M as vt,N as gt,Q as bt,U as jt,V as wt,W as Nt,X as St,Y as kt,Z as _t}from"./ui-da7d11c8.js";import{b as Ot,r as Ct,a as At,c as Et,d as Pt,g as Tt}from"./vendor-84919cb1.js";import{N as Mt,u as Dt,L as It,a as Rt,b as Ft,O as Lt,c as Bt,B as qt,R as zt,d as $t}from"./router-f21f2c44.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Ut=Ot;we=Ut.createRoot,Ut.hydrateRoot;let Vt=0;const Wt=new Map,Ht=e=>{if(Wt.has(e))return;const t=setTimeout(()=>{Wt.delete(e),Xt({type:"REMOVE_TOAST",toastId:e})},1e6);Wt.set(e,t)},Kt=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Ht(r):e.toasts.forEach(e=>{Ht(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},Yt=[];let Gt={toasts:[]};function Xt(e){Gt=Kt(Gt,e),Yt.forEach(e=>{e(Gt)})}function Qt({...e}){const t=(Vt=(Vt+1)%Number.MAX_SAFE_INTEGER,Vt.toString()),r=()=>Xt({type:"DISMISS_TOAST",toastId:t});return Xt({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>Xt({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function Jt(){const[e,t]=Ct.useState(Gt);return Ct.useEffect(()=>(Yt.push(t),()=>{const e=Yt.indexOf(t);e>-1&&Yt.splice(e,1)}),[e]),{...e,toast:Qt,dismiss:e=>Xt({type:"DISMISS_TOAST",toastId:e})}}var Zt=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),er=Ct.forwardRef((e,t)=>Ae.jsx(Ee.span,{...e,ref:t,style:{...Zt,...e.style}}));er.displayName="VisuallyHidden";var tr=er,rr="ToastProvider",[nr,ar,sr]=Pe("Toast"),[ir,or]=Te("Toast",[sr]),[lr,cr]=ir(rr),dr=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:s=50,children:i}=e,[o,l]=Ct.useState(null),[c,d]=Ct.useState(0),u=Ct.useRef(!1),h=Ct.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${rr}\`. Expected non-empty \`string\`.`),Ae.jsx(nr.Provider,{scope:t,children:Ae.jsx(lr,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:s,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:Ct.useCallback(()=>d(e=>e+1),[]),onToastRemove:Ct.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:h,children:i})})};dr.displayName=rr;var ur="ToastViewport",hr=["F8"],mr="toast.viewportPause",pr="toast.viewportResume",fr=Ct.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=hr,label:a="Notifications ({hotkey})",...s}=e,i=cr(ur,r),o=ar(r),l=Ct.useRef(null),c=Ct.useRef(null),d=Ct.useRef(null),u=Ct.useRef(null),h=Me(t,u,i.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=i.toastCount>0;Ct.useEffect(()=>{const e=e=>{var t;0!==n.length&&n.every(t=>e[t]||e.code===t)&&(null==(t=u.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]),Ct.useEffect(()=>{const e=l.current,t=u.current;if(p&&e&&t){const r=()=>{if(!i.isClosePausedRef.current){const e=new CustomEvent(mr);t.dispatchEvent(e),i.isClosePausedRef.current=!0}},n=()=>{if(i.isClosePausedRef.current){const e=new CustomEvent(pr);t.dispatchEvent(e),i.isClosePausedRef.current=!1}},a=t=>{!e.contains(t.relatedTarget)&&n()},s=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",r),e.addEventListener("focusout",a),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",s),window.addEventListener("blur",r),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",a),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",r),window.removeEventListener("focus",n)}}},[p,i.isClosePausedRef]);const f=Ct.useCallback(({tabbingDirection:e})=>{const t=o().map(t=>{const r=t.ref.current,n=[r,...Dr(r)];return"forwards"===e?n:n.reverse()});return("forwards"===e?t.reverse():t).flat()},[o]);return Ct.useEffect(()=>{const e=u.current;if(e){const t=t=>{var r,n,a;const s=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!s){const s=document.activeElement,i=t.shiftKey;if(t.target===e&&i)return void(null==(r=c.current)||r.focus());const o=f({tabbingDirection:i?"backwards":"forwards"}),l=o.findIndex(e=>e===s);Ir(o.slice(l+1))?t.preventDefault():i?null==(n=c.current)||n.focus():null==(a=d.current)||a.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[o,f]),Ae.jsxs(De,{ref:l,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&Ae.jsx(yr,{ref:c,onFocusFromOutsideViewport:()=>{Ir(f({tabbingDirection:"forwards"}))}}),Ae.jsx(nr.Slot,{scope:r,children:Ae.jsx(Ee.ol,{tabIndex:-1,...s,ref:h})}),p&&Ae.jsx(yr,{ref:d,onFocusFromOutsideViewport:()=>{Ir(f({tabbingDirection:"backwards"}))}})]})});fr.displayName=ur;var xr="ToastFocusProxy",yr=Ct.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,s=cr(xr,r);return Ae.jsx(er,{tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const r=e.relatedTarget;!(null==(t=s.viewport)?void 0:t.contains(r))&&n()}})});yr.displayName=xr;var vr="Toast",gr=Ct.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:s,...i}=e,[o,l]=Ie({prop:n,defaultProp:a??!0,onChange:s,caller:vr});return Ae.jsx(Re,{present:r||o,children:Ae.jsx(wr,{open:o,...i,ref:t,onClose:()=>l(!1),onPause:Fe(e.onPause),onResume:Fe(e.onResume),onSwipeStart:Le(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Le(e.onSwipeMove,e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${r}px`)}),onSwipeCancel:Le(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Le(e.onSwipeEnd,e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${r}px`),l(!1)})})})});gr.displayName=vr;var[br,jr]=ir(vr,{onClose(){}}),wr=Ct.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:s,onClose:i,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:h,onSwipeEnd:m,...p}=e,f=cr(vr,r),[x,y]=Ct.useState(null),v=Me(t,e=>y(e)),g=Ct.useRef(null),b=Ct.useRef(null),j=a||f.duration,w=Ct.useRef(0),N=Ct.useRef(j),S=Ct.useRef(0),{onToastAdd:k,onToastRemove:_}=f,O=Fe(()=>{var e;(null==x?void 0:x.contains(document.activeElement))&&(null==(e=f.viewport)||e.focus()),i()}),C=Ct.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(S.current),w.current=(new Date).getTime(),S.current=window.setTimeout(O,e))},[O]);Ct.useEffect(()=>{const e=f.viewport;if(e){const t=()=>{C(N.current),null==c||c()},r=()=>{const e=(new Date).getTime()-w.current;N.current=N.current-e,window.clearTimeout(S.current),null==l||l()};return e.addEventListener(mr,r),e.addEventListener(pr,t),()=>{e.removeEventListener(mr,r),e.removeEventListener(pr,t)}}},[f.viewport,j,l,c,C]),Ct.useEffect(()=>{s&&!f.isClosePausedRef.current&&C(j)},[s,j,f.isClosePausedRef,C]),Ct.useEffect(()=>(k(),()=>_()),[k,_]);const A=Ct.useMemo(()=>x?Pr(x):null,[x]);return f.viewport?Ae.jsxs(Ae.Fragment,{children:[A&&Ae.jsx(Nr,{__scopeToast:r,role:"status","aria-live":"foreground"===n?"assertive":"polite",children:A}),Ae.jsx(br,{scope:r,onClose:O,children:Ot.createPortal(Ae.jsx(nr.ItemSlot,{scope:r,children:Ae.jsx(Be,{asChild:!0,onEscapeKeyDown:Le(o,()=>{f.isFocusedToastEscapeKeyDownRef.current||O(),f.isFocusedToastEscapeKeyDownRef.current=!1}),children:Ae.jsx(Ee.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":f.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Le(e.onKeyDown,e=>{"Escape"===e.key&&(null==o||o(e.nativeEvent),e.nativeEvent.defaultPrevented||(f.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Le(e.onPointerDown,e=>{0===e.button&&(g.current={x:e.clientX,y:e.clientY})}),onPointerMove:Le(e.onPointerMove,e=>{if(!g.current)return;const t=e.clientX-g.current.x,r=e.clientY-g.current.y,n=Boolean(b.current),a=["left","right"].includes(f.swipeDirection),s=["left","up"].includes(f.swipeDirection)?Math.min:Math.max,i=a?s(0,t):0,o=a?0:s(0,r),l="touch"===e.pointerType?10:2,c={x:i,y:o},h={originalEvent:e,delta:c};n?(b.current=c,Tr("toast.swipeMove",u,h,{discrete:!1})):Mr(c,f.swipeDirection,l)?(b.current=c,Tr("toast.swipeStart",d,h,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(r)>l)&&(g.current=null)}),onPointerUp:Le(e.onPointerUp,e=>{const t=b.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),b.current=null,g.current=null,t){const r=e.currentTarget,n={originalEvent:e,delta:t};Mr(t,f.swipeDirection,f.swipeThreshold)?Tr("toast.swipeEnd",m,n,{discrete:!0}):Tr("toast.swipeCancel",h,n,{discrete:!0}),r.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),f.viewport)})]}):null}),Nr=e=>{const{__scopeToast:t,children:r,...n}=e,a=cr(vr,t),[s,i]=Ct.useState(!1),[o,l]=Ct.useState(!1);return function(e=()=>{}){const t=Fe(e);ze(()=>{let e=0,r=0;return e=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}},[t])}(()=>i(!0)),Ct.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),o?null:Ae.jsx(qe,{asChild:!0,children:Ae.jsx(er,{...n,children:s&&Ae.jsxs(Ae.Fragment,{children:[a.label," ",r]})})})},Sr=Ct.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return Ae.jsx(Ee.div,{...n,ref:t})});Sr.displayName="ToastTitle";var kr=Ct.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return Ae.jsx(Ee.div,{...n,ref:t})});kr.displayName="ToastDescription";var _r="ToastAction",Or=Ct.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?Ae.jsx(Er,{altText:r,asChild:!0,children:Ae.jsx(Ar,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${_r}\`. Expected non-empty \`string\`.`),null)});Or.displayName=_r;var Cr="ToastClose",Ar=Ct.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=jr(Cr,r);return Ae.jsx(Er,{asChild:!0,children:Ae.jsx(Ee.button,{type:"button",...n,ref:t,onClick:Le(e.onClick,a.onClose)})})});Ar.displayName=Cr;var Er=Ct.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return Ae.jsx(Ee.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function Pr(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const r=e.ariaHidden||e.hidden||"none"===e.style.display,n=""===e.dataset.radixToastAnnounceExclude;if(!r)if(n){const r=e.dataset.radixToastAnnounceAlt;r&&t.push(r)}else t.push(...Pr(e))}}),t}function Tr(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?$e(a,s):a.dispatchEvent(s)}var Mr=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),s=n>a;return"left"===t||"right"===t?s&&n>r:!s&&a>r};function Dr(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Ir(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var Rr=dr,Fr=fr,Lr=gr,Br=Sr,qr=kr,zr=Or,$r=Ar;function Ur(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Ur(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Vr(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Ur(e))&&(n&&(n+=" "),n+=t);return n}const Wr=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Hr=Vr,Kr=(e,t)=>r=>{var n;if(null==(null==t?void 0:t.variants))return Hr(e,null==r?void 0:r.class,null==r?void 0:r.className);const{variants:a,defaultVariants:s}=t,i=Object.keys(a).map(e=>{const t=null==r?void 0:r[e],n=null==s?void 0:s[e];if(null===t)return null;const i=Wr(t)||Wr(n);return a[e][i]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{}),l=null==t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...o}[t]):{...s,...o}[t]===r})?[...e,r,n]:e},[]);return Hr(e,i,l,null==r?void 0:r.class,null==r?void 0:r.className)};var Yr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Gr=(e,t)=>{const r=Ct.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:s,children:i,...o},l)=>{return Ct.createElement("svg",{ref:l,...Yr,width:n,height:n,stroke:r,strokeWidth:s?24*Number(a)/Number(n):a,className:`lucide lucide-${c=e,c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...o},[...t.map(([e,t])=>Ct.createElement(e,t)),...(Array.isArray(i)?i:[i])||[]]);var c});return r.displayName=`${e}`,r},Xr=Gr("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Qr=Gr("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Jr=Gr("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Zr=Gr("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),en=Gr("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),tn=Gr("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),rn=Gr("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),nn=Gr("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),an=Gr("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),sn=Gr("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),on=Gr("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),ln=Gr("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),cn=Gr("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),dn=Gr("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),un=Gr("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),hn=Gr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),mn=Gr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),pn=Gr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),fn=Gr("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),xn=Gr("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),yn=Gr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),vn=Gr("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),gn=Gr("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),bn=Gr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),jn=Gr("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),wn=Gr("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Nn=Gr("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Sn=Gr("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),kn=Gr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),_n=Gr("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),On=Gr("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),Cn=Gr("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),An=Gr("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),En=Gr("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),Pn=Gr("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Tn=Gr("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Mn=Gr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Dn=Gr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),In=Gr("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Rn=Gr("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Fn=Gr("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Ln=Gr("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Bn=Gr("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),qn=Gr("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),zn=Gr("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),$n=Gr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Un=Gr("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),Vn=Gr("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Wn=Gr("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Hn=Gr("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Kn=Gr("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]),Yn=Gr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Gn=Gr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Xn=Gr("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Qn=Gr("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Jn=Gr("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Zn=Gr("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),ea=Gr("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),ta=Gr("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),ra=Gr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),na=Gr("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),aa=Gr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),sa=Gr("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),ia=Gr("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),oa=Gr("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),la=Gr("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),ca=Gr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),da=Gr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ua=Gr("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),ha=Gr("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ma=Gr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),pa=e=>{const t=va(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),fa(r,t)||ya(e)},getConflictingClassGroupIds:(e,t)=>{const a=r[e]||[];return t&&n[e]?[...a,...n[e]]:a}}},fa=(e,t)=>{var r;if(0===e.length)return t.classGroupId;const n=e[0],a=t.nextPart.get(n),s=a?fa(e.slice(1),a):void 0;if(s)return s;if(0===t.validators.length)return;const i=e.join("-");return null==(r=t.validators.find(({validator:e})=>e(i)))?void 0:r.classGroupId},xa=/^\[(.+)\]$/,ya=e=>{if(xa.test(e)){const t=xa.exec(e)[1],r=null==t?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},va=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return wa(Object.entries(e.classGroups),r).forEach(([e,r])=>{ga(r,n,e,t)}),n},ga=(e,t,r,n)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:ba(t,e)).classGroupId=r)}if("function"==typeof e)return ja(e)?void ga(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(([e,a])=>{ga(a,ba(t,e),r,n)})})},ba=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},ja=e=>e.isThemeGetter,wa=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,Na=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(a,s)=>{r.set(a,s),t++,t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(a(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):a(e,t)}}},Sa=e=>{const{separator:t,experimentalParseClassName:r}=e,n=1===t.length,a=t[0],s=t.length,i=e=>{const r=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===a&&(n||e.slice(u,u+s)===t)){r.push(e.slice(l,u)),l=u+s;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===r.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:r,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return r?e=>r({className:e,parseClassName:i}):i},ka=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},_a=/\s+/;function Oa(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Ca(e))&&(n&&(n+=" "),n+=t);return n}const Ca=e=>{if("string"==typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Ca(e[n]))&&(r&&(r+=" "),r+=t);return r};function Aa(e,...t){let r,n,a,s=function(o){const l=t.reduce((e,t)=>t(e),e());return r=(e=>({cache:Na(e.cacheSize),parseClassName:Sa(e),...pa(e)}))(l),n=r.cache.get,a=r.cache.set,s=i,i(o)};function i(e){const t=n(e);if(t)return t;const s=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,s=[],i=e.trim().split(_a);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=r(e);let h=Boolean(u),m=n(h?d.substring(0,u):d);if(!m){if(!h){o=e+(o.length>0?" "+o:o);continue}if(m=n(d),!m){o=e+(o.length>0?" "+o:o);continue}h=!1}const p=ka(t).join(":"),f=c?p+"!":p,x=f+m;if(s.includes(x))continue;s.push(x);const y=a(m,h);for(let r=0;r<y.length;++r){const e=y[r];s.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,r);return a(e,s),s}return function(){return s(Oa.apply(null,arguments))}}const Ea=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Pa=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ta=/^\d+\/\d+$/,Ma=new Set(["px","full","screen"]),Da=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ia=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ra=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Fa=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,La=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ba=e=>za(e)||Ma.has(e)||Ta.test(e),qa=e=>es(e,"length",ts),za=e=>Boolean(e)&&!Number.isNaN(Number(e)),$a=e=>es(e,"number",za),Ua=e=>Boolean(e)&&Number.isInteger(Number(e)),Va=e=>e.endsWith("%")&&za(e.slice(0,-1)),Wa=e=>Pa.test(e),Ha=e=>Da.test(e),Ka=new Set(["length","size","percentage"]),Ya=e=>es(e,Ka,rs),Ga=e=>es(e,"position",rs),Xa=new Set(["image","url"]),Qa=e=>es(e,Xa,as),Ja=e=>es(e,"",ns),Za=()=>!0,es=(e,t,r)=>{const n=Pa.exec(e);return!!n&&(n[1]?"string"==typeof t?n[1]===t:t.has(n[1]):r(n[2]))},ts=e=>Ia.test(e)&&!Ra.test(e),rs=()=>!1,ns=e=>Fa.test(e),as=e=>La.test(e),ss=Aa(()=>{const e=Ea("colors"),t=Ea("spacing"),r=Ea("blur"),n=Ea("brightness"),a=Ea("borderColor"),s=Ea("borderRadius"),i=Ea("borderSpacing"),o=Ea("borderWidth"),l=Ea("contrast"),c=Ea("grayscale"),d=Ea("hueRotate"),u=Ea("invert"),h=Ea("gap"),m=Ea("gradientColorStops"),p=Ea("gradientColorStopPositions"),f=Ea("inset"),x=Ea("margin"),y=Ea("opacity"),v=Ea("padding"),g=Ea("saturate"),b=Ea("scale"),j=Ea("sepia"),w=Ea("skew"),N=Ea("space"),S=Ea("translate"),k=()=>["auto",Wa,t],_=()=>[Wa,t],O=()=>["",Ba,qa],C=()=>["auto",za,Wa],A=()=>["","0",Wa],E=()=>[za,Wa];return{cacheSize:500,separator:":",theme:{colors:[Za],spacing:[Ba,qa],blur:["none","",Ha,Wa],brightness:E(),borderColor:[e],borderRadius:["none","","full",Ha,Wa],borderSpacing:_(),borderWidth:O(),contrast:E(),grayscale:A(),hueRotate:E(),invert:A(),gap:_(),gradientColorStops:[e],gradientColorStopPositions:[Va,qa],inset:k(),margin:k(),opacity:E(),padding:_(),saturate:E(),scale:E(),sepia:A(),skew:E(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",Wa]}],container:["container"],columns:[{columns:[Ha]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Wa]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ua,Wa]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Wa]}],grow:[{grow:A()}],shrink:[{shrink:A()}],order:[{order:["first","last","none",Ua,Wa]}],"grid-cols":[{"grid-cols":[Za]}],"col-start-end":[{col:["auto",{span:["full",Ua,Wa]},Wa]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[Za]}],"row-start-end":[{row:["auto",{span:[Ua,Wa]},Wa]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Wa]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Wa]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Wa,t]}],"min-w":[{"min-w":[Wa,t,"min","max","fit"]}],"max-w":[{"max-w":[Wa,t,"none","full","min","max","fit","prose",{screen:[Ha]},Ha]}],h:[{h:[Wa,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Wa,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Wa,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Wa,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ha,qa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",$a]}],"font-family":[{font:[Za]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Wa]}],"line-clamp":[{"line-clamp":["none",za,$a]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ba,Wa]}],"list-image":[{"list-image":["none",Wa]}],"list-style-type":[{list:["none","disc","decimal",Wa]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ba,qa]}],"underline-offset":[{"underline-offset":["auto",Ba,Wa]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Wa]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Wa]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Ga]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ya]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Qa]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Ba,Wa]}],"outline-w":[{outline:[Ba,qa]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ba,qa]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ha,Ja]}],"shadow-color":[{shadow:[Za]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ha,Wa]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[g]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[g]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Wa]}],duration:[{duration:E()}],ease:[{ease:["linear","in","out","in-out",Wa]}],delay:[{delay:E()}],animate:[{animate:["none","spin","ping","pulse","bounce",Wa]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Ua,Wa]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Wa]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Wa]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Wa]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ba,qa,$a]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function is(...e){return ss(Vr(e))}const os=Rr,ls=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(Fr,{ref:r,className:is("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));ls.displayName=Fr.displayName;const cs=Kr("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ds=Ct.forwardRef(({className:e,variant:t,...r},n)=>Ae.jsx(Lr,{ref:n,className:is(cs({variant:t}),e),...r}));ds.displayName=Lr.displayName;Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(zr,{ref:r,className:is("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=zr.displayName;const us=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx($r,{ref:r,className:is("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:Ae.jsx(ma,{className:"h-4 w-4"})}));us.displayName=$r.displayName;const hs=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(Br,{ref:r,className:is("text-sm font-semibold",e),...t}));hs.displayName=Br.displayName;const ms=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(qr,{ref:r,className:is("text-sm opacity-90",e),...t}));function ps(){const{toasts:e}=Jt();return Ae.jsxs(os,{children:[e.map(function({id:e,title:t,description:r,action:n,...a}){return Ae.jsxs(ds,{...a,children:[Ae.jsxs("div",{className:"grid gap-1",children:[t&&Ae.jsx(hs,{children:t}),r&&Ae.jsx(ms,{children:r})]}),n,Ae.jsx(us,{})]},e)}),Ae.jsx(ls,{})]})}ms.displayName=qr.displayName;var fs=(e,t,r,n,a,s,i,o)=>{let l=document.documentElement,c=["light","dark"];function d(t){(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&s?a.map(e=>s[e]||e):a;r?(l.classList.remove(...n),l.classList.add(s&&s[t]?s[t]:t)):l.setAttribute(e,t)}),function(e){o&&c.includes(e)&&(l.style.colorScheme=e)}(t)}if(n)d(n);else try{let e=localStorage.getItem(t)||r;d(i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)}catch(u){}},xs=Ct.createContext(void 0),ys={setTheme:e=>{},themes:[]};Ct.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:s,value:i,themes:o,nonce:l,scriptProps:c})=>{let d=JSON.stringify([r,t,s,e,o,i,n,a]).slice(1,-1);return Ct.createElement("script",{...c,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?l:"",dangerouslySetInnerHTML:{__html:`(${fs.toString()})(${d})`}})});var vs=Array(12).fill(0),gs=({visible:e,className:t})=>At.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},At.createElement("div",{className:"sonner-spinner"},vs.map((e,t)=>At.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),bs=At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},At.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),js=At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},At.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ws=At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},At.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ns=At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},At.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ss=At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},At.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),At.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ks=1,_s=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:ks++,s=this.toasts.find(e=>e.id===a),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),s?this.toasts=this.toasts.map(t=>t.id===a?(this.publish({...t,...e,id:a,title:r}),{...t,...e,id:a,dismissible:i,title:r}):t):this.addToast({title:r,...n,dismissible:i,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;void 0!==t.loading&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let n,a=e instanceof Promise?e:e(),s=void 0!==r,i=a.then(async e=>{if(n=["resolve",e],At.isValidElement(e))s=!1,this.create({id:r,type:"default",message:e});else if(Os(e)&&!e.ok){s=!1;let n="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,a="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:r,type:"error",message:n,description:a})}else if(void 0!==t.success){s=!1;let n="function"==typeof t.success?await t.success(e):t.success,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:r,type:"success",message:n,description:a})}}).catch(async e=>{if(n=["reject",e],void 0!==t.error){s=!1;let n="function"==typeof t.error?await t.error(e):t.error,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:r,type:"error",message:n,description:a})}}).finally(()=>{var e;s&&(this.dismiss(r),r=void 0),null==(e=t.finally)||e.call(t)}),o=()=>new Promise((e,t)=>i.then(()=>"reject"===n[0]?t(n[1]):e(n[1])).catch(t));return"string"!=typeof r&&"number"!=typeof r?{unwrap:o}:Object.assign(r,{unwrap:o})},this.custom=(e,t)=>{let r=(null==t?void 0:t.id)||ks++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Os=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Cs=(e,t)=>{let r=(null==t?void 0:t.id)||ks++;return _s.addToast({title:e,...t,id:r}),r},As=Object.assign(Cs,{success:_s.success,info:_s.info,warning:_s.warning,error:_s.error,custom:_s.custom,message:_s.message,promise:_s.promise,dismiss:_s.dismiss,loading:_s.loading},{getHistory:()=>_s.toasts,getToasts:()=>_s.getActiveToasts()});function Es(e){return void 0!==e.label}!function(e,{insertAt:t}={}){if(!e||"undefined"==typeof document)return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===t&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var Ps=3,Ts=14;function Ms(...e){return e.filter(Boolean).join(" ")}var Ds=e=>{var t,r,n,a,s,i,o,l,c,d,u;let{invert:h,toast:m,unstyled:p,interacting:f,setHeights:x,visibleToasts:y,heights:v,index:g,toasts:b,expanded:j,removeToast:w,defaultRichColors:N,closeButton:S,style:k,cancelButtonStyle:_,actionButtonStyle:O,className:C="",descriptionClassName:A="",duration:E,position:P,gap:T,loadingIcon:M,expandByDefault:D,classNames:I,icons:R,closeButtonAriaLabel:F="Close toast",pauseWhenPageIsHidden:L}=e,[B,q]=At.useState(null),[z,$]=At.useState(null),[U,V]=At.useState(!1),[W,H]=At.useState(!1),[K,Y]=At.useState(!1),[G,X]=At.useState(!1),[Q,J]=At.useState(!1),[Z,ee]=At.useState(0),[te,re]=At.useState(0),ne=At.useRef(m.duration||E||4e3),ae=At.useRef(null),se=At.useRef(null),ie=0===g,oe=g+1<=y,le=m.type,ce=!1!==m.dismissible,de=m.className||"",ue=m.descriptionClassName||"",he=At.useMemo(()=>v.findIndex(e=>e.toastId===m.id)||0,[v,m.id]),me=At.useMemo(()=>{var e;return null!=(e=m.closeButton)?e:S},[m.closeButton,S]),pe=At.useMemo(()=>m.duration||E||4e3,[m.duration,E]),fe=At.useRef(0),xe=At.useRef(0),ye=At.useRef(0),ve=At.useRef(null),[ge,be]=P.split("-"),je=At.useMemo(()=>v.reduce((e,t,r)=>r>=he?e:e+t.height,0),[v,he]),we=(()=>{let[e,t]=At.useState(document.hidden);return At.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),Ne=m.invert||h,Se="loading"===le;xe.current=At.useMemo(()=>he*T+je,[he,je]),At.useEffect(()=>{ne.current=pe},[pe]),At.useEffect(()=>{V(!0)},[]),At.useEffect(()=>{let e=se.current;if(e){let t=e.getBoundingClientRect().height;return re(t),x(e=>[{toastId:m.id,height:t,position:m.position},...e]),()=>x(e=>e.filter(e=>e.toastId!==m.id))}},[x,m.id]),At.useLayoutEffect(()=>{if(!U)return;let e=se.current,t=e.style.height;e.style.height="auto";let r=e.getBoundingClientRect().height;e.style.height=t,re(r),x(e=>e.find(e=>e.toastId===m.id)?e.map(e=>e.toastId===m.id?{...e,height:r}:e):[{toastId:m.id,height:r,position:m.position},...e])},[U,m.title,m.description,x,m.id]);let ke=At.useCallback(()=>{H(!0),ee(xe.current),x(e=>e.filter(e=>e.toastId!==m.id)),setTimeout(()=>{w(m)},200)},[m,w,x,xe]);return At.useEffect(()=>{if(m.promise&&"loading"===le||m.duration===1/0||"loading"===m.type)return;let e;return j||f||L&&we?(()=>{if(ye.current<fe.current){let e=(new Date).getTime()-fe.current;ne.current=ne.current-e}ye.current=(new Date).getTime()})():ne.current!==1/0&&(fe.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=m.onAutoClose)||e.call(m,m),ke()},ne.current)),()=>clearTimeout(e)},[j,f,m,le,L,we,ke]),At.useEffect(()=>{m.delete&&ke()},[ke,m.delete]),At.createElement("li",{tabIndex:0,ref:se,className:Ms(C,de,null==I?void 0:I.toast,null==(t=null==m?void 0:m.classNames)?void 0:t.toast,null==I?void 0:I.default,null==I?void 0:I[le],null==(r=null==m?void 0:m.classNames)?void 0:r[le]),"data-sonner-toast":"","data-rich-colors":null!=(n=m.richColors)?n:N,"data-styled":!(m.jsx||m.unstyled||p),"data-mounted":U,"data-promise":!!m.promise,"data-swiped":Q,"data-removed":W,"data-visible":oe,"data-y-position":ge,"data-x-position":be,"data-index":g,"data-front":ie,"data-swiping":K,"data-dismissible":ce,"data-type":le,"data-invert":Ne,"data-swipe-out":G,"data-swipe-direction":z,"data-expanded":!!(j||D&&U),style:{"--index":g,"--toasts-before":g,"--z-index":b.length-g,"--offset":`${W?Z:xe.current}px`,"--initial-height":D?"auto":`${te}px`,...k,...m.style},onDragEnd:()=>{Y(!1),q(null),ve.current=null},onPointerDown:e=>{Se||!ce||(ae.current=new Date,ee(xe.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(Y(!0),ve.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,r,n;if(G||!ce)return;ve.current=null;let a=Number((null==(e=se.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),s=Number((null==(t=se.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),i=(new Date).getTime()-(null==(r=ae.current)?void 0:r.getTime()),o="x"===B?a:s,l=Math.abs(o)/i;if(Math.abs(o)>=20||l>.11)return ee(xe.current),null==(n=m.onDismiss)||n.call(m,m),$("x"===B?a>0?"right":"left":s>0?"down":"up"),ke(),X(!0),void J(!1);Y(!1),q(null)},onPointerMove:t=>{var r,n,a,s;if(!ve.current||!ce||(null==(r=window.getSelection())?void 0:r.toString().length)>0)return;let i=t.clientY-ve.current.y,o=t.clientX-ve.current.x,l=null!=(n=e.swipeDirections)?n:function(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}(P);!B&&(Math.abs(o)>1||Math.abs(i)>1)&&q(Math.abs(o)>Math.abs(i)?"x":"y");let c={x:0,y:0};"y"===B?(l.includes("top")||l.includes("bottom"))&&(l.includes("top")&&i<0||l.includes("bottom")&&i>0)&&(c.y=i):"x"===B&&(l.includes("left")||l.includes("right"))&&(l.includes("left")&&o<0||l.includes("right")&&o>0)&&(c.x=o),(Math.abs(c.x)>0||Math.abs(c.y)>0)&&J(!0),null==(a=se.current)||a.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(s=se.current)||s.style.setProperty("--swipe-amount-y",`${c.y}px`)}},me&&!m.jsx?At.createElement("button",{"aria-label":F,"data-disabled":Se,"data-close-button":!0,onClick:Se||!ce?()=>{}:()=>{var e;ke(),null==(e=m.onDismiss)||e.call(m,m)},className:Ms(null==I?void 0:I.closeButton,null==(a=null==m?void 0:m.classNames)?void 0:a.closeButton)},null!=(s=null==R?void 0:R.close)?s:Ss):null,m.jsx||Ct.isValidElement(m.title)?m.jsx?m.jsx:"function"==typeof m.title?m.title():m.title:At.createElement(At.Fragment,null,le||m.icon||m.promise?At.createElement("div",{"data-icon":"",className:Ms(null==I?void 0:I.icon,null==(i=null==m?void 0:m.classNames)?void 0:i.icon)},m.promise||"loading"===m.type&&!m.icon?m.icon||(null!=R&&R.loading?At.createElement("div",{className:Ms(null==I?void 0:I.loader,null==(_e=null==m?void 0:m.classNames)?void 0:_e.loader,"sonner-loader"),"data-visible":"loading"===le},R.loading):M?At.createElement("div",{className:Ms(null==I?void 0:I.loader,null==(Oe=null==m?void 0:m.classNames)?void 0:Oe.loader,"sonner-loader"),"data-visible":"loading"===le},M):At.createElement(gs,{className:Ms(null==I?void 0:I.loader,null==(Ce=null==m?void 0:m.classNames)?void 0:Ce.loader),visible:"loading"===le})):null,"loading"!==m.type?m.icon||(null==R?void 0:R[le])||(e=>{switch(e){case"success":return bs;case"info":return ws;case"warning":return js;case"error":return Ns;default:return null}})(le):null):null,At.createElement("div",{"data-content":"",className:Ms(null==I?void 0:I.content,null==(o=null==m?void 0:m.classNames)?void 0:o.content)},At.createElement("div",{"data-title":"",className:Ms(null==I?void 0:I.title,null==(l=null==m?void 0:m.classNames)?void 0:l.title)},"function"==typeof m.title?m.title():m.title),m.description?At.createElement("div",{"data-description":"",className:Ms(A,ue,null==I?void 0:I.description,null==(c=null==m?void 0:m.classNames)?void 0:c.description)},"function"==typeof m.description?m.description():m.description):null),Ct.isValidElement(m.cancel)?m.cancel:m.cancel&&Es(m.cancel)?At.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||_,onClick:e=>{var t,r;Es(m.cancel)&&ce&&(null==(r=(t=m.cancel).onClick)||r.call(t,e),ke())},className:Ms(null==I?void 0:I.cancelButton,null==(d=null==m?void 0:m.classNames)?void 0:d.cancelButton)},m.cancel.label):null,Ct.isValidElement(m.action)?m.action:m.action&&Es(m.action)?At.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||O,onClick:e=>{var t,r;Es(m.action)&&(null==(r=(t=m.action).onClick)||r.call(t,e),!e.defaultPrevented&&ke())},className:Ms(null==I?void 0:I.actionButton,null==(u=null==m?void 0:m.classNames)?void 0:u.actionButton)},m.action.label):null));var _e,Oe,Ce};function Is(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function Rs(e,t){let r={};return[e,t].forEach((e,t)=>{let n=1===t,a=n?"--mobile-offset":"--offset",s=n?"16px":"32px";function i(e){["top","right","bottom","left"].forEach(t=>{r[`${a}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?i(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?r[`${a}-${t}`]=s:r[`${a}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):i(s)}),r}var Fs=Ct.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:s,closeButton:i,className:o,offset:l,mobileOffset:c,theme:d="light",richColors:u,duration:h,style:m,visibleToasts:p=Ps,toastOptions:f,dir:x=Is(),gap:y=Ts,loadingIcon:v,icons:g,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:j}=e,[w,N]=At.useState([]),S=At.useMemo(()=>Array.from(new Set([n].concat(w.filter(e=>e.position).map(e=>e.position)))),[w,n]),[k,_]=At.useState([]),[O,C]=At.useState(!1),[A,E]=At.useState(!1),[P,T]=At.useState("system"!==d?d:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=At.useRef(null),D=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=At.useRef(null),R=At.useRef(!1),F=At.useCallback(e=>{N(t=>{var r;return null!=(r=t.find(t=>t.id===e.id))&&r.delete||_s.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return At.useEffect(()=>_s.subscribe(e=>{e.dismiss?N(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t)):setTimeout(()=>{Et.flushSync(()=>{N(t=>{let r=t.findIndex(t=>t.id===e.id);return-1!==r?[...t.slice(0,r),{...t[r],...e},...t.slice(r+1)]:[e,...t]})})})}),[]),At.useEffect(()=>{if("system"!==d)return void T(d);if("system"===d&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?T("dark"):T("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{T(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{T(e?"dark":"light")}catch(t){console.error(t)}})}},[d]),At.useEffect(()=>{w.length<=1&&C(!1)},[w]),At.useEffect(()=>{let e=e=>{var t,r;a.every(t=>e[t]||e.code===t)&&(C(!0),null==(t=M.current)||t.focus()),"Escape"===e.code&&(document.activeElement===M.current||null!=(r=M.current)&&r.contains(document.activeElement))&&C(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),At.useEffect(()=>{if(M.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,R.current=!1)}},[M.current]),At.createElement("section",{ref:t,"aria-label":`${b} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((t,n)=>{var a;let[d,b]=t.split("-");return w.length?At.createElement("ol",{key:t,dir:"auto"===x?Is():x,tabIndex:-1,ref:M,className:o,"data-sonner-toaster":!0,"data-theme":P,"data-y-position":d,"data-lifted":O&&w.length>1&&!s,"data-x-position":b,style:{"--front-toast-height":`${(null==(a=k[0])?void 0:a.height)||0}px`,"--width":"356px","--gap":`${y}px`,...m,...Rs(l,c)},onBlur:e=>{R.current&&!e.currentTarget.contains(e.relatedTarget)&&(R.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||R.current||(R.current=!0,I.current=e.relatedTarget)},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{A||C(!1)},onDragEnd:()=>C(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||E(!0)},onPointerUp:()=>E(!1)},w.filter(e=>!e.position&&0===n||e.position===t).map((n,a)=>{var o,l;return At.createElement(Ds,{key:n.id,icons:g,index:a,toast:n,defaultRichColors:u,duration:null!=(o=null==f?void 0:f.duration)?o:h,className:null==f?void 0:f.className,descriptionClassName:null==f?void 0:f.descriptionClassName,invert:r,visibleToasts:p,closeButton:null!=(l=null==f?void 0:f.closeButton)?l:i,interacting:A,position:t,style:null==f?void 0:f.style,unstyled:null==f?void 0:f.unstyled,classNames:null==f?void 0:f.classNames,cancelButtonStyle:null==f?void 0:f.cancelButtonStyle,actionButtonStyle:null==f?void 0:f.actionButtonStyle,removeToast:F,toasts:w.filter(e=>e.position==n.position),heights:k.filter(e=>e.position==n.position),setHeights:_,expandByDefault:s,gap:y,loadingIcon:v,expanded:O,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const Ls=({...e})=>{const{theme:t="system"}=null!=(r=Ct.useContext(xs))?r:ys;var r;return Ae.jsx(Fs,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var[Bs,qs]=Te("Tooltip",[Ue]),zs=Ue(),$s="TooltipProvider",Us=700,Vs="tooltip.open",[Ws,Hs]=Bs($s),Ks=e=>{const{__scopeTooltip:t,delayDuration:r=Us,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:s}=e,i=Ct.useRef(!0),o=Ct.useRef(!1),l=Ct.useRef(0);return Ct.useEffect(()=>{const e=l.current;return()=>window.clearTimeout(e)},[]),Ae.jsx(Ws,{scope:t,isOpenDelayedRef:i,delayDuration:r,onOpen:Ct.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:Ct.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:Ct.useCallback(e=>{o.current=e},[]),disableHoverableContent:a,children:s})};Ks.displayName=$s;var Ys="Tooltip",[Gs,Xs]=Bs(Ys),Qs="TooltipTrigger";Ct.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Xs(Qs,r),s=Hs(Qs,r),i=zs(r),o=Ct.useRef(null),l=Me(t,o,a.onTriggerChange),c=Ct.useRef(!1),d=Ct.useRef(!1),u=Ct.useCallback(()=>c.current=!1,[]);return Ct.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),Ae.jsx(Ve,{asChild:!0,...i,children:Ae.jsx(Ee.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:l,onPointerMove:Le(e.onPointerMove,e=>{"touch"!==e.pointerType&&(d.current||s.isPointerInTransitRef.current||(a.onTriggerEnter(),d.current=!0))}),onPointerLeave:Le(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Le(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:Le(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:Le(e.onBlur,a.onClose),onClick:Le(e.onClick,a.onClose)})})}).displayName=Qs;var[Js,Zs]=Bs("TooltipPortal",{forceMount:void 0}),ei="TooltipContent",ti=Ct.forwardRef((e,t)=>{const r=Zs(ei,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...s}=e,i=Xs(ei,e.__scopeTooltip);return Ae.jsx(Re,{present:n||i.open,children:i.disableHoverableContent?Ae.jsx(ii,{side:a,...s,ref:t}):Ae.jsx(ri,{side:a,...s,ref:t})})}),ri=Ct.forwardRef((e,t)=>{const r=Xs(ei,e.__scopeTooltip),n=Hs(ei,e.__scopeTooltip),a=Ct.useRef(null),s=Me(t,a),[i,o]=Ct.useState(null),{trigger:l,onClose:c}=r,d=a.current,{onPointerInTransitChange:u}=n,h=Ct.useCallback(()=>{o(null),u(!1)},[u]),m=Ct.useCallback((e,t)=>{const r=e.currentTarget,n={x:e.clientX,y:e.clientY},a=function(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(n,function(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,a,s)){case s:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}(n,r.getBoundingClientRect())),s=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const r=e[n];for(;t.length>=2;){const e=t[t.length-1],n=t[t.length-2];if(!((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x)))break;t.pop()}t.push(r)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const t=e[n];for(;r.length>=2;){const e=r[r.length-1],n=r[r.length-2];if(!((e.x-n.x)*(t.y-n.y)>=(e.y-n.y)*(t.x-n.x)))break;r.pop()}r.push(t)}return r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}(t)}([...a,...function(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}(t.getBoundingClientRect())]);o(s),u(!0)},[u]);return Ct.useEffect(()=>()=>h(),[h]),Ct.useEffect(()=>{if(l&&d){const e=e=>m(e,d),t=e=>m(e,l);return l.addEventListener("pointerleave",e),d.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),d.removeEventListener("pointerleave",t)}}},[l,d,m,h]),Ct.useEffect(()=>{if(i){const e=e=>{const t=e.target,r={x:e.clientX,y:e.clientY},n=(null==l?void 0:l.contains(t))||(null==d?void 0:d.contains(t)),a=!function(e,t){const{x:r,y:n}=e;let a=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const e=t[s],o=t[i],l=e.x,c=e.y,d=o.x,u=o.y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(a=!a)}return a}(r,i);n?h():a&&(h(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,d,i,c,h]),Ae.jsx(ii,{...e,ref:s})}),[ni,ai]=Bs(Ys,{isInside:!1}),si=Ye("TooltipContent"),ii=Ct.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:i,...o}=e,l=Xs(ei,r),c=zs(r),{onClose:d}=l;return Ct.useEffect(()=>(document.addEventListener(Vs,d),()=>document.removeEventListener(Vs,d)),[d]),Ct.useEffect(()=>{if(l.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(l.trigger))&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,d]),Ae.jsx(We,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:Ae.jsxs(He,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Ae.jsx(si,{children:n}),Ae.jsx(ni,{scope:r,isInside:!0,children:Ae.jsx(tr,{id:l.contentId,role:"tooltip",children:a||n})})]})})});ti.displayName=ei;var oi="TooltipArrow";Ct.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=zs(r);return ai(oi,r).isInside?null:Ae.jsx(Ke,{...a,...n,ref:t})}).displayName=oi;var li=ti;function ci(...e){return ss(Vr(e))}const di=Ks;Ct.forwardRef(({className:e,sideOffset:t=4,...r},n)=>Ae.jsx(li,{ref:n,sideOffset:t,className:ci("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})).displayName=li.displayName;var ui=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hi="undefined"==typeof window||"Deno"in globalThis;function mi(){}function pi(e){return"number"==typeof e&&e>=0&&e!==1/0}function fi(e,t){return Math.max(e+(t||0)-Date.now(),0)}function xi(e,t){return"function"==typeof e?e(t):e}function yi(e,t){return"function"==typeof e?e(t):e}function vi(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:s,queryKey:i,stale:o}=e;if(i)if(n){if(t.queryHash!==bi(i,t.options))return!1}else if(!wi(t.queryKey,i))return!1;if("all"!==r){const e=t.isActive();if("active"===r&&!e)return!1;if("inactive"===r&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!a||a===t.state.fetchStatus)&&!(s&&!s(t)))}function gi(e,t){const{exact:r,status:n,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(ji(t.options.mutationKey)!==ji(s))return!1}else if(!wi(t.options.mutationKey,s))return!1}return(!n||t.state.status===n)&&!(a&&!a(t))}function bi(e,t){return((null==t?void 0:t.queryKeyHashFn)||ji)(e)}function ji(e){return JSON.stringify(e,(e,t)=>_i(t)?Object.keys(t).sort().reduce((e,r)=>(e[r]=t[r],e),{}):t)}function wi(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(r=>wi(e[r],t[r])))}function Ni(e,t){if(e===t)return e;const r=ki(e)&&ki(t);if(r||_i(e)&&_i(t)){const n=r?e:Object.keys(e),a=n.length,s=r?t:Object.keys(t),i=s.length,o=r?[]:{},l=new Set(n);let c=0;for(let d=0;d<i;d++){const n=r?d:s[d];(!r&&l.has(n)||r)&&void 0===e[n]&&void 0===t[n]?(o[n]=void 0,c++):(o[n]=Ni(e[n],t[n]),o[n]===e[n]&&void 0!==e[n]&&c++)}return a===i&&c===a?e:o}return t}function Si(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function ki(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function _i(e){if(!Oi(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!!Oi(r)&&(!!r.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function Oi(e){return"[object Object]"===Object.prototype.toString.call(e)}function Ci(e,t,r){return"function"==typeof r.structuralSharing?r.structuralSharing(e,t):!1!==r.structuralSharing?Ni(e,t):t}function Ai(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Ei(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Pi=Symbol();function Ti(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==Pi?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}var Mi=new(n=class extends ui{constructor(){super(),ke(this,e,void 0),ke(this,t,void 0),ke(this,r,void 0),_e(this,r,e=>{if(!hi&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){Se(this,t)||this.setEventListener(Se(this,r))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=Se(this,t))||e.call(this),_e(this,t,void 0))}setEventListener(e){var n;_e(this,r,e),null==(n=Se(this,t))||n.call(this),_e(this,t,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(t){Se(this,e)!==t&&(_e(this,e,t),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var t;return"boolean"==typeof Se(this,e)?Se(this,e):"hidden"!==(null==(t=globalThis.document)?void 0:t.visibilityState)}},e=new WeakMap,t=new WeakMap,r=new WeakMap,n),Di=new(o=class extends ui{constructor(){super(),ke(this,a,!0),ke(this,s,void 0),ke(this,i,void 0),_e(this,i,e=>{if(!hi&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){Se(this,s)||this.setEventListener(Se(this,i))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=Se(this,s))||e.call(this),_e(this,s,void 0))}setEventListener(e){var t;_e(this,i,e),null==(t=Se(this,s))||t.call(this),_e(this,s,e(this.setOnline.bind(this)))}setOnline(e){Se(this,a)!==e&&(_e(this,a,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return Se(this,a)}},a=new WeakMap,s=new WeakMap,i=new WeakMap,o);function Ii(){let e,t;const r=new Promise((r,n)=>{e=r,t=n});function n(e){Object.assign(r,e),delete r.resolve,delete r.reject}return r.status="pending",r.catch(()=>{}),r.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},r.reject=e=>{n({status:"rejected",reason:e}),t(e)},r}function Ri(e){return Math.min(1e3*2**e,3e4)}function Fi(e){return"online"!==(e??"online")||Di.isOnline()}var Li=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function Bi(e){let t,r=!1,n=0;const a=Ii(),s=()=>"pending"!==a.status,i=()=>Mi.isFocused()&&("always"===e.networkMode||Di.isOnline())&&e.canRun(),o=()=>Fi(e.networkMode)&&e.canRun(),l=e=>{s()||(null==t||t(),a.resolve(e))},c=e=>{s()||(null==t||t(),a.reject(e))},d=()=>new Promise(r=>{var n;t=e=>{(s()||i())&&r(e)},null==(n=e.onPause)||n.call(e)}).then(()=>{var r;t=void 0,s()||null==(r=e.onContinue)||r.call(e)}),u=()=>{if(s())return;let t;const a=0===n?e.initialPromise:void 0;try{t=a??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{var a;if(s())return;const o=e.retry??(hi?0:3),l=e.retryDelay??Ri,h="function"==typeof l?l(n,t):l,m=!0===o||"number"==typeof o&&n<o||"function"==typeof o&&o(n,t);var p;!r&&m?(n++,null==(a=e.onFail)||a.call(e,n,t),(p=h,new Promise(e=>{setTimeout(e,p)})).then(()=>i()?void 0:d()).then(()=>{r?c(t):u()})):c(t)})};return{promise:a,status:()=>a.status,cancel:t=>{var r;s()||(c(new Li(t)),null==(r=e.abort)||r.call(e))},continue:()=>(null==t||t(),a),cancelRetry:()=>{r=!0},continueRetry:()=>{r=!1},canStart:o,start:()=>(o()?u():d().then(u),a)}}var qi=e=>setTimeout(e,0);var zi=function(){let e=[],t=0,r=e=>{e()},n=e=>{e()},a=qi;const s=n=>{t?e.push(n):a(()=>{r(n)})};return{batch:s=>{let i;t++;try{i=s()}finally{t--,t||(()=>{const t=e;e=[],t.length&&a(()=>{n(()=>{t.forEach(e=>{r(e)})})})})()}return i},batchCalls:e=>(...t)=>{s(()=>{e(...t)})},schedule:s,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{a=e}}}(),$i=(c=class{constructor(){ke(this,l,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pi(this.gcTime)&&_e(this,l,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(hi?1/0:3e5))}clearGcTimeout(){Se(this,l)&&(clearTimeout(Se(this,l)),_e(this,l,void 0))}},l=new WeakMap,c),Ui=(g=class extends $i{constructor(e){super(),ke(this,y),ke(this,d,void 0),ke(this,u,void 0),ke(this,h,void 0),ke(this,m,void 0),ke(this,p,void 0),ke(this,f,void 0),ke(this,x,void 0),_e(this,x,!1),_e(this,f,e.defaultOptions),this.setOptions(e.options),this.observers=[],_e(this,m,e.client),_e(this,h,Se(this,m).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,_e(this,d,function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,n=r?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=e.state??Se(this,d),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=Se(this,p))?void 0:e.promise}setOptions(e){this.options={...Se(this,f),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||Se(this,h).remove(this)}setData(e,t){const r=Ci(this.state.data,e,this.options);return Ce(this,y,v).call(this,{data:r,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),r}setState(e,t){Ce(this,y,v).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,r;const n=null==(t=Se(this,p))?void 0:t.promise;return null==(r=Se(this,p))||r.cancel(e),n?n.then(mi).catch(mi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Se(this,d))}isActive(){return this.observers.some(e=>!1!==yi(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Pi||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===xi(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!fi(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null==t||t.refetch({cancelRefetch:!1}),null==(e=Se(this,p))||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null==t||t.refetch({cancelRefetch:!1}),null==(e=Se(this,p))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Se(this,h).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(Se(this,p)&&(Se(this,x)?Se(this,p).cancel({revert:!0}):Se(this,p).cancelRetry()),this.scheduleGc()),Se(this,h).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ce(this,y,v).call(this,{type:"invalidate"})}async fetch(e,t){var r,n,a,s,i,o,l,c,d,f,g,b;if("idle"!==this.state.fetchStatus&&"rejected"!==(null==(r=Se(this,p))?void 0:r.status()))if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(Se(this,p))return Se(this,p).continueRetry(),Se(this,p).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const j=new AbortController,w=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(_e(this,x,!0),j.signal)})},N=()=>{const e=Ti(this.options,t),r=(()=>{const e={client:Se(this,m),queryKey:this.queryKey,meta:this.meta};return w(e),e})();return _e(this,x,!1),this.options.persister?this.options.persister(e,r,this):e(r)},S=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:Se(this,m),state:this.state,fetchFn:N};return w(e),e})();null==(n=this.options.behavior)||n.onFetch(S,this),_e(this,u,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(a=S.fetchOptions)?void 0:a.meta)||Ce(this,y,v).call(this,{type:"fetch",meta:null==(s=S.fetchOptions)?void 0:s.meta}),_e(this,p,Bi({initialPromise:null==t?void 0:t.initialPromise,fn:S.fetchFn,abort:j.abort.bind(j),onFail:(e,t)=>{Ce(this,y,v).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Ce(this,y,v).call(this,{type:"pause"})},onContinue:()=>{Ce(this,y,v).call(this,{type:"continue"})},retry:S.options.retry,retryDelay:S.options.retryDelay,networkMode:S.options.networkMode,canRun:()=>!0}));try{const e=await Se(this,p).start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),null==(o=(i=Se(this,h).config).onSuccess)||o.call(i,e,this),null==(c=(l=Se(this,h).config).onSettled)||c.call(l,e,this.state.error,this),e}catch(k){if(k instanceof Li){if(k.silent)return Se(this,p).promise;if(k.revert){if(this.setState({...Se(this,u),fetchStatus:"idle"}),void 0===this.state.data)throw k;return this.state.data}}throw Ce(this,y,v).call(this,{type:"error",error:k}),null==(f=(d=Se(this,h).config).onError)||f.call(d,k,this),null==(b=(g=Se(this,h).config).onSettled)||b.call(g,this.state.data,k,this),k}finally{this.scheduleGc()}}},d=new WeakMap,u=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,f=new WeakMap,x=new WeakMap,y=new WeakSet,v=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...Vi(t.data,this.options),fetchMeta:e.meta??null};case"success":const r={...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return _e(this,u,e.manual?r:void 0),r;case"error":const n=e.error;return{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),zi.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),Se(this,h).notify({query:this,type:"updated",action:e})})},g);function Vi(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Fi(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var Wi=(j=class extends ui{constructor(e={}){super(),ke(this,b,void 0),this.config=e,_e(this,b,new Map)}build(e,t,r){const n=t.queryKey,a=t.queryHash??bi(n,t);let s=this.get(a);return s||(s=new Ui({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(s)),s}add(e){Se(this,b).has(e.queryHash)||(Se(this,b).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Se(this,b).get(e.queryHash);t&&(e.destroy(),t===e&&Se(this,b).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){zi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Se(this,b).get(e)}getAll(){return[...Se(this,b).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>vi(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>vi(e,t)):t}notify(e){zi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){zi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){zi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},b=new WeakMap,j),Hi=(O=class extends $i{constructor(e){super(),ke(this,k),ke(this,w,void 0),ke(this,N,void 0),ke(this,S,void 0),this.mutationId=e.mutationId,_e(this,N,e.mutationCache),_e(this,w,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Se(this,w).includes(e)||(Se(this,w).push(e),this.clearGcTimeout(),Se(this,N).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){_e(this,w,Se(this,w).filter(t=>t!==e)),this.scheduleGc(),Se(this,N).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Se(this,w).length||("pending"===this.state.status?this.scheduleGc():Se(this,N).remove(this))}continue(){var e;return(null==(e=Se(this,S))?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var t,r,n,a,s,i,o,l,c,d,u,h,m,p,f,x,y,v,g,b;const j=()=>{Ce(this,k,_).call(this,{type:"continue"})};_e(this,S,Bi({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{Ce(this,k,_).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Ce(this,k,_).call(this,{type:"pause"})},onContinue:j,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Se(this,N).canRun(this)}));const w="pending"===this.state.status,O=!Se(this,S).canStart();try{if(w)j();else{Ce(this,k,_).call(this,{type:"pending",variables:e,isPaused:O}),await(null==(r=(t=Se(this,N).config).onMutate)?void 0:r.call(t,e,this));const s=await(null==(a=(n=this.options).onMutate)?void 0:a.call(n,e));s!==this.state.context&&Ce(this,k,_).call(this,{type:"pending",context:s,variables:e,isPaused:O})}const m=await Se(this,S).start();return await(null==(i=(s=Se(this,N).config).onSuccess)?void 0:i.call(s,m,e,this.state.context,this)),await(null==(l=(o=this.options).onSuccess)?void 0:l.call(o,m,e,this.state.context)),await(null==(d=(c=Se(this,N).config).onSettled)?void 0:d.call(c,m,null,this.state.variables,this.state.context,this)),await(null==(h=(u=this.options).onSettled)?void 0:h.call(u,m,null,e,this.state.context)),Ce(this,k,_).call(this,{type:"success",data:m}),m}catch(C){try{throw await(null==(p=(m=Se(this,N).config).onError)?void 0:p.call(m,C,e,this.state.context,this)),await(null==(x=(f=this.options).onError)?void 0:x.call(f,C,e,this.state.context)),await(null==(v=(y=Se(this,N).config).onSettled)?void 0:v.call(y,void 0,C,this.state.variables,this.state.context,this)),await(null==(b=(g=this.options).onSettled)?void 0:b.call(g,void 0,C,e,this.state.context)),C}finally{Ce(this,k,_).call(this,{type:"error",error:C})}}finally{Se(this,N).runNext(this)}}},w=new WeakMap,N=new WeakMap,S=new WeakMap,k=new WeakSet,_=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),zi.batch(()=>{Se(this,w).forEach(t=>{t.onMutationUpdate(e)}),Se(this,N).notify({mutation:this,type:"updated",action:e})})},O);var Ki=(P=class extends ui{constructor(e={}){super(),ke(this,C,void 0),ke(this,A,void 0),ke(this,E,void 0),this.config=e,_e(this,C,new Set),_e(this,A,new Map),_e(this,E,0)}build(e,t,r){const n=new Hi({mutationCache:this,mutationId:++Oe(this,E)._,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){Se(this,C).add(e);const t=Yi(e);if("string"==typeof t){const r=Se(this,A).get(t);r?r.push(e):Se(this,A).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Se(this,C).delete(e)){const t=Yi(e);if("string"==typeof t){const r=Se(this,A).get(t);if(r)if(r.length>1){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&Se(this,A).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Yi(e);if("string"==typeof t){const r=Se(this,A).get(t),n=null==r?void 0:r.find(e=>"pending"===e.state.status);return!n||n===e}return!0}runNext(e){var t;const r=Yi(e);if("string"==typeof r){const n=null==(t=Se(this,A).get(r))?void 0:t.find(t=>t!==e&&t.state.isPaused);return(null==n?void 0:n.continue())??Promise.resolve()}return Promise.resolve()}clear(){zi.batch(()=>{Se(this,C).forEach(e=>{this.notify({type:"removed",mutation:e})}),Se(this,C).clear(),Se(this,A).clear()})}getAll(){return Array.from(Se(this,C))}find(e){const t={exact:!0,...e};return this.getAll().find(e=>gi(t,e))}findAll(e={}){return this.getAll().filter(t=>gi(e,t))}notify(e){zi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return zi.batch(()=>Promise.all(e.map(e=>e.continue().catch(mi))))}},C=new WeakMap,A=new WeakMap,E=new WeakMap,P);function Yi(e){var t;return null==(t=e.options.scope)?void 0:t.id}function Gi(e){return{onFetch:(t,r)=>{var n,a,s,i,o;const l=t.options,c=null==(s=null==(a=null==(n=t.fetchOptions)?void 0:n.meta)?void 0:a.fetchMore)?void 0:s.direction,d=(null==(i=t.state.data)?void 0:i.pages)||[],u=(null==(o=t.state.data)?void 0:o.pageParams)||[];let h={pages:[],pageParams:[]},m=0;const p=async()=>{let r=!1;const n=Ti(t.options,t.fetchOptions),a=async(e,a,s)=>{if(r)return Promise.reject();if(null==a&&e.pages.length)return Promise.resolve(e);const i=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:a,direction:s?"backward":"forward",meta:t.options.meta};var n;return n=e,Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",()=>{r=!0}),t.signal)}),e})(),o=await n(i),{maxPages:l}=t.options,c=s?Ei:Ai;return{pages:c(e.pages,o,l),pageParams:c(e.pageParams,a,l)}};if(c&&d.length){const e="backward"===c,t={pages:d,pageParams:u},r=(e?Qi:Xi)(l,t);h=await a(t,r,e)}else{const t=e??d.length;do{const e=0===m?u[0]??l.initialPageParam:Xi(l,h);if(m>0&&null==e)break;h=await a(h,e),m++}while(m<t)}return h};t.options.persister?t.fetchFn=()=>{var e,n;return null==(n=(e=t.options).persister)?void 0:n.call(e,p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=p}}}function Xi(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Qi(e,{pages:t,pageParams:r}){var n;return t.length>0?null==(n=e.getPreviousPageParam)?void 0:n.call(e,t[0],t,r[0],r):void 0}var Ji=(q=class{constructor(e={}){ke(this,T,void 0),ke(this,M,void 0),ke(this,D,void 0),ke(this,I,void 0),ke(this,R,void 0),ke(this,F,void 0),ke(this,L,void 0),ke(this,B,void 0),_e(this,T,e.queryCache||new Wi),_e(this,M,e.mutationCache||new Ki),_e(this,D,e.defaultOptions||{}),_e(this,I,new Map),_e(this,R,new Map),_e(this,F,0)}mount(){Oe(this,F)._++,1===Se(this,F)&&(_e(this,L,Mi.subscribe(async e=>{e&&(await this.resumePausedMutations(),Se(this,T).onFocus())})),_e(this,B,Di.subscribe(async e=>{e&&(await this.resumePausedMutations(),Se(this,T).onOnline())})))}unmount(){var e,t;Oe(this,F)._--,0===Se(this,F)&&(null==(e=Se(this,L))||e.call(this),_e(this,L,void 0),null==(t=Se(this,B))||t.call(this),_e(this,B,void 0))}isFetching(e){return Se(this,T).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Se(this,M).findAll({...e,status:"pending"}).length}getQueryData(e){var t;const r=this.defaultQueryOptions({queryKey:e});return null==(t=Se(this,T).get(r.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Se(this,T).build(this,t),n=r.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(xi(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Se(this,T).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=Se(this,T).get(n.queryHash),s=function(e,t){return"function"==typeof e?e(t):e}(t,null==a?void 0:a.state.data);if(void 0!==s)return Se(this,T).build(this,n).setData(s,{...r,manual:!0})}setQueriesData(e,t,r){return zi.batch(()=>Se(this,T).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,r)]))}getQueryState(e){var t;const r=this.defaultQueryOptions({queryKey:e});return null==(t=Se(this,T).get(r.queryHash))?void 0:t.state}removeQueries(e){const t=Se(this,T);zi.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const r=Se(this,T);return zi.batch(()=>(r.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=zi.batch(()=>Se(this,T).findAll(e).map(e=>e.cancel(r)));return Promise.all(n).then(mi).catch(mi)}invalidateQueries(e,t={}){return zi.batch(()=>(Se(this,T).findAll(e).forEach(e=>{e.invalidate()}),"none"===(null==e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries({...e,type:(null==e?void 0:e.refetchType)??(null==e?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=zi.batch(()=>Se(this,T).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(mi)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(n).then(mi)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const r=Se(this,T).build(this,t);return r.isStaleByTime(xi(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(mi).catch(mi)}fetchInfiniteQuery(e){return e.behavior=Gi(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(mi).catch(mi)}ensureInfiniteQueryData(e){return e.behavior=Gi(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Di.isOnline()?Se(this,M).resumePausedMutations():Promise.resolve()}getQueryCache(){return Se(this,T)}getMutationCache(){return Se(this,M)}getDefaultOptions(){return Se(this,D)}setDefaultOptions(e){_e(this,D,e)}setQueryDefaults(e,t){Se(this,I).set(ji(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Se(this,I).values()],r={};return t.forEach(t=>{wi(e,t.queryKey)&&Object.assign(r,t.defaultOptions)}),r}setMutationDefaults(e,t){Se(this,R).set(ji(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Se(this,R).values()],r={};return t.forEach(t=>{wi(e,t.mutationKey)&&Object.assign(r,t.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Se(this,D).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=bi(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Pi&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...Se(this,D).mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Se(this,T).clear(),Se(this,M).clear()}},T=new WeakMap,M=new WeakMap,D=new WeakMap,I=new WeakMap,R=new WeakMap,F=new WeakMap,L=new WeakMap,B=new WeakMap,q),Zi=(be=class extends ui{constructor(e,t){super(),ke(this,re),ke(this,ae),ke(this,ie),ke(this,le),ke(this,de),ke(this,he),ke(this,pe),ke(this,xe),ke(this,ve),ke(this,z,void 0),ke(this,$,void 0),ke(this,U,void 0),ke(this,V,void 0),ke(this,W,void 0),ke(this,H,void 0),ke(this,K,void 0),ke(this,Y,void 0),ke(this,G,void 0),ke(this,X,void 0),ke(this,Q,void 0),ke(this,J,void 0),ke(this,Z,void 0),ke(this,ee,void 0),ke(this,te,new Set),this.options=t,_e(this,z,e),_e(this,Y,null),_e(this,K,Ii()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(Se(this,$).addObserver(this),eo(Se(this,$),this.options)?Ce(this,re,ne).call(this):this.updateResult(),Ce(this,de,ue).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return to(Se(this,$),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return to(Se(this,$),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ce(this,he,me).call(this),Ce(this,pe,fe).call(this),Se(this,$).removeObserver(this)}setOptions(e){const t=this.options,r=Se(this,$);if(this.options=Se(this,z).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof yi(this.options.enabled,Se(this,$)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ce(this,xe,ye).call(this),Se(this,$).setOptions(this.options),t._defaulted&&!Si(this.options,t)&&Se(this,z).getQueryCache().notify({type:"observerOptionsUpdated",query:Se(this,$),observer:this});const n=this.hasListeners();n&&ro(Se(this,$),r,this.options,t)&&Ce(this,re,ne).call(this),this.updateResult(),!n||Se(this,$)===r&&yi(this.options.enabled,Se(this,$))===yi(t.enabled,Se(this,$))&&xi(this.options.staleTime,Se(this,$))===xi(t.staleTime,Se(this,$))||Ce(this,ae,se).call(this);const a=Ce(this,ie,oe).call(this);!n||Se(this,$)===r&&yi(this.options.enabled,Se(this,$))===yi(t.enabled,Se(this,$))&&a===Se(this,ee)||Ce(this,le,ce).call(this,a)}getOptimisticResult(e){const t=Se(this,z).getQueryCache().build(Se(this,z),e),r=this.createResult(t,e);return function(e,t){if(!Si(e.getCurrentResult(),t))return!0;return!1}(this,r)&&(_e(this,V,r),_e(this,H,this.options),_e(this,W,Se(this,$).state)),r}getCurrentResult(){return Se(this,V)}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),null==t||t(r),"promise"!==r||this.options.experimental_prefetchInRender||"pending"!==Se(this,K).status||Se(this,K).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(e,r))})}trackProp(e){Se(this,te).add(e)}getCurrentQuery(){return Se(this,$)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=Se(this,z).defaultQueryOptions(e),r=Se(this,z).getQueryCache().build(Se(this,z),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Ce(this,re,ne).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Se(this,V)))}createResult(e,t){var r;const n=Se(this,$),a=this.options,s=Se(this,V),i=Se(this,W),o=Se(this,H),l=e!==n?e.state:Se(this,U),{state:c}=e;let d,u={...c},h=!1;if(t._optimisticResults){const r=this.hasListeners(),s=!r&&eo(e,t),i=r&&ro(e,n,t,a);(s||i)&&(u={...u,...Vi(c.data,e.options)}),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:p,status:f}=u;d=u.data;let x=!1;if(void 0!==t.placeholderData&&void 0===d&&"pending"===f){let e;(null==s?void 0:s.isPlaceholderData)&&t.placeholderData===(null==o?void 0:o.placeholderData)?(e=s.data,x=!0):e="function"==typeof t.placeholderData?t.placeholderData(null==(r=Se(this,Q))?void 0:r.state.data,Se(this,Q)):t.placeholderData,void 0!==e&&(f="success",d=Ci(null==s?void 0:s.data,e,t),h=!0)}if(t.select&&void 0!==d&&!x)if(s&&d===(null==i?void 0:i.data)&&t.select===Se(this,G))d=Se(this,X);else try{_e(this,G,t.select),d=t.select(d),d=Ci(null==s?void 0:s.data,d,t),_e(this,X,d),_e(this,Y,null)}catch(N){_e(this,Y,N)}Se(this,Y)&&(m=Se(this,Y),d=Se(this,X),p=Date.now(),f="error");const y="fetching"===u.fetchStatus,v="pending"===f,g="error"===f,b=v&&y,j=void 0!==d,w={status:f,fetchStatus:u.fetchStatus,isPending:v,isSuccess:"success"===f,isError:g,isInitialLoading:b,isLoading:b,data:d,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:g&&!j,isPaused:"paused"===u.fetchStatus,isPlaceholderData:h,isRefetchError:g&&j,isStale:no(e,t),refetch:this.refetch,promise:Se(this,K),isEnabled:!1!==yi(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===w.status?e.reject(w.error):void 0!==w.data&&e.resolve(w.data)},r=()=>{const e=_e(this,K,w.promise=Ii());t(e)},a=Se(this,K);switch(a.status){case"pending":e.queryHash===n.queryHash&&t(a);break;case"fulfilled":"error"!==w.status&&w.data===a.value||r();break;case"rejected":"error"===w.status&&w.error===a.reason||r()}}return w}updateResult(){const e=Se(this,V),t=this.createResult(Se(this,$),this.options);if(_e(this,W,Se(this,$).state),_e(this,H,this.options),void 0!==Se(this,W).data&&_e(this,Q,Se(this,$)),Si(t,e))return;_e(this,V,t);Ce(this,ve,ge).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!Se(this,te).size)return!0;const n=new Set(r??Se(this,te));return this.options.throwOnError&&n.add("error"),Object.keys(Se(this,V)).some(t=>{const r=t;return Se(this,V)[r]!==e[r]&&n.has(r)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ce(this,de,ue).call(this)}},z=new WeakMap,$=new WeakMap,U=new WeakMap,V=new WeakMap,W=new WeakMap,H=new WeakMap,K=new WeakMap,Y=new WeakMap,G=new WeakMap,X=new WeakMap,Q=new WeakMap,J=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap,re=new WeakSet,ne=function(e){Ce(this,xe,ye).call(this);let t=Se(this,$).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(mi)),t},ae=new WeakSet,se=function(){Ce(this,he,me).call(this);const e=xi(this.options.staleTime,Se(this,$));if(hi||Se(this,V).isStale||!pi(e))return;const t=fi(Se(this,V).dataUpdatedAt,e);_e(this,J,setTimeout(()=>{Se(this,V).isStale||this.updateResult()},t+1))},ie=new WeakSet,oe=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(Se(this,$)):this.options.refetchInterval)??!1},le=new WeakSet,ce=function(e){Ce(this,pe,fe).call(this),_e(this,ee,e),!hi&&!1!==yi(this.options.enabled,Se(this,$))&&pi(Se(this,ee))&&0!==Se(this,ee)&&_e(this,Z,setInterval(()=>{(this.options.refetchIntervalInBackground||Mi.isFocused())&&Ce(this,re,ne).call(this)},Se(this,ee)))},de=new WeakSet,ue=function(){Ce(this,ae,se).call(this),Ce(this,le,ce).call(this,Ce(this,ie,oe).call(this))},he=new WeakSet,me=function(){Se(this,J)&&(clearTimeout(Se(this,J)),_e(this,J,void 0))},pe=new WeakSet,fe=function(){Se(this,Z)&&(clearInterval(Se(this,Z)),_e(this,Z,void 0))},xe=new WeakSet,ye=function(){const e=Se(this,z).getQueryCache().build(Se(this,z),this.options);if(e===Se(this,$))return;const t=Se(this,$);_e(this,$,e),_e(this,U,e.state),this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))},ve=new WeakSet,ge=function(e){zi.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(Se(this,V))}),Se(this,z).getQueryCache().notify({query:Se(this,$),type:"observerResultsUpdated"})})},be);function eo(e,t){return function(e,t){return!1!==yi(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&to(e,t,t.refetchOnMount)}function to(e,t,r){if(!1!==yi(t.enabled,e)&&"static"!==xi(t.staleTime,e)){const n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&no(e,t)}return!1}function ro(e,t,r,n){return(e!==t||!1===yi(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&no(e,r)}function no(e,t){return!1!==yi(t.enabled,e)&&e.isStaleByTime(xi(t.staleTime,e))}var ao=Ct.createContext(void 0),so=e=>{const t=Ct.useContext(ao);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},io=({client:e,children:t})=>(Ct.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Ae.jsx(ao.Provider,{value:e,children:t})),oo=Ct.createContext(!1);oo.Provider;var lo=Ct.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),co=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function uo(e,t,r){var n,a,s,i,o;const l=Ct.useContext(oo),c=Ct.useContext(lo),d=so(r),u=d.defaultQueryOptions(e);null==(a=null==(n=d.getDefaultOptions().queries)?void 0:n._experimental_beforeQuery)||a.call(n,u),u._optimisticResults=l?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=e=>"static"===e?e:Math.max(e??1e3,1e3),r=e.staleTime;e.staleTime="function"==typeof r?(...e)=>t(r(...e)):t(r),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}})(u),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(u,c),(e=>{Ct.useEffect(()=>{e.clearReset()},[e])})(c);const h=!d.getQueryCache().get(u.queryHash),[m]=Ct.useState(()=>new t(d,u)),p=m.getOptimisticResult(u),f=!l&&!1!==e.subscribed;if(Ct.useSyncExternalStore(Ct.useCallback(e=>{const t=f?m.subscribe(zi.batchCalls(e)):mi;return m.updateResult(),t},[m,f]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),Ct.useEffect(()=>{m.setOptions(u)},[u,m]),((e,t)=>(null==e?void 0:e.suspense)&&t.isPending)(u,p))throw co(u,m,c);if((({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&void 0===e.data||function(e,t){return"function"==typeof e?e(...t):!!e}(r,[e.error,n])))({result:p,errorResetBoundary:c,throwOnError:u.throwOnError,query:d.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw p.error;if(null==(i=null==(s=d.getDefaultOptions().queries)?void 0:s._experimental_afterQuery)||i.call(s,u,p),u.experimental_prefetchInRender&&!hi&&((e,t)=>e.isLoading&&e.isFetching&&!t)(p,l)){const e=h?co(u,m,c):null==(o=d.getQueryCache().get(u.queryHash))?void 0:o.promise;null==e||e.catch(mi).finally(()=>{m.updateResult()})}return u.notifyOnChangeProps?p:m.trackResult(p)}function ho(e,t){return uo(e,Zi,t)}function mo(e,t){return function(){return e.apply(t,arguments)}}const{toString:po}=Object.prototype,{getPrototypeOf:fo}=Object,{iterator:xo,toStringTag:yo}=Symbol,vo=(go=Object.create(null),e=>{const t=po.call(e);return go[t]||(go[t]=t.slice(8,-1).toLowerCase())});var go;const bo=e=>(e=e.toLowerCase(),t=>vo(t)===e),jo=e=>t=>typeof t===e,{isArray:wo}=Array,No=jo("undefined");function So(e){return null!==e&&!No(e)&&null!==e.constructor&&!No(e.constructor)&&Oo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ko=bo("ArrayBuffer");const _o=jo("string"),Oo=jo("function"),Co=jo("number"),Ao=e=>null!==e&&"object"==typeof e,Eo=e=>{if("object"!==vo(e))return!1;const t=fo(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||yo in e||xo in e)},Po=bo("Date"),To=bo("File"),Mo=bo("Blob"),Do=bo("FileList"),Io=bo("URLSearchParams"),[Ro,Fo,Lo,Bo]=["ReadableStream","Request","Response","Headers"].map(bo);function qo(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,a;if("object"!=typeof e&&(e=[e]),wo(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(So(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;let i;for(n=0;n<s;n++)i=a[n],t.call(null,e[i],i,e)}}function zo(e,t){if(So(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,a=r.length;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const $o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Uo=e=>!No(e)&&e!==$o;const Vo=(Wo="undefined"!=typeof Uint8Array&&fo(Uint8Array),e=>Wo&&e instanceof Wo);var Wo;const Ho=bo("HTMLFormElement"),Ko=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Yo=bo("RegExp"),Go=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};qo(r,(r,a)=>{let s;!1!==(s=t(r,a,e))&&(n[a]=s||r)}),Object.defineProperties(e,n)};const Xo=bo("AsyncFunction"),Qo=(Jo="function"==typeof setImmediate,Zo=Oo($o.postMessage),Jo?setImmediate:Zo?(el=`axios@${Math.random()}`,tl=[],$o.addEventListener("message",({source:e,data:t})=>{e===$o&&t===el&&tl.length&&tl.shift()()},!1),e=>{tl.push(e),$o.postMessage(el,"*")}):e=>setTimeout(e));var Jo,Zo,el,tl;const rl="undefined"!=typeof queueMicrotask?queueMicrotask.bind($o):"undefined"!=typeof process&&process.nextTick||Qo,nl={isArray:wo,isArrayBuffer:ko,isBuffer:So,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Oo(e.append)&&("formdata"===(t=vo(e))||"object"===t&&Oo(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ko(e.buffer),t},isString:_o,isNumber:Co,isBoolean:e=>!0===e||!1===e,isObject:Ao,isPlainObject:Eo,isEmptyObject:e=>{if(!Ao(e)||So(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:Ro,isRequest:Fo,isResponse:Lo,isHeaders:Bo,isUndefined:No,isDate:Po,isFile:To,isBlob:Mo,isRegExp:Yo,isFunction:Oo,isStream:e=>Ao(e)&&Oo(e.pipe),isURLSearchParams:Io,isTypedArray:Vo,isFileList:Do,forEach:qo,merge:function e(){const{caseless:t,skipUndefined:r}=Uo(this)&&this||{},n={},a=(a,s)=>{const i=t&&zo(n,s)||s;Eo(n[i])&&Eo(a)?n[i]=e(n[i],a):Eo(a)?n[i]=e({},a):wo(a)?n[i]=a.slice():r&&No(a)||(n[i]=a)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&qo(arguments[s],a);return n},extend:(e,t,r,{allOwnKeys:n}={})=>(qo(t,(t,n)=>{r&&Oo(t)?e[n]=mo(t,r):e[n]=t},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let a,s,i;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)i=a[s],n&&!n(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==r&&fo(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:vo,kindOfTest:bo,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(wo(e))return e;let t=e.length;if(!Co(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[xo]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:Ho,hasOwnProperty:Ko,hasOwnProp:Ko,reduceDescriptors:Go,freezeMethods:e=>{Go(e,(t,r)=>{if(Oo(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];Oo(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return wo(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:zo,global:$o,isContextDefined:Uo,isSpecCompliantForm:function(e){return!!(e&&Oo(e.append)&&"FormData"===e[yo]&&e[xo])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(Ao(e)){if(t.indexOf(e)>=0)return;if(So(e))return e;if(!("toJSON"in e)){t[n]=e;const a=wo(e)?[]:{};return qo(e,(e,t)=>{const s=r(e,n+1);!No(s)&&(a[t]=s)}),t[n]=void 0,a}}return e};return r(e,0)},isAsyncFn:Xo,isThenable:e=>e&&(Ao(e)||Oo(e))&&Oo(e.then)&&Oo(e.catch),setImmediate:Qo,asap:rl,isIterable:e=>null!=e&&Oo(e[xo])};function al(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}nl.inherits(al,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:nl.toJSONObject(this.config),code:this.code,status:this.status}}});const sl=al.prototype,il={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{il[e]={value:e}}),Object.defineProperties(al,il),Object.defineProperty(sl,"isAxiosError",{value:!0}),al.from=(e,t,r,n,a,s)=>{const i=Object.create(sl);nl.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return al.call(i,o,l,r,n,a),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",s&&Object.assign(i,s),i};function ol(e){return nl.isPlainObject(e)||nl.isArray(e)}function ll(e){return nl.endsWith(e,"[]")?e.slice(0,-2):e}function cl(e,t,r){return e?e.concat(t).map(function(e,t){return e=ll(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const dl=nl.toFlatObject(nl,{},null,function(e){return/^is[A-Z]/.test(e)});function ul(e,t,r){if(!nl.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=nl.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!nl.isUndefined(t[e])})).metaTokens,a=r.visitor||c,s=r.dots,i=r.indexes,o=(r.Blob||"undefined"!=typeof Blob&&Blob)&&nl.isSpecCompliantForm(t);if(!nl.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(nl.isDate(e))return e.toISOString();if(nl.isBoolean(e))return e.toString();if(!o&&nl.isBlob(e))throw new al("Blob is not supported. Use a Buffer instead.");return nl.isArrayBuffer(e)||nl.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,a){let o=e;if(e&&!a&&"object"==typeof e)if(nl.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(nl.isArray(e)&&function(e){return nl.isArray(e)&&!e.some(ol)}(e)||(nl.isFileList(e)||nl.endsWith(r,"[]"))&&(o=nl.toArray(e)))return r=ll(r),o.forEach(function(e,n){!nl.isUndefined(e)&&null!==e&&t.append(!0===i?cl([r],n,s):null===i?r:r+"[]",l(e))}),!1;return!!ol(e)||(t.append(cl(a,r,s),l(e)),!1)}const d=[],u=Object.assign(dl,{defaultVisitor:c,convertValue:l,isVisitable:ol});if(!nl.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!nl.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),nl.forEach(r,function(r,s){!0===(!(nl.isUndefined(r)||null===r)&&a.call(t,r,nl.isString(s)?s.trim():s,n,u))&&e(r,n?n.concat(s):[s])}),d.pop()}}(e),t}function hl(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function ml(e,t){this._pairs=[],e&&ul(e,this,t)}const pl=ml.prototype;function fl(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function xl(e,t,r){if(!t)return e;const n=r&&r.encode||fl;nl.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let s;if(s=a?a(t,r):nl.isURLSearchParams(t)?t.toString():new ml(t,r).toString(n),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}pl.append=function(e,t){this._pairs.push([e,t])},pl.toString=function(e){const t=e?function(t){return e.call(this,t,hl)}:hl;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const yl=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){nl.forEach(this.handlers,function(t){null!==t&&e(t)})}},vl={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gl={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:ml,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},bl="undefined"!=typeof window&&"undefined"!=typeof document,jl="object"==typeof navigator&&navigator||void 0,wl=bl&&(!jl||["ReactNative","NativeScript","NS"].indexOf(jl.product)<0),Nl="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Sl=bl&&window.location.href||"http://localhost",kl={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bl,hasStandardBrowserEnv:wl,hasStandardBrowserWebWorkerEnv:Nl,navigator:jl,origin:Sl},Symbol.toStringTag,{value:"Module"})),...gl};function _l(e){function t(e,r,n,a){let s=e[a++];if("__proto__"===s)return!0;const i=Number.isFinite(+s),o=a>=e.length;if(s=!s&&nl.isArray(n)?n.length:s,o)return nl.hasOwnProp(n,s)?n[s]=[n[s],r]:n[s]=r,!i;n[s]&&nl.isObject(n[s])||(n[s]=[]);return t(e,r,n[s],a)&&nl.isArray(n[s])&&(n[s]=function(e){const t={},r=Object.keys(e);let n;const a=r.length;let s;for(n=0;n<a;n++)s=r[n],t[s]=e[s];return t}(n[s])),!i}if(nl.isFormData(e)&&nl.isFunction(e.entries)){const r={};return nl.forEachEntry(e,(e,n)=>{t(function(e){return nl.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null}const Ol={transitional:vl,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,a=nl.isObject(e);a&&nl.isHTMLForm(e)&&(e=new FormData(e));if(nl.isFormData(e))return n?JSON.stringify(_l(e)):e;if(nl.isArrayBuffer(e)||nl.isBuffer(e)||nl.isStream(e)||nl.isFile(e)||nl.isBlob(e)||nl.isReadableStream(e))return e;if(nl.isArrayBufferView(e))return e.buffer;if(nl.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ul(e,new kl.classes.URLSearchParams,{visitor:function(e,t,r,n){return kl.isNode&&nl.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((s=nl.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ul(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),function(e,t,r){if(nl.isString(e))try{return(t||JSON.parse)(e),nl.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ol.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(nl.isResponse(e)||nl.isReadableStream(e))return e;if(e&&nl.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(a){if(r){if("SyntaxError"===a.name)throw al.from(a,al.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kl.classes.FormData,Blob:kl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};nl.forEach(["delete","get","head","post","put","patch"],e=>{Ol.headers[e]={}});const Cl=Ol,Al=nl.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),El=Symbol("internals");function Pl(e){return e&&String(e).trim().toLowerCase()}function Tl(e){return!1===e||null==e?e:nl.isArray(e)?e.map(Tl):String(e)}function Ml(e,t,r,n,a){return nl.isFunction(n)?n.call(this,t,r):(a&&(t=r),nl.isString(t)?nl.isString(n)?-1!==t.indexOf(n):nl.isRegExp(n)?n.test(t):void 0:void 0)}class Dl{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function a(e,t,r){const a=Pl(t);if(!a)throw new Error("header name must be a non-empty string");const s=nl.findKey(n,a);(!s||void 0===n[s]||!0===r||void 0===r&&!1!==n[s])&&(n[s||t]=Tl(e))}const s=(e,t)=>nl.forEach(e,(e,r)=>a(e,r,t));if(nl.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(nl.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let r,n,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),r=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!r||t[r]&&Al[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(nl.isObject(e)&&nl.isIterable(e)){let r,n,a={};for(const t of e){if(!nl.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[n=t[0]]=(r=a[n])?nl.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}s(a,t)}else null!=e&&a(t,e,r);return this}get(e,t){if(e=Pl(e)){const r=nl.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(nl.isFunction(t))return t.call(this,e,r);if(nl.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Pl(e)){const r=nl.findKey(this,e);return!(!r||void 0===this[r]||t&&!Ml(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function a(e){if(e=Pl(e)){const a=nl.findKey(r,e);!a||t&&!Ml(0,r[a],a,t)||(delete r[a],n=!0)}}return nl.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const a=t[r];e&&!Ml(0,this[a],a,e,!0)||(delete this[a],n=!0)}return n}normalize(e){const t=this,r={};return nl.forEach(this,(n,a)=>{const s=nl.findKey(r,a);if(s)return t[s]=Tl(n),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(a):String(a).trim();i!==a&&delete t[a],t[i]=Tl(n),r[i]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return nl.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&nl.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const t=(this[El]=this[El]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Pl(e);t[n]||(!function(e,t){const r=nl.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,a){return this[n].call(this,t,e,r,a)},configurable:!0})})}(r,e),t[n]=!0)}return nl.isArray(e)?e.forEach(n):n(e),this}}Dl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),nl.reduceDescriptors(Dl.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),nl.freezeMethods(Dl);const Il=Dl;function Rl(e,t){const r=this||Cl,n=t||r,a=Il.from(n.headers);let s=n.data;return nl.forEach(e,function(e){s=e.call(r,s,a.normalize(),t?t.status:void 0)}),a.normalize(),s}function Fl(e){return!(!e||!e.__CANCEL__)}function Ll(e,t,r){al.call(this,null==e?"canceled":e,al.ERR_CANCELED,t,r),this.name="CanceledError"}function Bl(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new al("Request failed with status code "+r.status,[al.ERR_BAD_REQUEST,al.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}nl.inherits(Ll,al,{__CANCEL__:!0});const ql=(e,t,r=3)=>{let n=0;const a=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a,s=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=n[i];a||(a=l),r[s]=o,n[s]=l;let d=i,u=0;for(;d!==s;)u+=r[d++],d%=e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}}(50,250);return function(e,t){let r,n,a=0,s=1e3/t;const i=(t,s=Date.now())=>{a=s,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{const t=Date.now(),o=t-a;o>=s?i(e,t):(r=e,n||(n=setTimeout(()=>{n=null,i(r)},s-o)))},()=>r&&i(r)]}(r=>{const s=r.loaded,i=r.lengthComputable?r.total:void 0,o=s-n,l=a(o);n=s;e({loaded:s,total:i,progress:i?s/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&s<=i?(i-s)/l:void 0,event:r,lengthComputable:null!=i,[t?"download":"upload"]:!0})},r)},zl=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},$l=e=>(...t)=>nl.asap(()=>e(...t)),Ul=kl.hasStandardBrowserEnv?(Vl=new URL(kl.origin),Wl=kl.navigator&&/(msie|trident)/i.test(kl.navigator.userAgent),e=>(e=new URL(e,kl.origin),Vl.protocol===e.protocol&&Vl.host===e.host&&(Wl||Vl.port===e.port))):()=>!0;var Vl,Wl;const Hl=kl.hasStandardBrowserEnv?{write(e,t,r,n,a,s){const i=[e+"="+encodeURIComponent(t)];nl.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),nl.isString(n)&&i.push("path="+n),nl.isString(a)&&i.push("domain="+a),!0===s&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Kl(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Yl=e=>e instanceof Il?{...e}:e;function Gl(e,t){t=t||{};const r={};function n(e,t,r,n){return nl.isPlainObject(e)&&nl.isPlainObject(t)?nl.merge.call({caseless:n},e,t):nl.isPlainObject(t)?nl.merge({},t):nl.isArray(t)?t.slice():t}function a(e,t,r,a){return nl.isUndefined(t)?nl.isUndefined(e)?void 0:n(void 0,e,0,a):n(e,t,0,a)}function s(e,t){if(!nl.isUndefined(t))return n(void 0,t)}function i(e,t){return nl.isUndefined(t)?nl.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function o(r,a,s){return s in t?n(r,a):s in e?n(void 0,r):void 0}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,r)=>a(Yl(e),Yl(t),0,!0)};return nl.forEach(Object.keys({...e,...t}),function(n){const s=l[n]||a,i=s(e[n],t[n],n);nl.isUndefined(i)&&s!==o||(r[n]=i)}),r}const Xl=e=>{const t=Gl({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:s,headers:i,auth:o}=t;if(t.headers=i=Il.from(i),t.url=xl(Kl(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),nl.isFormData(r))if(kl.hasStandardBrowserEnv||kl.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(nl.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&i.set(e,r)})}if(kl.hasStandardBrowserEnv&&(n&&nl.isFunction(n)&&(n=n(t)),n||!1!==n&&Ul(t.url))){const e=a&&s&&Hl.read(s);e&&i.set(a,e)}return t},Ql="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=Xl(e);let a=n.data;const s=Il.from(n.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=n;function p(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(i),n.signal&&n.signal.removeEventListener("abort",i)}let f=new XMLHttpRequest;function x(){if(!f)return;const n=Il.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Bl(function(e){t(e),p()},function(e){r(e),p()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout,"onloadend"in f?f.onloadend=x:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(x)},f.onabort=function(){f&&(r(new al("Request aborted",al.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const n=new al(t&&t.message?t.message:"Network Error",al.ERR_NETWORK,e,f);n.event=t||null,r(n),f=null},f.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const a=n.transitional||vl;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new al(t,a.clarifyTimeoutError?al.ETIMEDOUT:al.ECONNABORTED,e,f)),f=null},void 0===a&&s.setContentType(null),"setRequestHeader"in f&&nl.forEach(s.toJSON(),function(e,t){f.setRequestHeader(t,e)}),nl.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),u&&"json"!==u&&(f.responseType=n.responseType),m&&([l,d]=ql(m,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=ql(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(i=t=>{f&&(r(!t||t.type?new Ll(null,e,f):t),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(i),n.signal&&(n.signal.aborted?i():n.signal.addEventListener("abort",i)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===kl.protocols.indexOf(y)?r(new al("Unsupported protocol "+y+":",al.ERR_BAD_REQUEST,e)):f.send(a||null)})},Jl=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const a=function(e){if(!r){r=!0,i();const t=e instanceof Error?e:this.reason;n.abort(t instanceof al?t:new Ll(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,a(new al(`timeout ${t} of ms exceeded`,al.ETIMEDOUT))},t);const i=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:o}=n;return o.unsubscribe=()=>nl.asap(i),o}},Zl=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,a=0;for(;a<r;)n=a+t,yield e.slice(a,n),a=n},ec=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},tc=(e,t,r,n)=>{const a=async function*(e,t){for await(const r of ec(e))yield*Zl(r,t)}(e,t);let s,i=0,o=e=>{s||(s=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await a.next();if(t)return o(),void e.close();let s=n.byteLength;if(r){let e=i+=s;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},{isFunction:rc}=nl,nc=(({Request:e,Response:t})=>({Request:e,Response:t}))(nl.global),{ReadableStream:ac,TextEncoder:sc}=nl.global,ic=(e,...t)=>{try{return!!e(...t)}catch(r){return!1}},oc=e=>{e=nl.merge.call({skipUndefined:!0},nc,e);const{fetch:t,Request:r,Response:n}=e,a=t?rc(t):"function"==typeof fetch,s=rc(r),i=rc(n);if(!a)return!1;const o=a&&rc(ac),l=a&&("function"==typeof sc?(c=new sc,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const d=s&&o&&ic(()=>{let e=!1;const t=new r(kl.origin,{body:new ac,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=i&&o&&ic(()=>nl.isReadableStream(new n("").body)),h={stream:u&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new al(`Response type '${e}' is not supported`,al.ERR_NOT_SUPPORT,r)})});const m=async(e,t)=>{const n=nl.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(nl.isBlob(e))return e.size;if(nl.isSpecCompliantForm(e)){const t=new r(kl.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return nl.isArrayBufferView(e)||nl.isArrayBuffer(e)?e.byteLength:(nl.isURLSearchParams(e)&&(e+=""),nl.isString(e)?(await l(e)).byteLength:void 0)})(t):n};return async e=>{let{url:a,method:i,data:o,signal:l,cancelToken:c,timeout:p,onDownloadProgress:f,onUploadProgress:x,responseType:y,headers:v,withCredentials:g="same-origin",fetchOptions:b}=Xl(e),j=t||fetch;y=y?(y+"").toLowerCase():"text";let w=Jl([l,c&&c.toAbortSignal()],p),N=null;const S=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let k;try{if(x&&d&&"get"!==i&&"head"!==i&&0!==(k=await m(v,o))){let e,t=new r(a,{method:"POST",body:o,duplex:"half"});if(nl.isFormData(o)&&(e=t.headers.get("content-type"))&&v.setContentType(e),t.body){const[e,r]=zl(k,ql($l(x)));o=tc(t.body,65536,e,r)}}nl.isString(g)||(g=g?"include":"omit");const t=s&&"credentials"in r.prototype,l={...b,signal:w,method:i.toUpperCase(),headers:v.normalize().toJSON(),body:o,duplex:"half",credentials:t?g:void 0};N=s&&new r(a,l);let c=await(s?j(N,b):j(a,l));const p=u&&("stream"===y||"response"===y);if(u&&(f||p&&S)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=nl.toFiniteNumber(c.headers.get("content-length")),[r,a]=f&&zl(t,ql($l(f),!0))||[];c=new n(tc(c.body,65536,r,()=>{a&&a(),S&&S()}),e)}y=y||"text";let _=await h[nl.findKey(h,y)||"text"](c,e);return!p&&S&&S(),await new Promise((t,r)=>{Bl(t,r,{data:_,headers:Il.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:N})})}catch(_){if(S&&S(),_&&"TypeError"===_.name&&/Load failed|fetch/i.test(_.message))throw Object.assign(new al("Network Error",al.ERR_NETWORK,e,N),{cause:_.cause||_});throw al.from(_,_&&_.code,e,N)}}},lc=new Map,cc=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:a}=t,s=[n,a,r];let i,o,l=s.length,c=lc;for(;l--;)i=s[l],o=c.get(i),void 0===o&&c.set(i,o=l?new Map:oc(t)),c=o;return o};cc();const dc={http:null,xhr:Ql,fetch:{get:cc}};nl.forEach(dc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});const uc=e=>`- ${e}`,hc=e=>nl.isFunction(e)||null===e||!1===e,mc=(e,t)=>{e=nl.isArray(e)?e:[e];const{length:r}=e;let n,a;const s={};for(let i=0;i<r;i++){let r;if(n=e[i],a=n,!hc(n)&&(a=dc[(r=String(n)).toLowerCase()],void 0===a))throw new al(`Unknown adapter '${r}'`);if(a&&(nl.isFunction(a)||(a=a.get(t))))break;s[r||"#"+i]=a}if(!a){const e=Object.entries(s).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new al("There is no suitable adapter to dispatch the request "+(r?e.length>1?"since :\n"+e.map(uc).join("\n"):" "+uc(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return a};function pc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ll(null,e)}function fc(e){pc(e),e.headers=Il.from(e.headers),e.data=Rl.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return mc(e.adapter||Cl.adapter,e)(e).then(function(t){return pc(e),t.data=Rl.call(e,e.transformResponse,t),t.headers=Il.from(t.headers),t},function(t){return Fl(t)||(pc(e),t&&t.response&&(t.response.data=Rl.call(e,e.transformResponse,t.response),t.response.headers=Il.from(t.response.headers))),Promise.reject(t)})}const xc="1.12.2",yc={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{yc[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const vc={};yc.transitional=function(e,t,r){function n(e,t){return"[Axios v"+xc+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,a,s)=>{if(!1===e)throw new al(n(a," has been removed"+(t?" in "+t:"")),al.ERR_DEPRECATED);return t&&!vc[a]&&(vc[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,a,s)}},yc.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};const gc={assertOptions:function(e,t,r){if("object"!=typeof e)throw new al("options must be an object",al.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const s=n[a],i=t[s];if(i){const t=e[s],r=void 0===t||i(t,s,e);if(!0!==r)throw new al("option "+s+" must be "+r,al.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new al("Unknown option "+s,al.ERR_BAD_OPTION)}},validators:yc},bc=gc.validators;class jc{constructor(e){this.defaults=e||{},this.interceptors={request:new yl,response:new yl}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(n){}}throw r}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Gl(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:a}=t;void 0!==r&&gc.assertOptions(r,{silentJSONParsing:bc.transitional(bc.boolean),forcedJSONParsing:bc.transitional(bc.boolean),clarifyTimeoutError:bc.transitional(bc.boolean)},!1),null!=n&&(nl.isFunction(n)?t.paramsSerializer={serialize:n}:gc.assertOptions(n,{encode:bc.function,serialize:bc.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),gc.assertOptions(t,{baseUrl:bc.spelling("baseURL"),withXsrfToken:bc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&nl.merge(a.common,a[t.method]);a&&nl.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=Il.concat(s,a);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[fc.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=fc.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return xl(Kl((e=Gl(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}nl.forEach(["delete","get","head","options"],function(e){jc.prototype[e]=function(t,r){return this.request(Gl(r||{},{method:e,url:t,data:(r||{}).data}))}}),nl.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,a){return this.request(Gl(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}jc.prototype[e]=t(),jc.prototype[e+"Form"]=t(!0)});const wc=jc;class Nc{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,a){r.reason||(r.reason=new Ll(e,n,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Nc(function(t){e=t}),cancel:e}}}const Sc=Nc;const kc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kc).forEach(([e,t])=>{kc[t]=e});const _c=kc;const Oc=function e(t){const r=new wc(t),n=mo(wc.prototype.request,r);return nl.extend(n,wc.prototype,r,{allOwnKeys:!0}),nl.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Gl(t,r))},n}(Cl);Oc.Axios=wc,Oc.CanceledError=Ll,Oc.CancelToken=Sc,Oc.isCancel=Fl,Oc.VERSION=xc,Oc.toFormData=ul,Oc.AxiosError=al,Oc.Cancel=Oc.CanceledError,Oc.all=function(e){return Promise.all(e)},Oc.spread=function(e){return function(t){return e.apply(null,t)}},Oc.isAxiosError=function(e){return nl.isObject(e)&&!0===e.isAxiosError},Oc.mergeConfig=Gl,Oc.AxiosHeaders=Il,Oc.formToJSON=e=>_l(nl.isHTMLForm(e)?new FormData(e):e),Oc.getAdapter=mc,Oc.HttpStatusCode=_c,Oc.default=Oc;const Cc=Oc,Ac="undefined"!=typeof window&&(null==(je=window.location)?void 0:je.origin)?window.location.origin:"http://127.0.0.1:8000",Ec=()=>{const e=[];if(e.push("http://192.168.100.6:8000/api"),{}.VITE_API_BASE_URL&&e.push({}.VITE_API_BASE_URL),e.push("http://127.0.0.1:8000/api"),e.push("http://localhost:8000/api"),Ac&&e.push(`${Ac}/api`),"undefined"!=typeof window){const t=window.location.hostname;/^\d+\.\d+\.\d+\.\d+$/.test(t)&&e.push(`http://${t}:8000/api`)}return Array.from(new Set(e))},Pc=e=>"ERR_NETWORK"===(null==e?void 0:e.code)||"Network Error"===(null==e?void 0:e.message);Cc.create({baseURL:"http://192.168.100.6:8000/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!1});const Tc=Ct.createContext(void 0),Mc="auth_current_user",Dc="auth_token",Ic=({children:e})=>{const[t,r]=Ct.useState(null),[n,a]=Ct.useState(!0);Ct.useEffect(()=>{const e=sessionStorage.getItem(Dc),t=sessionStorage.getItem(Mc);if(console.log("AuthContext: useEffect - checking stored auth data",{token:!!e,storedUser:!!t}),e&&t){const e=JSON.parse(t);console.log("AuthContext: Found stored user:",e),r(e)}a(!1)},[]),Ct.useEffect(()=>{console.log("AuthContext: User state changed:",t)},[t]);return Ae.jsx(Tc.Provider,{value:{user:t,login:async(e,t,n)=>{var s,i,o;try{console.log("AuthContext: Starting login process"),a(!0),console.log("AuthContext: Calling API login");const i=await(async e=>{const t=Ec();let r=null;for(const a of t)try{return(await Cc.post(`${a}/login`,e,{headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!1})).data}catch(n){if(r=n,Pc(n))continue;throw n}throw r||new Error("Network Error")})({email:e,password:t,role:n});console.log("AuthContext: API response received:",i);const o=null==(s=i.user)?void 0:s.role;console.log("AuthContext: Raw role from API:",o,"Type:",typeof o);const l=("string"==typeof o?o:(null==o?void 0:o.value)??String(o||"customer")).toLowerCase();console.log("AuthContext: Normalized role:",l);const c={...i.user,role:l};return sessionStorage.setItem(Dc,i.token),sessionStorage.setItem(Mc,JSON.stringify(c)),console.log("AuthContext: Auth data stored in sessionStorage"),console.log("AuthContext: Setting user state to:",c),r(c),console.log("AuthContext: User state updated"),setTimeout(()=>{r(c),console.log("AuthContext: User state force updated")},0),c}catch(l){throw console.error("AuthContext: Login error:",l),(null==(o=null==(i=l.response)?void 0:i.data)?void 0:o.message)?new Error(l.response.data.message):l.message?new Error(l.message):new Error("Login failed. Please try again.")}finally{console.log("AuthContext: Setting isLoading to false"),a(!1)}},logout:async()=>{try{await(async()=>{const e=sessionStorage.getItem("auth_token");if(!e)return;const t=Ec();for(const n of t)try{return void(await Cc.post(`${n}/logout`,{},{headers:{Authorization:`Bearer ${e}`},withCredentials:!1}))}catch(r){if(Pc(r))continue;return}})()}catch(e){console.error("Logout API error:",e)}finally{sessionStorage.removeItem(Dc),sessionStorage.removeItem(Mc),r(null)}},register:async(e,t,n,s,i,o)=>{var l,c,d,u,h;try{if(a(!0),!(e=>e.length>=8)(n))throw new Error("Password must be at least 8 characters long.");if(n!==s)throw new Error("Passwords do not match. Please try again.");const c=await(async e=>{const t=Ec();let r=null;for(const a of t)try{return(await Cc.post(`${a}/register`,e,{headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!1})).data}catch(n){if(r=n,Pc(n))continue;throw n}throw r||new Error("Network Error")})({name:e.trim(),email:t.toLowerCase().trim(),password:n,password_confirmation:s,role:i,...o?{branch_id:parseInt(o)}:{}});if(c.token){const e=null==(l=c.user)?void 0:l.role,t=("string"==typeof e?e:(null==e?void 0:e.value)??String(e||"customer")).toLowerCase(),n={...c.user,role:t};sessionStorage.setItem(Dc,c.token),sessionStorage.setItem(Mc,JSON.stringify(n)),r(n)}}catch(m){if(null==(d=null==(c=m.response)?void 0:c.data)?void 0:d.message)throw new Error(m.response.data.message);if(null==(h=null==(u=m.response)?void 0:u.data)?void 0:h.errors){const e=m.response.data.errors,t=Object.values(e)[0];throw new Error(Array.isArray(t)?t[0]:t)}throw m.message?new Error(m.message):new Error("Registration failed. Please try again.")}finally{a(!1)}},isLoading:n},children:e})},Rc=()=>{const e=Ct.useContext(Tc);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},Fc="http://192.168.100.6:8000/api",Lc=e=>`${Fc}${e.startsWith("/")?e:`/${e}`}`,Bc=()=>{const e=sessionStorage.getItem("auth_token");return{"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""}},qc=Ct.createContext(void 0),zc=()=>{const e=Ct.useContext(qc);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e},$c=({children:e})=>{const[t,r]=Ct.useState([]),[n,a]=Ct.useState(0),[s,i]=Ct.useState(!1),[o,l]=Ct.useState(null),{user:c}=Rc(),d=Ct.useCallback(async()=>{var e,t,n;if(c)try{i(!0),l(null);const e=await(async e=>{const t=sessionStorage.getItem("auth_token");if(console.log("Notification API: Token from sessionStorage:",t?"Present":"Missing"),!t)throw new Error("No authentication token found");return(await Cc.get(`${Fc}/notifications`,{headers:{Authorization:`Bearer ${t}`},params:e})).data})({per_page:20});r(e.notifications),a(e.unread_count)}catch(s){console.error("Failed to fetch notifications:",s),401===(null==(e=s.response)?void 0:e.status)?(console.log("Token expired or invalid, clearing auth data"),sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_current_user"),r([]),a(0),l(null)):l((null==(n=null==(t=s.response)?void 0:t.data)?void 0:n.message)||"Failed to fetch notifications")}finally{i(!1)}},[c]),u=Ct.useCallback(async()=>{var e;if(c)try{const e=await(async()=>{const e=sessionStorage.getItem("auth_token");if(console.log("Notification API: Token from sessionStorage:",e?"Present":"Missing"),!e)throw new Error("No authentication token found");return(await Cc.get(`${Fc}/notifications/unread-count`,{headers:{Authorization:`Bearer ${e}`}})).data})();a(e.unread_count)}catch(t){console.error("Failed to fetch unread count:",t),401===(null==(e=t.response)?void 0:e.status)&&(console.log("Token expired or invalid, clearing auth data"),sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_current_user"),a(0),r([]))}},[c]),h=Ct.useCallback(async e=>{var t,n;try{await(async e=>{const t=sessionStorage.getItem("auth_token");await Cc.put(`${Fc}/notifications/${e}/read`,{},{headers:{Authorization:t?`Bearer ${t}`:""}})})(e),r(t=>t.map(t=>t.id===e?{...t,status:"read",read_at:(new Date).toISOString()}:t)),a(e=>Math.max(0,e-1))}catch(s){console.error("Failed to mark notification as read:",s),l((null==(n=null==(t=s.response)?void 0:t.data)?void 0:n.message)||"Failed to mark notification as read")}},[]),m=Ct.useCallback(async()=>{var e,t;try{await(async()=>{const e=sessionStorage.getItem("auth_token");return(await Cc.put(`${Fc}/notifications/mark-all-read`,{},{headers:{Authorization:e?`Bearer ${e}`:""}})).data})();r(e=>e.map(e=>({...e,status:"read",read_at:(new Date).toISOString()}))),a(0)}catch(n){console.error("Failed to mark all notifications as read:",n),l((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to mark all notifications as read")}},[]),p=Ct.useCallback(async()=>{await Promise.all([d(),u()])},[d,u]);Ct.useEffect(()=>{if(c){const e=setTimeout(()=>{d()},100),t=setInterval(u,3e4);return()=>{clearTimeout(e),clearInterval(t)}}r([]),a(0)},[c,d,u]);const f={notifications:t,unreadCount:n,loading:s,error:o,fetchNotifications:d,fetchUnreadCount:u,markNotificationAsRead:h,markAllNotificationsAsRead:m,refreshNotifications:p};return Ae.jsx(qc.Provider,{value:f,children:e})},Uc=({children:e,allowedRoles:t})=>{const{user:r,isLoading:n}=Rc();if(console.log("ProtectedRoute: Checking access",{user:r?{id:r.id,role:r.role,name:r.name}:null,isLoading:n,allowedRoles:t}),n)return console.log("ProtectedRoute: Still loading, showing loading indicator"),Ae.jsx("div",{children:"Loading..."});if(!r)return console.log("ProtectedRoute: No user, redirecting to login"),Ae.jsx(Mt,{to:"/login",replace:!0});console.log("ProtectedRoute: User role:",r.role,"Type:",typeof r.role,"Allowed roles:",t);const a=String(r.role).toLowerCase(),s=t.map(e=>String(e).toLowerCase());return console.log("ProtectedRoute: Normalized user role:",a,"Normalized allowed roles:",s),s.includes(a)?(console.log("ProtectedRoute: Access granted, rendering children"),Ae.jsx(Ae.Fragment,{children:e})):(console.log("ProtectedRoute: Role not authorized, redirecting to user dashboard"),Ae.jsx(Mt,{to:`/${r.role}/dashboard`,replace:!0}))};function Vc(...e){return ss(Vr(e))}const Wc=Kr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",admin:"bg-admin text-admin-foreground hover:bg-admin/90 shadow-lg",staff:"bg-staff text-staff-foreground hover:bg-staff/90 shadow-lg",optometrist:"bg-optometrist text-optometrist-foreground hover:bg-optometrist/90 shadow-lg",customer:"bg-customer text-customer-foreground hover:bg-customer/90 shadow-lg"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Hc=Ct.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},s)=>{const i=n?Ge:"button";return Ae.jsx(i,{className:Vc(Wc({variant:t,size:r,className:e})),ref:s,...a})});function Kc(...e){return ss(Vr(e))}Hc.displayName="Button";const Yc=Ct.forwardRef(({className:e,type:t,...r},n)=>Ae.jsx("input",{type:t,className:Kc("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));Yc.displayName="Input";var Gc=Ct.forwardRef((e,t)=>Ae.jsx(Ee.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Gc.displayName="Label";var Xc=Gc;function Qc(...e){return ss(Vr(e))}const Jc=Kr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Zc=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(Xc,{ref:r,className:Qc(Jc(),e),...t}));function ed(...e){return ss(Vr(e))}Zc.displayName=Xc.displayName;const td=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("div",{ref:r,className:ed("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));td.displayName="Card";const rd=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("div",{ref:r,className:ed("flex flex-col space-y-1.5 p-6",e),...t}));rd.displayName="CardHeader";const nd=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("h3",{ref:r,className:ed("text-2xl font-semibold leading-none tracking-tight",e),...t}));nd.displayName="CardTitle";const ad=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("p",{ref:r,className:ed("text-sm text-muted-foreground",e),...t}));ad.displayName="CardDescription";const sd=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("div",{ref:r,className:ed("p-6 pt-0",e),...t}));sd.displayName="CardContent";const id=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("div",{ref:r,className:ed("flex items-center p-6 pt-0",e),...t}));id.displayName="CardFooter";const od=()=>{const[e,t]=Ct.useState(""),[r,n]=Ct.useState(""),[a,s]=Ct.useState(!1),[i,o]=Ct.useState("customer"),[l,c]=Ct.useState(!1),{login:d,user:u}=Rc(),h=Dt(),{toast:m}=Jt();return Ct.useEffect(()=>{if(u&&"/login"===window.location.pathname){const e=String(u.role).toLowerCase();console.log("Login useEffect: User already logged in, user role:",u.role),console.log("Login useEffect: Redirecting to:",`/${e}/dashboard`),h(`/${e}/dashboard`,{replace:!0})}},[u,h]),Ae.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:[Ae.jsx("div",{className:"absolute top-4 right-4",children:Ae.jsx(Hc,{variant:"outline",asChild:!0,children:Ae.jsxs(It,{to:"/faq",children:[Ae.jsx(Cn,{className:"h-4 w-4 mr-2"}),"FAQ"]})})}),Ae.jsxs(td,{className:"w-full max-w-sm shadow-sm border border-gray-200",children:[Ae.jsxs(rd,{className:"text-center pb-6",children:[Ae.jsx(nd,{className:"text-xl font-semibold text-gray-900",children:"Sign In"}),Ae.jsx(ad,{className:"text-gray-600",children:"Access your account"})]}),Ae.jsxs(sd,{className:"px-6 pb-6",children:[Ae.jsxs("form",{onSubmit:async t=>{var n,a;t.preventDefault(),c(!0);try{console.log("Starting login with:",{email:e,password:r,role:i});const t=await d(e,r,i);console.log("Login response (normalized):",t);const n=null==t?void 0:t.role,a=n?String(n).toLowerCase():String(i).toLowerCase();console.log("Role from API response:",n),console.log("Selected role in form:",i),console.log("Final role name:",a),m({title:"Login successful",description:`Welcome back! Redirecting to your ${a} dashboard.`});const s=a;console.log("Destination role:",s),console.log("Navigating to:",`/${s}/dashboard`),console.log("Waiting for user state update..."),setTimeout(()=>{console.log("Executing delayed navigation to:",`/${s}/dashboard`),h(`/${s}/dashboard`,{replace:!0})},500)}catch(s){console.error("Login error:",s);const e=null==(a=null==(n=null==s?void 0:s.response)?void 0:n.data)?void 0:a.message;m({title:"Login failed",description:"Account pending admin approval"===e?"Your account is pending admin approval. Please try again later.":s instanceof Error?s.message:"Please check your credentials and try again.",variant:"destructive"})}finally{c(!1)}},className:"space-y-4",children:[Ae.jsxs("div",{className:"space-y-1",children:[Ae.jsx(Zc,{htmlFor:"role",className:"text-sm text-gray-700",children:"Role"}),Ae.jsxs("select",{id:"role",className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:i,onChange:e=>o(e.target.value),children:[Ae.jsx("option",{value:"customer",children:"Customer"}),Ae.jsx("option",{value:"staff",children:"Staff"}),Ae.jsx("option",{value:"optometrist",children:"Optometrist"}),Ae.jsx("option",{value:"admin",children:"Admin"})]})]}),Ae.jsxs("div",{className:"space-y-1",children:[Ae.jsx(Zc,{htmlFor:"email",className:"text-sm text-gray-700",children:"Email"}),Ae.jsx(Yc,{id:"email",type:"email",placeholder:"Enter your email",value:e,onChange:e=>t(e.target.value),className:"w-full",required:!0})]}),Ae.jsxs("div",{className:"space-y-1",children:[Ae.jsx(Zc,{htmlFor:"password",className:"text-sm text-gray-700",children:"Password"}),Ae.jsxs("div",{className:"relative",children:[Ae.jsx(Yc,{id:"password",type:a?"text":"password",placeholder:"Enter your password",value:r,onChange:e=>n(e.target.value),className:"w-full pr-10",required:!0}),Ae.jsx("button",{type:"button",onClick:()=>s(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?Ae.jsx(jn,{className:"h-4 w-4"}):Ae.jsx(wn,{className:"h-4 w-4"})})]})]}),Ae.jsx(Hc,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:l,children:l?"Signing in...":"Sign In"})]}),Ae.jsxs("div",{className:"mt-6 text-center text-sm",children:[Ae.jsx("span",{className:"text-gray-600",children:"Don't have an account? "}),Ae.jsx(It,{to:"/register",className:"text-blue-600 hover:text-blue-700",children:"Sign up"})]})]})]})]})},ld=()=>{const[e,t]=Ct.useState(""),[r,n]=Ct.useState(""),[a,s]=Ct.useState(""),[i,o]=Ct.useState(""),[l,c]=Ct.useState(!1),[d,u]=Ct.useState(!1),[h,m]=Ct.useState(!1),{register:p,user:f}=Rc(),x=Dt(),{toast:y}=Jt();return Ae.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:[Ae.jsx("div",{className:"absolute top-4 right-4",children:Ae.jsx(Hc,{variant:"outline",asChild:!0,children:Ae.jsxs(It,{to:"/faq",children:[Ae.jsx(Cn,{className:"h-4 w-4 mr-2"}),"FAQ"]})})}),Ae.jsxs(td,{className:"w-full max-w-sm shadow-sm border border-gray-200",children:[Ae.jsxs(rd,{className:"text-center pb-6",children:[Ae.jsx(nd,{className:"text-xl font-semibold text-gray-900",children:"Create Account"}),Ae.jsx(ad,{className:"text-gray-600",children:"Create your customer account"})]}),Ae.jsxs(sd,{className:"px-6 pb-6",children:[Ae.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),a===i){m(!0);try{await p(e,r,a,i,"customer",void 0),y({title:"Registration successful",description:"Welcome! Redirecting to your customer dashboard."}),x("/customer/dashboard")}catch(n){y({title:"Registration failed",description:n instanceof Error?n.message:"Please try again.",variant:"destructive"})}finally{m(!1)}}else y({title:"Password mismatch",description:"Passwords do not match. Please try again.",variant:"destructive"})},className:"space-y-4",children:[Ae.jsxs("div",{className:"space-y-1",children:[Ae.jsx(Zc,{htmlFor:"name",className:"text-sm text-gray-700",children:"Full Name"}),Ae.jsx(Yc,{id:"name",type:"text",placeholder:"Enter your full name",value:e,onChange:e=>t(e.target.value),className:"w-full",required:!0})]}),Ae.jsxs("div",{className:"space-y-1",children:[Ae.jsx(Zc,{htmlFor:"email",className:"text-sm text-gray-700",children:"Email"}),Ae.jsx(Yc,{id:"email",type:"email",placeholder:"Enter your email",value:r,onChange:e=>n(e.target.value),className:"w-full",required:!0})]}),Ae.jsxs("div",{className:"space-y-1",children:[Ae.jsx(Zc,{htmlFor:"password",className:"text-sm text-gray-700",children:"Password"}),Ae.jsxs("div",{className:"relative",children:[Ae.jsx(Yc,{id:"password",type:l?"text":"password",placeholder:"Create a password",value:a,onChange:e=>s(e.target.value),className:"w-full pr-10",required:!0}),Ae.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?Ae.jsx(jn,{className:"h-4 w-4"}):Ae.jsx(wn,{className:"h-4 w-4"})})]})]}),Ae.jsxs("div",{className:"space-y-1",children:[Ae.jsx(Zc,{htmlFor:"confirmPassword",className:"text-sm text-gray-700",children:"Confirm Password"}),Ae.jsxs("div",{className:"relative",children:[Ae.jsx(Yc,{id:"confirmPassword",type:d?"text":"password",placeholder:"Confirm your password",value:i,onChange:e=>o(e.target.value),className:"w-full pr-10",required:!0}),Ae.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d?Ae.jsx(jn,{className:"h-4 w-4"}):Ae.jsx(wn,{className:"h-4 w-4"})})]})]}),Ae.jsx(Hc,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:h,children:h?"Creating account...":"Create Account"})]}),Ae.jsxs("div",{className:"mt-6 text-center text-sm",children:[Ae.jsx("span",{className:"text-gray-600",children:"Already have an account? "}),Ae.jsx(It,{to:"/login",className:"text-blue-600 hover:text-blue-700",children:"Sign in"})]}),Ae.jsxs("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded text-sm text-gray-600",children:[Ae.jsx("strong",{children:"For Staff & Optometrists:"})," Employee accounts are managed by administrators. Contact your administrator for account access."]})]})]})]})};var cd={exports:{}},dd={},ud=Ct;var hd="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},md=ud.useState,pd=ud.useEffect,fd=ud.useLayoutEffect,xd=ud.useDebugValue;function yd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!hd(e,r)}catch(n){return!0}}var vd="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=md({inst:{value:r,getSnapshot:t}}),a=n[0].inst,s=n[1];return fd(function(){a.value=r,a.getSnapshot=t,yd(a)&&s({inst:a})},[e,r,t]),pd(function(){return yd(a)&&s({inst:a}),e(function(){yd(a)&&s({inst:a})})},[e]),xd(r),r};dd.useSyncExternalStore=void 0!==ud.useSyncExternalStore?ud.useSyncExternalStore:vd,cd.exports=dd;var gd=cd.exports;function bd(){return()=>{}}var jd="Avatar",[wd,Nd]=Te(jd),[Sd,kd]=wd(jd),_d=Ct.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,s]=Ct.useState("idle");return Ae.jsx(Sd,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:s,children:Ae.jsx(Ee.span,{...n,ref:t})})});_d.displayName=jd;var Od="AvatarImage",Cd=Ct.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...s}=e,i=kd(Od,r),o=function(e,{referrerPolicy:t,crossOrigin:r}){const n=gd.useSyncExternalStore(bd,()=>!0,()=>!1),a=Ct.useRef(null),s=n?(a.current||(a.current=new window.Image),a.current):null,[i,o]=Ct.useState(()=>Pd(s,e));return ze(()=>{o(Pd(s,e))},[s,e]),ze(()=>{const e=e=>()=>{o(e)};if(!s)return;const n=e("loaded"),a=e("error");return s.addEventListener("load",n),s.addEventListener("error",a),t&&(s.referrerPolicy=t),"string"==typeof r&&(s.crossOrigin=r),()=>{s.removeEventListener("load",n),s.removeEventListener("error",a)}},[s,r,t]),i}(n,s),l=Fe(e=>{a(e),i.onImageLoadingStatusChange(e)});return ze(()=>{"idle"!==o&&l(o)},[o,l]),"loaded"===o?Ae.jsx(Ee.img,{...s,ref:t,src:n}):null});Cd.displayName=Od;var Ad="AvatarFallback",Ed=Ct.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,s=kd(Ad,r),[i,o]=Ct.useState(void 0===n);return Ct.useEffect(()=>{if(void 0!==n){const e=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(e)}},[n]),i&&"loaded"!==s.imageLoadingStatus?Ae.jsx(Ee.span,{...a,ref:t}):null});function Pd(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}Ed.displayName=Ad;var Td=_d,Md=Cd,Dd=Ed;function Id(...e){return ss(Vr(e))}const Rd=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(Td,{ref:r,className:Id("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Rd.displayName=Td.displayName;const Fd=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(Md,{ref:r,className:Id("aspect-square h-full w-full",e),...t}));Fd.displayName=Md.displayName;const Ld=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(Dd,{ref:r,className:Id("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));function Bd(...e){return ss(Vr(e))}Ld.displayName=Dd.displayName;const qd=it,zd=ot;Ct.forwardRef(({className:e,inset:t,children:r,...n},a)=>Ae.jsxs(Xe,{ref:a,className:Bd("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,Ae.jsx(pn,{className:"ml-auto h-4 w-4"})]})).displayName=Xe.displayName;Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(Qe,{ref:r,className:Bd("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=Qe.displayName;const $d=Ct.forwardRef(({className:e,sideOffset:t=4,...r},n)=>Ae.jsx(Je,{children:Ae.jsx(Ze,{ref:n,sideOffset:t,className:Bd("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));$d.displayName=Ze.displayName;const Ud=Ct.forwardRef(({className:e,inset:t,...r},n)=>Ae.jsx(et,{ref:n,className:Bd("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));Ud.displayName=et.displayName;Ct.forwardRef(({className:e,children:t,checked:r,...n},a)=>Ae.jsxs(tt,{ref:a,className:Bd("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[Ae.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Ae.jsx(rt,{children:Ae.jsx(hn,{className:"h-4 w-4"})})}),t]})).displayName=tt.displayName;Ct.forwardRef(({className:e,children:t,...r},n)=>Ae.jsxs(nt,{ref:n,className:Bd("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[Ae.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Ae.jsx(rt,{children:Ae.jsx(xn,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=nt.displayName;const Vd=Ct.forwardRef(({className:e,inset:t,...r},n)=>Ae.jsx(at,{ref:n,className:Bd("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));Vd.displayName=at.displayName;const Wd=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(st,{ref:r,className:Bd("-mx-1 my-1 h-px bg-muted",e),...t}));function Hd(...e){return ss(Vr(e))}Wd.displayName=st.displayName;const Kd=Kr("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Yd({className:e,variant:t,...r}){return Ae.jsx("div",{className:Hd(Kd({variant:t}),e),...r})}function Gd(...e){return ss(Vr(e))}const Xd=()=>{const{user:e}=Rc(),t=Rt();if(!e)return null;const r=(n=e.role,{customer:[{title:"Dashboard",href:"/customer/dashboard",icon:Xr,description:"Overview and quick actions"},{title:"Book Appointment",href:"/customer/appointments",icon:ln,description:"Schedule new appointments"},{title:"Vision History",href:"/customer/history",icon:wn,description:"View your vision records"},{title:"Prescriptions",href:"/customer/prescriptions",icon:Sn,description:"Digital prescriptions"},{title:"Products",href:"/customer/products",icon:Jn,description:"Browse eye care products"},{title:"Receipts",href:"/customer/receipts",icon:Kn,description:"View and download receipts"},{title:"Feedback",href:"/customer/feedback",icon:ea,description:"Share your experience"},{title:"Notifications",href:"/customer/notifications",icon:an,description:"Reminders and updates"},{title:"Profile",href:"/customer/profile",icon:la,description:"View your profile and branch info"}],optometrist:[{title:"Dashboard",href:"/optometrist/dashboard",icon:Xr,description:"Daily overview"},{title:"Today's Appointments",href:"/optometrist/appointments",icon:yn,description:"View scheduled appointments"},{title:"Patient History",href:"/optometrist/patients",icon:da,description:"Medical records"},{title:"Prescriptions",href:"/optometrist/prescriptions",icon:Sn,description:"Create and manage prescriptions"},{title:"My Schedule",href:"/optometrist/schedule",icon:ln,description:"View weekly rotation schedule"},{title:"Notifications",href:"/optometrist/notifications",icon:an,description:"View and manage notifications"},{title:"Profile",href:"/optometrist/profile",icon:la,description:"View your profile and branch info"}],staff:[{title:"Dashboard",href:"/staff/dashboard",icon:Xr,description:"Clinic overview"},{title:"Appointments",href:"/staff/appointments",icon:ln,description:"Manage appointments"},{title:"Reservations & Transactions",href:"/staff/reservations",icon:rn,description:"Customer reservations, transactions, and receipts"},{title:"Inventory",href:"/staff/inventory",icon:Ln,description:"Stock management"},{title:"Patients",href:"/staff/patients",icon:oa,description:"Patient management"},{title:"Notifications",href:"/staff/notifications",icon:an,description:"Send notifications"},{title:"Profile",href:"/staff/profile",icon:la,description:"View your profile and branch info"}],admin:[{title:"Dashboard",href:"/admin/dashboard",icon:nn,description:"Analytics overview"},{title:"Analytics",href:"/admin/analytics",icon:aa,description:"Sales and performance"},{title:"User Management",href:"/admin/users",icon:da,description:"Manage users and roles"},{title:"Branch Management",href:"/admin/branches",icon:sn,description:"Manage branch locations"},{title:"Inventory",href:"/admin/inventory",icon:Ln,description:"Multi-branch inventory"},{title:"Product Gallery Management",href:"/admin/products",icon:Jn,description:"Manage eye care products"},{title:"Employee Schedule Management",href:"/admin/employee-schedules",icon:ln,description:"Manage all employee schedules across branches"},{title:"Profile",href:"/admin/profile",icon:la,description:"View your profile and branch info"}]}[n]||[]);var n;const a=e=>({customer:"border-l-customer bg-customer/5",optometrist:"border-l-optometrist bg-optometrist/5",staff:"border-l-staff bg-staff/5",admin:"border-l-admin bg-admin/5"}[e]);return Ae.jsx("aside",{className:"w-64 bg-white border-r border-slate-200 min-h-screen",children:Ae.jsx("nav",{className:"p-4 space-y-2",children:r.map(r=>{const n=t.pathname===r.href;return Ae.jsxs(Ft,{to:r.href,className:Gd("flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200","hover:bg-slate-50 group",n&&["border-l-4",a(e.role),"text-slate-900 font-semibold"],!n&&"text-slate-600 hover:text-slate-900"),children:[Ae.jsx(r.icon,{className:Gd("h-5 w-5 transition-colors",n?"text-slate-700":"text-slate-500 group-hover:text-slate-700")}),Ae.jsxs("div",{className:"flex-1",children:[Ae.jsx("div",{children:r.title}),r.description&&Ae.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:r.description})]})]},r.href)})})})};function Qd(e){return(Qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jd(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Zd(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function eu(e){Zd(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===Qd(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}var tu={};function ru(){return tu}function nu(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function au(e,t){Zd(2,arguments);var r=eu(e),n=eu(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function su(e){if(Zd(1,arguments),!function(e){return Zd(1,arguments),e instanceof Date||"object"===Qd(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!=typeof e)return!1;var t=eu(e);return!isNaN(Number(t))}var iu={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function ou(e){Zd(1,arguments);var t=eu(e);return function(e){Zd(1,arguments);var t=eu(e);return t.setHours(23,59,59,999),t}(t).getTime()===function(e){Zd(1,arguments);var t=eu(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}(t).getTime()}function lu(e,t){Zd(2,arguments);var r,n=eu(e),a=eu(t),s=au(n,a),i=Math.abs(function(e,t){Zd(2,arguments);var r=eu(e),n=eu(t);return 12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth())}(n,a));if(i<1)r=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);var o=au(n,a)===-s;ou(eu(e))&&1===i&&1===au(e,a)&&(o=!1),r=s*(i-Number(o))}return 0===r?0:r}function cu(e,t,r){Zd(2,arguments);var n,a=function(e,t){return Zd(2,arguments),eu(e).getTime()-eu(t).getTime()}(e,t)/1e3;return((n=null==r?void 0:r.roundingMethod)?iu[n]:iu.trunc)(a)}function du(e,t){return Zd(2,arguments),function(e,t){Zd(2,arguments);var r=eu(e).getTime(),n=Jd(t);return new Date(r+n)}(e,-Jd(t))}function uu(e){Zd(1,arguments);var t=eu(e),r=t.getUTCDay(),n=(r<1?7:0)+r-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function hu(e){Zd(1,arguments);var t=eu(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var a=uu(n),s=new Date(0);s.setUTCFullYear(r,0,4),s.setUTCHours(0,0,0,0);var i=uu(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function mu(e){Zd(1,arguments);var t=eu(e),r=uu(t).getTime()-function(e){Zd(1,arguments);var t=hu(e),r=new Date(0);return r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0),uu(r)}(t).getTime();return Math.round(r/6048e5)+1}function pu(e,t){var r,n,a,s,i,o,l,c;Zd(1,arguments);var d=ru(),u=Jd(null!==(r=null!==(n=null!==(a=null!==(s=null==t?void 0:t.weekStartsOn)&&void 0!==s?s:null==t||null===(i=t.locale)||void 0===i||null===(o=i.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==a?a:d.weekStartsOn)&&void 0!==n?n:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==r?r:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=eu(e),m=h.getUTCDay(),p=(m<u?7:0)+m-u;return h.setUTCDate(h.getUTCDate()-p),h.setUTCHours(0,0,0,0),h}function fu(e,t){var r,n,a,s,i,o,l,c;Zd(1,arguments);var d=eu(e),u=d.getUTCFullYear(),h=ru(),m=Jd(null!==(r=null!==(n=null!==(a=null!==(s=null==t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null==t||null===(i=t.locale)||void 0===i||null===(o=i.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==a?a:h.firstWeekContainsDate)&&void 0!==n?n:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==r?r:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(u+1,0,m),p.setUTCHours(0,0,0,0);var f=pu(p,t),x=new Date(0);x.setUTCFullYear(u,0,m),x.setUTCHours(0,0,0,0);var y=pu(x,t);return d.getTime()>=f.getTime()?u+1:d.getTime()>=y.getTime()?u:u-1}function xu(e,t){Zd(1,arguments);var r=eu(e),n=pu(r,t).getTime()-function(e,t){var r,n,a,s,i,o,l,c;Zd(1,arguments);var d=ru(),u=Jd(null!==(r=null!==(n=null!==(a=null!==(s=null==t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null==t||null===(i=t.locale)||void 0===i||null===(o=i.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==a?a:d.firstWeekContainsDate)&&void 0!==n?n:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==r?r:1),h=fu(e,t),m=new Date(0);return m.setUTCFullYear(h,0,u),m.setUTCHours(0,0,0,0),pu(m,t)}(r,t).getTime();return Math.round(n/6048e5)+1}function yu(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var vu={y:function(e,t){var r=e.getUTCFullYear(),n=r>0?r:1-r;return yu("yy"===t?n%100:n,t.length)},M:function(e,t){var r=e.getUTCMonth();return"M"===t?String(r+1):yu(r+1,2)},d:function(e,t){return yu(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:function(e,t){return yu(e.getUTCHours()%12||12,t.length)},H:function(e,t){return yu(e.getUTCHours(),t.length)},m:function(e,t){return yu(e.getUTCMinutes(),t.length)},s:function(e,t){return yu(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,n=e.getUTCMilliseconds();return yu(Math.floor(n*Math.pow(10,r-3)),t.length)}};const gu=vu;var bu="midnight",ju="noon",wu="morning",Nu="afternoon",Su="evening",ku="night",_u={G:function(e,t,r){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){var n=e.getUTCFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return gu.y(e,t)},Y:function(e,t,r,n){var a=fu(e,n),s=a>0?a:1-a;return"YY"===t?yu(s%100,2):"Yo"===t?r.ordinalNumber(s,{unit:"year"}):yu(s,t.length)},R:function(e,t){return yu(hu(e),t.length)},u:function(e,t){return yu(e.getUTCFullYear(),t.length)},Q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return yu(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return yu(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){var n=e.getUTCMonth();switch(t){case"M":case"MM":return gu.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return yu(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){var a=xu(e,n);return"wo"===t?r.ordinalNumber(a,{unit:"week"}):yu(a,t.length)},I:function(e,t,r){var n=mu(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):yu(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):gu.d(e,t)},D:function(e,t,r){var n=function(e){Zd(1,arguments);var t=eu(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=r-t.getTime();return Math.floor(n/864e5)+1}(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):yu(n,t.length)},E:function(e,t,r){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){var a=e.getUTCDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return yu(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){var a=e.getUTCDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return yu(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){var n=e.getUTCDay(),a=0===n?7:n;switch(t){case"i":return String(a);case"ii":return yu(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){var n,a=e.getUTCHours();switch(n=12===a?ju:0===a?bu:a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){var n,a=e.getUTCHours();switch(n=a>=17?Su:a>=12?Nu:a>=4?wu:ku,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return gu.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):gu.H(e,t)},K:function(e,t,r){var n=e.getUTCHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):yu(n,t.length)},k:function(e,t,r){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):yu(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):gu.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):gu.s(e,t)},S:function(e,t){return gu.S(e,t)},X:function(e,t,r,n){var a=(n._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return Cu(a);case"XXXX":case"XX":return Au(a);default:return Au(a,":")}},x:function(e,t,r,n){var a=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return Cu(a);case"xxxx":case"xx":return Au(a);default:return Au(a,":")}},O:function(e,t,r,n){var a=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ou(a,":");default:return"GMT"+Au(a,":")}},z:function(e,t,r,n){var a=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ou(a,":");default:return"GMT"+Au(a,":")}},t:function(e,t,r,n){var a=n._originalDate||e;return yu(Math.floor(a.getTime()/1e3),t.length)},T:function(e,t,r,n){return yu((n._originalDate||e).getTime(),t.length)}};function Ou(e,t){var r=e>0?"-":"+",n=Math.abs(e),a=Math.floor(n/60),s=n%60;if(0===s)return r+String(a);var i=t||"";return r+String(a)+i+yu(s,2)}function Cu(e,t){return e%60==0?(e>0?"-":"+")+yu(Math.abs(e)/60,2):Au(e,t)}function Au(e,t){var r=t||"",n=e>0?"-":"+",a=Math.abs(e);return n+yu(Math.floor(a/60),2)+r+yu(a%60,2)}const Eu=_u;var Pu=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Tu=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};const Mu={p:Tu,P:function(e,t){var r,n=e.match(/(P+)(p+)?/)||[],a=n[1],s=n[2];if(!s)return Pu(e,t);switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",Pu(a,t)).replace("{{time}}",Tu(s,t))}};var Du=["D","DD"],Iu=["YY","YYYY"];function Ru(e,t,r){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Fu={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const Lu=function(e,t,r){var n,a=Fu[e];return n="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!=r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Bu(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var qu={date:Bu({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Bu({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Bu({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var zu={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const $u=function(e,t,r,n){return zu[e]};function Uu(e){return function(t,r){var n;if("formatting"===(null!=r&&r.context?String(r.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,s=null!=r&&r.width?String(r.width):a;n=e.formattingValues[s]||e.formattingValues[a]}else{var i=e.defaultWidth,o=null!=r&&r.width?String(r.width):e.defaultWidth;n=e.values[o]||e.values[i]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function Vu(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;var i,o=s[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r;return}(l,function(e){return e.test(o)}):function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r;return}(l,function(e){return e.test(o)});return i=e.valueCallback?e.valueCallback(c):c,{value:i=r.valueCallback?r.valueCallback(i):i,rest:t.slice(o.length)}}}var Wu;const Hu={code:"en-US",formatDistance:Lu,formatLong:qu,formatRelative:$u,localize:{ordinalNumber:function(e,t){var r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:Uu({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Uu({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Uu({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Uu({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Uu({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Wu={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(Wu.matchPattern);if(!r)return null;var n=r[0],a=e.match(Wu.parsePattern);if(!a)return null;var s=Wu.valueCallback?Wu.valueCallback(a[0]):a[0];return{value:s=t.valueCallback?t.valueCallback(s):s,rest:e.slice(n.length)}}),era:Vu({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Vu({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Vu({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Vu({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Vu({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var Ku=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Yu=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Gu=/^'([^]*?)'?$/,Xu=/''/g,Qu=/[a-zA-Z]/;function Ju(e,t,r){var n,a,s,i,o,l,c,d,u,h,m,p,f,x,y,v,g,b;Zd(2,arguments);var j=String(t),w=ru(),N=null!==(n=null!==(a=null==r?void 0:r.locale)&&void 0!==a?a:w.locale)&&void 0!==n?n:Hu,S=Jd(null!==(s=null!==(i=null!==(o=null!==(l=null==r?void 0:r.firstWeekContainsDate)&&void 0!==l?l:null==r||null===(c=r.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==o?o:w.firstWeekContainsDate)&&void 0!==i?i:null===(u=w.locale)||void 0===u||null===(h=u.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==s?s:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=Jd(null!==(m=null!==(p=null!==(f=null!==(x=null==r?void 0:r.weekStartsOn)&&void 0!==x?x:null==r||null===(y=r.locale)||void 0===y||null===(v=y.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==f?f:w.weekStartsOn)&&void 0!==p?p:null===(g=w.locale)||void 0===g||null===(b=g.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==m?m:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!N.localize)throw new RangeError("locale must contain localize property");if(!N.formatLong)throw new RangeError("locale must contain formatLong property");var _=eu(e);if(!su(_))throw new RangeError("Invalid time value");var O=du(_,nu(_)),C={firstWeekContainsDate:S,weekStartsOn:k,locale:N,_originalDate:_},A=j.match(Yu).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,Mu[t])(e,N.formatLong):e}).join("").match(Ku).map(function(n){if("''"===n)return"'";var a=n[0];if("'"===a)return function(e){var t=e.match(Gu);if(!t)return e;return t[1].replace(Xu,"'")}(n);var s=Eu[a];if(s)return null!=r&&r.useAdditionalWeekYearTokens||!function(e){return-1!==Iu.indexOf(e)}(n)||Ru(n,t,String(e)),null!=r&&r.useAdditionalDayOfYearTokens||!function(e){return-1!==Du.indexOf(e)}(n)||Ru(n,t,String(e)),s(O,n,N.localize,C);if(a.match(Qu))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");return n}).join("");return A}function Zu(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}var eh=43200;function th(e,t,r){var n,a;Zd(2,arguments);var s=ru(),i=null!==(n=null!==(a=null==r?void 0:r.locale)&&void 0!==a?a:s.locale)&&void 0!==n?n:Hu;if(!i.formatDistance)throw new RangeError("locale must contain formatDistance property");var o=au(e,t);if(isNaN(o))throw new RangeError("Invalid time value");var l,c,d=Zu(Zu({},r),{addSuffix:Boolean(null==r?void 0:r.addSuffix),comparison:o});o>0?(l=eu(t),c=eu(e)):(l=eu(e),c=eu(t));var u,h=cu(c,l),m=(nu(c)-nu(l))/1e3,p=Math.round((h-m)/60);if(p<2)return null!=r&&r.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,d):h<10?i.formatDistance("lessThanXSeconds",10,d):h<20?i.formatDistance("lessThanXSeconds",20,d):h<40?i.formatDistance("halfAMinute",0,d):h<60?i.formatDistance("lessThanXMinutes",1,d):i.formatDistance("xMinutes",1,d):0===p?i.formatDistance("lessThanXMinutes",1,d):i.formatDistance("xMinutes",p,d);if(p<45)return i.formatDistance("xMinutes",p,d);if(p<90)return i.formatDistance("aboutXHours",1,d);if(p<1440){var f=Math.round(p/60);return i.formatDistance("aboutXHours",f,d)}if(p<2520)return i.formatDistance("xDays",1,d);if(p<eh){var x=Math.round(p/1440);return i.formatDistance("xDays",x,d)}if(p<86400)return u=Math.round(p/eh),i.formatDistance("aboutXMonths",u,d);if((u=lu(c,l))<12){var y=Math.round(p/eh);return i.formatDistance("xMonths",y,d)}var v=u%12,g=Math.floor(u/12);return v<3?i.formatDistance("aboutXYears",g,d):v<9?i.formatDistance("overXYears",g,d):i.formatDistance("almostXYears",g+1,d)}function rh(e,t){return Zd(1,arguments),th(e,Date.now(),t)}const nh=()=>{const[e,t]=Ct.useState(!1),r=Ct.useRef(null),{notifications:n,unreadCount:a,loading:s,markNotificationAsRead:i,markAllNotificationsAsRead:o,refreshNotifications:l}=zc();Ct.useEffect(()=>{const e=e=>{r.current&&!r.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const c=e=>{switch(e){case"appointment":return"📅";case"prescription":return"💊";case"inventory":return"📦";case"user_signup":return"👤";default:return"🔔"}},d=e=>{switch(e){case"appointment":return"text-blue-600";case"prescription":return"text-green-600";case"inventory":return"text-orange-600";case"user_signup":return"text-purple-600";default:return"text-gray-600"}};return Ae.jsxs("div",{className:"relative",ref:r,children:[Ae.jsxs("button",{onClick:()=>{t(!e),e||l()},className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full",children:[Ae.jsx(an,{className:"h-6 w-6"}),a>0&&Ae.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:a>99?"99+":a})]}),e&&Ae.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[Ae.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[Ae.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[a>0&&Ae.jsxs("button",{onClick:async()=>{await o()},className:"text-xs text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[Ae.jsx(cn,{className:"h-3 w-3"}),Ae.jsx("span",{children:"Mark all read"})]}),Ae.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600",children:Ae.jsx(ma,{className:"h-4 w-4"})})]})]}),Ae.jsx("div",{className:"max-h-96 overflow-y-auto",children:s?Ae.jsxs("div",{className:"px-4 py-8 text-center",children:[Ae.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),Ae.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading notifications..."})]}):0===n.length?Ae.jsxs("div",{className:"px-4 py-8 text-center",children:[Ae.jsx(an,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),Ae.jsx("p",{className:"text-gray-500",children:"No notifications yet"})]}):Ae.jsx("div",{className:"divide-y divide-gray-100",children:n.map(e=>Ae.jsx("div",{onClick:()=>(async e=>{"unread"===e.status&&await i(e.id)})(e),className:"px-4 py-3 hover:bg-gray-50 cursor-pointer transition-colors "+("unread"===e.status?"bg-blue-50":""),children:Ae.jsxs("div",{className:"flex items-start space-x-3",children:[Ae.jsx("div",{className:"flex-shrink-0",children:Ae.jsx("span",{className:"text-lg",children:c(e.type)})}),Ae.jsxs("div",{className:"flex-1 min-w-0",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsx("p",{className:`text-sm font-medium ${d(e.type)}`,children:e.title}),"unread"===e.status&&Ae.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),Ae.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.message}),Ae.jsx("p",{className:"text-xs text-gray-400 mt-1",children:rh(new Date(e.created_at),{addSuffix:!0})})]})]})},e.id))})}),n.length>0&&Ae.jsx("div",{className:"px-4 py-2 border-t border-gray-200 bg-gray-50",children:Ae.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Showing ",n.length," notifications"]})})]})]})},ah=()=>{const{user:e,logout:t}=Rc(),r=Dt();if(!e)return null;const n=(e.name||e.email||"").toString(),a=n.split(" ").filter(Boolean).map(e=>e[0]).join("").toUpperCase().slice(0,2);return Ae.jsxs("div",{className:"min-h-screen bg-slate-50",children:[Ae.jsxs("header",{className:"bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between sticky top-0 z-40 shadow-sm",children:[Ae.jsxs("div",{className:"flex items-center space-x-4",children:[Ae.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Optical Clinic Management"}),Ae.jsx(Yd,{className:(s=e.role,{customer:"bg-customer text-customer-foreground",optometrist:"bg-optometrist text-optometrist-foreground",staff:"bg-staff text-staff-foreground",admin:"bg-admin text-admin-foreground"}[s]),children:e.role.charAt(0).toUpperCase()+e.role.slice(1)})]}),Ae.jsxs("div",{className:"flex items-center space-x-4",children:[Ae.jsx(nh,{}),Ae.jsxs(qd,{children:[Ae.jsx(zd,{asChild:!0,children:Ae.jsx(Hc,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:Ae.jsxs(Rd,{className:"h-8 w-8",children:[Ae.jsx(Fd,{src:e.avatar,alt:n}),Ae.jsx(Ld,{children:a})]})})}),Ae.jsxs($d,{className:"w-56",align:"end",forceMount:!0,children:[Ae.jsx(Vd,{className:"font-normal",children:Ae.jsxs("div",{className:"flex flex-col space-y-1",children:[Ae.jsx("p",{className:"text-sm font-medium leading-none",children:e.name}),Ae.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email}),e.branch&&Ae.jsxs("p",{className:"text-xs leading-none text-muted-foreground",children:["Branch: ",e.branch.name]})]})}),Ae.jsx(Wd,{}),Ae.jsxs(Ud,{children:[Ae.jsx(ca,{className:"mr-2 h-4 w-4"}),Ae.jsx("span",{children:"Profile"})]}),Ae.jsxs(Ud,{children:[Ae.jsx(Gn,{className:"mr-2 h-4 w-4"}),Ae.jsx("span",{children:"Settings"})]}),Ae.jsx(Wd,{}),Ae.jsxs(Ud,{onClick:()=>{t(),r("/login")},children:[Ae.jsx(Mn,{className:"mr-2 h-4 w-4"}),Ae.jsx("span",{children:"Log out"})]})]})]})]})]}),Ae.jsxs("div",{className:"flex",children:[Ae.jsx(Xd,{}),Ae.jsx("main",{className:"flex-1 p-6",children:Ae.jsx(Lt,{})})]})]});var s},sh=Cc.create({baseURL:"http://192.168.100.6:8000/api",headers:{"Content-Type":"application/json",Accept:"application/json"}});sh.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const ih=e=>{const[t,r]=Ct.useState([]),[n,a]=Ct.useState(!1),[s,i]=Ct.useState(null),o=async()=>{var t,n;a(!0),i(null);try{const t=await(e=>sh.get("/appointments",{params:e}))(e);r(t.data.data||t.data||[])}catch(s){i((null==(n=null==(t=s.response)?void 0:t.data)?void 0:n.message)||"Failed to fetch appointments")}finally{a(!1)}};Ct.useEffect(()=>{o()},[JSON.stringify(e)]);return{appointments:t,loading:n,error:s,refetch:()=>o()}},oh=()=>{const[e,t]=Ct.useState(!1),[r,n]=Ct.useState(null);return{create:async e=>{var r,a;t(!0),n(null);try{const t=await(e=>sh.post("/appointments",e))(e);return t.data}catch(s){throw n((null==(a=null==(r=s.response)?void 0:r.data)?void 0:a.message)||"Failed to create appointment"),s}finally{t(!1)}},loading:e,error:r}},lh=()=>{const[e,t]=Ct.useState(!1),[r,n]=Ct.useState(null);return{update:async(e,r)=>{var a,s;t(!0),n(null);try{const t=await((e,t)=>sh.put(`/appointments/${e}`,t))(e,r);return t.data}catch(i){throw n((null==(s=null==(a=i.response)?void 0:a.data)?void 0:s.message)||"Failed to update appointment"),i}finally{t(!1)}},loading:e,error:r}},ch=()=>{const[e,t]=Ct.useState(!1),[r,n]=Ct.useState(null);return{remove:async e=>{var r,a;t(!0),n(null);try{await(e=>sh.delete(`/appointments/${e}`))(e)}catch(s){throw n((null==(a=null==(r=s.response)?void 0:r.data)?void 0:a.message)||"Failed to delete appointment"),s}finally{t(!1)}},loading:e,error:r}};function dh(...e){return ss(Vr(e))}function uh({className:e,...t}){return Ae.jsx("div",{className:dh("animate-pulse rounded-md bg-muted",e),...t})}const hh=({notification:e,onDismiss:t})=>{const[r,n]=Ct.useState(!0),[a,s]=Ct.useState(!1),{toast:i}=Jt(),o=Dt(),l=e=>{switch(e){case"good":return"Good Condition";case"needs_fix":return"Needs Repair";case"needs_replacement":return"Needs Replacement";case"bad":return"Poor Condition";default:return e}};return r?Ae.jsxs(td,{className:`mb-4 animate-in slide-in-from-top-2 duration-300 ${(e=>{switch(e){case"good":return"border-green-200 bg-green-50";case"needs_fix":return"border-yellow-200 bg-yellow-50";case"needs_replacement":return"border-orange-200 bg-orange-50";case"bad":return"border-red-200 bg-red-50";default:return"border-blue-200 bg-blue-50"}})(e.condition)}`,children:[Ae.jsx(rd,{className:"pb-3",children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center space-x-3",children:[(e=>{switch(e){case"good":return Ae.jsx(dn,{className:"h-5 w-5 text-green-500"});case"needs_fix":return Ae.jsx(ua,{className:"h-5 w-5 text-yellow-500"});case"needs_replacement":return Ae.jsx(Vn,{className:"h-5 w-5 text-orange-500"});case"bad":return Ae.jsx(Jr,{className:"h-5 w-5 text-red-500"});default:return Ae.jsx(wn,{className:"h-5 w-5 text-blue-500"})}})(e.condition),Ae.jsxs("div",{children:[Ae.jsxs(nd,{className:"text-lg flex items-center gap-2",children:["Eyewear Condition Assessment",Ae.jsx(Yd,{variant:"outline",className:"text-xs",children:l(e.condition)})]}),Ae.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[Ae.jsx(yn,{className:"h-3 w-3"}),"Assessed by ",e.assessed_by," • ",rh(new Date(e.assessment_date),{addSuffix:!0})]})]})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(Yd,{className:(e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.priority),children:e.priority.toUpperCase()}),Ae.jsx(Hc,{variant:"ghost",size:"sm",onClick:async()=>{n(!1);try{await fetch("/api/notifications/mark-read",{method:"POST",headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"},body:JSON.stringify({notification_id:e.id})}),null==t||t(e.id)}catch(r){console.error("Failed to mark notification as read:",r)}},children:Ae.jsx(ma,{className:"h-4 w-4"})})]})]})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"space-y-3",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(wn,{className:"h-4 w-4 text-gray-500"}),Ae.jsx("span",{className:"font-medium",children:e.eyewear_label})]}),Ae.jsxs("div",{className:"text-sm text-gray-700 bg-white p-3 rounded-md border",children:[Ae.jsx("strong",{children:"Status:"})," ",l(e.condition),Ae.jsx("br",{}),Ae.jsx("strong",{children:"Action:"})," ",(e=>{switch(e){case"bad":return"Immediate attention required";case"needs_replacement":return"Replacement recommended";case"needs_fix":return"Repair recommended";case"good":return"No action needed";default:return""}})(e.condition)]}),e.notes&&Ae.jsxs("div",{className:"text-sm text-gray-700 bg-white p-3 rounded-md border",children:[Ae.jsx("strong",{children:"Notes:"})," ",e.notes]}),e.next_check_date&&Ae.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:[Ae.jsx(ln,{className:"h-3 w-3"}),Ae.jsx("strong",{children:"Next recommended check:"})," ",new Date(e.next_check_date).toLocaleDateString()]}),Ae.jsxs("div",{className:"flex space-x-2 pt-2",children:["good"!==e.condition&&Ae.jsx(Hc,{size:"sm",onClick:()=>{i({title:"Schedule Eyewear Check",description:"Redirecting to appointment booking..."}),o("/customer/appointments",{state:{prefill:{type:"follow_up",notes:`Eyewear condition check for ${e.eyewear_label}`}}})},children:"Schedule Check"}),Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>{s(!a)},children:a?"Less Details":"More Details"})]}),a&&Ae.jsxs("div",{className:"mt-3 p-3 bg-white rounded-md border",children:[Ae.jsx("h4",{className:"font-medium mb-2",children:"Assessment Details"}),Ae.jsxs("div",{className:"text-sm space-y-1",children:[Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Assessment Date:"})," ",new Date(e.assessment_date).toLocaleString()]}),Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Condition:"})," ",l(e.condition)]}),Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Priority:"})," ",e.priority]}),Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Assessed By:"})," ",e.assessed_by]}),e.next_check_date&&Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Next Check:"})," ",new Date(e.next_check_date).toLocaleDateString()]}),e.notes&&Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Notes:"})," ",e.notes]})]})]})]})})]}):null};function mh(...e){return ss(Vr(e))}const ph=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("textarea",{className:mh("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));function fh(e,[t,r]){return Math.min(r,Math.max(t,e))}ph.displayName="Textarea";var xh=[" ","Enter","ArrowUp","ArrowDown"],yh=[" ","Enter"],vh="Select",[gh,bh,jh]=Pe(vh),[wh,Nh]=Te(vh,[jh,Ue]),Sh=Ue(),[kh,_h]=wh(vh),[Oh,Ch]=wh(vh),Ah=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:s,value:i,defaultValue:o,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:h,required:m,form:p}=e,f=Sh(t),[x,y]=Ct.useState(null),[v,g]=Ct.useState(null),[b,j]=Ct.useState(!1),w=pt(c),[N,S]=Ie({prop:n,defaultProp:a??!1,onChange:s,caller:vh}),[k,_]=Ie({prop:i,defaultProp:o,onChange:l,caller:vh}),O=Ct.useRef(null),C=!x||(p||!!x.closest("form")),[A,E]=Ct.useState(new Set),P=Array.from(A).map(e=>e.props.value).join(";");return Ae.jsx(ft,{...f,children:Ae.jsxs(kh,{required:m,scope:t,trigger:x,onTriggerChange:y,valueNode:v,onValueNodeChange:g,valueNodeHasChildren:b,onValueNodeHasChildrenChange:j,contentId:ht(),value:k,onValueChange:_,open:N,onOpenChange:S,dir:w,triggerPointerDownPosRef:O,disabled:h,children:[Ae.jsx(gh.Provider,{scope:t,children:Ae.jsx(Oh,{scope:e.__scopeSelect,onNativeOptionAdd:Ct.useCallback(e=>{E(t=>new Set(t).add(e))},[]),onNativeOptionRemove:Ct.useCallback(e=>{E(t=>{const r=new Set(t);return r.delete(e),r})},[]),children:r})}),C?Ae.jsxs(fm,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:u,value:k,onChange:e=>_(e.target.value),disabled:h,form:p,children:[void 0===k?Ae.jsx("option",{value:""}):null,Array.from(A)]},P):null]})})};Ah.displayName=vh;var Eh="SelectTrigger",Ph=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,s=Sh(r),i=_h(Eh,r),o=i.disabled||n,l=Me(t,i.onTriggerChange),c=bh(r),d=Ct.useRef("touch"),[u,h,m]=ym(e=>{const t=c().filter(e=>!e.disabled),r=t.find(e=>e.value===i.value),n=vm(t,e,r);void 0!==n&&i.onValueChange(n.value)}),p=e=>{o||(i.onOpenChange(!0),m()),e&&(i.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return Ae.jsx(Ve,{asChild:!0,...s,children:Ae.jsx(Ee.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":xm(i.value)?"":void 0,...a,ref:l,onClick:Le(a.onClick,e=>{e.currentTarget.focus(),"mouse"!==d.current&&p(e)}),onPointerDown:Le(a.onPointerDown,e=>{d.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(p(e),e.preventDefault())}),onKeyDown:Le(a.onKeyDown,e=>{const t=""!==u.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),t&&" "===e.key||xh.includes(e.key)&&(p(),e.preventDefault())})})})});Ph.displayName=Eh;var Th="SelectValue",Mh=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:s,placeholder:i="",...o}=e,l=_h(Th,r),{onValueNodeHasChildrenChange:c}=l,d=void 0!==s,u=Me(t,l.onValueNodeChange);return ze(()=>{c(d)},[c,d]),Ae.jsx(Ee.span,{...o,ref:u,style:{pointerEvents:"none"},children:xm(l.value)?Ae.jsx(Ae.Fragment,{children:i}):s})});Mh.displayName=Th;var Dh=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return Ae.jsx(Ee.span,{"aria-hidden":!0,...a,ref:t,children:n||"▼"})});Dh.displayName="SelectIcon";var Ih=e=>Ae.jsx(qe,{asChild:!0,...e});Ih.displayName="SelectPortal";var Rh="SelectContent",Fh=Ct.forwardRef((e,t)=>{const r=_h(Rh,e.__scopeSelect),[n,a]=Ct.useState();if(ze(()=>{a(new DocumentFragment)},[]),!r.open){const t=n;return t?Ot.createPortal(Ae.jsx(Bh,{scope:e.__scopeSelect,children:Ae.jsx(gh.Slot,{scope:e.__scopeSelect,children:Ae.jsx("div",{children:e.children})})}),t):null}return Ae.jsx($h,{...e,ref:t})});Fh.displayName=Rh;var Lh=10,[Bh,qh]=wh(Rh),zh=mt("SelectContent.RemoveScroll"),$h=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:s,onPointerDownOutside:i,side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:m,sticky:p,hideWhenDetached:f,avoidCollisions:x,...y}=e,v=_h(Rh,r),[g,b]=Ct.useState(null),[j,w]=Ct.useState(null),N=Me(t,e=>b(e)),[S,k]=Ct.useState(null),[_,O]=Ct.useState(null),C=bh(r),[A,E]=Ct.useState(!1),P=Ct.useRef(!1);Ct.useEffect(()=>{if(g)return lt(g)},[g]),ct();const T=Ct.useCallback(e=>{const[t,...r]=C().map(e=>e.ref.current),[n]=r.slice(-1),a=document.activeElement;for(const s of e){if(s===a)return;if(null==s||s.scrollIntoView({block:"nearest"}),s===t&&j&&(j.scrollTop=0),s===n&&j&&(j.scrollTop=j.scrollHeight),null==s||s.focus(),document.activeElement!==a)return}},[C,j]),M=Ct.useCallback(()=>T([S,g]),[T,S,g]);Ct.useEffect(()=>{A&&M()},[A,M]);const{onOpenChange:D,triggerPointerDownPosRef:I}=v;Ct.useEffect(()=>{if(g){let e={x:0,y:0};const t=t=>{var r,n;e={x:Math.abs(Math.round(t.pageX)-((null==(r=I.current)?void 0:r.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(n=I.current)?void 0:n.y)??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():g.contains(r.target)||D(!1),document.removeEventListener("pointermove",t),I.current=null};return null!==I.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[g,D,I]),Ct.useEffect(()=>{const e=()=>D(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[D]);const[R,F]=ym(e=>{const t=C().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),n=vm(t,e,r);n&&setTimeout(()=>n.ref.current.focus())}),L=Ct.useCallback((e,t,r)=>{const n=!P.current&&!r;(void 0!==v.value&&v.value===t||n)&&(k(e),n&&(P.current=!0))},[v.value]),B=Ct.useCallback(()=>null==g?void 0:g.focus(),[g]),q=Ct.useCallback((e,t,r)=>{const n=!P.current&&!r;(void 0!==v.value&&v.value===t||n)&&O(e)},[v.value]),z="popper"===n?Vh:Uh,$=z===Vh?{side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:m,sticky:p,hideWhenDetached:f,avoidCollisions:x}:{};return Ae.jsx(Bh,{scope:r,content:g,viewport:j,onViewportChange:w,itemRefCallback:L,selectedItem:S,onItemLeave:B,itemTextRefCallback:q,focusSelectedItem:M,selectedItemText:_,position:n,isPositioned:A,searchRef:R,children:Ae.jsx(dt,{as:zh,allowPinchZoom:!0,children:Ae.jsx(ut,{asChild:!0,trapped:v.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Le(a,e=>{var t;null==(t=v.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:Ae.jsx(We,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:Ae.jsx(z,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:e=>e.preventDefault(),...y,...$,onPlaced:()=>E(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Le(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||F(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=C().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout(()=>T(t)),e.preventDefault()}})})})})})})});$h.displayName="SelectContentImpl";var Uh=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,s=_h(Rh,r),i=qh(Rh,r),[o,l]=Ct.useState(null),[c,d]=Ct.useState(null),u=Me(t,e=>d(e)),h=bh(r),m=Ct.useRef(!1),p=Ct.useRef(!0),{viewport:f,selectedItem:x,selectedItemText:y,focusSelectedItem:v}=i,g=Ct.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&c&&f&&x&&y){const e=s.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),r=s.valueNode.getBoundingClientRect(),a=y.getBoundingClientRect();if("rtl"!==s.dir){const n=a.left-t.left,s=r.left-n,i=e.left-s,l=e.width+i,c=Math.max(l,t.width),d=window.innerWidth-Lh,u=fh(s,[Lh,Math.max(Lh,d-c)]);o.style.minWidth=l+"px",o.style.left=u+"px"}else{const n=t.right-a.right,s=window.innerWidth-r.right-n,i=window.innerWidth-e.right-s,l=e.width+i,c=Math.max(l,t.width),d=window.innerWidth-Lh,u=fh(s,[Lh,Math.max(Lh,d-c)]);o.style.minWidth=l+"px",o.style.right=u+"px"}const i=h(),l=window.innerHeight-2*Lh,d=f.scrollHeight,u=window.getComputedStyle(c),p=parseInt(u.borderTopWidth,10),v=parseInt(u.paddingTop,10),g=parseInt(u.borderBottomWidth,10),b=p+v+d+parseInt(u.paddingBottom,10)+g,j=Math.min(5*x.offsetHeight,b),w=window.getComputedStyle(f),N=parseInt(w.paddingTop,10),S=parseInt(w.paddingBottom,10),k=e.top+e.height/2-Lh,_=l-k,O=x.offsetHeight/2,C=p+v+(x.offsetTop+O),A=b-C;if(C<=k){const e=i.length>0&&x===i[i.length-1].ref.current;o.style.bottom="0px";const t=c.clientHeight-f.offsetTop-f.offsetHeight,r=C+Math.max(_,O+(e?S:0)+t+g);o.style.height=r+"px"}else{const e=i.length>0&&x===i[0].ref.current;o.style.top="0px";const t=Math.max(k,p+f.offsetTop+(e?N:0)+O)+A;o.style.height=t+"px",f.scrollTop=C-k+f.offsetTop}o.style.margin=`${Lh}px 0`,o.style.minHeight=j+"px",o.style.maxHeight=l+"px",null==n||n(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,o,c,f,x,y,s.dir,n]);ze(()=>g(),[g]);const[b,j]=Ct.useState();ze(()=>{c&&j(window.getComputedStyle(c).zIndex)},[c]);const w=Ct.useCallback(e=>{e&&!0===p.current&&(g(),null==v||v(),p.current=!1)},[g,v]);return Ae.jsx(Wh,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:w,children:Ae.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:Ae.jsx(Ee.div,{...a,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Uh.displayName="SelectItemAlignedPosition";var Vh=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Lh,...s}=e,i=Sh(r);return Ae.jsx(He,{...i,...s,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Vh.displayName="SelectPopperPosition";var[Wh,Hh]=wh(Rh,{}),Kh="SelectViewport",Yh=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,s=qh(Kh,r),i=Hh(Kh,r),o=Me(t,s.onViewportChange),l=Ct.useRef(0);return Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),Ae.jsx(gh.Slot,{scope:r,children:Ae.jsx(Ee.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Le(a.onScroll,e=>{const t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=i;if((null==n?void 0:n.current)&&r){const e=Math.abs(l.current-t.scrollTop);if(e>0){const n=window.innerHeight-2*Lh,a=parseFloat(r.style.minHeight),s=parseFloat(r.style.height),i=Math.max(a,s);if(i<n){const a=i+e,s=Math.min(n,a),o=a-s;r.style.height=s+"px","0px"===r.style.bottom&&(t.scrollTop=o>0?o:0,r.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});Yh.displayName=Kh;var Gh="SelectGroup",[Xh,Qh]=wh(Gh);Ct.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=ht();return Ae.jsx(Xh,{scope:r,id:a,children:Ae.jsx(Ee.div,{role:"group","aria-labelledby":a,...n,ref:t})})}).displayName=Gh;var Jh="SelectLabel",Zh=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Qh(Jh,r);return Ae.jsx(Ee.div,{id:a.id,...n,ref:t})});Zh.displayName=Jh;var em="SelectItem",[tm,rm]=wh(em),nm=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:s,...i}=e,o=_h(em,r),l=qh(em,r),c=o.value===n,[d,u]=Ct.useState(s??""),[h,m]=Ct.useState(!1),p=Me(t,e=>{var t;return null==(t=l.itemRefCallback)?void 0:t.call(l,e,n,a)}),f=ht(),x=Ct.useRef("touch"),y=()=>{a||(o.onValueChange(n),o.onOpenChange(!1))};if(""===n)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Ae.jsx(tm,{scope:r,value:n,disabled:a,textId:f,isSelected:c,onItemTextChange:Ct.useCallback(e=>{u(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:Ae.jsx(gh.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:Ae.jsx(Ee.div,{role:"option","aria-labelledby":f,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:p,onFocus:Le(i.onFocus,()=>m(!0)),onBlur:Le(i.onBlur,()=>m(!1)),onClick:Le(i.onClick,()=>{"mouse"!==x.current&&y()}),onPointerUp:Le(i.onPointerUp,()=>{"mouse"===x.current&&y()}),onPointerDown:Le(i.onPointerDown,e=>{x.current=e.pointerType}),onPointerMove:Le(i.onPointerMove,e=>{var t;x.current=e.pointerType,a?null==(t=l.onItemLeave)||t.call(l):"mouse"===x.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Le(i.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=l.onItemLeave)||t.call(l))}),onKeyDown:Le(i.onKeyDown,e=>{var t;""!==(null==(t=l.searchRef)?void 0:t.current)&&" "===e.key||(yh.includes(e.key)&&y()," "===e.key&&e.preventDefault())})})})})});nm.displayName=em;var am="SelectItemText",sm=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...s}=e,i=_h(am,r),o=qh(am,r),l=rm(am,r),c=Ch(am,r),[d,u]=Ct.useState(null),h=Me(t,e=>u(e),l.onItemTextChange,e=>{var t;return null==(t=o.itemTextRefCallback)?void 0:t.call(o,e,l.value,l.disabled)}),m=null==d?void 0:d.textContent,p=Ct.useMemo(()=>Ae.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:f,onNativeOptionRemove:x}=c;return ze(()=>(f(p),()=>x(p)),[f,x,p]),Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(Ee.span,{id:l.textId,...s,ref:h}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Ot.createPortal(s.children,i.valueNode):null]})});sm.displayName=am;var im="SelectItemIndicator",om=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return rm(im,r).isSelected?Ae.jsx(Ee.span,{"aria-hidden":!0,...n,ref:t}):null});om.displayName=im;var lm="SelectScrollUpButton",cm=Ct.forwardRef((e,t)=>{const r=qh(lm,e.__scopeSelect),n=Hh(lm,e.__scopeSelect),[a,s]=Ct.useState(!1),i=Me(t,n.onScrollButtonChange);return ze(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;s(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?Ae.jsx(hm,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});cm.displayName=lm;var dm="SelectScrollDownButton",um=Ct.forwardRef((e,t)=>{const r=qh(dm,e.__scopeSelect),n=Hh(dm,e.__scopeSelect),[a,s]=Ct.useState(!1),i=Me(t,n.onScrollButtonChange);return ze(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,r=Math.ceil(t.scrollTop)<e;s(r)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?Ae.jsx(hm,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});um.displayName=dm;var hm=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,s=qh("SelectScrollButton",r),i=Ct.useRef(null),o=bh(r),l=Ct.useCallback(()=>{null!==i.current&&(window.clearInterval(i.current),i.current=null)},[]);return Ct.useEffect(()=>()=>l(),[l]),ze(()=>{var e;const t=o().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[o]),Ae.jsx(Ee.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Le(a.onPointerDown,()=>{null===i.current&&(i.current=window.setInterval(n,50))}),onPointerMove:Le(a.onPointerMove,()=>{var e;null==(e=s.onItemLeave)||e.call(s),null===i.current&&(i.current=window.setInterval(n,50))}),onPointerLeave:Le(a.onPointerLeave,()=>{l()})})}),mm=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return Ae.jsx(Ee.div,{"aria-hidden":!0,...n,ref:t})});mm.displayName="SelectSeparator";var pm="SelectArrow";Ct.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Sh(r),s=_h(pm,r),i=qh(pm,r);return s.open&&"popper"===i.position?Ae.jsx(Ke,{...a,...n,ref:t}):null}).displayName=pm;var fm=Ct.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=Ct.useRef(null),s=Me(n,a),i=function(e){const t=Ct.useRef({value:e,previous:e});return Ct.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(t);return Ct.useEffect(()=>{const e=a.current;if(!e)return;const r=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(r,"value").set;if(i!==t&&n){const r=new Event("change",{bubbles:!0});n.call(e,t),e.dispatchEvent(r)}},[i,t]),Ae.jsx(Ee.select,{...r,style:{...Zt,...r.style},ref:s,defaultValue:t})});function xm(e){return""===e||void 0===e}function ym(e){const t=Fe(e),r=Ct.useRef(""),n=Ct.useRef(0),a=Ct.useCallback(e=>{const a=r.current+e;t(a),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(a)},[t]),s=Ct.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return Ct.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,s]}function vm(e,t,r){const n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let s=(i=e,o=Math.max(a,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===n.length&&(s=s.filter(e=>e!==r));const l=s.find(e=>e.textValue.toLowerCase().startsWith(n.toLowerCase()));return l!==r?l:void 0}fm.displayName="SelectBubbleInput";var gm=Ph,bm=Dh,jm=Ih,wm=Fh,Nm=Yh,Sm=Zh,km=nm,_m=sm,Om=om,Cm=cm,Am=um,Em=mm;function Pm(...e){return ss(Vr(e))}const Tm=Ah,Mm=Mh,Dm=Ct.forwardRef(({className:e,children:t,...r},n)=>Ae.jsxs(gm,{ref:n,className:Pm("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,Ae.jsx(bm,{asChild:!0,children:Ae.jsx(mn,{className:"h-4 w-4 opacity-50"})})]}));Dm.displayName=gm.displayName;const Im=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(Cm,{ref:r,className:Pm("flex cursor-default items-center justify-center py-1",e),...t,children:Ae.jsx(fn,{className:"h-4 w-4"})}));Im.displayName=Cm.displayName;const Rm=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(Am,{ref:r,className:Pm("flex cursor-default items-center justify-center py-1",e),...t,children:Ae.jsx(mn,{className:"h-4 w-4"})}));Rm.displayName=Am.displayName;const Fm=Ct.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>Ae.jsx(jm,{children:Ae.jsxs(wm,{ref:a,className:Pm("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[Ae.jsx(Im,{}),Ae.jsx(Nm,{className:Pm("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),Ae.jsx(Rm,{})]})}));Fm.displayName=wm.displayName;Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(Sm,{ref:r,className:Pm("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=Sm.displayName;const Lm=Ct.forwardRef(({className:e,children:t,...r},n)=>Ae.jsxs(km,{ref:n,className:Pm("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[Ae.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Ae.jsx(Om,{children:Ae.jsx(hn,{className:"h-4 w-4"})})}),Ae.jsx(_m,{children:t})]}));Lm.displayName=km.displayName;Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(Em,{ref:r,className:Pm("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=Em.displayName;const Bm=({reminder:e,onClose:t,onSubmit:r})=>{const{toast:n}=Jt(),[a,s]=Ct.useState(!1),[i,o]=Ct.useState({lens_clarity:"",frame_condition:"",eye_discomfort:"",remarks:""});return Ae.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Ae.jsxs(td,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto",children:[Ae.jsxs(rd,{className:"pb-3",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"urgent":return Ae.jsx(Jr,{className:"h-4 w-4 text-red-500"});case"high":return Ae.jsx(Jr,{className:"h-4 w-4 text-orange-500"});case"medium":return Ae.jsx(wn,{className:"h-4 w-4 text-yellow-500"});case"low":return Ae.jsx(dn,{className:"h-4 w-4 text-green-500"});default:return Ae.jsx(wn,{className:"h-4 w-4 text-blue-500"})}})(e.priority),Ae.jsx(nd,{className:"text-lg",children:"Eyewear Self-Check"})]}),Ae.jsx(Hc,{variant:"ghost",size:"sm",onClick:t,children:Ae.jsx(ma,{className:"h-4 w-4"})})]}),Ae.jsx(ad,{children:"Complete a quick self-assessment for your eyewear"})]}),Ae.jsxs(sd,{children:[Ae.jsxs("div",{className:`p-3 rounded-lg border mb-4 ${(e=>{switch(e){case"urgent":return"border-red-200 bg-red-50";case"high":return"border-orange-200 bg-orange-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-green-200 bg-green-50";default:return"border-blue-200 bg-blue-50"}})(e.priority)}`,children:[Ae.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ae.jsx(wn,{className:"h-4 w-4"}),Ae.jsx("span",{className:"font-medium",children:e.eyewear_label})]}),Ae.jsxs("div",{className:"text-sm text-gray-600",children:[Ae.jsxs("p",{children:["Last assessed: ",new Date(e.assessment_date).toLocaleDateString()]}),Ae.jsxs("p",{children:["Assessed by: ",e.assessed_by]}),e.is_overdue&&Ae.jsx("p",{className:"text-red-600 font-medium",children:"⚠️ This check is overdue"})]})]}),Ae.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),i.lens_clarity&&i.frame_condition&&i.eye_discomfort)try{s(!0),await r(i),n({title:"Success",description:"Self-check submitted successfully"}),t()}catch(a){n({title:"Error",description:a.message||"Failed to submit self-check",variant:"destructive"})}finally{s(!1)}else n({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"})},className:"space-y-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"lens_clarity",children:"How clear are your lenses?"}),Ae.jsxs(Tm,{value:i.lens_clarity,onValueChange:e=>o(t=>({...t,lens_clarity:e})),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select lens clarity"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"clear",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(dn,{className:"h-4 w-4 text-green-500"}),Ae.jsx("span",{children:"Clear - Perfect vision"})]})}),Ae.jsx(Lm,{value:"slightly_blurry",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(wn,{className:"h-4 w-4 text-yellow-500"}),Ae.jsx("span",{children:"Slightly Blurry - Minor issues"})]})}),Ae.jsx(Lm,{value:"blurry",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(Jr,{className:"h-4 w-4 text-orange-500"}),Ae.jsx("span",{children:"Blurry - Noticeable problems"})]})}),Ae.jsx(Lm,{value:"very_blurry",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(Jr,{className:"h-4 w-4 text-red-500"}),Ae.jsx("span",{children:"Very Blurry - Major issues"})]})})]})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"frame_condition",children:"How is your frame condition?"}),Ae.jsxs(Tm,{value:i.frame_condition,onValueChange:e=>o(t=>({...t,frame_condition:e})),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select frame condition"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"excellent",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(dn,{className:"h-4 w-4 text-green-500"}),Ae.jsx("span",{children:"Excellent - Perfect condition"})]})}),Ae.jsx(Lm,{value:"good",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(wn,{className:"h-4 w-4 text-green-500"}),Ae.jsx("span",{children:"Good - Minor wear"})]})}),Ae.jsx(Lm,{value:"loose",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(Jr,{className:"h-4 w-4 text-yellow-500"}),Ae.jsx("span",{children:"Loose - Needs adjustment"})]})}),Ae.jsx(Lm,{value:"damaged",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(Jr,{className:"h-4 w-4 text-red-500"}),Ae.jsx("span",{children:"Damaged - Needs repair"})]})})]})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"eye_discomfort",children:"Any eye discomfort?"}),Ae.jsxs(Tm,{value:i.eye_discomfort,onValueChange:e=>o(t=>({...t,eye_discomfort:e})),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select discomfort level"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"no",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(dn,{className:"h-4 w-4 text-green-500"}),Ae.jsx("span",{children:"No - No discomfort"})]})}),Ae.jsx(Lm,{value:"mild",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(wn,{className:"h-4 w-4 text-yellow-500"}),Ae.jsx("span",{children:"Mild - Slight discomfort"})]})}),Ae.jsx(Lm,{value:"moderate",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(Jr,{className:"h-4 w-4 text-orange-500"}),Ae.jsx("span",{children:"Moderate - Noticeable discomfort"})]})}),Ae.jsx(Lm,{value:"severe",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(Jr,{className:"h-4 w-4 text-red-500"}),Ae.jsx("span",{children:"Severe - Significant discomfort"})]})})]})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"remarks",children:"Additional remarks (optional)"}),Ae.jsx(ph,{id:"remarks",value:i.remarks,onChange:e=>o(t=>({...t,remarks:e.target.value})),placeholder:"Any additional details about your eyewear condition...",rows:3})]}),Ae.jsx(Hc,{type:"submit",className:"w-full",disabled:a,children:a?Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(dn,{className:"h-4 w-4 mr-2"}),"Submit Self-Check"]})})]})]})]})})},qm=({reminder:e,onDismiss:t,onSubmitSelfCheck:r,onScheduleAppointment:n})=>{Jt(),Dt();const[a,s]=Ct.useState(!1),[i,o]=Ct.useState(!1),[l,c]=Ct.useState(!0),d=()=>{c(!1),setTimeout(()=>{t(e.id)},300)};return l?Ae.jsxs(Ae.Fragment,{children:[Ae.jsxs(td,{className:`mb-4 animate-in slide-in-from-top-2 duration-300 ${(e=>{switch(e){case"urgent":return"border-red-200 bg-red-50";case"high":return"border-orange-200 bg-orange-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-green-200 bg-green-50";default:return"border-blue-200 bg-blue-50"}})(e.priority)}`,children:[Ae.jsx(rd,{className:"pb-3",children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsx(an,{className:"h-5 w-5 text-orange-500"}),Ae.jsxs("div",{children:[Ae.jsxs(nd,{className:"text-lg flex items-center gap-2",children:["Eyewear Check Reminder",Ae.jsx(Yd,{className:(e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.priority),children:e.priority.toUpperCase()})]}),Ae.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[Ae.jsx(yn,{className:"h-3 w-3"}),rh(new Date(e.created_at),{addSuffix:!0})]})]})]}),Ae.jsx(Hc,{variant:"ghost",size:"sm",onClick:d,children:Ae.jsx(ma,{className:"h-4 w-4"})})]})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"urgent":return Ae.jsx(Jr,{className:"h-5 w-5 text-red-500"});case"high":return Ae.jsx(Jr,{className:"h-5 w-5 text-orange-500"});case"medium":return Ae.jsx(wn,{className:"h-5 w-5 text-yellow-500"});case"low":return Ae.jsx(dn,{className:"h-5 w-5 text-green-500"});default:return Ae.jsx(wn,{className:"h-5 w-5 text-blue-500"})}})(e.priority),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:e.eyewear_label}),e.is_overdue&&Ae.jsx(Yd,{variant:"destructive",className:"ml-2 text-xs",children:"OVERDUE"})]})]}),Ae.jsxs("div",{className:"text-sm text-gray-700 bg-white p-3 rounded-md border",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ae.jsxs("div",{children:[Ae.jsx("strong",{children:"Last Check:"}),Ae.jsx("br",{}),new Date(e.assessment_date).toLocaleDateString()]}),Ae.jsxs("div",{children:[Ae.jsx("strong",{children:"Assessed By:"}),Ae.jsx("br",{}),e.assessed_by]})]}),e.notes&&Ae.jsxs("div",{className:"mt-2",children:[Ae.jsx("strong",{children:"Notes:"})," ",e.notes]})]}),Ae.jsxs("div",{className:"space-y-3",children:[Ae.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Choose how you'd like to proceed:"}),Ae.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[Ae.jsx(Hc,{variant:"outline",onClick:()=>{s(!0)},className:"justify-start h-auto p-3",children:Ae.jsxs("div",{className:"flex items-center gap-3",children:[Ae.jsx(dn,{className:"h-5 w-5 text-green-500"}),Ae.jsxs("div",{className:"text-left",children:[Ae.jsx("div",{className:"font-medium",children:"Quick Self-Check"}),Ae.jsx("div",{className:"text-xs text-gray-600",children:"Answer a few questions about your eyewear condition"})]})]})}),Ae.jsx(Hc,{variant:"outline",onClick:()=>{o(!0)},className:"justify-start h-auto p-3",children:Ae.jsxs("div",{className:"flex items-center gap-3",children:[Ae.jsx(ln,{className:"h-5 w-5 text-blue-500"}),Ae.jsxs("div",{className:"text-left",children:[Ae.jsx("div",{className:"font-medium",children:"Schedule Appointment"}),Ae.jsx("div",{className:"text-xs text-gray-600",children:"Book a physical check with our optometrist"})]})]})})]})]}),e.is_overdue&&Ae.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[Ae.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[Ae.jsx(Jr,{className:"h-4 w-4"}),Ae.jsx("span",{className:"font-medium",children:"This check is overdue"})]}),Ae.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Please schedule an appointment as soon as possible to ensure optimal eye health."})]})]})})]}),a&&Ae.jsx(Bm,{reminder:e,onClose:()=>s(!1),onSubmit:async t=>{await r(e.eyewear_id,t),s(!1),d()}}),i&&Ae.jsx(zm,{reminder:e,onClose:()=>o(!1),onSubmit:async t=>{await n(e.eyewear_id,t),o(!1),d()}})]}):null},zm=({reminder:e,onClose:t,onSubmit:r})=>{const[n,a]=Ct.useState({appointment_date:"",preferred_time:"",notes:""}),[s,i]=Ct.useState(!1);return Ae.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Ae.jsxs(td,{className:"w-full max-w-md",children:[Ae.jsxs(rd,{children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsx(nd,{children:"Schedule Eyewear Check"}),Ae.jsx(Hc,{variant:"ghost",size:"sm",onClick:t,children:Ae.jsx(ma,{className:"h-4 w-4"})})]}),Ae.jsx(ad,{children:"Book an appointment for your eyewear condition check"})]}),Ae.jsx(sd,{children:Ae.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{i(!0),await r(n)}finally{i(!1)}},className:"space-y-4",children:[Ae.jsxs("div",{children:[Ae.jsx("label",{className:"text-sm font-medium",children:"Preferred Date"}),Ae.jsx("input",{type:"date",value:n.appointment_date,onChange:e=>a(t=>({...t,appointment_date:e.target.value})),min:(new Date).toISOString().split("T")[0],className:"w-full mt-1 p-2 border rounded-md",required:!0})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"text-sm font-medium",children:"Preferred Time"}),Ae.jsxs("select",{value:n.preferred_time,onChange:e=>a(t=>({...t,preferred_time:e.target.value})),className:"w-full mt-1 p-2 border rounded-md",required:!0,children:[Ae.jsx("option",{value:"",children:"Select time"}),Ae.jsx("option",{value:"09:00",children:"9:00 AM"}),Ae.jsx("option",{value:"10:00",children:"10:00 AM"}),Ae.jsx("option",{value:"11:00",children:"11:00 AM"}),Ae.jsx("option",{value:"14:00",children:"2:00 PM"}),Ae.jsx("option",{value:"15:00",children:"3:00 PM"}),Ae.jsx("option",{value:"16:00",children:"4:00 PM"})]})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"text-sm font-medium",children:"Notes (optional)"}),Ae.jsx("textarea",{value:n.notes,onChange:e=>a(t=>({...t,notes:e.target.value})),placeholder:"Any specific concerns or details...",className:"w-full mt-1 p-2 border rounded-md",rows:3})]}),Ae.jsx(Hc,{type:"submit",className:"w-full",disabled:s,children:s?"Scheduling...":"Schedule Appointment"})]})})]})})},$m="http://192.168.100.6:8000/api",Um=()=>{const{user:e}=Rc(),t=Dt(),{appointments:r,loading:n}=ih(),{toast:a}=Jt(),[s,i]=Ct.useState([]),[o,l]=Ct.useState(!0),[c,d]=Ct.useState([]),[u,h]=Ct.useState(!0),m=(null==r?void 0:r.filter(e=>new Date(e.appointment_date)>new Date&&"scheduled"===e.status))||[],p=m.length>0?m.sort((e,t)=>new Date(e.appointment_date).getTime()-new Date(t.appointment_date).getTime())[0]:null;Ct.useEffect(()=>{const t=async()=>{try{l(!0);const t=await(async e=>{const t=e?{customer_id:e}:{};return(await Cc.get("http://192.168.100.6:8000/api/notifications",{params:{...t,type:"eyewear_condition"},headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}})).data.notifications||[]})(null==e?void 0:e.id);i(t)}catch(t){console.error("Failed to load eyewear alerts:",t)}finally{l(!1)}};(null==e?void 0:e.id)&&t()},[null==e?void 0:e.id]),Ct.useEffect(()=>{const t=async()=>{try{h(!0);const e=await(async()=>(await Cc.get(`${$m}/eyewear/reminders`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}})).data)();d(e.reminders)}catch(e){console.error("Failed to load eyewear reminders:",e)}finally{h(!1)}};(null==e?void 0:e.id)&&t()},[null==e?void 0:e.id]),Ct.useEffect(()=>{const e=e=>{const t=e.detail;"eyewear_condition"===t.type&&(i(e=>[t,...e]),a({title:"Eyewear Condition Update",description:`Your ${t.eyewear_label} has been assessed`,variant:"urgent"===t.priority?"destructive":"default"}))};return window.addEventListener("eyewear-condition-notification",e),()=>{window.removeEventListener("eyewear-condition-notification",e)}},[a]);const f=e=>{i(t=>t.filter(t=>t.id!==e))},x=async e=>{try{await(async e=>{await Cc.post(`${$m}/notifications/mark-read`,{notification_id:e},{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}})})(e),d(t=>t.filter(t=>t.id!==e))}catch(t){console.error("Failed to dismiss reminder:",t)}},y=async(e,t)=>{await(async(e,t)=>(await Cc.post(`${$m}/eyewear/${e}/condition-form`,t,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}})).data)(e,t),d(t=>t.filter(t=>t.eyewear_id!==e))},v=async(e,t)=>{await(async(e,t)=>(await Cc.post(`${$m}/eyewear/${e}/set-appointment`,t,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}})).data)(e,t),d(t=>t.filter(t=>t.eyewear_id!==e))};return Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 rounded-lg p-6 text-white",children:[Ae.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome back, ",(null==e?void 0:e.name)||"Customer","!"]}),Ae.jsx("p",{className:"text-blue-100",children:"Manage your appointments, prescriptions, and eye care needs in one place."})]}),s.length>0&&Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[Ae.jsx(an,{className:"h-5 w-5 text-orange-500"}),"Eyewear Condition Updates"]}),Ae.jsxs(Yd,{variant:"outline",className:"bg-orange-50 text-orange-700",children:[s.length," alert",1!==s.length?"s":""]})]}),s.map(e=>Ae.jsx(hh,{notification:e,onDismiss:f},e.id))]}),c.length>0&&Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[Ae.jsx(an,{className:"h-5 w-5 text-blue-500"}),"Eyewear Check Reminders"]}),Ae.jsxs(Yd,{variant:"outline",className:"bg-blue-50 text-blue-700",children:[c.length," reminder",1!==c.length?"s":""]})]}),c.map(e=>Ae.jsx(qm,{reminder:e,onDismiss:x,onSubmitSelfCheck:y,onScheduleAppointment:v},e.id))]}),o&&Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsx(uh,{className:"h-20 w-full"}),Ae.jsx(uh,{className:"h-20 w-full"})]}),u&&Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsx(uh,{className:"h-20 w-full"}),Ae.jsx(uh,{className:"h-20 w-full"})]}),Ae.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex items-center justify-between",children:[Ae.jsxs("div",{children:[Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-5 w-5 text-blue-600"}),Ae.jsx("span",{children:"My Appointments"})]}),Ae.jsx(ad,{children:"View and manage your appointments"})]}),m.length>0&&Ae.jsxs(Yd,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[m.length," upcoming"]})]}),Ae.jsxs(sd,{className:"space-y-4",children:[n?Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(uh,{className:"h-4 w-3/4"}),Ae.jsx(uh,{className:"h-4 w-1/2"})]}):p?Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ae.jsx(yn,{className:"w-4 h-4 text-blue-600"}),Ae.jsx("span",{className:"font-medium",children:"Next:"}),Ae.jsx("span",{children:new Date(p.appointment_date).toLocaleDateString()})]}),Ae.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[Ae.jsx(wn,{className:"w-4 h-4"}),Ae.jsx("span",{children:p.type})]})]}):Ae.jsx("p",{className:"text-center text-gray-500 py-4",children:"No upcoming appointments"}),Ae.jsxs(Hc,{className:"w-full",variant:"outline",onClick:()=>{t("/customer/appointments")},children:[Ae.jsx(ln,{className:"mr-2 h-4 w-4"}),"View All Appointments"]})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{className:"flex items-center justify-between",children:Ae.jsxs("div",{children:[Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(Sn,{className:"h-5 w-5 text-green-600"}),Ae.jsx("span",{children:"My Prescriptions"})]}),Ae.jsx(ad,{children:"Access your prescription history"})]})}),Ae.jsxs(sd,{className:"space-y-4",children:[Ae.jsx("p",{className:"text-center text-gray-500 py-4",children:"View your prescription history"}),Ae.jsxs(Hc,{className:"w-full",variant:"outline",onClick:()=>{t("/customer/prescriptions")},children:[Ae.jsx(Sn,{className:"mr-2 h-4 w-4"}),"View Prescriptions"]})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{className:"flex items-center justify-between",children:Ae.jsxs("div",{children:[Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx($n,{className:"h-5 w-5 text-purple-600"}),Ae.jsx("span",{children:"Book Appointment"})]}),Ae.jsx(ad,{children:"Schedule a new appointment"})]})}),Ae.jsxs(sd,{className:"space-y-4",children:[Ae.jsx("p",{className:"text-center text-gray-500 py-4",children:"Ready to book your next appointment"}),Ae.jsxs(Hc,{className:"w-full",onClick:()=>{t("/customer/appointments")},children:[Ae.jsx($n,{className:"mr-2 h-4 w-4"}),"Book New Appointment"]})]})]}),Ae.jsxs(td,{className:"bg-gradient-to-br from-orange-50 to-amber-50 border-orange-200",children:[Ae.jsxs(rd,{className:"flex items-center justify-between",children:[Ae.jsxs("div",{children:[Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(Qn,{className:"h-5 w-5 text-orange-600"}),Ae.jsx("span",{children:"Eye Care Products"})]}),Ae.jsx(ad,{children:"Browse and reserve products"})]}),Ae.jsx(Ln,{className:"h-8 w-8 text-orange-300"})]}),Ae.jsxs(sd,{className:"space-y-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ae.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Ae.jsx("span",{className:"text-gray-600",children:"Glasses & Frames"})]}),Ae.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ae.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),Ae.jsx("span",{className:"text-gray-600",children:"Contact Lenses"})]}),Ae.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ae.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),Ae.jsx("span",{className:"text-gray-600",children:"Eye Care Solutions"})]})]}),Ae.jsxs(Hc,{className:"w-full bg-orange-600 hover:bg-orange-700",onClick:()=>{t("/customer/products")},children:[Ae.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Browse Products"]})]})]})]})]})};function Vm(...e){return ss(Vr(e))}const Wm=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("div",{className:"relative w-full overflow-auto",children:Ae.jsx("table",{ref:r,className:Vm("w-full caption-bottom text-sm",e),...t})}));Wm.displayName="Table";const Hm=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("thead",{ref:r,className:Vm("[&_tr]:border-b",e),...t}));Hm.displayName="TableHeader";const Km=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("tbody",{ref:r,className:Vm("[&_tr:last-child]:border-0",e),...t}));Km.displayName="TableBody";Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("tfoot",{ref:r,className:Vm("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";const Ym=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("tr",{ref:r,className:Vm("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Ym.displayName="TableRow";const Gm=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("th",{ref:r,className:Vm("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Gm.displayName="TableHead";const Xm=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("td",{ref:r,className:Vm("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Xm.displayName="TableCell";Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("caption",{ref:r,className:Vm("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";const Qm="http://192.168.100.6:8000/api",Jm=async e=>{try{return(await Cc.get(`${Qm}/schedules/doctor/${e}`)).data}catch(t){throw console.error("Error fetching doctor schedule:",t),t}},Zm=async()=>{try{return(await Cc.get(`${Qm}/optometrists`)).data}catch(e){throw console.error("Error fetching optometrists:",e),e}},ep=async e=>{try{const t=sessionStorage.getItem("auth_token");return(await Cc.get(`${Qm}/schedule-change-requests/optometrist/${e}`,{headers:{Authorization:t?`Bearer ${t}`:""}})).data.requests}catch(t){throw console.error("Error fetching optometrist schedule change requests:",t),t}},tp=()=>{const{user:e}=Rc(),{toast:t}=Jt(),[r,n]=Ct.useState(null),[a,s]=Ct.useState(!0),{appointments:i,loading:o,refetch:l}=ih(),{update:c,loading:d}=lh();Ct.useEffect(()=>{(async()=>{if(null==e?void 0:e.id)try{s(!0);const t=await Jm(e.id),r=new Date,a=0===r.getDay()?7:r.getDay(),i=t.schedule.find(e=>e.day_of_week===a);i&&i.branch_id&&n({day:i.day,branch:i.branch,branch_id:i.branch_id,time:i.time,start_time:i.start_time||"",end_time:i.end_time||""})}catch(r){console.error("Error fetching today's schedule:",r),t({title:"Error",description:"Failed to load today's schedule",variant:"destructive"})}finally{s(!1)}})()},[null==e?void 0:e.id,t]);const u=(null==i?void 0:i.filter(e=>{const t=new Date(e.appointment_date),r=new Date;return["confirmed","scheduled","in_progress"].includes(e.status)&&t.toDateString()===r.toDateString()}))||[],h=u.reduce((e,t)=>{var r;const n=(null==(r=t.branch)?void 0:r.name)||"Unknown Branch";return e[n]||(e[n]=[]),e[n].push(t),e},{}),m=async e=>{try{await c(e,{status:"in_progress"}),t({title:"Consultation Started",description:"The consultation has been marked as in progress"}),l()}catch(r){console.error("Error starting consultation:",r),t({title:"Error",description:"Failed to start consultation",variant:"destructive"})}},p=async e=>{try{await c(e,{status:"completed"}),t({title:"Consultation Completed",description:"The consultation has been marked as completed"}),l()}catch(r){console.error("Error completing consultation:",r),t({title:"Error",description:"Failed to complete consultation",variant:"destructive"})}},f=e=>{if(!e)return"N/A";const[t,r]=e.split(":"),n=parseInt(t);return`${n%12||12}:${r} ${n>=12?"PM":"AM"}`},x=e=>{const t={confirmed:{variant:"default",label:"Confirmed"},in_progress:{variant:"secondary",label:"In Progress"},completed:{variant:"outline",label:"Completed"},cancelled:{variant:"destructive",label:"Cancelled"}}[e]||{variant:"outline",label:e};return Ae.jsx(Yd,{variant:t.variant,children:t.label})};return a?Ae.jsxs("div",{className:"flex items-center justify-center p-8",children:[Ae.jsx(Tn,{className:"h-6 w-6 animate-spin mr-2"}),Ae.jsx("span",{children:"Loading today's schedule..."})]}):r?Ae.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center gap-2",children:[Ae.jsx(ln,{className:"h-5 w-5"}),"Today's Schedule"]}),Ae.jsxs(ad,{children:["Your work schedule for ",(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(In,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium",children:"Branch"}),Ae.jsx("p",{className:"text-sm text-muted-foreground",children:r.branch})]})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(yn,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium",children:"Working Hours"}),Ae.jsx("p",{className:"text-sm text-muted-foreground",children:r.time})]})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(wn,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium",children:"Appointments"}),Ae.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.length," confirmed"]})]})]})]})})]}),Ae.jsx("div",{className:"space-y-6",children:o?Ae.jsx(td,{children:Ae.jsxs(sd,{className:"flex items-center justify-center p-8",children:[Ae.jsx(Tn,{className:"h-6 w-6 animate-spin mr-2"}),Ae.jsx("span",{children:"Loading appointments..."})]})}):0===u.length?Ae.jsx(td,{children:Ae.jsxs(sd,{className:"text-center py-8",children:[Ae.jsx(ca,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Appointments Today"}),Ae.jsx("p",{className:"text-muted-foreground",children:"You don't have any confirmed appointments across your scheduled branches today."})]})}):Object.entries(h).map(([e,t])=>Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center gap-2",children:[Ae.jsx(In,{className:"h-5 w-5 text-blue-600"}),e," Branch"]}),Ae.jsxs(ad,{children:[t.length," confirmed appointment",1!==t.length?"s":""," for today"]})]}),Ae.jsx(sd,{children:Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Patient"}),Ae.jsx(Gm,{children:"Time"}),Ae.jsx(Gm,{children:"Type"}),Ae.jsx(Gm,{children:"Status"}),Ae.jsx(Gm,{children:"Actions"})]})}),Ae.jsx(Km,{children:t.map(e=>{var t,r;return Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ca,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{children:(null==(t=e.patient)?void 0:t.name)||"Unknown Patient"})]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(yn,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{children:f(e.start_time)})]})}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{variant:"outline",children:(null==(r=e.type)?void 0:r.replace("_"," ").toUpperCase())||"N/A"})}),Ae.jsx(Xm,{children:x(e.status)}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex space-x-2",children:["confirmed"===e.status&&Ae.jsxs(Hc,{size:"sm",onClick:()=>m(e.id.toString()),disabled:d,className:"bg-green-600 hover:bg-green-700",children:[Ae.jsx(zn,{className:"h-3 w-3 mr-1"}),"Start"]}),"in_progress"===e.status&&Ae.jsxs(Hc,{size:"sm",onClick:()=>p(e.id.toString()),disabled:d,className:"bg-blue-600 hover:bg-blue-700",children:[Ae.jsx(dn,{className:"h-3 w-3 mr-1"}),"Complete"]})]})})]},e.id)})})]})})]},e))})]}):Ae.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[Ae.jsx(td,{children:Ae.jsxs(sd,{className:"text-center py-8",children:[Ae.jsx(ln,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Schedule for Today"}),Ae.jsx("p",{className:"text-muted-foreground",children:"You don't have any scheduled work at any branch today, but you can still view appointments from all your scheduled branches."})]})}),Ae.jsx("div",{className:"mt-6",children:Ae.jsx("div",{className:"space-y-6",children:o?Ae.jsx(td,{children:Ae.jsxs(sd,{className:"flex items-center justify-center p-8",children:[Ae.jsx(Tn,{className:"h-6 w-6 animate-spin mr-2"}),Ae.jsx("span",{children:"Loading appointments..."})]})}):0===u.length?Ae.jsx(td,{children:Ae.jsxs(sd,{className:"text-center py-8",children:[Ae.jsx(ca,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Appointments Today"}),Ae.jsx("p",{className:"text-muted-foreground",children:"You don't have any confirmed appointments across your scheduled branches today."})]})}):Object.entries(h).map(([e,t])=>Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center gap-2",children:[Ae.jsx(In,{className:"h-5 w-5 text-blue-600"}),e," Branch"]}),Ae.jsxs(ad,{children:[t.length," confirmed appointment",1!==t.length?"s":""," for today"]})]}),Ae.jsx(sd,{children:Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Patient"}),Ae.jsx(Gm,{children:"Time"}),Ae.jsx(Gm,{children:"Type"}),Ae.jsx(Gm,{children:"Status"}),Ae.jsx(Gm,{children:"Actions"})]})}),Ae.jsx(Km,{children:t.map(e=>{var t,r;return Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ca,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{children:(null==(t=e.patient)?void 0:t.name)||"Unknown Patient"})]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(yn,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{children:f(e.start_time)})]})}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{variant:"outline",children:(null==(r=e.type)?void 0:r.replace("_"," ").toUpperCase())||"N/A"})}),Ae.jsx(Xm,{children:x(e.status)}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex space-x-2",children:["confirmed"===e.status&&Ae.jsxs(Hc,{size:"sm",onClick:()=>m(e.id.toString()),disabled:d,className:"bg-green-600 hover:bg-green-700",children:[Ae.jsx(zn,{className:"h-3 w-3 mr-1"}),"Start"]}),"in_progress"===e.status&&Ae.jsxs(Hc,{size:"sm",onClick:()=>p(e.id.toString()),disabled:d,className:"bg-blue-600 hover:bg-blue-700",children:[Ae.jsx(dn,{className:"h-3 w-3 mr-1"}),"Complete"]})]})})]},e.id)})})]})})]},e))})})]})};function rp(...e){return ss(Vr(e))}const np=({title:e,description:t,value:r,icon:n,trend:a,action:s,className:i,gradient:o})=>Ae.jsxs(td,{className:rp("border border-gray-200 shadow-sm",i),children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium text-gray-600",children:e}),Ae.jsx(n,{className:"h-4 w-4 text-gray-400"})]}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"space-y-2",children:[r&&Ae.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:r}),t&&Ae.jsx(ad,{className:"text-gray-500 text-sm",children:t}),a&&Ae.jsxs("div",{className:"flex items-center text-sm",children:[Ae.jsxs("span",{className:rp("font-medium",a.isPositive?"text-green-600":"text-red-600"),children:[a.isPositive?"+":"",a.value,"%"]}),Ae.jsx("span",{className:"text-gray-500 ml-1",children:a.label})]}),s&&Ae.jsx(Hc,{onClick:s.onClick,variant:"outline",size:"sm",className:"w-full mt-3",children:s.label})]})})]});var ap="Progress",sp=100,[ip,op]=Te(ap),[lp,cp]=ip(ap),dp=Ct.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:s=mp,...i}=e;!a&&0!==a||xp(a)||console.error(`Invalid prop \`max\` of value \`${`${a}`}\` supplied to \`${"Progress"}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const o=xp(a)?a:sp;null===n||yp(n,o)||console.error(function(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${n}`,"Progress"));const l=yp(n,o)?n:null,c=fp(l)?s(l,o):void 0;return Ae.jsx(lp,{scope:r,value:l,max:o,children:Ae.jsx(Ee.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":fp(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":pp(l,o),"data-value":l??void 0,"data-max":o,...i,ref:t})})});dp.displayName=ap;var up="ProgressIndicator",hp=Ct.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=cp(up,r);return Ae.jsx(Ee.div,{"data-state":pp(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});function mp(e,t){return`${Math.round(e/t*100)}%`}function pp(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function fp(e){return"number"==typeof e}function xp(e){return fp(e)&&!isNaN(e)&&e>0}function yp(e,t){return fp(e)&&!isNaN(e)&&e<=t&&e>=0}hp.displayName=up;var vp=dp,gp=hp;function bp(...e){return ss(Vr(e))}const jp=Ct.forwardRef(({className:e,value:t,...r},n)=>Ae.jsx(vp,{ref:n,className:bp("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:Ae.jsx(gp,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));jp.displayName=vp.displayName;const wp="http://192.168.100.6:8000/api/products";Cc.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&e.headers&&(e.headers.Authorization=`Bearer ${t}`),e});const Np=async(e="",t,r)=>(await Cc.get(wp,{params:{search:e,category_id:t,active:r}})).data,Sp=async e=>{const t=e instanceof FormData?e:(()=>{const t=new FormData;return t.append("name",e.name),t.append("description",e.description||""),t.append("price",e.price.toString()),t.append("stock_quantity",e.stock_quantity.toString()),e.category_id&&t.append("category_id",e.category_id.toString()),e.brand&&t.append("brand",e.brand),e.model&&t.append("model",e.model),e.sku&&t.append("sku",e.sku),e.branch_id&&t.append("branch_id",e.branch_id.toString()),void 0!==e.is_active&&t.append("is_active",e.is_active?"1":"0"),e.images&&e.images.length>0&&e.images.forEach((e,r)=>{t.append(`images[${r}]`,e)}),t})();return(await Cc.post(wp,t,{headers:{"Content-Type":"multipart/form-data"}})).data},kp=async(e,t)=>{const r=t instanceof FormData?t:(()=>{const e=new FormData;return e.append("name",t.name),e.append("description",t.description||""),e.append("price",t.price.toString()),e.append("stock_quantity",t.stock_quantity.toString()),t.category_id&&e.append("category_id",t.category_id.toString()),t.brand&&e.append("brand",t.brand),t.model&&e.append("model",t.model),t.sku&&e.append("sku",t.sku),t.branch_id&&e.append("branch_id",t.branch_id.toString()),void 0!==t.is_active&&e.append("is_active",t.is_active?"1":"0"),t.images&&t.images.length>0&&t.images.forEach((t,r)=>{e.append(`images[${r}]`,t)}),e})();r.append("_method","PUT");return(await Cc.post(`${wp}/${e}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data},_p=async e=>(await Cc.delete(`${wp}/${e}`)).data,Op=Cc.create({baseURL:"http://192.168.100.6:8000/api"});Op.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers=e.headers||{},e.headers.Authorization=`Bearer ${t}`),e});const Cp=()=>{const{user:e}=Rc(),t=null==e?void 0:e.role,[r,n]=Ct.useState([]),[a,s]=Ct.useState([]),[i,o]=Ct.useState(null),[l,c]=Ct.useState(null),[d,u]=Ct.useState(1),[h,m]=Ct.useState("");Ct.useEffect(()=>{p(),"customer"===t&&f();const e=e=>{console.log("Product deleted, refreshing localStorage gallery:",e.detail.productId),p()};return window.addEventListener("productDeleted",e),()=>{window.removeEventListener("productDeleted",e)}},[]);const p=async()=>{try{const e=await Np(h);n(e)}catch(e){console.error("Failed to fetch products:",e)}},f=async()=>{try{const e=await(async()=>(await Op.get("/reservations")).data)();s(e)}catch(e){console.error("Failed to fetch reservations:",e)}},x=(e,t)=>{i&&o({...i,[e]:t})},y=e=>{o(e||{id:0,name:"",description:"",price:0,image_paths:[],stock_quantity:0,is_active:!0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})},v=()=>{c(null),u(1)},g=async()=>{if(l)try{await(async e=>(await Op.post("/reservations",e)).data)({product_id:l,branch_id:1,quantity:d}),v(),f(),alert("Reservation created successfully!")}catch(e){console.error("Failed to create reservation:",e),alert("Failed to create reservation.")}},b=r.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())||e.description.toLowerCase().includes(h.toLowerCase()));return Ae.jsxs("div",{className:"p-4",children:[Ae.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Product Gallery"}),Ae.jsxs("div",{className:"mb-4 flex items-center space-x-2",children:[Ae.jsx(Yc,{type:"text",placeholder:"Search products...",value:h,onChange:e=>m(e.target.value),className:"flex-grow","aria-label":"Search products"}),("admin"===t||"staff"===t||"optometrist"===t)&&!i&&Ae.jsxs(Hc,{onClick:()=>y(),variant:"default",className:"flex items-center space-x-1",children:[Ae.jsx($n,{size:16}),Ae.jsx("span",{children:"Add Product"})]})]}),i&&Ae.jsxs("div",{className:"mb-6 p-4 border rounded bg-gray-50",children:[Ae.jsx("h3",{className:"text-xl font-semibold mb-2",children:i.id?"Edit Product":"Add Product"}),Ae.jsxs("div",{className:"mb-2",children:[Ae.jsx("label",{className:"block font-medium mb-1",children:"Name:"}),Ae.jsx("input",{type:"text",value:i.name,onChange:e=>x("name",e.target.value),className:"w-full border px-2 py-1 rounded"})]}),Ae.jsxs("div",{className:"mb-2",children:[Ae.jsx("label",{className:"block font-medium mb-1",children:"Description:"}),Ae.jsx("textarea",{value:i.description,onChange:e=>x("description",e.target.value),className:"w-full border px-2 py-1 rounded",rows:3})]}),Ae.jsxs("div",{className:"mb-2",children:[Ae.jsx("label",{className:"block font-medium mb-1",children:"Price:"}),Ae.jsx("input",{type:"number",min:0,value:i.price,onChange:e=>x("price",parseFloat(e.target.value)),className:"w-full border px-2 py-1 rounded"})]}),Ae.jsxs("div",{className:"mb-2",children:[Ae.jsx("label",{className:"block font-medium mb-1",children:"Stock Quantity:"}),Ae.jsx("input",{type:"number",min:0,value:i.stock_quantity,onChange:e=>x("stock_quantity",parseInt(e.target.value)),className:"w-full border px-2 py-1 rounded"})]}),Ae.jsxs("div",{className:"flex space-x-2 mt-4",children:[Ae.jsx("button",{onClick:async()=>{if(i)if(i.name.trim())if(i.price<=0)alert("Price must be greater than zero.");else try{const e=new FormData;e.append("name",i.name),e.append("description",i.description),e.append("price",i.price.toString()),e.append("stock_quantity",i.stock_quantity.toString()),e.append("is_active",i.is_active?"1":"0"),i.id?await kp(i.id,e):await Sp(e),o(null),p()}catch(e){console.error("Failed to save product:",e),alert("Failed to save product.")}else alert("Product name is required.")},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Save"}),Ae.jsx("button",{onClick:()=>{o(null)},className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500",children:"Cancel"})]})]}),Ae.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:b.map(e=>{return Ae.jsxs("div",{className:"border rounded p-4 flex flex-col",children:[e.image_paths&&e.image_paths.length>0?Ae.jsx("div",{className:"mb-2",children:Ae.jsx("img",{src:`http://127.0.0.1:8000/storage/${e.image_paths[0]}`,alt:`${e.name} cover`,className:"w-full aspect-[4/3] object-contain border cursor-pointer rounded bg-gray-50"})}):Ae.jsx("div",{className:"mb-2 aspect-[4/3] bg-gray-200 flex items-center justify-center text-gray-500",children:"No Images"}),Ae.jsx("h3",{className:"font-semibold text-lg",children:e.name}),Ae.jsx("p",{className:"text-gray-700 flex-grow",children:e.description}),Ae.jsxs("p",{className:"font-bold mt-2",children:["₱",Number(e.price||0).toFixed(2)]}),Ae.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Stock: ",e.stock_quantity," | Reservations: ",(r=e.id,a.filter(e=>e.product_id===r).length)]}),"customer"===t&&e.is_active&&e.stock_quantity>0&&Ae.jsx(Ae.Fragment,{children:l===e.id?Ae.jsxs("div",{className:"mt-2 p-2 border rounded bg-gray-50",children:[Ae.jsx("input",{type:"number",min:1,max:e.stock_quantity,value:d,onChange:e=>u(parseInt(e.target.value)),className:"w-full border px-2 py-1 rounded mb-2"}),Ae.jsxs("div",{className:"flex space-x-2",children:[Ae.jsx("button",{onClick:g,className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Confirm"}),Ae.jsx("button",{onClick:v,className:"px-3 py-1 bg-gray-400 text-white rounded hover:bg-gray-500",children:"Cancel"})]})]}):Ae.jsx("button",{onClick:()=>(e=>{c(e),u(1)})(e.id),className:"mt-2 px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reserve"})}),("admin"===t||"staff"===t||"optometrist"===t)&&Ae.jsxs("div",{className:"mt-2 flex space-x-2",children:[Ae.jsx("button",{onClick:()=>y(e),className:"px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Edit"}),Ae.jsx("button",{onClick:()=>(async e=>{try{await _p(e),p()}catch(t){console.error("Failed to delete product:",t),alert("Failed to delete product.")}})(e.id),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]},e.id);var r})}),0===b.length&&Ae.jsx("p",{className:"text-center text-gray-500 mt-8",children:"No products available."})]})},Ap=()=>{var e,t,r,n,a;const s=Dt(),{user:i}=Rc(),{appointments:o,loading:l}=ih(),{data:c,isLoading:d,error:u}=ho({queryKey:["staff-inventory",null==(e=null==i?void 0:i.branch)?void 0:e.id],queryFn:async()=>{var e;if(!(null==(e=null==i?void 0:i.branch)?void 0:e.id))return null;return(await Cc.get(`http://127.0.0.1:8000/api/enhanced-inventory/branch/${i.branch.id}`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}})).data},enabled:!!(null==(t=null==i?void 0:i.branch)?void 0:t.id),retry:3,refetchInterval:3e4}),{data:h,isLoading:m,error:p}=ho({queryKey:["staff-reservations",null==(r=null==i?void 0:i.branch)?void 0:r.id],queryFn:async()=>(await Cc.get("http://127.0.0.1:8000/api/reservations",{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}})).data,retry:3,refetchInterval:3e4}),f=(new Date).toISOString().split("T")[0],x=(null==o?void 0:o.filter(e=>e.appointment_date===f).map(e=>{var t;return{time:new Date(`1970-01-01T${e.start_time}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),patient:(null==(t=e.patient)?void 0:t.name)||"Unknown Patient",type:e.type.replace("_"," "),status:e.status}}))||[],y=(null==o?void 0:o.filter(e=>"completed"===e.status))||[],v=(null==(n=null==c?void 0:c.inventories)?void 0:n.reduce((e,t)=>{const r=t.product_name.split(" ")[0],n=e.find(e=>e.category===r);return n?(n.current+=t.quantity,n.max+=t.quantity+20):e.push({category:r,current:t.quantity,max:t.quantity+20,status:t.quantity<t.min_threshold?"critical":t.quantity<1.5*t.min_threshold?"low":"good"}),e},[]))||[],g=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{className:"bg-gradient-staff rounded-lg p-6 text-white",children:[Ae.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Staff Control Center"}),Ae.jsx("p",{className:"text-staff-foreground/90",children:"Manage clinic operations, inventory, and patient communications efficiently."})]}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ae.jsx(np,{title:"Today's Appointments",value:x.length,description:"Scheduled appointments",icon:ln,action:{label:"Manage",onClick:()=>s("/staff/appointments"),variant:"staff"},gradient:!0}),Ae.jsx(np,{title:"Inventory Items",value:u?"Error":(null==(a=null==c?void 0:c.inventories)?void 0:a.length)||0,description:u?"Failed to load":"Items in stock",icon:Ln,trend:u?void 0:{value:v.filter(e=>"low"===e.status||"critical"===e.status).length,label:"items need attention",isPositive:!1},action:{label:"Update Stock",onClick:()=>s("/staff/inventory"),variant:"staff"},gradient:!0}),Ae.jsx(np,{title:"Pending Reservations",value:p?"Error":(null==h?void 0:h.filter(e=>"pending"===e.status).length)||0,description:p?"Failed to load":"Awaiting approval",icon:da,action:{label:"View All",onClick:()=>s("/staff/reservations"),variant:"staff"},gradient:!0}),Ae.jsx(np,{title:"Completed Appointments",value:y.length,description:"Ready for receipts",icon:Sn,action:{label:"Create Receipts",onClick:()=>s("/staff/reservations"),variant:"staff"},gradient:!0})]}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Ae.jsx(np,{title:"Patient Management",value:"Manage",description:"View and update patient records",icon:da,action:{label:"View Patients",onClick:()=>s("/staff/patients"),variant:"staff"},gradient:!0}),Ae.jsx(np,{title:"Notifications",value:"Send",description:"Communicate with patients",icon:yn,action:{label:"Send Notifications",onClick:()=>s("/staff/notifications"),variant:"staff"},gradient:!0}),Ae.jsx(np,{title:"Restock Requests",value:"Manage",description:"Handle inventory requests",icon:Ln,action:{label:"View Requests",onClick:()=>s("/staff/restock-requests"),variant:"staff"},gradient:!0}),Ae.jsx(np,{title:"Profile & Settings",value:"Manage",description:"Update your profile and branch info",icon:da,action:{label:"View Profile",onClick:()=>s("/staff/profile"),variant:"staff"},gradient:!0})]}),Ae.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ae.jsxs(td,{className:"shadow-lg border-0",children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(Ln,{className:"h-5 w-5 text-staff"}),Ae.jsx("span",{children:"Inventory Status"})]}),Ae.jsx(ad,{children:"Current stock levels by category"})]}),Ae.jsxs(sd,{className:"space-y-4",children:[d?Ae.jsxs("div",{className:"text-center py-4",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),Ae.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading inventory..."})]}):v.length>0?v.map((e,t)=>{const r=e.current/e.max*100,n=(e=>{switch(e){case"good":return{color:"bg-green-500",textColor:"text-green-700"};case"low":return{color:"bg-yellow-500",textColor:"text-yellow-700"};case"critical":return{color:"bg-red-500",textColor:"text-red-700"};default:return{color:"bg-gray-500",textColor:"text-gray-700"}}})(e.status);return Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsx("span",{className:"font-medium text-slate-900",children:e.category}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsxs("span",{className:"text-sm text-slate-600",children:[e.current,"/",e.max]}),Ae.jsx(Yd,{className:`${n.textColor} bg-opacity-10`,children:e.status})]})]}),Ae.jsx(jp,{value:r,className:"h-2"})]},t)}):Ae.jsxs("div",{className:"text-center py-4",children:[Ae.jsx(Ln,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:"No inventory data available"})]}),Ae.jsx(Hc,{variant:"outline",size:"sm",className:"w-full",onClick:()=>s("/staff/inventory"),children:"View Full Inventory"})]})]}),Ae.jsxs(td,{className:"shadow-lg border-0",children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(yn,{className:"h-5 w-5 text-staff"}),Ae.jsx("span",{children:"Today's Schedule"})]}),Ae.jsx(ad,{children:"Appointment status overview"})]}),Ae.jsxs(sd,{children:[l?Ae.jsxs("div",{className:"text-center py-4",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),Ae.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading appointments..."})]}):x.length>0?Ae.jsx("div",{className:"space-y-3",children:x.map((e,t)=>Ae.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[Ae.jsxs("div",{children:[Ae.jsx("h4",{className:"font-medium text-slate-900",children:e.patient}),Ae.jsxs("p",{className:"text-sm text-slate-600",children:[e.time," • ",e.type]})]}),Ae.jsx(Yd,{className:g(e.status),children:e.status})]},t))}):Ae.jsxs("div",{className:"text-center py-4",children:[Ae.jsx(ln,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:"No appointments scheduled for today"})]}),Ae.jsx(Hc,{variant:"outline",size:"sm",className:"w-full mt-4",onClick:()=>s("/staff/appointments"),children:"Manage All Appointments"})]})]}),Ae.jsxs(td,{className:"shadow-lg border-0",children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(Sn,{className:"h-5 w-5 text-staff"}),Ae.jsx("span",{children:"Receipt Ready"})]}),Ae.jsx(ad,{children:"Completed appointments that need receipts"})]}),Ae.jsxs(sd,{children:[y.length>0?Ae.jsxs("div",{className:"space-y-3",children:[y.slice(0,3).map((e,t)=>{var r;return Ae.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[Ae.jsxs("div",{children:[Ae.jsx("h4",{className:"font-medium text-slate-900",children:(null==(r=e.patient)?void 0:r.name)||"Unknown Patient"}),Ae.jsxs("p",{className:"text-sm text-slate-600",children:[new Date(e.appointment_date).toLocaleDateString()," •",new Date(`1970-01-01T${e.start_time}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]}),Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>s(`/staff/create-receipt/${e.id}`),className:"text-green-700 border-green-200 hover:bg-green-100",children:[Ae.jsx(Sn,{className:"h-3 w-3 mr-1"}),"Create Receipt"]})]},t)}),y.length>3&&Ae.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["+",y.length-3," more completed appointments"]})]}):Ae.jsxs("div",{className:"text-center py-4",children:[Ae.jsx(Sn,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:"No completed appointments"})]}),Ae.jsx(Hc,{variant:"outline",size:"sm",className:"w-full mt-4",onClick:()=>s("/staff/appointments"),children:"View All Appointments"})]})]})]}),Ae.jsxs(td,{className:"shadow-lg border-0",children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(Qn,{className:"h-5 w-5 text-staff"}),Ae.jsx("span",{children:"Product Gallery Management"})]}),Ae.jsx(ad,{children:"Manage products available for customer reservations"})]}),Ae.jsx(sd,{children:Ae.jsx(Cp,{})})]})]})},Ep=Cc.create({baseURL:"http://192.168.100.6:8000/api"});Ep.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),Ep.interceptors.response.use(e=>e,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const Pp=async()=>{const e=await Ep.get("/branches");return e.data.branches||e.data},Tp=async()=>(await Ep.get("/branches/active")).data,Mp=({selectedBranchId:e,onBranchChange:t,showAllOption:r=!0,label:n="Filter by Branch",placeholder:a="All branches",className:s="",useAdminData:i=!1})=>{const{data:o=[],isLoading:l}=ho({queryKey:i?["branches"]:["activeBranches"],queryFn:i?Pp:Tp});return Ae.jsxs("div",{className:`space-y-2 ${s}`,children:[Ae.jsxs(Zc,{htmlFor:"branch-filter",className:"flex items-center gap-2",children:[Ae.jsx(sn,{className:"h-4 w-4"}),n]}),Ae.jsxs(Tm,{value:e,onValueChange:t,children:[Ae.jsx(Dm,{id:"branch-filter",className:"w-full",children:Ae.jsx(Mm,{placeholder:l?"Loading branches...":a})}),Ae.jsxs(Fm,{children:[r&&Ae.jsx(Lm,{value:"all",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),Ae.jsx("span",{className:"font-semibold",children:"Global View (All Branches)"})]})}),o.map(e=>Ae.jsx(Lm,{value:e.id.toString(),children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),Ae.jsx("span",{children:e.name}),Ae.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:e.code})]})},e.id))]})]})]})},Dp=Ct.createContext(void 0),Ip=({children:e})=>{const{user:t}=Rc(),[r,n]=Ct.useState("all");Ct.useEffect(()=>{(null==t?void 0:t.branch)?n(t.branch.id.toString()):n("all")},[t]);const a=(null==t?void 0:t.branch)||null,s="admin"===(null==t?void 0:t.role);return Ae.jsx(Dp.Provider,{value:{selectedBranchId:r,setSelectedBranchId:n,userBranch:a,isMultiBranch:s},children:e})},Rp=()=>{const e=Ct.useContext(Dp);if(void 0===e)throw new Error("useBranch must be used within a BranchProvider");return e},Fp=Cc.create({baseURL:"http://192.168.100.6:8000/api"}),Lp=async()=>{const e=sessionStorage.getItem("auth_token");if(!e)throw new Error("No authentication token found");try{return(await Fp.get("/analytics/branch-performance",{headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}})).data}catch(t){return console.error("Error fetching branch performance:",t),{branches:[],summary:{total_revenue:0,total_patients:0,total_appointments:0,average_growth:0,total_branches:0}}}},Bp="http://192.168.100.6:8000/api";Cc.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers=e.headers||{},e.headers.Authorization=`Bearer ${t}`),e});const qp=new class{async getTopSellingProducts(e={}){const t=new URLSearchParams;e.period&&t.append("period",e.period.toString()),e.branch_id&&t.append("branch_id",e.branch_id.toString()),e.limit&&t.append("limit",e.limit.toString());return(await Cc.get(`${Bp}/admin/products/analytics?${t}`)).data}async getCategoryAnalytics(e={}){const t=new URLSearchParams;e.period&&t.append("period",e.period.toString()),e.branch_id&&t.append("branch_id",e.branch_id.toString());return(await Cc.get(`${Bp}/admin/products/category-analytics?${t}`)).data}async getLowPerformingProducts(e={}){const t=new URLSearchParams;e.period&&t.append("period",e.period.toString());return(await Cc.get(`${Bp}/admin/products/low-performing?${t}`)).data}};function zp(e){const t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"₱0":`₱${t.toLocaleString("en-PH",{minimumFractionDigits:0,maximumFractionDigits:2})}`}const $p=()=>{var e,t,r,n,a,s;const i=Dt(),{selectedBranchId:o,setSelectedBranchId:l,isMultiBranch:c}=Rp(),{data:d,isLoading:u,error:h,refetch:m}=ho({queryKey:["branch-performance"],queryFn:Lp,refetchInterval:3e4,retry:3}),{data:p,isLoading:f,error:x,refetch:y}=ho({queryKey:["top-selling-products",o],queryFn:()=>qp.getTopSellingProducts({period:30,branch_id:"all"!==o?parseInt(o):void 0,limit:4}),refetchInterval:6e4,retry:3}),v=(null==d?void 0:d.branches)||[],g=(null==d?void 0:d.summary)||null,b="all"===o?v:v.filter(e=>e.id.toString()===o),j=(null==p?void 0:p.top_products)||[],w="all"===o?(null==g?void 0:g.total_revenue)||0:b.reduce((e,t)=>e+t.revenue,0),N="all"===o?(null==g?void 0:g.total_patients)||0:b.reduce((e,t)=>e+t.patients,0);return"all"===o?null==g||g.average_growth:b.length>0&&(b.reduce((e,t)=>e+t.growth,0),b.length),Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsx("div",{className:"bg-gradient-admin rounded-lg p-6 text-white",children:Ae.jsx("div",{className:"flex justify-between items-start",children:Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Administrative Dashboard"}),Ae.jsx("p",{className:"text-admin-foreground/90",children:"Complete overview of all clinic operations, performance metrics, and system management."})]})})}),Ae.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsx("div",{className:"flex items-center space-x-4",children:Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsx(Mp,{selectedBranchId:o,onBranchChange:l,showAllOption:!0,label:"Filter by Branch",placeholder:"All branches",useAdminData:!0,className:"min-w-[200px]"}),"all"!==o&&Ae.jsxs(Yd,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:["Showing: ",(null==(e=b[0])?void 0:e.name)||"Selected Branch"]}),"all"===o&&Ae.jsx(Yd,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Showing: All Branches"})]})}),Ae.jsx("div",{className:"flex items-center space-x-2",children:Ae.jsxs(Hc,{onClick:()=>{m(),y()},variant:"outline",size:"sm",className:"min-w-[120px] disabled:opacity-50 transition-all duration-200 hover:bg-blue-50 hover:border-blue-300",disabled:u||f,children:[Ae.jsx(Vn,{className:"h-4 w-4 mr-2 "+(u||f?"animate-spin":"")}),u||f?"Refreshing...":"Refresh"]})})]})}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[Ae.jsx(np,{title:"Monthly Revenue",value:zp(w),description:"all"===o?"Across all branches":`For ${(null==(t=b[0])?void 0:t.name)||"selected branch"}`,icon:rn,action:{label:"View Analytics",onClick:()=>i("/admin/analytics"),variant:"admin"},gradient:!0}),Ae.jsx(np,{title:"Active Patients",value:N,description:"all"===o?"Total registered":`Registered at ${(null==(r=b[0])?void 0:r.name)||"selected branch"}`,icon:da,action:{label:"User Management",onClick:()=>i("/admin/users"),variant:"admin"},gradient:!0}),Ae.jsx(np,{title:"Total Inventory",value:"Manage",description:"all"===o?"Items across branches":`Items at ${(null==(n=b[0])?void 0:n.name)||"selected branch"}`,icon:Ln,action:{label:"Manage Inventory",onClick:()=>i("/admin/inventory"),variant:"admin"},gradient:!0}),Ae.jsx(np,{title:"Active Branches",value:"all"===o?v.length:b.length,description:"all"===o?"All locations":"Selected location",icon:ta,action:{label:"Branch Analytics",onClick:()=>i("/admin/analytics"),variant:"admin"},gradient:!0}),Ae.jsx(np,{title:"Product Gallery",value:"Manage",description:"Add, edit, delete products",icon:Ln,action:{label:"Manage Products",onClick:()=>i("/admin/products"),variant:"admin"},gradient:!0})]}),Ae.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ae.jsxs(td,{className:"shadow-lg border-0",children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(nn,{className:"h-5 w-5 text-admin"}),Ae.jsx("span",{children:"Branch Performance"})]}),Ae.jsx(ad,{children:"all"===o?"Revenue and patient metrics by location":`Performance for ${(null==(a=b[0])?void 0:a.name)||"selected branch"}`})]}),Ae.jsx(sd,{className:"space-y-4",children:u?Ae.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ae.jsx(Vn,{className:"h-6 w-6 animate-spin mr-2"}),Ae.jsx("span",{children:"Loading branch performance..."})]}):h?Ae.jsxs("div",{className:"text-center py-8 text-red-500",children:[Ae.jsx("p",{children:"Failed to load branch performance data"}),Ae.jsx(Hc,{variant:"admin",size:"sm",className:"mt-2",onClick:()=>m(),children:"Retry"})]}):b.length>0?Ae.jsxs(Ae.Fragment,{children:[b.map(e=>Ae.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[Ae.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ae.jsx("h4",{className:"font-semibold text-slate-900",children:e.name}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsxs(Yd,{className:e.growth>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:[e.growth>0?"+":"",e.growth,"%"]}),Ae.jsx(Yd,{variant:e.is_active?"default":"secondary",children:e.is_active?"Active":"Inactive"})]})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-slate-600",children:"Revenue"}),Ae.jsx("p",{className:"font-semibold",children:zp(e.revenue)})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-slate-600",children:"Patients"}),Ae.jsx("p",{className:"font-semibold",children:e.patients})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-slate-600",children:"Appointments"}),Ae.jsx("p",{className:"font-semibold",children:e.appointments})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-slate-600",children:"Low Stock Alerts"}),Ae.jsx("p",{className:"font-semibold text-red-600",children:e.low_stock_alerts})]})]}),Ae.jsx(jp,{value:Math.min(e.revenue/5e4*100,100),className:"mt-2 h-2"})]},e.id)),Ae.jsx(Hc,{variant:"admin",size:"sm",className:"w-full mt-3",onClick:()=>i("/admin/analytics"),children:"Detailed Branch Report"})]}):Ae.jsxs("div",{className:"text-center py-8 text-gray-500",children:[Ae.jsx("p",{children:"No branch performance data available."}),Ae.jsx(Hc,{variant:"admin",size:"sm",className:"mt-2",onClick:()=>m(),children:"Retry"})]})})]}),Ae.jsxs(td,{className:"shadow-lg border-0",children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(tn,{className:"h-5 w-5 text-admin"}),Ae.jsx("span",{children:"Top Selling Products"})]}),Ae.jsx(ad,{children:"all"===o?"Best performing products this month":`Best performing products at ${(null==(s=b[0])?void 0:s.name)||"selected branch"}`})]}),Ae.jsxs(sd,{className:"space-y-3",children:[f?Ae.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-admin"}),Ae.jsx("span",{className:"ml-2",children:"Loading products..."})]}):x?Ae.jsxs("div",{className:"text-center py-8 text-red-500",children:[Ae.jsx("p",{children:"Failed to load top products data"}),Ae.jsx(Hc,{variant:"admin",size:"sm",className:"mt-2",onClick:()=>y(),children:"Retry"})]}):j.length>0?j.map((e,t)=>Ae.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[Ae.jsxs("div",{className:"flex-1",children:[Ae.jsx("h4",{className:"font-medium text-slate-900",children:e.name}),Ae.jsxs("p",{className:"text-sm text-slate-600",children:[e.units_sold," units sold"]})]}),Ae.jsxs("div",{className:"text-right",children:[Ae.jsx("p",{className:"font-semibold text-slate-900",children:zp(e.revenue)}),Ae.jsxs("p",{className:"text-sm "+(e.trend_percentage>0?"text-green-600":"text-red-600"),children:[e.trend_percentage>0?"+":"",e.trend_percentage,"%"]})]})]},e.id)):Ae.jsxs("div",{className:"text-center py-8 text-gray-500",children:[Ae.jsx("p",{children:"No product sales data available"}),Ae.jsx("p",{className:"text-xs mt-1",children:"Data will appear when products are sold"})]}),Ae.jsx(Hc,{variant:"admin",size:"sm",className:"w-full mt-3",onClick:()=>i("/admin/products"),children:"Manage Products"})]})]})]})]})};function Up(...e){return ss(Vr(e))}const Vp=wt,Wp=Nt,Hp=jt,Kp=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(xt,{ref:r,className:Up("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Kp.displayName=xt.displayName;const Yp=Ct.forwardRef(({className:e,children:t,...r},n)=>Ae.jsxs(Hp,{children:[Ae.jsx(Kp,{}),Ae.jsxs(yt,{ref:n,className:Up("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,Ae.jsxs(vt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[Ae.jsx(ma,{className:"h-4 w-4"}),Ae.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Yp.displayName=yt.displayName;const Gp=({className:e,...t})=>Ae.jsx("div",{className:Up("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Gp.displayName="DialogHeader";const Xp=({className:e,...t})=>Ae.jsx("div",{className:Up("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Xp.displayName="DialogFooter";const Qp=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(gt,{ref:r,className:Up("text-lg font-semibold leading-none tracking-tight",e),...t}));Qp.displayName=gt.displayName;const Jp=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(bt,{ref:r,className:Up("text-sm text-muted-foreground",e),...t}));function Zp(...e){return ss(Vr(e))}Jp.displayName=bt.displayName;const ef=Kr("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),tf=Ct.forwardRef(({className:e,variant:t,...r},n)=>Ae.jsx("div",{ref:n,role:"alert",className:Zp(ef({variant:t}),e),...r}));tf.displayName="Alert";Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("h5",{ref:r,className:Zp("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";const rf=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("div",{ref:r,className:Zp("text-sm [&_p]:leading-relaxed",e),...t}));rf.displayName="AlertDescription";const nf="http://127.0.0.1:8000/api",af=()=>{var e;const{user:t}=Rc(),[r,n]=Ct.useState([]),[a,s]=Ct.useState(!0),[i,o]=Ct.useState(null),[l,c]=Ct.useState(""),[d,u]=Ct.useState(""),[h,m]=Ct.useState("all"),[p,f]=Ct.useState(!1),[x,y]=Ct.useState(!1),[v,g]=Ct.useState(null),[b,j]=Ct.useState(null),[w,N]=Ct.useState(null),[S,k]=Ct.useState({product_name:"",sku:"",description:"",quantity:"",min_threshold:"",unit_price:"",manufacturer_id:"",expiry_date:"",image_path:""}),_=Ct.useCallback(async()=>{var e,r;if(null==t?void 0:t.branch_id)try{s(!0),o(null);const e=await Cc.get(`${nf}/inventory/enhanced?branch_id=${t.branch_id}`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`},timeout:1e4});n(e.data.inventories||[])}catch(a){console.error("Error loading inventory:",a),o((null==(r=null==(e=a.response)?void 0:e.data)?void 0:r.message)||"Failed to load inventory")}finally{s(!1)}},[null==t?void 0:t.branch_id]);Ct.useEffect(()=>{_()},[_]),Ct.useEffect(()=>{const e=setTimeout(()=>{u(l)},300);return()=>clearTimeout(e)},[l]);const O=Ct.useCallback(async e=>{var r,n;e.preventDefault();try{let e=S.image_path;if(b){const t=new FormData;t.append("image",b),t.append("folder","products");e=(await Cc.post(`${nf}/upload/image`,t,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"multipart/form-data"}})).data.image_path}const r={...S,branch_id:null==t?void 0:t.branch_id,image_path:e,quantity:parseInt(S.quantity),min_threshold:parseInt(S.min_threshold),unit_price:parseFloat(S.unit_price)||0,manufacturer_id:S.manufacturer_id||null,expiry_date:S.expiry_date||null};await Cc.post(`${nf}/enhanced-inventory`,r,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}}),f(!1),C(),_()}catch(a){console.error("Error adding item:",a),o((null==(n=null==(r=a.response)?void 0:r.data)?void 0:n.message)||"Failed to add item")}},[S,b,null==t?void 0:t.branch_id,_]),C=()=>{k({product_name:"",sku:"",description:"",quantity:"",min_threshold:"",unit_price:"",manufacturer_id:"",expiry_date:"",image_path:""}),j(null),N(null)},A=e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(r){j(r);const e=new FileReader;e.onload=e=>{var t;N(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(r)}},E=e=>{switch(e){case"in_stock":return"bg-green-100 text-green-800";case"low_stock":return"bg-yellow-100 text-yellow-800";case"out_of_stock":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},P=Ct.useMemo(()=>r.filter(e=>{const t=e.product_name.toLowerCase().includes(d.toLowerCase())||e.sku.toLowerCase().includes(d.toLowerCase()),r="all"===h||e.status===h;return t&&r}),[r,d,h]),T=Ct.useMemo(()=>({inStock:P.filter(e=>"in_stock"===e.status).length,lowStock:P.filter(e=>"low_stock"===e.status).length,outOfStock:P.filter(e=>"out_of_stock"===e.status).length}),[P]),M=()=>Ae.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:Ae.jsxs("div",{className:"p-6 space-y-6",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center gap-4",children:[Ae.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg animate-pulse"}),Ae.jsxs("div",{children:[Ae.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse mb-2"}),Ae.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"})]})]}),Ae.jsx("div",{className:"h-10 w-24 bg-gray-200 rounded animate-pulse"})]}),Ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx("div",{className:"h-4 w-20 bg-gray-200 rounded animate-pulse"}),Ae.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded animate-pulse"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"h-8 w-12 bg-gray-200 rounded animate-pulse"})})]},e))}),Ae.jsx(td,{children:Ae.jsx(sd,{className:"p-4",children:Ae.jsxs("div",{className:"flex gap-4",children:[Ae.jsx("div",{className:"flex-1 h-10 bg-gray-200 rounded animate-pulse"}),Ae.jsx("div",{className:"w-48 h-10 bg-gray-200 rounded animate-pulse"})]})})}),Ae.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>Ae.jsx(td,{children:Ae.jsx(sd,{className:"p-4",children:Ae.jsxs("div",{className:"flex items-start gap-4",children:[Ae.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg animate-pulse"}),Ae.jsxs("div",{className:"flex-1 space-y-2",children:[Ae.jsx("div",{className:"h-6 w-48 bg-gray-200 rounded animate-pulse"}),Ae.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"}),Ae.jsx("div",{className:"h-4 w-64 bg-gray-200 rounded animate-pulse"})]}),Ae.jsxs("div",{className:"flex flex-col gap-2",children:[Ae.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse"}),Ae.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse"}),Ae.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse"})]})]})})},e))})]})});return a?Ae.jsx(M,{}):Ae.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:Ae.jsxs("div",{className:"p-6 space-y-6",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center gap-4",children:[Ae.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:Ae.jsx(Ln,{className:"w-6 h-6 text-white"})}),Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Branch Inventory"}),Ae.jsxs("p",{className:"text-gray-600",children:["Manage inventory for ",(null==(e=null==t?void 0:t.branch)?void 0:e.name)||"your branch"]})]})]}),Ae.jsxs(Hc,{onClick:()=>f(!0),className:"flex items-center gap-2",children:[Ae.jsx($n,{className:"h-4 w-4"}),"Add Item"]})]}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Total Items"}),Ae.jsx(Ln,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"text-2xl font-bold",children:P.length})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"In Stock"}),Ae.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"text-2xl font-bold text-green-600",children:T.inStock})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Low Stock"}),Ae.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:T.lowStock})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Out of Stock"}),Ae.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"text-2xl font-bold text-red-600",children:T.outOfStock})})]})]}),Ae.jsx(td,{children:Ae.jsx(sd,{className:"p-4",children:Ae.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[Ae.jsx("div",{className:"flex-1",children:Ae.jsxs("div",{className:"relative",children:[Ae.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),Ae.jsx(Yc,{placeholder:"Search by product name or SKU...",value:l,onChange:e=>c(e.target.value),className:"pl-10"})]})}),Ae.jsx("div",{className:"w-full sm:w-48",children:Ae.jsxs(Tm,{value:h,onValueChange:m,children:[Ae.jsxs(Dm,{children:[Ae.jsx(kn,{className:"h-4 w-4 mr-2"}),Ae.jsx(Mm,{placeholder:"Filter by status"})]}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"all",children:"All Status"}),Ae.jsx(Lm,{value:"in_stock",children:"In Stock"}),Ae.jsx(Lm,{value:"low_stock",children:"Low Stock"}),Ae.jsx(Lm,{value:"out_of_stock",children:"Out of Stock"})]})]})})]})})}),i&&Ae.jsxs(tf,{variant:"destructive",children:[Ae.jsx(Jr,{className:"h-4 w-4"}),Ae.jsx(rf,{children:i})]}),Ae.jsxs("div",{className:"space-y-4",children:[P.map(e=>{var t;return Ae.jsx(td,{className:"hover:shadow-md transition-shadow",children:Ae.jsx(sd,{className:"p-4",children:Ae.jsxs("div",{className:"flex items-start gap-4",children:[Ae.jsx("div",{className:"flex-shrink-0",children:e.image_path?Ae.jsx("img",{src:e.image_path.startsWith("http")?e.image_path:`http://127.0.0.1:8000/storage/${e.image_path}`,alt:e.product_name,className:"w-20 h-20 object-cover rounded-lg border border-gray-200",onError:e=>{e.currentTarget.src="/placeholder-product.png"}}):Ae.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center",children:Ae.jsx(Ln,{className:"h-8 w-8 text-gray-400"})})}),Ae.jsxs("div",{className:"flex-1 min-w-0",children:[Ae.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ae.jsx("h3",{className:"font-medium text-lg truncate",children:e.product_name}),Ae.jsx(Yd,{className:E(e.status),children:e.status.replace("_"," ")})]}),Ae.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600 mb-3",children:[Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"SKU:"})," ",e.sku]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Quantity:"})," ",e.quantity]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Min Threshold:"})," ",e.min_threshold]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Unit Price:"})," ₱",(null==(t=e.unit_price)?void 0:t.toFixed(2))||"0.00"]})]}),e.description&&Ae.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:e.description}),e.expiry_date&&Ae.jsxs("p",{className:"text-sm text-gray-500",children:["Expires: ",new Date(e.expiry_date).toLocaleDateString()]})]}),Ae.jsxs("div",{className:"flex flex-col gap-2",children:[("low_stock"===e.status||"out_of_stock"===e.status)&&Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(async e=>{var t,r;try{await Cc.post(`${nf}/enhanced-inventory/${e.id}/alert`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),alert("Low stock alert sent to admin!")}catch(n){console.error("Error sending alert:",n),o((null==(r=null==(t=n.response)?void 0:t.data)?void 0:r.message)||"Failed to send alert")}})(e),className:"text-yellow-600 border-yellow-600 hover:bg-yellow-50 hover:text-yellow-700",children:[Ae.jsx(an,{className:"h-3 w-3 mr-1"}),"Alert Admin"]}),Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(e=>{var t;g(e),k({product_name:e.product_name,sku:e.sku,description:e.description||"",quantity:e.quantity.toString(),min_threshold:e.min_threshold.toString(),unit_price:(null==(t=e.unit_price)?void 0:t.toString())||"",manufacturer_id:e.manufacturer_id||"",expiry_date:e.expiry_date||"",image_path:e.image_path||""}),N(e.image_path||null),y(!0)})(e),children:[Ae.jsx(Bn,{className:"h-3 w-3 mr-1"}),"Edit"]}),Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(async e=>{var t,r;if(confirm("Are you sure you want to delete this item?"))try{await Cc.delete(`${nf}/enhanced-inventory/${e}`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}}),_()}catch(n){console.error("Error deleting item:",n),o((null==(r=null==(t=n.response)?void 0:t.data)?void 0:r.message)||"Failed to delete item")}})(e.id),className:"text-red-600 border-red-600 hover:bg-red-50 hover:text-red-700",children:[Ae.jsx(ra,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})})},e.id)}),0===P.length&&!a&&Ae.jsx(td,{children:Ae.jsxs(sd,{className:"p-8 text-center",children:[Ae.jsx(Ln,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inventory items found"}),Ae.jsx("p",{className:"text-gray-600 mb-4",children:l||"all"!==h?"Try adjusting your search or filter criteria.":"Get started by adding your first inventory item."}),Ae.jsxs(Hc,{onClick:()=>f(!0),children:[Ae.jsx($n,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})})]}),Ae.jsx(Vp,{open:p,onOpenChange:f,children:Ae.jsxs(Yp,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Add New Inventory Item"}),Ae.jsx(Jp,{children:"Add a new product to your branch inventory."})]}),Ae.jsxs("form",{onSubmit:O,className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"product_name",children:"Product Name *"}),Ae.jsx(Yc,{id:"product_name",value:S.product_name,onChange:e=>k({...S,product_name:e.target.value}),required:!0})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"sku",children:"SKU *"}),Ae.jsx(Yc,{id:"sku",value:S.sku,onChange:e=>k({...S,sku:e.target.value}),required:!0})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"description",children:"Description"}),Ae.jsx(ph,{id:"description",value:S.description,onChange:e=>k({...S,description:e.target.value}),rows:3})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"quantity",children:"Quantity *"}),Ae.jsx(Yc,{id:"quantity",type:"number",value:S.quantity,onChange:e=>k({...S,quantity:e.target.value}),required:!0})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"min_threshold",children:"Min Threshold *"}),Ae.jsx(Yc,{id:"min_threshold",type:"number",value:S.min_threshold,onChange:e=>k({...S,min_threshold:e.target.value}),required:!0})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"manufacturer_id",children:"Manufacturer ID"}),Ae.jsx(Yc,{id:"manufacturer_id",type:"text",value:S.manufacturer_id,onChange:e=>k({...S,manufacturer_id:e.target.value}),placeholder:"Enter manufacturer ID (optional)"})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"unit_price",children:"Unit Price"}),Ae.jsx(Yc,{id:"unit_price",type:"number",step:"0.01",value:S.unit_price,onChange:e=>k({...S,unit_price:e.target.value})})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"expiry_date",children:"Expiry Date"}),Ae.jsx(Yc,{id:"expiry_date",type:"date",value:S.expiry_date,onChange:e=>k({...S,expiry_date:e.target.value})})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"image",children:"Product Image"}),Ae.jsx(Yc,{id:"image",type:"file",accept:"image/*",onChange:A}),w&&Ae.jsx("div",{className:"mt-2",children:Ae.jsx("img",{src:w,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg border border-gray-200"})})]}),Ae.jsxs(Xp,{children:[Ae.jsx(Hc,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),Ae.jsx(Hc,{type:"submit",children:"Add Item"})]})]})]})}),Ae.jsx(Vp,{open:x,onOpenChange:y,children:Ae.jsxs(Yp,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Edit Inventory Item"}),Ae.jsx(Jp,{children:"Update the inventory item details."})]}),Ae.jsxs("form",{onSubmit:async e=>{var t,r;if(e.preventDefault(),v)try{let e=S.image_path;if(b){const t=new FormData;t.append("image",b),t.append("folder","products");e=(await Cc.post(`${nf}/upload/image`,t,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"multipart/form-data"}})).data.image_path}const t={...S,image_path:e,quantity:parseInt(S.quantity),min_threshold:parseInt(S.min_threshold),unit_price:parseFloat(S.unit_price)||0,manufacturer_id:S.manufacturer_id||null,expiry_date:S.expiry_date||null};await Cc.put(`${nf}/enhanced-inventory/${v.id}`,t,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}}),y(!1),g(null),C(),_()}catch(n){console.error("Error updating item:",n),o((null==(r=null==(t=n.response)?void 0:t.data)?void 0:r.message)||"Failed to update item")}},className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit_product_name",children:"Product Name *"}),Ae.jsx(Yc,{id:"edit_product_name",value:S.product_name,onChange:e=>k({...S,product_name:e.target.value}),required:!0})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit_sku",children:"SKU *"}),Ae.jsx(Yc,{id:"edit_sku",value:S.sku,onChange:e=>k({...S,sku:e.target.value}),required:!0})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit_description",children:"Description"}),Ae.jsx(ph,{id:"edit_description",value:S.description,onChange:e=>k({...S,description:e.target.value}),rows:3})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit_quantity",children:"Quantity *"}),Ae.jsx(Yc,{id:"edit_quantity",type:"number",value:S.quantity,onChange:e=>k({...S,quantity:e.target.value}),required:!0})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit_min_threshold",children:"Min Threshold *"}),Ae.jsx(Yc,{id:"edit_min_threshold",type:"number",value:S.min_threshold,onChange:e=>k({...S,min_threshold:e.target.value}),required:!0})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit_manufacturer_id",children:"Manufacturer ID"}),Ae.jsx(Yc,{id:"edit_manufacturer_id",type:"text",value:S.manufacturer_id,onChange:e=>k({...S,manufacturer_id:e.target.value}),placeholder:"Enter manufacturer ID (optional)"})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit_unit_price",children:"Unit Price"}),Ae.jsx(Yc,{id:"edit_unit_price",type:"number",step:"0.01",value:S.unit_price,onChange:e=>k({...S,unit_price:e.target.value})})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit_expiry_date",children:"Expiry Date"}),Ae.jsx(Yc,{id:"edit_expiry_date",type:"date",value:S.expiry_date,onChange:e=>k({...S,expiry_date:e.target.value})})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit_image",children:"Product Image"}),Ae.jsx(Yc,{id:"edit_image",type:"file",accept:"image/*",onChange:A}),w&&Ae.jsx("div",{className:"mt-2",children:Ae.jsx("img",{src:w,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg border border-gray-200"})})]}),Ae.jsxs(Xp,{children:[Ae.jsx(Hc,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"}),Ae.jsx(Hc,{type:"submit",children:"Update Item"})]})]})]})})]})})},sf="http://127.0.0.1:8000/api",of=()=>{var e,t;const{user:r}=Rc(),[n,a]=Ct.useState([]),[s,i]=Ct.useState(""),[o,l]=Ct.useState(null),[c,d]=Ct.useState(!0),[u,h]=Ct.useState(null),[m,p]=Ct.useState(null),[f,x]=Ct.useState(""),[y,v]=Ct.useState("all"),[g,b]=Ct.useState(!1),[j,w]=Ct.useState(!1),[N,S]=Ct.useState(!1),[k,_]=Ct.useState(null),[O,C]=Ct.useState({name:"",sku:"",description:"",brand:"",model:"",price:"",stock_quantity:"",min_stock_threshold:"5",expiry_date:""});Ct.useEffect(()=>{var e;(null==(e=null==r?void 0:r.branch)?void 0:e.id)?(i(r.branch.id.toString()),d(!1)):(h("No branch assigned to your account"),d(!1))},[null==(e=null==r?void 0:r.branch)?void 0:e.id]);const A=Ct.useCallback(async()=>{var e,t;if(s)try{d(!0),h(null);const e=sessionStorage.getItem("auth_token"),t=await Cc.get(`${sf}/inventory/enhanced?branch_id=${s}`,{headers:{Authorization:`Bearer ${e}`}});a(t.data.inventories||[]),l(t.data.summary||null)}catch(r){console.error("Error loading inventory:",r),h((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Failed to load inventory")}finally{d(!1)}else d(!1)},[s]);Ct.useEffect(()=>{A();const e=setInterval(A,3e4);return()=>clearInterval(e)},[A]);const E=()=>{C({name:"",sku:"",description:"",brand:"",model:"",price:"",stock_quantity:"",min_stock_threshold:"5",expiry_date:""})},P=Ct.useMemo(()=>{console.log("Filtering inventory:",{totalItems:n.length,statusFilter:y,searchTerm:f,uniqueStatuses:[...new Set(n.map(e=>e.status))]});const e=n.filter(e=>{var t,r,n;const a=""===f||e.product_name.toLowerCase().includes(f.toLowerCase())||e.sku.toLowerCase().includes(f.toLowerCase())||(null==(t=e.brand)?void 0:t.toLowerCase().includes(f.toLowerCase()))||(null==(r=e.model)?void 0:r.toLowerCase().includes(f.toLowerCase())),s=null==(n=e.status)?void 0:n.toLowerCase().replace(/\s+/g,"_"),i=y.toLowerCase().replace(/\s+/g,"_");return a&&("all"===y||s===i)});return console.log("Filtered results:",e.length,"items with status filter:",y),e},[n,f,y]),T=e=>{switch(e){case"in_stock":return Ae.jsxs(Yd,{className:"bg-green-500",children:[Ae.jsx(dn,{className:"h-3 w-3 mr-1"}),"In Stock"]});case"low_stock":return Ae.jsxs(Yd,{className:"bg-yellow-500",children:[Ae.jsx(Qr,{className:"h-3 w-3 mr-1"}),"Low Stock"]});case"out_of_stock":return Ae.jsxs(Yd,{className:"bg-red-500",children:[Ae.jsx(Jr,{className:"h-3 w-3 mr-1"}),"Out of Stock"]});default:return Ae.jsx(Yd,{variant:"secondary",children:e})}};return c&&!n.length?Ae.jsxs("div",{className:"flex items-center justify-center h-96",children:[Ae.jsx(Vn,{className:"h-8 w-8 animate-spin text-primary"}),Ae.jsx("span",{className:"ml-2",children:"Loading inventory..."})]}):Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-3xl font-bold",children:"Branch Inventory Management"}),Ae.jsx("p",{className:"text-muted-foreground mt-1",children:(null==(t=null==r?void 0:r.branch)?void 0:t.name)?`Managing inventory for ${r.branch.name}`:"Manage products for your branch"})]}),Ae.jsxs("div",{className:"flex gap-2",children:[Ae.jsxs(Hc,{onClick:A,variant:"outline",className:"gap-2",children:[Ae.jsx(Vn,{className:"h-4 w-4"}),"Refresh"]}),Ae.jsxs(Hc,{onClick:()=>{E(),b(!0)},className:"gap-2",children:[Ae.jsx($n,{className:"h-4 w-4"}),"Add Product"]})]})]}),u&&Ae.jsxs(tf,{variant:"destructive",children:[Ae.jsx(Jr,{className:"h-4 w-4"}),Ae.jsx(rf,{children:u})]}),m&&Ae.jsxs(tf,{className:"bg-green-50 border-green-200",children:[Ae.jsx(dn,{className:"h-4 w-4 text-green-600"}),Ae.jsx(rf,{className:"text-green-800",children:m})]}),o&&Ae.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Total Items"}),Ae.jsx(Ln,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"text-2xl font-bold",children:o.total_items})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"In Stock"}),Ae.jsx(aa,{className:"h-4 w-4 text-green-600"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.in_stock})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Low Stock"}),Ae.jsx(Qr,{className:"h-4 w-4 text-yellow-600"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:o.low_stock})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Out of Stock"}),Ae.jsx(na,{className:"h-4 w-4 text-red-600"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"text-2xl font-bold text-red-600",children:o.out_of_stock})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Total Value"}),Ae.jsx(Ln,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"text-2xl font-bold",children:["₱",Number(o.total_value||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Filters"})}),Ae.jsxs(sd,{className:"flex gap-4",children:[Ae.jsxs("div",{className:"flex-1",children:[Ae.jsx(Zc,{htmlFor:"search",children:"Search"}),Ae.jsxs("div",{className:"relative",children:[Ae.jsx(Yn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),Ae.jsx(Yc,{id:"search",placeholder:"Search by name, SKU, brand...",value:f,onChange:e=>x(e.target.value),className:"pl-8"})]})]}),Ae.jsxs("div",{className:"w-48",children:[Ae.jsx(Zc,{htmlFor:"status",children:"Status Filter"}),Ae.jsxs("select",{id:"status",value:y,onChange:e=>v(e.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2",children:[Ae.jsx("option",{value:"all",children:"All Status"}),Ae.jsx("option",{value:"in_stock",children:"In Stock"}),Ae.jsx("option",{value:"low_stock",children:"Low Stock"}),Ae.jsx("option",{value:"out_of_stock",children:"Out of Stock"})]})]})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{children:["Inventory Items (",P.length,")"]}),Ae.jsx(ad,{children:"Products available in your branch"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"overflow-x-auto",children:Ae.jsxs("table",{className:"w-full",children:[Ae.jsx("thead",{children:Ae.jsxs("tr",{className:"border-b",children:[Ae.jsx("th",{className:"text-left p-2",children:"Product"}),Ae.jsx("th",{className:"text-left p-2",children:"SKU"}),Ae.jsx("th",{className:"text-left p-2",children:"Brand/Model"}),Ae.jsx("th",{className:"text-right p-2",children:"Stock"}),Ae.jsx("th",{className:"text-right p-2",children:"Available"}),Ae.jsx("th",{className:"text-right p-2",children:"Min. Threshold"}),Ae.jsx("th",{className:"text-right p-2",children:"Price"}),Ae.jsx("th",{className:"text-center p-2",children:"Status"}),Ae.jsx("th",{className:"text-center p-2",children:"Actions"})]})}),Ae.jsx("tbody",{children:0===P.length?Ae.jsx("tr",{children:Ae.jsx("td",{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No inventory items found"})}):P.map(e=>Ae.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[Ae.jsx("td",{className:"p-2 font-medium",children:e.product_name}),Ae.jsx("td",{className:"p-2 text-sm text-muted-foreground",children:e.sku}),Ae.jsx("td",{className:"p-2 text-sm",children:e.brand&&e.model?`${e.brand} - ${e.model}`:e.brand||e.model||"-"}),Ae.jsx("td",{className:"p-2 text-right",children:e.stock_quantity}),Ae.jsx("td",{className:"p-2 text-right font-medium",children:e.available_quantity}),Ae.jsx("td",{className:"p-2 text-right text-muted-foreground",children:e.min_threshold}),Ae.jsxs("td",{className:"p-2 text-right",children:["₱",Number(e.effective_price||0).toFixed(2)]}),Ae.jsx("td",{className:"p-2 text-center",children:T(e.status)}),Ae.jsx("td",{className:"p-2",children:Ae.jsxs("div",{className:"flex justify-center gap-2",children:[Ae.jsx(Hc,{variant:"ghost",size:"sm",onClick:()=>(e=>{_(e),C({name:e.product_name,sku:e.sku,description:e.description||"",brand:e.brand||"",model:e.model||"",price:(e.price_override||e.price).toString(),stock_quantity:e.stock_quantity.toString(),min_stock_threshold:e.min_threshold.toString(),expiry_date:e.expiry_date||""}),w(!0)})(e),children:Ae.jsx(Bn,{className:"h-4 w-4"})}),Ae.jsx(Hc,{variant:"ghost",size:"sm",onClick:()=>(e=>{_(e),S(!0)})(e),className:"text-red-600 hover:text-red-700",children:Ae.jsx(ra,{className:"h-4 w-4"})})]})})]},e.id))})]})})})]}),Ae.jsx(Vp,{open:g,onOpenChange:b,children:Ae.jsxs(Yp,{className:"max-w-2xl",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Add New Product"}),Ae.jsx(Jp,{children:"Add a new product to your branch inventory"})]}),Ae.jsxs("form",{onSubmit:async e=>{var t,r;if(e.preventDefault(),s)try{h(null);const e=sessionStorage.getItem("auth_token");await Cc.post(`${sf}/enhanced-inventory`,{branch_id:s,product_name:O.name,sku:O.sku,description:O.description,brand:O.brand,model:O.model,unit_price:parseFloat(O.price),quantity:parseInt(O.stock_quantity),min_threshold:parseInt(O.min_stock_threshold),expiry_date:O.expiry_date||null},{headers:{Authorization:`Bearer ${e}`}}),p("Product added successfully!"),b(!1),E(),A(),setTimeout(()=>p(null),3e3)}catch(n){console.error("Error adding product:",n),h((null==(r=null==(t=n.response)?void 0:t.data)?void 0:r.message)||"Failed to add product")}else h("Please select a branch first")},children:[Ae.jsxs("div",{className:"grid gap-4 py-4",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"name",children:"Product Name *"}),Ae.jsx(Yc,{id:"name",value:O.name,onChange:e=>C({...O,name:e.target.value}),required:!0})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"sku",children:"SKU *"}),Ae.jsx(Yc,{id:"sku",value:O.sku,onChange:e=>C({...O,sku:e.target.value}),required:!0})]})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"brand",children:"Brand"}),Ae.jsx(Yc,{id:"brand",value:O.brand,onChange:e=>C({...O,brand:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"model",children:"Model"}),Ae.jsx(Yc,{id:"model",value:O.model,onChange:e=>C({...O,model:e.target.value})})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"description",children:"Description"}),Ae.jsx(ph,{id:"description",value:O.description,onChange:e=>C({...O,description:e.target.value}),rows:3})]}),Ae.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"price",children:"Price *"}),Ae.jsx(Yc,{id:"price",type:"number",step:"0.01",min:"0",value:O.price,onChange:e=>C({...O,price:e.target.value}),required:!0})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"stock_quantity",children:"Stock Quantity *"}),Ae.jsx(Yc,{id:"stock_quantity",type:"number",min:"0",value:O.stock_quantity,onChange:e=>C({...O,stock_quantity:e.target.value}),required:!0})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"min_stock_threshold",children:"Min. Threshold"}),Ae.jsx(Yc,{id:"min_stock_threshold",type:"number",min:"0",value:O.min_stock_threshold,onChange:e=>C({...O,min_stock_threshold:e.target.value})})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"expiry_date",children:"Expiry Date (Optional)"}),Ae.jsx(Yc,{id:"expiry_date",type:"date",value:O.expiry_date,onChange:e=>C({...O,expiry_date:e.target.value})})]})]}),Ae.jsxs(Xp,{children:[Ae.jsx(Hc,{type:"button",variant:"outline",onClick:()=>{b(!1),E()},children:"Cancel"}),Ae.jsx(Hc,{type:"submit",children:"Add Product"})]})]})]})}),Ae.jsx(Vp,{open:j,onOpenChange:w,children:Ae.jsxs(Yp,{children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Update Stock"}),Ae.jsxs(Jp,{children:["Update stock quantity and settings for ",null==k?void 0:k.product_name]})]}),Ae.jsxs("form",{onSubmit:async e=>{var t,r,n,a,s;if(e.preventDefault(),k)try{h(null);const e={quantity:parseInt(O.stock_quantity),min_threshold:parseInt(O.min_stock_threshold),brand:O.brand,model:O.model};O.price&&""!==O.price.trim()&&(e.unit_price=parseFloat(O.price)),O.expiry_date&&""!==O.expiry_date.trim()&&(e.expiry_date=O.expiry_date),console.log("Updating inventory with payload:",e);const t=sessionStorage.getItem("auth_token");await Cc.put(`${sf}/enhanced-inventory/${k.id}`,e,{headers:{Authorization:`Bearer ${t}`}}),p("Inventory updated successfully!"),w(!1),_(null),E(),A(),setTimeout(()=>p(null),3e3)}catch(i){console.error("Error updating inventory:",i),console.error("Full error response:",null==(t=i.response)?void 0:t.data);const e=(null==(n=null==(r=i.response)?void 0:r.data)?void 0:n.error)||(null==(s=null==(a=i.response)?void 0:a.data)?void 0:s.message)||"Failed to update inventory";h(e)}},children:[Ae.jsxs("div",{className:"grid gap-4 py-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"edit_stock_quantity",children:"Stock Quantity *"}),Ae.jsx(Yc,{id:"edit_stock_quantity",type:"number",min:"0",value:O.stock_quantity,onChange:e=>C({...O,stock_quantity:e.target.value}),required:!0})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"edit_min_threshold",children:"Min. Threshold"}),Ae.jsx(Yc,{id:"edit_min_threshold",type:"number",min:"0",value:O.min_stock_threshold,onChange:e=>C({...O,min_stock_threshold:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"edit_price",children:"Price Override (Optional)"}),Ae.jsx(Yc,{id:"edit_price",type:"number",step:"0.01",min:"0",value:O.price,onChange:e=>C({...O,price:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"edit_expiry_date",children:"Expiry Date (Optional)"}),Ae.jsx(Yc,{id:"edit_expiry_date",type:"date",value:O.expiry_date,onChange:e=>C({...O,expiry_date:e.target.value})})]})]}),Ae.jsxs(Xp,{children:[Ae.jsx(Hc,{type:"button",variant:"outline",onClick:()=>{w(!1),_(null)},children:"Cancel"}),Ae.jsx(Hc,{type:"submit",children:"Update"})]})]})]})}),Ae.jsx(Vp,{open:N,onOpenChange:S,children:Ae.jsxs(Yp,{children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Confirm Deletion"}),Ae.jsxs(Jp,{children:['Are you sure you want to remove "',null==k?void 0:k.product_name,'" from your branch inventory? This action cannot be undone.']})]}),Ae.jsxs(Xp,{children:[Ae.jsx(Hc,{type:"button",variant:"outline",onClick:()=>{S(!1),_(null)},children:"Cancel"}),Ae.jsx(Hc,{type:"button",variant:"destructive",onClick:async()=>{var e,t;if(k)try{h(null);const e=sessionStorage.getItem("auth_token");await Cc.delete(`${sf}/enhanced-inventory/${k.id}`,{headers:{Authorization:`Bearer ${e}`}}),p("Product removed from inventory successfully!"),S(!1),_(null),A(),setTimeout(()=>p(null),3e3)}catch(r){console.error("Error deleting product:",r),h((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Failed to delete product")}},children:"Delete"})]})]})})]})};var lf="Tabs",[cf,df]=Te(lf,[St]),uf=St(),[hf,mf]=cf(lf),pf=Ct.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:s,orientation:i="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=pt(o),[u,h]=Ie({prop:n,onChange:a,defaultProp:s??"",caller:lf});return Ae.jsx(hf,{scope:r,baseId:ht(),value:u,onValueChange:h,orientation:i,dir:d,activationMode:l,children:Ae.jsx(Ee.div,{dir:d,"data-orientation":i,...c,ref:t})})});pf.displayName=lf;var ff="TabsList",xf=Ct.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,s=mf(ff,r),i=uf(r);return Ae.jsx(kt,{asChild:!0,...i,orientation:s.orientation,dir:s.dir,loop:n,children:Ae.jsx(Ee.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})});xf.displayName=ff;var yf="TabsTrigger",vf=Ct.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...s}=e,i=mf(yf,r),o=uf(r),l=jf(i.baseId,n),c=wf(i.baseId,n),d=n===i.value;return Ae.jsx(_t,{asChild:!0,...o,focusable:!a,active:d,children:Ae.jsx(Ee.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...s,ref:t,onMouseDown:Le(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(n)}),onKeyDown:Le(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(n)}),onFocus:Le(e.onFocus,()=>{const e="manual"!==i.activationMode;d||a||!e||i.onValueChange(n)})})})});vf.displayName=yf;var gf="TabsContent",bf=Ct.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:s,...i}=e,o=mf(gf,r),l=jf(o.baseId,n),c=wf(o.baseId,n),d=n===o.value,u=Ct.useRef(d);return Ct.useEffect(()=>{const e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),Ae.jsx(Re,{present:a||d,children:({present:r})=>Ae.jsx(Ee.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!r,id:c,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:r&&s})})});function jf(e,t){return`${e}-trigger-${t}`}function wf(e,t){return`${e}-content-${t}`}bf.displayName=gf;var Nf=xf,Sf=vf,kf=bf;function _f(...e){return ss(Vr(e))}const Of=pf,Cf=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(Nf,{ref:r,className:_f("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Cf.displayName=Nf.displayName;const Af=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(Sf,{ref:r,className:_f("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Af.displayName=Sf.displayName;const Ef=Ct.forwardRef(({className:e,...t},r)=>Ae.jsx(kf,{ref:r,className:_f("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ef.displayName=kf.displayName;const Pf="http://192.168.100.6:8000/api",Tf=()=>{Rc();const[e,t]=Ct.useState([]),[r,n]=Ct.useState([]),[a,s]=Ct.useState([]),[i,o]=Ct.useState(!0),[l,c]=Ct.useState(null),[d,u]=Ct.useState(""),[h,m]=Ct.useState("all"),[p,f]=Ct.useState("all"),[x,y]=Ct.useState("all"),[v,g]=Ct.useState("inventory");Ct.useEffect(()=>{b(),j(),w();const e=setInterval(()=>{b()},3e4);return()=>clearInterval(e)},[d,h,p,x]);const b=async()=>{var e,r,n,a,s;try{o(!0),c(null);const a=e=>({in_stock:"In Stock",low_stock:"Low Stock",out_of_stock:"Out of Stock"}[e]||e),s=new URLSearchParams;if(d&&s.append("search",d),"all"!==h){const e=a(h);s.append("status",e)}"all"!==p&&s.append("branch_id",p),"all"!==x&&s.append("manufacturer_id",x),console.log("AdminCentralInventory: Loading with filters:",{searchTerm:d,statusFilter:h,statusFilterConverted:"all"!==h?a(h):"all",branchFilter:p,manufacturerFilter:x});const i=await Cc.get(`${Pf}/inventory/enhanced?${s}`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}});console.log("AdminCentralInventory: Loaded",null==(e=i.data.inventories)?void 0:e.length,"items"),console.log("AdminCentralInventory: Unitop items:",null==(n=null==(r=i.data.inventories)?void 0:r.filter(e=>"2"===e.branch_id||2===e.branch_id))?void 0:n.length),t(i.data.inventories||[])}catch(i){console.error("Error loading inventory:",i),c((null==(s=null==(a=i.response)?void 0:a.data)?void 0:s.message)||"Failed to load inventory")}finally{o(!1)}},j=async()=>{try{const e=await Cc.get(`${Pf}/manufacturers-directory`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}});n(e.data.manufacturers||[])}catch(e){console.error("Error loading manufacturers:",e)}},w=async()=>{try{const e=await Cc.get(`${Pf}/branches`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}});s(e.data.branches||[])}catch(e){console.error("Error loading branches:",e)}},N=e=>{switch(null==e?void 0:e.toLowerCase().replace(/\s+/g,"_")){case"in_stock":case"in stock":return"bg-green-100 text-green-800";case"low_stock":case"low stock":return"bg-yellow-100 text-yellow-800";case"out_of_stock":case"out of stock":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=e.filter(e=>{var t,r,n;const a=(null==(t=e.product)?void 0:t.name)||"",s=(null==(r=e.product)?void 0:r.sku)||"",i=a.toLowerCase().includes(d.toLowerCase())||s.toLowerCase().includes(d.toLowerCase()),o=null==(n=e.status)?void 0:n.toLowerCase().replace(/\s+/g,"_"),l=h.toLowerCase().replace(/\s+/g,"_"),c="all"===h||o===l,u=String(e.branch_id),m=String(p),f="all"===p||u===m,y="all"===x||e.manufacturer_id===x;return i&&c&&f&&y});console.log("AdminCentralInventory - Filter Results:",{totalItems:e.length,filteredItems:S.length,statusFilter:h,branchFilter:p,searchTerm:d,uniqueStatuses:[...new Set(e.map(e=>e.status))]});const k=e=>null==e?void 0:e.toLowerCase().replace(/\s+/g,"_"),_=S.filter(e=>"in_stock"===k(e.status)),O=S.filter(e=>"low_stock"===k(e.status)),C=S.filter(e=>"out_of_stock"===k(e.status)),A=r.reduce((e,t)=>(e[t.product_line]||(e[t.product_line]=[]),e[t.product_line].push(t),e),{}),E=a.map(t=>{const r=e.filter(e=>e.branch_id===t.id);return{...t,total_items:r.length,in_stock:r.filter(e=>"in_stock"===k(e.status)).length,low_stock:r.filter(e=>"low_stock"===k(e.status)).length,out_of_stock:r.filter(e=>"out_of_stock"===k(e.status)).length}});return Ae.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:Ae.jsxs("div",{className:"p-6 space-y-6",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center gap-4",children:[Ae.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:Ae.jsx(Ln,{className:"w-6 h-6 text-white"})}),Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Central Inventory"}),Ae.jsx("p",{className:"text-gray-600",children:"Monitor inventory across all branches"})]})]}),Ae.jsxs(Hc,{onClick:b,disabled:i,variant:"outline",className:"flex items-center gap-2",children:[Ae.jsx(Yn,{className:"h-4 w-4"}),"Refresh"]})]}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Total Items"}),Ae.jsx(Ln,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:S.length}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all branches"})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"In Stock"}),Ae.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold text-green-600",children:_.length}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Available items"})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Low Stock"}),Ae.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:O.length}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Need restocking"})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Out of Stock"}),Ae.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold text-red-600",children:C.length}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Immediate attention needed"})]})]})]}),Ae.jsxs(Of,{value:v,onValueChange:g,className:"space-y-4",children:[Ae.jsxs(Cf,{className:"grid w-full grid-cols-2",children:[Ae.jsx(Af,{value:"inventory",children:"Inventory Overview"}),Ae.jsx(Af,{value:"manufacturers",children:"Manufacturer Directory"})]}),Ae.jsxs(Ef,{value:"inventory",className:"space-y-4",children:[Ae.jsx(td,{children:Ae.jsx(sd,{className:"p-4",children:Ae.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[Ae.jsxs("div",{className:"flex-1 min-w-[200px]",children:[Ae.jsx(Zc,{htmlFor:"search",children:"Search Items"}),Ae.jsxs("div",{className:"relative",children:[Ae.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),Ae.jsx(Yc,{id:"search",placeholder:"Search by name or SKU...",value:d,onChange:e=>u(e.target.value),className:"pl-10"})]})]}),Ae.jsxs("div",{className:"min-w-[150px]",children:[Ae.jsx(Zc,{htmlFor:"status",children:"Status"}),Ae.jsxs(Tm,{value:h,onValueChange:m,children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Filter by status"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"all",children:"All Status"}),Ae.jsx(Lm,{value:"in_stock",children:"In Stock"}),Ae.jsx(Lm,{value:"low_stock",children:"Low Stock"}),Ae.jsx(Lm,{value:"out_of_stock",children:"Out of Stock"})]})]})]}),Ae.jsxs("div",{className:"min-w-[150px]",children:[Ae.jsx(Zc,{htmlFor:"branch",children:"Branch"}),Ae.jsxs(Tm,{value:p,onValueChange:f,children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Filter by branch"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"all",children:"All Branches"}),a.filter(e=>e.id&&""!==String(e.id).trim()).map(e=>Ae.jsx(Lm,{value:String(e.id),children:e.name},e.id))]})]})]}),Ae.jsxs("div",{className:"min-w-[150px]",children:[Ae.jsx(Zc,{htmlFor:"manufacturer",children:"Manufacturer"}),Ae.jsxs(Tm,{value:x,onValueChange:y,children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Filter by manufacturer"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"all",children:"All Manufacturers"}),r.filter(e=>e.id&&""!==String(e.id).trim()).map(e=>Ae.jsx(Lm,{value:String(e.id),children:e.name},e.id))]})]})]}),Ae.jsxs(Hc,{onClick:b,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[Ae.jsx(kn,{className:"h-4 w-4"}),"Apply Filters"]})]})})}),Ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(e=>Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center gap-2",children:[Ae.jsx(on,{className:"h-5 w-5"}),e.name]}),Ae.jsx(ad,{children:e.code})]}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{className:"text-sm text-gray-600",children:"Total Items"}),Ae.jsx("span",{className:"font-medium",children:e.total_items})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{className:"text-sm text-gray-600",children:"In Stock"}),Ae.jsx("span",{className:"font-medium text-green-600",children:e.in_stock})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{className:"text-sm text-gray-600",children:"Low Stock"}),Ae.jsx("span",{className:"font-medium text-yellow-600",children:e.low_stock})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{className:"text-sm text-gray-600",children:"Out of Stock"}),Ae.jsx("span",{className:"font-medium text-red-600",children:e.out_of_stock})]})]})})]},e.id))}),Ae.jsxs("div",{className:"space-y-4",children:[S.map(e=>{var t,r,n;return Ae.jsx(td,{children:Ae.jsx(sd,{className:"p-4",children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex-1",children:[Ae.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ae.jsx("h3",{className:"font-medium",children:(null==(t=e.product)?void 0:t.name)||"Unknown Product"}),Ae.jsx(Yd,{className:N(e.status),children:e.status}),Ae.jsx(Yd,{variant:"outline",children:(null==(r=e.product)?void 0:r.sku)||"N/A"}),Ae.jsx(Yd,{variant:"secondary",children:(null==(n=e.branch)?void 0:n.name)||"Unknown Branch"})]}),Ae.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[Ae.jsxs("div",{className:"flex items-center gap-1",children:[Ae.jsx(Ln,{className:"h-4 w-4"}),Ae.jsxs("span",{className:"font-semibold",children:[e.stock_quantity||0," units"]})]}),(e.reserved_quantity||0)>0&&Ae.jsx("div",{className:"flex items-center gap-1 text-orange-600",children:Ae.jsxs("span",{children:["Reserved: ",e.reserved_quantity]})}),void 0!==e.available_quantity&&Ae.jsx("div",{className:"flex items-center gap-1 text-green-600",children:Ae.jsxs("span",{children:["Available: ",e.available_quantity]})}),Ae.jsxs("div",{className:"flex items-center gap-1",children:[Ae.jsx(Jr,{className:"h-4 w-4"}),Ae.jsxs("span",{children:["Min: ",e.min_stock_threshold||0]})]}),e.price_override&&Ae.jsx("div",{className:"flex items-center gap-1",children:Ae.jsxs("span",{children:["₱",e.price_override]})}),e.expiry_date&&Ae.jsx("div",{className:"flex items-center gap-1",children:Ae.jsxs("span",{children:["Expires: ",new Date(e.expiry_date).toLocaleDateString()]})})]}),e.manufacturer&&Ae.jsx("div",{className:"mt-2",children:Ae.jsxs(Yd,{variant:"outline",className:"text-xs",children:[Ae.jsx(on,{className:"h-3 w-3 mr-1"}),e.manufacturer.name," - ",e.manufacturer.product_line||"N/A"]})})]}),Ae.jsx("div",{className:"flex items-center gap-2",children:Ae.jsxs(Hc,{variant:"outline",size:"sm",children:[Ae.jsx(wn,{className:"h-4 w-4 mr-1"}),"View Details"]})})]})})},e.id)}),0===S.length&&Ae.jsx(td,{children:Ae.jsxs(sd,{className:"p-8 text-center",children:[Ae.jsx(Ln,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Inventory Items"}),Ae.jsx("p",{className:"text-gray-600",children:"No inventory items found matching your criteria."})]})})]})]}),Ae.jsx(Ef,{value:"manufacturers",className:"space-y-4",children:Ae.jsxs("div",{className:"space-y-6",children:[Object.entries(A).map(([e,t])=>Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center gap-2",children:[Ae.jsx(nn,{className:"h-5 w-5"}),e]}),Ae.jsxs(ad,{children:[t.length," manufacturer",1!==t.length?"s":""," in this product line"]})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>Ae.jsx(td,{className:"border border-gray-200",children:Ae.jsx(sd,{className:"p-4",children:Ae.jsxs("div",{className:"space-y-3",children:[Ae.jsxs("div",{children:[Ae.jsx("h4",{className:"font-medium text-lg",children:e.name}),Ae.jsx("p",{className:"text-sm text-gray-600",children:e.product_line})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ae.jsx(da,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{children:e.contact_person})]}),Ae.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ae.jsx(qn,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{children:e.phone})]}),Ae.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ae.jsx(Dn,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{children:e.email})]}),e.address&&Ae.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ae.jsx(In,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{className:"text-xs",children:e.address})]}),e.website&&Ae.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ae.jsx(_n,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs",children:e.website})]})]})]})})},e.id))})})]},e)),0===r.length&&Ae.jsx(td,{children:Ae.jsxs(sd,{className:"p-8 text-center",children:[Ae.jsx(on,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Manufacturers"}),Ae.jsx("p",{className:"text-gray-600",children:"No manufacturers have been added yet."})]})})]})})]})]})})};var Mf="Collapsible",[Df,If]=Te(Mf),[Rf,Ff]=Df(Mf),Lf=Ct.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:s,onOpenChange:i,...o}=e,[l,c]=Ie({prop:n,defaultProp:a??!1,onChange:i,caller:Mf});return Ae.jsx(Rf,{scope:r,disabled:s,contentId:ht(),open:l,onOpenToggle:Ct.useCallback(()=>c(e=>!e),[c]),children:Ae.jsx(Ee.div,{"data-state":Vf(l),"data-disabled":s?"":void 0,...o,ref:t})})});Lf.displayName=Mf;var Bf="CollapsibleTrigger",qf=Ct.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,a=Ff(Bf,r);return Ae.jsx(Ee.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Vf(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:t,onClick:Le(e.onClick,a.onOpenToggle)})});qf.displayName=Bf;var zf="CollapsibleContent",$f=Ct.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Ff(zf,e.__scopeCollapsible);return Ae.jsx(Re,{present:r||a.open,children:({present:e})=>Ae.jsx(Uf,{...n,ref:t,present:e})})});$f.displayName=zf;var Uf=Ct.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:a,...s}=e,i=Ff(zf,r),[o,l]=Ct.useState(n),c=Ct.useRef(null),d=Me(t,c),u=Ct.useRef(0),h=u.current,m=Ct.useRef(0),p=m.current,f=i.open||o,x=Ct.useRef(f),y=Ct.useRef(void 0);return Ct.useEffect(()=>{const e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),ze(()=>{const e=c.current;if(e){y.current=y.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";const t=e.getBoundingClientRect();u.current=t.height,m.current=t.width,x.current||(e.style.transitionDuration=y.current.transitionDuration,e.style.animationName=y.current.animationName),l(n)}},[i.open,n]),Ae.jsx(Ee.div,{"data-state":Vf(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!f,...s,ref:d,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...e.style},children:f&&a})});function Vf(e){return e?"open":"closed"}const Wf=Lf,Hf=qf,Kf=$f,Yf=()=>{const{user:e}=Rc(),[t,r]=Ct.useState([]),[n,a]=Ct.useState(null),[s,i]=Ct.useState(!0),[o,l]=Ct.useState(null),[c,d]=Ct.useState(""),[u,h]=Ct.useState(new Set),m=Ct.useCallback(async()=>{var e,t;try{i(!0),l(null);const e=sessionStorage.getItem("auth_token"),t=await Cc.get("http://127.0.0.1:8000/api/inventory/enhanced",{headers:{Authorization:`Bearer ${e}`}});r(t.data.products||[]),a(t.data.summary||null)}catch(n){console.error("Error loading consolidated inventory:",n),l((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to load consolidated inventory")}finally{i(!1)}},[]);Ct.useEffect(()=>{if("admin"!==(null==e?void 0:e.role))return void l("Only administrators can access consolidated inventory view");m();const t=setInterval(m,3e4);return()=>clearInterval(t)},[m,e]);const p=Ct.useMemo(()=>t.filter(e=>{var t,r;return""===c||e.name.toLowerCase().includes(c.toLowerCase())||e.sku.toLowerCase().includes(c.toLowerCase())||(null==(t=e.brand)?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null==(r=e.model)?void 0:r.toLowerCase().includes(c.toLowerCase()))}),[t,c]);return s?Ae.jsxs("div",{className:"flex items-center justify-center h-96",children:[Ae.jsx(Vn,{className:"h-8 w-8 animate-spin text-primary"}),Ae.jsx("span",{className:"ml-2",children:"Loading consolidated inventory..."})]}):"admin"!==(null==e?void 0:e.role)?Ae.jsxs(tf,{variant:"destructive",children:[Ae.jsx(Jr,{className:"h-4 w-4"}),Ae.jsx(rf,{children:"Unauthorized. Only administrators can access this page."})]}):Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-3xl font-bold",children:"Consolidated Inventory"}),Ae.jsx("p",{className:"text-muted-foreground mt-1",children:"System-wide inventory across all branches"})]}),Ae.jsxs(Hc,{onClick:m,variant:"outline",className:"gap-2",children:[Ae.jsx(Vn,{className:"h-4 w-4"}),"Refresh"]})]}),o&&Ae.jsxs(tf,{variant:"destructive",children:[Ae.jsx(Jr,{className:"h-4 w-4"}),Ae.jsx(rf,{children:o})]}),n&&Ae.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Total Products"}),Ae.jsx(Ln,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"text-2xl font-bold",children:n.total_products})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Total Stock Value"}),Ae.jsx(gn,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"text-2xl font-bold",children:["₱",Number(n.total_stock_value||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Low Stock Products"}),Ae.jsx(Qr,{className:"h-4 w-4 text-yellow-600"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:n.low_stock_count})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Out of Stock"}),Ae.jsx(na,{className:"h-4 w-4 text-red-600"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.out_of_stock_count})})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Search Products"})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"relative",children:[Ae.jsx(Yn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),Ae.jsx(Yc,{placeholder:"Search by name, SKU, brand, or model...",value:c,onChange:e=>d(e.target.value),className:"pl-8"})]})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{children:["Products (",p.length,")"]}),Ae.jsx(ad,{children:"Click on a product to view branch-specific availability"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"space-y-2",children:0===p.length?Ae.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No products found"}):p.map(e=>{const t=(r=e.available_stock)<=0?{label:"Out of Stock",color:"bg-red-500"}:r<=10?{label:"Low Stock",color:"bg-yellow-500"}:{label:"In Stock",color:"bg-green-500"};var r;const n=u.has(e.id);return Ae.jsx(Wf,{open:n,onOpenChange:()=>{return t=e.id,void h(e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r});var t},children:Ae.jsxs(td,{children:[Ae.jsx(Hf,{className:"w-full",children:Ae.jsx(rd,{className:"hover:bg-muted/50 transition-colors",children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center gap-4",children:[e.image&&Ae.jsx("img",{src:e.image,alt:e.name,className:"w-12 h-12 object-cover rounded"}),Ae.jsxs("div",{className:"text-left",children:[Ae.jsx("div",{className:"font-semibold",children:e.name}),Ae.jsxs("div",{className:"text-sm text-muted-foreground",children:["SKU: ",e.sku,e.brand&&` • ${e.brand}`,e.model&&` - ${e.model}`]})]})]}),Ae.jsxs("div",{className:"flex items-center gap-6",children:[Ae.jsxs("div",{className:"text-right",children:[Ae.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Stock"}),Ae.jsx("div",{className:"font-semibold",children:e.total_stock})]}),Ae.jsxs("div",{className:"text-right",children:[Ae.jsx("div",{className:"text-sm text-muted-foreground",children:"Available"}),Ae.jsx("div",{className:"font-semibold text-green-600",children:e.available_stock})]}),Ae.jsxs("div",{className:"text-right",children:[Ae.jsx("div",{className:"text-sm text-muted-foreground",children:"Branches"}),Ae.jsxs("div",{className:"font-semibold flex items-center gap-1",children:[Ae.jsx(on,{className:"h-4 w-4"}),e.branches_count]})]}),Ae.jsxs("div",{className:"text-right",children:[Ae.jsx("div",{className:"text-sm text-muted-foreground",children:"Price"}),Ae.jsxs("div",{className:"font-semibold",children:["₱",Number(e.price||0).toFixed(2)]})]}),Ae.jsx(Yd,{className:t.color,children:t.label}),Ae.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]})]})})}),Ae.jsx(Kf,{children:Ae.jsx(sd,{children:Ae.jsxs("div",{className:"pt-4 border-t",children:[Ae.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[Ae.jsx(on,{className:"h-4 w-4"}),"Branch Availability"]}),Ae.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:e.branch_availability.map(e=>Ae.jsx(td,{className:"border-2",children:Ae.jsx(sd,{className:"p-4",children:Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsx("div",{className:"font-semibold",children:e.branch_name}),Ae.jsx(Yd,{variant:"outline",children:e.branch_code})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[Ae.jsxs("div",{children:[Ae.jsx("div",{className:"text-muted-foreground",children:"Stock"}),Ae.jsx("div",{className:"font-medium",children:e.stock_quantity})]}),Ae.jsxs("div",{children:[Ae.jsx("div",{className:"text-muted-foreground",children:"Available"}),Ae.jsx("div",{className:"font-medium text-green-600",children:e.available_quantity})]}),Ae.jsxs("div",{children:[Ae.jsx("div",{className:"text-muted-foreground",children:"Reserved"}),Ae.jsx("div",{className:"font-medium text-blue-600",children:e.reserved_quantity})]}),Ae.jsxs("div",{children:[Ae.jsx("div",{className:"text-muted-foreground",children:"Status"}),Ae.jsx(Yd,{className:e.status.toLowerCase().includes("out")?"bg-red-500":e.status.toLowerCase().includes("low")?"bg-yellow-500":"bg-green-500",variant:"secondary",children:e.status})]})]}),e.price_override&&Ae.jsxs("div",{className:"text-sm pt-2 border-t",children:[Ae.jsx("div",{className:"text-muted-foreground",children:"Branch Price"}),Ae.jsxs("div",{className:"font-medium",children:["₱",Number(e.price_override||0).toFixed(2)]})]})]})})},e.branch_id))})]})})})]})},e.id)})})})]})]})},Gf=()=>{const{toast:e}=Jt(),{user:t}=Rc(),{notifications:r,unreadCount:n,loading:a,markNotificationAsRead:s,markAllNotificationsAsRead:i,refreshNotifications:o}=zc();Ct.useEffect(()=>{o()},[o]);const l="customer"===(null==t?void 0:t.role)?r.filter(e=>["appointment","prescription","reminder"].includes(e.type||"")):r,c=e=>{switch(e){case"appointment":return"bg-blue-100 text-blue-800";case"prescription":return"bg-purple-100 text-purple-800";case"inventory":return"bg-orange-100 text-orange-800";case"system":default:return"bg-slate-100 text-slate-800";case"reminder":return"bg-green-100 text-green-800"}};l.filter(e=>"unread"===e.status).length;const d=({notification:t})=>{const r=(e=>{switch(e){case"appointment":return ln;case"prescription":return wn;case"inventory":return Ln;default:return an}})(t.type);return Ae.jsx(td,{className:"transition-all duration-200 hover:shadow-md "+("unread"===t.status?"border-l-4 border-l-primary bg-primary/5":""),children:Ae.jsx(sd,{className:"p-4",children:Ae.jsxs("div",{className:"flex items-start justify-between",children:[Ae.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[Ae.jsx("div",{className:`p-2 rounded-full ${c(t.type)}`,children:Ae.jsx(r,{className:"h-4 w-4"})}),Ae.jsxs("div",{className:"flex-1 space-y-2",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx("h3",{className:"font-medium "+("unread"===t.status?"font-semibold":""),children:t.title}),Ae.jsx(Yd,{variant:"unread"===t.status?"default":"secondary",children:t.status})]}),Ae.jsx("p",{className:"text-sm text-muted-foreground",children:t.message}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:rh(new Date(t.created_at),{addSuffix:!0})})]})]}),Ae.jsx("div",{className:"flex items-center space-x-2",children:"unread"===t.status&&Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(async t=>{try{await s(t),e({title:"Notification marked as read",description:"The notification has been updated."})}catch(r){e({title:"Error",description:"Failed to mark notification as read.",variant:"destructive"})}})(t.id),children:Ae.jsx(dn,{className:"h-4 w-4"})})})]})})})};return Ae.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[Ae.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(an,{className:"h-6 w-6 text-primary"}),Ae.jsx("h1",{className:"text-2xl font-bold",children:"Notification Center"}),n>0&&Ae.jsxs(Yd,{className:"bg-red-500 text-white",children:[n," unread"]})]}),Ae.jsx("div",{className:"flex space-x-2",children:n>0&&Ae.jsx(Hc,{onClick:async()=>{try{await i(),e({title:"All notifications marked as read",description:"Your notification list has been updated."})}catch(t){e({title:"Error",description:"Failed to mark all notifications as read.",variant:"destructive"})}},children:"Mark All as Read"})})]}),a?Ae.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ae.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),Ae.jsx("span",{className:"ml-2",children:"Loading notifications..."})]}):0===l.length?Ae.jsx(td,{children:Ae.jsxs(sd,{className:"p-8 text-center",children:[Ae.jsx(an,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications yet"}),Ae.jsx("p",{className:"text-gray-600",children:"You'll see notifications here when they arrive."})]})}):Ae.jsxs(Of,{defaultValue:"all",className:"w-full",children:[Ae.jsxs(Cf,{className:"grid w-full "+("customer"===(null==t?void 0:t.role)?"grid-cols-4":"grid-cols-6"),children:[Ae.jsxs(Af,{value:"all",children:["All (",l.length,")"]}),Ae.jsxs(Af,{value:"unread",children:["Unread (",n,")"]}),Ae.jsxs(Af,{value:"appointment",children:["Appointments (",l.filter(e=>"appointment"===e.type).length,")"]}),Ae.jsxs(Af,{value:"prescription",children:["Prescriptions (",l.filter(e=>"prescription"===e.type).length,")"]}),"customer"!==(null==t?void 0:t.role)&&Ae.jsxs(Ae.Fragment,{children:[Ae.jsxs(Af,{value:"inventory",children:["Inventory (",l.filter(e=>"inventory"===e.type).length,")"]}),Ae.jsxs(Af,{value:"system",children:["System (",l.filter(e=>"system"===e.type).length,")"]})]})]}),Ae.jsx(Ef,{value:"all",className:"space-y-4",children:l.map(e=>Ae.jsx(d,{notification:e},e.id))}),Ae.jsx(Ef,{value:"unread",className:"space-y-4",children:l.filter(e=>"unread"===e.status).map(e=>Ae.jsx(d,{notification:e},e.id))}),Ae.jsx(Ef,{value:"appointment",className:"space-y-4",children:l.filter(e=>"appointment"===e.type).map(e=>Ae.jsx(d,{notification:e},e.id))}),Ae.jsx(Ef,{value:"prescription",className:"space-y-4",children:l.filter(e=>"prescription"===e.type).map(e=>Ae.jsx(d,{notification:e},e.id))}),"customer"!==(null==t?void 0:t.role)&&Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(Ef,{value:"inventory",className:"space-y-4",children:l.filter(e=>"inventory"===e.type).map(e=>Ae.jsx(d,{notification:e},e.id))}),Ae.jsx(Ef,{value:"system",className:"space-y-4",children:l.filter(e=>"system"===e.type).map(e=>Ae.jsx(d,{notification:e},e.id))})]})]})]})},Xf=Cc.create({baseURL:"http://192.168.100.6:8000/api",headers:{"Content-Type":"application/json",Accept:"application/json"}});Xf.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const Qf=()=>{const{toast:e}=Jt(),[t,r]=Ct.useState(""),[n,a]=Ct.useState(null),[s,i]=Ct.useState(!1),[o,l]=Ct.useState([]),[c,d]=Ct.useState(!0),[u,h]=Ct.useState({current_page:1,last_page:1,per_page:15,total:0}),[m,p]=Ct.useState(!1),[f,x]=Ct.useState({});Ct.useEffect(()=>{y()},[]),Ct.useEffect(()=>{const e=setTimeout(()=>{y()},500);return()=>clearTimeout(e)},[t]);const y=async()=>{try{d(!0);const e=await(async e=>{const t=sessionStorage.getItem("auth_token");if(console.log("Patient API: Token from sessionStorage:",t?"Present":"Missing"),!t)throw new Error("No authentication token found");return(await Xf.get("/patients",{params:e})).data})({search:t||void 0,page:u.current_page,per_page:u.per_page});l(e.data),h(e.pagination)}catch(r){console.error("Error fetching patients:",r),e({title:"Error",description:r.message||"Failed to fetch patients",variant:"destructive"})}finally{d(!1)}},v=async t=>{try{d(!0);const e=await(async e=>{const t=sessionStorage.getItem("auth_token");if(console.log("Patient API: Token from sessionStorage:",t?"Present":"Missing"),!t)throw new Error("No authentication token found");return(await Xf.get(`/patients/${e}`)).data})(t.id);a(e.patient)}catch(r){console.error("Error fetching patient details:",r),e({title:"Error",description:r.message||"Failed to fetch patient details",variant:"destructive"})}finally{d(!1)}},g=e=>{const t=new Date,r=new Date(e);let n=t.getFullYear()-r.getFullYear();const a=t.getMonth()-r.getMonth();return(a<0||0===a&&t.getDate()<r.getDate())&&n--,n},b=({patient:e})=>Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{className:"flex items-center space-x-4",children:[Ae.jsxs(Rd,{className:"h-16 w-16",children:[Ae.jsx(Fd,{src:e.avatar,alt:e.name}),Ae.jsx(Ld,{className:"text-lg",children:e.name.split(" ").map(e=>e[0]).join("")})]}),Ae.jsxs("div",{children:[Ae.jsx("h2",{className:"text-2xl font-bold",children:e.name}),Ae.jsxs("p",{className:"text-muted-foreground",children:["Patient ID: ",e.id]}),Ae.jsxs("p",{className:"text-sm text-muted-foreground",children:["Age: ",e.date_of_birth?g(e.date_of_birth):"Not provided"," years old"]})]})]}),Ae.jsxs(Of,{defaultValue:"overview",className:"w-full",children:[Ae.jsxs(Cf,{className:"grid w-full grid-cols-4",children:[Ae.jsx(Af,{value:"overview",children:"Overview"}),Ae.jsx(Af,{value:"medical",children:"Medical History"}),Ae.jsx(Af,{value:"appointments",children:"Appointments"}),Ae.jsx(Af,{value:"prescriptions",children:"Prescriptions"})]}),Ae.jsx(Ef,{value:"overview",className:"space-y-4",children:Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{className:"text-sm",children:"Contact Information"})}),Ae.jsxs(sd,{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(Dn,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{className:"text-sm",children:e.email})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(qn,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{className:"text-sm",children:e.phone})]}),Ae.jsxs("div",{className:"text-sm",children:[Ae.jsx("p",{className:"font-medium",children:"Address:"}),Ae.jsx("p",{className:"text-muted-foreground",children:e.address})]})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{className:"text-sm",children:"Emergency Contact"})}),Ae.jsxs(sd,{className:"space-y-2",children:[Ae.jsx("p",{className:"font-medium text-sm",children:e.emergencyContact}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(qn,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{className:"text-sm",children:e.emergencyPhone})]})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{className:"text-sm",children:"Insurance Information"})}),Ae.jsxs(sd,{className:"space-y-2",children:[Ae.jsx("p",{className:"font-medium text-sm",children:e.insurance_provider}),Ae.jsxs("p",{className:"text-sm text-muted-foreground",children:["Policy: ",e.insurance_policy]})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{className:"text-sm",children:"Visit Statistics"})}),Ae.jsxs(sd,{className:"space-y-2",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium",children:"Total Visits"}),Ae.jsx("p",{className:"text-2xl font-bold",children:e.statistics.total_appointments})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium",children:"Prescriptions"}),Ae.jsx("p",{className:"text-2xl font-bold",children:e.statistics.total_prescriptions})]})]}),Ae.jsxs("div",{className:"text-sm",children:[Ae.jsx("p",{className:"font-medium",children:"Last Visit:"}),Ae.jsx("p",{className:"text-muted-foreground",children:e.statistics.last_visit||"No visits"})]}),e.statistics.next_appointment&&Ae.jsxs("div",{className:"text-sm",children:[Ae.jsx("p",{className:"font-medium",children:"Next Appointment:"}),Ae.jsx("p",{className:"text-muted-foreground",children:e.statistics.next_appointment})]})]})]})]})}),Ae.jsx(Ef,{value:"medical",className:"space-y-4",children:Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{className:"text-sm",children:"Medical History"})}),Ae.jsx(sd,{children:Ae.jsx("ul",{className:"space-y-2",children:e.medical_history.map((e,t)=>Ae.jsxs("li",{className:"flex items-center space-x-2",children:[Ae.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),Ae.jsx("span",{className:"text-sm",children:e})]},t))})})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{className:"text-sm",children:"Allergies"})}),Ae.jsx(sd,{children:Ae.jsx("ul",{className:"space-y-2",children:e.allergies.map((e,t)=>Ae.jsxs("li",{className:"flex items-center space-x-2",children:[Ae.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),Ae.jsx("span",{className:"text-sm",children:e})]},t))})})]})]})}),Ae.jsx(Ef,{value:"appointments",children:Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{className:"text-sm",children:"Appointment History"})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"space-y-4",children:[e.appointments.map(e=>{var t;return Ae.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsx(ln,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium",children:e.type}),Ae.jsx("p",{className:"text-sm text-muted-foreground",children:(null==(t=e.optometrist)?void 0:t.name)||"No optometrist assigned"}),e.notes&&Ae.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.notes})]})]}),Ae.jsxs("div",{className:"text-right",children:[Ae.jsx("p",{className:"text-sm font-medium",children:e.date}),Ae.jsx(Yd,{className:"completed"===e.status?"bg-green-500 text-white":"scheduled"===e.status?"bg-blue-500 text-white":"cancelled"===e.status?"bg-red-500 text-white":"bg-gray-500 text-white",children:e.status})]})]},e.id)}),0===e.appointments.length&&Ae.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No appointments found"})]})})]})}),Ae.jsx(Ef,{value:"prescriptions",children:Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{className:"text-sm",children:"Prescription History"})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"space-y-4",children:[e.prescriptions.map(e=>{var t;return Ae.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium",children:e.prescription_number}),Ae.jsx("p",{className:"text-sm text-muted-foreground",children:(null==(t=e.optometrist)?void 0:t.name)||"No optometrist assigned"}),e.recommendations&&Ae.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.recommendations})]})]}),Ae.jsxs("div",{className:"text-right",children:[Ae.jsx("p",{className:"text-sm font-medium",children:e.issue_date}),Ae.jsx(Yd,{className:"active"===e.status?"bg-green-500 text-white":"expired"===e.status?"bg-red-500 text-white":"cancelled"===e.status?"bg-gray-500 text-white":"bg-yellow-500 text-white",children:e.status})]})]},e.id)}),0===e.prescriptions.length&&Ae.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No prescriptions found"})]})})]})})]})]});return Ae.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[Ae.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(da,{className:"h-6 w-6 text-staff"}),Ae.jsx("h1",{className:"text-2xl font-bold",children:"Patient Management"})]}),Ae.jsxs(Vp,{open:s,onOpenChange:i,children:[Ae.jsx(Wp,{asChild:!0,children:Ae.jsxs(Hc,{variant:"staff",children:[Ae.jsx($n,{className:"mr-2 h-4 w-4"}),"Add Patient"]})}),Ae.jsxs(Yp,{className:"max-w-2xl",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Add New Patient"}),Ae.jsx(Jp,{children:"Enter patient information to create a new record."})]}),Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"firstName",children:"First Name"}),Ae.jsx(Yc,{id:"firstName",placeholder:"First name"})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"lastName",children:"Last Name"}),Ae.jsx(Yc,{id:"lastName",placeholder:"Last name"})]})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"email",children:"Email"}),Ae.jsx(Yc,{id:"email",type:"email",placeholder:"Email address"})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"phone",children:"Phone"}),Ae.jsx(Yc,{id:"phone",placeholder:"Phone number"})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"dateOfBirth",children:"Date of Birth"}),Ae.jsx(Yc,{id:"dateOfBirth",type:"date"})]}),Ae.jsx(Hc,{className:"w-full",variant:"staff",children:"Add Patient"})]})]})]})]}),n?Ae.jsxs("div",{children:[Ae.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ae.jsx(Hc,{variant:"outline",onClick:()=>a(null),children:"← Back to Patient List"}),Ae.jsxs(Hc,{variant:"outline",onClick:()=>{return x({name:(e=n).name,email:e.email,phone:e.phone,date_of_birth:e.date_of_birth,address:e.address,emergency_contact:e.emergency_contact,emergency_phone:e.emergency_phone,insurance_provider:e.insurance_provider,insurance_policy:e.insurance_policy,medical_history:e.medical_history,allergies:e.allergies}),void p(!0);var e},children:[Ae.jsx(Bn,{className:"h-4 w-4 mr-2"}),"Edit Patient"]})]}),Ae.jsx(b,{patient:n})]}):Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(td,{className:"mb-6",children:Ae.jsx(sd,{className:"pt-6",children:Ae.jsxs("div",{className:"relative",children:[Ae.jsx(Yn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),Ae.jsx(Yc,{placeholder:"Search patients by name, email, or phone...",value:t,onChange:e=>r(e.target.value),className:"pl-10"})]})})}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{children:["Patients (",u.total,")"]}),Ae.jsx(ad,{children:"Manage patient records and information"})]}),Ae.jsx(sd,{children:c?Ae.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ae.jsx(Tn,{className:"h-8 w-8 animate-spin"}),Ae.jsx("span",{className:"ml-2",children:"Loading patients..."})]}):Ae.jsxs(Ae.Fragment,{children:[Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Patient"}),Ae.jsx(Gm,{children:"Contact"}),Ae.jsx(Gm,{children:"Last Visit"}),Ae.jsx(Gm,{children:"Next Appointment"}),Ae.jsx(Gm,{children:"Visits"}),Ae.jsx(Gm,{children:"Actions"})]})}),Ae.jsx(Km,{children:o.map(e=>Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsxs(Rd,{children:[Ae.jsx(Fd,{src:e.avatar,alt:e.name}),Ae.jsx(Ld,{children:e.name.split(" ").map(e=>e[0]).join("")})]}),Ae.jsxs("div",{children:[Ae.jsx("div",{className:"font-medium",children:e.name}),Ae.jsxs("div",{className:"text-sm text-muted-foreground",children:["Age: ",e.date_of_birth?g(e.date_of_birth):"Not provided"]})]})]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"text-sm",children:[Ae.jsx("div",{children:e.email}),Ae.jsx("div",{className:"text-muted-foreground",children:e.phone})]})}),Ae.jsx(Xm,{children:e.last_visit}),Ae.jsx(Xm,{children:e.next_appointment?Ae.jsx(Yd,{className:"bg-green-500 text-white",children:e.next_appointment}):Ae.jsx("span",{className:"text-muted-foreground",children:"None scheduled"})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"font-medium",children:e.total_visits}),Ae.jsx("div",{className:"text-xs text-muted-foreground",children:"total"})]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex space-x-2",children:[Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>v(e),children:Ae.jsx(wn,{className:"h-4 w-4"})}),Ae.jsx(Hc,{variant:"outline",size:"sm",children:Ae.jsx(ln,{className:"h-4 w-4"})})]})})]},e.id))})]}),0===o.length&&!c&&Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx(da,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ae.jsx("p",{className:"text-muted-foreground",children:"No patients found"})]})]})})]})]}),Ae.jsx(Vp,{open:m,onOpenChange:p,children:Ae.jsxs(Yp,{className:"max-w-2xl",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Edit Patient Information"}),Ae.jsx(Jp,{children:"Update patient information and medical details."})]}),Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"edit-name",children:"Name"}),Ae.jsx(Yc,{id:"edit-name",value:f.name||"",onChange:e=>x({...f,name:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"edit-email",children:"Email"}),Ae.jsx(Yc,{id:"edit-email",type:"email",value:f.email||"",onChange:e=>x({...f,email:e.target.value})})]})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"edit-phone",children:"Phone"}),Ae.jsx(Yc,{id:"edit-phone",value:f.phone||"",onChange:e=>x({...f,phone:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"edit-dob",children:"Date of Birth"}),Ae.jsx(Yc,{id:"edit-dob",type:"date",value:f.date_of_birth||"",onChange:e=>x({...f,date_of_birth:e.target.value})})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"edit-address",children:"Address"}),Ae.jsx(Yc,{id:"edit-address",value:f.address||"",onChange:e=>x({...f,address:e.target.value})})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"edit-emergency-contact",children:"Emergency Contact"}),Ae.jsx(Yc,{id:"edit-emergency-contact",value:f.emergency_contact||"",onChange:e=>x({...f,emergency_contact:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"edit-emergency-phone",children:"Emergency Phone"}),Ae.jsx(Yc,{id:"edit-emergency-phone",value:f.emergency_phone||"",onChange:e=>x({...f,emergency_phone:e.target.value})})]})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"edit-insurance-provider",children:"Insurance Provider"}),Ae.jsx(Yc,{id:"edit-insurance-provider",value:f.insurance_provider||"",onChange:e=>x({...f,insurance_provider:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"edit-insurance-policy",children:"Insurance Policy"}),Ae.jsx(Yc,{id:"edit-insurance-policy",value:f.insurance_policy||"",onChange:e=>x({...f,insurance_policy:e.target.value})})]})]}),Ae.jsxs("div",{className:"flex justify-end space-x-2",children:[Ae.jsx(Hc,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),Ae.jsxs(Hc,{onClick:async()=>{if(n)try{d(!0);const t=await(async(e,t)=>{const r=sessionStorage.getItem("auth_token");if(console.log("Patient API: Token from sessionStorage:",r?"Present":"Missing"),!r)throw new Error("No authentication token found");return(await Xf.put(`/patients/${e}`,t)).data})(n.id,f);e({title:"Success",description:"Patient updated successfully"}),p(!1),await v(t.patient)}catch(t){console.error("Error updating patient:",t),e({title:"Error",description:t.message||"Failed to update patient",variant:"destructive"})}finally{d(!1)}},disabled:c,children:[c&&Ae.jsx(Tn,{className:"h-4 w-4 mr-2 animate-spin"}),"Update Patient"]})]})]})]})})]})},Jf="http://192.168.100.6:8000/api",Zf=Cc.create({baseURL:Jf,headers:{"Content-Type":"application/json",Accept:"application/json"}});Zf.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),Zf.interceptors.response.use(e=>e,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const ex=new class{async getCustomerAnalytics(e,t={}){const r=new URLSearchParams;t.period&&r.append("period",t.period.toString()),t.start_date&&r.append("start_date",t.start_date),t.end_date&&r.append("end_date",t.end_date);return(await Zf.get(`${Jf}/customers/${e}/analytics?${r}`)).data}async getOptometristAnalytics(e,t={}){const r=new URLSearchParams;t.period&&r.append("period",t.period.toString()),t.start_date&&r.append("start_date",t.start_date),t.end_date&&r.append("end_date",t.end_date);return(await Zf.get(`${Jf}/optometrists/${e}/analytics?${r}`)).data}async getAdminAnalytics(e={}){const t=new URLSearchParams;e.period&&t.append("period",e.period.toString()),e.start_date&&t.append("start_date",e.start_date),e.end_date&&t.append("end_date",e.end_date),e.branch_id&&t.append("branch_id",e.branch_id.toString());try{return(await Zf.get(`${Jf}/admin/analytics?${t}`)).data}catch(r){return console.error("Error fetching admin analytics:",r),{period:{days:30,start_date:"",end_date:""},branch_performance:[],optometrist_workload:[],staff_activity:[],system_wide_stats:{appointments:0,reservations:0,revenue:0,products:0,branches:0,users:0},common_diagnoses:{by_type:{},by_lens_type:{},by_coating:{}}}}}async getRealTimeAnalytics(){try{return(await Zf.get(`${Jf}/analytics/realtime`)).data}catch(e){return console.error("Error fetching real-time analytics:",e),{total_appointments_today:0,total_revenue_today:0,active_users:0,low_stock_alerts:0,upcoming_appointments:0,system_health:{database_status:"unknown",api_response_time:0,last_backup:"unknown"}}}}async getAnalyticsTrends(e={}){const t=new URLSearchParams;e.period&&t.append("period",e.period.toString()),e.start_date&&t.append("start_date",e.start_date),e.end_date&&t.append("end_date",e.end_date),e.branch_id&&t.append("branch_id",e.branch_id.toString());try{return(await Zf.get(`${Jf}/analytics/trends?${t}`)).data}catch(r){return console.error("Error fetching analytics trends:",r),{revenue_trend:[],appointment_trend:[],inventory_trend:[],appointment_types:[]}}}async exportAnalytics(e,t,r={}){const n=new URLSearchParams;n.append("type",e),n.append("format",t),r.period&&n.append("period",r.period.toString()),r.start_date&&n.append("start_date",r.start_date),r.end_date&&n.append("end_date",r.end_date),r.branch_id&&n.append("branch_id",r.branch_id.toString());return(await Zf.get(`${Jf}/analytics/export?${n}`,{responseType:"blob"})).data}},tx=Cc.create({baseURL:"http://192.168.100.6:8000/api",headers:{"Content-Type":"application/json",Accept:"application/json"}});tx.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),tx.interceptors.response.use(e=>e,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const rx=async()=>{if(!sessionStorage.getItem("auth_token"))throw new Error("No authentication token found");return(await tx.get("/feedback/available-appointments")).data},nx=async e=>{if(!sessionStorage.getItem("auth_token"))throw new Error("No authentication token found");return(await tx.get(`/customers/${e}/feedback`)).data};var ax=Array.isArray,sx="object"==typeof Pt&&Pt&&Pt.Object===Object&&Pt,ix=sx,ox="object"==typeof self&&self&&self.Object===Object&&self,lx=ix||ox||Function("return this")(),cx=lx.Symbol,dx=cx,ux=Object.prototype,hx=ux.hasOwnProperty,mx=ux.toString,px=dx?dx.toStringTag:void 0;var fx=function(e){var t=hx.call(e,px),r=e[px];try{e[px]=void 0;var n=!0}catch(s){}var a=mx.call(e);return n&&(t?e[px]=r:delete e[px]),a},xx=Object.prototype.toString;var yx=fx,vx=function(e){return xx.call(e)},gx=cx?cx.toStringTag:void 0;var bx=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":gx&&gx in Object(e)?yx(e):vx(e)};var jx=function(e){return null!=e&&"object"==typeof e},wx=bx,Nx=jx;var Sx=function(e){return"symbol"==typeof e||Nx(e)&&"[object Symbol]"==wx(e)},kx=ax,_x=Sx,Ox=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cx=/^\w*$/;var Ax=function(e,t){if(kx(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!_x(e))||(Cx.test(e)||!Ox.test(e)||null!=t&&e in Object(t))};var Ex=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const Px=Tt(Ex);var Tx=bx,Mx=Ex;var Dx=function(e){if(!Mx(e))return!1;var t=Tx(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const Ix=Tt(Dx);var Rx,Fx=lx["__core-js_shared__"],Lx=(Rx=/[^.]+$/.exec(Fx&&Fx.keys&&Fx.keys.IE_PROTO||""))?"Symbol(src)_1."+Rx:"";var Bx=function(e){return!!Lx&&Lx in e},qx=Function.prototype.toString;var zx=function(e){if(null!=e){try{return qx.call(e)}catch(t){}try{return e+""}catch(t){}}return""},$x=Dx,Ux=Bx,Vx=Ex,Wx=zx,Hx=/^\[object .+?Constructor\]$/,Kx=Function.prototype,Yx=Object.prototype,Gx=Kx.toString,Xx=Yx.hasOwnProperty,Qx=RegExp("^"+Gx.call(Xx).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Jx=function(e){return!(!Vx(e)||Ux(e))&&($x(e)?Qx:Hx).test(Wx(e))},Zx=function(e,t){return null==e?void 0:e[t]};var ey=function(e,t){var r=Zx(e,t);return Jx(r)?r:void 0},ty=ey(Object,"create"),ry=ty;var ny=function(){this.__data__=ry?ry(null):{},this.size=0};var ay=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},sy=ty,iy=Object.prototype.hasOwnProperty;var oy=function(e){var t=this.__data__;if(sy){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return iy.call(t,e)?t[e]:void 0},ly=ty,cy=Object.prototype.hasOwnProperty;var dy=ty;var uy=ny,hy=ay,my=oy,py=function(e){var t=this.__data__;return ly?void 0!==t[e]:cy.call(t,e)},fy=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=dy&&void 0===t?"__lodash_hash_undefined__":t,this};function xy(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}xy.prototype.clear=uy,xy.prototype.delete=hy,xy.prototype.get=my,xy.prototype.has=py,xy.prototype.set=fy;var yy=xy;var vy=function(){this.__data__=[],this.size=0};var gy=function(e,t){return e===t||e!=e&&t!=t},by=gy;var jy=function(e,t){for(var r=e.length;r--;)if(by(e[r][0],t))return r;return-1},wy=jy,Ny=Array.prototype.splice;var Sy=jy;var ky=jy;var _y=jy;var Oy=vy,Cy=function(e){var t=this.__data__,r=wy(t,e);return!(r<0)&&(r==t.length-1?t.pop():Ny.call(t,r,1),--this.size,!0)},Ay=function(e){var t=this.__data__,r=Sy(t,e);return r<0?void 0:t[r][1]},Ey=function(e){return ky(this.__data__,e)>-1},Py=function(e,t){var r=this.__data__,n=_y(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Ty(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ty.prototype.clear=Oy,Ty.prototype.delete=Cy,Ty.prototype.get=Ay,Ty.prototype.has=Ey,Ty.prototype.set=Py;var My=Ty,Dy=ey(lx,"Map"),Iy=yy,Ry=My,Fy=Dy;var Ly=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var By=function(e,t){var r=e.__data__;return Ly(t)?r["string"==typeof t?"string":"hash"]:r.map},qy=By;var zy=By;var $y=By;var Uy=By;var Vy=function(){this.size=0,this.__data__={hash:new Iy,map:new(Fy||Ry),string:new Iy}},Wy=function(e){var t=qy(this,e).delete(e);return this.size-=t?1:0,t},Hy=function(e){return zy(this,e).get(e)},Ky=function(e){return $y(this,e).has(e)},Yy=function(e,t){var r=Uy(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Gy(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Gy.prototype.clear=Vy,Gy.prototype.delete=Wy,Gy.prototype.get=Hy,Gy.prototype.has=Ky,Gy.prototype.set=Yy;var Xy=Gy,Qy=Xy;function Jy(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var i=e.apply(this,n);return r.cache=s.set(a,i)||s,i};return r.cache=new(Jy.Cache||Qy),r}Jy.Cache=Qy;var Zy=Jy;const ev=Tt(Zy);var tv=Zy;var rv=function(e){var t=tv(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t},nv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,av=/\\(\\)?/g,sv=rv(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(nv,function(e,r,n,a){t.push(n?a.replace(av,"$1"):r||e)}),t});var iv=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a},ov=iv,lv=ax,cv=Sx,dv=cx?cx.prototype:void 0,uv=dv?dv.toString:void 0;var hv=function e(t){if("string"==typeof t)return t;if(lv(t))return ov(t,e)+"";if(cv(t))return uv?uv.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},mv=hv;var pv=function(e){return null==e?"":mv(e)},fv=ax,xv=Ax,yv=sv,vv=pv;var gv=function(e,t){return fv(e)?e:xv(e,t)?[e]:yv(vv(e))},bv=Sx;var jv=function(e){if("string"==typeof e||bv(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},wv=gv,Nv=jv;var Sv=function(e,t){for(var r=0,n=(t=wv(t,e)).length;null!=e&&r<n;)e=e[Nv(t[r++])];return r&&r==n?e:void 0},kv=Sv;var _v=function(e,t,r){var n=null==e?void 0:kv(e,t);return void 0===n?r:n};const Ov=Tt(_v);const Cv=Tt(function(e){return null==e});var Av=bx,Ev=ax,Pv=jx;const Tv=Tt(function(e){return"string"==typeof e||!Ev(e)&&Pv(e)&&"[object String]"==Av(e)});var Mv,Dv={exports:{}},Iv={},Rv=Symbol.for("react.element"),Fv=Symbol.for("react.portal"),Lv=Symbol.for("react.fragment"),Bv=Symbol.for("react.strict_mode"),qv=Symbol.for("react.profiler"),zv=Symbol.for("react.provider"),$v=Symbol.for("react.context"),Uv=Symbol.for("react.server_context"),Vv=Symbol.for("react.forward_ref"),Wv=Symbol.for("react.suspense"),Hv=Symbol.for("react.suspense_list"),Kv=Symbol.for("react.memo"),Yv=Symbol.for("react.lazy"),Gv=Symbol.for("react.offscreen");function Xv(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Rv:switch(e=e.type){case Lv:case qv:case Bv:case Wv:case Hv:return e;default:switch(e=e&&e.$$typeof){case Uv:case $v:case Vv:case Yv:case Kv:case zv:return e;default:return t}}case Fv:return t}}}Mv=Symbol.for("react.module.reference"),Iv.ContextConsumer=$v,Iv.ContextProvider=zv,Iv.Element=Rv,Iv.ForwardRef=Vv,Iv.Fragment=Lv,Iv.Lazy=Yv,Iv.Memo=Kv,Iv.Portal=Fv,Iv.Profiler=qv,Iv.StrictMode=Bv,Iv.Suspense=Wv,Iv.SuspenseList=Hv,Iv.isAsyncMode=function(){return!1},Iv.isConcurrentMode=function(){return!1},Iv.isContextConsumer=function(e){return Xv(e)===$v},Iv.isContextProvider=function(e){return Xv(e)===zv},Iv.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Rv},Iv.isForwardRef=function(e){return Xv(e)===Vv},Iv.isFragment=function(e){return Xv(e)===Lv},Iv.isLazy=function(e){return Xv(e)===Yv},Iv.isMemo=function(e){return Xv(e)===Kv},Iv.isPortal=function(e){return Xv(e)===Fv},Iv.isProfiler=function(e){return Xv(e)===qv},Iv.isStrictMode=function(e){return Xv(e)===Bv},Iv.isSuspense=function(e){return Xv(e)===Wv},Iv.isSuspenseList=function(e){return Xv(e)===Hv},Iv.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Lv||e===qv||e===Bv||e===Wv||e===Hv||e===Gv||"object"==typeof e&&null!==e&&(e.$$typeof===Yv||e.$$typeof===Kv||e.$$typeof===zv||e.$$typeof===$v||e.$$typeof===Vv||e.$$typeof===Mv||void 0!==e.getModuleId)},Iv.typeOf=Xv,Dv.exports=Iv;var Qv=Dv.exports,Jv=bx,Zv=jx;var eg=function(e){return"number"==typeof e||Zv(e)&&"[object Number]"==Jv(e)};const tg=Tt(eg);var rg=eg;const ng=Tt(function(e){return rg(e)&&e!=+e});var ag=function(e){return 0===e?0:e>0?1:-1},sg=function(e){return Tv(e)&&e.indexOf("%")===e.length-1},ig=function(e){return tg(e)&&!ng(e)},og=function(e){return ig(e)||Tv(e)},lg=0,cg=function(e){var t=++lg;return"".concat(e||"").concat(t)},dg=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!ig(e)&&!Tv(e))return n;if(sg(e)){var s=e.indexOf("%");r=t*parseFloat(e.slice(0,s))/100}else r=+e;return ng(r)&&(r=n),a&&r>t&&(r=t),r},ug=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},hg=function(e,t){return ig(e)&&ig(t)?function(r){return e+r*(t-e)}:function(){return t}};function mg(e,t,r){return e&&e.length?e.find(function(e){return e&&("function"==typeof t?t(e):Ov(e,t))===r}):null}var pg=function(e,t){return ig(e)&&ig(t)?e-t:Tv(e)&&Tv(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function fg(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function xg(e){return(xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yg=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],vg=["points","pathLength"],gg={svg:["viewBox","children"],polygon:vg,polyline:vg},bg=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],jg=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if(Ct.isValidElement(e)&&(r=e.props),!Px(r))return null;var n={};return Object.keys(r).forEach(function(e){bg.includes(e)&&(n[e]=t||function(t){return r[e](r,t)})}),n},wg=function(e,t,r){if(!Px(e)||"object"!==xg(e))return null;var n=null;return Object.keys(e).forEach(function(a){var s=e[a];bg.includes(a)&&"function"==typeof s&&(n||(n={}),n[a]=function(e,t,r){return function(n){return e(t,r,n),null}}(s,t,r))}),n},Ng=["children"],Sg=["children"];function kg(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _g(e){return(_g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Og={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Cg=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},Ag=null,Eg=null,Pg=function e(t){if(t===Ag&&Array.isArray(Eg))return Eg;var r=[];return Ct.Children.forEach(t,function(t){Cv(t)||(Qv.isFragment(t)?r=r.concat(e(t.props.children)):r.push(t))}),Eg=r,Ag=t,r};function Tg(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(function(e){return Cg(e)}):[Cg(t)],Pg(e).forEach(function(e){var t=Ov(e,"type.displayName")||Ov(e,"type.name");-1!==n.indexOf(t)&&r.push(e)}),r}function Mg(e,t){var r=Tg(e,t);return r&&r[0]}var Dg=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,n=t.height;return!(!ig(r)||r<=0||!ig(n)||n<=0)},Ig=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Rg=function(e){return e&&"object"===_g(e)&&"clipDot"in e},Fg=function(e,t,r){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if(Ct.isValidElement(e)&&(n=e.props),!Px(n))return null;var a={};return Object.keys(n).forEach(function(e){var s;(function(e,t,r,n){var a,s=null!==(a=null==gg?void 0:gg[n])&&void 0!==a?a:[];return t.startsWith("data-")||!Ix(e)&&(n&&s.includes(t)||yg.includes(t))||r&&bg.includes(t)})(null===(s=n)||void 0===s?void 0:s[e],e,t,r)&&(a[e]=n[e])}),a},Lg=function e(t,r){if(t===r)return!0;var n=Ct.Children.count(t);if(n!==Ct.Children.count(r))return!1;if(0===n)return!0;if(1===n)return Bg(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var s=t[a],i=r[a];if(Array.isArray(s)||Array.isArray(i)){if(!e(s,i))return!1}else if(!Bg(s,i))return!1}return!0},Bg=function(e,t){if(Cv(e)&&Cv(t))return!0;if(!Cv(e)&&!Cv(t)){var r=e.props||{},n=r.children,a=kg(r,Ng),s=t.props||{},i=s.children,o=kg(s,Sg);return n&&i?fg(a,o)&&Lg(n,i):!n&&!i&&fg(a,o)}return!1},qg=function(e,t){var r=[],n={};return Pg(e).forEach(function(e,a){if(function(e){return e&&e.type&&Tv(e.type)&&Ig.indexOf(e.type)>=0}(e))r.push(e);else if(e){var s=Cg(e.type),i=t[s]||{},o=i.handler,l=i.once;if(o&&(!l||!n[s])){var c=o(e,s,a);r.push(c),n[s]=!0}}}),r},zg=["children","width","height","viewBox","className","style","title","desc"];function $g(){return $g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$g.apply(this,arguments)}function Ug(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Vg(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,s=e.className,i=e.style,o=e.title,l=e.desc,c=Ug(e,zg),d=a||{width:r,height:n,x:0,y:0},u=Vr("recharts-surface",s);return At.createElement("svg",$g({},Fg(c,!0,"svg"),{className:u,width:r,height:n,style:i,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),At.createElement("title",null,o),At.createElement("desc",null,l),t)}var Wg=["children","className"];function Hg(){return Hg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hg.apply(this,arguments)}function Kg(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Yg=At.forwardRef(function(e,t){var r=e.children,n=e.className,a=Kg(e,Wg),s=Vr("recharts-layer",n);return At.createElement("g",Hg({className:s},Fg(a,!0),{ref:t}),r)}),Gg=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a]};var Xg=function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++n<a;)s[n]=e[n+t];return s};var Qg=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:Xg(e,t,r)},Jg=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Zg=function(e){return Jg.test(e)};var eb=function(e){return e.split("")},tb="\\ud800-\\udfff",rb="["+tb+"]",nb="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ab="\\ud83c[\\udffb-\\udfff]",sb="[^"+tb+"]",ib="(?:\\ud83c[\\udde6-\\uddff]){2}",ob="[\\ud800-\\udbff][\\udc00-\\udfff]",lb="(?:"+nb+"|"+ab+")"+"?",cb="[\\ufe0e\\ufe0f]?",db=cb+lb+("(?:\\u200d(?:"+[sb,ib,ob].join("|")+")"+cb+lb+")*"),ub="(?:"+[sb+nb+"?",nb,ib,ob,rb].join("|")+")",hb=RegExp(ab+"(?="+ab+")|"+ub+db,"g");var mb=eb,pb=Zg,fb=function(e){return e.match(hb)||[]};var xb=Qg,yb=Zg,vb=function(e){return pb(e)?fb(e):mb(e)},gb=pv;const bb=Tt(function(e){return function(t){t=gb(t);var r=yb(t)?vb(t):void 0,n=r?r[0]:t.charAt(0),a=r?xb(r,1).join(""):t.slice(1);return n[e]()+a}}("toUpperCase"));function jb(e){return function(){return e}}const wb=Math.cos,Nb=Math.sin,Sb=Math.sqrt,kb=Math.PI,_b=2*kb,Ob=Math.PI,Cb=2*Ob,Ab=1e-6,Eb=Cb-Ab;function Pb(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class Tb{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?Pb:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Pb;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,a,s){this._append`C${+e},${+t},${+r},${+n},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,r,n,a){if(e=+e,t=+t,r=+r,n=+n,(a=+a)<0)throw new Error(`negative radius: ${a}`);let s=this._x1,i=this._y1,o=r-e,l=n-t,c=s-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>Ab)if(Math.abs(d*o-l*c)>Ab&&a){let h=r-s,m=n-i,p=o*o+l*l,f=h*h+m*m,x=Math.sqrt(p),y=Math.sqrt(u),v=a*Math.tan((Ob-Math.acos((p+u-f)/(2*x*y)))/2),g=v/y,b=v/x;Math.abs(g-1)>Ab&&this._append`L${e+g*c},${t+g*d}`,this._append`A${a},${a},0,0,${+(d*h>c*m)},${this._x1=e+b*o},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,r,n,a,s){if(e=+e,t=+t,s=!!s,(r=+r)<0)throw new Error(`negative radius: ${r}`);let i=r*Math.cos(n),o=r*Math.sin(n),l=e+i,c=t+o,d=1^s,u=s?n-a:a-n;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Ab||Math.abs(this._y1-c)>Ab)&&this._append`L${l},${c}`,r&&(u<0&&(u=u%Cb+Cb),u>Eb?this._append`A${r},${r},0,1,${d},${e-i},${t-o}A${r},${r},0,1,${d},${this._x1=l},${this._y1=c}`:u>Ab&&this._append`A${r},${r},0,${+(u>=Ob)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function Mb(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new Tb(t)}function Db(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Ib(e){this._context=e}function Rb(e){return new Ib(e)}function Fb(e){return e[0]}function Lb(e){return e[1]}function Bb(e,t){var r=jb(!0),n=null,a=Rb,s=null,i=Mb(o);function o(o){var l,c,d,u=(o=Db(o)).length,h=!1;for(null==n&&(s=a(d=i())),l=0;l<=u;++l)!(l<u&&r(c=o[l],l,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(c,l,o),+t(c,l,o));if(d)return s=null,d+""||null}return e="function"==typeof e?e:void 0===e?Fb:jb(e),t="function"==typeof t?t:void 0===t?Lb:jb(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:jb(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:jb(+e),o):t},o.defined=function(e){return arguments.length?(r="function"==typeof e?e:jb(!!e),o):r},o.curve=function(e){return arguments.length?(a=e,null!=n&&(s=a(n)),o):a},o.context=function(e){return arguments.length?(null==e?n=s=null:s=a(n=e),o):n},o}function qb(e,t,r){var n=null,a=jb(!0),s=null,i=Rb,o=null,l=Mb(c);function c(c){var d,u,h,m,p,f=(c=Db(c)).length,x=!1,y=new Array(f),v=new Array(f);for(null==s&&(o=i(p=l())),d=0;d<=f;++d){if(!(d<f&&a(m=c[d],d,c))===x)if(x=!x)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=d-1;h>=u;--h)o.point(y[h],v[h]);o.lineEnd(),o.areaEnd()}x&&(y[d]=+e(m,d,c),v[d]=+t(m,d,c),o.point(n?+n(m,d,c):y[d],r?+r(m,d,c):v[d]))}if(p)return o=null,p+""||null}function d(){return Bb().defined(a).curve(i).context(s)}return e="function"==typeof e?e:void 0===e?Fb:jb(+e),t="function"==typeof t?t:jb(void 0===t?0:+t),r="function"==typeof r?r:void 0===r?Lb:jb(+r),c.x=function(t){return arguments.length?(e="function"==typeof t?t:jb(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:jb(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:jb(+e),c):n},c.y=function(e){return arguments.length?(t="function"==typeof e?e:jb(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:jb(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:jb(+e),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(e){return arguments.length?(a="function"==typeof e?e:jb(!!e),c):a},c.curve=function(e){return arguments.length?(i=e,null!=s&&(o=i(s)),c):i},c.context=function(e){return arguments.length?(null==e?s=o=null:o=i(s=e),c):s},c}Ib.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class zb{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const $b={draw(e,t){const r=Sb(t/kb);e.moveTo(r,0),e.arc(0,0,r,0,_b)}},Ub={draw(e,t){const r=Sb(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Vb=Sb(1/3),Wb=2*Vb,Hb={draw(e,t){const r=Sb(t/Wb),n=r*Vb;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Kb={draw(e,t){const r=Sb(t),n=-r/2;e.rect(n,n,r,r)}},Yb=Nb(kb/10)/Nb(7*kb/10),Gb=Nb(_b/10)*Yb,Xb=-wb(_b/10)*Yb,Qb={draw(e,t){const r=Sb(.8908130915292852*t),n=Gb*r,a=Xb*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const t=_b*s/5,i=wb(t),o=Nb(t);e.lineTo(o*r,-i*r),e.lineTo(i*n-o*a,o*n+i*a)}e.closePath()}},Jb=Sb(3),Zb={draw(e,t){const r=-Sb(t/(3*Jb));e.moveTo(0,2*r),e.lineTo(-Jb*r,-r),e.lineTo(Jb*r,-r),e.closePath()}},ej=-.5,tj=Sb(3)/2,rj=1/Sb(12),nj=3*(rj/2+1),aj={draw(e,t){const r=Sb(t/nj),n=r/2,a=r*rj,s=n,i=r*rj+r,o=-s,l=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,l),e.lineTo(ej*n-tj*a,tj*n+ej*a),e.lineTo(ej*s-tj*i,tj*s+ej*i),e.lineTo(ej*o-tj*l,tj*o+ej*l),e.lineTo(ej*n+tj*a,ej*a-tj*n),e.lineTo(ej*s+tj*i,ej*i-tj*s),e.lineTo(ej*o+tj*l,ej*l-tj*o),e.closePath()}};function sj(){}function ij(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function oj(e){this._context=e}function lj(e){this._context=e}function cj(e){this._context=e}function dj(e){this._context=e}function uj(e){return e<0?-1:1}function hj(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(uj(s)+uj(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function mj(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function pj(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function fj(e){this._context=e}function xj(e){this._context=new yj(e)}function yj(e){this._context=e}function vj(e){this._context=e}function gj(e){var t,r,n=e.length-1,a=new Array(n),s=new Array(n),i=new Array(n);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/s[t-1],s[t]-=r,i[t]-=r*i[t-1];for(a[n-1]=i[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function bj(e,t){this._context=e,this._t=t}function jj(e,t){if((a=e.length)>1)for(var r,n,a,s=1,i=e[t[0]],o=i.length;s<a;++s)for(n=i,i=e[t[s]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function wj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Nj(e,t){return e[t]}function Sj(e){const t=[];return t.key=e,t}function kj(e){return(kj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}oj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ij(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ij(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},lj.prototype={areaStart:sj,areaEnd:sj,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ij(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},cj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:ij(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},dj.prototype={areaStart:sj,areaEnd:sj,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},fj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pj(this,this._t0,mj(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,pj(this,mj(this,r=hj(this,e,t)),r);break;default:pj(this,this._t0,r=hj(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(xj.prototype=Object.create(fj.prototype)).point=function(e,t){fj.prototype.point.call(this,t,e)},yj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}},vj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=gj(e),a=gj(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},bj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var _j=["type","size","sizeType"];function Oj(){return Oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oj.apply(this,arguments)}function Cj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Aj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cj(Object(r),!0).forEach(function(t){Ej(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ej(e,t,r){var n;return n=function(e,t){if("object"!=kj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=kj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==kj(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pj(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Tj={symbolCircle:$b,symbolCross:Ub,symbolDiamond:Hb,symbolSquare:Kb,symbolStar:Qb,symbolTriangle:Zb,symbolWye:aj},Mj=Math.PI/180,Dj=function(e){var t,r,n=e.type,a=void 0===n?"circle":n,s=e.size,i=void 0===s?64:s,o=e.sizeType,l=void 0===o?"area":o,c=Aj(Aj({},Pj(e,_j)),{},{type:a,size:i,sizeType:l}),d=c.className,u=c.cx,h=c.cy,m=Fg(c,!0);return u===+u&&h===+h&&i===+i?At.createElement("path",Oj({},m,{className:Vr("recharts-symbols",d),transform:"translate(".concat(u,", ").concat(h,")"),d:(t=function(e){var t="symbol".concat(bb(e));return Tj[t]||$b}(a),r=function(e,t){let r=null,n=Mb(a);function a(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return e="function"==typeof e?e:jb(e||$b),t="function"==typeof t?t:jb(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"==typeof t?t:jb(t),a):e},a.size=function(e){return arguments.length?(t="function"==typeof e?e:jb(+e),a):t},a.context=function(e){return arguments.length?(r=null==e?null:e,a):r},a}().type(t).size(function(e,t,r){if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*Mj;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.pow(Math.tan(n),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(i,l,a)),r())})):null};function Ij(e){return(Ij="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rj(){return Rj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rj.apply(this,arguments)}function Fj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Lj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vj(n.key),n)}}function Bj(e,t,r){return t=zj(t),function(e,t){if(t&&("object"===Ij(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qj()?Reflect.construct(t,r||[],zj(e).constructor):t.apply(e,r))}function qj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(qj=function(){return!!e})()}function zj(e){return(zj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $j(e,t){return($j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Uj(e,t,r){return(t=Vj(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vj(e){var t=function(e,t){if("object"!=Ij(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ij(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ij(t)?t:t+""}Dj.registerSymbol=function(e,t){Tj["symbol".concat(bb(e))]=t};var Wj=32,Hj=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Bj(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$j(e,t)}(e,Ct.PureComponent),t=e,r=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,r=16,n=Wj/6,a=Wj/3,s=e.inactive?t:e.color;if("plainline"===e.type)return At.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:Wj,y2:r,className:"recharts-legend-icon"});if("line"===e.type)return At.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(r,"h").concat(a,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(2*a,",").concat(r,"\n            H").concat(Wj,"M").concat(2*a,",").concat(r,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(a,",").concat(r),className:"recharts-legend-icon"});if("rect"===e.type)return At.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(4,"h").concat(Wj,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(At.isValidElement(e.legendIcon)){var i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fj(Object(r),!0).forEach(function(t){Uj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return delete i.legendIcon,At.cloneElement(e.legendIcon,i)}return At.createElement(Dj,{fill:s,cx:r,cy:r,size:Wj,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,r=t.payload,n=t.iconSize,a=t.layout,s=t.formatter,i=t.inactiveColor,o={x:0,y:0,width:Wj,height:Wj},l={display:"horizontal"===a?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map(function(t,r){var a=t.formatter||s,d=Vr(Uj(Uj({"recharts-legend-item":!0},"legend-item-".concat(r),!0),"inactive",t.inactive));if("none"===t.type)return null;var u=Ix(t.value)?null:t.value;Gg(!Ix(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var h=t.inactive?i:t.color;return At.createElement("li",Rj({className:d,style:l,key:"legend-item-".concat(r)},wg(e.props,t,r)),At.createElement(Vg,{width:n,height:n,viewBox:o,style:c},e.renderIcon(t)),At.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},a?a(u,t,r):u))})}},{key:"render",value:function(){var e=this.props,t=e.payload,r=e.layout,n=e.align;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:"horizontal"===r?n:"left"};return At.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}],r&&Lj(t.prototype,r),n&&Lj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();Uj(Hj,"displayName","Legend"),Uj(Hj,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Kj=My;var Yj=My,Gj=Dy,Xj=Xy;var Qj=My,Jj=function(){this.__data__=new Kj,this.size=0},Zj=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ew=function(e){return this.__data__.get(e)},tw=function(e){return this.__data__.has(e)},rw=function(e,t){var r=this.__data__;if(r instanceof Yj){var n=r.__data__;if(!Gj||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Xj(n)}return r.set(e,t),this.size=r.size,this};function nw(e){var t=this.__data__=new Qj(e);this.size=t.size}nw.prototype.clear=Jj,nw.prototype.delete=Zj,nw.prototype.get=ew,nw.prototype.has=tw,nw.prototype.set=rw;var aw=nw;var sw=Xy,iw=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ow=function(e){return this.__data__.has(e)};function lw(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new sw;++t<r;)this.add(e[t])}lw.prototype.add=lw.prototype.push=iw,lw.prototype.has=ow;var cw=lw;var dw=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var uw=function(e,t){return e.has(t)},hw=cw,mw=dw,pw=uw;var fw=function(e,t,r,n,a,s){var i=1&r,o=e.length,l=t.length;if(o!=l&&!(i&&l>o))return!1;var c=s.get(e),d=s.get(t);if(c&&d)return c==t&&d==e;var u=-1,h=!0,m=2&r?new hw:void 0;for(s.set(e,t),s.set(t,e);++u<o;){var p=e[u],f=t[u];if(n)var x=i?n(f,p,u,t,e,s):n(p,f,u,e,t,s);if(void 0!==x){if(x)continue;h=!1;break}if(m){if(!mw(t,function(e,t){if(!pw(m,t)&&(p===e||a(p,e,r,n,s)))return m.push(t)})){h=!1;break}}else if(p!==f&&!a(p,f,r,n,s)){h=!1;break}}return s.delete(e),s.delete(t),h};var xw=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},yw=lx.Uint8Array,vw=gy,gw=fw,bw=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},jw=xw,ww=cx?cx.prototype:void 0,Nw=ww?ww.valueOf:void 0;var Sw=function(e,t,r,n,a,s,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new yw(e),new yw(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return vw(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=bw;case"[object Set]":var l=1&n;if(o||(o=jw),e.size!=t.size&&!l)return!1;var c=i.get(e);if(c)return c==t;n|=2,i.set(e,t);var d=gw(o(e),o(t),n,a,s,i);return i.delete(e),d;case"[object Symbol]":if(Nw)return Nw.call(e)==Nw.call(t)}return!1};var kw=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e},_w=kw,Ow=ax;var Cw=function(e,t,r){var n=t(e);return Ow(e)?n:_w(n,r(e))};var Aw=function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,s=[];++r<n;){var i=e[r];t(i,r,e)&&(s[a++]=i)}return s},Ew=function(){return[]},Pw=Object.prototype.propertyIsEnumerable,Tw=Object.getOwnPropertySymbols,Mw=Tw?function(e){return null==e?[]:(e=Object(e),Aw(Tw(e),function(t){return Pw.call(e,t)}))}:Ew;var Dw=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},Iw=bx,Rw=jx;var Fw,Lw,Bw,qw,zw,$w,Uw,Vw,Ww=function(e){return Rw(e)&&"[object Arguments]"==Iw(e)},Hw=jx,Kw=Object.prototype,Yw=Kw.hasOwnProperty,Gw=Kw.propertyIsEnumerable,Xw=Ww(function(){return arguments}())?Ww:function(e){return Hw(e)&&Yw.call(e,"callee")&&!Gw.call(e,"callee")},Qw={exports:{}};Fw=Qw,Bw=lx,qw=function(){return!1},zw=(Lw=Qw.exports)&&!Lw.nodeType&&Lw,$w=zw&&Fw&&!Fw.nodeType&&Fw,Uw=$w&&$w.exports===zw?Bw.Buffer:void 0,Vw=(Uw?Uw.isBuffer:void 0)||qw,Fw.exports=Vw;var Jw=Qw.exports,Zw=/^(?:0|[1-9]\d*)$/;var eN=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Zw.test(e))&&e>-1&&e%1==0&&e<t};var tN=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},rN=bx,nN=tN,aN=jx,sN={};sN["[object Float32Array]"]=sN["[object Float64Array]"]=sN["[object Int8Array]"]=sN["[object Int16Array]"]=sN["[object Int32Array]"]=sN["[object Uint8Array]"]=sN["[object Uint8ClampedArray]"]=sN["[object Uint16Array]"]=sN["[object Uint32Array]"]=!0,sN["[object Arguments]"]=sN["[object Array]"]=sN["[object ArrayBuffer]"]=sN["[object Boolean]"]=sN["[object DataView]"]=sN["[object Date]"]=sN["[object Error]"]=sN["[object Function]"]=sN["[object Map]"]=sN["[object Number]"]=sN["[object Object]"]=sN["[object RegExp]"]=sN["[object Set]"]=sN["[object String]"]=sN["[object WeakMap]"]=!1;var iN=function(e){return aN(e)&&nN(e.length)&&!!sN[rN(e)]};var oN=function(e){return function(t){return e(t)}},lN={exports:{}};!function(e,t){var r=sx,n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,s=a&&a.exports===n&&r.process,i=function(){try{var e=a&&a.require&&a.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=i}(lN,lN.exports);var cN=lN.exports,dN=iN,uN=oN,hN=cN&&cN.isTypedArray,mN=hN?uN(hN):dN,pN=Dw,fN=Xw,xN=ax,yN=Jw,vN=eN,gN=mN,bN=Object.prototype.hasOwnProperty;var jN=function(e,t){var r=xN(e),n=!r&&fN(e),a=!r&&!n&&yN(e),s=!r&&!n&&!a&&gN(e),i=r||n||a||s,o=i?pN(e.length,String):[],l=o.length;for(var c in e)!t&&!bN.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vN(c,l))||o.push(c);return o},wN=Object.prototype;var NN=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||wN)};var SN=function(e,t){return function(r){return e(t(r))}},kN=SN(Object.keys,Object),_N=NN,ON=kN,CN=Object.prototype.hasOwnProperty;var AN=Dx,EN=tN;var PN=function(e){return null!=e&&EN(e.length)&&!AN(e)},TN=jN,MN=function(e){if(!_N(e))return ON(e);var t=[];for(var r in Object(e))CN.call(e,r)&&"constructor"!=r&&t.push(r);return t},DN=PN;var IN=function(e){return DN(e)?TN(e):MN(e)},RN=Cw,FN=Mw,LN=IN;var BN=function(e){return RN(e,LN,FN)},qN=Object.prototype.hasOwnProperty;var zN=function(e,t,r,n,a,s){var i=1&r,o=BN(e),l=o.length;if(l!=BN(t).length&&!i)return!1;for(var c=l;c--;){var d=o[c];if(!(i?d in t:qN.call(t,d)))return!1}var u=s.get(e),h=s.get(t);if(u&&h)return u==t&&h==e;var m=!0;s.set(e,t),s.set(t,e);for(var p=i;++c<l;){var f=e[d=o[c]],x=t[d];if(n)var y=i?n(x,f,d,t,e,s):n(f,x,d,e,t,s);if(!(void 0===y?f===x||a(f,x,r,n,s):y)){m=!1;break}p||(p="constructor"==d)}if(m&&!p){var v=e.constructor,g=t.constructor;v==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g||(m=!1)}return s.delete(e),s.delete(t),m},$N=ey(lx,"DataView"),UN=ey(lx,"Promise"),VN=ey(lx,"Set"),WN=$N,HN=Dy,KN=UN,YN=VN,GN=ey(lx,"WeakMap"),XN=bx,QN=zx,JN="[object Map]",ZN="[object Promise]",eS="[object Set]",tS="[object WeakMap]",rS="[object DataView]",nS=QN(WN),aS=QN(HN),sS=QN(KN),iS=QN(YN),oS=QN(GN),lS=XN;(WN&&lS(new WN(new ArrayBuffer(1)))!=rS||HN&&lS(new HN)!=JN||KN&&lS(KN.resolve())!=ZN||YN&&lS(new YN)!=eS||GN&&lS(new GN)!=tS)&&(lS=function(e){var t=XN(e),r="[object Object]"==t?e.constructor:void 0,n=r?QN(r):"";if(n)switch(n){case nS:return rS;case aS:return JN;case sS:return ZN;case iS:return eS;case oS:return tS}return t});var cS=aw,dS=fw,uS=Sw,hS=zN,mS=lS,pS=ax,fS=Jw,xS=mN,yS="[object Arguments]",vS="[object Array]",gS="[object Object]",bS=Object.prototype.hasOwnProperty;var jS=function(e,t,r,n,a,s){var i=pS(e),o=pS(t),l=i?vS:mS(e),c=o?vS:mS(t),d=(l=l==yS?gS:l)==gS,u=(c=c==yS?gS:c)==gS,h=l==c;if(h&&fS(e)){if(!fS(t))return!1;i=!0,d=!1}if(h&&!d)return s||(s=new cS),i||xS(e)?dS(e,t,r,n,a,s):uS(e,t,l,r,n,a,s);if(!(1&r)){var m=d&&bS.call(e,"__wrapped__"),p=u&&bS.call(t,"__wrapped__");if(m||p){var f=m?e.value():e,x=p?t.value():t;return s||(s=new cS),a(f,x,r,n,s)}}return!!h&&(s||(s=new cS),hS(e,t,r,n,a,s))},wS=jx;var NS=function e(t,r,n,a,s){return t===r||(null==t||null==r||!wS(t)&&!wS(r)?t!=t&&r!=r:jS(t,r,n,a,e,s))},SS=aw,kS=NS;var _S=Ex;var OS=function(e){return e==e&&!_S(e)},CS=OS,AS=IN;var ES=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}},PS=function(e,t,r,n){var a=r.length,s=a,i=!n;if(null==e)return!s;for(e=Object(e);a--;){var o=r[a];if(i&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<s;){var l=(o=r[a])[0],c=e[l],d=o[1];if(i&&o[2]){if(void 0===c&&!(l in e))return!1}else{var u=new SS;if(n)var h=n(c,d,l,e,t,u);if(!(void 0===h?kS(d,c,3,n,u):h))return!1}}return!0},TS=function(e){for(var t=AS(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,CS(a)]}return t},MS=ES;var DS=gv,IS=Xw,RS=ax,FS=eN,LS=tN,BS=jv;var qS=function(e,t){return null!=e&&t in Object(e)},zS=function(e,t,r){for(var n=-1,a=(t=DS(t,e)).length,s=!1;++n<a;){var i=BS(t[n]);if(!(s=null!=e&&r(e,i)))break;e=e[i]}return s||++n!=a?s:!!(a=null==e?0:e.length)&&LS(a)&&FS(i,a)&&(RS(e)||IS(e))};var $S=NS,US=_v,VS=function(e,t){return null!=e&&zS(e,t,qS)},WS=Ax,HS=OS,KS=ES,YS=jv;var GS=function(e){return e};var XS=Sv;var QS=function(e){return function(t){return null==t?void 0:t[e]}},JS=function(e){return function(t){return XS(t,e)}},ZS=Ax,ek=jv;var tk=function(e){var t=TS(e);return 1==t.length&&t[0][2]?MS(t[0][0],t[0][1]):function(r){return r===e||PS(r,e,t)}},rk=function(e,t){return WS(e)&&HS(t)?KS(YS(e),t):function(r){var n=US(r,e);return void 0===n&&n===t?VS(r,e):$S(t,n,3)}},nk=GS,ak=ax,sk=function(e){return ZS(e)?QS(ek(e)):JS(e)};var ik=function(e){return"function"==typeof e?e:null==e?nk:"object"==typeof e?ak(e)?rk(e[0],e[1]):tk(e):sk(e)};var ok=function(e,t,r,n){for(var a=e.length,s=r+(n?1:-1);n?s--:++s<a;)if(t(e[s],s,e))return s;return-1};var lk=ok,ck=function(e){return e!=e},dk=function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1};var uk=function(e,t,r){return t==t?dk(e,t,r):lk(e,ck,r)};var hk=function(e,t){return!!(null==e?0:e.length)&&uk(e,t,0)>-1};var mk=function(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1};var pk=VN,fk=function(){},xk=pk&&1/xw(new pk([,-0]))[1]==1/0?function(e){return new pk(e)}:fk,yk=cw,vk=hk,gk=mk,bk=uw,jk=xk,wk=xw;var Nk=ik,Sk=function(e,t,r){var n=-1,a=vk,s=e.length,i=!0,o=[],l=o;if(r)i=!1,a=gk;else if(s>=200){var c=t?null:jk(e);if(c)return wk(c);i=!1,a=bk,l=new yk}else l=t?[]:o;e:for(;++n<s;){var d=e[n],u=t?t(d):d;if(d=r||0!==d?d:0,i&&u==u){for(var h=l.length;h--;)if(l[h]===u)continue e;t&&l.push(u),o.push(d)}else a(l,u,r)||(l!==o&&l.push(u),o.push(d))}return o};const kk=Tt(function(e,t){return e&&e.length?Sk(e,Nk(t)):[]});function _k(e,t,r){return!0===t?kk(e,r):Ix(t)?kk(e,t):e}function Ok(e){return(Ok="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ck=["ref"];function Ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ek(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ak(Object(r),!0).forEach(function(t){Rk(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ak(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Pk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fk(n.key),n)}}function Tk(e,t,r){return t=Dk(t),function(e,t){if(t&&("object"===Ok(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mk()?Reflect.construct(t,r||[],Dk(e).constructor):t.apply(e,r))}function Mk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Mk=function(){return!!e})()}function Dk(e){return(Dk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ik(e,t){return(Ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Rk(e,t,r){return(t=Fk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fk(e){var t=function(e,t){if("object"!=Ok(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ok(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ok(t)?t:t+""}function Lk(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Bk(e){return e.value}var qk=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Rk(t=Tk(this,e,[].concat(n)),"lastBoundingBox",{width:-1,height:-1}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ik(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"getWithHeight",value:function(e,t){var r=Ek(Ek({},this.defaultProps),e.props).layout;return"vertical"===r&&ig(e.props.height)?{height:e.props.height}:"horizontal"===r?{width:e.props.width||t}:null}}],(r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ek({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,r,n=this.props,a=n.layout,s=n.align,i=n.verticalAlign,o=n.margin,l=n.chartWidth,c=n.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===s&&"vertical"===a?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===s?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(r="middle"===i?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===i?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),Ek(Ek({},t),r)}},{key:"render",value:function(){var e=this,t=this.props,r=t.content,n=t.width,a=t.height,s=t.wrapperStyle,i=t.payloadUniqBy,o=t.payload,l=Ek(Ek({position:"absolute",width:n||"auto",height:a||"auto"},this.getDefaultPosition(s)),s);return At.createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(t){e.wrapperNode=t}},function(e,t){if(At.isValidElement(e))return At.cloneElement(e,t);if("function"==typeof e)return At.createElement(e,t);t.ref;var r=Lk(t,Ck);return At.createElement(Hj,r)}(r,Ek(Ek({},this.props),{},{payload:_k(o,i,Bk)})))}}])&&Pk(t.prototype,r),n&&Pk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();Rk(qk,"displayName","Legend"),Rk(qk,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var zk=Xw,$k=ax,Uk=cx?cx.isConcatSpreadable:void 0;var Vk=kw,Wk=function(e){return $k(e)||zk(e)||!!(Uk&&e&&e[Uk])};var Hk=function e(t,r,n,a,s){var i=-1,o=t.length;for(n||(n=Wk),s||(s=[]);++i<o;){var l=t[i];r>0&&n(l)?r>1?e(l,r-1,n,a,s):Vk(s,l):a||(s[s.length]=l)}return s};var Kk=function(e){return function(t,r,n){for(var a=-1,s=Object(t),i=n(t),o=i.length;o--;){var l=i[e?o:++a];if(!1===r(s[l],l,s))break}return t}}(),Yk=IN;var Gk=function(e,t){return e&&Kk(e,t,Yk)},Xk=PN;var Qk=function(e,t){return function(r,n){if(null==r)return r;if(!Xk(r))return e(r,n);for(var a=r.length,s=t?a:-1,i=Object(r);(t?s--:++s<a)&&!1!==n(i[s],s,i););return r}}(Gk),Jk=Qk,Zk=PN;var e_=function(e,t){var r=-1,n=Zk(e)?Array(e.length):[];return Jk(e,function(e,a,s){n[++r]=t(e,a,s)}),n};var t_=Sx;var r_=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,a=e==e,s=t_(e),i=void 0!==t,o=null===t,l=t==t,c=t_(t);if(!o&&!c&&!s&&e>t||s&&i&&l&&!o&&!c||n&&i&&l||!r&&l||!a)return 1;if(!n&&!s&&!c&&e<t||c&&r&&a&&!n&&!s||o&&r&&a||!i&&a||!l)return-1}return 0};var n_=iv,a_=Sv,s_=ik,i_=e_,o_=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e},l_=oN,c_=function(e,t,r){for(var n=-1,a=e.criteria,s=t.criteria,i=a.length,o=r.length;++n<i;){var l=r_(a[n],s[n]);if(l)return n>=o?l:l*("desc"==r[n]?-1:1)}return e.index-t.index},d_=GS,u_=ax;var h_=function(e,t,r){t=t.length?n_(t,function(e){return u_(e)?function(t){return a_(t,1===e.length?e[0]:e)}:e}):[d_];var n=-1;t=n_(t,l_(s_));var a=i_(e,function(e,r,a){return{criteria:n_(t,function(t){return t(e)}),index:++n,value:e}});return o_(a,function(e,t){return c_(e,t,r)})};var m_=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},p_=m_,f_=Math.max;var x_=function(e,t,r){return t=f_(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=f_(n.length-t,0),i=Array(s);++a<s;)i[a]=n[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=n[a];return o[t]=r(i),p_(e,this,o)}};var y_=function(e){return function(){return e}},v_=ey,g_=function(){try{var e=v_(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),b_=y_,j_=g_,w_=j_?function(e,t){return j_(e,"toString",{configurable:!0,enumerable:!1,value:b_(t),writable:!0})}:GS,N_=Date.now;var S_=function(e){var t=0,r=0;return function(){var n=N_(),a=16-(n-r);if(r=n,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(w_),k_=GS,__=x_,O_=S_;var C_=gy,A_=PN,E_=eN,P_=Ex;var T_=function(e,t,r){if(!P_(r))return!1;var n=typeof t;return!!("number"==n?A_(r)&&E_(t,r.length):"string"==n&&t in r)&&C_(r[t],e)},M_=Hk,D_=h_,I_=T_;const R_=Tt(function(e,t){return O_(__(e,t,k_),e+"")}(function(e,t){if(null==e)return[];var r=t.length;return r>1&&I_(e,t[0],t[1])?t=[]:r>2&&I_(t[0],t[1],t[2])&&(t=[t[0]]),D_(e,M_(t,1),[])}));function F_(e){return(F_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L_(){return L_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L_.apply(this,arguments)}function B_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z_(Object(r),!0).forEach(function(t){U_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function U_(e,t,r){var n;return n=function(e,t){if("object"!=F_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=F_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==F_(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V_(e){return Array.isArray(e)&&og(e[0])&&og(e[1])?e.join(" ~ "):e}var W_=function(e){var t=e.separator,r=void 0===t?" : ":t,n=e.contentStyle,a=void 0===n?{}:n,s=e.itemStyle,i=void 0===s?{}:s,o=e.labelStyle,l=void 0===o?{}:o,c=e.payload,d=e.formatter,u=e.itemSorter,h=e.wrapperClassName,m=e.labelClassName,p=e.label,f=e.labelFormatter,x=e.accessibilityLayer,y=void 0!==x&&x,v=$_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),g=$_({margin:0},l),b=!Cv(p),j=b?p:"",w=Vr("recharts-default-tooltip",h),N=Vr("recharts-tooltip-label",m);b&&f&&null!=c&&(j=f(p,c));var S=y?{role:"status","aria-live":"assertive"}:{};return At.createElement("div",L_({className:w,style:v},S),At.createElement("p",{className:N,style:g},At.isValidElement(j)?j:"".concat(j)),function(){if(c&&c.length){var e=(u?R_(c,u):c).map(function(e,t){if("none"===e.type)return null;var n=$_({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},i),a=e.formatter||d||V_,s=e.value,o=e.name,l=s,u=o;if(a&&null!=l&&null!=u){var h=a(s,o,e,t,c);if(Array.isArray(h)){var m=B_(h,2);l=m[0],u=m[1]}else l=h}return At.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:n},og(u)?At.createElement("span",{className:"recharts-tooltip-item-name"},u):null,og(u)?At.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,At.createElement("span",{className:"recharts-tooltip-item-value"},l),At.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return At.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function H_(e){return(H_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K_(e,t,r){var n;return n=function(e,t){if("object"!=H_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=H_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==H_(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Y_="recharts-tooltip-wrapper",G_={visibility:"hidden"};function X_(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Vr(Y_,K_(K_(K_(K_({},"".concat(Y_,"-right"),ig(r)&&t&&ig(t.x)&&r>=t.x),"".concat(Y_,"-left"),ig(r)&&t&&ig(t.x)&&r<t.x),"".concat(Y_,"-bottom"),ig(n)&&t&&ig(t.y)&&n>=t.y),"".concat(Y_,"-top"),ig(n)&&t&&ig(t.y)&&n<t.y))}function Q_(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(s&&ig(s[n]))return s[n];var d=r[n]-o-a,u=r[n]+a;return t[n]?i[n]?d:u:i[n]?d<l[n]?Math.max(u,l[n]):Math.max(d,l[n]):u+o>l[n]+c?Math.max(d,l[n]):Math.max(u,l[n])}function J_(e){return(J_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z_(Object(r),!0).forEach(function(t){iO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oO(n.key),n)}}function rO(e,t,r){return t=aO(t),function(e,t){if(t&&("object"===J_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nO()?Reflect.construct(t,r||[],aO(e).constructor):t.apply(e,r))}function nO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(nO=function(){return!!e})()}function aO(e){return(aO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sO(e,t){return(sO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iO(e,t,r){return(t=oO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oO(e){var t=function(e,t){if("object"!=J_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=J_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J_(t)?t:t+""}var lO=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return iO(t=rO(this,e,[].concat(n)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),iO(t,"handleKeyDown",function(e){var r,n,a,s;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(r=null===(n=t.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==r?r:0,y:null!==(a=null===(s=t.props.coordinate)||void 0===s?void 0:s.y)&&void 0!==a?a:0}})}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sO(e,t)}(e,Ct.PureComponent),t=e,(r=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,a=t.animationDuration,s=t.animationEasing,i=t.children,o=t.coordinate,l=t.hasPayload,c=t.isAnimationActive,d=t.offset,u=t.position,h=t.reverseDirection,m=t.useTranslate3d,p=t.viewBox,f=t.wrapperStyle,x=function(e){var t,r,n=e.allowEscapeViewBox,a=e.coordinate,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,d=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&a?function(e){var t=e.translateX,r=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:t=Q_({allowEscapeViewBox:n,coordinate:a,key:"x",offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),translateY:r=Q_({allowEscapeViewBox:n,coordinate:a,key:"y",offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:c}):G_,cssClasses:X_({translateX:t,translateY:r,coordinate:a})}}({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:p}),y=x.cssClasses,v=x.cssProperties,g=eO(eO({transition:c&&r?"transform ".concat(a,"ms ").concat(s):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&l?"visible":"hidden",position:"absolute",top:0,left:0},f);return At.createElement("div",{tabIndex:-1,className:y,style:g,ref:function(t){e.wrapperNode=t}},i)}}])&&tO(t.prototype,r),n&&tO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),cO={isSsr:!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return cO[e]},set:function(e,t){if("string"==typeof e)cO[e]=t;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(t){cO[t]=e[t]})}}};function dO(e){return(dO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uO(Object(r),!0).forEach(function(t){vO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gO(n.key),n)}}function pO(e,t,r){return t=xO(t),function(e,t){if(t&&("object"===dO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fO()?Reflect.construct(t,r||[],xO(e).constructor):t.apply(e,r))}function fO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(fO=function(){return!!e})()}function xO(e){return(xO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yO(e,t){return(yO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vO(e,t,r){return(t=gO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gO(e){var t=function(e,t){if("object"!=dO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=dO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dO(t)?t:t+""}function bO(e){return e.dataKey}var jO=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pO(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yO(e,t)}(e,Ct.PureComponent),t=e,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,a=t.animationDuration,s=t.animationEasing,i=t.content,o=t.coordinate,l=t.filterNull,c=t.isAnimationActive,d=t.offset,u=t.payload,h=t.payloadUniqBy,m=t.position,p=t.reverseDirection,f=t.useTranslate3d,x=t.viewBox,y=t.wrapperStyle,v=null!=u?u:[];l&&v.length&&(v=_k(u.filter(function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)}),h,bO));var g=v.length>0;return At.createElement(lO,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:r,coordinate:o,hasPayload:g,offset:d,position:m,reverseDirection:p,useTranslate3d:f,viewBox:x,wrapperStyle:y},function(e,t){return At.isValidElement(e)?At.cloneElement(e,t):"function"==typeof e?At.createElement(e,t):At.createElement(W_,t)}(i,hO(hO({},this.props),{},{payload:v})))}}])&&mO(t.prototype,r),n&&mO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();vO(jO,"displayName","Tooltip"),vO(jO,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!cO.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var wO=lx,NO=/\s/;var SO=function(e){for(var t=e.length;t--&&NO.test(e.charAt(t)););return t},kO=/^\s+/;var _O=function(e){return e?e.slice(0,SO(e)+1).replace(kO,""):e},OO=Ex,CO=Sx,AO=/^[-+]0x[0-9a-f]+$/i,EO=/^0b[01]+$/i,PO=/^0o[0-7]+$/i,TO=parseInt;var MO=function(e){if("number"==typeof e)return e;if(CO(e))return NaN;if(OO(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=OO(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=_O(e);var r=EO.test(e);return r||PO.test(e)?TO(e.slice(2),r?2:8):AO.test(e)?NaN:+e},DO=Ex,IO=function(){return wO.Date.now()},RO=MO,FO=Math.max,LO=Math.min;var BO=function(e,t,r){var n,a,s,i,o,l,c=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var r=n,s=a;return n=a=void 0,c=t,i=e.apply(s,r)}function p(e){var r=e-l;return void 0===l||r>=t||r<0||u&&e-c>=s}function f(){var e=IO();if(p(e))return x(e);o=setTimeout(f,function(e){var r=t-(e-l);return u?LO(r,s-(e-c)):r}(e))}function x(e){return o=void 0,h&&n?m(e):(n=a=void 0,i)}function y(){var e=IO(),r=p(e);if(n=arguments,a=this,l=e,r){if(void 0===o)return function(e){return c=e,o=setTimeout(f,t),d?m(e):i}(l);if(u)return clearTimeout(o),o=setTimeout(f,t),m(l)}return void 0===o&&(o=setTimeout(f,t)),i}return t=RO(t)||0,DO(r)&&(d=!!r.leading,s=(u="maxWait"in r)?FO(RO(r.maxWait)||0,t):s,h="trailing"in r?!!r.trailing:h),y.cancel=function(){void 0!==o&&clearTimeout(o),c=0,n=l=a=o=void 0},y.flush=function(){return void 0===o?i:x(IO())},y},qO=BO,zO=Ex;const $O=Tt(function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return zO(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),qO(e,t,{leading:n,maxWait:t,trailing:a})});function UO(e){return(UO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function WO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?VO(Object(r),!0).forEach(function(t){HO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function HO(e,t,r){var n;return n=function(e,t){if("object"!=UO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=UO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==UO(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return YO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var GO=Ct.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=void 0===n?{width:-1,height:-1}:n,s=e.width,i=void 0===s?"100%":s,o=e.height,l=void 0===o?"100%":o,c=e.minWidth,d=void 0===c?0:c,u=e.minHeight,h=e.maxHeight,m=e.children,p=e.debounce,f=void 0===p?0:p,x=e.id,y=e.className,v=e.onResize,g=e.style,b=void 0===g?{}:g,j=Ct.useRef(null),w=Ct.useRef();w.current=v,Ct.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var N=KO(Ct.useState({containerWidth:a.width,containerHeight:a.height}),2),S=N[0],k=N[1],_=Ct.useCallback(function(e,t){k(function(r){var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]);Ct.useEffect(function(){var e=function(e){var t,r=e[0].contentRect,n=r.width,a=r.height;_(n,a),null===(t=w.current)||void 0===t||t.call(w,n,a)};f>0&&(e=$O(e,f,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),r=j.current.getBoundingClientRect(),n=r.width,a=r.height;return _(n,a),t.observe(j.current),function(){t.disconnect()}},[_,f]);var O=Ct.useMemo(function(){var e=S.containerWidth,t=S.containerHeight;if(e<0||t<0)return null;Gg(sg(i)||sg(l),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",i,l),Gg(!r||r>0,"The aspect(%s) must be greater than zero.",r);var n=sg(i)?e:i,a=sg(l)?t:l;r&&r>0&&(n?a=n/r:a&&(n=a*r),h&&a>h&&(a=h)),Gg(n>0||a>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",n,a,i,l,d,u,r);var s=!Array.isArray(m)&&Cg(m.type).endsWith("Chart");return At.Children.map(m,function(e){return At.isValidElement(e)?Ct.cloneElement(e,WO({width:n,height:a},s?{style:WO({height:"100%",width:"100%",maxHeight:a,maxWidth:n},e.props.style)}:{})):e})},[r,m,l,h,u,d,S,i]);return At.createElement("div",{id:x?"".concat(x):void 0,className:Vr("recharts-responsive-container",y),style:WO(WO({},b),{},{width:i,height:l,minWidth:d,minHeight:u,maxHeight:h}),ref:j},O)}),XO=function(e){return null};function QO(e){return(QO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ZO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JO(Object(r),!0).forEach(function(t){eC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eC(e,t,r){var n;return n=function(e,t){if("object"!=QO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=QO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==QO(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}XO.displayName="Cell";var tC={widthCache:{},cacheCount:0},rC={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},nC="recharts_measurement_span";var aC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||cO.isSsr)return{width:0,height:0};var r,n=(r=ZO({},t),Object.keys(r).forEach(function(e){r[e]||delete r[e]}),r),a=JSON.stringify({text:e,copyStyle:n});if(tC.widthCache[a])return tC.widthCache[a];try{var s=document.getElementById(nC);s||((s=document.createElement("span")).setAttribute("id",nC),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var i=ZO(ZO({},rC),n);Object.assign(s.style,i),s.textContent="".concat(e);var o=s.getBoundingClientRect(),l={width:o.width,height:o.height};return tC.widthCache[a]=l,++tC.cacheCount>2e3&&(tC.cacheCount=0,tC.widthCache={}),l}catch(c){return{width:0,height:0}}};function sC(e){return(sC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cC(n.key),n)}}function cC(e){var t=function(e,t){if("object"!=sC(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=sC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sC(t)?t:t+""}var dC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hC=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mC=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,pC={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},fC=Object.keys(pC),xC="NaN";var yC=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),""===r||hC.test(r)||(this.num=NaN,this.unit=""),fC.includes(r)&&(this.num=function(e,t){return e*pC[t]}(t,r),this.unit="px")}return t=e,n=[{key:"parse",value:function(t){var r,n=iC(null!==(r=mC.exec(t))&&void 0!==r?r:[],3),a=n[1],s=n[2];return new e(parseFloat(a),null!=s?s:"")}}],(r=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&lC(t.prototype,r),n&&lC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function vC(e){if(e.includes(xC))return xC;for(var t=e;t.includes("*")||t.includes("/");){var r,n=iC(null!==(r=dC.exec(t))&&void 0!==r?r:[],4),a=n[1],s=n[2],i=n[3],o=yC.parse(null!=a?a:""),l=yC.parse(null!=i?i:""),c="*"===s?o.multiply(l):o.divide(l);if(c.isNaN())return xC;t=t.replace(dC,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,u=iC(null!==(d=uC.exec(t))&&void 0!==d?d:[],4),h=u[1],m=u[2],p=u[3],f=yC.parse(null!=h?h:""),x=yC.parse(null!=p?p:""),y="+"===m?f.add(x):f.subtract(x);if(y.isNaN())return xC;t=t.replace(uC,y.toString())}return t}var gC=/\(([^()]*)\)/;function bC(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var r=iC(gC.exec(t),2)[1];t=t.replace(gC,vC(r))}return t}(t),t=vC(t)}function jC(e){var t=function(e){try{return bC(e)}catch(t){return xC}}(e.slice(5,-1));return t===xC?"":t}var wC=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],NC=["dx","dy","angle","className","breakAll"];function SC(){return SC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SC.apply(this,arguments)}function kC(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return OC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var CC=/[ \f\n\r\t\v\u2028\u2029]+/,AC=function(e){var t=e.children,r=e.breakAll,n=e.style;try{var a=[];return Cv(t)||(a=r?t.toString().split(""):t.toString().split(CC)),{wordsWithComputedWidth:a.map(function(e){return{word:e,width:aC(e,n).width}}),spaceWidth:r?0:aC(" ",n).width}}catch(s){return null}},EC=function(e){return[{words:Cv(e)?[]:e.toString().split(CC)}]},PC=function(e){var t=e.width,r=e.scaleToFit,n=e.children,a=e.style,s=e.breakAll,i=e.maxLines;if((t||r)&&!cO.isSsr){var o=AC({breakAll:s,children:n,style:a});return o?function(e,t,r,n,a){var s=e.maxLines,i=e.children,o=e.style,l=e.breakAll,c=ig(s),d=i,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var s=t.word,i=t.width,o=e[e.length-1];if(o&&(null==n||a||o.width+i+r<Number(n)))o.words.push(s),o.width+=i+r;else{var l={words:[s],width:i};e.push(l)}return e},[])},h=u(t);if(!c)return h;for(var m,p=function(e){var t=d.slice(0,e),r=AC({breakAll:l,style:o,children:t+"…"}).wordsWithComputedWidth,a=u(r),i=a.length>s||function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})}(a).width>Number(n);return[i,a]},f=0,x=d.length-1,y=0;f<=x&&y<=d.length-1;){var v=Math.floor((f+x)/2),g=_C(p(v-1),2),b=g[0],j=g[1],w=_C(p(v),1)[0];if(b||w||(f=v+1),b&&w&&(x=v-1),!b&&w){m=j;break}y++}return m||h}({breakAll:s,children:n,maxLines:i,style:a},o.wordsWithComputedWidth,o.spaceWidth,t,r):EC(n)}return EC(n)},TC="#808080",MC=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,a=void 0===n?0:n,s=e.lineHeight,i=void 0===s?"1em":s,o=e.capHeight,l=void 0===o?"0.71em":o,c=e.scaleToFit,d=void 0!==c&&c,u=e.textAnchor,h=void 0===u?"start":u,m=e.verticalAnchor,p=void 0===m?"end":m,f=e.fill,x=void 0===f?TC:f,y=kC(e,wC),v=Ct.useMemo(function(){return PC({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:d,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,d,y.style,y.width]),g=y.dx,b=y.dy,j=y.angle,w=y.className,N=y.breakAll,S=kC(y,NC);if(!og(r)||!og(a))return null;var k,_=r+(ig(g)?g:0),O=a+(ig(b)?b:0);switch(p){case"start":k=jC("calc(".concat(l,")"));break;case"middle":k=jC("calc(".concat((v.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:k=jC("calc(".concat(v.length-1," * -").concat(i,")"))}var C=[];if(d){var A=v[0].width,E=y.width;C.push("scale(".concat((ig(E)?E/A:1)/A,")"))}return j&&C.push("rotate(".concat(j,", ").concat(_,", ").concat(O,")")),C.length&&(S.transform=C.join(" ")),At.createElement("text",SC({},Fg(S,!0),{x:_,y:O,className:Vr("recharts-text",w),textAnchor:h,fill:x.includes("url")?TC:x}),v.map(function(e,t){var r=e.words.join(N?"":" ");return At.createElement("tspan",{x:_,dy:0===t?k:i,key:"".concat(r,"-").concat(t)},r)}))};function DC(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function IC(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function RC(e){let t,r,n;function a(e,n,a=0,s=e.length){if(a<s){if(0!==t(n,n))return s;do{const t=a+s>>>1;r(e[t],n)<0?a=t+1:s=t}while(a<s)}return a}return 2!==e.length?(t=DC,r=(t,r)=>DC(e(t),r),n=(t,r)=>e(t)-r):(t=e===DC||e===IC?e:FC,r=e,n=e),{left:a,center:function(e,t,r=0,s=e.length){const i=a(e,t,r,s-1);return i>r&&n(e[i-1],t)>-n(e[i],t)?i-1:i},right:function(e,n,a=0,s=e.length){if(a<s){if(0!==t(n,n))return s;do{const t=a+s>>>1;r(e[t],n)<=0?a=t+1:s=t}while(a<s)}return a}}}function FC(){return 0}function LC(e){return null===e?NaN:+e}const BC=RC(DC).right;RC(LC).center;const qC=BC;class zC extends Map{constructor(e,t=UC){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get($C(this,e))}has(e){return super.has($C(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){const n=t(r);e.has(n)&&(r=e.get(n),e.delete(n));return r}(this,e))}}function $C({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function UC(e){return null!==e&&"object"==typeof e?e.valueOf():e}function VC(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const WC=Math.sqrt(50),HC=Math.sqrt(10),KC=Math.sqrt(2);function YC(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=WC?10:s>=HC?5:s>=KC?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/i,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*i,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?YC(e,t,2*r):[o,l,c]}function GC(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[a,s,i]=n?YC(t,e,r):YC(e,t,r);if(!(s>=a))return[];const o=s-a+1,l=new Array(o);if(n)if(i<0)for(let c=0;c<o;++c)l[c]=(s-c)/-i;else for(let c=0;c<o;++c)l[c]=(s-c)*i;else if(i<0)for(let c=0;c<o;++c)l[c]=(a+c)/-i;else for(let c=0;c<o;++c)l[c]=(a+c)*i;return l}function XC(e,t,r){return YC(e=+e,t=+t,r=+r)[2]}function QC(e,t,r){r=+r;const n=(t=+t)<(e=+e),a=n?XC(t,e,r):XC(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function JC(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r<a||void 0===r&&a>=a)&&(r=a)}return r}function ZC(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r>a||void 0===r&&a>=a)&&(r=a)}return r}function eA(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=void 0===a?VC:function(e=DC){if(e===DC)return VC;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}(a);n>r;){if(n-r>600){const s=n-r+1,i=t-r+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(i-s/2<0?-1:1);eA(e,t,Math.max(r,Math.floor(t-i*l/s+c)),Math.min(n,Math.floor(t+(s-i)*l/s+c)),a)}const s=e[t];let i=r,o=n;for(tA(e,r,t),a(e[n],s)>0&&tA(e,r,n);i<o;){for(tA(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}0===a(e[r],s)?tA(e,r,o):(++o,tA(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function tA(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function rA(e,t,r=LC){if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e);return i+(+r(e[s+1],s+1,e)-i)*(a-s)}}function nA(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function aA(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const sA=Symbol("implicit");function iA(){var e=new zC,t=[],r=[],n=sA;function a(a){let s=e.get(a);if(void 0===s){if(n!==sA)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return a.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new zC;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return a},a.range=function(e){return arguments.length?(r=Array.from(e),a):r.slice()},a.unknown=function(e){return arguments.length?(n=e,a):n},a.copy=function(){return iA(t,r).unknown(n)},nA.apply(a,arguments),a}function oA(){var e,t,r=iA().unknown(void 0),n=r.domain,a=r.range,s=0,i=1,o=!1,l=0,c=0,d=.5;function u(){var r=n().length,u=i<s,h=u?i:s,m=u?s:i;e=(m-h)/Math.max(1,r-l+2*c),o&&(e=Math.floor(e)),h+=(m-h-e*(r-l))*d,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=0|Math.max(0,Math.ceil((t-e)/r)),s=new Array(a);++n<a;)s[n]=e+n*r;return s}(r).map(function(t){return h+e*t});return a(u?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),u()):n()},r.range=function(e){return arguments.length?([s,i]=e,s=+s,i=+i,u()):[s,i]},r.rangeRound=function(e){return[s,i]=e,s=+s,i=+i,o=!0,u()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(o=!!e,u()):o},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},r.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},r.copy=function(){return oA(n(),[s,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},nA.apply(u(),arguments)}function lA(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lA(t())},e}function cA(){return lA(oA.apply(null,arguments).paddingInner(1))}function dA(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function uA(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function hA(){}var mA=.7,pA=1/mA,fA="\\s*([+-]?\\d+)\\s*",xA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vA=/^#([0-9a-f]{3,8})$/,gA=new RegExp(`^rgb\\(${fA},${fA},${fA}\\)$`),bA=new RegExp(`^rgb\\(${yA},${yA},${yA}\\)$`),jA=new RegExp(`^rgba\\(${fA},${fA},${fA},${xA}\\)$`),wA=new RegExp(`^rgba\\(${yA},${yA},${yA},${xA}\\)$`),NA=new RegExp(`^hsl\\(${xA},${yA},${yA}\\)$`),SA=new RegExp(`^hsla\\(${xA},${yA},${yA},${xA}\\)$`),kA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _A(){return this.rgb().formatHex()}function OA(){return this.rgb().formatRgb()}function CA(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=vA.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?AA(t):3===r?new TA(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?EA(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?EA(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=gA.exec(e))?new TA(t[1],t[2],t[3],1):(t=bA.exec(e))?new TA(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=jA.exec(e))?EA(t[1],t[2],t[3],t[4]):(t=wA.exec(e))?EA(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=NA.exec(e))?LA(t[1],t[2]/100,t[3]/100,1):(t=SA.exec(e))?LA(t[1],t[2]/100,t[3]/100,t[4]):kA.hasOwnProperty(e)?AA(kA[e]):"transparent"===e?new TA(NaN,NaN,NaN,0):null}function AA(e){return new TA(e>>16&255,e>>8&255,255&e,1)}function EA(e,t,r,n){return n<=0&&(e=t=r=NaN),new TA(e,t,r,n)}function PA(e,t,r,n){return 1===arguments.length?((a=e)instanceof hA||(a=CA(a)),a?new TA((a=a.rgb()).r,a.g,a.b,a.opacity):new TA):new TA(e,t,r,null==n?1:n);var a}function TA(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function MA(){return`#${FA(this.r)}${FA(this.g)}${FA(this.b)}`}function DA(){const e=IA(this.opacity);return`${1===e?"rgb(":"rgba("}${RA(this.r)}, ${RA(this.g)}, ${RA(this.b)}${1===e?")":`, ${e})`}`}function IA(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function RA(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function FA(e){return((e=RA(e))<16?"0":"")+e.toString(16)}function LA(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new qA(e,t,r,n)}function BA(e){if(e instanceof qA)return new qA(e.h,e.s,e.l,e.opacity);if(e instanceof hA||(e=CA(e)),!e)return new qA;if(e instanceof qA)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,l=(s+a)/2;return o?(i=t===s?(r-n)/o+6*(r<n):r===s?(n-t)/o+2:(t-r)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new qA(i,o,l,e.opacity)}function qA(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function zA(e){return(e=(e||0)%360)<0?e+360:e}function $A(e){return Math.max(0,Math.min(1,e||0))}function UA(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}dA(hA,CA,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_A,formatHex:_A,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return BA(this).formatHsl()},formatRgb:OA,toString:OA}),dA(TA,PA,uA(hA,{brighter(e){return e=null==e?pA:Math.pow(pA,e),new TA(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?mA:Math.pow(mA,e),new TA(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new TA(RA(this.r),RA(this.g),RA(this.b),IA(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MA,formatHex:MA,formatHex8:function(){return`#${FA(this.r)}${FA(this.g)}${FA(this.b)}${FA(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:DA,toString:DA})),dA(qA,function(e,t,r,n){return 1===arguments.length?BA(e):new qA(e,t,r,null==n?1:n)},uA(hA,{brighter(e){return e=null==e?pA:Math.pow(pA,e),new qA(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?mA:Math.pow(mA,e),new qA(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new TA(UA(e>=240?e-240:e+120,a,n),UA(e,a,n),UA(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new qA(zA(this.h),$A(this.s),$A(this.l),IA(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=IA(this.opacity);return`${1===e?"hsl(":"hsla("}${zA(this.h)}, ${100*$A(this.s)}%, ${100*$A(this.l)}%${1===e?")":`, ${e})`}`}}));const VA=e=>()=>e;function WA(e){return 1===(e=+e)?HA:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):VA(isNaN(t)?r:t)}}function HA(e,t){var r=t-e;return r?function(e,t){return function(r){return e+r*t}}(e,r):VA(isNaN(e)?t:e)}const KA=function e(t){var r=WA(t);function n(e,t){var n=r((e=PA(e)).r,(t=PA(t)).r),a=r(e.g,t.g),s=r(e.b,t.b),i=HA(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=s(t),e.opacity=i(t),e+""}}return n.gamma=e,n}(1);function YA(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,a=t.slice();return function(s){for(r=0;r<n;++r)a[r]=e[r]*(1-s)+t[r]*s;return a}}function GA(e,t){var r,n=t?t.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),i=new Array(n);for(r=0;r<a;++r)s[r]=rE(e[r],t[r]);for(;r<n;++r)i[r]=t[r];return function(e){for(r=0;r<a;++r)i[r]=s[r](e);return i}}function XA(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function QA(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function JA(e,t){var r,n={},a={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?n[r]=rE(e[r],t[r]):a[r]=t[r];return function(e){for(r in n)a[r]=n[r](e);return a}}var ZA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,eE=new RegExp(ZA.source,"g");function tE(e,t){var r,n,a,s=ZA.lastIndex=eE.lastIndex=0,i=-1,o=[],l=[];for(e+="",t+="";(r=ZA.exec(e))&&(n=eE.exec(t));)(a=n.index)>s&&(a=t.slice(s,a),o[i]?o[i]+=a:o[++i]=a),(r=r[0])===(n=n[0])?o[i]?o[i]+=n:o[++i]=n:(o[++i]=null,l.push({i:i,x:QA(r,n)})),s=eE.lastIndex;return s<t.length&&(a=t.slice(s),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)o[(r=l[n]).i]=r.x(e);return o.join("")})}function rE(e,t){var r,n,a=typeof t;return null==t||"boolean"===a?VA(t):("number"===a?QA:"string"===a?(r=CA(t))?(t=r,KA):tE:t instanceof CA?KA:t instanceof Date?XA:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?GA:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?JA:QA:YA))(e,t)}function nE(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function aE(e){return+e}var sE=[0,1];function iE(e){return e}function oE(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function lE(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=oE(a,n),s=r(i,s)):(n=oE(n,a),s=r(s,i)),function(e){return s(n(e))}}function cE(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=oE(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(t){var r=qC(e,t,1,n)-1;return s[r](a[r](t))}}function dE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function uE(){var e,t,r,n,a,s,i=sE,o=sE,l=rE,c=iE;function d(){var e,t,r,l=Math.min(i.length,o.length);return c!==iE&&(e=i[0],t=i[l-1],e>t&&(r=e,e=t,t=r),c=function(r){return Math.max(e,Math.min(t,r))}),n=l>2?cE:lE,a=s=null,u}function u(t){return null==t||isNaN(t=+t)?r:(a||(a=n(i.map(e),o,l)))(e(c(t)))}return u.invert=function(r){return c(t((s||(s=n(o,i.map(e),QA)))(r)))},u.domain=function(e){return arguments.length?(i=Array.from(e,aE),d()):i.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=nE,d()},u.clamp=function(e){return arguments.length?(c=!!e||iE,d()):c!==iE},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(r=e,u):r},function(r,n){return e=r,t=n,d()}}function hE(){return uE()(iE,iE)}function mE(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function pE(e){return(e=mE(Math.abs(e)))?e[1]:NaN}var fE,xE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yE(e){if(!(t=xE.exec(e)))throw new Error("invalid format: "+e);var t;return new vE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function vE(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function gE(e,t){var r=mE(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}yE.prototype=vE.prototype,vE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const bE={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gE(100*e,t),r:gE,s:function(e,t){var r=mE(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(fE=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+mE(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jE(e){return e}var wE,NE,SE,kE=Array.prototype.map,_E=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function OE(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?jE:(t=kE.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var a=e.length,s=[],i=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(e.substring(a-=o,a+o)),!((l+=o+1)>n));)o=t[i=(i+1)%t.length];return s.reverse().join(r)}),a=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?jE:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(kE.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=yE(e)).fill,r=e.align,u=e.sign,h=e.symbol,m=e.zero,p=e.width,f=e.comma,x=e.precision,y=e.trim,v=e.type;"n"===v?(f=!0,v="g"):bE[v]||(void 0===x&&(x=12),y=!0,v="g"),(m||"0"===t&&"="===r)&&(m=!0,t="0",r="=");var g="$"===h?a:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===h?s:/[%p]/.test(v)?l:"",j=bE[v],w=/[defgprs%]/.test(v);function N(e){var a,s,l,h=g,N=b;if("c"===v)N=j(e)+N,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:j(Math.abs(e),x),y&&(e=function(e){e:for(var t,r=e.length,n=1,a=-1;n<r;++n)switch(e[n]){case".":a=t=n;break;case"0":0===a&&(a=n),t=n;break;default:if(!+e[n])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==u&&(S=!1),h=(S?"("===u?u:c:"-"===u||"("===u?"":u)+h,N=("s"===v?_E[8+fE/3]:"")+N+(S&&"("===u?")":""),w)for(a=-1,s=e.length;++a<s;)if(48>(l=e.charCodeAt(a))||l>57){N=(46===l?i+e.slice(a+1):e.slice(a))+N,e=e.slice(0,a);break}}f&&!m&&(e=n(e,1/0));var k=h.length+e.length+N.length,_=k<p?new Array(p-k+1).join(t):"";switch(f&&m&&(e=n(_+e,_.length?p-N.length:1/0),_=""),r){case"<":e=h+e+N+_;break;case"=":e=h+_+e+N;break;case"^":e=_.slice(0,k=_.length>>1)+h+e+N+_.slice(k);break;default:e=_+h+e+N}return o(e)}return x=void 0===x?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var r=u(((e=yE(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(pE(t)/3))),a=Math.pow(10,-n),s=_E[8+n/3];return function(e){return r(a*e)+s}}}}function CE(e,t,r,n){var a,s=QC(e,t,r);switch((n=yE(null==n?",f":n)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(pE(t)/3)))-pE(Math.abs(e)))}(s,i))||(n.precision=a),SE(n,i);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,pE(t)-pE(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(e){return Math.max(0,-pE(Math.abs(e)))}(s))||(n.precision=a-2*("%"===n.type))}return NE(n)}function AE(e){var t=e.domain;return e.ticks=function(e){var r=t();return GC(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return CE(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,a,s=t(),i=0,o=s.length-1,l=s[i],c=s[o],d=10;for(c<l&&(a=l,l=c,c=a,a=i,i=o,o=a);d-- >0;){if((a=XC(l,c,r))===n)return s[i]=l,s[o]=c,t(s);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}n=a}return e},e}function EE(){var e=hE();return e.copy=function(){return dE(e,EE())},nA.apply(e,arguments),AE(e)}function PE(e,t){var r,n=0,a=(e=e.slice()).length-1,s=e[n],i=e[a];return i<s&&(r=n,n=a,a=r,r=s,s=i,i=r),e[n]=t.floor(s),e[a]=t.ceil(i),e}function TE(e){return Math.log(e)}function ME(e){return Math.exp(e)}function DE(e){return-Math.log(-e)}function IE(e){return-Math.exp(-e)}function RE(e){return isFinite(e)?+("1e"+e):e<0?0:e}function FE(e){return(t,r)=>-e(-t,r)}function LE(e){const t=e(TE,ME),r=t.domain;let n,a,s=10;function i(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),a=function(e){return 10===e?RE:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),r()[0]<0?(n=FE(n),a=FE(a),e(DE,IE)):e(TE,ME),t}return t.base=function(e){return arguments.length?(s=+e,i()):s},t.domain=function(e){return arguments.length?(r(e),i()):r()},t.ticks=e=>{const t=r();let i=t[0],o=t[t.length-1];const l=o<i;l&&([i,o]=[o,i]);let c,d,u=n(i),h=n(o);const m=null==e?10:+e;let p=[];if(!(s%1)&&h-u<m){if(u=Math.floor(u),h=Math.ceil(h),i>0){for(;u<=h;++u)for(c=1;c<s;++c)if(d=u<0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}}else for(;u<=h;++u)for(c=s-1;c>=1;--c)if(d=u>0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}2*p.length<m&&(p=GC(i,o,m))}else p=GC(u,h,Math.min(h-u,m)).map(a);return l?p.reverse():p},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===s?"s":","),"function"!=typeof r&&(s%1||null!=(r=yE(r)).precision||(r.trim=!0),r=NE(r)),e===1/0)return r;const i=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/a(Math.round(n(e)));return t*s<s-.5&&(t*=s),t<=i?r(e):""}},t.nice=()=>r(PE(r(),{floor:e=>a(Math.floor(n(e))),ceil:e=>a(Math.ceil(n(e)))})),t}function BE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function qE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function zE(e){var t=1,r=e(BE(t),qE(t));return r.constant=function(r){return arguments.length?e(BE(t=+r),qE(t)):t},AE(r)}function $E(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function UE(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function VE(e){return e<0?-e*e:e*e}function WE(e){var t=e(iE,iE),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(iE,iE):.5===r?e(UE,VE):e($E(r),$E(1/r)):r},AE(t)}function HE(){var e=WE(uE());return e.copy=function(){return dE(e,HE()).exponent(e.exponent())},nA.apply(e,arguments),e}function KE(e){return Math.sign(e)*e*e}wE=OE({thousands:",",grouping:[3],currency:["$",""]}),NE=wE.format,SE=wE.formatPrefix;const YE=new Date,GE=new Date;function XE(e,t,r,n){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),a.round=e=>{const t=a(e),r=a.ceil(e);return e-t<r-e?t:r},a.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),a.range=(r,n,s)=>{const i=[];if(r=a.ceil(r),s=null==s?1:Math.floor(s),!(r<n&&s>0))return i;let o;do{i.push(o=new Date(+r)),t(r,s),e(r)}while(o<r&&r<n);return i},a.filter=r=>XE(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(a.count=(t,n)=>(YE.setTime(+t),GE.setTime(+n),e(YE),e(GE),Math.floor(r(YE,GE))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(n?t=>n(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const QE=XE(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);QE.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?XE(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):QE:null),QE.range;const JE=1e3,ZE=6e4,eP=36e5,tP=864e5,rP=6048e5,nP=2592e6,aP=31536e6,sP=XE(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*JE)},(e,t)=>(t-e)/JE,e=>e.getUTCSeconds());sP.range;const iP=XE(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*JE)},(e,t)=>{e.setTime(+e+t*ZE)},(e,t)=>(t-e)/ZE,e=>e.getMinutes());iP.range;const oP=XE(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ZE)},(e,t)=>(t-e)/ZE,e=>e.getUTCMinutes());oP.range;const lP=XE(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*JE-e.getMinutes()*ZE)},(e,t)=>{e.setTime(+e+t*eP)},(e,t)=>(t-e)/eP,e=>e.getHours());lP.range;const cP=XE(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*eP)},(e,t)=>(t-e)/eP,e=>e.getUTCHours());cP.range;const dP=XE(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ZE)/tP,e=>e.getDate()-1);dP.range;const uP=XE(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/tP,e=>e.getUTCDate()-1);uP.range;const hP=XE(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/tP,e=>Math.floor(e/tP));function mP(e){return XE(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ZE)/rP)}hP.range;const pP=mP(0),fP=mP(1),xP=mP(2),yP=mP(3),vP=mP(4),gP=mP(5),bP=mP(6);function jP(e){return XE(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/rP)}pP.range,fP.range,xP.range,yP.range,vP.range,gP.range,bP.range;const wP=jP(0),NP=jP(1),SP=jP(2),kP=jP(3),_P=jP(4),OP=jP(5),CP=jP(6);wP.range,NP.range,SP.range,kP.range,_P.range,OP.range,CP.range;const AP=XE(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());AP.range;const EP=XE(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth());EP.range;const PP=XE(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());PP.every=e=>isFinite(e=Math.floor(e))&&e>0?XE(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,PP.range;const TP=XE(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function MP(e,t,r,n,a,s){const i=[[sP,1,JE],[sP,5,5e3],[sP,15,15e3],[sP,30,3e4],[s,1,ZE],[s,5,3e5],[s,15,9e5],[s,30,18e5],[a,1,eP],[a,3,108e5],[a,6,216e5],[a,12,432e5],[n,1,tP],[n,2,1728e5],[r,1,rP],[t,1,nP],[t,3,7776e6],[e,1,aP]];function o(t,r,n){const a=Math.abs(r-t)/n,s=RC(([,,e])=>e).right(i,a);if(s===i.length)return e.every(QC(t/aP,r/aP,n));if(0===s)return QE.every(Math.max(QC(t,r,n),1));const[o,l]=i[a/i[s-1][2]<i[s][2]/a?s-1:s];return o.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const a=r&&"function"==typeof r.range?r:o(e,t,r),s=a?a.range(e,+t+1):[];return n?s.reverse():s},o]}TP.every=e=>isFinite(e=Math.floor(e))&&e>0?XE(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,TP.range;const[DP,IP]=MP(TP,EP,wP,hP,cP,oP),[RP,FP]=MP(PP,AP,pP,dP,lP,iP);function LP(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function BP(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function qP(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var zP,$P,UP,VP={"-":"",_:" ",0:"0"},WP=/^\s*\d+/,HP=/^%/,KP=/[\\^$*+?|[\]().{}]/g;function YP(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function GP(e){return e.replace(KP,"\\$&")}function XP(e){return new RegExp("^(?:"+e.map(GP).join("|")+")","i")}function QP(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function JP(e,t,r){var n=WP.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function ZP(e,t,r){var n=WP.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function eT(e,t,r){var n=WP.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function tT(e,t,r){var n=WP.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function rT(e,t,r){var n=WP.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function nT(e,t,r){var n=WP.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function aT(e,t,r){var n=WP.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function sT(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function iT(e,t,r){var n=WP.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function oT(e,t,r){var n=WP.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function lT(e,t,r){var n=WP.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function cT(e,t,r){var n=WP.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function dT(e,t,r){var n=WP.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function uT(e,t,r){var n=WP.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function hT(e,t,r){var n=WP.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function mT(e,t,r){var n=WP.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function pT(e,t,r){var n=WP.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function fT(e,t,r){var n=HP.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function xT(e,t,r){var n=WP.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function yT(e,t,r){var n=WP.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function vT(e,t){return YP(e.getDate(),t,2)}function gT(e,t){return YP(e.getHours(),t,2)}function bT(e,t){return YP(e.getHours()%12||12,t,2)}function jT(e,t){return YP(1+dP.count(PP(e),e),t,3)}function wT(e,t){return YP(e.getMilliseconds(),t,3)}function NT(e,t){return wT(e,t)+"000"}function ST(e,t){return YP(e.getMonth()+1,t,2)}function kT(e,t){return YP(e.getMinutes(),t,2)}function _T(e,t){return YP(e.getSeconds(),t,2)}function OT(e){var t=e.getDay();return 0===t?7:t}function CT(e,t){return YP(pP.count(PP(e)-1,e),t,2)}function AT(e){var t=e.getDay();return t>=4||0===t?vP(e):vP.ceil(e)}function ET(e,t){return e=AT(e),YP(vP.count(PP(e),e)+(4===PP(e).getDay()),t,2)}function PT(e){return e.getDay()}function TT(e,t){return YP(fP.count(PP(e)-1,e),t,2)}function MT(e,t){return YP(e.getFullYear()%100,t,2)}function DT(e,t){return YP((e=AT(e)).getFullYear()%100,t,2)}function IT(e,t){return YP(e.getFullYear()%1e4,t,4)}function RT(e,t){var r=e.getDay();return YP((e=r>=4||0===r?vP(e):vP.ceil(e)).getFullYear()%1e4,t,4)}function FT(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+YP(t/60|0,"0",2)+YP(t%60,"0",2)}function LT(e,t){return YP(e.getUTCDate(),t,2)}function BT(e,t){return YP(e.getUTCHours(),t,2)}function qT(e,t){return YP(e.getUTCHours()%12||12,t,2)}function zT(e,t){return YP(1+uP.count(TP(e),e),t,3)}function $T(e,t){return YP(e.getUTCMilliseconds(),t,3)}function UT(e,t){return $T(e,t)+"000"}function VT(e,t){return YP(e.getUTCMonth()+1,t,2)}function WT(e,t){return YP(e.getUTCMinutes(),t,2)}function HT(e,t){return YP(e.getUTCSeconds(),t,2)}function KT(e){var t=e.getUTCDay();return 0===t?7:t}function YT(e,t){return YP(wP.count(TP(e)-1,e),t,2)}function GT(e){var t=e.getUTCDay();return t>=4||0===t?_P(e):_P.ceil(e)}function XT(e,t){return e=GT(e),YP(_P.count(TP(e),e)+(4===TP(e).getUTCDay()),t,2)}function QT(e){return e.getUTCDay()}function JT(e,t){return YP(NP.count(TP(e)-1,e),t,2)}function ZT(e,t){return YP(e.getUTCFullYear()%100,t,2)}function eM(e,t){return YP((e=GT(e)).getUTCFullYear()%100,t,2)}function tM(e,t){return YP(e.getUTCFullYear()%1e4,t,4)}function rM(e,t){var r=e.getUTCDay();return YP((e=r>=4||0===r?_P(e):_P.ceil(e)).getUTCFullYear()%1e4,t,4)}function nM(){return"+0000"}function aM(){return"%"}function sM(e){return+e}function iM(e){return Math.floor(+e/1e3)}function oM(e){return new Date(e)}function lM(e){return e instanceof Date?+e:+new Date(+e)}function cM(e,t,r,n,a,s,i,o,l,c){var d=hE(),u=d.invert,h=d.domain,m=c(".%L"),p=c(":%S"),f=c("%I:%M"),x=c("%I %p"),y=c("%a %d"),v=c("%b %d"),g=c("%B"),b=c("%Y");function j(e){return(l(e)<e?m:o(e)<e?p:i(e)<e?f:s(e)<e?x:n(e)<e?a(e)<e?y:v:r(e)<e?g:b)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?h(Array.from(e,lM)):h().map(oM)},d.ticks=function(t){var r=h();return e(r[0],r[r.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?j:c(t)},d.nice=function(e){var r=h();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?h(PE(r,e)):d},d.copy=function(){return dE(d,cM(e,t,r,n,a,s,i,o,l,c))},d}function dM(){var e,t,r,n,a,s=0,i=1,o=iE,l=!1;function c(t){return null==t||isNaN(t=+t)?a:o(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var r,n;return arguments.length?([r,n]=t,o=e(r,n),c):[o(0),o(1)]}}return c.domain=function(a){return arguments.length?([s,i]=a,e=n(s=+s),t=n(i=+i),r=e===t?0:1/(t-e),c):[s,i]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(rE),c.rangeRound=d(nE),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return n=a,e=a(s),t=a(i),r=e===t?0:1/(t-e),c}}function uM(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function hM(){var e=WE(dM());return e.copy=function(){return uM(e,hM()).exponent(e.exponent())},aA.apply(e,arguments)}function mM(){var e,t,r,n,a,s,i,o=0,l=.5,c=1,d=1,u=iE,h=!1;function m(e){return isNaN(e=+e)?i:(e=.5+((e=+s(e))-t)*(d*e<d*t?n:a),u(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var r,n,a;return arguments.length?([r,n,a]=t,u=function(e,t){void 0===t&&(t=e,e=rE);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return s[t](e-t)}}(e,[r,n,a]),m):[u(0),u(.5),u(1)]}}return m.domain=function(i){return arguments.length?([o,l,c]=i,e=s(o=+o),t=s(l=+l),r=s(c=+c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,m):[o,l,c]},m.clamp=function(e){return arguments.length?(h=!!e,m):h},m.interpolator=function(e){return arguments.length?(u=e,m):u},m.range=p(rE),m.rangeRound=p(nE),m.unknown=function(e){return arguments.length?(i=e,m):i},function(i){return s=i,e=i(o),t=i(l),r=i(c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,m}}function pM(){var e=WE(mM());return e.copy=function(){return uM(e,pM()).exponent(e.exponent())},aA.apply(e,arguments)}!function(e){zP=function(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,c=XP(a),d=QP(a),u=XP(s),h=QP(s),m=XP(i),p=QP(i),f=XP(o),x=QP(o),y=XP(l),v=QP(l),g={a:function(e){return i[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:vT,e:vT,f:NT,g:DT,G:RT,H:gT,I:bT,j:jT,L:wT,m:ST,M:kT,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:sM,s:iM,S:_T,u:OT,U:CT,V:ET,w:PT,W:TT,x:null,X:null,y:MT,Y:IT,Z:FT,"%":aM},b={a:function(e){return i[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:LT,e:LT,f:UT,g:eM,G:rM,H:BT,I:qT,j:zT,L:$T,m:VT,M:WT,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:sM,s:iM,S:HT,u:KT,U:YT,V:XT,w:QT,W:JT,x:null,X:null,y:ZT,Y:tM,Z:nM,"%":aM},j={a:function(e,t,r){var n=m.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=y.exec(t.slice(r));return n?(e.m=v.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.m=x.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return S(e,t,r,n)},d:lT,e:lT,f:pT,g:aT,G:nT,H:dT,I:dT,j:cT,L:mT,m:oT,M:uT,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=d.get(n[0].toLowerCase()),r+n[0].length):-1},q:iT,Q:xT,s:yT,S:hT,u:ZP,U:eT,V:tT,w:JP,W:rT,x:function(e,t,n){return S(e,r,t,n)},X:function(e,t,r){return S(e,n,t,r)},y:aT,Y:nT,Z:sT,"%":fT};function w(e,t){return function(r){var n,a,s,i=[],o=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++o<c;)37===e.charCodeAt(o)&&(i.push(e.slice(l,o)),null!=(a=VP[n=e.charAt(++o)])?n=e.charAt(++o):a="e"===n?" ":"0",(s=t[n])&&(n=s(r,a)),i.push(n),l=o+1);return i.push(e.slice(l,o)),i.join("")}}function N(e,t){return function(r){var n,a,s=qP(1900,void 0,1);if(S(s,e,r+="",0)!=r.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(a=(n=BP(qP(s.y,0,1))).getUTCDay(),n=a>4||0===a?NP.ceil(n):NP(n),n=uP.offset(n,7*(s.V-1)),s.y=n.getUTCFullYear(),s.m=n.getUTCMonth(),s.d=n.getUTCDate()+(s.w+6)%7):(a=(n=LP(qP(s.y,0,1))).getDay(),n=a>4||0===a?fP.ceil(n):fP(n),n=dP.offset(n,7*(s.V-1)),s.y=n.getFullYear(),s.m=n.getMonth(),s.d=n.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),a="Z"in s?BP(qP(s.y,0,1)).getUTCDay():LP(qP(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(a+5)%7:s.w+7*s.U-(a+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,BP(s)):LP(s)}}function S(e,t,r,n){for(var a,s,i=0,o=t.length,l=r.length;i<o;){if(n>=l)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(s=j[a in VP?t.charAt(i++):a])||(n=s(e,r,n))<0)return-1}else if(a!=r.charCodeAt(n++))return-1}return n}return g.x=w(r,g),g.X=w(n,g),g.c=w(t,g),b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),{format:function(e){var t=w(e+="",g);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),$P=zP.format,zP.parse,UP=zP.utcFormat,zP.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const fM=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:oA,scaleDiverging:function e(){var t=AE(mM()(iE));return t.copy=function(){return uM(t,e())},aA.apply(t,arguments)},scaleDivergingLog:function e(){var t=LE(mM()).domain([.1,1,10]);return t.copy=function(){return uM(t,e()).base(t.base())},aA.apply(t,arguments)},scaleDivergingPow:pM,scaleDivergingSqrt:function(){return pM.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=zE(mM());return t.copy=function(){return uM(t,e()).constant(t.constant())},aA.apply(t,arguments)},scaleIdentity:function e(t){var r;function n(e){return null==e||isNaN(e=+e)?r:e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,aE),n):t.slice()},n.unknown=function(e){return arguments.length?(r=e,n):r},n.copy=function(){return e(t).unknown(r)},t=arguments.length?Array.from(t,aE):[0,1],AE(n)},scaleImplicit:sA,scaleLinear:EE,scaleLog:function e(){const t=LE(uE()).domain([1,10]);return t.copy=()=>dE(t,e()).base(t.base()),nA.apply(t,arguments),t},scaleOrdinal:iA,scalePoint:cA,scalePow:HE,scaleQuantile:function e(){var t,r=[],n=[],a=[];function s(){var e=0,t=Math.max(1,n.length);for(a=new Array(t-1);++e<t;)a[e-1]=rA(r,e/t);return i}function i(e){return null==e||isNaN(e=+e)?t:n[qC(a,e)]}return i.invertExtent=function(e){var t=n.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:r[0],t<a.length?a[t]:r[r.length-1]]},i.domain=function(e){if(!arguments.length)return r.slice();r=[];for(let t of e)null==t||isNaN(t=+t)||r.push(t);return r.sort(DC),s()},i.range=function(e){return arguments.length?(n=Array.from(e),s()):n.slice()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.quantiles=function(){return a.slice()},i.copy=function(){return e().domain(r).range(n).unknown(t)},nA.apply(i,arguments)},scaleQuantize:function e(){var t,r=0,n=1,a=1,s=[.5],i=[0,1];function o(e){return null!=e&&e<=e?i[qC(s,e,0,a)]:t}function l(){var e=-1;for(s=new Array(a);++e<a;)s[e]=((e+1)*n-(e-a)*r)/(a+1);return o}return o.domain=function(e){return arguments.length?([r,n]=e,r=+r,n=+n,l()):[r,n]},o.range=function(e){return arguments.length?(a=(i=Array.from(e)).length-1,l()):i.slice()},o.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,s[0]]:t>=a?[s[a-1],n]:[s[t-1],s[t]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return s.slice()},o.copy=function(){return e().domain([r,n]).range(i).unknown(t)},nA.apply(AE(o),arguments)},scaleRadial:function e(){var t,r=hE(),n=[0,1],a=!1;function s(e){var n=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(r(e));return isNaN(n)?t:a?Math.round(n):n}return s.invert=function(e){return r.invert(KE(e))},s.domain=function(e){return arguments.length?(r.domain(e),s):r.domain()},s.range=function(e){return arguments.length?(r.range((n=Array.from(e,aE)).map(KE)),s):n.slice()},s.rangeRound=function(e){return s.range(e).round(!0)},s.round=function(e){return arguments.length?(a=!!e,s):a},s.clamp=function(e){return arguments.length?(r.clamp(e),s):r.clamp()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e(r.domain(),n).round(a).clamp(r.clamp()).unknown(t)},nA.apply(s,arguments),AE(s)},scaleSequential:function e(){var t=AE(dM()(iE));return t.copy=function(){return uM(t,e())},aA.apply(t,arguments)},scaleSequentialLog:function e(){var t=LE(dM()).domain([1,10]);return t.copy=function(){return uM(t,e()).base(t.base())},aA.apply(t,arguments)},scaleSequentialPow:hM,scaleSequentialQuantile:function e(){var t=[],r=iE;function n(e){if(null!=e&&!isNaN(e=+e))return r((qC(t,e,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(DC),n},n.interpolator=function(e){return arguments.length?(r=e,n):r},n.range=function(){return t.map((e,n)=>r(n/(t.length-1)))},n.quantiles=function(e){return Array.from({length:e+1},(r,n)=>function(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return ZC(e);if(t>=1)return JC(e);var n,a=(n-1)*t,s=Math.floor(a),i=JC(eA(e,s).subarray(0,s+1));return i+(ZC(e.subarray(s+1))-i)*(a-s)}}(t,n/e))},n.copy=function(){return e(r).domain(t)},aA.apply(n,arguments)},scaleSequentialSqrt:function(){return hM.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=zE(dM());return t.copy=function(){return uM(t,e()).constant(t.constant())},aA.apply(t,arguments)},scaleSqrt:function(){return HE.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=zE(uE());return t.copy=function(){return dE(t,e()).constant(t.constant())},nA.apply(t,arguments)},scaleThreshold:function e(){var t,r=[.5],n=[0,1],a=1;function s(e){return null!=e&&e<=e?n[qC(r,e,0,a)]:t}return s.domain=function(e){return arguments.length?(r=Array.from(e),a=Math.min(r.length,n.length-1),s):r.slice()},s.range=function(e){return arguments.length?(n=Array.from(e),a=Math.min(r.length,n.length-1),s):n.slice()},s.invertExtent=function(e){var t=n.indexOf(e);return[r[t-1],r[t]]},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e().domain(r).range(n).unknown(t)},nA.apply(s,arguments)},scaleTime:function(){return nA.apply(cM(RP,FP,PP,AP,pP,dP,lP,iP,sP,$P).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return nA.apply(cM(DP,IP,TP,EP,wP,uP,cP,oP,sP,UP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:CE},Symbol.toStringTag,{value:"Module"}));var xM=Sx;var yM=function(e,t,r){for(var n=-1,a=e.length;++n<a;){var s=e[n],i=t(s);if(null!=i&&(void 0===o?i==i&&!xM(i):r(i,o)))var o=i,l=s}return l};var vM=function(e,t){return e>t},gM=yM,bM=vM,jM=GS;const wM=Tt(function(e){return e&&e.length?gM(e,jM,bM):void 0});var NM=function(e,t){return e<t},SM=yM,kM=NM,_M=GS;const OM=Tt(function(e){return e&&e.length?SM(e,_M,kM):void 0});var CM=iv,AM=ik,EM=e_,PM=ax;var TM=Hk,MM=function(e,t){return(PM(e)?CM:EM)(e,AM(t))};const DM=Tt(function(e,t){return TM(MM(e,t),1)});var IM=NS;const RM=Tt(function(e,t){return IM(e,t)});var FM,LM=1e9,BM=!0,qM="[DecimalError] ",zM=qM+"Invalid argument: ",$M=qM+"Exponent out of range: ",UM=Math.floor,VM=Math.pow,WM=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,HM=1e7,KM=9007199254740991,YM=UM(1286742750677284.5),GM={};function XM(e,t){var r,n,a,s,i,o,l,c,d=e.constructor,u=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),BM?iD(t,u):t;if(l=e.d,c=t.d,i=e.e,a=t.e,l=l.slice(),s=i-a){for(s<0?(n=l,s=-s,o=c.length):(n=c,a=i,o=l.length),s>(o=(i=Math.ceil(u/7))>o?i+1:o+1)&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for((o=l.length)-(s=c.length)<0&&(s=o,n=c,c=l,l=n),r=0;s;)r=(l[--s]=l[s]+c[s]+r)/HM|0,l[s]%=HM;for(r&&(l.unshift(r),++a),o=l.length;0==l[--o];)l.pop();return t.d=l,t.e=a,BM?iD(t,u):t}function QM(e,t,r){if(e!==~~e||e<t||e>r)throw Error(zM+e)}function JM(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)(r=7-(n=e[t]+"").length)&&(s+=nD(r)),s+=n;(r=7-(n=(i=e[t])+"").length)&&(s+=nD(r))}else if(0===i)return"0";for(;i%10==0;)i/=10;return s+i}GM.absoluteValue=GM.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},GM.comparedTo=GM.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,r=(n=s.d.length)<(a=e.d.length)?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1},GM.decimalPlaces=GM.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},GM.dividedBy=GM.div=function(e){return ZM(this,new this.constructor(e))},GM.dividedToIntegerBy=GM.idiv=function(e){var t=this.constructor;return iD(ZM(this,new t(e),0,1),t.precision)},GM.equals=GM.eq=function(e){return!this.cmp(e)},GM.exponent=function(){return tD(this)},GM.greaterThan=GM.gt=function(e){return this.cmp(e)>0},GM.greaterThanOrEqualTo=GM.gte=function(e){return this.cmp(e)>=0},GM.isInteger=GM.isint=function(){return this.e>this.d.length-2},GM.isNegative=GM.isneg=function(){return this.s<0},GM.isPositive=GM.ispos=function(){return this.s>0},GM.isZero=function(){return 0===this.s},GM.lessThan=GM.lt=function(e){return this.cmp(e)<0},GM.lessThanOrEqualTo=GM.lte=function(e){return this.cmp(e)<1},GM.logarithm=GM.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(FM))throw Error(qM+"NaN");if(r.s<1)throw Error(qM+(r.s?"NaN":"-Infinity"));return r.eq(FM)?new n(0):(BM=!1,t=ZM(aD(r,s),aD(e,s),s),BM=!0,iD(t,a))},GM.minus=GM.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?oD(t,e):XM(t,(e.s=-e.s,e))},GM.modulo=GM.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(!(e=new n(e)).s)throw Error(qM+"NaN");return r.s?(BM=!1,t=ZM(r,e,0,1).times(e),BM=!0,r.minus(t)):iD(new n(r),a)},GM.naturalExponential=GM.exp=function(){return eD(this)},GM.naturalLogarithm=GM.ln=function(){return aD(this)},GM.negated=GM.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},GM.plus=GM.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XM(t,e):oD(t,(e.s=-e.s,e))},GM.precision=GM.sd=function(e){var t,r,n,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(zM+e);if(t=tD(a)+1,r=7*(n=a.d.length-1)+1,n=a.d[n]){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},GM.squareRoot=GM.sqrt=function(){var e,t,r,n,a,s,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(qM+"NaN")}for(e=tD(o),BM=!1,0==(a=Math.sqrt(+o))||a==1/0?(((t=JM(o.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=UM((e+1)/2)-(e<0||e%2),n=new l(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new l(a.toString()),a=i=(r=l.precision)+3;;)if(n=(s=n).plus(ZM(o,s,i+2)).times(.5),JM(s.d).slice(0,i)===(t=JM(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&"4999"==t){if(iD(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if("9999"!=t)break;i+=4}return BM=!0,iD(n,r)},GM.times=GM.mul=function(e){var t,r,n,a,s,i,o,l,c,d=this,u=d.constructor,h=d.d,m=(e=new u(e)).d;if(!d.s||!e.s)return new u(0);for(e.s*=d.s,r=d.e+e.e,(l=h.length)<(c=m.length)&&(s=h,h=m,m=s,i=l,l=c,c=i),s=[],n=i=l+c;n--;)s.push(0);for(n=c;--n>=0;){for(t=0,a=l+n;a>n;)o=s[a]+m[n]*h[a-n-1]+t,s[a--]=o%HM|0,t=o/HM|0;s[a]=(s[a]+t)%HM|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,BM?iD(e,u.precision):e},GM.toDecimalPlaces=GM.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(QM(e,0,LM),void 0===t?t=n.rounding:QM(t,0,8),iD(r,e+tD(r)+1,t))},GM.toExponential=function(e,t){var r,n=this,a=n.constructor;return void 0===e?r=lD(n,!0):(QM(e,0,LM),void 0===t?t=a.rounding:QM(t,0,8),r=lD(n=iD(new a(n),e+1,t),!0,e+1)),r},GM.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return void 0===e?lD(a):(QM(e,0,LM),void 0===t?t=s.rounding:QM(t,0,8),r=lD((n=iD(new s(a),e+tD(a)+1,t)).abs(),!1,e+tD(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)},GM.toInteger=GM.toint=function(){var e=this,t=e.constructor;return iD(new t(e),tD(e)+1,t.rounding)},GM.toNumber=function(){return+this},GM.toPower=GM.pow=function(e){var t,r,n,a,s,i,o=this,l=o.constructor,c=+(e=new l(e));if(!e.s)return new l(FM);if(!(o=new l(o)).s){if(e.s<1)throw Error(qM+"Infinity");return o}if(o.eq(FM))return o;if(n=l.precision,e.eq(FM))return iD(o,n);if(i=(t=e.e)>=(r=e.d.length-1),s=o.s,i){if((r=c<0?-c:c)<=KM){for(a=new l(FM),t=Math.ceil(n/7+4),BM=!1;r%2&&cD((a=a.times(o)).d,t),0!==(r=UM(r/2));)cD((o=o.times(o)).d,t);return BM=!0,e.s<0?new l(FM).div(a):iD(a,n)}}else if(s<0)throw Error(qM+"NaN");return s=s<0&&1&e.d[Math.max(t,r)]?-1:1,o.s=1,BM=!1,a=e.times(aD(o,n+12)),BM=!0,(a=eD(a)).s=s,a},GM.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return void 0===e?n=lD(a,(r=tD(a))<=s.toExpNeg||r>=s.toExpPos):(QM(e,1,LM),void 0===t?t=s.rounding:QM(t,0,8),n=lD(a=iD(new s(a),e,t),e<=(r=tD(a))||r<=s.toExpNeg,e)),n},GM.toSignificantDigits=GM.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(QM(e,1,LM),void 0===t?t=r.rounding:QM(t,0,8)),iD(new r(this),e,t)},GM.toString=GM.valueOf=GM.val=GM.toJSON=GM[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=tD(e),r=e.constructor;return lD(e,t<=r.toExpNeg||t>=r.toExpPos)};var ZM=function(){function e(e,t){var r,n=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+n,e[a]=r%HM|0,n=r/HM|0;return n&&e.unshift(n),e}function t(e,t,r,n){var a,s;if(r!=n)s=r>n?1:-1;else for(a=s=0;a<r;a++)if(e[a]!=t[a]){s=e[a]>t[a]?1:-1;break}return s}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*HM+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,a,s,i){var o,l,c,d,u,h,m,p,f,x,y,v,g,b,j,w,N,S,k=n.constructor,_=n.s==a.s?1:-1,O=n.d,C=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(qM+"Division by zero");for(l=n.e-a.e,N=C.length,j=O.length,p=(m=new k(_)).d=[],c=0;C[c]==(O[c]||0);)++c;if(C[c]>(O[c]||0)&&--l,(v=null==s?s=k.precision:i?s+(tD(n)-tD(a))+1:s)<0)return new k(0);if(v=v/7+2|0,c=0,1==N)for(d=0,C=C[0],v++;(c<j||d)&&v--;c++)g=d*HM+(O[c]||0),p[c]=g/C|0,d=g%C|0;else{for((d=HM/(C[0]+1)|0)>1&&(C=e(C,d),O=e(O,d),N=C.length,j=O.length),b=N,x=(f=O.slice(0,N)).length;x<N;)f[x++]=0;(S=C.slice()).unshift(0),w=C[0],C[1]>=HM/2&&++w;do{d=0,(o=t(C,f,N,x))<0?(y=f[0],N!=x&&(y=y*HM+(f[1]||0)),(d=y/w|0)>1?(d>=HM&&(d=HM-1),1==(o=t(u=e(C,d),f,h=u.length,x=f.length))&&(d--,r(u,N<h?S:C,h))):(0==d&&(o=d=1),u=C.slice()),(h=u.length)<x&&u.unshift(0),r(f,u,x),-1==o&&(o=t(C,f,N,x=f.length))<1&&(d++,r(f,N<x?S:C,x)),x=f.length):0===o&&(d++,f=[0]),p[c++]=d,o&&f[0]?f[x++]=O[b]||0:(f=[O[b]],x=1)}while((b++<j||void 0!==f[0])&&v--)}return p[0]||p.shift(),m.e=l,iD(m,i?s+tD(m)+1:s)}}();function eD(e,t){var r,n,a,s,i,o=0,l=0,c=e.constructor,d=c.precision;if(tD(e)>16)throw Error($M+tD(e));if(!e.s)return new c(FM);for(null==t?(BM=!1,i=d):i=t,s=new c(.03125);e.abs().gte(.1);)e=e.times(s),l+=5;for(i+=Math.log(VM(2,l))/Math.LN10*2+5|0,r=n=a=new c(FM),c.precision=i;;){if(n=iD(n.times(e),i),r=r.times(++o),JM((s=a.plus(ZM(n,r,i))).d).slice(0,i)===JM(a.d).slice(0,i)){for(;l--;)a=iD(a.times(a),i);return c.precision=d,null==t?(BM=!0,iD(a,d)):a}a=s}}function tD(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function rD(e,t,r){if(t>e.LN10.sd())throw BM=!0,r&&(e.precision=r),Error(qM+"LN10 precision limit exceeded");return iD(new e(e.LN10),t)}function nD(e){for(var t="";e--;)t+="0";return t}function aD(e,t){var r,n,a,s,i,o,l,c,d,u=1,h=e,m=h.d,p=h.constructor,f=p.precision;if(h.s<1)throw Error(qM+(h.s?"NaN":"-Infinity"));if(h.eq(FM))return new p(0);if(null==t?(BM=!1,c=f):c=t,h.eq(10))return null==t&&(BM=!0),rD(p,c);if(c+=10,p.precision=c,n=(r=JM(m)).charAt(0),s=tD(h),!(Math.abs(s)<15e14))return l=rD(p,c+2,f).times(s+""),h=aD(new p(n+"."+r.slice(1)),c-10).plus(l),p.precision=f,null==t?(BM=!0,iD(h,f)):h;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=JM((h=h.times(e)).d)).charAt(0),u++;for(s=tD(h),n>1?(h=new p("0."+r),s++):h=new p(n+"."+r.slice(1)),o=i=h=ZM(h.minus(FM),h.plus(FM),c),d=iD(h.times(h),c),a=3;;){if(i=iD(i.times(d),c),JM((l=o.plus(ZM(i,new p(a),c))).d).slice(0,c)===JM(o.d).slice(0,c))return o=o.times(2),0!==s&&(o=o.plus(rD(p,c+2,f).times(s+""))),o=ZM(o,new p(u),c),p.precision=f,null==t?(BM=!0,iD(o,f)):o;o=l,a+=2}}function sD(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(n,a)){if(a-=n,r=r-n-1,e.e=UM(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=7;n<a;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),BM&&(e.e>YM||e.e<-YM))throw Error($M+r)}else e.s=0,e.e=0,e.d=[0];return e}function iD(e,t,r){var n,a,s,i,o,l,c,d,u=e.d;for(i=1,s=u[0];s>=10;s/=10)i++;if((n=t-i)<0)n+=7,a=t,c=u[d=0];else{if((d=Math.ceil((n+1)/7))>=(s=u.length))return e;for(c=s=u[d],i=1;s>=10;s/=10)i++;a=(n%=7)-7+i}if(void 0!==r&&(o=c/(s=VM(10,i-a-1))%10|0,l=t<0||void 0!==u[d+1]||c%s,l=r<4?(o||l)&&(0==r||r==(e.s<0?3:2)):o>5||5==o&&(4==r||l||6==r&&(n>0?a>0?c/VM(10,i-a):0:u[d-1])%10&1||r==(e.s<0?8:7))),t<1||!u[0])return l?(s=tD(e),u.length=1,t=t-s-1,u[0]=VM(10,(7-t%7)%7),e.e=UM(-t/7)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(0==n?(u.length=d,s=1,d--):(u.length=d+1,s=VM(10,7-n),u[d]=a>0?(c/VM(10,i-a)%VM(10,a)|0)*s:0),l)for(;;){if(0==d){(u[0]+=s)==HM&&(u[0]=1,++e.e);break}if(u[d]+=s,u[d]!=HM)break;u[d--]=0,s=1}for(n=u.length;0===u[--n];)u.pop();if(BM&&(e.e>YM||e.e<-YM))throw Error($M+tD(e));return e}function oD(e,t){var r,n,a,s,i,o,l,c,d,u,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),BM?iD(t,m):t;if(l=e.d,u=t.d,n=t.e,c=e.e,l=l.slice(),i=c-n){for((d=i<0)?(r=l,i=-i,o=u.length):(r=u,n=c,o=l.length),i>(a=Math.max(Math.ceil(m/7),o)+2)&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for((d=(a=l.length)<(o=u.length))&&(o=a),a=0;a<o;a++)if(l[a]!=u[a]){d=l[a]<u[a];break}i=0}for(d&&(r=l,l=u,u=r,t.s=-t.s),o=l.length,a=u.length-o;a>0;--a)l[o++]=0;for(a=u.length;a>i;){if(l[--a]<u[a]){for(s=a;s&&0===l[--s];)l[s]=HM-1;--l[s],l[a]+=HM}l[a]-=u[a]}for(;0===l[--o];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(t.d=l,t.e=n,BM?iD(t,m):t):new h(0)}function lD(e,t,r){var n,a=tD(e),s=JM(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+nD(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+nD(-a-1)+s,r&&(n=r-i)>0&&(s+=nD(n))):a>=i?(s+=nD(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+nD(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=nD(n))),e.s<0?"-"+s:s}function cD(e,t){if(e.length>t)return e.length=t,!0}function dD(e){if(!e||"object"!=typeof e)throw Error(qM+"Object expected");var t,r,n,a=["precision",1,LM,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(n=e[r=a[t]])){if(!(UM(n)===n&&n>=a[t+1]&&n<=a[t+2]))throw Error(zM+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(zM+r+": "+n);this[r]=new this(n)}return this}var uD=function e(t){var r,n,a;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(zM+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):sD(t,e.toString())}if("string"!=typeof e)throw Error(zM+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!WM.test(e))throw Error(zM+e);sD(t,e)}if(s.prototype=GM,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=dD,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)t.hasOwnProperty(n=a[r++])||(t[n]=this[n]);return s.config(t),s}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});FM=new uD(1);const hD=uD;function mD(e){return function(e){if(Array.isArray(e))return pD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return pD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pD(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fD=function(e){return e},xD={"@@functional/placeholder":!0},yD=function(e){return e===xD},vD=function(e){return function t(){return 0===arguments.length||1===arguments.length&&yD(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},gD=function e(t,r){return 1===t?r:vD(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var i=a.filter(function(e){return e!==xD}).length;return i>=t?r.apply(void 0,a):e(t-i,vD(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=a.map(function(e){return yD(e)?t.shift():e});return r.apply(void 0,mD(s).concat(t))}))})},bD=function(e){return gD(e.length,e)},jD=function(e,t){for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},wD=bD(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),ND=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},SD=function(e){var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every(function(e,r){return e===t[r]})?r:(t=a,r=e.apply(void 0,a))}};const kD={rangeStep:function(e,t,r){for(var n=new hD(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s},getDigitCount:function(e){return 0===e?1:Math.floor(new hD(e).abs().log(10).toNumber())+1},interpolateNumber:bD(function(e,t,r){var n=+e;return n+r*(+t-n)}),uninterpolateNumber:bD(function(e,t,r){var n=t-+e;return(r-e)/(n=n||1/0)}),uninterpolateTruncation:bD(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))})};function _D(e){return function(e){if(Array.isArray(e))return AD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||CD(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,s=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}return r}(e,t)||CD(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CD(e,t){if(e){if("string"==typeof e)return AD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?AD(e,t):void 0}}function AD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ED(e){var t=OD(e,2),r=t[0],n=t[1],a=r,s=n;return r>n&&(a=n,s=r),[a,s]}function PD(e,t,r){if(e.lte(0))return new hD(0);var n=kD.getDigitCount(e.toNumber()),a=new hD(10).pow(n),s=e.div(a),i=1!==n?.05:.1,o=new hD(Math.ceil(s.div(i).toNumber())).add(r).mul(i).mul(a);return t?o:new hD(Math.ceil(o))}function TD(e,t,r){var n=1,a=new hD(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new hD(10).pow(kD.getDigitCount(e)-1),a=new hD(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new hD(Math.floor(e)))}else 0===e?a=new hD(Math.floor((t-1)/2)):r||(a=new hD(Math.floor(e)));var i=Math.floor((t-1)/2),o=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return fD;var n=t.reverse(),a=n[0],s=n.slice(1);return function(){return s.reduce(function(e,t){return t(e)},a.apply(void 0,arguments))}}(wD(function(e){return a.add(new hD(e-i).mul(n)).toNumber()}),jD);return o(0,t)}function MD(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new hD(0),tickMin:new hD(0),tickMax:new hD(0)};var s,i=PD(new hD(t).sub(e).div(r-1),n,a);s=e<=0&&t>=0?new hD(0):(s=new hD(e).add(t).div(2)).sub(new hD(s).mod(i));var o=Math.ceil(s.sub(e).div(i).toNumber()),l=Math.ceil(new hD(t).sub(s).div(i).toNumber()),c=o+l+1;return c>r?MD(e,t,r,n,a+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:i,tickMin:s.sub(new hD(o).mul(i)),tickMax:s.add(new hD(l).mul(i))})}var DD=SD(function(e){var t=OD(e,2),r=t[0],n=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(a,2),o=OD(ED([r,n]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0){var d=c===1/0?[l].concat(_D(jD(0,a-1).map(function(){return 1/0}))):[].concat(_D(jD(0,a-1).map(function(){return-1/0})),[c]);return r>n?ND(d):d}if(l===c)return TD(l,a,s);var u=MD(l,c,i,s),h=u.step,m=u.tickMin,p=u.tickMax,f=kD.rangeStep(m,p.add(new hD(.1).mul(h)),h);return r>n?ND(f):f}),ID=SD(function(e,t){var r=OD(e,2),n=r[0],a=r[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=OD(ED([n,a]),2),o=i[0],l=i[1];if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(t,2),d=PD(new hD(l).sub(o).div(c-1),s,0),u=[].concat(_D(kD.rangeStep(new hD(o),new hD(l).sub(new hD(.99).mul(d)),d)),[l]);return n>a?ND(u):u}),RD="Invariant failed";function FD(e,t){if(!e)throw new Error(RD)}var LD=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function BD(e){return(BD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qD(){return qD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qD.apply(this,arguments)}function zD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function UD(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function VD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XD(n.key),n)}}function WD(e,t,r){return t=KD(t),function(e,t){if(t&&("object"===BD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,HD()?Reflect.construct(t,r||[],KD(e).constructor):t.apply(e,r))}function HD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(HD=function(){return!!e})()}function KD(e){return(KD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YD(e,t){return(YD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function GD(e,t,r){return(t=XD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XD(e){var t=function(e,t){if("object"!=BD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=BD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BD(t)?t:t+""}var QD=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),WD(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YD(e,t)}(e,At.Component),t=e,(r=[{key:"render",value:function(){var e=this.props,t=e.offset,r=e.layout,n=e.width,a=e.dataKey,s=e.data,i=e.dataPointFormatter,o=e.xAxis,l=e.yAxis,c=UD(e,LD),d=Fg(c,!1);"x"===this.props.direction&&"number"!==o.type&&FD(!1);var u=s.map(function(e){var s=i(e,a),c=s.x,u=s.y,h=s.value,m=s.errorVal;if(!m)return null;var p,f,x=[];if(Array.isArray(m)){var y=zD(m,2);p=y[0],f=y[1]}else p=f=m;if("vertical"===r){var v=o.scale,g=u+t,b=g+n,j=g-n,w=v(h-p),N=v(h+f);x.push({x1:N,y1:b,x2:N,y2:j}),x.push({x1:w,y1:g,x2:N,y2:g}),x.push({x1:w,y1:b,x2:w,y2:j})}else if("horizontal"===r){var S=l.scale,k=c+t,_=k-n,O=k+n,C=S(h-p),A=S(h+f);x.push({x1:_,y1:A,x2:O,y2:A}),x.push({x1:k,y1:C,x2:k,y2:A}),x.push({x1:_,y1:C,x2:O,y2:C})}return At.createElement(Yg,qD({className:"recharts-errorBar",key:"bar-".concat(x.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},d),x.map(function(e){return At.createElement("line",qD({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return At.createElement(Yg,{className:"recharts-errorBars"},u)}}])&&VD(t.prototype,r),n&&VD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function JD(e){return(JD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ZD(Object(r),!0).forEach(function(t){tI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tI(e,t,r){var n;return n=function(e,t){if("object"!=JD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=JD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==JD(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}GD(QD,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),GD(QD,"displayName","ErrorBar");var rI=function(e){var t=e.children,r=e.formattedGraphicalItems,n=e.legendWidth,a=e.legendContent,s=Mg(t,qk);if(!s)return null;var i,o=qk.defaultProps,l=void 0!==o?eI(eI({},o),s.props):{};return i=s.props&&s.props.payload?s.props&&s.props.payload:"children"===a?(r||[]).reduce(function(e,t){var r=t.item,n=t.props,a=n.sectors||n.data||[];return e.concat(a.map(function(e){return{type:s.props.iconType||r.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(r||[]).map(function(e){var t=e.item,r=t.type.defaultProps,n=void 0!==r?eI(eI({},r),t.props):{},a=n.dataKey,s=n.name,i=n.legendType;return{inactive:n.hide,dataKey:a,type:l.iconType||i||"square",color:uI(t),value:s||a,payload:n}}),eI(eI(eI({},l),qk.getWithHeight(s,n)),{},{payload:i,item:s})};function nI(e){return(nI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aI(e){return function(e){if(Array.isArray(e))return sI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return sI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sI(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iI(Object(r),!0).forEach(function(t){lI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function lI(e,t,r){var n;return n=function(e,t){if("object"!=nI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=nI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==nI(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cI(e,t,r){return Cv(e)||Cv(t)?r:og(t)?Ov(e,t,r):Ix(t)?t(e):r}function dI(e,t,r,n){var a=DM(e,function(e){return cI(e,t)});if("number"===r){var s=a.filter(function(e){return ig(e)||parseFloat(e)});return s.length?[OM(s),wM(s)]:[1/0,-1/0]}return(n?a.filter(function(e){return!Cv(e)}):a).map(function(e){return og(e)||e instanceof Date?e:""})}var uI=function(e){var t,r,n=e.type.displayName,a=null!==(t=e.type)&&void 0!==t&&t.defaultProps?oI(oI({},e.type.defaultProps),e.props):e.props,s=a.stroke,i=a.fill;switch(n){case"Line":r=s;break;case"Area":case"Radar":r=s&&"none"!==s?s:i;break;default:r=i}return r},hI=function(e,t,r,n,a){var s=Tg(t.props.children,QD).filter(function(e){return function(e,t,r){return!!Cv(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===r?"xAxis"===t:"y"!==r||"yAxis"===t)}(n,a,e.props.direction)});if(s&&s.length){var i=s.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var n=cI(t,r);if(Cv(n))return e;var a=Array.isArray(n)?[OM(n),wM(n)]:[n,n],s=i.reduce(function(e,r){var n=cI(t,r,0),s=a[0]-Math.abs(Array.isArray(n)?n[0]:n),i=a[1]+Math.abs(Array.isArray(n)?n[1]:n);return[Math.min(s,e[0]),Math.max(i,e[1])]},[1/0,-1/0]);return[Math.min(s[0],e[0]),Math.max(s[1],e[1])]},[1/0,-1/0])}return null},mI=function(e,t,r,n,a){var s=t.map(function(t){var s=t.props.dataKey;return"number"===r&&s&&hI(e,t,s,n)||dI(e,s,r,a)});if("number"===r)return s.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var i={};return s.reduce(function(e,t){for(var r=0,n=t.length;r<n;r++)i[t[r]]||(i[t[r]]=!0,e.push(t[r]));return e},[])},pI=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},fI=function(e,t,r,n){if(n)return e.map(function(e){return e.coordinate});var a,s,i=e.map(function(e){return e.coordinate===t&&(a=!0),e.coordinate===r&&(s=!0),e.coordinate});return a||i.push(t),s||i.push(r),i},xI=function(e,t,r){if(!e)return null;var n=e.scale,a=e.duplicateDomain,s=e.type,i=e.range,o="scaleBand"===e.realScaleType?n.bandwidth()/2:2,l=(t||r)&&"category"===s&&n.bandwidth?n.bandwidth()/o:0;return l="angleAxis"===e.axisType&&(null==i?void 0:i.length)>=2?2*ag(i[0]-i[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=a?a.indexOf(e):e;return{coordinate:n(t)+l,value:e,offset:l}}).filter(function(e){return!ng(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:n(e)+l,value:e,index:t,offset:l}}):n.ticks&&!r?n.ticks(e.tickCount).map(function(e){return{coordinate:n(e)+l,value:e,offset:l}}):n.domain().map(function(e,t){return{coordinate:n(e)+l,value:a?a[e]:e,index:t,offset:l}})},yI=new WeakMap,vI=function(e,t){if("function"!=typeof t)return e;yI.has(e)||yI.set(e,new WeakMap);var r=yI.get(e);if(r.has(t))return r.get(t);var n=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,n),n},gI=function(e,t,r){var n=e.scale,a=e.type,s=e.layout,i=e.axisType;if("auto"===n)return"radial"===s&&"radiusAxis"===i?{scale:oA(),realScaleType:"band"}:"radial"===s&&"angleAxis"===i?{scale:EE(),realScaleType:"linear"}:"category"===a&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:cA(),realScaleType:"point"}:"category"===a?{scale:oA(),realScaleType:"band"}:{scale:EE(),realScaleType:"linear"};if(Tv(n)){var o="scale".concat(bb(n));return{scale:(fM[o]||cA)(),realScaleType:fM[o]?o:"point"}}return Ix(n)?{scale:n}:{scale:cA(),realScaleType:"point"}},bI=1e-4,jI=function(e){var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-bI,s=Math.max(n[0],n[1])+bI,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}},wI={sign:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=ng(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,a,s=0,i=e[0].length;s<i;++s){for(a=r=0;r<n;++r)a+=e[r][s][1]||0;if(a)for(r=0;r<n;++r)e[r][s][1]/=a}jj(e,t)}},none:jj,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,a=e[t[0]],s=a.length;n<s;++n){for(var i=0,o=0;i<r;++i)o+=e[i][n][1]||0;a[n][1]+=a[n][0]=-o/2}jj(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,a,s=0,i=1;i<n;++i){for(var o=0,l=0,c=0;o<a;++o){for(var d=e[t[o]],u=d[i][1]||0,h=(u-(d[i-1][1]||0))/2,m=0;m<o;++m){var p=e[t[m]];h+=(p[i][1]||0)-(p[i-1][1]||0)}l+=u,c+=h*u}r[i-1][1]+=r[i-1][0]=s,l&&(s-=c/l)}r[i-1][1]+=r[i-1][0]=s,jj(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=ng(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}}},NI=function(e,t,r){var n=t.map(function(e){return e.props.dataKey}),a=wI[r],s=function(){var e=jb([]),t=wj,r=jj,n=Nj;function a(a){var s,i,o=Array.from(e.apply(this,arguments),Sj),l=o.length,c=-1;for(const e of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+n(e,o[s].key,c,a)]).data=e;for(s=0,i=Db(t(o));s<l;++s)o[i[s]].index=s;return r(o,i),o}return a.keys=function(t){return arguments.length?(e="function"==typeof t?t:jb(Array.from(t)),a):e},a.value=function(e){return arguments.length?(n="function"==typeof e?e:jb(+e),a):n},a.order=function(e){return arguments.length?(t=null==e?wj:"function"==typeof e?e:jb(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(r=null==e?jj:e,a):r},a}().keys(n).value(function(e,t){return+cI(e,t,0)}).order(wj).offset(a);return s(e)},SI=function(e,t){var r=t.realScaleType,n=t.type,a=t.tickCount,s=t.originalDomain,i=t.allowDecimals,o=r||t.scale;if("auto"!==o&&"linear"!==o)return null;if(a&&"number"===n&&s&&("auto"===s[0]||"auto"===s[1])){var l=e.domain();if(!l.length)return null;var c=DD(l,a,i);return e.domain([OM(c),wM(c)]),{niceTicks:c}}if(a&&"number"===n){var d=e.domain();return{niceTicks:ID(d,a,i)}}return null};function kI(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,s=e.index,i=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Cv(a[t.dataKey])){var o=mg(r,"value",a[t.dataKey]);if(o)return o.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var l=cI(a,Cv(i)?t.dataKey:i);return Cv(l)?null:t.scale(l)}var _I=function(e){var t=e.axis,r=e.ticks,n=e.offset,a=e.bandSize,s=e.entry,i=e.index;if("category"===t.type)return r[i]?r[i].coordinate+n:null;var o=cI(s,t.dataKey,t.domain[i]);return Cv(o)?null:t.scale(o)-a/2+n},OI=function(e,t,r){return Object.keys(e).reduce(function(n,a){var s=e[a].stackedData.reduce(function(e,n){var a=n.slice(t,r+1).reduce(function(e,t){return[OM(t.concat([e[0]]).filter(ig)),wM(t.concat([e[1]]).filter(ig))]},[1/0,-1/0]);return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(s[0],n[0]),Math.max(s[1],n[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},CI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,AI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,EI=function(e,t,r){if(Ix(e))return e(t,r);if(!Array.isArray(e))return t;var n=[];if(ig(e[0]))n[0]=r?e[0]:Math.min(e[0],t[0]);else if(CI.test(e[0])){var a=+CI.exec(e[0])[1];n[0]=t[0]-a}else Ix(e[0])?n[0]=e[0](t[0]):n[0]=t[0];if(ig(e[1]))n[1]=r?e[1]:Math.max(e[1],t[1]);else if(AI.test(e[1])){var s=+AI.exec(e[1])[1];n[1]=t[1]+s}else Ix(e[1])?n[1]=e[1](t[1]):n[1]=t[1];return n},PI=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=R_(t,function(e){return e.coordinate}),s=1/0,i=1,o=a.length;i<o;i++){var l=a[i],c=a[i-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},TI=function(e,t,r){return e&&e.length?RM(e,Ov(r,"type.defaultProps.domain"))?t:e:t},MI=function(e,t){var r=e.type.defaultProps?oI(oI({},e.type.defaultProps),e.props):e.props,n=r.dataKey,a=r.name,s=r.unit,i=r.formatter,o=r.tooltipType,l=r.chartType,c=r.hide;return oI(oI({},Fg(e,!1)),{},{dataKey:n,unit:s,formatter:i,name:a||n,color:uI(e),value:cI(t,n),type:o,payload:t,chartType:l,hide:c})};function DI(e){return(DI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function II(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function RI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?II(Object(r),!0).forEach(function(t){FI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):II(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function FI(e,t,r){var n;return n=function(e,t){if("object"!=DI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=DI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==DI(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return BI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BI(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qI=Math.PI/180,zI=function(e){return 180*e/Math.PI},$I=function(e,t,r,n){return{x:e+Math.cos(-qI*n)*r,y:t+Math.sin(-qI*n)*r}},UI=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},VI=function(e,t){var r,n,a,s,i,o,l=e.x,c=e.y,d=t.cx,u=t.cy,h=(n={x:d,y:u},a=(r={x:l,y:c}).x,s=r.y,i=n.x,o=n.y,Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2)));if(h<=0)return{radius:h};var m=(l-d)/h,p=Math.acos(m);return c>u&&(p=2*Math.PI-p),{radius:h,angle:zI(p),angleInRadian:p}},WI=function(e,t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),s=Math.floor(n/360);return e+360*Math.min(a,s)},HI=function(e,t){var r=e.x,n=e.y,a=VI({x:r,y:n},t),s=a.radius,i=a.angle,o=t.innerRadius,l=t.outerRadius;if(s<o||s>l)return!1;if(0===s)return!0;var c,d=function(e){var t=e.startAngle,r=e.endAngle,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-360*s,endAngle:r-360*s}}(t),u=d.startAngle,h=d.endAngle,m=i;if(u<=h){for(;m>h;)m-=360;for(;m<u;)m+=360;c=m>=u&&m<=h}else{for(;m>u;)m-=360;for(;m<h;)m+=360;c=m>=h&&m<=u}return c?RI(RI({},t),{},{radius:s,angle:WI(m,t)}):null},KI=function(e){return Ct.isValidElement(e)||Ix(e)||"boolean"==typeof e?"":e.className};function YI(e){return(YI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var GI=["offset"];function XI(e){return function(e){if(Array.isArray(e))return QI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return QI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QI(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function JI(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ZI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ZI(Object(r),!0).forEach(function(t){tR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tR(e,t,r){var n;return n=function(e,t){if("object"!=YI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=YI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==YI(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rR(){return rR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rR.apply(this,arguments)}var nR=function(e,t,r){var n,a,s=e.position,i=e.viewBox,o=e.offset,l=e.className,c=i,d=c.cx,u=c.cy,h=c.innerRadius,m=c.outerRadius,p=c.startAngle,f=c.endAngle,x=c.clockWise,y=(h+m)/2,v=function(e,t){return ag(t-e)*Math.min(Math.abs(t-e),360)}(p,f),g=v>=0?1:-1;"insideStart"===s?(n=p+g*o,a=x):"insideEnd"===s?(n=f-g*o,a=!x):"end"===s&&(n=f+g*o,a=x),a=v<=0?a:!a;var b=$I(d,u,y,n),j=$I(d,u,y,n+359*(a?1:-1)),w="M".concat(b.x,",").concat(b.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(a?0:1,",\n    ").concat(j.x,",").concat(j.y),N=Cv(e.id)?cg("recharts-radial-line-"):e.id;return At.createElement("text",rR({},r,{dominantBaseline:"central",className:Vr("recharts-radial-bar-label",l)}),At.createElement("defs",null,At.createElement("path",{id:N,d:w})),At.createElement("textPath",{xlinkHref:"#".concat(N)},t))};function aR(e){var t,r=e.offset,n=eR({offset:void 0===r?5:r},JI(e,GI)),a=n.viewBox,s=n.position,i=n.value,o=n.children,l=n.content,c=n.className,d=void 0===c?"":c,u=n.textBreakAll;if(!a||Cv(i)&&Cv(o)&&!Ct.isValidElement(l)&&!Ix(l))return null;if(Ct.isValidElement(l))return Ct.cloneElement(l,n);if(Ix(l)){if(t=Ct.createElement(l,n),Ct.isValidElement(t))return t}else t=function(e){var t=e.value,r=e.formatter,n=Cv(e.children)?t:e.children;return Ix(r)?r(n):n}(n);var h=function(e){return"cx"in e&&ig(e.cx)}(a),m=Fg(n,!0);if(h&&("insideStart"===s||"insideEnd"===s||"end"===s))return nR(n,t,m);var p=h?function(e){var t=e.viewBox,r=e.offset,n=e.position,a=t,s=a.cx,i=a.cy,o=a.innerRadius,l=a.outerRadius,c=(a.startAngle+a.endAngle)/2;if("outside"===n){var d=$I(s,i,l+r,c),u=d.x;return{x:u,y:d.y,textAnchor:u>=s?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=$I(s,i,(o+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(n):function(e){var t=e.viewBox,r=e.parentViewBox,n=e.offset,a=e.position,s=t,i=s.x,o=s.y,l=s.width,c=s.height,d=c>=0?1:-1,u=d*n,h=d>0?"end":"start",m=d>0?"start":"end",p=l>=0?1:-1,f=p*n,x=p>0?"end":"start",y=p>0?"start":"end";if("top"===a)return eR(eR({},{x:i+l/2,y:o-d*n,textAnchor:"middle",verticalAnchor:h}),r?{height:Math.max(o-r.y,0),width:l}:{});if("bottom"===a)return eR(eR({},{x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:m}),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{});if("left"===a){var v={x:i-f,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return eR(eR({},v),r?{width:Math.max(v.x-r.x,0),height:c}:{})}if("right"===a){var g={x:i+l+f,y:o+c/2,textAnchor:y,verticalAnchor:"middle"};return eR(eR({},g),r?{width:Math.max(r.x+r.width-g.x,0),height:c}:{})}var b=r?{width:l,height:c}:{};return"insideLeft"===a?eR({x:i+f,y:o+c/2,textAnchor:y,verticalAnchor:"middle"},b):"insideRight"===a?eR({x:i+l-f,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},b):"insideTop"===a?eR({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:m},b):"insideBottom"===a?eR({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},b):"insideTopLeft"===a?eR({x:i+f,y:o+u,textAnchor:y,verticalAnchor:m},b):"insideTopRight"===a?eR({x:i+l-f,y:o+u,textAnchor:x,verticalAnchor:m},b):"insideBottomLeft"===a?eR({x:i+f,y:o+c-u,textAnchor:y,verticalAnchor:h},b):"insideBottomRight"===a?eR({x:i+l-f,y:o+c-u,textAnchor:x,verticalAnchor:h},b):Px(a)&&(ig(a.x)||sg(a.x))&&(ig(a.y)||sg(a.y))?eR({x:i+dg(a.x,l),y:o+dg(a.y,c),textAnchor:"end",verticalAnchor:"end"},b):eR({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)}(n);return At.createElement(MC,rR({className:Vr("recharts-label",d)},m,p,{breakAll:u}),t)}aR.displayName="Label";var sR=function(e){var t=e.cx,r=e.cy,n=e.angle,a=e.startAngle,s=e.endAngle,i=e.r,o=e.radius,l=e.innerRadius,c=e.outerRadius,d=e.x,u=e.y,h=e.top,m=e.left,p=e.width,f=e.height,x=e.clockWise,y=e.labelViewBox;if(y)return y;if(ig(p)&&ig(f)){if(ig(d)&&ig(u))return{x:d,y:u,width:p,height:f};if(ig(h)&&ig(m))return{x:h,y:m,width:p,height:f}}return ig(d)&&ig(u)?{x:d,y:u,width:0,height:0}:ig(t)&&ig(r)?{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:l||0,outerRadius:c||o||i||0,clockWise:x}:e.viewBox?e.viewBox:{}};aR.parseViewBox=sR,aR.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=sR(e),s=Tg(n,aR).map(function(e,r){return Ct.cloneElement(e,{viewBox:t||a,key:"label-".concat(r)})});if(!r)return s;var i=function(e,t){return e?!0===e?At.createElement(aR,{key:"label-implicit",viewBox:t}):og(e)?At.createElement(aR,{key:"label-implicit",viewBox:t,value:e}):Ct.isValidElement(e)?e.type===aR?Ct.cloneElement(e,{key:"label-implicit",viewBox:t}):At.createElement(aR,{key:"label-implicit",content:e,viewBox:t}):Ix(e)?At.createElement(aR,{key:"label-implicit",content:e,viewBox:t}):Px(e)?At.createElement(aR,rR({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||a);return[i].concat(XI(s))};const iR=Tt(function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0});function oR(e){return(oR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var lR=["valueAccessor"],cR=["data","dataKey","clockWise","id","textBreakAll"];function dR(e){return function(e){if(Array.isArray(e))return uR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return uR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uR(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hR(){return hR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hR.apply(this,arguments)}function mR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mR(Object(r),!0).forEach(function(t){fR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function fR(e,t,r){var n;return n=function(e,t){if("object"!=oR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==oR(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xR(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var yR=function(e){return Array.isArray(e.value)?iR(e.value):e.value};function vR(e){var t=e.valueAccessor,r=void 0===t?yR:t,n=xR(e,lR),a=n.data,s=n.dataKey,i=n.clockWise,o=n.id,l=n.textBreakAll,c=xR(n,cR);return a&&a.length?At.createElement(Yg,{className:"recharts-label-list"},a.map(function(e,t){var n=Cv(s)?r(e,t):cI(e&&e.payload,s),a=Cv(o)?{}:{id:"".concat(o,"-").concat(t)};return At.createElement(aR,hR({},Fg(e,!0),c,a,{parentViewBox:e.parentViewBox,value:n,textBreakAll:l,viewBox:aR.parseViewBox(Cv(i)?e:pR(pR({},e),{},{clockWise:i})),key:"label-".concat(t),index:t}))})):null}function gR(e){return(gR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bR(){return bR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bR.apply(this,arguments)}function jR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jR(Object(r),!0).forEach(function(t){NR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function NR(e,t,r){var n;return n=function(e,t){if("object"!=gR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==gR(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}vR.displayName="LabelList",vR.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=Tg(e.children,vR).map(function(e,r){return Ct.cloneElement(e,{data:t,key:"labelList-".concat(r)})});return r?[function(e,t){return e?!0===e?At.createElement(vR,{key:"labelList-implicit",data:t}):At.isValidElement(e)||Ix(e)?At.createElement(vR,{key:"labelList-implicit",data:t,content:e}):Px(e)?At.createElement(vR,hR({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t)].concat(dR(n)):n};var SR=function(e){var t=e.cx,r=e.cy,n=e.radius,a=e.angle,s=e.sign,i=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,c=o*(i?1:-1)+n,d=Math.asin(o/c)/qI,u=l?a:a+s*d,h=l?a-s*d:a;return{center:$I(t,r,c,u),circleTangency:$I(t,r,n,u),lineTangency:$I(t,r,c*Math.cos(d*qI),h),theta:d}},kR=function(e){var t=e.cx,r=e.cy,n=e.innerRadius,a=e.outerRadius,s=e.startAngle,i=function(e,t){return ag(t-e)*Math.min(Math.abs(t-e),359.999)}(s,e.endAngle),o=s+i,l=$I(t,r,a,s),c=$I(t,r,a,o),d="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(i)>180),",").concat(+(s>o),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(n>0){var u=$I(t,r,n,s),h=$I(t,r,n,o);d+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(i)>180),",").concat(+(s<=o),",\n            ").concat(u.x,",").concat(u.y," Z")}else d+="L ".concat(t,",").concat(r," Z");return d},_R={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},OR=function(e){var t=wR(wR({},_R),e),r=t.cx,n=t.cy,a=t.innerRadius,s=t.outerRadius,i=t.cornerRadius,o=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,d=t.endAngle,u=t.className;if(s<a||c===d)return null;var h,m=Vr("recharts-sector",u),p=s-a,f=dg(i,p,0,!0);return h=f>0&&Math.abs(c-d)<360?function(e){var t=e.cx,r=e.cy,n=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,i=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,d=ag(c-l),u=SR({cx:t,cy:r,radius:a,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),h=u.circleTangency,m=u.lineTangency,p=u.theta,f=SR({cx:t,cy:r,radius:a,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:o}),x=f.circleTangency,y=f.lineTangency,v=f.theta,g=o?Math.abs(l-c):Math.abs(l-c)-p-v;if(g<0)return i?"M ".concat(m.x,",").concat(m.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*-s,",0\n      "):kR({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:c});var b="M ".concat(m.x,",").concat(m.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(g>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,"\n  ");if(n>0){var j=SR({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),w=j.circleTangency,N=j.lineTangency,S=j.theta,k=SR({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),_=k.circleTangency,O=k.lineTangency,C=k.theta,A=o?Math.abs(l-c):Math.abs(l-c)-S-C;if(A<0&&0===s)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+="L".concat(O.x,",").concat(O.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(A>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else b+="L".concat(t,",").concat(r,"Z");return b}({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(f,p/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}):kR({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:c,endAngle:d}),At.createElement("path",bR({},Fg(t,!0),{className:m,d:h,role:"img"}))};function CR(e){return(CR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AR(){return AR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AR.apply(this,arguments)}function ER(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function PR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ER(Object(r),!0).forEach(function(t){TR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ER(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function TR(e,t,r){var n;return n=function(e,t){if("object"!=CR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=CR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==CR(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var MR={curveBasisClosed:function(e){return new lj(e)},curveBasisOpen:function(e){return new cj(e)},curveBasis:function(e){return new oj(e)},curveBumpX:function(e){return new zb(e,!0)},curveBumpY:function(e){return new zb(e,!1)},curveLinearClosed:function(e){return new dj(e)},curveLinear:Rb,curveMonotoneX:function(e){return new fj(e)},curveMonotoneY:function(e){return new xj(e)},curveNatural:function(e){return new vj(e)},curveStep:function(e){return new bj(e,.5)},curveStepAfter:function(e){return new bj(e,1)},curveStepBefore:function(e){return new bj(e,0)}},DR=function(e){return e.x===+e.x&&e.y===+e.y},IR=function(e){return e.x},RR=function(e){return e.y},FR=function(e){var t,r=e.type,n=void 0===r?"linear":r,a=e.points,s=void 0===a?[]:a,i=e.baseLine,o=e.layout,l=e.connectNulls,c=void 0!==l&&l,d=function(e,t){if(Ix(e))return e;var r="curve".concat(bb(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?MR[r]||Rb:MR["".concat(r).concat("vertical"===t?"Y":"X")]}(n,o),u=c?s.filter(function(e){return DR(e)}):s;if(Array.isArray(i)){var h=c?i.filter(function(e){return DR(e)}):i,m=u.map(function(e,t){return PR(PR({},e),{},{base:h[t]})});return(t="vertical"===o?qb().y(RR).x1(IR).x0(function(e){return e.base.x}):qb().x(IR).y1(RR).y0(function(e){return e.base.y})).defined(DR).curve(d),t(m)}return(t="vertical"===o&&ig(i)?qb().y(RR).x1(IR).x0(i):ig(i)?qb().x(IR).y1(RR).y0(i):Bb().x(IR).y(RR)).defined(DR).curve(d),t(u)},LR=function(e){var t=e.className,r=e.points,n=e.path,a=e.pathRef;if(!(r&&r.length||n))return null;var s=r&&r.length?FR(e):n;return Ct.createElement("path",AR({},Fg(e,!1),jg(e),{className:Vr("recharts-curve",t),d:s,ref:a}))},BR={exports:{}};function qR(){}function zR(){}zR.resetWarningCache=qR;BR.exports=function(){function e(e,t,r,n,a,s){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==s){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:zR,resetWarningCache:qR};return r.PropTypes=r,r}();const $R=Tt(BR.exports);var UR=Object.getOwnPropertyNames,VR=Object.getOwnPropertySymbols,WR=Object.prototype.hasOwnProperty;function HR(e,t){return function(r,n,a){return e(r,n,a)&&t(r,n,a)}}function KR(e){return function(t,r,n){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,n);var a=n.cache,s=a.get(t),i=a.get(r);if(s&&i)return s===r&&i===t;a.set(t,r),a.set(r,t);var o=e(t,r,n);return a.delete(t),a.delete(r),o}}function YR(e){return UR(e).concat(VR(e))}var GR=Object.hasOwn||function(e,t){return WR.call(e,t)};function XR(e,t){return e===t||!e&&!t&&e!=e&&t!=t}var QR=Object.getOwnPropertyDescriptor,JR=Object.keys;function ZR(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function eF(e,t){return XR(e.getTime(),t.getTime())}function tF(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function rF(e,t){return e===t}function nF(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a,s,i=new Array(n),o=e.entries(),l=0;(a=o.next())&&!a.done;){for(var c=t.entries(),d=!1,u=0;(s=c.next())&&!s.done;)if(i[u])u++;else{var h=a.value,m=s.value;if(r.equals(h[0],m[0],l,u,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){d=i[u]=!0;break}u++}if(!d)return!1;l++}return!0}var aF=XR;function sF(e,t,r){var n=JR(e),a=n.length;if(JR(t).length!==a)return!1;for(;a-- >0;)if(!hF(e,t,r,n[a]))return!1;return!0}function iF(e,t,r){var n,a,s,i=YR(e),o=i.length;if(YR(t).length!==o)return!1;for(;o-- >0;){if(!hF(e,t,r,n=i[o]))return!1;if(a=QR(e,n),s=QR(t,n),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable))return!1}return!0}function oF(e,t){return XR(e.valueOf(),t.valueOf())}function lF(e,t){return e.source===t.source&&e.flags===t.flags}function cF(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a,s,i=new Array(n),o=e.values();(a=o.next())&&!a.done;){for(var l=t.values(),c=!1,d=0;(s=l.next())&&!s.done;){if(!i[d]&&r.equals(a.value,s.value,a.value,s.value,e,t,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function dF(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function uF(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function hF(e,t,r,n){return!("_owner"!==n&&"__o"!==n&&"__v"!==n||!e.$$typeof&&!t.$$typeof)||GR(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var mF=Array.isArray,pF="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,fF=Object.assign,xF=Object.prototype.toString.call.bind(Object.prototype.toString);var yF=vF();function vF(e){void 0===e&&(e={});var t,r=e.circular,n=void 0!==r&&r,a=e.createInternalComparator,s=e.createState,i=e.strict,o=void 0!==i&&i,l=function(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?iF:ZR,areDatesEqual:eF,areErrorsEqual:tF,areFunctionsEqual:rF,areMapsEqual:n?HR(nF,iF):nF,areNumbersEqual:aF,areObjectsEqual:n?iF:sF,arePrimitiveWrappersEqual:oF,areRegExpsEqual:lF,areSetsEqual:n?HR(cF,iF):cF,areTypedArraysEqual:n?iF:dF,areUrlsEqual:uF};if(r&&(a=fF({},a,r(a))),t){var s=KR(a.areArraysEqual),i=KR(a.areMapsEqual),o=KR(a.areObjectsEqual),l=KR(a.areSetsEqual);a=fF({},a,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return a}(e),c=function(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,s=e.areMapsEqual,i=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,d=e.areSetsEqual,u=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,m,p){if(e===m)return!0;if(null==e||null==m)return!1;var f=typeof e;if(f!==typeof m)return!1;if("object"!==f)return"number"===f?i(e,m,p):"function"===f&&a(e,m,p);var x=e.constructor;if(x!==m.constructor)return!1;if(x===Object)return o(e,m,p);if(mF(e))return t(e,m,p);if(null!=pF&&pF(e))return u(e,m,p);if(x===Date)return r(e,m,p);if(x===RegExp)return c(e,m,p);if(x===Map)return s(e,m,p);if(x===Set)return d(e,m,p);var y=xF(e);return"[object Date]"===y?r(e,m,p):"[object RegExp]"===y?c(e,m,p):"[object Map]"===y?s(e,m,p):"[object Set]"===y?d(e,m,p):"[object Object]"===y?"function"!=typeof e.then&&"function"!=typeof m.then&&o(e,m,p):"[object URL]"===y?h(e,m,p):"[object Error]"===y?n(e,m,p):"[object Arguments]"===y?o(e,m,p):("[object Boolean]"===y||"[object Number]"===y||"[object String]"===y)&&l(e,m,p)}}(l);return function(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,s=e.strict;if(n)return function(e,i){var o=n(),l=o.cache,c=void 0===l?t?new WeakMap:void 0:l,d=o.meta;return r(e,i,{cache:c,equals:a,meta:d,strict:s})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var i={cache:void 0,equals:a,meta:void 0,strict:s};return function(e,t){return r(e,t,i)}}({circular:n,comparator:c,createState:s,equals:a?a(c):(t=c,function(e,r,n,a,s,i,o){return t(e,r,o)}),strict:o})}function gF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=-1;requestAnimationFrame(function n(a){r<0&&(r=a),a-r>t?(e(a),r=-1):function(e){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(e)}(n)})}function bF(e){return(bF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jF(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return wF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wF(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NF(){var e=function(){return null},t=!1,r=function r(n){if(!t){if(Array.isArray(n)){if(!n.length)return;var a=jF(n),s=a[0],i=a.slice(1);return"number"==typeof s?void gF(r.bind(null,i),s):(r(s),void gF(r.bind(null,i)))}"object"===bF(n)&&e(n),"function"==typeof n&&n()}};return{stop:function(){t=!0},start:function(e){t=!1,r(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function SF(e){return(SF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kF(Object(r),!0).forEach(function(t){OF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function OF(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==SF(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==SF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===SF(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}vF({strict:!0}),vF({circular:!0}),vF({circular:!0,strict:!0}),vF({createInternalComparator:function(){return XR}}),vF({strict:!0,createInternalComparator:function(){return XR}}),vF({circular:!0,createInternalComparator:function(){return XR}}),vF({circular:!0,createInternalComparator:function(){return XR},strict:!0});var CF=function(e){return e},AF=function(e,t){return Object.keys(t).reduce(function(r,n){return _F(_F({},r),{},OF({},n,e(n,t[n])))},{})},EF=function(e,t,r){return e.map(function(e){return"".concat((n=e,n.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}))," ").concat(t,"ms ").concat(r);var n}).join(",")};function PF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||MF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TF(e){return function(e){if(Array.isArray(e))return DF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||MF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MF(e,t){if(e){if("string"==typeof e)return DF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?DF(e,t):void 0}}function DF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var IF=1e-4,RF=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},FF=function(e,t){return e.map(function(e,r){return e*Math.pow(t,r)}).reduce(function(e,t){return e+t})},LF=function(e,t){return function(r){var n=RF(e,t);return FF(n,r)}},BF=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1],s=t[2],i=t[3];if(1===t.length)switch(t[0]){case"linear":n=0,a=0,s=1,i=1;break;case"ease":n=.25,a=.1,s=.25,i=1;break;case"ease-in":n=.42,a=0,s=1,i=1;break;case"ease-out":n=.42,a=0,s=.58,i=1;break;case"ease-in-out":n=0,a=0,s=.58,i=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=PF(o[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),4);n=l[0],a=l[1],s=l[2],i=l[3]}}var c,d,u=LF(n,s),h=LF(a,i),m=(c=n,d=s,function(e){var t=RF(c,d),r=[].concat(TF(t.map(function(e,t){return e*t}).slice(1)),[0]);return FF(r,e)}),p=function(e){return e>1?1:e<0?0:e},f=function(e){for(var t=e>1?1:e,r=t,n=0;n<8;++n){var a=u(r)-t,s=m(r);if(Math.abs(a-t)<IF||s<IF)return h(r);r=p(r-a/s)}return h(r)};return f.isStepper=!1,f},qF=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0];if("string"==typeof n)switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return BF(n);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,r=void 0===t?100:t,n=e.damping,a=void 0===n?8:n,s=e.dt,i=void 0===s?17:s,o=function(e,t,n){var s=n+(-(e-t)*r-n*a)*i/1e3,o=n*i/1e3+e;return Math.abs(o-t)<IF&&Math.abs(s)<IF?[t,0]:[o,s]};return o.isStepper=!0,o.dt=i,o}();default:if("cubic-bezier"===n.split("(")[0])return BF(n)}return"function"==typeof n?n:null};function zF(e){return(zF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $F(e){return function(e){if(Array.isArray(e))return YF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||KF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function VF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?UF(Object(r),!0).forEach(function(t){WF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function WF(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==zF(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==zF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zF(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||KF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KF(e,t){if(e){if("string"==typeof e)return YF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?YF(e,t):void 0}}function YF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var GF=function(e,t,r){return e+(t-e)*r},XF=function(e){return e.from!==e.to},QF=function e(t,r,n){var a=AF(function(e,r){if(XF(r)){var n=HF(t(r.from,r.to,r.velocity),2),a=n[0],s=n[1];return VF(VF({},r),{},{from:a,velocity:s})}return r},r);return n<1?AF(function(e,t){return XF(t)?VF(VF({},t),{},{velocity:GF(t.velocity,a[e].velocity,n),from:GF(t.from,a[e].from,n)}):t},r):e(t,a,n-1)};const JF=function(e,t,r,n,a){var s,i,o,l,c=(s=e,i=t,[Object.keys(s),Object.keys(i)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})),d=c.reduce(function(r,n){return VF(VF({},r),{},WF({},n,[e[n],t[n]]))},{}),u=c.reduce(function(r,n){return VF(VF({},r),{},WF({},n,{from:e[n],velocity:0,to:t[n]}))},{}),h=-1,m=function(){return null};return m=r.isStepper?function(n){o||(o=n);var s=(n-o)/r.dt;u=QF(r,u,s),a(VF(VF(VF({},e),t),AF(function(e,t){return t.from},u))),o=n,Object.values(u).filter(XF).length&&(h=requestAnimationFrame(m))}:function(s){l||(l=s);var i=(s-l)/n,o=AF(function(e,t){return GF.apply(void 0,$F(t).concat([r(i)]))},d);if(a(VF(VF(VF({},e),t),o)),i<1)h=requestAnimationFrame(m);else{var c=AF(function(e,t){return GF.apply(void 0,$F(t).concat([r(1)]))},d);a(VF(VF(VF({},e),t),c))}},function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(h)}}};function ZF(e){return(ZF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var eL=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function tL(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rL(e){return function(e){if(Array.isArray(e))return nL(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return nL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nL(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function sL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aL(Object(r),!0).forEach(function(t){iL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function iL(e,t,r){return(t=lL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lL(n.key),n)}}function lL(e){var t=function(e,t){if("object"!==ZF(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ZF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ZF(t)?t:String(t)}function cL(e,t){return(cL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function dL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=mL(e);if(t){var a=mL(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return uL(this,r)}}function uL(e,t){if(t&&("object"===ZF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hL(e)}function hL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mL(e){return(mL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pL=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cL(e,t)}(a,Ct.PureComponent);var e,t,r,n=dL(a);function a(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var s=(r=n.call(this,e,t)).props,i=s.isActive,o=s.attributeName,l=s.from,c=s.to,d=s.steps,u=s.children,h=s.duration;if(r.handleStyleChange=r.handleStyleChange.bind(hL(r)),r.changeStyle=r.changeStyle.bind(hL(r)),!i||h<=0)return r.state={style:{}},"function"==typeof u&&(r.state={style:c}),uL(r);if(d&&d.length)r.state={style:d[0].style};else if(l){if("function"==typeof u)return r.state={style:l},uL(r);r.state={style:o?iL({},o,l):l}}else r.state={style:{}};return r}return e=a,(t=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,r=e.canBegin;this.mounted=!0,t&&r&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isActive,n=t.canBegin,a=t.attributeName,s=t.shouldReAnimate,i=t.to,o=t.from,l=this.state.style;if(n)if(r){if(!(yF(e.to,i)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=c||s?o:e.to;if(this.state&&l){var u={style:a?iL({},a,d):d};(a&&l[a]!==d||!a&&l!==d)&&this.setState(u)}this.runAnimation(sL(sL({},this.props),{},{from:d,begin:0}))}}else{var h={style:a?iL({},a,i):i};this.state&&l&&(a&&l[a]!==i||!a&&l!==i)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,r=e.from,n=e.to,a=e.duration,s=e.easing,i=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,c=JF(r,n,qF(s),a,this.changeStyle);this.manager.start([l,i,function(){t.stopJSAnimation=c()},a,o])}},{key:"runStepAnimation",value:function(e){var t=this,r=e.steps,n=e.begin,a=e.onAnimationStart,s=r[0],i=s.style,o=s.duration,l=void 0===o?0:o;return this.manager.start([a].concat(rL(r.reduce(function(e,n,a){if(0===a)return e;var s=n.duration,i=n.easing,o=void 0===i?"ease":i,l=n.style,c=n.properties,d=n.onAnimationEnd,u=a>0?r[a-1]:n,h=c||Object.keys(l);if("function"==typeof o||"spring"===o)return[].concat(rL(e),[t.runJSAnimation.bind(t,{from:u.style,to:l,duration:s,easing:o}),s]);var m=EF(h,s,o),p=sL(sL(sL({},u.style),l),{},{transition:m});return[].concat(rL(e),[p,s,d]).filter(CF)},[i,Math.max(l,n)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=NF());var t=e.begin,r=e.duration,n=e.attributeName,a=e.to,s=e.easing,i=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,c=e.children,d=this.manager;if(this.unSubscribe=d.subscribe(this.handleStyleChange),"function"!=typeof s&&"function"!=typeof c&&"spring"!==s)if(l.length>1)this.runStepAnimation(e);else{var u=n?iL({},n,a):a,h=EF(Object.keys(u),r,s);d.start([i,t,sL(sL({},u),{},{transition:h}),r,o])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children;e.begin;var r=e.duration;e.attributeName,e.easing;var n=e.isActive;e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart;var a=tL(e,eL),s=Ct.Children.count(t),i=this.state.style;if("function"==typeof t)return t(i);if(!n||0===s||r<=0)return t;var o=function(e){var t=e.props,r=t.style,n=void 0===r?{}:r,s=t.className;return Ct.cloneElement(e,sL(sL({},a),{},{style:sL(sL({},n),i),className:s}))};return 1===s?o(Ct.Children.only(t)):At.createElement("div",null,Ct.Children.map(t,function(e){return o(e)}))}}])&&oL(e.prototype,t),r&&oL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}();pL.displayName="Animate",pL.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},pL.propTypes={from:$R.oneOfType([$R.object,$R.string]),to:$R.oneOfType([$R.object,$R.string]),attributeName:$R.string,duration:$R.number,begin:$R.number,easing:$R.oneOfType([$R.string,$R.func]),steps:$R.arrayOf($R.shape({duration:$R.number.isRequired,style:$R.object.isRequired,easing:$R.oneOfType([$R.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),$R.func]),properties:$R.arrayOf("string"),onAnimationEnd:$R.func})),children:$R.oneOfType([$R.node,$R.func]),isActive:$R.bool,canBegin:$R.bool,onAnimationEnd:$R.func,shouldReAnimate:$R.bool,onAnimationStart:$R.func,onAnimationReStart:$R.func};const fL=pL;function xL(e){return(xL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yL(){return yL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yL.apply(this,arguments)}function vL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bL(Object(r),!0).forEach(function(t){wL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wL(e,t,r){var n;return n=function(e,t){if("object"!=xL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==xL(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var NL=function(e,t,r,n,a){var s,i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=a[u]>i?i:a[u];s="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(s+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),s+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(s+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+o*d[1])),s+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(s+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+r-l*d[2],",").concat(t+n)),s+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(s+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-o*d[3])),s+="Z"}else if(i>0&&a===+a&&a>0){var h=Math.min(i,a);s="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+r-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,"\n            L ").concat(e+r,",").concat(t+n-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(t+n,"\n            L ").concat(e+l*h,",").concat(t+n,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else s="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return s},SL=function(e,t){if(!e||!t)return!1;var r=e.x,n=e.y,a=t.x,s=t.y,i=t.width,o=t.height;if(Math.abs(i)>0&&Math.abs(o)>0){var l=Math.min(a,a+i),c=Math.max(a,a+i),d=Math.min(s,s+o),u=Math.max(s,s+o);return r>=l&&r<=c&&n>=d&&n<=u}return!1},kL={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_L=function(e){var t=jL(jL({},kL),e),r=Ct.useRef(),n=vL(Ct.useState(-1),2),a=n[0],s=n[1];Ct.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&s(e)}catch(t){}},[]);var i=t.x,o=t.y,l=t.width,c=t.height,d=t.radius,u=t.className,h=t.animationEasing,m=t.animationDuration,p=t.animationBegin,f=t.isAnimationActive,x=t.isUpdateAnimationActive;if(i!==+i||o!==+o||l!==+l||c!==+c||0===l||0===c)return null;var y=Vr("recharts-rectangle",u);return x?At.createElement(fL,{canBegin:a>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:m,animationEasing:h,isActive:x},function(e){var n=e.width,s=e.height,i=e.x,o=e.y;return At.createElement(fL,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,isActive:f,easing:h},At.createElement("path",yL({},Fg(t,!0),{className:y,d:NL(i,o,n,s,d),ref:r})))}):At.createElement("path",yL({},Fg(t,!0),{className:y,d:NL(i,o,l,c,d)}))},OL=["points","className","baseLinePoints","connectNulls"];function CL(){return CL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CL.apply(this,arguments)}function AL(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function EL(e){return function(e){if(Array.isArray(e))return PL(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return PL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PL(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var TL=function(e){return e&&e.x===+e.x&&e.y===+e.y},ML=function(e,t){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach(function(e){TL(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])}),TL(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(r=[r.reduce(function(e,t){return[].concat(EL(e),EL(t))},[])]);var n=r.map(function(e){return e.reduce(function(e,t,r){return"".concat(e).concat(0===r?"M":"L").concat(t.x,",").concat(t.y)},"")}).join("");return 1===r.length?"".concat(n,"Z"):n},DL=function(e){var t=e.points,r=e.className,n=e.baseLinePoints,a=e.connectNulls,s=AL(e,OL);if(!t||!t.length)return null;var i=Vr("recharts-polygon",r);if(n&&n.length){var o=s.stroke&&"none"!==s.stroke,l=function(e,t,r){var n=ML(e,r);return"".concat("Z"===n.slice(-1)?n.slice(0,-1):n,"L").concat(ML(t.reverse(),r).slice(1))}(t,n,a);return At.createElement("g",{className:i},At.createElement("path",CL({},Fg(s,!0),{fill:"Z"===l.slice(-1)?s.fill:"none",stroke:"none",d:l})),o?At.createElement("path",CL({},Fg(s,!0),{fill:"none",d:ML(t,a)})):null,o?At.createElement("path",CL({},Fg(s,!0),{fill:"none",d:ML(n,a)})):null)}var c=ML(t,a);return At.createElement("path",CL({},Fg(s,!0),{fill:"Z"===c.slice(-1)?s.fill:"none",className:i,d:c}))};function IL(){return IL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IL.apply(this,arguments)}var RL=function(e){var t=e.cx,r=e.cy,n=e.r,a=Vr("recharts-dot",e.className);return t===+t&&r===+r&&n===+n?Ct.createElement("circle",IL({},Fg(e,!1),jg(e),{className:a,cx:t,cy:r,r:n})):null};function FL(e){return(FL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var LL=["x","y","top","left","width","height","className"];function BL(){return BL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BL.apply(this,arguments)}function qL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function zL(e,t,r){var n;return n=function(e,t){if("object"!=FL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=FL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==FL(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $L(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var UL=function(e,t,r,n,a,s){return"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r)},VL=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,a=void 0===n?0:n,s=e.top,i=void 0===s?0:s,o=e.left,l=void 0===o?0:o,c=e.width,d=void 0===c?0:c,u=e.height,h=void 0===u?0:u,m=e.className,p=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qL(Object(r),!0).forEach(function(t){zL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:r,y:a,top:i,left:l,width:d,height:h},$L(e,LL));return ig(r)&&ig(a)&&ig(d)&&ig(h)&&ig(i)&&ig(l)?At.createElement("path",BL({},Fg(p,!0),{className:Vr("recharts-cross",m),d:UL(r,a,d,h,i,l)})):null},WL=yM,HL=vM,KL=ik;const YL=Tt(function(e,t){return e&&e.length?WL(e,KL(t),HL):void 0});var GL=yM,XL=ik,QL=NM;const JL=Tt(function(e,t){return e&&e.length?GL(e,XL(t),QL):void 0});var ZL=["cx","cy","angle","ticks","axisLine"],eB=["ticks","tick","angle","tickFormatter","stroke"];function tB(e){return(tB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rB(){return rB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rB.apply(this,arguments)}function nB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function aB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nB(Object(r),!0).forEach(function(t){uB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sB(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function iB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hB(n.key),n)}}function oB(e,t,r){return t=cB(t),function(e,t){if(t&&("object"===tB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,lB()?Reflect.construct(t,r||[],cB(e).constructor):t.apply(e,r))}function lB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(lB=function(){return!!e})()}function cB(e){return(cB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dB(e,t){return(dB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uB(e,t,r){return(t=hB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hB(e){var t=function(e,t){if("object"!=tB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tB(t)?t:t+""}var mB=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),oB(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dB(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"renderTickItem",value:function(e,t,r){return At.isValidElement(e)?At.cloneElement(e,t):Ix(e)?e(t):At.createElement(MC,rB({},t,{className:"recharts-polar-radius-axis-tick-value"}),r)}}],(r=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,r=this.props,n=r.angle,a=r.cx,s=r.cy;return $I(a,s,t,n)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.angle,a=e.ticks,s=YL(a,function(e){return e.coordinate||0});return{cx:t,cy:r,startAngle:n,endAngle:n,innerRadius:JL(a,function(e){return e.coordinate||0}).coordinate||0,outerRadius:s.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.angle,a=e.ticks,s=e.axisLine,i=sB(e,ZL),o=a.reduce(function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]},[1/0,-1/0]),l=$I(t,r,o[0],n),c=$I(t,r,o[1],n),d=aB(aB(aB({},Fg(i,!1)),{},{fill:"none"},Fg(s,!1)),{},{x1:l.x,y1:l.y,x2:c.x,y2:c.y});return At.createElement("line",rB({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var t=this,r=this.props,n=r.ticks,a=r.tick,s=r.angle,i=r.tickFormatter,o=r.stroke,l=sB(r,eB),c=this.getTickTextAnchor(),d=Fg(l,!1),u=Fg(a,!1),h=n.map(function(r,n){var l=t.getTickValueCoord(r),h=aB(aB(aB(aB({textAnchor:c,transform:"rotate(".concat(90-s,", ").concat(l.x,", ").concat(l.y,")")},d),{},{stroke:"none",fill:o},u),{},{index:n},l),{},{payload:r});return At.createElement(Yg,rB({className:Vr("recharts-polar-radius-axis-tick",KI(a)),key:"tick-".concat(r.coordinate)},wg(t.props,r,n)),e.renderTickItem(a,h,i?i(r.value,n):r.value))});return At.createElement(Yg,{className:"recharts-polar-radius-axis-ticks"},h)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.axisLine,n=e.tick;return t&&t.length?At.createElement(Yg,{className:Vr("recharts-polar-radius-axis",this.props.className)},r&&this.renderAxisLine(),n&&this.renderTicks(),aR.renderCallByParent(this.props,this.getViewBox())):null}}])&&iB(t.prototype,r),n&&iB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function pB(e){return(pB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fB(){return fB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fB.apply(this,arguments)}function xB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xB(Object(r),!0).forEach(function(t){NB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SB(n.key),n)}}function gB(e,t,r){return t=jB(t),function(e,t){if(t&&("object"===pB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bB()?Reflect.construct(t,r||[],jB(e).constructor):t.apply(e,r))}function bB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(bB=function(){return!!e})()}function jB(e){return(jB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wB(e,t){return(wB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function NB(e,t,r){return(t=SB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SB(e){var t=function(e,t){if("object"!=pB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pB(t)?t:t+""}uB(mB,"displayName","PolarRadiusAxis"),uB(mB,"axisType","radiusAxis"),uB(mB,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var kB=Math.PI/180,_B=1e-5,OB=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),gB(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wB(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"renderTickItem",value:function(e,t,r){return At.isValidElement(e)?At.cloneElement(e,t):Ix(e)?e(t):At.createElement(MC,fB({},t,{className:"recharts-polar-angle-axis-tick-value"}),r)}}],(r=[{key:"getTickLineCoord",value:function(e){var t=this.props,r=t.cx,n=t.cy,a=t.radius,s=t.orientation,i=t.tickSize||8,o=$I(r,n,a,e.coordinate),l=$I(r,n,a+("inner"===s?-1:1)*i,e.coordinate);return{x1:o.x,y1:o.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,r=Math.cos(-e.coordinate*kB);return r>_B?"outer"===t?"start":"end":r<-_B?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.radius,a=e.axisLine,s=e.axisLineType,i=yB(yB({},Fg(this.props,!1)),{},{fill:"none"},Fg(a,!1));if("circle"===s)return At.createElement(RL,fB({className:"recharts-polar-angle-axis-line"},i,{cx:t,cy:r,r:n}));var o=this.props.ticks.map(function(e){return $I(t,r,n,e.coordinate)});return At.createElement(DL,fB({className:"recharts-polar-angle-axis-line"},i,{points:o}))}},{key:"renderTicks",value:function(){var t=this,r=this.props,n=r.ticks,a=r.tick,s=r.tickLine,i=r.tickFormatter,o=r.stroke,l=Fg(this.props,!1),c=Fg(a,!1),d=yB(yB({},l),{},{fill:"none"},Fg(s,!1)),u=n.map(function(r,n){var u=t.getTickLineCoord(r),h=yB(yB(yB({textAnchor:t.getTickTextAnchor(r)},l),{},{stroke:"none",fill:o},c),{},{index:n,payload:r,x:u.x2,y:u.y2});return At.createElement(Yg,fB({className:Vr("recharts-polar-angle-axis-tick",KI(a)),key:"tick-".concat(r.coordinate)},wg(t.props,r,n)),s&&At.createElement("line",fB({className:"recharts-polar-angle-axis-tick-line"},d,u)),a&&e.renderTickItem(a,h,i?i(r.value,n):r.value))});return At.createElement(Yg,{className:"recharts-polar-angle-axis-ticks"},u)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.radius,n=e.axisLine;return r<=0||!t||!t.length?null:At.createElement(Yg,{className:Vr("recharts-polar-angle-axis",this.props.className)},n&&this.renderAxisLine(),this.renderTicks())}}])&&vB(t.prototype,r),n&&vB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();NB(OB,"displayName","PolarAngleAxis"),NB(OB,"axisType","angleAxis"),NB(OB,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var CB=SN(Object.getPrototypeOf,Object),AB=bx,EB=CB,PB=jx,TB=Function.prototype,MB=Object.prototype,DB=TB.toString,IB=MB.hasOwnProperty,RB=DB.call(Object);const FB=Tt(function(e){if(!PB(e)||"[object Object]"!=AB(e))return!1;var t=EB(e);if(null===t)return!0;var r=IB.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&DB.call(r)==RB});var LB=bx,BB=jx;const qB=Tt(function(e){return!0===e||!1===e||BB(e)&&"[object Boolean]"==LB(e)});function zB(e){return(zB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $B(){return $B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$B.apply(this,arguments)}function UB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return VB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VB(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function HB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?WB(Object(r),!0).forEach(function(t){KB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function KB(e,t,r){var n;return n=function(e,t){if("object"!=zB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==zB(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var YB,GB=function(e,t,r,n,a){var s,i=r-n;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-i/2,",").concat(t+a),s+="L ".concat(e+r-i/2-n,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z")},XB={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},QB=function(e){var t=HB(HB({},XB),e),r=Ct.useRef(),n=UB(Ct.useState(-1),2),a=n[0],s=n[1];Ct.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&s(e)}catch(t){}},[]);var i=t.x,o=t.y,l=t.upperWidth,c=t.lowerWidth,d=t.height,u=t.className,h=t.animationEasing,m=t.animationDuration,p=t.animationBegin,f=t.isUpdateAnimationActive;if(i!==+i||o!==+o||l!==+l||c!==+c||d!==+d||0===l&&0===c||0===d)return null;var x=Vr("recharts-trapezoid",u);return f?At.createElement(fL,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:d,x:i,y:o},duration:m,animationEasing:h,isActive:f},function(e){var n=e.upperWidth,s=e.lowerWidth,i=e.height,o=e.x,l=e.y;return At.createElement(fL,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,easing:h},At.createElement("path",$B({},Fg(t,!0),{className:x,d:GB(o,l,n,s,i),ref:r})))}):At.createElement("g",null,At.createElement("path",$B({},Fg(t,!0),{className:x,d:GB(i,o,l,c,d)})))},JB=["option","shapeType","propTransformer","activeClassName","isActive"];function ZB(e){return(ZB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eq(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tq(Object(r),!0).forEach(function(t){nq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function nq(e,t,r){var n;return n=function(e,t){if("object"!=ZB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ZB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ZB(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aq(e,t){return rq(rq({},t),e)}function sq(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return At.createElement(_L,r);case"trapezoid":return At.createElement(QB,r);case"sector":return At.createElement(OR,r);case"symbols":if(function(e){return"symbols"===e}(t))return At.createElement(Dj,r);break;default:return null}}function iq(e){var t,r=e.option,n=e.shapeType,a=e.propTransformer,s=void 0===a?aq:a,i=e.activeClassName,o=void 0===i?"recharts-active-shape":i,l=e.isActive,c=eq(e,JB);if(Ct.isValidElement(r))t=Ct.cloneElement(r,rq(rq({},c),function(e){return Ct.isValidElement(e)?e.props:e}(r)));else if(Ix(r))t=r(c);else if(FB(r)&&!qB(r)){var d=s(r,c);t=At.createElement(sq,{shapeType:n,elementProps:d})}else{var u=c;t=At.createElement(sq,{shapeType:n,elementProps:u})}return l?At.createElement(Yg,{className:o},t):t}function oq(e,t){return null!=t&&"trapezoids"in e.props}function lq(e,t){return null!=t&&"sectors"in e.props}function cq(e,t){return null!=t&&"points"in e.props}function dq(e,t){var r,n,a=e.x===(null==t||null===(r=t.labelViewBox)||void 0===r?void 0:r.x)||e.x===t.x,s=e.y===(null==t||null===(n=t.labelViewBox)||void 0===n?void 0:n.y)||e.y===t.y;return a&&s}function uq(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function hq(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function mq(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=function(e,t){var r;return oq(e,t)?r="trapezoids":lq(e,t)?r="sectors":cq(e,t)&&(r="points"),r}(r,t),s=function(e,t){var r,n;return oq(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:lq(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:cq(e,t)?t.payload:{}}(r,t),i=n.filter(function(e,n){var i=RM(s,e),o=r.props[a].filter(function(e){var n=function(e,t){var r;return oq(e,t)?r=dq:lq(e,t)?r=uq:cq(e,t)&&(r=hq),r}(r,t);return n(e,t)}),l=r.props[a].indexOf(o[o.length-1]);return i&&n===l});return n.indexOf(i[i.length-1])}function pq(e){return(pq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fq(){return fq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fq.apply(this,arguments)}function xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xq(Object(r),!0).forEach(function(t){Nq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sq(n.key),n)}}function gq(e,t,r){return t=jq(t),function(e,t){if(t&&("object"===pq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bq()?Reflect.construct(t,r||[],jq(e).constructor):t.apply(e,r))}function bq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(bq=function(){return!!e})()}function jq(e){return(jq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wq(e,t){return(wq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nq(e,t,r){return(t=Sq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sq(e){var t=function(e,t){if("object"!=pq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pq(t)?t:t+""}var kq=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Nq(r=gq(this,e,[t]),"pieRef",null),Nq(r,"sectorRefs",[]),Nq(r,"id",cg("recharts-pie-")),Nq(r,"handleAnimationEnd",function(){var e=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ix(e)&&e()}),Nq(r,"handleAnimationStart",function(){var e=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ix(e)&&e()}),r.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wq(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t,r){if(At.isValidElement(e))return At.cloneElement(e,t);if(Ix(e))return e(t);var n=Vr("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return At.createElement(LR,fq({},t,{key:r,type:"linear",className:n}))}},{key:"renderLabelItem",value:function(e,t,r){if(At.isValidElement(e))return At.cloneElement(e,t);var n=r;if(Ix(e)&&(n=e(t),At.isValidElement(n)))return n;var a=Vr("recharts-pie-label-text","boolean"==typeof e||Ix(e)?"":e.className);return At.createElement(MC,fq({},t,{alignmentBaseline:"middle",className:a}),n)}}],(r=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.label,a=r.labelLine,s=r.dataKey,i=r.valueKey,o=Fg(this.props,!1),l=Fg(n,!1),c=Fg(a,!1),d=n&&n.offsetRadius||20,u=t.map(function(t,r){var u=(t.startAngle+t.endAngle)/2,h=$I(t.cx,t.cy,t.outerRadius+d,u),m=yq(yq(yq(yq({},o),t),{},{stroke:"none"},l),{},{index:r,textAnchor:e.getTextAnchor(h.x,t.cx)},h),p=yq(yq(yq(yq({},o),t),{},{fill:"none",stroke:t.fill},c),{},{index:r,points:[$I(t.cx,t.cy,t.outerRadius,u),h]}),f=s;return Cv(s)&&Cv(i)?f="value":Cv(s)&&(f=i),At.createElement(Yg,{key:"label-".concat(t.startAngle,"-").concat(t.endAngle,"-").concat(t.midAngle,"-").concat(r)},a&&e.renderLabelLineItem(a,p,"line"),e.renderLabelItem(n,m,cI(t,f)))});return At.createElement(Yg,{className:"recharts-pie-labels"},u)}},{key:"renderSectorsStatically",value:function(e){var t=this,r=this.props,n=r.activeShape,a=r.blendStroke,s=r.inactiveShape;return e.map(function(r,i){if(0===(null==r?void 0:r.startAngle)&&0===(null==r?void 0:r.endAngle)&&1!==e.length)return null;var o=t.isActiveIndex(i),l=s&&t.hasActiveIndex()?s:null,c=o?n:l,d=yq(yq({},r),{},{stroke:a?r.fill:r.stroke,tabIndex:-1});return At.createElement(Yg,fq({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},wg(t.props,r,i),{key:"sector-".concat(null==r?void 0:r.startAngle,"-").concat(null==r?void 0:r.endAngle,"-").concat(r.midAngle,"-").concat(i)}),At.createElement(iq,fq({option:c,isActive:o,shapeType:"sector"},d)))})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,r=t.sectors,n=t.isAnimationActive,a=t.animationBegin,s=t.animationDuration,i=t.animationEasing,o=t.animationId,l=this.state,c=l.prevSectors,d=l.prevIsAnimationActive;return At.createElement(fL,{begin:a,duration:s,isActive:n,easing:i,from:{t:0},to:{t:1},key:"pie-".concat(o,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(t){var n=t.t,a=[],s=(r&&r[0]).startAngle;return r.forEach(function(e,t){var r=c&&c[t],i=t>0?Ov(e,"paddingAngle",0):0;if(r){var o=hg(r.endAngle-r.startAngle,e.endAngle-e.startAngle),l=yq(yq({},e),{},{startAngle:s+i,endAngle:s+o(n)+i});a.push(l),s=l.endAngle}else{var d=e.endAngle,u=e.startAngle,h=hg(0,d-u)(n),m=yq(yq({},e),{},{startAngle:s+i,endAngle:s+h+i});a.push(m),s=m.endAngle}}),At.createElement(Yg,null,e.renderSectorsStatically(a))})}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var r=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"ArrowRight":var n=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,r=e.isAnimationActive,n=this.state.prevSectors;return!(r&&t&&t.length)||n&&RM(n,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,r=t.hide,n=t.sectors,a=t.className,s=t.label,i=t.cx,o=t.cy,l=t.innerRadius,c=t.outerRadius,d=t.isAnimationActive,u=this.state.isAnimationFinished;if(r||!n||!n.length||!ig(i)||!ig(o)||!ig(l)||!ig(c))return null;var h=Vr("recharts-pie",a);return At.createElement(Yg,{tabIndex:this.props.rootTabIndex,className:h,ref:function(t){e.pieRef=t}},this.renderSectors(),s&&this.renderLabels(n),aR.renderCallByParent(this.props,null,!1),(!d||u)&&vR.renderCallByParent(this.props,n,!1))}}])&&vq(t.prototype,r),n&&vq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();YB=kq,Nq(kq,"displayName","Pie"),Nq(kq,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!cO.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),Nq(kq,"parseDeltaAngle",function(e,t){return ag(t-e)*Math.min(Math.abs(t-e),360)}),Nq(kq,"getRealPieData",function(e){var t=e.data,r=e.children,n=Fg(e,!1),a=Tg(r,XO);return t&&t.length?t.map(function(e,t){return yq(yq(yq({payload:e},n),e),a&&a[t]&&a[t].props)}):a&&a.length?a.map(function(e){return yq(yq({},n),e.props)}):[]}),Nq(kq,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,s=t.height,i=UI(a,s);return{cx:n+dg(e.cx,a,a/2),cy:r+dg(e.cy,s,s/2),innerRadius:dg(e.innerRadius,i,0),outerRadius:dg(e.outerRadius,i,.8*i),maxRadius:e.maxRadius||Math.sqrt(a*a+s*s)/2}}),Nq(kq,"getComposedData",function(e){var t=e.item,r=e.offset,n=void 0!==t.type.defaultProps?yq(yq({},t.type.defaultProps),t.props):t.props,a=YB.getRealPieData(n);if(!a||!a.length)return null;var s=n.cornerRadius,i=n.startAngle,o=n.endAngle,l=n.paddingAngle,c=n.dataKey,d=n.nameKey,u=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),p=YB.parseCoordinateOfPie(n,r),f=YB.parseDeltaAngle(i,o),x=Math.abs(f),y=c;Cv(c)&&Cv(u)?(Gg(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y="value"):Cv(c)&&(Gg(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y=u);var v,g,b=a.filter(function(e){return 0!==cI(e,y,0)}).length,j=x-b*m-(x>=360?b:b-1)*l,w=a.reduce(function(e,t){var r=cI(t,y,0);return e+(ig(r)?r:0)},0);w>0&&(v=a.map(function(e,t){var r,n=cI(e,y,0),a=cI(e,d,t),o=(ig(n)?n:0)/w,c=(r=t?g.endAngle+ag(f)*l*(0!==n?1:0):i)+ag(f)*((0!==n?m:0)+o*j),u=(r+c)/2,x=(p.innerRadius+p.outerRadius)/2,v=[{name:a,value:n,payload:e,dataKey:y,type:h}],b=$I(p.cx,p.cy,x,u);return g=yq(yq(yq({percent:o,cornerRadius:s,name:a,tooltipPayload:v,midAngle:u,middleRadius:x,tooltipPosition:b},e),p),{},{value:cI(e,y),startAngle:r,endAngle:c,payload:e,paddingAngle:ag(f)*l})}));return yq(yq({},p),{},{sectors:v,data:a})});var _q=Math.ceil,Oq=Math.max;var Cq=MO,Aq=1/0;var Eq=function(e){return e?(e=Cq(e))===Aq||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},Pq=function(e,t,r,n){for(var a=-1,s=Oq(_q((t-e)/(r||1)),0),i=Array(s);s--;)i[n?s:++a]=e,e+=r;return i},Tq=T_,Mq=Eq;const Dq=Tt(function(e){return function(t,r,n){return n&&"number"!=typeof n&&Tq(t,r,n)&&(r=n=void 0),t=Mq(t),void 0===r?(r=t,t=0):r=Mq(r),n=void 0===n?t<r?1:-1:Mq(n),Pq(t,r,n,e)}}());function Iq(e){return(Iq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Fq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rq(Object(r),!0).forEach(function(t){Lq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Lq(e,t,r){var n;return n=function(e,t){if("object"!=Iq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Iq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Iq(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bq=["Webkit","Moz","O","ms"];function qq(e){return(qq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zq(){return zq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zq.apply(this,arguments)}function $q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Uq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$q(Object(r),!0).forEach(function(t){Gq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$q(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Vq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xq(n.key),n)}}function Wq(e,t,r){return t=Kq(t),function(e,t){if(t&&("object"===qq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Hq()?Reflect.construct(t,r||[],Kq(e).constructor):t.apply(e,r))}function Hq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Hq=function(){return!!e})()}function Kq(e){return(Kq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yq(e,t){return(Yq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gq(e,t,r){return(t=Xq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xq(e){var t=function(e,t){if("object"!=qq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qq(t)?t:t+""}var Qq=function(e){return e.changedTouches&&!!e.changedTouches.length},Jq=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Gq(r=Wq(this,e,[t]),"handleDrag",function(e){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(e):r.state.isSlideMoving&&r.handleSlideDrag(e)}),Gq(r,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&r.handleDrag(e.changedTouches[0])}),Gq(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=r.props,t=e.endIndex,n=e.onDragEnd,a=e.startIndex;null==n||n({endIndex:t,startIndex:a})}),r.detachDragEndListener()}),Gq(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Gq(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Gq(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Gq(r,"handleSlideDragStart",function(e){var t=Qq(e)?e.changedTouches[0]:e;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yq(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,r=e.y,n=e.width,a=e.height,s=e.stroke,i=Math.floor(r+a/2)-1;return At.createElement(At.Fragment,null,At.createElement("rect",{x:t,y:r,width:n,height:a,fill:s,stroke:"none"}),At.createElement("line",{x1:t+1,y1:i,x2:t+n-1,y2:i,fill:"none",stroke:"#fff"}),At.createElement("line",{x1:t+1,y1:i+2,x2:t+n-1,y2:i+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,r){return At.isValidElement(t)?At.cloneElement(t,r):Ix(t)?t(r):e.renderDefaultTraveller(r)}},{key:"getDerivedStateFromProps",value:function(e,t){var r=e.data,n=e.width,a=e.x,s=e.travellerWidth,i=e.updateId,o=e.startIndex,l=e.endIndex;if(r!==t.prevData||i!==t.prevUpdateId)return Uq({prevData:r,prevTravellerWidth:s,prevUpdateId:i,prevX:a,prevWidth:n},r&&r.length?function(e){var t=e.data,r=e.startIndex,n=e.endIndex,a=e.x,s=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=cA().domain(Dq(0,o)).range([a,a+s-i]),c=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(r),endX:l(n),scale:l,scaleValues:c}}({data:r,width:n,x:a,travellerWidth:s,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(n!==t.prevWidth||a!==t.prevX||s!==t.prevTravellerWidth)){t.scale.range([a,a+n-s]);var c=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:r,prevTravellerWidth:s,prevUpdateId:i,prevX:a,prevWidth:n,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var r=0,n=e.length-1;n-r>1;){var a=Math.floor((r+n)/2);e[a]>t?n=a:r=a}return t>=e[n]?n:r}}],(r=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var r=t.startX,n=t.endX,a=this.state.scaleValues,s=this.props,i=s.gap,o=s.data.length-1,l=Math.min(r,n),c=Math.max(r,n),d=e.getIndexInRange(a,l),u=e.getIndexInRange(a,c);return{startIndex:d-d%i,endIndex:u===o?o:u-u%i}}},{key:"getTextOfTick",value:function(e){var t=this.props,r=t.data,n=t.tickFormatter,a=t.dataKey,s=cI(r[e],a,e);return Ix(n)?n(s,e):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,r=t.slideMoveStartX,n=t.startX,a=t.endX,s=this.props,i=s.x,o=s.width,l=s.travellerWidth,c=s.startIndex,d=s.endIndex,u=s.onChange,h=e.pageX-r;h>0?h=Math.min(h,i+o-l-a,i+o-l-n):h<0&&(h=Math.max(h,i-n,i-a));var m=this.getIndex({startX:n+h,endX:a+h});m.startIndex===c&&m.endIndex===d||!u||u(m),this.setState({startX:n+h,endX:a+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var r=Qq(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:r.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,r=t.brushMoveStartX,n=t.movingTravellerId,a=t.endX,s=t.startX,i=this.state[n],o=this.props,l=o.x,c=o.width,d=o.travellerWidth,u=o.onChange,h=o.gap,m=o.data,p={startX:this.state.startX,endX:this.state.endX},f=e.pageX-r;f>0?f=Math.min(f,l+c-d-i):f<0&&(f=Math.max(f,l-i)),p[n]=i+f;var x=this.getIndex(p),y=x.startIndex,v=x.endIndex;this.setState(Gq(Gq({},n,i+f),"brushMoveStartX",e.pageX),function(){var e;u&&(e=m.length-1,("startX"===n&&(a>s?y%h===0:v%h===0)||a<s&&v===e||"endX"===n&&(a>s?v%h===0:y%h===0)||a>s&&v===e)&&u(x))})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var r=this,n=this.state,a=n.scaleValues,s=n.startX,i=n.endX,o=this.state[t],l=a.indexOf(o);if(-1!==l){var c=l+e;if(!(-1===c||c>=a.length)){var d=a[c];"startX"===t&&d>=i||"endX"===t&&d<=s||this.setState(Gq({},t,d),function(){r.props.onChange(r.getIndex({startX:r.state.startX,endX:r.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,a=e.height,s=e.fill,i=e.stroke;return At.createElement("rect",{stroke:i,fill:s,x:t,y:r,width:n,height:a})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,a=e.height,s=e.data,i=e.children,o=e.padding,l=Ct.Children.only(i);return l?At.cloneElement(l,{x:t,y:r,width:n,height:a,margin:o,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(t,r){var n,a,s=this,i=this.props,o=i.y,l=i.travellerWidth,c=i.height,d=i.traveller,u=i.ariaLabel,h=i.data,m=i.startIndex,p=i.endIndex,f=Math.max(t,this.props.x),x=Uq(Uq({},Fg(this.props,!1)),{},{x:f,y:o,width:l,height:c}),y=u||"Min value: ".concat(null===(n=h[m])||void 0===n?void 0:n.name,", Max value: ").concat(null===(a=h[p])||void 0===a?void 0:a.name);return At.createElement(Yg,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":t,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),s.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,r))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,x))}},{key:"renderSlide",value:function(e,t){var r=this.props,n=r.y,a=r.height,s=r.stroke,i=r.travellerWidth,o=Math.min(e,t)+i,l=Math.max(Math.abs(t-e)-i,0);return At.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:o,y:n,width:l,height:a})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,r=e.endIndex,n=e.y,a=e.height,s=e.travellerWidth,i=e.stroke,o=this.state,l=o.startX,c=o.endX,d={pointerEvents:"none",fill:i};return At.createElement(Yg,{className:"recharts-brush-texts"},At.createElement(MC,zq({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,c)-5,y:n+a/2},d),this.getTextOfTick(t)),At.createElement(MC,zq({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,c)+s+5,y:n+a/2},d),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,t=e.data,r=e.className,n=e.children,a=e.x,s=e.y,i=e.width,o=e.height,l=e.alwaysShowText,c=this.state,d=c.startX,u=c.endX,h=c.isTextActive,m=c.isSlideMoving,p=c.isTravellerMoving,f=c.isTravellerFocused;if(!t||!t.length||!ig(a)||!ig(s)||!ig(i)||!ig(o)||i<=0||o<=0)return null;var x=Vr("recharts-brush",r),y=1===At.Children.count(n),v=function(e,t){if(!e)return null;var r=e.replace(/(\w)/,function(e){return e.toUpperCase()}),n=Bq.reduce(function(e,n){return Fq(Fq({},e),{},Lq({},n+r,t))},{});return n[e]=t,n}("userSelect","none");return At.createElement(Yg,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:v},this.renderBackground(),y&&this.renderPanorama(),this.renderSlide(d,u),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(u,"endX"),(h||m||p||f||l)&&this.renderText())}}])&&Vq(t.prototype,r),n&&Vq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();Gq(Jq,"displayName","Brush"),Gq(Jq,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Zq=Qk;var ez=dw,tz=ik,rz=function(e,t){var r;return Zq(e,function(e,n,a){return!(r=t(e,n,a))}),!!r},nz=ax,az=T_;const sz=Tt(function(e,t,r){var n=nz(e)?ez:rz;return r&&az(e,t,r)&&(t=void 0),n(e,tz(t))});var iz=function(e,t){var r=e.alwaysShow,n=e.ifOverflow;return r&&(n="extendDomain"),n===t},oz=g_;var lz=function(e,t,r){"__proto__"==t&&oz?oz(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},cz=Gk,dz=ik;const uz=Tt(function(e,t){var r={};return t=dz(t),cz(e,function(e,n,a){lz(r,n,t(e,n,a))}),r});var hz=Qk;var mz=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0},pz=function(e,t){var r=!0;return hz(e,function(e,n,a){return r=!!t(e,n,a)}),r},fz=ik,xz=ax,yz=T_;const vz=Tt(function(e,t,r){var n=xz(e)?mz:pz;return r&&yz(e,t,r)&&(t=void 0),n(e,fz(t))});var gz=["x","y"];function bz(e){return(bz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jz(){return jz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jz.apply(this,arguments)}function wz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Nz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wz(Object(r),!0).forEach(function(t){Sz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Sz(e,t,r){var n;return n=function(e,t){if("object"!=bz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==bz(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kz(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _z(e,t){var r=e.x,n=e.y,a=kz(e,gz),s="".concat(r),i=parseInt(s,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||a.height),d=parseInt(c,10),u="".concat(t.width||a.width),h=parseInt(u,10);return Nz(Nz(Nz(Nz(Nz({},t),a),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Oz(e){return At.createElement(iq,jz({shapeType:"rectangle",propTransformer:_z,activeClassName:"recharts-active-bar"},e))}var Cz,Az=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(r,n){if("number"==typeof e)return e;var a=ig(r)||function(e){return Cv(e)}(r);return a?e(r,n):(a||FD(!1),t)}},Ez=["value","background"];function Pz(e){return(Pz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tz(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Mz(){return Mz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mz.apply(this,arguments)}function Dz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Iz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dz(Object(r),!0).forEach(function(t){zz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Rz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$z(n.key),n)}}function Fz(e,t,r){return t=Bz(t),function(e,t){if(t&&("object"===Pz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Lz()?Reflect.construct(t,r||[],Bz(e).constructor):t.apply(e,r))}function Lz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Lz=function(){return!!e})()}function Bz(e){return(Bz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qz(e,t){return(qz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zz(e,t,r){return(t=$z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $z(e){var t=function(e,t){if("object"!=Pz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Pz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pz(t)?t:t+""}var Uz=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return zz(t=Fz(this,e,[].concat(n)),"state",{isAnimationFinished:!1}),zz(t,"id",cg("recharts-bar-")),zz(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()}),zz(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qz(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],(r=[{key:"renderRectanglesStatically",value:function(e){var t=this,r=this.props,n=r.shape,a=r.dataKey,s=r.activeIndex,i=r.activeBar,o=Fg(this.props,!1);return e&&e.map(function(e,r){var l=r===s,c=l?i:n,d=Iz(Iz(Iz({},o),e),{},{isActive:l,option:c,index:r,dataKey:a,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return At.createElement(Yg,Mz({className:"recharts-bar-rectangle"},wg(t.props,e,r),{key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(r)}),At.createElement(Oz,d))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,r=t.data,n=t.layout,a=t.isAnimationActive,s=t.animationBegin,i=t.animationDuration,o=t.animationEasing,l=t.animationId,c=this.state.prevData;return At.createElement(fL,{begin:s,duration:i,isActive:a,easing:o,from:{t:0},to:{t:1},key:"bar-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var a=t.t,s=r.map(function(e,t){var r=c&&c[t];if(r){var s=hg(r.x,e.x),i=hg(r.y,e.y),o=hg(r.width,e.width),l=hg(r.height,e.height);return Iz(Iz({},e),{},{x:s(a),y:i(a),width:o(a),height:l(a)})}if("horizontal"===n){var d=hg(0,e.height)(a);return Iz(Iz({},e),{},{y:e.y+e.height-d,height:d})}var u=hg(0,e.width)(a);return Iz(Iz({},e),{},{width:u})});return At.createElement(Yg,null,e.renderRectanglesStatically(s))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,r=e.isAnimationActive,n=this.state.prevData;return!(r&&t&&t.length)||n&&RM(n,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,r=t.data,n=t.dataKey,a=t.activeIndex,s=Fg(this.props.background,!1);return r.map(function(t,r){t.value;var i=t.background,o=Tz(t,Ez);if(!i)return null;var l=Iz(Iz(Iz(Iz(Iz({},o),{},{fill:"#eee"},i),s),wg(e.props,t,r)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:n,index:r,className:"recharts-bar-background-rectangle"});return At.createElement(Oz,Mz({key:"background-bar-".concat(r),option:e.props.background,isActive:r===a},l))})}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.data,a=r.xAxis,s=r.yAxis,i=r.layout,o=Tg(r.children,QD);if(!o)return null;var l="vertical"===i?n[0].height/2:n[0].width/2,c=function(e,t){var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:cI(e,t)}},d={clipPath:e?"url(#clipPath-".concat(t,")"):null};return At.createElement(Yg,d,o.map(function(e){return At.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:n,xAxis:a,yAxis:s,layout:i,offset:l,dataPointFormatter:c})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,r=e.data,n=e.className,a=e.xAxis,s=e.yAxis,i=e.left,o=e.top,l=e.width,c=e.height,d=e.isAnimationActive,u=e.background,h=e.id;if(t||!r||!r.length)return null;var m=this.state.isAnimationFinished,p=Vr("recharts-bar",n),f=a&&a.allowDataOverflow,x=s&&s.allowDataOverflow,y=f||x,v=Cv(h)?this.id:h;return At.createElement(Yg,{className:p},f||x?At.createElement("defs",null,At.createElement("clipPath",{id:"clipPath-".concat(v)},At.createElement("rect",{x:f?i:i-l/2,y:x?o:o-c/2,width:f?l:2*l,height:x?c:2*c}))):null,At.createElement(Yg,{className:"recharts-bar-rectangles",clipPath:y?"url(#clipPath-".concat(v,")"):null},u?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(y,v),(!d||m)&&vR.renderCallByParent(this.props,r))}}])&&Rz(t.prototype,r),n&&Rz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Vz(e){return(Vz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gz(n.key),n)}}function Hz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Kz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hz(Object(r),!0).forEach(function(t){Yz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Yz(e,t,r){return(t=Gz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gz(e){var t=function(e,t){if("object"!=Vz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Vz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vz(t)?t:t+""}Cz=Uz,zz(Uz,"displayName","Bar"),zz(Uz,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!cO.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),zz(Uz,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,s=e.xAxis,i=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,d=e.dataStartIndex,u=e.displayedData,h=e.offset,m=function(e,t){if(!e)return null;for(var r=0,n=e.length;r<n;r++)if(e[r].item===t)return e[r].position;return null}(n,r);if(!m)return null;var p=t.layout,f=r.type.defaultProps,x=void 0!==f?Iz(Iz({},f),r.props):r.props,y=x.dataKey,v=x.children,g=x.minPointSize,b="horizontal"===p?i:s,j=c?b.scale.domain():null,w=function(e){var t=e.numericAxis,r=t.scale.domain();if("number"===t.type){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]}({numericAxis:b}),N=Tg(v,XO),S=u.map(function(e,t){var n,u,h,f,x,v;c?n=function(e,t){if(!t||2!==t.length||!ig(t[0])||!ig(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!ig(e[0])||e[0]<r)&&(a[0]=r),(!ig(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a}(c[d+t],j):(n=cI(e,y),Array.isArray(n)||(n=[w,n]));var b=Az(g,Cz.defaultProps.minPointSize)(n[1],t);if("horizontal"===p){var S,k=[i.scale(n[0]),i.scale(n[1])],_=k[0],O=k[1];u=_I({axis:s,ticks:o,bandSize:a,offset:m.offset,entry:e,index:t}),h=null!==(S=null!=O?O:_)&&void 0!==S?S:void 0,f=m.size;var C=_-O;if(x=Number.isNaN(C)?0:C,v={x:u,y:i.y,width:f,height:i.height},Math.abs(b)>0&&Math.abs(x)<Math.abs(b)){var A=ag(x||b)*(Math.abs(b)-Math.abs(x));h-=A,x+=A}}else{var E=[s.scale(n[0]),s.scale(n[1])],P=E[0],T=E[1];if(u=P,h=_I({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:e,index:t}),f=T-P,x=m.size,v={x:s.x,y:h,width:s.width,height:x},Math.abs(b)>0&&Math.abs(f)<Math.abs(b))f+=ag(f||b)*(Math.abs(b)-Math.abs(f))}return Iz(Iz(Iz({},e),{},{x:u,y:h,width:f,height:x,value:c?n:n[1],payload:e,background:v},N&&N[t]&&N[t].props),{},{tooltipPayload:[MI(r,e)],tooltipPosition:{x:u+f/2,y:h+x/2}})});return Iz({data:S,layout:p},h)});var Xz=function(e,t,r,n,a){var s=e.width,i=e.height,o=e.layout,l=e.children,c=Object.keys(t),d={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:i-r.bottom,bottomMirror:i-r.bottom},u=!!Mg(l,Uz);return c.reduce(function(s,i){var l,c,h,m,p,f=t[i],x=f.orientation,y=f.domain,v=f.padding,g=void 0===v?{}:v,b=f.mirror,j=f.reversed,w="".concat(x).concat(b?"Mirror":"");if("number"===f.type&&("gap"===f.padding||"no-gap"===f.padding)){var N=y[1]-y[0],S=1/0,k=f.categoricalDomain.sort(pg);if(k.forEach(function(e,t){t>0&&(S=Math.min((e||0)-(k[t-1]||0),S))}),Number.isFinite(S)){var _=S/N,O="vertical"===f.layout?r.height:r.width;if("gap"===f.padding&&(l=_*O/2),"no-gap"===f.padding){var C=dg(e.barCategoryGap,_*O),A=_*O/2;l=A-C-(A-C)/O*C}}}c="xAxis"===n?[r.left+(g.left||0)+(l||0),r.left+r.width-(g.right||0)-(l||0)]:"yAxis"===n?"horizontal"===o?[r.top+r.height-(g.bottom||0),r.top+(g.top||0)]:[r.top+(g.top||0)+(l||0),r.top+r.height-(g.bottom||0)-(l||0)]:f.range,j&&(c=[c[1],c[0]]);var E=gI(f,a,u),P=E.scale,T=E.realScaleType;P.domain(y).range(c),jI(P);var M=SI(P,Kz(Kz({},f),{},{realScaleType:T}));"xAxis"===n?(p="top"===x&&!b||"bottom"===x&&b,h=r.left,m=d[w]-p*f.height):"yAxis"===n&&(p="left"===x&&!b||"right"===x&&b,h=d[w]-p*f.width,m=r.top);var D=Kz(Kz(Kz({},f),M),{},{realScaleType:T,x:h,y:m,scale:P,width:"xAxis"===n?r.width:f.width,height:"yAxis"===n?r.height:f.height});return D.bandSize=PI(D,M),f.hide||"xAxis"!==n?f.hide||(d[w]+=(p?-1:1)*D.width):d[w]+=(p?-1:1)*D.height,Kz(Kz({},s),{},Yz({},i,D))},{})},Qz=function(e,t){var r=e.x,n=e.y,a=t.x,s=t.y;return{x:Math.min(r,a),y:Math.min(n,s),width:Math.abs(a-r),height:Math.abs(s-n)}},Jz=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,r=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.bandAware,n=t.position;if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a;case"end":var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}],n=[{key:"create",value:function(t){return new e(t)}}],r&&Wz(t.prototype,r),n&&Wz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();Yz(Jz,"EPS",1e-4);var Zz=function(e){var t=Object.keys(e).reduce(function(t,r){return Kz(Kz({},t),{},Yz({},r,Jz.create(e[r])))},{});return Kz(Kz({},t),{},{apply:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.bandAware,a=r.position;return uz(e,function(e,r){return t[r].apply(e,{bandAware:n,position:a})})},isInRange:function(e){return vz(e,function(e,r){return t[r].isInRange(e)})}})};var e$=ik,t$=PN,r$=IN;var n$=function(e){return function(t,r,n){var a=Object(t);if(!t$(t)){var s=e$(r);t=r$(t),r=function(e){return s(a[e],e,a)}}var i=e(t,r,n);return i>-1?a[s?t[i]:i]:void 0}},a$=Eq;var s$=ok,i$=ik,o$=function(e){var t=a$(e),r=t%1;return t==t?r?t-r:t:0},l$=Math.max;const c$=Tt(n$(function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:o$(r);return a<0&&(a=l$(n+a,0)),s$(e,i$(t),a)}));var d$=ev(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),u$=Ct.createContext(void 0),h$=Ct.createContext(void 0),m$=Ct.createContext(void 0),p$=Ct.createContext({}),f$=Ct.createContext(void 0),x$=Ct.createContext(0),y$=Ct.createContext(0),v$=function(e){var t=e.state,r=t.xAxisMap,n=t.yAxisMap,a=t.offset,s=e.clipPathId,i=e.children,o=e.width,l=e.height,c=d$(a);return At.createElement(u$.Provider,{value:r},At.createElement(h$.Provider,{value:n},At.createElement(p$.Provider,{value:a},At.createElement(m$.Provider,{value:c},At.createElement(f$.Provider,{value:s},At.createElement(x$.Provider,{value:l},At.createElement(y$.Provider,{value:o},i)))))))},g$=function(e){var t=Ct.useContext(u$);null==t&&FD(!1);var r=t[e];return null==r&&FD(!1),r},b$=function(e){var t=Ct.useContext(h$);null==t&&FD(!1);var r=t[e];return null==r&&FD(!1),r},j$=function(){return Ct.useContext(y$)},w$=function(){return Ct.useContext(x$)};function N$(e){return(N$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T$(n.key),n)}}function k$(e,t,r){return t=O$(t),function(e,t){if(t&&("object"===N$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_$()?Reflect.construct(t,r||[],O$(e).constructor):t.apply(e,r))}function _$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_$=function(){return!!e})()}function O$(e){return(O$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C$(e,t){return(C$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function A$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A$(Object(r),!0).forEach(function(t){P$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function P$(e,t,r){return(t=T$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T$(e){var t=function(e,t){if("object"!=N$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=N$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N$(t)?t:t+""}function M$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D$(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I$(){return I$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I$.apply(this,arguments)}function R$(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,s=e.yAxisId,i=e.shape,o=e.className,l=e.alwaysShow,c=Ct.useContext(f$),d=g$(a),u=b$(s),h=Ct.useContext(m$);if(!c||!h)return null;Gg(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=function(e,t,r,n,a,s,i,o,l){var c=a.x,d=a.y,u=a.width,h=a.height;if(r){var m=l.y,p=e.y.apply(m,{position:s});if(iz(l,"discard")&&!e.y.isInRange(p))return null;var f=[{x:c+u,y:p},{x:c,y:p}];return"left"===o?f.reverse():f}if(t){var x=l.x,y=e.x.apply(x,{position:s});if(iz(l,"discard")&&!e.x.isInRange(y))return null;var v=[{x:y,y:d+h},{x:y,y:d}];return"top"===i?v.reverse():v}if(n){var g=l.segment.map(function(t){return e.apply(t,{position:s})});return iz(l,"discard")&&sz(g,function(t){return!e.isInRange(t)})?null:g}return null}(Zz({x:d.scale,y:u.scale}),og(t),og(r),n&&2===n.length,h,e.position,d.orientation,u.orientation,e);if(!m)return null;var p=M$(m,2),f=p[0],x=f.x,y=f.y,v=p[1],g=v.x,b=v.y,j=E$(E$({clipPath:iz(e,"hidden")?"url(#".concat(c,")"):void 0},Fg(e,!0)),{},{x1:x,y1:y,x2:g,y2:b});return At.createElement(Yg,{className:Vr("recharts-reference-line",o)},function(e,t){return At.isValidElement(e)?At.cloneElement(e,t):Ix(e)?e(t):At.createElement("line",I$({},t,{className:"recharts-reference-line-line"}))}(i,j),aR.renderCallByParent(e,function(e){var t=e.x1,r=e.y1,n=e.x2,a=e.y2;return Qz({x:t,y:r},{x:n,y:a})}({x1:x,y1:y,x2:g,y2:b})))}var F$=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k$(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C$(e,t)}(e,At.Component),t=e,(r=[{key:"render",value:function(){return At.createElement(R$,this.props)}}])&&S$(t.prototype,r),n&&S$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function L$(){return L$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L$.apply(this,arguments)}function B$(e){return(B$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function z$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q$(Object(r),!0).forEach(function(t){K$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y$(n.key),n)}}function U$(e,t,r){return t=W$(t),function(e,t){if(t&&("object"===B$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,V$()?Reflect.construct(t,r||[],W$(e).constructor):t.apply(e,r))}function V$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(V$=function(){return!!e})()}function W$(e){return(W$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H$(e,t){return(H$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function K$(e,t,r){return(t=Y$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y$(e){var t=function(e,t){if("object"!=B$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=B$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B$(t)?t:t+""}P$(F$,"displayName","ReferenceLine"),P$(F$,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var G$=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),U$(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H$(e,t)}(e,At.Component),t=e,(r=[{key:"render",value:function(){var t=this.props,r=t.x,n=t.y,a=t.r,s=t.alwaysShow,i=t.clipPathId,o=og(r),l=og(n);if(Gg(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!o||!l)return null;var c=function(e){var t=e.x,r=e.y,n=e.xAxis,a=e.yAxis,s=Zz({x:n.scale,y:a.scale}),i=s.apply({x:t,y:r},{bandAware:!0});return iz(e,"discard")&&!s.isInRange(i)?null:i}(this.props);if(!c)return null;var d=c.x,u=c.y,h=this.props,m=h.shape,p=h.className,f=z$(z$({clipPath:iz(this.props,"hidden")?"url(#".concat(i,")"):void 0},Fg(this.props,!0)),{},{cx:d,cy:u});return At.createElement(Yg,{className:Vr("recharts-reference-dot",p)},e.renderDot(m,f),aR.renderCallByParent(this.props,{x:d-a,y:u-a,width:2*a,height:2*a}))}}])&&$$(t.prototype,r),n&&$$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function X$(){return X$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X$.apply(this,arguments)}function Q$(e){return(Q$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Z$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J$(Object(r),!0).forEach(function(t){sU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iU(n.key),n)}}function tU(e,t,r){return t=nU(t),function(e,t){if(t&&("object"===Q$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rU()?Reflect.construct(t,r||[],nU(e).constructor):t.apply(e,r))}function rU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(rU=function(){return!!e})()}function nU(e){return(nU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aU(e,t){return(aU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sU(e,t,r){return(t=iU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iU(e){var t=function(e,t){if("object"!=Q$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Q$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Q$(t)?t:t+""}K$(G$,"displayName","ReferenceDot"),K$(G$,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),K$(G$,"renderDot",function(e,t){return At.isValidElement(e)?At.cloneElement(e,t):Ix(e)?e(t):At.createElement(RL,L$({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))});var oU=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),tU(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aU(e,t)}(e,At.Component),t=e,(r=[{key:"render",value:function(){var t=this.props,r=t.x1,n=t.x2,a=t.y1,s=t.y2,i=t.className,o=t.alwaysShow,l=t.clipPathId;Gg(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=og(r),d=og(n),u=og(a),h=og(s),m=this.props.shape;if(!(c||d||u||h||m))return null;var p=function(e,t,r,n,a){var s=a.x1,i=a.x2,o=a.y1,l=a.y2,c=a.xAxis,d=a.yAxis;if(!c||!d)return null;var u=Zz({x:c.scale,y:d.scale}),h={x:e?u.x.apply(s,{position:"start"}):u.x.rangeMin,y:r?u.y.apply(o,{position:"start"}):u.y.rangeMin},m={x:t?u.x.apply(i,{position:"end"}):u.x.rangeMax,y:n?u.y.apply(l,{position:"end"}):u.y.rangeMax};return!iz(a,"discard")||u.isInRange(h)&&u.isInRange(m)?Qz(h,m):null}(c,d,u,h,this.props);if(!p&&!m)return null;var f=iz(this.props,"hidden")?"url(#".concat(l,")"):void 0;return At.createElement(Yg,{className:Vr("recharts-reference-area",i)},e.renderRect(m,Z$(Z$({clipPath:f},Fg(this.props,!0)),p)),aR.renderCallByParent(this.props,p))}}])&&eU(t.prototype,r),n&&eU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function lU(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var n=[],a=0;a<e.length;a+=t){if(void 0!==r&&!0!==r(e[a]))return;n.push(e[a])}return n}function cU(e,t,r){return function(e){var t=e.width,r=e.height,n=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=n*Math.PI/180,s=Math.atan(r/t),i=a>s&&a<Math.PI-s?r/Math.sin(a):t/Math.cos(a);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},r)}function dU(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function uU(e){return(uU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hU(Object(r),!0).forEach(function(t){pU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pU(e,t,r){var n;return n=function(e,t){if("object"!=uU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=uU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==uU(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fU(e,t,r){var n=e.tick,a=e.ticks,s=e.viewBox,i=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,d=e.unit,u=e.angle;if(!a||!a.length||!n)return[];if(ig(l)||cO.isSsr)return function(e,t){return lU(e,t+1)}(a,"number"==typeof l&&ig(l)?l:0);var h=[],m="top"===o||"bottom"===o?"width":"height",p=d&&"width"===m?aC(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},f=function(e,n){var a=Ix(c)?c(e.value,n):e.value;return"width"===m?cU(aC(a,{fontSize:t,letterSpacing:r}),p,u):aC(a,{fontSize:t,letterSpacing:r})[m]},x=a.length>=2?ag(a[1].coordinate-a[0].coordinate):1,y=function(e,t,r){var n="width"===r,a=e.x,s=e.y,i=e.width,o=e.height;return 1===t?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}(s,x,m);return"equidistantPreserveStart"===l?function(e,t,r,n,a){for(var s,i=(n||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,h=function(){var t=null==n?void 0:n[c];if(void 0===t)return{v:lU(n,d)};var s,i=c,h=function(){return void 0===s&&(s=r(t,i)),s},m=t.coordinate,p=0===c||dU(e,m,h,u,l);p||(c=0,u=o,d+=1),p&&(u=m+e*(h()/2+a),c+=d)};d<=i.length;)if(s=h())return s.v;return[]}(x,y,f,a,i):(h="preserveStart"===l||"preserveStartEnd"===l?function(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end;if(s){var d=n[o-1],u=r(d,o-1),h=e*(d.coordinate+e*u/2-c);i[o-1]=d=mU(mU({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate}),dU(e,d.tickCoord,function(){return u},l,c)&&(c=d.tickCoord-e*(u/2+a),i[o-1]=mU(mU({},d),{},{isShow:!0}))}for(var m=s?o-1:o,p=function(t){var n,s=i[t],o=function(){return void 0===n&&(n=r(s,t)),n};if(0===t){var d=e*(s.coordinate-e*o()/2-l);i[t]=s=mU(mU({},s),{},{tickCoord:d<0?s.coordinate-d*e:s.coordinate})}else i[t]=s=mU(mU({},s),{},{tickCoord:s.coordinate});dU(e,s.tickCoord,o,l,c)&&(l=s.tickCoord+e*(o()/2+a),i[t]=mU(mU({},s),{},{isShow:!0}))},f=0;f<m;f++)p(f);return i}(x,y,f,a,i,"preserveStartEnd"===l):function(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,o=t.start,l=t.end,c=function(t){var n,c=s[t],d=function(){return void 0===n&&(n=r(c,t)),n};if(t===i-1){var u=e*(c.coordinate+e*d()/2-l);s[t]=c=mU(mU({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else s[t]=c=mU(mU({},c),{},{tickCoord:c.coordinate});dU(e,c.tickCoord,d,o,l)&&(l=c.tickCoord-e*(d()/2+a),s[t]=mU(mU({},c),{},{isShow:!0}))},d=i-1;d>=0;d--)c(d);return s}(x,y,f,a,i),h.filter(function(e){return e.isShow}))}sU(oU,"displayName","ReferenceArea"),sU(oU,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),sU(oU,"renderRect",function(e,t){return At.isValidElement(e)?At.cloneElement(e,t):Ix(e)?e(t):At.createElement(_L,X$({},t,{className:"recharts-reference-area-rect"}))});var xU=["viewBox"],yU=["viewBox"],vU=["ticks"];function gU(e){return(gU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bU(){return bU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bU.apply(this,arguments)}function jU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jU(Object(r),!0).forEach(function(t){AU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function NU(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function SU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EU(n.key),n)}}function kU(e,t,r){return t=OU(t),function(e,t){if(t&&("object"===gU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_U()?Reflect.construct(t,r||[],OU(e).constructor):t.apply(e,r))}function _U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_U=function(){return!!e})()}function OU(e){return(OU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CU(e,t){return(CU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function AU(e,t,r){return(t=EU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EU(e){var t=function(e,t){if("object"!=gU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gU(t)?t:t+""}var PU=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(r=kU(this,e,[t])).state={fontSize:"",letterSpacing:""},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CU(e,t)}(e,Ct.Component),t=e,n=[{key:"renderTickItem",value:function(e,t,r){var n=Vr(t.className,"recharts-cartesian-axis-tick-value");return At.isValidElement(e)?At.cloneElement(e,wU(wU({},t),{},{className:n})):Ix(e)?e(wU(wU({},t),{},{className:n})):At.createElement(MC,bU({},t,{className:"recharts-cartesian-axis-tick-value"}),r)}}],(r=[{key:"shouldComponentUpdate",value:function(e,t){var r=e.viewBox,n=NU(e,xU),a=this.props,s=a.viewBox,i=NU(a,yU);return!fg(r,s)||!fg(n,i)||!fg(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,r,n,a,s,i,o=this.props,l=o.x,c=o.y,d=o.width,u=o.height,h=o.orientation,m=o.tickSize,p=o.mirror,f=o.tickMargin,x=p?-1:1,y=e.tickSize||m,v=ig(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=r=e.coordinate,i=(n=(a=c+ +!p*u)-x*y)-x*f,s=v;break;case"left":n=a=e.coordinate,s=(t=(r=l+ +!p*d)-x*y)-x*f,i=v;break;case"right":n=a=e.coordinate,s=(t=(r=l+ +p*d)+x*y)+x*f,i=v;break;default:t=r=e.coordinate,i=(n=(a=c+ +p*u)+x*y)+x*f,s=v}return{line:{x1:t,y1:n,x2:r,y2:a},tick:{x:s,y:i}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,r=t.orientation,n=t.mirror;switch(r){case"left":e=n?"start":"end";break;case"right":e=n?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,r=e.mirror,n="end";switch(t){case"left":case"right":n="middle";break;case"top":n=r?"start":"end";break;default:n=r?"end":"start"}return n}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,a=e.height,s=e.orientation,i=e.mirror,o=e.axisLine,l=wU(wU(wU({},Fg(this.props,!1)),Fg(o,!1)),{},{fill:"none"});if("top"===s||"bottom"===s){var c=+("top"===s&&!i||"bottom"===s&&i);l=wU(wU({},l),{},{x1:t,y1:r+c*a,x2:t+n,y2:r+c*a})}else{var d=+("left"===s&&!i||"right"===s&&i);l=wU(wU({},l),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return At.createElement("line",bU({},l,{className:Vr("recharts-cartesian-axis-line",Ov(o,"className"))}))}},{key:"renderTicks",value:function(t,r,n){var a=this,s=this.props,i=s.tickLine,o=s.stroke,l=s.tick,c=s.tickFormatter,d=s.unit,u=fU(wU(wU({},this.props),{},{ticks:t}),r,n),h=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),p=Fg(this.props,!1),f=Fg(l,!1),x=wU(wU({},p),{},{fill:"none"},Fg(i,!1)),y=u.map(function(t,r){var n=a.getTickLineCoord(t),s=n.line,y=n.tick,v=wU(wU(wU(wU({textAnchor:h,verticalAnchor:m},p),{},{stroke:"none",fill:o},f),y),{},{index:r,payload:t,visibleTicksCount:u.length,tickFormatter:c});return At.createElement(Yg,bU({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},wg(a.props,t,r)),i&&At.createElement("line",bU({},x,s,{className:Vr("recharts-cartesian-axis-tick-line",Ov(i,"className"))})),l&&e.renderTickItem(l,v,"".concat(Ix(c)?c(t.value,r):t.value).concat(d||"")))});return At.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var e=this,t=this.props,r=t.axisLine,n=t.width,a=t.height,s=t.ticksGenerator,i=t.className;if(t.hide)return null;var o=this.props,l=o.ticks,c=NU(o,vU),d=l;return Ix(s)&&(d=l&&l.length>0?s(this.props):s(c)),n<=0||a<=0||!d||!d.length?null:At.createElement(Yg,{className:Vr("recharts-cartesian-axis",i),ref:function(t){e.layerReference=t}},r&&this.renderAxisLine(),this.renderTicks(d,this.state.fontSize,this.state.letterSpacing),aR.renderCallByParent(this.props))}}])&&SU(t.prototype,r),n&&SU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();AU(PU,"displayName","CartesianAxis"),AU(PU,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var TU=["x1","y1","x2","y2","key"],MU=["offset"];function DU(e){return(DU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function RU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?IU(Object(r),!0).forEach(function(t){FU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function FU(e,t,r){var n;return n=function(e,t){if("object"!=DU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=DU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==DU(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LU(){return LU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LU.apply(this,arguments)}function BU(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var qU=function(e){var t=e.fill;if(!t||"none"===t)return null;var r=e.fillOpacity,n=e.x,a=e.y,s=e.width,i=e.height,o=e.ry;return At.createElement("rect",{x:n,y:a,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function zU(e,t){var r;if(At.isValidElement(e))r=At.cloneElement(e,t);else if(Ix(e))r=e(t);else{var n=t.x1,a=t.y1,s=t.x2,i=t.y2,o=t.key,l=BU(t,TU),c=Fg(l,!1);c.offset;var d=BU(c,MU);r=At.createElement("line",LU({},d,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:o}))}return r}function $U(e){var t=e.x,r=e.width,n=e.horizontal,a=void 0===n||n,s=e.horizontalPoints;if(!a||!s||!s.length)return null;var i=s.map(function(n,s){var i=RU(RU({},e),{},{x1:t,y1:n,x2:t+r,y2:n,key:"line-".concat(s),index:s});return zU(a,i)});return At.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function UU(e){var t=e.y,r=e.height,n=e.vertical,a=void 0===n||n,s=e.verticalPoints;if(!a||!s||!s.length)return null;var i=s.map(function(n,s){var i=RU(RU({},e),{},{x1:n,y1:t,x2:n,y2:t+r,key:"line-".concat(s),index:s});return zU(a,i)});return At.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function VU(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,s=e.width,i=e.height,o=e.horizontalPoints,l=e.horizontal;if(!(void 0===l||l)||!t||!t.length)return null;var c=o.map(function(e){return Math.round(e+a-a)}).sort(function(e,t){return e-t});a!==c[0]&&c.unshift(0);var d=c.map(function(e,o){var l=!c[o+1]?a+i-e:c[o+1]-e;if(l<=0)return null;var d=o%t.length;return At.createElement("rect",{key:"react-".concat(o),y:e,x:n,height:l,width:s,stroke:"none",fill:t[d],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return At.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function WU(e){var t=e.vertical,r=void 0===t||t,n=e.verticalFill,a=e.fillOpacity,s=e.x,i=e.y,o=e.width,l=e.height,c=e.verticalPoints;if(!r||!n||!n.length)return null;var d=c.map(function(e){return Math.round(e+s-s)}).sort(function(e,t){return e-t});s!==d[0]&&d.unshift(0);var u=d.map(function(e,t){var r=!d[t+1]?s+o-e:d[t+1]-e;if(r<=0)return null;var c=t%n.length;return At.createElement("rect",{key:"react-".concat(t),x:e,y:i,width:r,height:l,stroke:"none",fill:n[c],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return At.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var HU=function(e,t){var r=e.xAxis,n=e.width,a=e.height,s=e.offset;return fI(fU(RU(RU(RU({},PU.defaultProps),r),{},{ticks:xI(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},KU=function(e,t){var r=e.yAxis,n=e.width,a=e.height,s=e.offset;return fI(fU(RU(RU(RU({},PU.defaultProps),r),{},{ticks:xI(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},YU={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function GU(e){var t,r,n,a,s,i,o,l,c=j$(),d=w$(),u=Ct.useContext(p$),h=RU(RU({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:YU.stroke,fill:null!==(r=e.fill)&&void 0!==r?r:YU.fill,horizontal:null!==(n=e.horizontal)&&void 0!==n?n:YU.horizontal,horizontalFill:null!==(a=e.horizontalFill)&&void 0!==a?a:YU.horizontalFill,vertical:null!==(s=e.vertical)&&void 0!==s?s:YU.vertical,verticalFill:null!==(i=e.verticalFill)&&void 0!==i?i:YU.verticalFill,x:ig(e.x)?e.x:u.left,y:ig(e.y)?e.y:u.top,width:ig(e.width)?e.width:u.width,height:ig(e.height)?e.height:u.height}),m=h.x,p=h.y,f=h.width,x=h.height,y=h.syncWithTicks,v=h.horizontalValues,g=h.verticalValues,b=(o=Ct.useContext(u$),ug(o)),j=(l=Ct.useContext(h$),c$(l,function(e){return vz(e.domain,Number.isFinite)})||ug(l));if(!ig(f)||f<=0||!ig(x)||x<=0||!ig(m)||m!==+m||!ig(p)||p!==+p)return null;var w=h.verticalCoordinatesGenerator||HU,N=h.horizontalCoordinatesGenerator||KU,S=h.horizontalPoints,k=h.verticalPoints;if((!S||!S.length)&&Ix(N)){var _=v&&v.length,O=N({yAxis:j?RU(RU({},j),{},{ticks:_?v:j.ticks}):void 0,width:c,height:d,offset:u},!!_||y);Gg(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(DU(O),"]")),Array.isArray(O)&&(S=O)}if((!k||!k.length)&&Ix(w)){var C=g&&g.length,A=w({xAxis:b?RU(RU({},b),{},{ticks:C?g:b.ticks}):void 0,width:c,height:d,offset:u},!!C||y);Gg(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(DU(A),"]")),Array.isArray(A)&&(k=A)}return At.createElement("g",{className:"recharts-cartesian-grid"},At.createElement(qU,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),At.createElement($U,LU({},h,{offset:u,horizontalPoints:S,xAxis:b,yAxis:j})),At.createElement(UU,LU({},h,{offset:u,verticalPoints:k,xAxis:b,yAxis:j})),At.createElement(VU,LU({},h,{horizontalPoints:S})),At.createElement(WU,LU({},h,{verticalPoints:k})))}GU.displayName="CartesianGrid";var XU=["type","layout","connectNulls","ref"],QU=["key"];function JU(e){return(JU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZU(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eV(){return eV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eV.apply(this,arguments)}function tV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tV(Object(r),!0).forEach(function(t){dV(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tV(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function nV(e){return function(e){if(Array.isArray(e))return aV(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return aV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aV(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uV(n.key),n)}}function iV(e,t,r){return t=lV(t),function(e,t){if(t&&("object"===JU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,oV()?Reflect.construct(t,r||[],lV(e).constructor):t.apply(e,r))}function oV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(oV=function(){return!!e})()}function lV(e){return(lV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cV(e,t){return(cV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function dV(e,t,r){return(t=uV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uV(e){var t=function(e,t){if("object"!=JU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=JU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==JU(t)?t:t+""}var hV=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return dV(t=iV(this,e,[].concat(n)),"state",{isAnimationFinished:!0,totalLength:0}),dV(t,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),dV(t,"getStrokeDasharray",function(r,n,a){var s=a.reduce(function(e,t){return e+t});if(!s)return t.generateSimpleStrokeDasharray(n,r);for(var i=Math.floor(r/s),o=r%s,l=n-r,c=[],d=0,u=0;d<a.length;u+=a[d],++d)if(u+a[d]>o){c=[].concat(nV(a.slice(0,d)),[o-u]);break}var h=c.length%2==0?[0,l]:[l];return[].concat(nV(e.repeat(a,i)),nV(c),h).map(function(e){return"".concat(e,"px")}).join(", ")}),dV(t,"id",cg("recharts-line-")),dV(t,"pathRef",function(e){t.mainCurve=e}),dV(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),dV(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cV(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var r=e.length%2!=0?[].concat(nV(e),[0]):e,n=[],a=0;a<t;++a)n=[].concat(nV(n),nV(r));return n}},{key:"renderDotItem",value:function(e,t){var r;if(At.isValidElement(e))r=At.cloneElement(e,t);else if(Ix(e))r=e(t);else{var n=t.key,a=ZU(t,QU),s=Vr("recharts-line-dot","boolean"!=typeof e?e.className:"");r=At.createElement(RL,eV({key:n},a,{className:s}))}return r}}],(r=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.points,a=r.xAxis,s=r.yAxis,i=r.layout,o=Tg(r.children,QD);if(!o)return null;var l=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:cI(e.payload,t)}},c={clipPath:e?"url(#clipPath-".concat(t,")"):null};return At.createElement(Yg,c,o.map(function(e){return At.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:n,xAxis:a,yAxis:s,layout:i,dataPointFormatter:l})}))}},{key:"renderDots",value:function(t,r,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.dot,i=a.points,o=a.dataKey,l=Fg(this.props,!1),c=Fg(s,!0),d=i.map(function(t,r){var n=rV(rV(rV({key:"dot-".concat(r),r:3},l),c),{},{index:r,cx:t.x,cy:t.y,value:t.value,dataKey:o,payload:t.payload,points:i});return e.renderDotItem(s,n)}),u={clipPath:t?"url(#clipPath-".concat(r?"":"dots-").concat(n,")"):null};return At.createElement(Yg,eV({className:"recharts-line-dots",key:"dots"},u),d)}},{key:"renderCurveStatically",value:function(e,t,r,n){var a=this.props,s=a.type,i=a.layout,o=a.connectNulls;a.ref;var l=ZU(a,XU),c=rV(rV(rV({},Fg(l,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(r,")"):null,points:e},n),{},{type:s,layout:i,connectNulls:o});return At.createElement(LR,eV({},c,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var r=this,n=this.props,a=n.points,s=n.strokeDasharray,i=n.isAnimationActive,o=n.animationBegin,l=n.animationDuration,c=n.animationEasing,d=n.animationId,u=n.animateNewValues,h=n.width,m=n.height,p=this.state,f=p.prevPoints,x=p.totalLength;return At.createElement(fL,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var i=n.t;if(f){var o=f.length/a.length,l=a.map(function(e,t){var r=Math.floor(t*o);if(f[r]){var n=f[r],a=hg(n.x,e.x),s=hg(n.y,e.y);return rV(rV({},e),{},{x:a(i),y:s(i)})}if(u){var l=hg(2*h,e.x),c=hg(m/2,e.y);return rV(rV({},e),{},{x:l(i),y:c(i)})}return rV(rV({},e),{},{x:e.x,y:e.y})});return r.renderCurveStatically(l,e,t)}var c,d=hg(0,x)(i);if(s){var p="".concat(s).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});c=r.getStrokeDasharray(d,x,p)}else c=r.generateSimpleStrokeDasharray(x,d);return r.renderCurveStatically(a,e,t,{strokeDasharray:c})})}},{key:"renderCurve",value:function(e,t){var r=this.props,n=r.points,a=r.isAnimationActive,s=this.state,i=s.prevPoints,o=s.totalLength;return a&&n&&n.length&&(!i&&o>0||!RM(i,n))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(n,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,a=t.points,s=t.className,i=t.xAxis,o=t.yAxis,l=t.top,c=t.left,d=t.width,u=t.height,h=t.isAnimationActive,m=t.id;if(r||!a||!a.length)return null;var p=this.state.isAnimationFinished,f=1===a.length,x=Vr("recharts-line",s),y=i&&i.allowDataOverflow,v=o&&o.allowDataOverflow,g=y||v,b=Cv(m)?this.id:m,j=null!==(e=Fg(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},w=j.r,N=void 0===w?3:w,S=j.strokeWidth,k=void 0===S?2:S,_=(Rg(n)?n:{}).clipDot,O=void 0===_||_,C=2*N+k;return At.createElement(Yg,{className:x},y||v?At.createElement("defs",null,At.createElement("clipPath",{id:"clipPath-".concat(b)},At.createElement("rect",{x:y?c:c-d/2,y:v?l:l-u/2,width:y?d:2*d,height:v?u:2*u})),!O&&At.createElement("clipPath",{id:"clipPath-dots-".concat(b)},At.createElement("rect",{x:c-C/2,y:l-C/2,width:d+C,height:u+C}))):null,!f&&this.renderCurve(g,b),this.renderErrorBar(g,b),(f||n)&&this.renderDots(g,O,b),(!h||p)&&vR.renderCallByParent(this.props,a))}}])&&sV(t.prototype,r),n&&sV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();dV(hV,"displayName","Line"),dV(hV,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!cO.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),dV(hV,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,s=e.yAxisTicks,i=e.dataKey,o=e.bandSize,l=e.displayedData,c=e.offset,d=t.layout;return rV({points:l.map(function(e,t){var l=cI(e,i);return"horizontal"===d?{x:kI({axis:r,ticks:a,bandSize:o,entry:e,index:t}),y:Cv(l)?null:n.scale(l),value:l,payload:e}:{x:Cv(l)?null:r.scale(l),y:kI({axis:n,ticks:s,bandSize:o,entry:e,index:t}),value:l,payload:e}}),layout:d},c)});var mV,pV=["layout","type","stroke","connectNulls","isRange","ref"],fV=["key"];function xV(e){return(xV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yV(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vV(){return vV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vV.apply(this,arguments)}function gV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gV(Object(r),!0).forEach(function(t){_V(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gV(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OV(n.key),n)}}function wV(e,t,r){return t=SV(t),function(e,t){if(t&&("object"===xV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,NV()?Reflect.construct(t,r||[],SV(e).constructor):t.apply(e,r))}function NV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(NV=function(){return!!e})()}function SV(e){return(SV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kV(e,t){return(kV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _V(e,t,r){return(t=OV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OV(e){var t=function(e,t){if("object"!=xV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xV(t)?t:t+""}var CV=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return _V(t=wV(this,e,[].concat(n)),"state",{isAnimationFinished:!0}),_V(t,"id",cg("recharts-area-")),_V(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),Ix(e)&&e()}),_V(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),Ix(e)&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kV(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],(r=[{key:"renderDots",value:function(t,r,n){var a=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(a&&!s)return null;var i=this.props,o=i.dot,l=i.points,c=i.dataKey,d=Fg(this.props,!1),u=Fg(o,!0),h=l.map(function(t,r){var n=bV(bV(bV({key:"dot-".concat(r),r:3},d),u),{},{index:r,cx:t.x,cy:t.y,dataKey:c,value:t.value,payload:t.payload,points:l});return e.renderDotItem(o,n)}),m={clipPath:t?"url(#clipPath-".concat(r?"":"dots-").concat(n,")"):null};return At.createElement(Yg,vV({className:"recharts-area-dots"},m),h)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,r=t.baseLine,n=t.points,a=t.strokeWidth,s=n[0].x,i=n[n.length-1].x,o=e*Math.abs(s-i),l=wM(n.map(function(e){return e.y||0}));return ig(r)&&"number"==typeof r?l=Math.max(r,l):r&&Array.isArray(r)&&r.length&&(l=Math.max(wM(r.map(function(e){return e.y||0})),l)),ig(l)?At.createElement("rect",{x:s<i?s:s-o,y:0,width:o,height:Math.floor(l+(a?parseInt("".concat(a),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,r=t.baseLine,n=t.points,a=t.strokeWidth,s=n[0].y,i=n[n.length-1].y,o=e*Math.abs(s-i),l=wM(n.map(function(e){return e.x||0}));return ig(r)&&"number"==typeof r?l=Math.max(r,l):r&&Array.isArray(r)&&r.length&&(l=Math.max(wM(r.map(function(e){return e.x||0})),l)),ig(l)?At.createElement("rect",{x:0,y:s<i?s:s-o,width:l+(a?parseInt("".concat(a),10):1),height:Math.floor(o)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,r,n){var a=this.props,s=a.layout,i=a.type,o=a.stroke,l=a.connectNulls,c=a.isRange;a.ref;var d=yV(a,pV);return At.createElement(Yg,{clipPath:r?"url(#clipPath-".concat(n,")"):null},At.createElement(LR,vV({},Fg(d,!0),{points:e,connectNulls:l,type:i,baseLine:t,layout:s,stroke:"none",className:"recharts-area-area"})),"none"!==o&&At.createElement(LR,vV({},Fg(this.props,!1),{className:"recharts-area-curve",layout:s,type:i,connectNulls:l,fill:"none",points:e})),"none"!==o&&c&&At.createElement(LR,vV({},Fg(this.props,!1),{className:"recharts-area-curve",layout:s,type:i,connectNulls:l,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e,t){var r=this,n=this.props,a=n.points,s=n.baseLine,i=n.isAnimationActive,o=n.animationBegin,l=n.animationDuration,c=n.animationEasing,d=n.animationId,u=this.state,h=u.prevPoints,m=u.prevBaseLine;return At.createElement(fL,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},key:"area-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var i=n.t;if(h){var o,l=h.length/a.length,c=a.map(function(e,t){var r=Math.floor(t*l);if(h[r]){var n=h[r],a=hg(n.x,e.x),s=hg(n.y,e.y);return bV(bV({},e),{},{x:a(i),y:s(i)})}return e});return o=ig(s)&&"number"==typeof s?hg(m,s)(i):Cv(s)||ng(s)?hg(m,0)(i):s.map(function(e,t){var r=Math.floor(t*l);if(m[r]){var n=m[r],a=hg(n.x,e.x),s=hg(n.y,e.y);return bV(bV({},e),{},{x:a(i),y:s(i)})}return e}),r.renderAreaStatically(c,o,e,t)}return At.createElement(Yg,null,At.createElement("defs",null,At.createElement("clipPath",{id:"animationClipPath-".concat(t)},r.renderClipRect(i))),At.createElement(Yg,{clipPath:"url(#animationClipPath-".concat(t,")")},r.renderAreaStatically(a,s,e,t)))})}},{key:"renderArea",value:function(e,t){var r=this.props,n=r.points,a=r.baseLine,s=r.isAnimationActive,i=this.state,o=i.prevPoints,l=i.prevBaseLine,c=i.totalLength;return s&&n&&n.length&&(!o&&c>0||!RM(o,n)||!RM(l,a))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(n,a,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,a=t.points,s=t.className,i=t.top,o=t.left,l=t.xAxis,c=t.yAxis,d=t.width,u=t.height,h=t.isAnimationActive,m=t.id;if(r||!a||!a.length)return null;var p=this.state.isAnimationFinished,f=1===a.length,x=Vr("recharts-area",s),y=l&&l.allowDataOverflow,v=c&&c.allowDataOverflow,g=y||v,b=Cv(m)?this.id:m,j=null!==(e=Fg(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},w=j.r,N=void 0===w?3:w,S=j.strokeWidth,k=void 0===S?2:S,_=(Rg(n)?n:{}).clipDot,O=void 0===_||_,C=2*N+k;return At.createElement(Yg,{className:x},y||v?At.createElement("defs",null,At.createElement("clipPath",{id:"clipPath-".concat(b)},At.createElement("rect",{x:y?o:o-d/2,y:v?i:i-u/2,width:y?d:2*d,height:v?u:2*u})),!O&&At.createElement("clipPath",{id:"clipPath-dots-".concat(b)},At.createElement("rect",{x:o-C/2,y:i-C/2,width:d+C,height:u+C}))):null,f?null:this.renderArea(g,b),(n||f)&&this.renderDots(g,O,b),(!h||p)&&vR.renderCallByParent(this.props,a))}}])&&jV(t.prototype,r),n&&jV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function AV(e){return(AV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RV(n.key),n)}}function PV(e,t,r){return t=MV(t),function(e,t){if(t&&("object"===AV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,TV()?Reflect.construct(t,r||[],MV(e).constructor):t.apply(e,r))}function TV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(TV=function(){return!!e})()}function MV(e){return(MV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DV(e,t){return(DV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function IV(e,t,r){return(t=RV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RV(e){var t=function(e,t){if("object"!=AV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=AV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==AV(t)?t:t+""}function FV(){return FV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FV.apply(this,arguments)}function LV(e){var t=e.xAxisId,r=j$(),n=w$(),a=g$(t);return null==a?null:Ct.createElement(PU,FV({},a,{className:Vr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return xI(e,!0)}}))}mV=CV,_V(CV,"displayName","Area"),_V(CV,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!cO.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),_V(CV,"getBaseValue",function(e,t,r,n){var a=e.layout,s=e.baseValue,i=t.props.baseValue,o=null!=i?i:s;if(ig(o)&&"number"==typeof o)return o;var l="horizontal"===a?n:r,c=l.scale.domain();if("number"===l.type){var d=Math.max(c[0],c[1]),u=Math.min(c[0],c[1]);return"dataMin"===o?u:"dataMax"===o||d<0?d:Math.max(Math.min(c[0],c[1]),0)}return"dataMin"===o?c[0]:"dataMax"===o?c[1]:c[0]}),_V(CV,"getComposedData",function(e){var t,r=e.props,n=e.item,a=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,m=e.offset,p=r.layout,f=d&&d.length,x=mV.getBaseValue(r,n,a,s),y="horizontal"===p,v=!1,g=h.map(function(e,t){var r;f?r=d[u+t]:(r=cI(e,c),Array.isArray(r)?v=!0:r=[x,r]);var n=null==r[1]||f&&null==cI(e,c);return y?{x:kI({axis:a,ticks:i,bandSize:l,entry:e,index:t}),y:n?null:s.scale(r[1]),value:r,payload:e}:{x:n?null:a.scale(r[1]),y:kI({axis:s,ticks:o,bandSize:l,entry:e,index:t}),value:r,payload:e}});return t=f||v?g.map(function(e){var t=Array.isArray(e.value)?e.value[0]:null;return y?{x:e.x,y:null!=t&&null!=e.y?s.scale(t):null}:{x:null!=t?a.scale(t):null,y:e.y}}):y?s.scale(x):a.scale(x),bV({points:g,baseLine:t,layout:p,isRange:v},m)}),_V(CV,"renderDotItem",function(e,t){var r;if(At.isValidElement(e))r=At.cloneElement(e,t);else if(Ix(e))r=e(t);else{var n=Vr("recharts-area-dot","boolean"!=typeof e?e.className:""),a=t.key,s=yV(t,fV);r=At.createElement(RL,vV({},s,{key:a,className:n}))}return r});var BV=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),PV(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DV(e,t)}(e,Ct.Component),t=e,(r=[{key:"render",value:function(){return Ct.createElement(LV,this.props)}}])&&EV(t.prototype,r),n&&EV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function qV(e){return(qV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KV(n.key),n)}}function $V(e,t,r){return t=VV(t),function(e,t){if(t&&("object"===qV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,UV()?Reflect.construct(t,r||[],VV(e).constructor):t.apply(e,r))}function UV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(UV=function(){return!!e})()}function VV(e){return(VV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WV(e,t){return(WV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function HV(e,t,r){return(t=KV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KV(e){var t=function(e,t){if("object"!=qV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qV(t)?t:t+""}function YV(){return YV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YV.apply(this,arguments)}IV(BV,"displayName","XAxis"),IV(BV,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var GV=function(e){var t=e.yAxisId,r=j$(),n=w$(),a=b$(t);return null==a?null:Ct.createElement(PU,YV({},a,{className:Vr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return xI(e,!0)}}))},XV=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$V(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WV(e,t)}(e,Ct.Component),t=e,(r=[{key:"render",value:function(){return Ct.createElement(GV,this.props)}}])&&zV(t.prototype,r),n&&zV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function QV(e){return function(e){if(Array.isArray(e))return JV(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return JV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JV(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}HV(XV,"displayName","YAxis"),HV(XV,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var ZV=function(e,t,r,n,a){var s=Tg(e,F$),i=Tg(e,G$),o=[].concat(QV(s),QV(i)),l=Tg(e,oU),c="".concat(n,"Id"),d=n[0],u=t;if(o.length&&(u=o.reduce(function(e,t){if(t.props[c]===r&&iz(t.props,"extendDomain")&&ig(t.props[d])){var n=t.props[d];return[Math.min(e[0],n),Math.max(e[1],n)]}return e},u)),l.length){var h="".concat(d,"1"),m="".concat(d,"2");u=l.reduce(function(e,t){if(t.props[c]===r&&iz(t.props,"extendDomain")&&ig(t.props[h])&&ig(t.props[m])){var n=t.props[h],a=t.props[m];return[Math.min(e[0],n,a),Math.max(e[1],n,a)]}return e},u)}return a&&a.length&&(u=a.reduce(function(e,t){return ig(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},u)),u},eW={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new a(n,s||e,i),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,s=n.length,i=new Array(s);a<s;a++)i[a]=n[a].fn;return i},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,a,s,i){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,a),!0;case 5:return d.fn.call(d.context,t,n,a,s),!0;case 6:return d.fn.call(d.context,t,n,a,s,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,m=d.length;for(c=0;c<m;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,a);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,a){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||a&&!o.once||n&&o.context!==n||i(this,s);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||a&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:i(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(eW);var tW=new(Tt(eW.exports)),rW="recharts.syncMouseEvents";function nW(e){return(nW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iW(n.key),n)}}function sW(e,t,r){return(t=iW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iW(e){var t=function(e,t){if("object"!=nW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=nW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nW(t)?t:t+""}var oW=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),sW(this,"activeIndex",0),sW(this,"coordinateList",[]),sW(this,"layout","horizontal")},(t=[{key:"setDetails",value:function(e){var t,r=e.coordinateList,n=void 0===r?null:r,a=e.container,s=void 0===a?null:a,i=e.layout,o=void 0===i?null:i,l=e.offset,c=void 0===l?null:l,d=e.mouseHandlerCallback,u=void 0===d?null:d;this.coordinateList=null!==(t=null!=n?n:this.coordinateList)&&void 0!==t?t:[],this.container=null!=s?s:this.container,this.layout=null!=o?o:this.layout,this.offset=null!=c?c:this.offset,this.mouseHandlerCallback=null!=u?u:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var r=this.container.getBoundingClientRect(),n=r.x,a=r.y,s=r.height,i=this.coordinateList[this.activeIndex].coordinate,o=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=n+i+o,d=a+this.offset.top+s/2+l;this.mouseHandlerCallback({pageX:c,pageY:d})}}}])&&aW(e.prototype,t),r&&aW(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function lW(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,s=e.endAngle;return{points:[$I(t,r,n,a),$I(t,r,n,s)],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function cW(e,t,r){var n,a,s,i;if("horizontal"===e)s=n=t.x,a=r.top,i=r.top+r.height;else if("vertical"===e)i=a=t.y,n=r.left,s=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return lW(t);var o=t.cx,l=t.cy,c=t.innerRadius,d=t.outerRadius,u=t.angle,h=$I(o,l,c,u),m=$I(o,l,d,u);n=h.x,a=h.y,s=m.x,i=m.y}return[{x:n,y:a},{x:s,y:i}]}function dW(e){return(dW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uW(Object(r),!0).forEach(function(t){mW(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mW(e,t,r){var n;return n=function(e,t){if("object"!=dW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=dW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==dW(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pW(e){var t,r,n,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,h=e.layout,m=e.chartName,p=null!==(t=a.props.cursor)&&void 0!==t?t:null===(r=a.type.defaultProps)||void 0===r?void 0:r.cursor;if(!a||!p||!i||!o||"ScatterChart"!==m&&"axis"!==s)return null;var f=LR;if("ScatterChart"===m)n=o,f=VL;else if("BarChart"===m)n=function(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-a,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(h,o,c,u),f=_L;else if("radial"===h){var x=lW(o),y=x.cx,v=x.cy,g=x.radius;n={cx:y,cy:v,startAngle:x.startAngle,endAngle:x.endAngle,innerRadius:g,outerRadius:g},f=OR}else n={points:cW(h,o,c)},f=LR;var b=hW(hW(hW(hW({stroke:"#ccc",pointerEvents:"none"},c),n),Fg(p,!1)),{},{payload:l,payloadIndex:d,className:Vr("recharts-tooltip-cursor",p.className)});return Ct.isValidElement(p)?Ct.cloneElement(p,b):Ct.createElement(f,b)}var fW=["item"],xW=["children","className","width","height","style","compact","title","desc"];function yW(e){return(yW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vW(){return vW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vW.apply(this,arguments)}function gW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||OW(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bW(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TW(n.key),n)}}function wW(e,t,r){return t=SW(t),function(e,t){if(t&&("object"===yW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,NW()?Reflect.construct(t,r||[],SW(e).constructor):t.apply(e,r))}function NW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(NW=function(){return!!e})()}function SW(e){return(SW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kW(e,t){return(kW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _W(e){return function(e){if(Array.isArray(e))return CW(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||OW(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OW(e,t){if(e){if("string"==typeof e)return CW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?CW(e,t):void 0}}function CW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function AW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function EW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AW(Object(r),!0).forEach(function(t){PW(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function PW(e,t,r){return(t=TW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TW(e){var t=function(e,t){if("object"!=yW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yW(t)?t:t+""}var MW={xAxis:["bottom","top"],yAxis:["left","right"]},DW={width:"100%",height:"100%"},IW={x:0,y:0};function RW(e){return e}var FW=function(e,t){var r=t.graphicalItems,n=t.dataStartIndex,a=t.dataEndIndex,s=(null!=r?r:[]).reduce(function(e,t){var r=t.props.data;return r&&r.length?[].concat(_W(e),_W(r)):e},[]);return s.length>0?s:e&&e.length&&ig(n)&&ig(a)?e.slice(n,a+1):[]};function LW(e){return"number"===e?[0,"auto"]:void 0}var BW=function(e,t,r,n){var a=e.graphicalItems,s=e.tooltipAxis,i=FW(t,e);return r<0||!a||!a.length||r>=i.length?null:a.reduce(function(a,o){var l,c,d=null!==(l=o.props.data)&&void 0!==l?l:t;(d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1)),s.dataKey&&!s.allowDuplicatedCategory)?c=mg(void 0===d?i:d,s.dataKey,n):c=d&&d[r]||i[r];return c?[].concat(_W(a),[MI(o,c)]):a},[])},qW=function(e,t,r,n){var a=n||{x:e.chartX,y:e.chartY},s=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(a,r),i=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,i=null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0;if(i<=1)return 0;if(a&&"angleAxis"===a.axisType&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var o=a.range,l=0;l<i;l++){var c=l>0?n[l-1].coordinate:n[i-1].coordinate,d=n[l].coordinate,u=l>=i-1?n[0].coordinate:n[l+1].coordinate,h=void 0;if(ag(d-c)!==ag(u-d)){var m=[];if(ag(u-d)===ag(o[1]-o[0])){h=u;var p=d+o[1]-o[0];m[0]=Math.min(p,(p+c)/2),m[1]=Math.max(p,(p+c)/2)}else{h=c;var f=u+o[1]-o[0];m[0]=Math.min(d,(f+d)/2),m[1]=Math.max(d,(f+d)/2)}var x=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>x[0]&&e<=x[1]||e>=m[0]&&e<=m[1]){s=n[l].index;break}}else{var y=Math.min(c,u),v=Math.max(c,u);if(e>(y+d)/2&&e<=(v+d)/2){s=n[l].index;break}}}else for(var g=0;g<i;g++)if(0===g&&e<=(r[g].coordinate+r[g+1].coordinate)/2||g>0&&g<i-1&&e>(r[g].coordinate+r[g-1].coordinate)/2&&e<=(r[g].coordinate+r[g+1].coordinate)/2||g===i-1&&e>(r[g].coordinate+r[g-1].coordinate)/2){s=r[g].index;break}return s}(s,i,l,o);if(c>=0&&l){var d=l[c]&&l[c].value,u=BW(e,t,c,d),h=function(e,t,r,n){var a=t.find(function(e){return e&&e.index===r});if(a){if("horizontal"===e)return{x:a.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:a.coordinate};if("centric"===e){var s=a.coordinate,i=n.radius;return EW(EW(EW({},n),$I(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,l=n.angle;return EW(EW(EW({},n),$I(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return IW}(r,i,c,a);return{activeTooltipIndex:c,activeLabel:d,activePayload:u,activeCoordinate:h}}return null},zW=function(e,t){var r=t.axes,n=t.graphicalItems,a=t.axisType,s=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=e.stackOffset,h=pI(c,a);return r.reduce(function(t,r){var m,p=void 0!==r.type.defaultProps?EW(EW({},r.type.defaultProps),r.props):r.props,f=p.type,x=p.dataKey,y=p.allowDataOverflow,v=p.allowDuplicatedCategory,g=p.scale,b=p.ticks,j=p.includeHidden,w=p[s];if(t[w])return t;var N,S,k,_=FW(e.data,{graphicalItems:n.filter(function(e){var t;return(s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s])===w}),dataStartIndex:o,dataEndIndex:l}),O=_.length;(function(e,t,r){if("number"===r&&!0===t&&Array.isArray(e)){var n=null==e?void 0:e[0],a=null==e?void 0:e[1];if(n&&a&&ig(n)&&ig(a))return!0}return!1})(p.domain,y,f)&&(N=EI(p.domain,null,y),!h||"number"!==f&&"auto"===g||(k=dI(_,x,"category")));var C=LW(f);if(!N||0===N.length){var A,E=null!==(A=p.domain)&&void 0!==A?A:C;if(x){if(N=dI(_,x,f),"category"===f&&h){var P=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1}(N);v&&P?(S=N,N=Dq(0,O)):v||(N=TI(E,N,r).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(_W(e),[t])},[]))}else if("category"===f)N=v?N.filter(function(e){return""!==e&&!Cv(e)}):TI(E,N,r).reduce(function(e,t){return e.indexOf(t)>=0||""===t||Cv(t)?e:[].concat(_W(e),[t])},[]);else if("number"===f){var T=function(e,t,r,n,a){var s=t.map(function(t){return hI(e,t,r,a,n)}).filter(function(e){return!Cv(e)});return s&&s.length?s.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null}(_,n.filter(function(e){var t,r,n=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],a="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===w&&(j||!a)}),x,a,c);T&&(N=T)}!h||"number"!==f&&"auto"===g||(k=dI(_,x,"category"))}else N=h?Dq(0,O):i&&i[w]&&i[w].hasStack&&"number"===f?"expand"===u?[0,1]:OI(i[w].stackGroups,o,l):mI(_,n.filter(function(e){var t=s in e.props?e.props[s]:e.type.defaultProps[s],r="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===w&&(j||!r)}),f,c,!0);if("number"===f)N=ZV(d,N,w,a,b),E&&(N=EI(E,N,y));else if("category"===f&&E){var M=E;N.every(function(e){return M.indexOf(e)>=0})&&(N=M)}}return EW(EW({},t),{},PW({},w,EW(EW({},p),{},{axisType:a,domain:N,categoricalDomain:k,duplicateDomain:S,originalDomain:null!==(m=p.domain)&&void 0!==m?m:C,isCategorical:h,layout:c})))},{})},$W=function(e,t){var r=t.axisType,n=void 0===r?"xAxis":r,a=t.AxisComp,s=t.graphicalItems,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.children,d="".concat(n,"Id"),u=Tg(c,a),h={};return u&&u.length?h=zW(e,{axes:u,graphicalItems:s,axisType:n,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l}):s&&s.length&&(h=function(e,t){var r=t.graphicalItems,n=t.Axis,a=t.axisType,s=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=FW(e.data,{graphicalItems:r,dataStartIndex:o,dataEndIndex:l}),h=u.length,m=pI(c,a),p=-1;return r.reduce(function(e,t){var f,x=(void 0!==t.type.defaultProps?EW(EW({},t.type.defaultProps),t.props):t.props)[s],y=LW("number");return e[x]?e:(p++,m?f=Dq(0,h):i&&i[x]&&i[x].hasStack?(f=OI(i[x].stackGroups,o,l),f=ZV(d,f,x,a)):(f=EI(y,mI(u,r.filter(function(e){var t,r,n=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],a="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===x&&!a}),"number",c),n.defaultProps.allowDataOverflow),f=ZV(d,f,x,a)),EW(EW({},e),{},PW({},x,EW(EW({axisType:a},n.defaultProps),{},{hide:!0,orientation:Ov(MW,"".concat(a,".").concat(p%2),null),domain:f,originalDomain:y,isCategorical:m,layout:c}))))},{})}(e,{Axis:a,graphicalItems:s,axisType:n,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l})),h},UW=function(e){var t=e.children,r=e.defaultShowTooltip,n=Mg(t,Jq),a=0,s=0;return e.data&&0!==e.data.length&&(s=e.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(a=n.props.startIndex),n.props.endIndex>=0&&(s=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:Boolean(r)}},VW=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},WW=function(e,t){var r=e.props,n=(e.graphicalItems,e.xAxisMap),a=void 0===n?{}:n,s=e.yAxisMap,i=void 0===s?{}:s,o=r.width,l=r.height,c=r.children,d=r.margin||{},u=Mg(c,Jq),h=Mg(c,qk),m=Object.keys(i).reduce(function(e,t){var r=i[t],n=r.orientation;return r.mirror||r.hide?e:EW(EW({},e),{},PW({},n,e[n]+r.width))},{left:d.left||0,right:d.right||0}),p=Object.keys(a).reduce(function(e,t){var r=a[t],n=r.orientation;return r.mirror||r.hide?e:EW(EW({},e),{},PW({},n,Ov(e,"".concat(n))+r.height))},{top:d.top||0,bottom:d.bottom||0}),f=EW(EW({},p),m),x=f.bottom;u&&(f.bottom+=u.props.height||Jq.defaultProps.height),h&&t&&(f=function(e,t,r,n){var a=r.children,s=r.width,i=r.margin,o=s-(i.left||0)-(i.right||0),l=rI({children:a,legendWidth:o});if(l){var c=n||{},d=c.width,u=c.height,h=l.align,m=l.verticalAlign,p=l.layout;if(("vertical"===p||"horizontal"===p&&"middle"===m)&&"center"!==h&&ig(e[h]))return oI(oI({},e),{},lI({},h,e[h]+(d||0)));if(("horizontal"===p||"vertical"===p&&"center"===h)&&"middle"!==m&&ig(e[m]))return oI(oI({},e),{},lI({},m,e[m]+(u||0)))}return e}(f,0,r,t));var y=o-f.left-f.right,v=l-f.top-f.bottom;return EW(EW({brushBottom:x},f),{},{width:Math.max(y,0),height:Math.max(v,0)})},HW=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},KW=function(e){var t=e.chartName,r=e.GraphicalChild,n=e.defaultTooltipEventType,a=void 0===n?"axis":n,s=e.validateTooltipEventTypes,i=void 0===s?["axis"]:s,o=e.axisComponents,l=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,u=function(e,t){var r=t.graphicalItems,n=t.stackGroups,a=t.offset,s=t.updateId,i=t.dataStartIndex,l=t.dataEndIndex,c=e.barSize,d=e.layout,u=e.barGap,h=e.barCategoryGap,m=e.maxBarSize,p=VW(d),f=p.numericAxisName,x=p.cateAxisName,y=function(e){return!(!e||!e.length)&&e.some(function(e){var t=Cg(e&&e.type);return t&&t.indexOf("Bar")>=0})}(r),v=[];return r.forEach(function(r,p){var g=FW(e.data,{graphicalItems:[r],dataStartIndex:i,dataEndIndex:l}),b=void 0!==r.type.defaultProps?EW(EW({},r.type.defaultProps),r.props):r.props,j=b.dataKey,w=b.maxBarSize,N=b["".concat(f,"Id")],S=b["".concat(x,"Id")],k=o.reduce(function(e,r){var n=t["".concat(r.axisType,"Map")],a=b["".concat(r.axisType,"Id")];n&&n[a]||"zAxis"===r.axisType||FD(!1);var s=n[a];return EW(EW({},e),{},PW(PW({},r.axisType,s),"".concat(r.axisType,"Ticks"),xI(s)))},{}),_=k[x],O=k["".concat(x,"Ticks")],C=n&&n[N]&&n[N].hasStack&&function(e,t){var r,n=(null!==(r=e.type)&&void 0!==r&&r.defaultProps?oI(oI({},e.type.defaultProps),e.props):e.props).stackId;if(og(n)){var a=t[n];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null}(r,n[N].stackGroups),A=Cg(r.type).indexOf("Bar")>=0,E=PI(_,O),P=[],T=y&&function(e){var t=e.barSize,r=e.totalSize,n=e.stackGroups,a=void 0===n?{}:n;if(!a)return{};for(var s={},i=Object.keys(a),o=0,l=i.length;o<l;o++)for(var c=a[i[o]].stackGroups,d=Object.keys(c),u=0,h=d.length;u<h;u++){var m=c[d[u]],p=m.items,f=m.cateAxisId,x=p.filter(function(e){return Cg(e.type).indexOf("Bar")>=0});if(x&&x.length){var y=x[0].type.defaultProps,v=void 0!==y?oI(oI({},y),x[0].props):x[0].props,g=v.barSize,b=v[f];s[b]||(s[b]=[]);var j=Cv(g)?t:g;s[b].push({item:x[0],stackList:x.slice(1),barSize:Cv(j)?void 0:dg(j,r,0)})}}return s}({barSize:c,stackGroups:n,totalSize:HW(k,x)});if(A){var M,D,I=Cv(w)?m:w,R=null!==(M=null!==(D=PI(_,O,!0))&&void 0!==D?D:I)&&void 0!==M?M:0;P=function(e){var t=e.barGap,r=e.barCategoryGap,n=e.bandSize,a=e.sizeList,s=void 0===a?[]:a,i=e.maxBarSize,o=s.length;if(o<1)return null;var l,c=dg(t,n,0,!0),d=[];if(s[0].barSize===+s[0].barSize){var u=!1,h=n/o,m=s.reduce(function(e,t){return e+t.barSize||0},0);(m+=(o-1)*c)>=n&&(m-=(o-1)*c,c=0),m>=n&&h>0&&(u=!0,m=o*(h*=.9));var p={offset:((n-m)/2|0)-c,size:0};l=s.reduce(function(e,t){var r={item:t.item,position:{offset:p.offset+p.size+c,size:u?h:t.barSize}},n=[].concat(aI(e),[r]);return p=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:p})}),n},d)}else{var f=dg(r,n,0,!0);n-2*f-(o-1)*c<=0&&(c=0);var x=(n-2*f-(o-1)*c)/o;x>1&&(x>>=0);var y=i===+i?Math.min(x,i):x;l=s.reduce(function(e,t,r){var n=[].concat(aI(e),[{item:t.item,position:{offset:f+(x+c)*r+(x-y)/2,size:y}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:n[n.length-1].position})}),n},d)}return l}({barGap:u,barCategoryGap:h,bandSize:R!==E?R:E,sizeList:T[S],maxBarSize:I}),R!==E&&(P=P.map(function(e){return EW(EW({},e),{},{position:EW(EW({},e.position),{},{offset:e.position.offset-R/2})})}))}var F,L,B=r&&r.type&&r.type.getComposedData;B&&v.push({props:EW(EW({},B(EW(EW({},k),{},{displayedData:g,props:e,dataKey:j,item:r,bandSize:E,barPosition:P,offset:a,stackedData:C,layout:d,dataStartIndex:i,dataEndIndex:l}))),{},PW(PW(PW({key:r.key||"item-".concat(p)},f,k[f]),x,k[x]),"animationId",s)),childIndex:(F=r,L=e.children,Pg(L).indexOf(F)),item:r})}),v},h=function(e,n){var a=e.props,s=e.dataStartIndex,i=e.dataEndIndex,l=e.updateId;if(!Dg({props:a}))return null;var d=a.children,h=a.layout,m=a.stackOffset,p=a.data,f=a.reverseStackOrder,x=VW(h),y=x.numericAxisName,v=x.cateAxisName,g=Tg(d,r),b=function(e,t,r,n,a,s){if(!e)return null;var i=(s?t.reverse():t).reduce(function(e,t){var a,s=null!==(a=t.type)&&void 0!==a&&a.defaultProps?oI(oI({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(s.hide)return e;var o=s[r],l=e[o]||{hasStack:!1,stackGroups:{}};if(og(i)){var c=l.stackGroups[i]||{numericAxisId:r,cateAxisId:n,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[i]=c}else l.stackGroups[cg("_stackId_")]={numericAxisId:r,cateAxisId:n,items:[t]};return oI(oI({},e),{},lI({},o,l))},{});return Object.keys(i).reduce(function(t,s){var o=i[s];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce(function(t,s){var i=o.stackGroups[s];return oI(oI({},t),{},lI({},s,{numericAxisId:r,cateAxisId:n,items:i.items,stackedData:NI(e,i.items,a)}))},{})),oI(oI({},t),{},lI({},s,o))},{})}(p,g,"".concat(y,"Id"),"".concat(v,"Id"),m,f),j=o.reduce(function(e,t){var r="".concat(t.axisType,"Map");return EW(EW({},e),{},PW({},r,$W(a,EW(EW({},t),{},{graphicalItems:g,stackGroups:t.axisType===y&&b,dataStartIndex:s,dataEndIndex:i}))))},{}),w=WW(EW(EW({},j),{},{props:a,graphicalItems:g}),null==n?void 0:n.legendBBox);Object.keys(j).forEach(function(e){j[e]=c(a,j[e],w,e.replace("Map",""),t)});var N,S,k=j["".concat(v,"Map")],_=(N=ug(k),{tooltipTicks:S=xI(N,!1,!0),orderedTooltipTicks:R_(S,function(e){return e.coordinate}),tooltipAxis:N,tooltipAxisBandSize:PI(N,S)}),O=u(a,EW(EW({},j),{},{dataStartIndex:s,dataEndIndex:i,updateId:l,graphicalItems:g,stackGroups:b,offset:w}));return EW(EW({formattedGraphicalItems:O,graphicalItems:g,offset:w,stackGroups:b},_),j)},m=function(){function e(r){var n,a,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),PW(s=wW(this,e,[r]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),PW(s,"accessibilityManager",new oW),PW(s,"handleLegendBBoxUpdate",function(e){if(e){var t=s.state,r=t.dataStartIndex,n=t.dataEndIndex,a=t.updateId;s.setState(EW({legendBBox:e},h({props:s.props,dataStartIndex:r,dataEndIndex:n,updateId:a},EW(EW({},s.state),{},{legendBBox:e}))))}}),PW(s,"handleReceiveSyncEvent",function(e,t,r){if(s.props.syncId===e){if(r===s.eventEmitterSymbol&&"function"!=typeof s.props.syncMethod)return;s.applySyncEvent(t)}}),PW(s,"handleBrushChange",function(e){var t=e.startIndex,r=e.endIndex;if(t!==s.state.dataStartIndex||r!==s.state.dataEndIndex){var n=s.state.updateId;s.setState(function(){return EW({dataStartIndex:t,dataEndIndex:r},h({props:s.props,dataStartIndex:t,dataEndIndex:r,updateId:n},s.state))}),s.triggerSyncEvent({dataStartIndex:t,dataEndIndex:r})}}),PW(s,"handleMouseEnter",function(e){var t=s.getMouseInfo(e);if(t){var r=EW(EW({},t),{},{isTooltipActive:!0});s.setState(r),s.triggerSyncEvent(r);var n=s.props.onMouseEnter;Ix(n)&&n(r,e)}}),PW(s,"triggeredAfterMouseMove",function(e){var t=s.getMouseInfo(e),r=t?EW(EW({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};s.setState(r),s.triggerSyncEvent(r);var n=s.props.onMouseMove;Ix(n)&&n(r,e)}),PW(s,"handleItemMouseEnter",function(e){s.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),PW(s,"handleItemMouseLeave",function(){s.setState(function(){return{isTooltipActive:!1}})}),PW(s,"handleMouseMove",function(e){e.persist(),s.throttleTriggeredAfterMouseMove(e)}),PW(s,"handleMouseLeave",function(e){s.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};s.setState(t),s.triggerSyncEvent(t);var r=s.props.onMouseLeave;Ix(r)&&r(t,e)}),PW(s,"handleOuterEvent",function(e){var t,r=function(e){var t=e&&e.type;return t&&Og[t]?Og[t]:null}(e),n=Ov(s.props,"".concat(r));r&&Ix(n)&&n(null!==(t=/.*touch.*/i.test(r)?s.getMouseInfo(e.changedTouches[0]):s.getMouseInfo(e))&&void 0!==t?t:{},e)}),PW(s,"handleClick",function(e){var t=s.getMouseInfo(e);if(t){var r=EW(EW({},t),{},{isTooltipActive:!0});s.setState(r),s.triggerSyncEvent(r);var n=s.props.onClick;Ix(n)&&n(r,e)}}),PW(s,"handleMouseDown",function(e){var t=s.props.onMouseDown;Ix(t)&&t(s.getMouseInfo(e),e)}),PW(s,"handleMouseUp",function(e){var t=s.props.onMouseUp;Ix(t)&&t(s.getMouseInfo(e),e)}),PW(s,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),PW(s,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseDown(e.changedTouches[0])}),PW(s,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseUp(e.changedTouches[0])}),PW(s,"handleDoubleClick",function(e){var t=s.props.onDoubleClick;Ix(t)&&t(s.getMouseInfo(e),e)}),PW(s,"handleContextMenu",function(e){var t=s.props.onContextMenu;Ix(t)&&t(s.getMouseInfo(e),e)}),PW(s,"triggerSyncEvent",function(e){void 0!==s.props.syncId&&tW.emit(rW,s.props.syncId,e,s.eventEmitterSymbol)}),PW(s,"applySyncEvent",function(e){var t=s.props,r=t.layout,n=t.syncMethod,a=s.state.updateId,i=e.dataStartIndex,o=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)s.setState(EW({dataStartIndex:i,dataEndIndex:o},h({props:s.props,dataStartIndex:i,dataEndIndex:o,updateId:a},s.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,d=e.activeTooltipIndex,u=s.state,m=u.offset,p=u.tooltipTicks;if(!m)return;if("function"==typeof n)d=n(p,e);else if("value"===n){d=-1;for(var f=0;f<p.length;f++)if(p[f].value===e.activeLabel){d=f;break}}var x=EW(EW({},m),{},{x:m.left,y:m.top}),y=Math.min(l,x.x+x.width),v=Math.min(c,x.y+x.height),g=p[d]&&p[d].value,b=BW(s.state,s.props.data,d),j=p[d]?{x:"horizontal"===r?p[d].coordinate:y,y:"horizontal"===r?v:p[d].coordinate}:IW;s.setState(EW(EW({},e),{},{activeLabel:g,activeCoordinate:j,activePayload:b,activeTooltipIndex:d}))}else s.setState(e)}),PW(s,"renderCursor",function(e){var r,n=s.state,a=n.isTooltipActive,i=n.activeCoordinate,o=n.activePayload,l=n.offset,c=n.activeTooltipIndex,d=n.tooltipAxisBandSize,u=s.getTooltipEventType(),h=null!==(r=e.props.active)&&void 0!==r?r:a,m=s.props.layout,p=e.key||"_recharts-cursor";return At.createElement(pW,{key:p,activeCoordinate:i,activePayload:o,activeTooltipIndex:c,chartName:t,element:e,isActive:h,layout:m,offset:l,tooltipAxisBandSize:d,tooltipEventType:u})}),PW(s,"renderPolarAxis",function(e,t,r){var n=Ov(e,"type.axisType"),a=Ov(s.state,"".concat(n,"Map")),i=e.type.defaultProps,o=void 0!==i?EW(EW({},i),e.props):e.props,l=a&&a[o["".concat(n,"Id")]];return Ct.cloneElement(e,EW(EW({},l),{},{className:Vr(n,l.className),key:e.key||"".concat(t,"-").concat(r),ticks:xI(l,!0)}))}),PW(s,"renderPolarGrid",function(e){var t=e.props,r=t.radialLines,n=t.polarAngles,a=t.polarRadius,i=s.state,o=i.radiusAxisMap,l=i.angleAxisMap,c=ug(o),d=ug(l),u=d.cx,h=d.cy,m=d.innerRadius,p=d.outerRadius;return Ct.cloneElement(e,{polarAngles:Array.isArray(n)?n:xI(d,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(a)?a:xI(c,!0).map(function(e){return e.coordinate}),cx:u,cy:h,innerRadius:m,outerRadius:p,key:e.key||"polar-grid",radialLines:r})}),PW(s,"renderLegend",function(){var e=s.state.formattedGraphicalItems,t=s.props,r=t.children,n=t.width,a=t.height,i=s.props.margin||{},o=n-(i.left||0)-(i.right||0),c=rI({children:r,formattedGraphicalItems:e,legendWidth:o,legendContent:l});if(!c)return null;var d=c.item,u=bW(c,fW);return Ct.cloneElement(d,EW(EW({},u),{},{chartWidth:n,chartHeight:a,margin:i,onBBoxUpdate:s.handleLegendBBoxUpdate}))}),PW(s,"renderTooltip",function(){var e,t=s.props,r=t.children,n=t.accessibilityLayer,a=Mg(r,jO);if(!a)return null;var i=s.state,o=i.isTooltipActive,l=i.activeCoordinate,c=i.activePayload,d=i.activeLabel,u=i.offset,h=null!==(e=a.props.active)&&void 0!==e?e:o;return Ct.cloneElement(a,{viewBox:EW(EW({},u),{},{x:u.left,y:u.top}),active:h,label:d,payload:h?c:[],coordinate:l,accessibilityLayer:n})}),PW(s,"renderBrush",function(e){var t=s.props,r=t.margin,n=t.data,a=s.state,i=a.offset,o=a.dataStartIndex,l=a.dataEndIndex,c=a.updateId;return Ct.cloneElement(e,{key:e.key||"_recharts-brush",onChange:vI(s.handleBrushChange,e.props.onChange),data:n,x:ig(e.props.x)?e.props.x:i.left,y:ig(e.props.y)?e.props.y:i.top+i.height+i.brushBottom-(r.bottom||0),width:ig(e.props.width)?e.props.width:i.width,startIndex:o,endIndex:l,updateId:"brush-".concat(c)})}),PW(s,"renderReferenceElement",function(e,t,r){if(!e)return null;var n=s.clipPathId,a=s.state,i=a.xAxisMap,o=a.yAxisMap,l=a.offset,c=e.type.defaultProps||{},d=e.props,u=d.xAxisId,h=void 0===u?c.xAxisId:u,m=d.yAxisId,p=void 0===m?c.yAxisId:m;return Ct.cloneElement(e,{key:e.key||"".concat(t,"-").concat(r),xAxis:i[h],yAxis:o[p],viewBox:{x:l.left,y:l.top,width:l.width,height:l.height},clipPathId:n})}),PW(s,"renderActivePoints",function(t){var r=t.item,n=t.activePoint,a=t.basePoint,s=t.childIndex,i=t.isRange,o=[],l=r.props.key,c=void 0!==r.item.type.defaultProps?EW(EW({},r.item.type.defaultProps),r.item.props):r.item.props,d=c.activeDot,u=EW(EW({index:s,dataKey:c.dataKey,cx:n.x,cy:n.y,r:4,fill:uI(r.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value},Fg(d,!1)),jg(d));return o.push(e.renderActiveDot(d,u,"".concat(l,"-activePoint-").concat(s))),a?o.push(e.renderActiveDot(d,EW(EW({},u),{},{cx:a.x,cy:a.y}),"".concat(l,"-basePoint-").concat(s))):i&&o.push(null),o}),PW(s,"renderGraphicChild",function(e,t,r){var n=s.filterFormatItem(e,t,r);if(!n)return null;var a=s.getTooltipEventType(),i=s.state,o=i.isTooltipActive,l=i.tooltipAxis,c=i.activeTooltipIndex,d=i.activeLabel,u=Mg(s.props.children,jO),h=n.props,m=h.points,p=h.isRange,f=h.baseLine,x=void 0!==n.item.type.defaultProps?EW(EW({},n.item.type.defaultProps),n.item.props):n.item.props,y=x.activeDot,v=x.hide,g=x.activeBar,b=x.activeShape,j=Boolean(!v&&o&&u&&(y||g||b)),w={};"axis"!==a&&u&&"click"===u.props.trigger?w={onClick:vI(s.handleItemMouseEnter,e.props.onClick)}:"axis"!==a&&(w={onMouseLeave:vI(s.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:vI(s.handleItemMouseEnter,e.props.onMouseEnter)});var N=Ct.cloneElement(e,EW(EW({},n.props),w));if(j){if(!(c>=0)){var S,k=(null!==(S=s.getItemByXY(s.state.activeCoordinate))&&void 0!==S?S:{graphicalItem:N}).graphicalItem,_=k.item,O=void 0===_?e:_,C=k.childIndex,A=EW(EW(EW({},n.props),w),{},{activeIndex:C});return[Ct.cloneElement(O,A),null,null]}var E,P;if(l.dataKey&&!l.allowDuplicatedCategory){var T="function"==typeof l.dataKey?function(e){return"function"==typeof l.dataKey?l.dataKey(e.payload):null}:"payload.".concat(l.dataKey.toString());E=mg(m,T,d),P=p&&f&&mg(f,T,d)}else E=null==m?void 0:m[c],P=p&&f&&f[c];if(b||g){var M=void 0!==e.props.activeIndex?e.props.activeIndex:c;return[Ct.cloneElement(e,EW(EW(EW({},n.props),w),{},{activeIndex:M})),null,null]}if(!Cv(E))return[N].concat(_W(s.renderActivePoints({item:n,activePoint:E,basePoint:P,childIndex:c,isRange:p})))}return p?[N,null,null]:[N,null]}),PW(s,"renderCustomized",function(e,t,r){return Ct.cloneElement(e,EW(EW({key:"recharts-customized-".concat(r)},s.props),s.state))}),PW(s,"renderMap",{CartesianGrid:{handler:RW,once:!0},ReferenceArea:{handler:s.renderReferenceElement},ReferenceLine:{handler:RW},ReferenceDot:{handler:s.renderReferenceElement},XAxis:{handler:RW},YAxis:{handler:RW},Brush:{handler:s.renderBrush,once:!0},Bar:{handler:s.renderGraphicChild},Line:{handler:s.renderGraphicChild},Area:{handler:s.renderGraphicChild},Radar:{handler:s.renderGraphicChild},RadialBar:{handler:s.renderGraphicChild},Scatter:{handler:s.renderGraphicChild},Pie:{handler:s.renderGraphicChild},Funnel:{handler:s.renderGraphicChild},Tooltip:{handler:s.renderCursor,once:!0},PolarGrid:{handler:s.renderPolarGrid,once:!0},PolarAngleAxis:{handler:s.renderPolarAxis},PolarRadiusAxis:{handler:s.renderPolarAxis},Customized:{handler:s.renderCustomized}}),s.clipPathId="".concat(null!==(n=r.id)&&void 0!==n?n:cg("recharts"),"-clip"),s.throttleTriggeredAfterMouseMove=$O(s.triggeredAfterMouseMove,null!==(a=r.throttleDelay)&&void 0!==a?a:1e3/60),s.state={},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kW(e,t)}(e,Ct.Component),r=e,n=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,r=e.data,n=e.height,a=e.layout,s=Mg(t,jO);if(s){var i=s.props.defaultIndex;if(!("number"!=typeof i||i<0||i>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[i]&&this.state.tooltipTicks[i].value,l=BW(this.state,r,i,o),c=this.state.tooltipTicks[i].coordinate,d=(this.state.offset.top+n)/2,u="horizontal"===a?{x:c,y:d}:{y:c,x:d},h=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});h&&(u=EW(EW({},u),h.props.points[i].tooltipPosition),l=h.props.points[i].tooltipPayload);var m={activeTooltipIndex:i,isTooltipActive:!0,activeLabel:o,activePayload:l,activeCoordinate:u};this.setState(m),this.renderCursor(s),this.accessibilityManager.setIndex(i)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(r=this.props.margin.left)&&void 0!==r?r:0,top:null!==(n=this.props.margin.top)&&void 0!==n?n:0}}),null):null;var r,n}},{key:"componentDidUpdate",value:function(e){Lg([Mg(e.children,jO)],[Mg(this.props.children,jO)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=Mg(this.props.children,jO);if(e&&"boolean"==typeof e.props.shared){var t=e.props.shared?"axis":"item";return i.indexOf(t)>=0?t:a}return a}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,r=this.container,n=r.getBoundingClientRect(),a={top:(t=n).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},s={chartX:Math.round(e.pageX-a.left),chartY:Math.round(e.pageY-a.top)},i=n.width/r.offsetWidth||1,o=this.inRange(s.chartX,s.chartY,i);if(!o)return null;var l=this.state,c=l.xAxisMap,d=l.yAxisMap,u=this.getTooltipEventType(),h=qW(this.state,this.props.data,this.props.layout,o);if("axis"!==u&&c&&d){var m=ug(c).scale,p=ug(d).scale,f=m&&m.invert?m.invert(s.chartX):null,x=p&&p.invert?p.invert(s.chartY):null;return EW(EW({},s),{},{xValue:f,yValue:x},h)}return h?EW(EW({},s),h):null}},{key:"inRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.props.layout,a=e/r,s=t/r;if("horizontal"===n||"vertical"===n){var i=this.state.offset;return a>=i.left&&a<=i.left+i.width&&s>=i.top&&s<=i.top+i.height?{x:a,y:s}:null}var o=this.state,l=o.angleAxisMap,c=o.radiusAxisMap;if(l&&c){var d=ug(l);return HI({x:a,y:s},d)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),r=Mg(e,jO),n={};return r&&"axis"===t&&(n="click"===r.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),EW(EW({},jg(this.props,this.handleOuterEvent)),n)}},{key:"addListener",value:function(){tW.on(rW,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){tW.removeListener(rW,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,r){for(var n=this.state.formattedGraphicalItems,a=0,s=n.length;a<s;a++){var i=n[a];if(i.item===e||i.props.key===e.key||t===Cg(i.item.type)&&r===i.childIndex)return i}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,r=t.left,n=t.top,a=t.height,s=t.width;return At.createElement("defs",null,At.createElement("clipPath",{id:e},At.createElement("rect",{x:r,y:n,height:a,width:s})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=gW(t,2),n=r[0],a=r[1];return EW(EW({},e),{},PW({},n,a.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=gW(t,2),n=r[0],a=r[1];return EW(EW({},e),{},PW({},n,a.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,r=t.formattedGraphicalItems,n=t.activeItem;if(r&&r.length)for(var a=0,s=r.length;a<s;a++){var i=r[a],o=i.props,l=i.item,c=void 0!==l.type.defaultProps?EW(EW({},l.type.defaultProps),l.props):l.props,d=Cg(l.type);if("Bar"===d){var u=(o.data||[]).find(function(t){return SL(e,t)});if(u)return{graphicalItem:i,payload:u}}else if("RadialBar"===d){var h=(o.data||[]).find(function(t){return HI(e,t)});if(h)return{graphicalItem:i,payload:h}}else if(oq(i,n)||lq(i,n)||cq(i,n)){var m=mq({graphicalItem:i,activeTooltipItem:n,itemData:c.data}),p=void 0===c.activeIndex?m:c.activeIndex;return{graphicalItem:EW(EW({},i),{},{childIndex:p}),payload:cq(i,n)?c.data[m]:i.props.data[m]}}}return null}},{key:"render",value:function(){var e=this;if(!Dg(this))return null;var t,r,n=this.props,a=n.children,s=n.className,i=n.width,o=n.height,l=n.style,c=n.compact,d=n.title,u=n.desc,h=bW(n,xW),m=Fg(h,!1);if(c)return At.createElement(v$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},At.createElement(Vg,vW({},m,{width:i,height:o,title:d,desc:u}),this.renderClipPath(),qg(a,this.renderMap)));this.props.accessibilityLayer&&(m.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,m.role=null!==(r=this.props.role)&&void 0!==r?r:"application",m.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},m.onFocus=function(){e.accessibilityManager.focus()});var p=this.parseEventsOfWrapper();return At.createElement(v$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},At.createElement("div",vW({className:Vr("recharts-wrapper",s),style:EW({position:"relative",cursor:"default",width:i,height:o},l)},p,{ref:function(t){e.container=t}}),At.createElement(Vg,vW({},m,{width:i,height:o,title:d,desc:u,style:DW}),this.renderClipPath(),qg(a,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],n&&jW(r.prototype,n),s&&jW(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}();PW(m,"displayName",t),PW(m,"defaultProps",EW({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),PW(m,"getDerivedStateFromProps",function(e,t){var r=e.dataKey,n=e.data,a=e.children,s=e.width,i=e.height,o=e.layout,l=e.stackOffset,c=e.margin,d=t.dataStartIndex,u=t.dataEndIndex;if(void 0===t.updateId){var m=UW(e);return EW(EW(EW({},m),{},{updateId:0},h(EW(EW({props:e},m),{},{updateId:0}),t)),{},{prevDataKey:r,prevData:n,prevWidth:s,prevHeight:i,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(r!==t.prevDataKey||n!==t.prevData||s!==t.prevWidth||i!==t.prevHeight||o!==t.prevLayout||l!==t.prevStackOffset||!fg(c,t.prevMargin)){var p=UW(e),f={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},x=EW(EW({},qW(t,n,o)),{},{updateId:t.updateId+1}),y=EW(EW(EW({},p),f),x);return EW(EW(EW({},y),h(EW({props:e},y),t)),{},{prevDataKey:r,prevData:n,prevWidth:s,prevHeight:i,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(!Lg(a,t.prevChildren)){var v,g,b,j,w=Mg(a,Jq),N=w&&null!==(v=null===(g=w.props)||void 0===g?void 0:g.startIndex)&&void 0!==v?v:d,S=w&&null!==(b=null===(j=w.props)||void 0===j?void 0:j.endIndex)&&void 0!==b?b:u,k=N!==d||S!==u,_=!Cv(n)&&!k?t.updateId:t.updateId+1;return EW(EW({updateId:_},h(EW(EW({props:e},t),{},{updateId:_,dataStartIndex:N,dataEndIndex:S}),t)),{},{prevChildren:a,dataStartIndex:N,dataEndIndex:S})}return null}),PW(m,"renderActiveDot",function(e,t,r){var n;return n=Ct.isValidElement(e)?Ct.cloneElement(e,t):Ix(e)?e(t):At.createElement(RL,t),At.createElement(Yg,{className:"recharts-active-dot",key:r},n)});var p=Ct.forwardRef(function(e,t){return At.createElement(m,vW({},e,{ref:t}))});return p.displayName=m.displayName,p},YW=KW({chartName:"LineChart",GraphicalChild:hV,axisComponents:[{axisType:"xAxis",AxisComp:BV},{axisType:"yAxis",AxisComp:XV}],formatAxisMap:Xz}),GW=KW({chartName:"BarChart",GraphicalChild:Uz,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:BV},{axisType:"yAxis",AxisComp:XV}],formatAxisMap:Xz}),XW=KW({chartName:"PieChart",GraphicalChild:kq,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:OB},{axisType:"radiusAxis",AxisComp:mB}],formatAxisMap:function(e,t,r,n,a){var s=e.width,i=e.height,o=e.startAngle,l=e.endAngle,c=dg(e.cx,s,s/2),d=dg(e.cy,i,i/2),u=UI(s,i,r),h=dg(e.innerRadius,u,0),m=dg(e.outerRadius,u,.8*u);return Object.keys(t).reduce(function(e,r){var s,i=t[r],u=i.domain,p=i.reversed;if(Cv(i.range))"angleAxis"===n?s=[o,l]:"radiusAxis"===n&&(s=[h,m]),p&&(s=[s[1],s[0]]);else{var f=LI(s=i.range,2);o=f[0],l=f[1]}var x=gI(i,a),y=x.realScaleType,v=x.scale;v.domain(u).range(s),jI(v);var g=SI(v,RI(RI({},i),{},{realScaleType:y})),b=RI(RI(RI({},i),g),{},{range:s,radius:m,realScaleType:y,scale:v,cx:c,cy:d,innerRadius:h,outerRadius:m,startAngle:o,endAngle:l});return RI(RI({},e),{},FI({},r,b))},{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),QW=KW({chartName:"AreaChart",GraphicalChild:CV,axisComponents:[{axisType:"xAxis",AxisComp:BV},{axisType:"yAxis",AxisComp:XV}],formatAxisMap:Xz});const JW=()=>{var e,t,r,n,a,s,i,o,l,c,d;const[u,h]=Ct.useState("30"),{selectedBranchId:m,setSelectedBranchId:p}=Rp(),{data:f,isLoading:x,refetch:y}=ho({queryKey:["admin-analytics",u,m],queryFn:()=>ex.getAdminAnalytics({period:parseInt(u),branch_id:"all"!==m?parseInt(m):void 0}),refetchInterval:6e4}),{data:v,isLoading:g,refetch:b}=ho({queryKey:["realtime-analytics"],queryFn:ex.getRealTimeAnalytics,refetchInterval:1e4}),{data:j,isLoading:w}=ho({queryKey:["analytics-trends",u,m],queryFn:()=>ex.getAnalyticsTrends({period:parseInt(u),branch_id:"all"!==m?parseInt(m):void 0}),refetchInterval:3e5}),{data:N,isLoading:S,error:k,refetch:_}=ho({queryKey:["feedback-analytics",m],queryFn:()=>(async e=>{if(!sessionStorage.getItem("auth_token"))throw new Error("No authentication token found");return(await tx.get("/admin/feedback/analytics",{params:e})).data})({branch_id:"all"!==m?parseInt(m):void 0,start_date:new Date(Date.now()-24*parseInt(u)*60*60*1e3).toISOString().split("T")[0],end_date:(new Date).toISOString().split("T")[0]}),refetchInterval:3e5});console.log("Feedback Analytics Debug:",{feedbackData:N,feedbackLoading:S,feedbackError:k,selectedBranchId:m,timeRange:u}),null==(e=null==j?void 0:j.revenue_trend)||e.map(e=>({month:new Date(e.date).toLocaleDateString("en-US",{month:"short"}),date:e.date,revenue:e.revenue,appointments:e.appointments,patients:e.patients}));const O=(null==(t=null==j?void 0:j.appointment_types)?void 0:t.map((e,t)=>({name:e.name,value:e.value,color:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"][t%6]})))||[],C=(null==(r=null==j?void 0:j.appointment_trend)?void 0:r.map(e=>({date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),fullDate:e.date,total:e.total,completed:e.completed,cancelled:e.cancelled})))||[],A=[{title:"Total Revenue",value:(null==v?void 0:v.total_revenue_today)?`₱${v.total_revenue_today.toLocaleString()}`:"₱0",change:(null==(n=null==f?void 0:f.system_wide_stats)?void 0:n.revenue)?`₱${f.system_wide_stats.revenue.toLocaleString()}`:"₱0",trend:"up",icon:rn,description:"today / period total"},{title:"Active Users",value:(null==v?void 0:v.active_users)?v.active_users.toString():"0",change:(null==(a=null==f?void 0:f.system_wide_stats)?void 0:a.users)?f.system_wide_stats.users.toString():"0",trend:"up",icon:da,description:"active / total users"},{title:"Appointments Today",value:(null==v?void 0:v.total_appointments_today)?v.total_appointments_today.toString():"0",change:(null==(s=null==f?void 0:f.system_wide_stats)?void 0:s.appointments)?f.system_wide_stats.appointments.toString():"0",trend:"up",icon:ln,description:"today / period total"},{title:"Low Stock Alerts",value:(null==v?void 0:v.low_stock_alerts)?v.low_stock_alerts.toString():"0",change:(null==v?void 0:v.upcoming_appointments)?v.upcoming_appointments.toString():"0",trend:(null==v?void 0:v.low_stock_alerts)&&v.low_stock_alerts>0?"down":"up",icon:Jr,description:"alerts / upcoming appointments"}];return Ae.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[Ae.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(nn,{className:"h-6 w-6 text-admin"}),Ae.jsx("h1",{className:"text-2xl font-bold",children:"Analytics Dashboard"}),"all"!==m&&Ae.jsx(Yd,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Selected Branch"})]}),Ae.jsxs("div",{className:"flex items-center space-x-4",children:[Ae.jsx(Mp,{selectedBranchId:m,onBranchChange:p,useAdminData:!0}),Ae.jsxs(Tm,{value:u,onValueChange:h,children:[Ae.jsx(Dm,{className:"w-48",children:Ae.jsx(Mm,{placeholder:"Select time range"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"7",children:"Last 7 days"}),Ae.jsx(Lm,{value:"30",children:"Last 30 days"}),Ae.jsx(Lm,{value:"90",children:"Last 90 days"}),Ae.jsx(Lm,{value:"365",children:"Last year"})]})]}),Ae.jsxs(Hc,{onClick:()=>{y(),b(),_()},variant:"outline",size:"sm",className:"min-w-[100px] disabled:opacity-50",disabled:x||g||S,children:[Ae.jsx(Vn,{className:"h-4 w-4 mr-2 "+(x||g||S?"animate-spin":"")}),x||g||S?"Refreshing...":"Refresh"]}),Ae.jsxs(Hc,{onClick:async()=>{try{const e=await ex.exportAnalytics("admin","csv",{period:parseInt(u),branch_id:"all"!==m?parseInt(m):void 0}),t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=`analytics-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t),document.body.removeChild(r)}catch(e){console.error("Export failed:",e)}},variant:"outline",size:"sm",className:"min-w-[100px]",children:[Ae.jsx(bn,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),Ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:A.map((e,t)=>Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:e.title}),Ae.jsx(e.icon,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:e.value}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(Yd,{className:"up"===e.trend?"bg-green-500 text-white":"bg-red-500 text-white",children:e.change}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:e.description})]})]})]},t))}),Ae.jsxs(Of,{defaultValue:"revenue",className:"w-full",children:[Ae.jsxs(Cf,{className:"grid w-full grid-cols-3",children:[Ae.jsx(Af,{value:"revenue",children:"Revenue"}),Ae.jsx(Af,{value:"appointments",children:"Appointments"}),Ae.jsx(Af,{value:"feedback",children:"Feedback"})]}),Ae.jsx(Ef,{value:"revenue",className:"space-y-6",children:Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:"Revenue Trends"}),Ae.jsx(ad,{children:"Daily revenue and patient metrics over the selected period"})]}),Ae.jsx(sd,{children:w?Ae.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ae.jsx(Vn,{className:"h-6 w-6 animate-spin mr-2"}),Ae.jsx("span",{children:"Loading trends data..."})]}):Ae.jsx(GO,{width:"100%",height:400,children:Ae.jsxs(YW,{data:(null==j?void 0:j.revenue_trend)||[],children:[Ae.jsx(GU,{strokeDasharray:"3 3"}),Ae.jsx(BV,{dataKey:"date"}),Ae.jsx(XV,{yAxisId:"revenue",orientation:"left"}),Ae.jsx(XV,{yAxisId:"count",orientation:"right"}),Ae.jsx(jO,{formatter:(e,t)=>["Revenue (₱)"===t?`₱${Number(e||0).toLocaleString()}`:e,t]}),Ae.jsx(qk,{}),Ae.jsx(hV,{yAxisId:"revenue",type:"monotone",dataKey:"revenue",stroke:"#3b82f6",strokeWidth:3,name:"Revenue (₱)"}),Ae.jsx(hV,{yAxisId:"count",type:"monotone",dataKey:"patients",stroke:"#10b981",strokeWidth:2,name:"Patients"}),Ae.jsx(hV,{yAxisId:"count",type:"monotone",dataKey:"appointments",stroke:"#f59e0b",strokeWidth:2,name:"Appointments"})]})})})]})}),Ae.jsxs(Ef,{value:"appointments",className:"space-y-6",children:[Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:"Appointment Trends"}),Ae.jsx(ad,{children:"Daily appointment volumes over time"})]}),Ae.jsx(sd,{children:w?Ae.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),Ae.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading appointment trends..."})]})}):C.length>0?Ae.jsx(GO,{width:"100%",height:300,children:Ae.jsxs(GW,{data:C,children:[Ae.jsx(GU,{strokeDasharray:"3 3"}),Ae.jsx(BV,{dataKey:"date",tick:{fontSize:12},interval:"preserveStartEnd"}),Ae.jsx(XV,{}),Ae.jsx(jO,{labelFormatter:(e,t)=>{var r;const n=null==(r=null==t?void 0:t[0])?void 0:r.payload;return n?new Date(n.fullDate).toLocaleDateString():e},formatter:(e,t)=>[e,"total"===t?"Total":"completed"===t?"Completed":"cancelled"===t?"Cancelled":t]}),Ae.jsx(Uz,{dataKey:"total",fill:"#3b82f6",name:"total"}),Ae.jsx(Uz,{dataKey:"completed",fill:"#10b981",name:"completed"}),Ae.jsx(Uz,{dataKey:"cancelled",fill:"#ef4444",name:"cancelled"})]})}):Ae.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ae.jsx("div",{className:"text-center",children:Ae.jsx("p",{className:"text-muted-foreground",children:"No appointment data available"})})})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:"Appointments by Type"}),Ae.jsx(ad,{children:"Distribution of appointment types"})]}),Ae.jsx(sd,{children:w?Ae.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),Ae.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading appointment types..."})]})}):O.length>0?Ae.jsx(GO,{width:"100%",height:300,children:Ae.jsxs(XW,{children:[Ae.jsx(kq,{data:O,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:e=>{const{name:t,value:r}=e,n=O.reduce((e,t)=>e+t.value,0);return`${t??""}: ${n>0?Math.round(r/n*100):0}%`},children:O.map((e,t)=>Ae.jsx(XO,{fill:e.color},`cell-${t}`))}),Ae.jsx(jO,{formatter:(e,t)=>[e,t]})]})}):Ae.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ae.jsx("div",{className:"text-center",children:Ae.jsx("p",{className:"text-muted-foreground",children:"No appointment type data available"})})})})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:"Appointment Metrics"}),Ae.jsx(ad,{children:"Key performance indicators"})]}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"text-3xl font-bold text-green-600",children:"94%"}),Ae.jsx("div",{className:"text-sm text-muted-foreground",children:"Show-up Rate"})]}),Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"18min"}),Ae.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Wait Time"})]}),Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"text-3xl font-bold text-purple-600",children:"85%"}),Ae.jsx("div",{className:"text-sm text-muted-foreground",children:"On-time Rate"})]}),Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"text-3xl font-bold text-orange-600",children:"42min"}),Ae.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Duration"})]})]})})]})]}),Ae.jsxs(Ef,{value:"feedback",className:"space-y-6",children:[k&&Ae.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[Ae.jsx("h3",{className:"text-red-800 font-semibold",children:"Error Loading Feedback Data"}),Ae.jsx("p",{className:"text-red-600 text-sm mt-1",children:k instanceof Error?k.message:"Unknown error occurred"}),Ae.jsx(Hc,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>_(),children:"Retry"})]}),S&&Ae.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ae.jsx("p",{className:"text-blue-600",children:"Loading feedback data..."})}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Overall Rating"}),Ae.jsx(ea,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:(null==(i=null==N?void 0:N.overall_stats)?void 0:i.avg_rating)?N.overall_stats.avg_rating.toFixed(1):"0.0"}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"out of 5.0 stars"})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Total Feedback"}),Ae.jsx(Fn,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:(null==(o=null==N?void 0:N.overall_stats)?void 0:o.total_feedback)||0}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"customer reviews"})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Unique Customers"}),Ae.jsx(da,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:(null==(l=null==N?void 0:N.overall_stats)?void 0:l.unique_customers)||0}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"provided feedback"})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Response Rate"}),Ae.jsx(Xr,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsxs("div",{className:"text-2xl font-bold",children:[(null==(c=null==N?void 0:N.overall_stats)?void 0:c.total_feedback)&&(null==(d=null==N?void 0:N.overall_stats)?void 0:d.unique_customers)?Math.round(N.overall_stats.total_feedback/N.overall_stats.unique_customers*100):0,"%"]}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"feedback per customer"})]})]})]}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:"Rating Distribution"}),Ae.jsx(ad,{children:"Breakdown of customer ratings"})]}),Ae.jsx(sd,{children:S?Ae.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),Ae.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading rating distribution..."})]})}):(null==N?void 0:N.rating_distribution)&&N.rating_distribution.length>0?Ae.jsx("div",{className:"space-y-3",children:N.rating_distribution.map(e=>{const t=N.rating_distribution.reduce((e,t)=>e+t.count,0),r=t>0?Math.round(e.count/t*100):0;return Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsxs("span",{className:"text-sm font-medium",children:[e.rating," Star",1!==e.rating?"s":""]}),Ae.jsx("div",{className:"flex",children:[...Array(5)].map((t,r)=>Ae.jsx(ea,{className:"h-4 w-4 "+(r<e.rating?"text-yellow-400 fill-current":"text-gray-300")},r))})]}),Ae.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.count," (",r,"%)"]})]}),Ae.jsx(jp,{value:r,className:"h-2"})]},e.rating)})}):Ae.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ae.jsx("div",{className:"text-center",children:Ae.jsx("p",{className:"text-muted-foreground",children:"No rating data available"})})})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:"Branch Ratings"}),Ae.jsx(ad,{children:"Average ratings by branch"})]}),Ae.jsx(sd,{children:S?Ae.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),Ae.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading branch ratings..."})]})}):(null==N?void 0:N.branch_ratings)&&N.branch_ratings.length>0?Ae.jsx("div",{className:"space-y-4",children:N.branch_ratings.map(e=>Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsx("span",{className:"text-sm font-medium",children:e.branch_name}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx("span",{className:"text-sm font-bold",children:e.avg_rating.toFixed(1)}),Ae.jsx("div",{className:"flex",children:[...Array(5)].map((t,r)=>Ae.jsx(ea,{className:"h-4 w-4 "+(r<Math.floor(e.avg_rating)?"text-yellow-400 fill-current":r<e.avg_rating?"text-yellow-400 fill-current opacity-50":"text-gray-300")},r))})]})]}),Ae.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[Ae.jsxs("span",{children:[e.feedback_count," reviews"]}),Ae.jsx(jp,{value:e.avg_rating/5*100,className:"w-20 h-1"})]})]},e.branch_id))}):Ae.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ae.jsx("div",{className:"text-center",children:Ae.jsx("p",{className:"text-muted-foreground",children:"No branch rating data available"})})})})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:"Feedback Trends"}),Ae.jsx(ad,{children:"Rating trends over time"})]}),Ae.jsx(sd,{children:S?Ae.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),Ae.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading feedback trends..."})]})}):(null==N?void 0:N.trend_data)&&N.trend_data.length>0?Ae.jsx(GO,{width:"100%",height:300,children:Ae.jsxs(QW,{data:N.trend_data,children:[Ae.jsx(GU,{strokeDasharray:"3 3"}),Ae.jsx(BV,{dataKey:"month",tick:{fontSize:12},tickFormatter:e=>new Date(e+"-01").toLocaleDateString("en-US",{month:"short",year:"2-digit"})}),Ae.jsx(XV,{domain:[0,5]}),Ae.jsx(jO,{formatter:(e,t)=>["avg_rating"===t?Number(e).toFixed(2):e,"avg_rating"===t?"Average Rating":"Feedback Count"],labelFormatter:e=>new Date(e+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),Ae.jsx(CV,{type:"monotone",dataKey:"avg_rating",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.3,name:"avg_rating"})]})}):Ae.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ae.jsx("div",{className:"text-center",children:Ae.jsx("p",{className:"text-muted-foreground",children:"No trend data available"})})})})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{children:[Ae.jsx(nd,{children:"Latest Feedback"}),Ae.jsx(ad,{children:"Recent customer reviews and comments"})]}),Ae.jsxs(Hc,{onClick:()=>_(),variant:"outline",size:"sm",children:[Ae.jsx(Vn,{className:"h-4 w-4 mr-2 "+(S?"animate-spin":"")}),"Refresh"]})]})}),Ae.jsx(sd,{children:S?Ae.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ae.jsx(Vn,{className:"h-6 w-6 animate-spin mr-2"}),Ae.jsx("span",{children:"Loading latest feedback..."})]}):(null==N?void 0:N.latest_feedback)&&N.latest_feedback.length>0?Ae.jsx("div",{className:"space-y-4",children:N.latest_feedback.map(e=>Ae.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx("span",{className:"font-medium",children:e.customer_name}),Ae.jsx(Yd,{variant:"outline",className:"text-xs",children:e.branch_name})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx("div",{className:"flex",children:[...Array(5)].map((t,r)=>Ae.jsx(ea,{className:"h-4 w-4 "+(r<e.rating?"text-yellow-400 fill-current":"text-gray-300")},r))}),Ae.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]})]}),e.comment&&Ae.jsxs("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded",children:['"',e.comment,'"']}),e.appointment_date&&Ae.jsxs("p",{className:"text-xs text-muted-foreground",children:["Appointment: ",new Date(e.appointment_date).toLocaleDateString()]})]},e.id))}):Ae.jsxs("div",{className:"text-center py-8 text-gray-500",children:[Ae.jsx("p",{children:"No feedback data available."}),Ae.jsx(Hc,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>_(),children:"Retry"})]})})]})]})]})]})},ZW="/assets/everbright-bg-7fc38de9.png",eH=()=>{const e=[{title:"Customers",description:"Book appointments, view vision history, and manage prescriptions",icon:wn,color:"customer",path:"/login",features:["Book Appointments","Vision History","Digital Prescriptions","Receipt Downloads"]},{title:"Optometrists",description:"Manage patient care, prescriptions, and daily appointments",icon:da,color:"optometrist",path:"/login",features:["Patient Records","Prescription Management","Daily Schedule","Medical History"]},{title:"Clinic Staff",description:"Handle inventory, appointments, and patient communications",icon:ln,color:"staff",path:"/login",features:["Inventory Management","Appointment Scheduling","Patient Notifications","Sales Tracking"]},{title:"Administrators",description:"Comprehensive system management and analytics overview",icon:nn,color:"admin",path:"/login",features:["Multi-branch Analytics","User Management","System Configuration","Performance Reports"]}];return Ae.jsxs("div",{className:"min-h-screen relative",style:{backgroundImage:`url(${ZW})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[Ae.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm"}),Ae.jsxs("div",{className:"relative z-10",children:[Ae.jsx("header",{className:"bg-white shadow-sm border-b",children:Ae.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(wn,{className:"h-8 w-8 text-primary"}),Ae.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Everbright Optical Clinic"})]}),Ae.jsxs("div",{className:"flex space-x-4",children:[Ae.jsx(Hc,{variant:"outline",asChild:!0,children:Ae.jsxs(It,{to:"/faq",children:[Ae.jsx(Cn,{className:"h-4 w-4 mr-2"}),"FAQ"]})}),Ae.jsx(Hc,{variant:"outline",asChild:!0,children:Ae.jsx(It,{to:"/register",children:"Sign Up"})}),Ae.jsx(Hc,{asChild:!0,children:Ae.jsx(It,{to:"/login",children:"Sign In"})})]})]})}),Ae.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center",children:[Ae.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-slate-900 mb-6",children:["Everbright Optical Clinic",Ae.jsx("span",{className:"block text-primary",children:"Management System"})]}),Ae.jsx("p",{className:"text-xl text-slate-600 mb-8 max-w-3xl mx-auto"}),Ae.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[Ae.jsx(Hc,{size:"lg",asChild:!0,children:Ae.jsxs(It,{to:"/register",children:["Get Started",Ae.jsx(en,{className:"ml-2 h-5 w-5"})]})}),Ae.jsx(Hc,{size:"lg",variant:"outline",asChild:!0,children:Ae.jsx(It,{to:"/login",children:"Sign In to Existing Account"})})]})]}),Ae.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[Ae.jsxs("div",{className:"text-center mb-16",children:[Ae.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Designed for Every Role"}),Ae.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Our platform provides specialized dashboards and features tailored to each user type in your optical clinic."})]}),Ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((e,t)=>Ae.jsxs(td,{className:"shadow-lg border-0 hover:shadow-xl transition-all duration-300 group",children:[Ae.jsxs(rd,{className:"text-center",children:[Ae.jsx("div",{className:"mx-auto w-16 h-16 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 "+("customer"===e.color?"bg-customer":"optometrist"===e.color?"bg-optometrist":"staff"===e.color?"bg-staff":"bg-admin"),children:Ae.jsx(e.icon,{className:"h-8 w-8 text-white"})}),Ae.jsx(nd,{className:"text-xl font-bold",children:e.title}),Ae.jsx(ad,{className:"text-sm",children:e.description})]}),Ae.jsxs(sd,{children:[Ae.jsx("ul",{className:"space-y-2 mb-6",children:e.features.map((e,t)=>Ae.jsxs("li",{className:"flex items-center text-sm text-slate-600",children:[Ae.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full mr-3"}),e]},t))}),Ae.jsx(Hc,{className:"w-full",variant:e.color,asChild:!0,children:Ae.jsx(It,{to:e.path,children:"Access Dashboard"})})]})]},t))})]}),Ae.jsx("section",{className:"bg-white py-20",children:Ae.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ae.jsxs("div",{className:"text-center mb-16",children:[Ae.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Everything You Need"}),Ae.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Comprehensive features to manage every aspect of your optical clinic operations."})]}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:Ae.jsx(ln,{className:"h-8 w-8 text-blue-600"})}),Ae.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Smart Scheduling"}),Ae.jsx("p",{className:"text-slate-600",children:"Efficient appointment management with automated reminders and notifications."})]}),Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:Ae.jsx(da,{className:"h-8 w-8 text-green-600"})}),Ae.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Patient Management"}),Ae.jsx("p",{className:"text-slate-600",children:"Complete patient records, medical history, and prescription tracking."})]}),Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:Ae.jsx(nn,{className:"h-8 w-8 text-purple-600"})}),Ae.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Analytics & Reports"}),Ae.jsx("p",{className:"text-slate-600",children:"Comprehensive insights into clinic performance and business metrics."})]})]})]})}),Ae.jsx("footer",{className:"bg-slate-900 text-white py-12",children:Ae.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[Ae.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[Ae.jsx(wn,{className:"h-6 w-6"}),Ae.jsx("span",{className:"text-xl font-bold",children:"Optical Clinic Management"})]}),Ae.jsx("p",{className:"text-slate-400",children:"Streamlining optical clinic operations with modern technology."})]})})]})]})},tH=()=>{const e=Rt();return Ct.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),Ae.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),Ae.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),Ae.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},rH=Cc.create({baseURL:"http://192.168.100.6:8000/api",headers:{"Content-Type":"application/json",Accept:"application/json"}});rH.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const nH=e=>rH.get("/appointments/availability",{params:{date:e}}),aH=()=>rH.get("/appointments/weekly-schedule"),sH=({doctorId:e,doctorName:t,children:r})=>{const[n,a]=Ct.useState(!1),[s,i]=Ct.useState(null),[o,l]=Ct.useState(!1),{toast:c}=Jt(),d=e=>"Not Available"===e.branch?Ae.jsx(Yd,{variant:"secondary",children:"Not Available"}):Ae.jsx(Yd,{variant:"default",children:"Available"}),u=e=>"Not Available"===e.branch?"text-muted-foreground":"text-green-600 font-medium";return Ae.jsxs(Vp,{open:n,onOpenChange:t=>{a(t),t&&!s&&(async()=>{l(!0);try{const t=await Jm(e);i(t)}catch(t){console.error("Error fetching schedule:",t),c({title:"Error",description:"Failed to fetch doctor schedule. Please try again.",variant:"destructive"})}finally{l(!1)}})()},children:[Ae.jsx(Wp,{asChild:!0,children:r}),Ae.jsxs(Yp,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[Ae.jsxs(Gp,{children:[Ae.jsxs(Qp,{className:"flex items-center gap-2",children:[Ae.jsx(ln,{className:"h-5 w-5"}),t,"'s Weekly Schedule"]}),Ae.jsx(Jp,{children:"View the optometrist's 6-day rotation schedule across all branches"})]}),Ae.jsx("div",{className:"space-y-4",children:o?Ae.jsx("div",{className:"space-y-3",children:[...Array(6)].map((e,t)=>Ae.jsxs("div",{className:"flex items-center space-x-4",children:[Ae.jsx(uh,{className:"h-4 w-20"}),Ae.jsx(uh,{className:"h-4 w-24"}),Ae.jsx(uh,{className:"h-4 w-32"}),Ae.jsx(uh,{className:"h-6 w-20"})]},t))}):s?Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(td,{children:Ae.jsxs(rd,{className:"pb-3",children:[Ae.jsxs(nd,{className:"text-lg flex items-center gap-2",children:[Ae.jsx(ca,{className:"h-5 w-5"}),s.doctor.name]}),Ae.jsx(ad,{children:s.doctor.email})]})}),Ae.jsx("div",{className:"border rounded-lg",children:Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{className:"w-[120px]",children:"Day"}),Ae.jsx(Gm,{className:"w-[150px]",children:"Branch"}),Ae.jsx(Gm,{className:"w-[200px]",children:"Time"}),Ae.jsx(Gm,{className:"w-[120px]",children:"Status"})]})}),Ae.jsx(Km,{children:s.schedule.map((e,t)=>Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{className:"font-medium",children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(ln,{className:"h-4 w-4 text-muted-foreground"}),e.day]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(In,{className:"h-4 w-4 text-muted-foreground"}),e.branch]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(yn,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{className:u(e),children:e.time})]})}),Ae.jsx(Xm,{children:d(e)})]},t))})]})}),Ae.jsx(td,{children:Ae.jsx(sd,{className:"pt-4",children:Ae.jsxs("div",{className:"text-sm text-muted-foreground",children:[Ae.jsxs("p",{className:"mb-2",children:[Ae.jsx("strong",{children:"Schedule Summary:"})," ",s.doctor.name," works a 6-day rotation across multiple branches, providing comprehensive eye care services."]}),Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Note:"})," Saturday hours are typically shorter. Please book your appointment accordingly."]})]})})})]}):Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx(ln,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ae.jsx("p",{className:"text-muted-foreground",children:"No schedule data available"})]})}),Ae.jsx("div",{className:"flex justify-end gap-2 pt-4",children:Ae.jsx(Hc,{variant:"outline",onClick:()=>a(!1),children:"Close"})})]})]})},iH=({doctorId:e,doctorName:t})=>{const[r,n]=Ct.useState(null),[a,s]=Ct.useState(!1),[i,o]=Ct.useState(!1),{toast:l}=Jt();Ct.useEffect(()=>{(async()=>{s(!0);try{const t=await Jm(e);n(t)}catch(t){console.error("Error fetching schedule:",t),l({title:"Error",description:"Failed to fetch doctor schedule",variant:"destructive"})}finally{s(!1)}})()},[e]);const c=e=>"Not Available"===e.branch?"text-muted-foreground":"text-green-600",d=e=>"Not Available"===e.branch?Ae.jsx(Yd,{variant:"secondary",className:"text-xs",children:"Not Available"}):Ae.jsx(Yd,{variant:"default",className:"text-xs",children:"Available"}),u=(()=>{if(!r)return null;const e=new Date,t=0===e.getDay()?7:e.getDay();return r.schedule.find(e=>e.day_of_week===t)})();return a?Ae.jsxs(td,{className:"h-fit",children:[Ae.jsx(rd,{className:"pb-3",children:Ae.jsxs(nd,{className:"text-sm flex items-center gap-2",children:[Ae.jsx(ln,{className:"h-4 w-4"}),"Doctor's Schedule"]})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),Ae.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})]})})]}):Ae.jsxs(td,{className:"h-fit",children:[Ae.jsxs(rd,{className:"pb-3",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs(nd,{className:"text-sm flex items-center gap-2",children:[Ae.jsx(ln,{className:"h-4 w-4"}),t,"'s Schedule"]}),Ae.jsx(Hc,{variant:"ghost",size:"sm",onClick:()=>o(!i),className:"h-6 w-6 p-0",children:i?Ae.jsx(fn,{className:"h-3 w-3"}):Ae.jsx(mn,{className:"h-3 w-3"})})]}),Ae.jsx(ad,{className:"text-xs",children:"Weekly rotation across branches"})]}),Ae.jsxs(sd,{className:"pt-0",children:[u&&Ae.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[Ae.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ae.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Today"}),d(u)]}),Ae.jsxs("div",{className:"space-y-1",children:[Ae.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ae.jsx(In,{className:"h-3 w-3 text-blue-600"}),Ae.jsx("span",{className:c(u),children:u.branch})]}),Ae.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ae.jsx(yn,{className:"h-3 w-3 text-blue-600"}),Ae.jsx("span",{className:c(u),children:u.time})]})]})]}),i&&r&&Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Weekly Schedule"}),r.schedule.map((e,t)=>Ae.jsxs("div",{className:"flex items-center justify-between py-1.5 px-2 rounded hover:bg-gray-50",children:[Ae.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[Ae.jsx("div",{className:"text-xs font-medium w-16 text-muted-foreground",children:e.day.slice(0,3)}),Ae.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[Ae.jsx(In,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),Ae.jsx("span",{className:"text-xs truncate",children:e.branch})]})]}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx("span",{className:"text-xs text-muted-foreground",children:e.time}),d(e)]})]},t))]}),!i&&Ae.jsx("div",{className:"text-xs text-muted-foreground text-center py-2",children:"Click to view full schedule"})]})]})},oH=()=>{var e,t,r;const n=Dt(),{toast:a}=Jt(),{user:s}=Rc(),[i,o]=Ct.useState(!1),[l,c]=Ct.useState({date:"",time:"",appointmentType:"",notes:""}),[d,u]=Ct.useState(null),[h,m]=Ct.useState(null),{create:p,loading:f}=oh(),{appointments:x,loading:y,refetch:v}=ih(),{data:g}=ho({queryKey:["optometrists"],queryFn:Zm}),{data:b,isLoading:j,error:w}=ho({queryKey:["availability",l.date],queryFn:()=>nH(l.date),enabled:!!l.date});Ct.useEffect(()=>{(null==b?void 0:b.data)&&(u(b.data),c(e=>({...e,optometrist:b.data.optometrist,branch:b.data.branch})))},[b]),Ct.useEffect(()=>{if((null==g?void 0:g.optometrists)&&g.optometrists.length>0){const e=g.optometrists[0];m({id:e.id,name:e.name})}},[g]);const N=(e,t)=>{const{hours:r,minutes:n}=(e=>{const[t,r]=e.split(" ");let[n,a]=t.split(":").map(Number);return"PM"===r&&12!==n?n+=12:"AM"===r&&12===n&&(n=0),{hours:n,minutes:a}})(e);let a=30;switch(t){case"eye_exam":a=60;break;case"contact_fitting":a=45;break;default:a=30}const s=n+a,i=s%60;return`${(r+Math.floor(s/60)).toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},S=(e,t)=>{c(r=>({...r,[e]:t}))};return Ae.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ae.jsx("div",{className:"bg-white border-b",children:Ae.jsx("div",{className:"max-w-6xl mx-auto px-6 py-4",children:Ae.jsxs("div",{className:"flex items-center gap-4",children:[Ae.jsxs(Hc,{variant:"ghost",size:"sm",onClick:()=>n("/customer/appointments"),className:"flex items-center gap-2",children:[Ae.jsx(Zr,{className:"h-4 w-4"}),"Back to Appointments"]}),Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Book New Appointment"}),Ae.jsx("p",{className:"text-gray-600",children:"Schedule your eye examination or consultation"})]})]})})}),Ae.jsx("div",{className:"max-w-6xl mx-auto p-6",children:Ae.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Ae.jsx("div",{className:"lg:col-span-2",children:Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-6 w-6 text-customer"}),Ae.jsx(nd,{children:"Book New Appointment"})]}),h&&Ae.jsx(sH,{doctorId:h.id,doctorName:h.name,children:Ae.jsxs(Hc,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[Ae.jsx(wn,{className:"h-4 w-4"}),"View Doctor's Schedule"]})})]}),Ae.jsx(ad,{children:"Schedule your next eye examination or consultation"})]}),Ae.jsx(sd,{children:Ae.jsxs("form",{onSubmit:async e=>{var t,r,i,h,m;if(e.preventDefault(),o(!0),!s||!d)return a({title:"Booking Failed",description:"User or availability data is missing.",variant:"destructive"}),void o(!1);try{if(!d.optometrist_id||!d.branch_id)throw new Error("Optometrist or branch information is missing from availability data");const e=e=>{const[t,r]=e.split(" ");let[n,a]=t.split(":").map(Number);return"PM"===r&&12!==n?n+=12:"AM"===r&&12===n&&(n=0),`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},t={patient_id:"string"==typeof s.id?parseInt(s.id):s.id,optometrist_id:"string"==typeof d.optometrist_id?parseInt(d.optometrist_id):d.optometrist_id,branch_id:"string"==typeof d.branch_id?parseInt(d.branch_id):d.branch_id,appointment_date:l.date,start_time:e(l.time),end_time:N(l.time,l.appointmentType),type:l.appointmentType,notes:l.notes||void 0};console.log("Debug - Form time (12h):",l.time),console.log("Debug - Start time (24h):",e(l.time)),console.log("Debug - End time (24h):",N(l.time,l.appointmentType)),console.log("Debug - Full appointment data:",t),await p(t),a({title:"Appointment Booked Successfully",description:`Your appointment with ${d.optometrist||"the optometrist"} at ${d.branch||"the branch"} has been scheduled for ${l.date} at ${l.time}.`}),c({date:"",time:"",appointmentType:"",notes:""}),u(null),v(),n("/customer/appointments")}catch(f){console.error("Error booking appointment:",f),console.error("Error response:",null==(t=f.response)?void 0:t.data);let e="There was an error booking your appointment. Please try again.";if(null==(i=null==(r=f.response)?void 0:r.data)?void 0:i.errors){const t=f.response.data.errors;e=`Validation errors: ${Object.values(t).flat().join(", ")}`}else(null==(m=null==(h=f.response)?void 0:h.data)?void 0:m.message)&&(e=f.response.data.message);a({title:"Booking Failed",description:e,variant:"destructive"})}finally{o(!1)}},className:"space-y-6",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"date",children:"Appointment Date"}),Ae.jsx(Yc,{id:"date",type:"date",value:l.date,onChange:e=>S("date",e.target.value),required:!0,className:"w-full"})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"time",children:"Preferred Time"}),Ae.jsxs(Tm,{value:l.time,onValueChange:e=>S("time",e),disabled:!(null==(e=null==d?void 0:d.available_times)?void 0:e.length),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:(null==(t=null==d?void 0:d.available_times)?void 0:t.length)?"Select time":"Select a date first"})}),Ae.jsx(Fm,{children:null==(r=null==d?void 0:d.available_times)?void 0:r.filter(e=>e&&""!==String(e).trim()).map(e=>Ae.jsx(Lm,{value:e,children:e},e))})]}),w&&Ae.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600",children:[Ae.jsx(Qr,{className:"h-4 w-4"}),Ae.jsx("span",{children:"No available times for this date"})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"branch",children:"Branch"}),Ae.jsx(Yc,{id:"branch",value:l.branch||"",placeholder:"Select a date to see assigned branch",disabled:!0,className:"bg-gray-50"})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"optometrist",children:"Optometrist"}),Ae.jsx(Yc,{id:"optometrist",value:l.optometrist||"",placeholder:"Select a date to see assigned optometrist",disabled:!0,className:"bg-gray-50"})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"appointmentType",children:"Service Type"}),Ae.jsxs(Tm,{value:l.appointmentType,onValueChange:e=>S("appointmentType",e),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select service type"})}),Ae.jsx(Fm,{children:[{value:"consultation",label:"General Consultation"},{value:"eye_exam",label:"Comprehensive Eye Exam"},{value:"contact_fitting",label:"Contact Lens Fitting"},{value:"follow_up",label:"Follow-up Visit"},{value:"emergency",label:"Emergency Visit"}].map(e=>Ae.jsx(Lm,{value:e.value,children:e.label},e.value))})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"notes",children:"Additional Notes (Optional)"}),Ae.jsx(ph,{id:"notes",value:l.notes,onChange:e=>S("notes",e.target.value),placeholder:"Any special requirements or symptoms you'd like to discuss...",rows:3})]}),Ae.jsx(Hc,{type:"submit",className:"w-full",variant:"customer",disabled:f||i,children:f||i?Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(Tn,{className:"mr-2 h-4 w-4 animate-spin"}),"Booking..."]}):"Book Appointment"})]})})]})}),Ae.jsx("div",{className:"lg:col-span-1",children:Ae.jsxs("div",{className:"sticky top-6 space-y-4",children:[h&&Ae.jsx(iH,{doctorId:h.id,doctorName:h.name}),Ae.jsxs(td,{children:[Ae.jsx(rd,{className:"pb-3",children:Ae.jsx(nd,{className:"text-sm",children:"Quick Actions"})}),Ae.jsxs(sd,{className:"space-y-2",children:[Ae.jsxs(Hc,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[Ae.jsx(ln,{className:"h-4 w-4 mr-2"}),"Book New Appointment"]}),Ae.jsxs(Hc,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>n("/customer/appointments"),children:[Ae.jsx(yn,{className:"h-4 w-4 mr-2"}),"View My Appointments"]})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{className:"pb-3",children:Ae.jsx(nd,{className:"text-sm",children:"Need Help?"})}),Ae.jsxs(sd,{children:[Ae.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Select a date to see which branch and doctor will be available for your appointment."}),Ae.jsxs("div",{className:"space-y-2 text-xs",children:[Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Ae.jsx("span",{children:"Available"})]}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),Ae.jsx("span",{children:"Not Available"})]})]})]})]})]})})]})})]})},lH=()=>{const[e,t]=Ct.useState([]),r=[{title:"👓 Booking Appointments",items:[{id:"how-to-book",question:"How can I book an appointment?",answer:'Go to your customer dashboard → "Book Appointment." Select your preferred date, and the system will automatically show where the optometrist is available based on their branch schedule.'},{id:"choose-branch",question:"Can I choose my preferred branch?",answer:"You can select a date, and the system will show which branch the optometrist (Dr. Samuel Prieto) will be available on that day. The branch is auto-filled to avoid scheduling conflicts."},{id:"reschedule-cancel",question:"Can I reschedule or cancel my appointment?",answer:'Yes. Go to your "Appointments" tab → click "Manage" → choose "Reschedule" or "Cancel." You can only reschedule if the appointment has not yet been confirmed by the staff.'},{id:"appointment-confirmed",question:"How will I know if my appointment is confirmed?",answer:'Once a staff member from your selected branch confirms your booking, you will receive an in-app notification and the appointment status will change to "Confirmed."'},{id:"view-schedule",question:"Can I see the optometrist's schedule before booking?",answer:"Yes. Click \"View Doctor's Schedule\" to see Dr. Samuel's weekly rotation across the four branches. This helps you choose the right date for your preferred branch."}]},{title:"💳 Payments and Receipts",items:[{id:"pay-online",question:"Do I need to pay online?",answer:"No. All payments are made in person at the branch after your consultation or when you pick up your reserved eyewear."},{id:"get-receipt",question:"Can I get a receipt for my payment?",answer:"Yes. Once your payment is processed by the branch staff, a digital receipt will automatically appear in your dashboard. You can also download it as a PDF."},{id:"missing-receipt",question:"What if my payment receipt is missing?",answer:"Contact the branch where your appointment took place. The staff can regenerate and re-upload your receipt to your account."}]},{title:"🧾 Prescriptions and Eye Health",items:[{id:"view-prescription",question:"Where can I see my latest prescription?",answer:'Go to "Vision History" in your dashboard. It lists your past consultations, prescriptions, and progress. You can also download your prescription in PDF format.'},{id:"prescription-details",question:"What does my prescription show?",answer:"Your prescription includes your left and right eye measurements, diagnosis, and recommended lens type. It helps track your eye progress over time."},{id:"track-vision-changes",question:"Can I track changes in my vision?",answer:"Yes. The Vision History includes a simple progress chart that shows improvements or changes in both eyes based on your past prescriptions."}]},{title:"🕶️ Products and Eyewear Reservations",items:[{id:"reserve-eyewear",question:"Can I reserve eyewear before my check-up?",answer:"Yes. You can browse the product gallery of your selected branch and reserve frames or lenses. Your staff will assist you after your consultation."},{id:"branch-products",question:"Are the products the same in all branches?",answer:"No. Each branch has its own inventory. Make sure to check the product availability for your chosen branch before booking."},{id:"view-reservations",question:"Can I view my reserved eyewear?",answer:'Yes. Go to "My Reservations" in your dashboard to view all pending and completed reservations.'}]},{title:"🧠 Account and Support",items:[{id:"update-info",question:"Can I update my personal information?",answer:'Yes. Go to "Profile Settings" → edit your details. Make sure your email and contact number are updated for appointment notifications.'},{id:"forgot-password",question:"What if I forgot my password?",answer:'Click "Forgot Password" on the login page, and a password reset link will be sent to your email.'},{id:"contact-help",question:"Who can I contact for help?",answer:'You can message your assigned branch directly through the "Contact Branch" feature or visit the FAQ → Support section for quick answers.'}]},{title:"⚡ Feedback and Satisfaction",items:[{id:"give-feedback",question:"How can I give feedback about my visit?",answer:'After your appointment is completed, go to "Feedback" in your dashboard. Select your appointment and rate your experience.'},{id:"feedback-private",question:"Is my feedback visible to other patients?",answer:"No. Feedback is sent privately to the admin for analytics to improve clinic services per branch."},{id:"feedback-impact",question:"What happens after I submit feedback?",answer:"Your rating contributes to the branch's satisfaction analytics, helping the clinic improve patient care and service quality."}]}];return Ae.jsxs("div",{className:"min-h-screen relative",style:{backgroundImage:`url(${ZW})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[Ae.jsx("div",{className:"absolute inset-0 bg-white/90 backdrop-blur-sm"}),Ae.jsxs("div",{className:"relative z-10",children:[Ae.jsx("header",{className:"bg-white shadow-sm border-b",children:Ae.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(wn,{className:"h-8 w-8 text-primary"}),Ae.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Everbright Optical Clinic"})]}),Ae.jsxs("div",{className:"flex space-x-4",children:[Ae.jsx(Hc,{variant:"outline",asChild:!0,children:Ae.jsx(It,{to:"/register",children:"Sign Up"})}),Ae.jsx(Hc,{asChild:!0,children:Ae.jsx(It,{to:"/login",children:"Sign In"})})]})]})}),Ae.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[Ae.jsx("div",{className:"mb-8",children:Ae.jsx(Hc,{variant:"outline",asChild:!0,children:Ae.jsxs(It,{to:"/",children:[Ae.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})}),Ae.jsxs("div",{className:"text-center mb-12",children:[Ae.jsxs("div",{className:"flex items-center justify-center mb-4",children:[Ae.jsx(Cn,{className:"h-12 w-12 text-primary mr-4"}),Ae.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"Frequently Asked Questions"})]}),Ae.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Find answers to common questions about using the Optical Management System"})]}),Ae.jsx("div",{className:"space-y-8",children:r.map((r,n)=>Ae.jsxs(td,{className:"shadow-lg",children:[Ae.jsx(rd,{children:Ae.jsx(nd,{className:"text-2xl text-primary",children:r.title})}),Ae.jsx(sd,{className:"space-y-4",children:r.items.map(r=>Ae.jsxs(Wf,{open:e.includes(r.id),onOpenChange:()=>{return e=r.id,void t(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e},children:[Ae.jsx(Hf,{asChild:!0,children:Ae.jsxs(Hc,{variant:"ghost",className:"w-full justify-between p-4 h-auto text-left",children:[Ae.jsx("span",{className:"font-semibold text-slate-900",children:r.question}),e.includes(r.id)?Ae.jsx(fn,{className:"h-5 w-5 text-slate-500"}):Ae.jsx(mn,{className:"h-5 w-5 text-slate-500"})]})}),Ae.jsx(Kf,{className:"px-4 pb-4",children:Ae.jsx("div",{className:"text-slate-600 leading-relaxed",children:r.answer})})]},r.id))})]},n))}),Ae.jsxs(td,{className:"mt-12 shadow-lg",children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{className:"text-2xl text-center",children:"Still Need Help?"}),Ae.jsx(ad,{className:"text-center",children:"Can't find the answer you're looking for? Contact our friendly staff for assistance"})]}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[Ae.jsxs("div",{className:"flex flex-col items-center",children:[Ae.jsx(Dn,{className:"h-8 w-8 text-primary mb-2"}),Ae.jsx("h3",{className:"font-semibold mb-1",children:"Email Support"}),Ae.jsx("p",{className:"text-sm text-slate-600",children:"support@everbrightoptical.com"})]}),Ae.jsxs("div",{className:"flex flex-col items-center",children:[Ae.jsx(qn,{className:"h-8 w-8 text-primary mb-2"}),Ae.jsx("h3",{className:"font-semibold mb-1",children:"Phone Support"}),Ae.jsx("p",{className:"text-sm text-slate-600",children:"(555) 123-4567"})]}),Ae.jsxs("div",{className:"flex flex-col items-center",children:[Ae.jsx(In,{className:"h-8 w-8 text-primary mb-2"}),Ae.jsx("h3",{className:"font-semibold mb-1",children:"Visit Us"}),Ae.jsx("p",{className:"text-sm text-slate-600",children:"123 Main Street, City, State"})]})]})})]})]}),Ae.jsx("footer",{className:"bg-slate-900 text-white py-12 mt-12",children:Ae.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[Ae.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[Ae.jsx(wn,{className:"h-6 w-6"}),Ae.jsx("span",{className:"text-xl font-bold",children:"Everbright Optical Clinic"})]}),Ae.jsx("p",{className:"text-slate-400",children:"Streamlining optical clinic operations with modern technology."})]})})]})]})},cH=({onSuccess:e})=>{const{toast:t}=Jt(),{user:r}=Rc(),n=Dt(),[a,s]=Ct.useState(!1),[i,o]=Ct.useState({date:"",time:"",appointmentType:"",notes:""}),[l,c]=Ct.useState(null),[d,u]=Ct.useState(null),{create:h,loading:m}=oh(),{appointments:p,loading:f,refetch:x}=ih(),{data:y}=ho({queryKey:["optometrists"],queryFn:Zm}),{data:v,isLoading:g,error:b}=ho({queryKey:["availability",i.date],queryFn:()=>nH(i.date),enabled:!!i.date});Ct.useEffect(()=>{(null==v?void 0:v.data)&&(c(v.data),o(e=>({...e,optometrist:v.data.optometrist,branch:v.data.branch})))},[v]),Ct.useEffect(()=>{if((null==y?void 0:y.optometrists)&&y.optometrists.length>0){const e=y.optometrists[0];u({id:e.id,name:e.name})}},[y]);const j=[{value:"eye_exam",label:"Eye Exam"},{value:"contact_fitting",label:"Contact Lens Fitting"},{value:"consultation",label:"Consultation"},{value:"follow_up",label:"Follow-up"},{value:"emergency",label:"Emergency"}],w=(e,t)=>{const[r,n]=e.split(":").map(Number);let a=30;switch(t){case"eye_exam":a=60;break;case"contact_fitting":a=45;break;default:a=30}const s=n+a,i=s%60;return`${(r+Math.floor(s/60)).toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},N=(e,t)=>{o(r=>({...r,[e]:t}))};return Ae.jsx("div",{className:"max-w-6xl mx-auto p-6",children:Ae.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Ae.jsxs("div",{className:"lg:col-span-2",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-6 w-6 text-customer"}),Ae.jsx(nd,{children:"Book New Appointment"})]}),d&&Ae.jsx(sH,{doctorId:d.id,doctorName:d.name,children:Ae.jsxs(Hc,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[Ae.jsx(wn,{className:"h-4 w-4"}),"View Doctor's Schedule"]})})]}),Ae.jsx(ad,{children:"Schedule your next eye examination or consultation"})]}),Ae.jsx(sd,{children:Ae.jsxs("form",{onSubmit:async n=>{var a,d,u,m;if(n.preventDefault(),i.date&&i.time&&i.appointmentType&&l)if(r){s(!0);try{if(!l.optometrist_id||!l.branch_id)throw new Error("Optometrist or branch information is missing from availability data");const n={patient_id:"string"==typeof r.id?parseInt(r.id):r.id,optometrist_id:"string"==typeof l.optometrist_id?parseInt(l.optometrist_id):l.optometrist_id,branch_id:"string"==typeof l.branch_id?parseInt(l.branch_id):l.branch_id,appointment_date:i.date,start_time:i.time,end_time:w(i.time,i.appointmentType),type:i.appointmentType,notes:i.notes||void 0};console.log("Appointment data being sent:",n),console.log("User ID:",r.id,"Type:",typeof r.id),console.log("Optometrist ID:",l.optometrist_id,"Type:",typeof l.optometrist_id),console.log("Branch ID:",l.branch_id,"Type:",typeof l.branch_id),await h(n),t({title:"Appointment Booked Successfully",description:`Your appointment with ${l.optometrist||"the optometrist"} at ${l.branch||"the branch"} has been scheduled for ${i.date} at ${i.time}.`}),o({date:"",time:"",appointmentType:"",notes:""}),c(null),x(),e&&e()}catch(p){console.error("Error booking appointment:",p);let e="There was an error booking your appointment. Please try again.";if(null==(d=null==(a=p.response)?void 0:a.data)?void 0:d.errors){const t=p.response.data.errors;e=`Validation errors: ${Object.values(t).flat().join(", ")}`,console.error("Validation errors:",t)}else(null==(m=null==(u=p.response)?void 0:u.data)?void 0:m.message)&&(e=p.response.data.message);t({title:"Booking Failed",description:e,variant:"destructive"})}finally{s(!1)}}else t({title:"Authentication Required",description:"Please log in to book an appointment.",variant:"destructive"});else t({title:"Incomplete Form",description:"Please fill in all required fields and select a date with available times.",variant:"destructive"})},className:"space-y-6",children:[Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"date",children:"Appointment Date"}),Ae.jsx(Yc,{id:"date",type:"date",value:i.date,onChange:e=>N("date",e.target.value),min:(new Date).toISOString().split("T")[0],required:!0})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"time",children:"Preferred Time"}),Ae.jsxs(Tm,{value:i.time,onValueChange:e=>N("time",e),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:g?"Loading available times...":"Select time"})}),Ae.jsx(Fm,{children:g?Ae.jsx(Lm,{value:"loading",disabled:!0,children:Ae.jsxs("div",{className:"flex items-center",children:[Ae.jsx(Tn,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading available times..."]})}):(null==l?void 0:l.available_times)?l.available_times.filter(e=>e&&""!==String(e).trim()).map(e=>{const t=(e=>{const[t,r]=e.split(" "),[n,a]=t.split(":");let s=parseInt(n);return"PM"===r&&12!==s?s+=12:"AM"===r&&12===s&&(s=0),`${s.toString().padStart(2,"0")}:${a}`})(e);return Ae.jsx(Lm,{value:t,children:Ae.jsxs("div",{className:"flex items-center",children:[Ae.jsx(yn,{className:"mr-2 h-4 w-4"}),e]})},e)}):Ae.jsx(Lm,{value:"no-times",disabled:!0,children:"No available times for this date"})})]})]})]}),b&&Ae.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:Ae.jsxs("div",{className:"flex",children:[Ae.jsx(Qr,{className:"h-5 w-5 text-red-400"}),Ae.jsxs("div",{className:"ml-3",children:[Ae.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Availability"}),Ae.jsx("p",{className:"mt-1 text-sm text-red-700",children:b.message||"Failed to load available times for this date."})]})]})}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"branch",children:"Branch"}),Ae.jsx(Yc,{id:"branch",value:(null==l?void 0:l.branch)||"",disabled:!0,placeholder:"Select a date to see assigned branch"})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"optometrist",children:"Optometrist"}),Ae.jsx(Yc,{id:"optometrist",value:(null==l?void 0:l.optometrist)||"",disabled:!0,placeholder:"Select a date to see assigned optometrist"})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"appointmentType",children:"Service Type"}),Ae.jsxs(Tm,{value:i.appointmentType,onValueChange:e=>N("appointmentType",e),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select service type"})}),Ae.jsx(Fm,{children:j.map(e=>Ae.jsx(Lm,{value:e.value,children:e.label},e.value))})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"notes",children:"Additional Notes (Optional)"}),Ae.jsx(ph,{id:"notes",placeholder:"Any special requirements or symptoms you'd like to discuss...",value:i.notes,onChange:e=>N("notes",e.target.value),rows:3})]}),Ae.jsx(Hc,{type:"submit",className:"w-full",variant:"customer",disabled:m||a,children:m||a?Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(Tn,{className:"mr-2 h-4 w-4 animate-spin"}),"Booking..."]}):"Book Appointment"})]})})]}),Ae.jsxs(td,{className:"mt-6","data-section":"appointments",children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Your Upcoming Appointments"})}),Ae.jsx(sd,{children:f?Ae.jsxs("div",{className:"flex items-center justify-center p-8",children:[Ae.jsx(Tn,{className:"h-6 w-6 animate-spin mr-2"}),"Loading appointments..."]}):0===p.length?Ae.jsx("div",{className:"text-center p-8 text-muted-foreground",children:"No upcoming appointments found."}):Ae.jsx("div",{className:"space-y-4",children:p.map(e=>{var t,r;return Ae.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[Ae.jsxs("div",{className:"flex items-center space-x-4",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-4 w-4 text-customer"}),Ae.jsx("span",{className:"font-medium",children:e.appointment_date})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(yn,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{children:e.start_time})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ca,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{children:(null==(t=e.optometrist)?void 0:t.name)||"Unknown Optometrist"})]})]}),Ae.jsx("div",{className:"text-sm text-muted-foreground",children:(null==(r=j.find(t=>t.value===e.type))?void 0:r.label)||e.type})]},e.id)})})})]})]}),Ae.jsx("div",{className:"lg:col-span-1",children:Ae.jsxs("div",{className:"sticky top-6 space-y-4",children:[d&&Ae.jsx(iH,{doctorId:d.id,doctorName:d.name}),Ae.jsxs(td,{children:[Ae.jsx(rd,{className:"pb-3",children:Ae.jsx(nd,{className:"text-sm",children:"Quick Actions"})}),Ae.jsxs(sd,{className:"space-y-2",children:[Ae.jsxs(Hc,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>n("/customer/book-appointment"),children:[Ae.jsx(ln,{className:"h-4 w-4 mr-2"}),"Book New Appointment"]}),Ae.jsxs(Hc,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>{var e;return window.scrollTo({top:(null==(e=document.querySelector('[data-section="appointments"]'))?void 0:e.offsetTop)||0,behavior:"smooth"})},children:[Ae.jsx(yn,{className:"h-4 w-4 mr-2"}),"View My Appointments"]})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{className:"pb-3",children:Ae.jsx(nd,{className:"text-sm",children:"Need Help?"})}),Ae.jsxs(sd,{children:[Ae.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Select a date to see which branch and doctor will be available for your appointment."}),Ae.jsxs("div",{className:"space-y-2 text-xs",children:[Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Ae.jsx("span",{children:"Available"})]}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),Ae.jsx("span",{children:"Not Available"})]})]})]})]})]})})]})})},dH=({isOpen:e,onClose:t})=>{const[r,n]=Ct.useState(null),[a,s]=Ct.useState(!0),[i,o]=Ct.useState(null);return Ct.useEffect(()=>{if(e){(async()=>{try{s(!0);try{const e=await(async()=>(await Cc.get("http://192.168.100.6:8000/api/branch-contacts/my-branch",{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}})).data)();return void n(e.contact)}catch(e){console.log("API not available, using fallback contact info")}n({id:1,branch_id:1,branch_name:"Everbright Optical",phone_number:"+63 123 456 7890",formatted_phone:"+63 123 456 7890",email:"info@everbrightoptical.com",whatsapp_number:"+63 123 456 7890",formatted_whatsapp:"+63 123 456 7890",whatsapp_link:"https://wa.me/631234567890",address:"123 Main Street, Makati City",operating_hours:"Mon-Fri: 8AM-6PM, Sat: 9AM-4PM",social_media:{facebook:"https://facebook.com/everbrightoptical",instagram:"https://instagram.com/everbrightoptical"},is_active:!0})}catch(t){o(t instanceof Error?t.message:"Failed to load contact information"),console.error("Error fetching contact:",t)}finally{s(!1)}})()}},[e]),Ae.jsx(Vp,{open:e,onOpenChange:t,children:Ae.jsxs(Yp,{className:"max-w-md mx-auto",children:[Ae.jsxs(Gp,{children:[Ae.jsxs(Qp,{className:"flex items-center gap-2",children:[Ae.jsx(sn,{className:"h-5 w-5 text-blue-600"}),"Contact Information"]}),Ae.jsx(Jp,{children:"Get in touch with our clinic"})]}),a?Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsx(uh,{className:"h-16 w-full"}),Ae.jsx(uh,{className:"h-16 w-full"}),Ae.jsx(uh,{className:"h-16 w-full"})]}):i||!r?Ae.jsxs("div",{className:"flex items-center gap-2 text-red-600 p-4",children:[Ae.jsx(Qr,{className:"h-4 w-4"}),Ae.jsx("p",{className:"text-sm",children:i||"Contact information not available"})]}):Ae.jsxs("div",{className:"space-y-4",children:[r.phone_number&&Ae.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[Ae.jsx(qn,{className:"h-4 w-4 text-blue-600"}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Phone"}),Ae.jsx("p",{className:"text-sm text-blue-700",children:r.formatted_phone})]})]}),r.email&&Ae.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[Ae.jsx(Dn,{className:"h-4 w-4 text-green-600"}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-green-900",children:"Email"}),Ae.jsx("p",{className:"text-sm text-green-700",children:r.email})]})]}),r.whatsapp_number&&Ae.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[Ae.jsx(Rn,{className:"h-4 w-4 text-green-600"}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-green-900",children:"WhatsApp"}),Ae.jsx("p",{className:"text-sm text-green-700",children:r.formatted_whatsapp})]})]}),r.address&&Ae.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[Ae.jsx(In,{className:"h-4 w-4 text-gray-600 mt-0.5"}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Address"}),Ae.jsx("p",{className:"text-sm text-gray-700",children:r.address})]})]}),r.operating_hours&&Ae.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[Ae.jsx(yn,{className:"h-4 w-4 text-gray-600 mt-0.5"}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Operating Hours"}),Ae.jsx("p",{className:"text-sm text-gray-700",children:r.operating_hours})]})]}),Object.keys(r.social_media).length>0&&Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Follow Us"}),Ae.jsxs("div",{className:"flex gap-2",children:[r.social_media.facebook&&Ae.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded-lg",children:[Ae.jsx(Nn,{className:"h-4 w-4 text-blue-600"}),Ae.jsx("span",{className:"text-sm text-blue-700",children:"Facebook"})]}),r.social_media.instagram&&Ae.jsxs("div",{className:"flex items-center gap-2 p-2 bg-pink-50 rounded-lg",children:[Ae.jsx(An,{className:"h-4 w-4 text-pink-600"}),Ae.jsx("span",{className:"text-sm text-pink-700",children:"Instagram"})]}),r.social_media.twitter&&Ae.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded-lg",children:[Ae.jsx(sa,{className:"h-4 w-4 text-blue-400"}),Ae.jsx("span",{className:"text-sm text-blue-600",children:"Twitter"})]}),r.social_media.linkedin&&Ae.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded-lg",children:[Ae.jsx(En,{className:"h-4 w-4 text-blue-700"}),Ae.jsx("span",{className:"text-sm text-blue-700",children:"LinkedIn"})]})]})]})]})]})})},uH=()=>{var e;const[t,r]=Ct.useState(null),[n,a]=Ct.useState(!1),[s,i]=Ct.useState(!1),{user:o}=Rc(),l=Dt(),{appointments:c,loading:d,error:u,refetch:h}=ih(),{update:m,loading:p}=lh();ch(),console.log("CustomerAppointments - Auth state:",{user:o,hasToken:!!sessionStorage.getItem("auth_token"),token:(null==(e=sessionStorage.getItem("auth_token"))?void 0:e.substring(0,10))+"..."});const f=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-green-100 text-green-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"no_show":return"bg-orange-100 text-orange-800"}};return Ae.jsxs("div",{className:"p-6 space-y-6",children:[Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Appointments"}),Ae.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage your upcoming and past appointments"})]}),u&&Ae.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:Ae.jsxs("div",{className:"flex",children:[Ae.jsx(Qr,{className:"h-5 w-5 text-red-400"}),Ae.jsxs("div",{className:"ml-3",children:[Ae.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading appointments"}),Ae.jsx("p",{className:"mt-1 text-sm text-red-700",children:u}),Ae.jsx("div",{className:"mt-3",children:Ae.jsx(Hc,{size:"sm",variant:"outline",onClick:h,children:"Try Again"})})]})]})}),Ae.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Ae.jsx("div",{className:"lg:col-span-2 space-y-4",children:d?Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsx(uh,{className:"h-32 w-full"}),Ae.jsx(uh,{className:"h-32 w-full"}),Ae.jsx(uh,{className:"h-32 w-full"})]}):0===c.length?Ae.jsx(td,{children:Ae.jsxs(sd,{className:"p-8 text-center",children:[Ae.jsx(ln,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Appointments Found"}),Ae.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have any appointments scheduled yet."}),Ae.jsxs(Hc,{onClick:()=>a(!0),children:[Ae.jsx(ln,{className:"w-4 h-4 mr-2"}),"Book Your First Appointment"]})]})}):c.map(e=>{var n,s;return Ae.jsx(td,{className:"hover:shadow-md transition-shadow",children:Ae.jsxs(sd,{className:"p-4",children:[Ae.jsxs("div",{className:"flex justify-between items-start mb-3",children:[Ae.jsxs("div",{children:[Ae.jsx("div",{className:"flex items-center gap-2 mb-1",children:Ae.jsx("span",{className:"font-semibold text-lg",children:e.type.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())})}),Ae.jsx(Yd,{className:f(e.status),children:e.status})]}),Ae.jsxs(Hc,{variant:"ghost",size:"sm",onClick:()=>r(t===e.id?null:e.id),children:[t===e.id?"Hide":"View"," Details"]})]}),Ae.jsxs("div",{className:"space-y-3",children:[Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(ln,{className:"w-4 h-4 text-gray-500"}),Ae.jsxs("span",{className:"text-sm text-gray-600",children:[Ju(new Date(e.appointment_date),"MMMM d, yyyy")," at ",e.start_time," - ",e.end_time]})]}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(ca,{className:"w-4 h-4 text-gray-500"}),Ae.jsx("span",{className:"text-sm text-gray-600",children:null==(n=e.optometrist)?void 0:n.name})]}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(yn,{className:"w-4 h-4 text-gray-500"}),Ae.jsxs("span",{className:"text-sm text-gray-600",children:["Patient: ",null==(s=e.patient)?void 0:s.name]})]}),t===e.id&&e.notes&&Ae.jsxs("div",{className:"mt-4 space-y-3 pt-3 border-t",children:[Ae.jsx("h4",{className:"font-medium text-sm mb-2",children:"Notes:"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:e.notes})]})]}),Ae.jsxs("div",{className:"mt-4 flex gap-2",children:["scheduled"===e.status&&Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(Hc,{size:"sm",variant:"outline",onClick:()=>(e.id,void a(!0)),disabled:p,children:"Reschedule"}),Ae.jsx(Hc,{size:"sm",variant:"outline",className:"text-red-600",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to cancel this appointment?"))try{await m(e.toString(),{status:"cancelled"}),h()}catch(t){console.error("Failed to cancel appointment:",t),alert("Failed to cancel appointment. Please try again.")}})(e.id),disabled:p,children:"Cancel"})]}),Ae.jsx(Hc,{size:"sm",variant:"outline",children:"Contact Clinic"})]})]})},e.id)})}),Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:"Quick Actions"}),Ae.jsx(ad,{children:"Manage your appointments"})]}),Ae.jsxs(sd,{className:"space-y-3",children:[Ae.jsxs(Hc,{className:"w-full",size:"sm",onClick:()=>l("/customer/book-appointment"),children:[Ae.jsx(ln,{className:"w-4 h-4 mr-2"}),"Book New Appointment"]}),Ae.jsxs(Hc,{variant:"outline",className:"w-full",size:"sm",onClick:()=>i(!0),children:[Ae.jsx(qn,{className:"w-4 h-4 mr-2"}),"Contact Support"]})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Appointment Stats"})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{className:"text-sm",children:"Total Appointments"}),Ae.jsx("span",{className:"text-sm font-medium",children:c.length})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{className:"text-sm",children:"Upcoming"}),Ae.jsx("span",{className:"text-sm font-medium",children:c.filter(e=>"scheduled"===e.status||"confirmed"===e.status).length})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{className:"text-sm",children:"Completed"}),Ae.jsx("span",{className:"text-sm font-medium",children:c.filter(e=>"completed"===e.status).length})]})]})})]})]})]}),n&&Ae.jsx("div",{className:"mt-6",children:Ae.jsx(cH,{})}),Ae.jsx(dH,{isOpen:s,onClose:()=>i(!1)})]})},hH="http://192.168.100.6:8000/api",mH=Cc.create({baseURL:hH,headers:{"Content-Type":"application/json",Accept:"application/json"}});mH.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const pH=async e=>{const t=await(e=>mH.get("/prescriptions",{params:e}))(e);return t.data};function fH(...e){return ss(Vr(e))}const xH=Ct.createContext(void 0);const yH=({id:e,config:t})=>{var r,n,a,s,i;return Ae.jsx("style",{dangerouslySetInnerHTML:{__html:`\n          [data-chart="${e}"] {\n            --color-primary: ${(null==(r=t.primary)?void 0:r.color)||"hsl(var(--chart-1))"};\n            --color-secondary: ${(null==(n=t.secondary)?void 0:n.color)||"hsl(var(--chart-2))"};\n            --color-muted: ${(null==(a=t.muted)?void 0:a.color)||"hsl(var(--chart-3))"};\n            --color-background: ${(null==(s=t.background)?void 0:s.color)||"hsl(var(--chart-background))"};\n            --color-border: ${(null==(i=t.border)?void 0:i.color)||"hsl(var(--chart-border))"};\n          }\n        `}})};Ct.forwardRef(({className:e,...t},r)=>Ae.jsx("div",{ref:r,className:fH("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",e),...t})).displayName="ChartTooltip";const vH=Ct.forwardRef(({className:e,config:t,...r},n)=>{const a=Ct.useId();return Ae.jsxs("div",{ref:n,className:fH("w-full",e),"data-chart":a,...r,children:[Ae.jsx(yH,{id:a,config:t}),r.children]})});vH.displayName="ChartContainer";Ct.forwardRef(({className:e,active:t,payload:r,label:n,...a},s)=>{const{config:i}=function(){const e=Ct.useContext(xH);if(!e)throw new Error("useChart must be used within a ChartProvider");return e}();if(!t||!r||!r.length)return null;r[0].payload;const o=n;return Ae.jsxs("div",{ref:s,className:fH("grid min-w-[12rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-3 py-2 text-xs shadow-xl",e),...a,children:[Ae.jsx("div",{className:"font-medium",children:o}),Ae.jsx("div",{className:"grid gap-2",children:r.map((e,t)=>{const r=i[e.dataKey];return Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:(null==r?void 0:r.color)||`hsl(var(--chart-${t+1}))`}}),Ae.jsxs("span",{children:[(null==r?void 0:r.label)||e.dataKey,": ",e.value]})]},t)})})]})}).displayName="ChartTooltipContent";const gH={rightEye:{label:"Right Eye (OD)",color:"#2563eb"},leftEye:{label:"Left Eye (OS)",color:"#dc2626"}};function bH({data:e,title:t="Eye Progress Tracker",description:r,className:n}){const a=e.map(e=>({date:e.date,rightEye:"number"==typeof e.rightEye?e.rightEye:parseFloat(String(e.rightEye||"0")),leftEye:"number"==typeof e.leftEye?e.leftEye:parseFloat(String(e.leftEye||"0")),condition:e.condition,progressStatus:e.progressStatus,trackable:e.trackable})),s=a;console.log("Eye Tracker - Display Data:",s),console.log("Eye Tracker - Conditions found:",s.map(e=>({date:e.date,condition:e.condition,trackable:e.trackable,progressStatus:e.progressStatus})));const i=(()=>{if(s.length<2)return null;const e=s[s.length-1],t=s[s.length-2],r=(e.rightEye-t.rightEye+(e.leftEye-t.leftEye))/2;return{change:r,isPositive:r<=0,percentage:Math.abs(r).toFixed(2)}})(),o=Ct.useMemo(()=>s.filter(e=>e.condition&&"None"!==e.condition&&"Not specified"!==e.condition).map(e=>({date:e.date,condition:e.condition,progressStatus:e.progressStatus,trackable:e.trackable})),[s]),l=o.length>0?o[o.length-1]:null;return a&&0!==a.length?Ae.jsxs(td,{className:`w-full ${n||""}`,children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:t}),r&&Ae.jsx(ad,{children:r})]}),Ae.jsx(sd,{children:Ae.jsx(vH,{config:gH,className:"h-[350px] w-full",children:Ae.jsx(GO,{width:"100%",height:"100%",children:Ae.jsxs(YW,{accessibilityLayer:!0,data:s,margin:{top:10,right:20,left:10,bottom:10},children:[Ae.jsx(GU,{vertical:!1}),Ae.jsx(BV,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:e=>e.slice(0,10)}),Ae.jsx(XV,{tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:e=>`${e}D`}),Ae.jsx(jO,{formatter:(e,t)=>[`${e}D`,"rightEye"===t?"Right Eye (OD)":"Left Eye (OS)"],labelFormatter:e=>`Date: ${e}`,content:e=>{const{active:t,payload:r}=e;if(t&&r&&r.length){const e=r[0].payload,t=e.condition&&"None"!==e.condition&&"Not specified"!==e.condition;return Ae.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-3",children:[Ae.jsx("p",{className:"font-semibold text-sm mb-2",children:e.date}),Ae.jsxs("div",{className:"space-y-1",children:[Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600"}),Ae.jsxs("span",{className:"text-sm",children:["Right Eye: ",e.rightEye,"D"]})]}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx("div",{className:"w-3 h-3 rounded-full bg-red-600"}),Ae.jsxs("span",{className:"text-sm",children:["Left Eye: ",e.leftEye,"D"]})]}),t&&Ae.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(Qr,{className:"h-3 w-3 text-amber-500"}),Ae.jsx("span",{className:"text-xs font-semibold text-amber-700",children:e.condition})]}),e.progressStatus&&"N/A"!==e.progressStatus&&Ae.jsxs("span",{className:"text-xs text-gray-600 ml-5",children:["Status: ",e.progressStatus]})]})]})]})}return null}}),Ae.jsx(hV,{dataKey:"rightEye",type:"monotone",stroke:"#2563eb",strokeWidth:2,dot:e=>{const{cx:t,cy:r,payload:n}=e,a=n.condition&&"None"!==n.condition&&"Not specified"!==n.condition;return Ae.jsx("circle",{cx:t,cy:r,r:a?6:4,fill:"#2563eb",stroke:a?"#fbbf24":"#2563eb",strokeWidth:a?2:0})},activeDot:{r:6}}),Ae.jsx(hV,{dataKey:"leftEye",type:"monotone",stroke:"#dc2626",strokeWidth:2,dot:e=>{const{cx:t,cy:r,payload:n}=e,a=n.condition&&"None"!==n.condition&&"Not specified"!==n.condition;return Ae.jsx("circle",{cx:t,cy:r,r:a?6:4,fill:"#dc2626",stroke:a?"#fbbf24":"#dc2626",strokeWidth:a?2:0})},activeDot:{r:6}})]})})})}),l&&Ae.jsx("div",{className:"px-6 pb-4",children:Ae.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ae.jsx("div",{className:"flex items-start justify-between",children:Ae.jsxs("div",{className:"flex items-start gap-3",children:[Ae.jsx(Qr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),Ae.jsxs("div",{children:[Ae.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"Tracked Condition"}),Ae.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ae.jsx(Yd,{variant:"outline",className:"bg-white border-blue-300 text-blue-700",children:l.condition}),l.progressStatus&&"N/A"!==l.progressStatus&&Ae.jsx(Yd,{variant:"Improving"===l.progressStatus?"default":"Stable"===l.progressStatus?"secondary":"destructive",className:"Improving"===l.progressStatus?"bg-green-100 text-green-800 border-green-300":"Stable"===l.progressStatus?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-red-100 text-red-800 border-red-300",children:l.progressStatus})]}),Ae.jsx("p",{className:"text-sm text-blue-700",children:o.length>1?`Tracked across ${o.length} examinations`:"First recorded examination"})]})]})})})}),Ae.jsx(id,{children:Ae.jsxs("div",{className:"flex w-full items-start justify-between gap-4 text-sm",children:[Ae.jsx("div",{className:"grid gap-2",children:i?Ae.jsxs(Ae.Fragment,{children:[Ae.jsxs("div",{className:"flex items-center gap-2 font-medium leading-none",children:[i.isPositive?"Improving":"Changing"," by ",i.percentage,"D",Ae.jsx(aa,{className:"h-4 w-4"})]}),Ae.jsxs("div",{className:"flex items-center gap-2 leading-none text-muted-foreground",children:["Showing vision data from ",s.length," examination",1!==s.length?"s":""]})]}):Ae.jsx("div",{className:"leading-none text-muted-foreground",children:"Add more examinations to see trends"})}),o.length>0&&Ae.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:Ae.jsxs("div",{className:"flex items-center gap-1",children:[Ae.jsxs("div",{className:"relative",children:[Ae.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600"}),Ae.jsx("div",{className:"absolute inset-0 w-3 h-3 rounded-full border-2 border-amber-400"})]}),Ae.jsx("span",{children:"= Tracked condition"})]})})]})})]}):Ae.jsxs(td,{className:`w-full ${n||""}`,children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:t}),r&&Ae.jsx(ad,{children:r})]}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"text-center py-12",children:[Ae.jsx(aa,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Vision Data Yet"}),Ae.jsx("p",{className:"text-gray-600 mb-4",children:"Your eye progress will be tracked here once you have multiple prescriptions."}),Ae.jsx("p",{className:"text-sm text-gray-500",children:"The chart will show how your eyesight changes over time, helping you understand your vision health."})]})})]})}const jH=()=>{var e,t,r,n;const{user:a}=Rc(),[s,i]=Ct.useState(null),[o,l]=Ct.useState([]),[c,d]=Ct.useState(!0),[u,h]=Ct.useState(null),[m,p]=Ct.useState(0);Ct.useEffect(()=>{(null==a?void 0:a.id)?f():null===a&&d(!1)},[null==a?void 0:a.id,a]),Ct.useEffect(()=>{const e=()=>{(null==a?void 0:a.id)&&f(!1)};return window.addEventListener("focus",e),()=>window.removeEventListener("focus",e)},[null==a?void 0:a.id]);const f=async(e=!1)=>{var t,r,n,a,s,i,o;try{d(!0),h(null),console.log("Loading prescriptions...");const r=await pH();console.log("Prescriptions response:",r);const n=(null==(t=r.data)?void 0:t.data)||r.data||[];if(e&&n.length>m&&m>0){const e=n.length-m;console.log(`New prescription(s) detected: ${e}`),alert(`New prescription(s) detected: ${e} prescription(s) added to your vision history!`)}l(n),p(n.length)}catch(c){console.error("Error loading prescriptions:",c),console.error("Error details:",{status:null==(r=c.response)?void 0:r.status,statusText:null==(n=c.response)?void 0:n.statusText,data:null==(a=c.response)?void 0:a.data,message:c.message}),401===(null==(s=c.response)?void 0:s.status)?h("Please log in to view your prescriptions"):403===(null==(i=c.response)?void 0:i.status)?h("You do not have permission to view prescriptions"):500===(null==(o=c.response)?void 0:o.status)?h("Server error. Please try again later or contact support."):h(c instanceof Error?c.message:"Failed to load prescriptions")}finally{d(!1)}},x=Ct.useMemo(()=>o.map(e=>{var t,r,n,a,s,i,o,l,c,d,u,h,m,p,f,x,y,v,g,b,j,w,N,S,k;const _=(null==(t=e.prescription_data)?void 0:t.right_eye)||{},O=(null==(r=e.prescription_data)?void 0:r.left_eye)||{},C=(null==(n=e.prescription_data)?void 0:n.condition)||e.condition,A=(null==(a=e.prescription_data)?void 0:a.trackable)||e.trackable,E=(null==(s=e.prescription_data)?void 0:s.progress_status)||e.progress_status,P=(null==(i=e.prescription_data)?void 0:i.progress_notes)||e.progress_notes,T=(null==(o=e.prescription_data)?void 0:o.referral_notes)||e.referral_notes;C&&"None"!==C&&console.log("Prescription with condition:",{id:e.id,date:e.exam_date,condition:C,trackable:A,progressStatus:E,prescription_data:e.prescription_data});const M=[];return(null==(l=e.prescription_data)?void 0:l.vision_acuity)&&M.push(`Vision acuity: ${e.prescription_data.vision_acuity}`),C&&"None"!==C&&(M.push(`Condition: ${C}`),A&&E&&M.push(`Progress: ${E}`),A&&P&&M.push(`Progress notes: ${P}`),!A&&T&&M.push(`Referral notes: ${T}`)),(null==(c=e.prescription_data)?void 0:c.additional_notes)&&M.push(e.prescription_data.additional_notes),(null==(d=e.prescription_data)?void 0:d.follow_up_date)&&M.push(`Follow-up scheduled for ${Ju(new Date(e.prescription_data.follow_up_date),"MMM d, yyyy")}`),0===M.length&&M.push("Eye examination completed successfully"),{id:e.id.toString(),date:(null==(u=e.appointment)?void 0:u.appointment_date)||e.issue_date,type:(e=>{switch(e){case"glasses":case"sunglasses":case"progressive":case"bifocal":default:return"comprehensive-exam";case"contact_lenses":return"contact-lens"}})(e.type),optometrist:(null==(h=e.optometrist)?void 0:h.name)||"Dr. Unknown",findings:M,prescription:{rightEye:{sphere:(null==(m=null==_?void 0:_.sphere)?void 0:m.toString())||"0.00",cylinder:(null==(p=null==_?void 0:_.cylinder)?void 0:p.toString())||"0.00",axis:(null==(f=null==_?void 0:_.axis)?void 0:f.toString())||"0",pd:(null==(x=null==_?void 0:_.pd)?void 0:x.toString())||"0",add:(null==(y=null==_?void 0:_.add)?void 0:y.toString())||"0.00"},leftEye:{sphere:(null==(v=null==O?void 0:O.sphere)?void 0:v.toString())||"0.00",cylinder:(null==(g=null==O?void 0:O.cylinder)?void 0:g.toString())||"0.00",axis:(null==(b=null==O?void 0:O.axis)?void 0:b.toString())||"0",pd:(null==(j=null==O?void 0:O.pd)?void 0:j.toString())||"0",add:(null==(w=null==O?void 0:O.add)?void 0:w.toString())||"0.00"}},condition:C,trackable:A,progressStatus:E,progressNotes:P,referralNotes:T,nextExam:(null==(N=e.prescription_data)?void 0:N.follow_up_date)||e.expiry_date,notes:(null==(S=e.prescription_data)?void 0:S.notes)||(null==(k=e.prescription_data)?void 0:k.additional_notes)||"Eye examination completed successfully"}}).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),[o]),y=e=>{switch(e){case"comprehensive-exam":return"bg-purple-100 text-purple-800";case"contact-lens":return"bg-blue-100 text-blue-800";case"follow-up":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},v=e=>{switch(e){case"comprehensive-exam":return"Comprehensive Exam";case"contact-lens":return"Contact Lens";case"follow-up":return"Follow-up";default:return e}},g=Ct.useMemo(()=>{const e=x.filter(e=>!!e.prescription).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime());if(0===e.length)return[];const t=e=>{if(null==e)return 0;const t=("number"==typeof e?e.toString():e).replace("+",""),r=Number(t);return isNaN(r)?0:r};return e.map((r,n)=>{var a,s,i,o,l,c,d,u,h,m,p,f;const x=t(null==(a=r.prescription)?void 0:a.rightEye.sphere),y=t(null==(s=r.prescription)?void 0:s.leftEye.sphere);let v=0,g=0,b="stable",j="stable";if(n>0){const r=e[n-1],a=t(null==(i=r.prescription)?void 0:i.rightEye.sphere),s=t(null==(o=r.prescription)?void 0:o.leftEye.sphere);v=Math.abs(x-a),g=Math.abs(y-s),b=v<=.25?"stable":v<=.5?"slight":"significant",j=g<=.25?"stable":g<=.5?"slight":"significant"}return{date:Ju(new Date(r.date),"MMM d, yyyy"),fullDate:r.date,examDate:r.date,reSphere:x,reCylinder:t(null==(l=r.prescription)?void 0:l.rightEye.cylinder),reAxis:t(null==(c=r.prescription)?void 0:c.rightEye.axis),rePD:t(null==(d=r.prescription)?void 0:d.rightEye.pd),reAdd:t(null==(u=r.prescription)?void 0:u.rightEye.add),reChange:v,reStatus:b,leSphere:y,leCylinder:t(null==(h=r.prescription)?void 0:h.leftEye.cylinder),leAxis:t(null==(m=r.prescription)?void 0:m.leftEye.axis),lePD:t(null==(p=r.prescription)?void 0:p.leftEye.pd),leAdd:t(null==(f=r.prescription)?void 0:f.leftEye.add),leChange:g,leStatus:j,visionAcuity:r.findings[0]||"N/A",optometrist:r.optometrist,isLatest:n===e.length-1,condition:r.condition||"Not specified",trackable:r.trackable||!1,progressStatus:r.progressStatus||"N/A",progressNotes:r.progressNotes||""}})},[x]),b=Ct.useMemo(()=>{const e=g.map(e=>({date:e.date,rightEye:e.reSphere,leftEye:e.leSphere,visionAcuity:e.visionAcuity,condition:e.condition,progressStatus:e.progressStatus,trackable:e.trackable}));return console.log("CustomerVisionHistory - Eye Tracker Data:",e),console.log("CustomerVisionHistory - Conditions:",e.map(e=>({date:e.date,condition:e.condition,trackable:e.trackable,progressStatus:e.progressStatus}))),e},[g]);return Ae.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[Ae.jsx("style",{children:"\n          :root {\n            --chart-1: 219 78% 61%;\n            --chart-2: 142 71% 45%;\n            --chart-3: 197 37% 24%;\n            --chart-4: 43 74% 66%;\n            --chart-5: 27 87% 67%;\n          }\n          .glass-card {\n            background: rgba(255, 255, 255, 0.85);\n            backdrop-filter: blur(10px);\n            border: 1px solid rgba(255, 255, 255, 0.2);\n          }\n          .progress-glow {\n            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);\n          }\n        "}),Ae.jsxs("div",{className:"p-4 space-y-4",children:[Ae.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ae.jsxs("div",{className:"flex items-center gap-4",children:[Ae.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:Ae.jsx(wn,{className:"w-6 h-6 text-white"})}),Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Vision History"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:"Track your eye health progress"})]})]}),Ae.jsxs(Hc,{onClick:f,disabled:c,variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-blue-50",children:[Ae.jsx(Vn,{className:"h-4 w-4 "+(c?"animate-spin":"")}),c?"Refreshing...":"Refresh"]})]}),Ae.jsx("div",{className:"max-w-6xl mx-auto",children:Ae.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[Ae.jsx("div",{className:"lg:col-span-2",children:Ae.jsxs(td,{className:"glass-card shadow-2xl border-0 overflow-hidden",children:[Ae.jsx(rd,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3",children:Ae.jsxs(nd,{className:"flex items-center gap-2 text-lg",children:[Ae.jsx(ln,{className:"w-5 h-5"}),"Examination History"]})}),Ae.jsx(sd,{className:"p-4",children:c?Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsx(uh,{className:"h-32 w-full"}),Ae.jsx(uh,{className:"h-32 w-full"}),Ae.jsx(uh,{className:"h-32 w-full"})]}):u?Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx(Qr,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),Ae.jsx("p",{className:"text-red-600",children:"Failed to load vision history"}),Ae.jsx("p",{className:"text-sm text-gray-500 mt-2",children:u})]}):0===x.length?Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx(wn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Vision History Found"}),Ae.jsx("p",{className:"text-gray-600",children:"You don't have any vision examinations recorded yet."})]}):Ae.jsx("div",{className:"space-y-3",children:x.map((e,t)=>Ae.jsx(td,{className:"group hover:shadow-lg transition-all duration-200 border border-gray-200 bg-white overflow-hidden",children:Ae.jsxs(sd,{className:"p-4",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-3",children:[Ae.jsxs("div",{className:"flex items-center gap-3",children:[Ae.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:["#",x.length-t]}),Ae.jsxs("div",{children:[Ae.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ae.jsx("span",{className:"font-semibold text-gray-900",children:Ju(new Date(e.date),"MMM d, yyyy")}),Ae.jsx(Yd,{className:`${y(e.type)} text-xs`,children:v(e.type)})]}),Ae.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[Ae.jsx(ca,{className:"w-3 h-3"}),Ae.jsx("span",{children:e.optometrist})]})]})]}),Ae.jsx(Hc,{variant:"ghost",size:"sm",onClick:()=>i(s===e.id?null:e.id),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 px-2 py-1",children:Ae.jsx(wn,{className:"w-4 h-4"})})]}),e.prescription&&Ae.jsx("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:Ae.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[Ae.jsxs("div",{children:[Ae.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ae.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),Ae.jsx("span",{className:"font-medium text-blue-700",children:"Right Eye"})]}),Ae.jsxs("div",{className:"font-mono text-gray-800",children:[e.prescription.rightEye.sphere," / ",e.prescription.rightEye.cylinder," × ",e.prescription.rightEye.axis,"°"]})]}),Ae.jsxs("div",{children:[Ae.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ae.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),Ae.jsx("span",{className:"font-medium text-purple-700",children:"Left Eye"})]}),Ae.jsxs("div",{className:"font-mono text-gray-800",children:[e.prescription.leftEye.sphere," / ",e.prescription.leftEye.cylinder," × ",e.prescription.leftEye.axis,"°"]})]})]})}),s===e.id&&Ae.jsxs("div",{className:"mt-4 space-y-3 pt-3 border-t",children:[Ae.jsxs("div",{children:[Ae.jsx("h4",{className:"font-medium text-sm mb-2",children:"Findings:"}),Ae.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:e.findings.map((e,t)=>Ae.jsx("li",{children:e},t))})]}),e.prescription&&Ae.jsxs("div",{children:[Ae.jsx("h4",{className:"font-medium text-sm mb-2",children:"Prescription:"}),Ae.jsxs("div",{className:"bg-gray-50 p-3 rounded-md text-sm space-y-3",children:[Ae.jsxs("div",{children:[Ae.jsx("h5",{className:"font-medium text-blue-700 mb-2",children:"Right Eye (RE)"}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Sphere:"})," ",e.prescription.rightEye.sphere]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Cylinder:"})," ",e.prescription.rightEye.cylinder]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Axis:"})," ",e.prescription.rightEye.axis,"°"]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"PD:"})," ",e.prescription.rightEye.pd,"mm"]}),e.prescription.rightEye.add&&"0.00"!==e.prescription.rightEye.add&&Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Add:"})," ",e.prescription.rightEye.add]})]})]}),Ae.jsxs("div",{children:[Ae.jsx("h5",{className:"font-medium text-green-700 mb-2",children:"Left Eye (LE)"}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Sphere:"})," ",e.prescription.leftEye.sphere]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Cylinder:"})," ",e.prescription.leftEye.cylinder]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Axis:"})," ",e.prescription.leftEye.axis,"°"]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"PD:"})," ",e.prescription.leftEye.pd,"mm"]}),e.prescription.leftEye.add&&"0.00"!==e.prescription.leftEye.add&&Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Add:"})," ",e.prescription.leftEye.add]})]})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx("h4",{className:"font-medium text-sm mb-1",children:"Next Exam:"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:Ju(new Date(e.nextExam),"MMMM d, yyyy")})]}),Ae.jsxs("div",{children:[Ae.jsx("h4",{className:"font-medium text-sm mb-1",children:"Notes:"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:e.notes})]})]})]})},e.id))})})]})}),Ae.jsxs("div",{className:"space-y-4",children:[b.length>0?Ae.jsx(bH,{data:b,title:"Eye Progress Tracker",description:b.length>0?`${Ju(new Date((null==(e=g[0])?void 0:e.examDate)||new Date),"MMMM yyyy")} - ${Ju(new Date((null==(t=g[g.length-1])?void 0:t.examDate)||new Date),"MMMM yyyy")}`:void 0,className:"border border-gray-200 shadow-md"}):Ae.jsx(td,{className:"border border-gray-200 shadow-md",children:Ae.jsx(sd,{className:"pt-6",children:Ae.jsxs("div",{className:"text-center py-12",children:[Ae.jsx(aa,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Vision Data Yet"}),Ae.jsx("p",{className:"text-gray-600 mb-4",children:"Your eye progress will be tracked here once you have multiple prescriptions."}),Ae.jsx("p",{className:"text-sm text-gray-500",children:"The chart will show how your eyesight changes over time, helping you understand your vision health."})]})})}),Ae.jsxs(td,{className:"border border-gray-200 shadow-md",children:[Ae.jsx(rd,{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3",children:Ae.jsxs(nd,{className:"flex items-center gap-2 text-lg",children:[Ae.jsx(wn,{className:"w-5 h-5"}),"Vision Summary"]})}),Ae.jsx(sd,{className:"p-4",children:Ae.jsxs("div",{className:"space-y-3",children:[Ae.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[Ae.jsx("span",{className:"text-sm text-gray-600",children:"Total Exams"}),Ae.jsx(Yd,{variant:"secondary",children:x.length})]}),Ae.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[Ae.jsx("span",{className:"text-sm text-gray-600",children:"Last Exam"}),Ae.jsx("span",{className:"text-sm font-medium",children:x.length>0?Ju(new Date((null==(r=x[0])?void 0:r.date)||new Date),"MMM d, yyyy"):"N/A"})]}),Ae.jsxs("div",{className:"flex items-center justify-between py-2",children:[Ae.jsx("span",{className:"text-sm text-gray-600",children:"Next Due"}),Ae.jsx("span",{className:"text-sm font-medium",children:x.length>0?Ju(new Date((null==(n=x[0])?void 0:n.nextExam)||new Date),"MMM d, yyyy"):"N/A"})]})]})})]}),Ae.jsxs(Hc,{className:"w-full",variant:"default",children:[Ae.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Report"]})]})]})})]})]})},wH=()=>{const{toast:e}=Jt(),{user:t}=Rc(),[r,n]=Ct.useState([]),[a,s]=Ct.useState([]),[i,o]=Ct.useState(!0),[l,c]=Ct.useState(!1),[d,u]=Ct.useState(null),[h,m]=Ct.useState(0),[p,f]=Ct.useState("");Ct.useEffect(()=>{x()},[null==t?void 0:t.id]);const x=async()=>{if(null==t?void 0:t.id)try{o(!0);const[e,r]=await Promise.all([rx(),nx(t.id)]);n(e.appointments),s(r.data)}catch(r){console.error("Error fetching data:",r),e({title:"Error",description:r.message||"Failed to fetch data",variant:"destructive"})}finally{o(!1)}else o(!1)},y=(e,t=!1)=>Ae.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(r=>Ae.jsx("button",{type:"button",disabled:!t,onClick:()=>t&&m(r),className:`text-2xl ${t?"cursor-pointer hover:scale-110 transition-transform":"cursor-default"} ${r<=e?"text-yellow-400":"text-gray-300"}`,children:"★"},r))}),v=e=>({1:"Very Poor",2:"Poor",3:"Average",4:"Good",5:"Excellent"}[e]||"Unknown");return i||!(null==t?void 0:t.id)?Ae.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ae.jsx(Tn,{className:"h-8 w-8 animate-spin"}),Ae.jsx("span",{className:"ml-2",children:"Loading feedback data..."})]}):Ae.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[Ae.jsxs("div",{className:"mb-6",children:[Ae.jsx("h1",{className:"text-3xl font-bold text-customer",children:"Customer Feedback"}),Ae.jsx("p",{className:"text-muted-foreground mt-2",children:"Share your experience and help us improve our services"})]}),Ae.jsxs(Of,{defaultValue:"submit",className:"w-full",children:[Ae.jsxs(Cf,{className:"grid w-full grid-cols-2",children:[Ae.jsx(Af,{value:"submit",children:"Submit Feedback"}),Ae.jsx(Af,{value:"history",children:"Feedback History"})]}),Ae.jsxs(Ef,{value:"submit",className:"space-y-6",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(Fn,{className:"h-5 w-5 text-customer"}),Ae.jsx("span",{children:"Submit New Feedback"})]}),Ae.jsx(ad,{children:"Select a completed appointment and share your experience"})]}),Ae.jsxs(sd,{className:"space-y-6",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"appointment",children:"Select Appointment"}),Ae.jsxs(Tm,{value:(null==d?void 0:d.id.toString())||"",onValueChange:e=>{const t=r.find(t=>t.id.toString()===e);u(t||null)},children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Choose an appointment to review"})}),Ae.jsx(Fm,{children:r.map(e=>Ae.jsx(Lm,{value:e.id.toString(),children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-4 w-4"}),Ae.jsxs("span",{children:[e.date," at ",e.time]}),Ae.jsx(Yd,{variant:"outline",children:e.type})]})},e.id))})]})]}),d&&Ae.jsx(td,{className:"bg-muted/50",children:Ae.jsxs(sd,{className:"pt-4",children:[Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{children:d.date})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(yn,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{children:d.time})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(In,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{children:d.branch_name})]})]}),d.optometrist_name&&Ae.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[Ae.jsx(ca,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{children:d.optometrist_name})]})]})}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{children:"Rating"}),Ae.jsxs("div",{className:"space-y-2",children:[y(h,!0),h>0&&Ae.jsx("p",{className:"text-sm text-muted-foreground",children:v(h)})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"comment",children:"Comments (Optional)"}),Ae.jsx(ph,{id:"comment",placeholder:"Tell us about your experience...",value:p,onChange:e=>f(e.target.value),rows:4,maxLength:1e3}),Ae.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.length,"/1000 characters"]})]}),Ae.jsxs(Hc,{onClick:async()=>{if(d&&0!==h)try{c(!0);const t={appointment_id:d.id,rating:h,comment:p.trim()||void 0};await(async e=>{if(!sessionStorage.getItem("auth_token"))throw new Error("No authentication token found");return(await tx.post("/feedback",e)).data})(t),e({title:"Success",description:"Feedback submitted successfully!"}),u(null),m(0),f(""),await x()}catch(t){console.error("Error submitting feedback:",t),e({title:"Error",description:t.message||"Failed to submit feedback",variant:"destructive"})}finally{c(!1)}else e({title:"Validation Error",description:"Please select an appointment and provide a rating",variant:"destructive"})},disabled:l||!d||0===h,className:"w-full",variant:"customer",children:[l&&Ae.jsx(Tn,{className:"h-4 w-4 mr-2 animate-spin"}),"Submit Feedback"]})]})]}),0===r.length&&Ae.jsx(td,{children:Ae.jsx(sd,{className:"pt-6",children:Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx(Fn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Appointments Available for Feedback"}),Ae.jsx("p",{className:"text-muted-foreground",children:"You don't have any completed appointments that haven't been reviewed yet."})]})})})]}),Ae.jsx(Ef,{value:"history",className:"space-y-6",children:Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(ea,{className:"h-5 w-5 text-customer"}),Ae.jsx("span",{children:"Your Feedback History"})]}),Ae.jsx(ad,{children:"View all your submitted feedback"})]}),Ae.jsx(sd,{children:a.length>0?Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Appointment"}),Ae.jsx(Gm,{children:"Branch"}),Ae.jsx(Gm,{children:"Rating"}),Ae.jsx(Gm,{children:"Comment"}),Ae.jsx(Gm,{children:"Date"})]})}),Ae.jsx(Km,{children:a.map(e=>{var t,r,n,a;return Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"space-y-1",children:[Ae.jsx("div",{className:"font-medium",children:(null==(t=e.appointment)?void 0:t.appointment_type)||"Appointment"}),Ae.jsxs("div",{className:"text-sm text-muted-foreground",children:[null==(r=e.appointment)?void 0:r.appointment_date," at ",null==(n=e.appointment)?void 0:n.appointment_time]}),(null==(a=e.appointment)?void 0:a.optometrist)&&Ae.jsx("div",{className:"text-xs text-muted-foreground",children:e.appointment.optometrist.name})]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(In,{className:"h-4 w-4 text-muted-foreground"}),Ae.jsx("span",{children:e.branch.name})]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"space-y-1",children:[y(e.rating),Ae.jsx("div",{className:"text-sm text-muted-foreground",children:v(e.rating)})]})}),Ae.jsx(Xm,{children:e.comment?Ae.jsx("p",{className:"text-sm max-w-xs truncate",title:e.comment,children:e.comment}):Ae.jsx("span",{className:"text-muted-foreground text-sm",children:"No comment"})}),Ae.jsx(Xm,{children:Ae.jsx("div",{className:"text-sm",children:new Date(e.created_at).toLocaleDateString()})})]},e.id)})})]}):Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx(ea,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Feedback Submitted"}),Ae.jsx("p",{className:"text-muted-foreground",children:"You haven't submitted any feedback yet. Complete an appointment to get started!"})]})})]})})]})]})},NH=Cc.create({baseURL:Fc,headers:{"Content-Type":"application/json",Accept:"application/json"}});NH.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),NH.interceptors.response.use(e=>e,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const SH=()=>{const{user:e}=Rc(),{toast:t}=Jt(),[r,n]=Ct.useState(null),[a,s]=Ct.useState([]),[i,o]=Ct.useState(!0);Ct.useEffect(()=>{l()},[null==e?void 0:e.id]);const l=async()=>{if(null==e?void 0:e.id)try{o(!0);const t=await(async e=>(await NH.get(`/customers/${e}/receipts`)).data)(e.id);console.log("Receipts data:",t.data),s(t.data)}catch(r){console.error("Error fetching receipts:",r),t({title:"Error",description:r.message||"Failed to fetch receipts",variant:"destructive"})}finally{o(!1)}else o(!1)},c=e=>{switch(e){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"refunded":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=e=>{switch(e.toLowerCase()){case"card":case"credit card":case"debit card":case"online":return Ae.jsx(vn,{className:"w-4 h-4"});case"insurance":return Ae.jsx(wn,{className:"w-4 h-4"});default:return Ae.jsx("span",{className:"text-sm font-bold",children:"₱"})}},u=e=>{const t="string"==typeof e?parseFloat(e):Number(e);return isNaN(t)?"0.00":t.toFixed(2)};return i?Ae.jsx("div",{className:"p-6",children:Ae.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ae.jsx(Tn,{className:"h-8 w-8 animate-spin"}),Ae.jsx("span",{className:"ml-2",children:"Loading receipts..."})]})}):(null==e?void 0:e.id)?Ae.jsxs("div",{className:"p-6 space-y-6",children:[Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Receipts"}),Ae.jsx("p",{className:"text-gray-600 mt-2",children:"View and download your payment receipts"})]}),0===a.length?Ae.jsx(td,{children:Ae.jsx(sd,{className:"p-6",children:Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx(wn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Receipts Found"}),Ae.jsx("p",{className:"text-muted-foreground",children:"You don't have any receipts yet. Receipts will appear here after you complete appointments or purchases."})]})})}):Ae.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:Ae.jsx("div",{className:"lg:col-span-2 space-y-4",children:a.map(e=>{var a;return Ae.jsx(td,{className:"hover:shadow-md transition-shadow",children:Ae.jsxs(sd,{className:"p-4",children:[Ae.jsxs("div",{className:"flex justify-between items-start mb-3",children:[Ae.jsxs("div",{children:[Ae.jsx("div",{className:"flex items-center gap-2 mb-1",children:Ae.jsxs("span",{className:"font-semibold text-lg",children:["#",e.receipt_number]})}),Ae.jsx(Yd,{className:c(e.payment_status),children:e.payment_status})]}),Ae.jsxs(Hc,{variant:"ghost",size:"sm",onClick:()=>n(r===e.id?null:e.id),children:[r===e.id?"Hide":"View"," Details"]})]}),Ae.jsxs("div",{className:"space-y-3",children:[Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(ln,{className:"w-4 h-4 text-gray-500"}),Ae.jsx("span",{className:"text-sm text-gray-600",children:Ju(new Date(e.created_at),"MMM dd, yyyy")})]}),e.branch&&Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(In,{className:"w-4 h-4 text-gray-500"}),Ae.jsx("span",{className:"text-sm text-gray-600",children:e.branch.name})]}),(null==(a=e.appointment)?void 0:a.optometrist)&&Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(wn,{className:"w-4 h-4 text-gray-500"}),Ae.jsx("span",{className:"text-sm text-gray-600",children:e.appointment.optometrist.name})]}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[d(e.payment_method),Ae.jsx("span",{className:"text-sm text-gray-600 capitalize",children:e.payment_method})]}),Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsx("span",{className:"text-sm text-gray-500",children:"Total Amount"}),Ae.jsxs("span",{className:"text-lg font-semibold",children:["₱",u(e.total_amount)]})]})]}),r===e.id&&Ae.jsxs("div",{className:"mt-4 space-y-3 pt-3 border-t",children:[Ae.jsx("h4",{className:"font-medium text-sm mb-2",children:"Items:"}),Ae.jsx("div",{className:"space-y-2",children:e.items.map((e,t)=>Ae.jsxs("div",{className:"flex justify-between text-sm",children:[Ae.jsxs("span",{children:[e.description," (x",e.quantity,")"]}),Ae.jsxs("span",{children:["₱",u(e.total)]})]},t))}),Ae.jsxs("div",{className:"border-t pt-2 space-y-1",children:[Ae.jsxs("div",{className:"flex justify-between text-sm",children:[Ae.jsx("span",{children:"Subtotal"}),Ae.jsxs("span",{children:["₱",u(e.subtotal)]})]}),Ae.jsxs("div",{className:"flex justify-between text-sm",children:[Ae.jsx("span",{children:"Tax"}),Ae.jsxs("span",{children:["₱",u(e.tax_amount)]})]}),Ae.jsxs("div",{className:"flex justify-between text-sm font-bold",children:[Ae.jsx("span",{children:"Total"}),Ae.jsxs("span",{children:["₱",u(e.total_amount)]})]})]}),e.notes&&Ae.jsxs("div",{className:"mt-3 pt-3 border-t",children:[Ae.jsx("h5",{className:"font-medium text-sm mb-1",children:"Notes:"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:e.notes})]})]}),Ae.jsxs("div",{className:"flex gap-2 mt-4",children:[Ae.jsxs(Hc,{size:"sm",variant:"outline",onClick:()=>(async e=>{try{const r=sessionStorage.getItem("auth_token");if(!r)return void t({title:"Authentication Required",description:"Please log in to download receipts",variant:"destructive"});const n="http://192.168.100.6:8000/api",a=await fetch(`${n}/receipts/${e}/download`,{method:"GET",headers:{Authorization:`Bearer ${r}`}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const s=await a.blob(),i=window.URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=`receipt-${e}.pdf`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(i),t({title:"Download Started",description:"Receipt download has been initiated"})}catch(r){console.error("Download error:",r),t({title:"Download Failed",description:r.message||"Failed to download receipt",variant:"destructive"})}})(e.id),children:[Ae.jsx(bn,{className:"w-4 h-4 mr-2"}),"Download"]}),Ae.jsxs(Hc,{size:"sm",variant:"outline",onClick:()=>n(r===e.id?null:e.id),children:[Ae.jsx(wn,{className:"w-4 h-4 mr-2"}),r===e.id?"Hide":"View"]})]})]})},e.id)})})})]}):Ae.jsx("div",{className:"p-6",children:Ae.jsx(td,{children:Ae.jsx(sd,{className:"p-6",children:Ae.jsx("p",{className:"text-center text-muted-foreground",children:"Please log in to view your receipts."})})})})},kH=()=>{const{user:e}=Rc(),[t,r]=Ct.useState([]),[n,a]=Ct.useState(null),[s,i]=Ct.useState(!0),[o,l]=Ct.useState(null);Ct.useEffect(()=>{(null==e?void 0:e.id)?c():null===e&&i(!1)},[null==e?void 0:e.id,e]),Ct.useEffect(()=>{const t=()=>{(null==e?void 0:e.id)&&c()};return window.addEventListener("focus",t),()=>window.removeEventListener("focus",t)},[null==e?void 0:e.id]);const c=async()=>{var e,t,n;try{i(!0),l(null);const t=await pH(),n=((null==(e=t.data)?void 0:e.data)||t.data||[]).sort((e,t)=>{var r,n;const a=new Date((null==(r=e.appointment)?void 0:r.appointment_date)||e.issue_date);return new Date((null==(n=t.appointment)?void 0:n.appointment_date)||t.issue_date).getTime()-a.getTime()});r(n)}catch(a){console.error("Error loading prescriptions:",a),401===(null==(t=a.response)?void 0:t.status)?l("Please log in to view your prescriptions"):403===(null==(n=a.response)?void 0:n.status)?l("You do not have permission to view prescriptions"):l(a instanceof Error?a.message:"Failed to load prescriptions")}finally{i(!1)}},d=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},u=e=>{switch(e){case"glasses":return"Glasses";case"contact_lenses":return"Contact Lenses";case"sunglasses":return"Sunglasses";case"progressive":return"Progressive Lenses";case"bifocal":return"Bifocal Lenses";default:return e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}},h=e=>new Date(e)<new Date;return s?Ae.jsxs("div",{className:"p-6 flex items-center justify-center",children:[Ae.jsx(Tn,{className:"h-8 w-8 animate-spin"}),Ae.jsx("span",{className:"ml-2",children:"Loading prescriptions..."})]}):o?Ae.jsxs("div",{className:"p-6",children:[Ae.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-4",children:[Ae.jsx(Qr,{className:"h-5 w-5"}),Ae.jsxs("span",{children:["Error: ",o]})]}),Ae.jsx(Hc,{onClick:c,children:"Retry"})]}):Ae.jsxs("div",{className:"p-6 space-y-6",children:[Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Prescriptions"}),Ae.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage your eye care prescriptions"})]}),Ae.jsxs(Hc,{onClick:c,disabled:s,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[Ae.jsx(Vn,{className:"h-4 w-4 "+(s?"animate-spin":"")}),"Refresh"]})]}),Ae.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Ae.jsx("div",{className:"lg:col-span-2 space-y-4",children:0===t.length?Ae.jsx(td,{children:Ae.jsxs(sd,{className:"p-8 text-center",children:[Ae.jsx(Sn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Prescriptions Found"}),Ae.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have any prescriptions yet. Schedule an appointment to get your first prescription."})]})}):t.map(e=>{var t,r,s,i,o,l,c,m,p,f,x,y,v,g,b,j,w,N,S,k,_;return Ae.jsx(td,{className:"hover:shadow-md transition-shadow",children:Ae.jsxs(sd,{className:"p-4",children:[Ae.jsxs("div",{className:"flex justify-between items-start mb-3",children:[Ae.jsxs("div",{className:"flex items-center gap-2",children:[(e.type,Ae.jsx(wn,{className:"w-4 h-4"})),Ae.jsx("span",{className:"font-semibold text-lg",children:u(e.type)})]}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(Yd,{className:d(e.status),children:e.status}),h(e.expiry_date)&&Ae.jsxs(Yd,{variant:"destructive",children:[Ae.jsx(Qr,{className:"w-3 h-3 mr-1"}),"Expired"]})]})]}),Ae.jsxs("div",{className:"space-y-3",children:[Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(ln,{className:"w-4 h-4 text-gray-500"}),Ae.jsxs("span",{className:"text-sm text-gray-600",children:["Issued: ",Ju(new Date((null==(t=e.appointment)?void 0:t.appointment_date)||e.issue_date),"MMMM d, yyyy")]})]}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(ln,{className:"w-4 h-4 text-gray-500"}),Ae.jsxs("span",{className:"text-sm text-gray-600",children:["Expires: ",Ju(new Date(e.expiry_date),"MMMM d, yyyy")]})]}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(wn,{className:"w-4 h-4 text-gray-500"}),Ae.jsxs("span",{className:"text-sm text-gray-600",children:["Optometrist: ",null==(r=e.optometrist)?void 0:r.name]})]}),n===e.id&&Ae.jsxs("div",{className:"mt-4 space-y-3 pt-3 border-t",children:[Ae.jsx("h4",{className:"font-medium text-sm mb-2",children:"Prescription Details:"}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ae.jsxs("div",{children:[Ae.jsx("h5",{className:"font-medium",children:"Right Eye (OD)"}),Ae.jsxs("p",{children:["Sphere: ",(null==(i=null==(s=e.prescription_data)?void 0:s.right_eye)?void 0:i.sphere)||"N/A"]}),Ae.jsxs("p",{children:["Cylinder: ",(null==(l=null==(o=e.prescription_data)?void 0:o.right_eye)?void 0:l.cylinder)||"N/A"]}),Ae.jsxs("p",{children:["Axis: ",(null==(m=null==(c=e.prescription_data)?void 0:c.right_eye)?void 0:m.axis)||"N/A"]}),Ae.jsxs("p",{children:["PD: ",(null==(f=null==(p=e.prescription_data)?void 0:p.right_eye)?void 0:f.pd)||"N/A"]})]}),Ae.jsxs("div",{children:[Ae.jsx("h5",{className:"font-medium",children:"Left Eye (OS)"}),Ae.jsxs("p",{children:["Sphere: ",(null==(y=null==(x=e.prescription_data)?void 0:x.left_eye)?void 0:y.sphere)||"N/A"]}),Ae.jsxs("p",{children:["Cylinder: ",(null==(g=null==(v=e.prescription_data)?void 0:v.left_eye)?void 0:g.cylinder)||"N/A"]}),Ae.jsxs("p",{children:["Axis: ",(null==(j=null==(b=e.prescription_data)?void 0:b.left_eye)?void 0:j.axis)||"N/A"]}),Ae.jsxs("p",{children:["PD: ",(null==(N=null==(w=e.prescription_data)?void 0:w.left_eye)?void 0:N.pd)||"N/A"]})]})]}),(null==(S=e.prescription_data)?void 0:S.vision_acuity)&&Ae.jsx("div",{className:"text-sm",children:Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Vision Acuity:"})," ",e.prescription_data.vision_acuity]})}),(null==(k=e.prescription_data)?void 0:k.additional_notes)&&Ae.jsx("div",{className:"text-sm",children:Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Notes:"})," ",e.prescription_data.additional_notes]})}),(null==(_=e.prescription_data)?void 0:_.recommendations)&&Ae.jsx("div",{className:"text-sm",children:Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Recommendations:"})," ",e.prescription_data.recommendations]})})]})]}),Ae.jsxs("div",{className:"mt-4 flex gap-2",children:[Ae.jsxs(Hc,{size:"sm",variant:"outline",onClick:()=>a(n===e.id?null:e.id),children:[n===e.id?"Hide":"View"," Details"]}),Ae.jsxs(Hc,{size:"sm",variant:"outline",onClick:()=>(e=>{var t,r,n,a,s,i,o,l,c,d;const h=`\nPRESCRIPTION\n\nPatient: ${null==(t=e.patient)?void 0:t.name}\nDate: ${Ju(new Date(e.issue_date),"MMMM d, yyyy")}\nExpires: ${Ju(new Date(e.expiry_date),"MMMM d, yyyy")}\nOptometrist: ${null==(r=e.optometrist)?void 0:r.name}\n\nType: ${u(e.type)}\n\nPRESCRIPTION DATA:\nRight Eye (OD):\n  Sphere: ${(null==(n=e.right_eye)?void 0:n.sphere)||"N/A"}\n  Cylinder: ${(null==(a=e.right_eye)?void 0:a.cylinder)||"N/A"}\n  Axis: ${(null==(s=e.right_eye)?void 0:s.axis)||"N/A"}\n  PD: ${(null==(i=e.right_eye)?void 0:i.pd)||"N/A"}\n\nLeft Eye (OS):\n  Sphere: ${(null==(o=e.left_eye)?void 0:o.sphere)||"N/A"}\n  Cylinder: ${(null==(l=e.left_eye)?void 0:l.cylinder)||"N/A"}\n  Axis: ${(null==(c=e.left_eye)?void 0:c.axis)||"N/A"}\n  PD: ${(null==(d=e.left_eye)?void 0:d.pd)||"N/A"}\n\nVision Acuity: ${e.vision_acuity||"N/A"}\n\nNotes: ${e.additional_notes||"None"}\n\nRecommendations: ${e.recommendations||"None"}\n\nStatus: ${e.status.toUpperCase()}\n    `.trim(),m=new Blob([h],{type:"text/plain"}),p=URL.createObjectURL(m),f=document.createElement("a");f.href=p,f.download=`prescription-${e.id}.txt`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(p)})(e),children:[Ae.jsx(bn,{className:"w-4 h-4 mr-1"}),"Download"]}),"active"===e.status&&!h(e.expiry_date)&&Ae.jsx(Hc,{size:"sm",variant:"outline",children:"Order Glasses"})]})]})},e.id)})}),Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Prescription Stats"})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{className:"text-sm",children:"Total Prescriptions"}),Ae.jsx("span",{className:"text-sm font-medium",children:t.length})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{className:"text-sm",children:"Active"}),Ae.jsx("span",{className:"text-sm font-medium",children:t.filter(e=>"active"===e.status&&!h(e.expiry_date)).length})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{className:"text-sm",children:"Expired"}),Ae.jsx("span",{className:"text-sm font-medium",children:t.filter(e=>h(e.expiry_date)).length})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{className:"text-sm",children:"Glasses"}),Ae.jsx("span",{className:"text-sm font-medium",children:t.filter(e=>"glasses"===e.type).length})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{className:"text-sm",children:"Contact Lenses"}),Ae.jsx("span",{className:"text-sm font-medium",children:t.filter(e=>"contact_lenses"===e.type).length})]})]})})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Quick Actions"})}),Ae.jsxs(sd,{className:"space-y-3",children:[Ae.jsxs(Hc,{className:"w-full",size:"sm",children:[Ae.jsx(ln,{className:"w-4 h-4 mr-2"}),"Schedule Eye Exam"]}),Ae.jsxs(Hc,{variant:"outline",className:"w-full",size:"sm",children:[Ae.jsx(wn,{className:"w-4 h-4 mr-2"}),"Order New Glasses"]}),Ae.jsxs(Hc,{variant:"outline",className:"w-full",size:"sm",children:[Ae.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Contact Optometrist"]})]})]})]})]})]})},_H=({product:e,isOpen:t,onClose:r,onReservationSuccess:n})=>{var a;const{user:s}=Rc(),[i,o]=Ct.useState(null),[l,c]=Ct.useState(1),[d,u]=Ct.useState(""),[h,m]=Ct.useState(!1),[p,f]=Ct.useState(null);Ct.useEffect(()=>{t&&(o(null),c(1),u(""),f(null))},[t]);const x=(null==(a=e.branch_availability)?void 0:a.filter(e=>e.is_available))||[],y=()=>{var t;if(!i)return 1;const r=null==(t=e.branch_availability)?void 0:t.find(e=>e.branch.id===i);return(null==r?void 0:r.available_quantity)||1};return t?Ae.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Ae.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:Ae.jsxs("div",{className:"p-6",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Ae.jsx("h2",{className:"text-xl font-bold",children:"Reserve Product"}),Ae.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),Ae.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[Ae.jsx("h3",{className:"font-semibold text-lg",children:e.name}),Ae.jsx("p",{className:"text-gray-600 text-sm mb-2",children:e.description}),Ae.jsxs("p",{className:"font-bold text-blue-600",children:["₱",Number(e.price||0).toFixed(2)]})]}),p&&Ae.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:p}),Ae.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),i)if(s){m(!0),f(null);try{const t=await fetch("http://192.168.100.6:8000/api/reservations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:sessionStorage.getItem("auth_token")?`Bearer ${sessionStorage.getItem("auth_token")}`:""},body:JSON.stringify({product_id:e.id,branch_id:i,quantity:l,notes:d||null})});if(!t.ok){const e=await t.json().catch(()=>null);throw new Error(e&&e.message||"Failed to create reservation")}n(),r(),alert("Reservation created successfully! You will be notified when it's ready for pickup.")}catch(a){console.error("Reservation error:",a),f(a instanceof Error?a.message:"Failed to create reservation")}finally{m(!1)}}else f("You must be logged in to make a reservation");else f("Please select a branch")},className:"space-y-4",children:[Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Branch *"}),Ae.jsxs("select",{value:i||"",onChange:e=>o(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[Ae.jsx("option",{value:"",children:"Choose a branch..."}),x.map(e=>Ae.jsxs("option",{value:e.branch.id,children:[e.branch.name," - ",e.available_quantity," available"]},e.branch.id))]})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),Ae.jsx("input",{type:"number",min:"1",max:y(),value:l,onChange:e=>c(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),Ae.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: ",y()," pieces"]})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),Ae.jsx("textarea",{value:d,onChange:e=>u(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Any special requests or notes..."})]}),i&&Ae.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:(()=>{var t;const r=null==(t=e.branch_availability)?void 0:t.find(e=>e.branch.id===i),n=null==r?void 0:r.branch;return n?Ae.jsxs("div",{children:[Ae.jsx("h4",{className:"font-medium text-blue-800",children:n.name}),Ae.jsx("p",{className:"text-sm text-blue-600",children:n.address}),n.phone&&Ae.jsxs("p",{className:"text-sm text-blue-600",children:["Phone: ",n.phone]})]}):null})()}),Ae.jsxs("div",{className:"flex space-x-3 pt-4",children:[Ae.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),Ae.jsx("button",{type:"submit",disabled:h||!i,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:h?"Creating...":"Reserve Product"})]})]}),Ae.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:Ae.jsxs("p",{className:"text-sm text-yellow-800",children:[Ae.jsx("strong",{children:"Important:"})," This is a reservation only. You must visit the branch to complete your purchase and pay physically. No online payment is available."]})})]})})}):null},OH=e=>{if(!e)return"";if(e.startsWith("http"))return e;if(e.startsWith("data:"))return e;return`${"http://192.168.100.6:8000/api".replace("/api","")}/storage/${e.startsWith("/")?e.substring(1):e}`},CH=()=>{const e=Date.now(),t=sessionStorage.getItem("lastProductDeletion"),r=e-12e4;return t&&parseInt(t)>r},AH=()=>{sessionStorage.removeItem("lastProductDeletion")},EH=e=>{const t=new CustomEvent("productDeleted",{detail:{productId:e}});window.dispatchEvent(t),(()=>{try{Object.keys(localStorage).forEach(e=>{(e.includes("products")||e.includes("app_data_p")||e.includes("localStorage_products"))&&localStorage.removeItem(e)}),Object.keys(sessionStorage).forEach(e=>{(e.includes("products")||e.includes("app_data_p"))&&sessionStorage.removeItem(e)}),console.log("Product caches cleared after deletion")}catch(e){console.error("Error clearing product caches:",e)}})(),sessionStorage.setItem("lastProductDeletion",Date.now().toString())},PH=()=>{const{user:e}=Rc(),t=null==e?void 0:e.role,{data:r=[]}=ho({queryKey:["activeBranches"],queryFn:Tp}),n=e=>e.name,[a,s]=Ct.useState([]),[i,o]=Ct.useState([]),[l,c]=Ct.useState(!1),[d,u]=Ct.useState(!1),[h,m]=Ct.useState(null),[p,f]=Ct.useState(""),[x,y]=Ct.useState("all"),[v,g]=Ct.useState("all"),[b,j]=Ct.useState("all"),[w,N]=Ct.useState(null),[S,k]=Ct.useState(!1),[_,O]=Ct.useState({}),[C,A]=Ct.useState({}),[E,P]=Ct.useState(null),[T,M]=Ct.useState(null),[D,I]=Ct.useState({}),R=e=>{M(null),P(e.targetTouches[0].clientX)},F=e=>{M(e.targetTouches[0].clientX)};Ct.useEffect(()=>{L()},[]),Ct.useEffect(()=>{B(!1);const e=setInterval(()=>{CH()||B(!0)},3e4),t=e=>{console.log("Product deleted, refreshing gallery:",e.detail.productId),B(!0)};return window.addEventListener("productDeleted",t),()=>{clearInterval(e),window.removeEventListener("productDeleted",t)}},[]);const L=async()=>{try{const e=await fetch("http://127.0.0.1:8000/api/product-categories");if(e.ok){const t=await e.json();o(t.categories||[])}}catch(e){console.error("Failed to fetch categories:",e)}},B=async(e=!1)=>{try{e||d||(c(!0),m(null));const t=Date.now(),r=await Np(p),n=Date.now()-t;console.log(`Products loaded in ${n}ms`),s(r)}catch(t){console.error("Failed to fetch products:",t),m("Failed to load products. Please try again.")}finally{e||d||c(!1),d||u(!0)}};Ct.useEffect(()=>{const e=setTimeout(()=>{CH()||B(!0)},500);return()=>clearTimeout(e)},[p]);const q=At.useMemo(()=>a.filter(e=>{var t,r,n;const a=""===p||e.name.toLowerCase().includes(p.toLowerCase())||(null==(t=e.description)?void 0:t.toLowerCase().includes(p.toLowerCase())),s="all"===x||(null==(r=e.category_id)?void 0:r.toString())===x,i=((null==(n=e.category_details)?void 0:n.name)||e.category||"").toString().toLowerCase(),o=`${e.name} ${e.model||""} ${e.description||""}`.toLowerCase();let l=!0;"frames"===v?l=i.includes("frame")||o.includes("frame"):"contact_lenses"===v?l=i.includes("contact")||o.includes("contact lens")||o.includes("contacts"):"eye_care"===v?l=i.includes("care")||i.includes("solution")||o.includes("solution")||o.includes("drop")||o.includes("cleaner"):"sunglasses"===v&&(l=i.includes("sunglass")||o.includes("sunglass")||o.includes("sun glasses"));let c=!0;return"frames"===v&&"all"!==b&&(c="cat-eye"===b?o.includes("cat eye")||o.includes("cateye"):o.includes(b)),a&&s&&l&&c}),[a,p,x,v,b]),z=r,$=(e,t)=>{if(!e.branch_availability)return"Not available";const r=e.branch_availability.find(e=>e.branch.code===t);return r?r.is_available?`${r.available_quantity} pcs`:"Out of Stock":"Not available"},U=(e,t)=>{if(!e.branch_availability)return"text-gray-500";const r=e.branch_availability.find(e=>e.branch.code===t);return r&&r.is_available?r.available_quantity<5?"text-yellow-600 font-semibold":"text-green-600 font-semibold":"text-red-500 font-semibold"};return Ae.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[Ae.jsx("style",{children:"\n        .scrollbar-hide {\n          -ms-overflow-style: none;\n          scrollbar-width: none;\n        }\n        .scrollbar-hide::-webkit-scrollbar {\n          display: none;\n        }\n        .cursor-zoom-in {\n          cursor: pointer;\n        }\n        .cursor-zoom-in:hover {\n          cursor: zoom-in;\n        }\n      "}),h&&Ae.jsx("div",{className:"max-w-4xl mx-auto mb-6",children:Ae.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl shadow-sm",children:Ae.jsxs("div",{className:"flex items-center",children:[Ae.jsx("svg",{className:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:Ae.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),h]})})}),Ae.jsx("div",{className:"max-w-7xl mx-auto mb-8",children:Ae.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6",children:Ae.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[Ae.jsxs("div",{className:"flex-1 relative",children:[Ae.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:Ae.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),Ae.jsx("input",{type:"text",placeholder:"Search for glasses, lenses, or eye care products...",value:p,onChange:e=>f(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm transition-all duration-200"})]}),Ae.jsxs("div",{className:"flex gap-2",children:[Ae.jsxs("button",{onClick:async()=>{AH(),await B(!1)},disabled:l,className:"px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[Ae.jsx(Vn,{className:"h-4 w-4 "+(l?"animate-spin":"")}),"Refresh"]}),p&&Ae.jsx("button",{onClick:()=>f(""),className:"px-4 py-3 text-gray-500 hover:text-gray-700 transition-colors",children:"Clear"})]})]})})}),Ae.jsx("div",{className:"max-w-7xl mx-auto mb-4",children:Ae.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-4",children:[Ae.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ae.jsx("button",{onClick:()=>{g("all"),j("all")},className:"px-3 py-2 rounded-lg text-sm font-medium "+("all"===v?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:"All"}),Ae.jsx("button",{onClick:()=>g("frames"),className:"px-3 py-2 rounded-lg text-sm font-medium "+("frames"===v?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:"Frames"}),Ae.jsx("button",{onClick:()=>{g("contact_lenses"),j("all")},className:"px-3 py-2 rounded-lg text-sm font-medium "+("contact_lenses"===v?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:"Contact Lenses"}),Ae.jsx("button",{onClick:()=>{g("eye_care"),j("all")},className:"px-3 py-2 rounded-lg text-sm font-medium "+("eye_care"===v?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:"Eye Care Products"}),Ae.jsx("button",{onClick:()=>{g("sunglasses"),j("all")},className:"px-3 py-2 rounded-lg text-sm font-medium "+("sunglasses"===v?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:"Sunglasses"})]}),"frames"===v&&Ae.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:["all","round","square","rectangle","cat-eye","aviator"].map(e=>Ae.jsx("button",{onClick:()=>j(e),className:"px-3 py-1.5 rounded-full text-xs font-medium "+(b===e?"bg-purple-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:"all"===e?"All Shapes":e.replace("-"," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})]})}),i.length>0&&Ae.jsx("div",{className:"max-w-7xl mx-auto mb-8",children:Ae.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6",children:[Ae.jsxs("div",{className:"flex items-center mb-4",children:[Ae.jsx("svg",{className:"w-5 h-5 text-gray-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),Ae.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Browse by Category"})]}),Ae.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:[Ae.jsx("button",{onClick:()=>y("all"),className:"flex-shrink-0 px-4 py-2 rounded-lg font-medium transition-all duration-200 "+("all"===x?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg transform scale-105":"bg-white hover:bg-gray-50 text-gray-700 border border-gray-200"),children:"All Products"}),i.map(e=>Ae.jsxs("button",{onClick:()=>y(e.id.toString()),className:"flex-shrink-0 px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 "+(x===e.id.toString()?"text-white shadow-lg transform scale-105":"bg-white hover:bg-gray-50 text-gray-700 border border-gray-200"),style:{backgroundColor:x===e.id.toString()?e.color:void 0},children:[Ae.jsx("span",{className:"text-lg",children:e.icon}),Ae.jsx("span",{children:e.name}),e.product_count>0&&Ae.jsx("span",{className:"ml-1 px-2 py-0.5 rounded-full text-xs "+(x===e.id.toString()?"bg-white/20 text-white":"bg-gray-100 text-gray-600"),children:e.product_count})]},e.id))]})]})}),l&&Ae.jsx("div",{className:"max-w-4xl mx-auto",children:Ae.jsxs("div",{className:"text-center py-16",children:[Ae.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full mb-6",children:Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-white border-t-transparent"})}),Ae.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Loading Products"}),Ae.jsx("p",{className:"text-gray-500",children:"Discovering the perfect eye care solutions for you..."})]})}),Ae.jsx("div",{className:"max-w-7xl mx-auto",children:Ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:q.map(e=>{var r,a,s,o;return Ae.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-gray-100 hover:border-blue-200 transform hover:-translate-y-1",children:[e.image_paths&&e.image_paths.length>0?Ae.jsxs("div",{className:"relative",children:[Ae.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100 rounded-t-2xl focus-within:ring-2 focus-within:ring-blue-500 select-none cursor-zoom-in",tabIndex:0,onKeyDown:t=>{if(e.image_paths.length>1){const r=_[e.id]||0;if("ArrowLeft"===t.key){t.preventDefault();const n=r>0?r-1:e.image_paths.length-1;O(t=>({...t,[e.id]:n}))}else if("ArrowRight"===t.key){t.preventDefault();const n=r<e.image_paths.length-1?r+1:0;O(t=>({...t,[e.id]:n}))}}},onTouchStart:R,onTouchMove:F,onTouchEnd:()=>((e,t)=>{if(!E||!T)return;const r=E-T,n=r>50,a=r<-50;if(n||a){const r=_[e]||0;let s=r;n?s=r<t-1?r+1:0:a&&(s=r>0?r-1:t-1),O(t=>({...t,[e]:s}))}})(e.id,e.image_paths.length),onMouseEnter:()=>{return t=e.id,void I(e=>({...e,[t]:{isZooming:!0,x:50,y:50}}));var t},onMouseLeave:()=>{return t=e.id,void I(e=>({...e,[t]:{isZooming:!1,x:50,y:50}}));var t},children:[Ae.jsx("img",{src:OH(e.image_paths[_[e.id]||0]),alt:`${e.name} cover`,className:"w-full h-full object-contain transition-all duration-300",style:{transform:(null==(r=D[e.id])?void 0:r.isZooming)?"scale(1.25)":"scale(1)",transformOrigin:"center center"},onError:t=>{t.currentTarget.src="https://via.placeholder.com/400x300/f3f4f6/9ca3af?text="+encodeURIComponent(e.name)}}),(null==(a=D[e.id])?void 0:a.isZooming)&&Ae.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 pointer-events-none transition-opacity duration-300"}),Ae.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.image_paths.length>1&&Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("button",{onClick:t=>{t.stopPropagation();const r=_[e.id]||0,n=r>0?r-1:e.image_paths.length-1;O(t=>({...t,[e.id]:n}))},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white/95 text-gray-700 rounded-full p-2 shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-200 hover:scale-110",children:Ae.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),Ae.jsx("button",{onClick:t=>{t.stopPropagation();const r=_[e.id]||0,n=r<e.image_paths.length-1?r+1:0;O(t=>({...t,[e.id]:n}))},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white/95 text-gray-700 rounded-full p-2 shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-200 hover:scale-110",children:Ae.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),Ae.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded-full",children:[(_[e.id]||0)+1," / ",e.image_paths.length]})]}),!(null==(s=D[e.id])?void 0:s.isZooming)&&Ae.jsxs("div",{className:"absolute top-3 right-3 bg-white/80 backdrop-blur-sm text-gray-700 text-xs px-2 py-1 rounded-md opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center space-x-1 shadow-sm",children:[Ae.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}),Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9"})]}),Ae.jsx("span",{children:"Hover to zoom"})]}),(null==(o=D[e.id])?void 0:o.isZooming)&&Ae.jsxs("div",{className:"absolute top-3 right-3 bg-blue-500/90 backdrop-blur-sm text-white text-xs px-2 py-1 rounded-md flex items-center space-x-1 shadow-lg",children:[Ae.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),Ae.jsx("span",{children:"1.25x Zoom"})]})]}),e.image_paths.length>1&&Ae.jsx("div",{className:"px-4 py-3 bg-gray-50/50",children:Ae.jsx("div",{className:"flex space-x-2 overflow-x-auto scrollbar-hide",children:e.image_paths.map((t,r)=>Ae.jsxs("button",{onClick:t=>{t.stopPropagation(),O(t=>({...t,[e.id]:r}))},className:"flex-shrink-0 relative group/thumb transition-all duration-200 "+((_[e.id]||0)===r?"transform scale-110":"hover:scale-105"),children:[Ae.jsx("img",{src:OH(t),alt:`${e.name} ${r+1}`,className:"w-16 h-16 object-cover rounded-lg border-2 transition-all duration-200 "+((_[e.id]||0)===r?"border-blue-500 ring-2 ring-blue-200 shadow-lg":"border-gray-200 hover:border-blue-300 hover:shadow-md"),onError:e=>{e.currentTarget.src="https://via.placeholder.com/64x64/f3f4f6/9ca3af?text=N/A"}}),(_[e.id]||0)===r&&Ae.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:Ae.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:Ae.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},r))})})]}):Ae.jsx("div",{className:"aspect-[4/3] bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center text-gray-400",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Ae.jsx("p",{className:"text-sm",children:"No Image Available"})]})}),Ae.jsxs("div",{className:"p-6",children:[Ae.jsxs("div",{className:"mb-4",children:[e.category_id&&i.find(t=>t.id===e.category_id)&&Ae.jsx("div",{className:"mb-3",children:(()=>{const t=i.find(t=>t.id===e.category_id);return t?Ae.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium text-white shadow-sm",style:{backgroundColor:t.color},children:[Ae.jsx("span",{children:t.icon}),Ae.jsx("span",{children:t.name})]}):null})()}),Ae.jsx("h3",{className:"font-bold text-xl text-gray-800 mb-2 group-hover:text-blue-600 transition-colors duration-200",children:e.name}),Ae.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-3",children:e.description}),Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsx("div",{className:"flex items-baseline",children:Ae.jsxs("span",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:["₱",Number(e.price||0).toFixed(2)]})}),Ae.jsxs("div",{className:"flex items-center space-x-1",children:[Ae.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),Ae.jsx("span",{className:"text-xs text-gray-500",children:"Available"})]})]})]}),Ae.jsxs("div",{className:"mb-6",children:[Ae.jsxs("button",{onClick:()=>A(t=>({...t,[e.id]:!t[e.id]})),className:"flex items-center justify-between w-full p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200 text-sm font-medium text-gray-700",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Ae.jsx("span",{children:C[e.id]?"Hide branch availability":"Check branch availability"})]}),Ae.jsx("svg",{className:"w-4 h-4 transition-transform duration-200 "+(C[e.id]?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),C[e.id]&&Ae.jsx("div",{className:"mt-3 space-y-2 bg-white border border-gray-100 rounded-lg p-3",children:z.map(t=>Ae.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-50 last:border-b-0",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),Ae.jsx("span",{className:"text-sm font-medium text-gray-700",children:n(t)})]}),Ae.jsx("span",{className:`text-sm font-semibold px-2 py-1 rounded-full ${U(e,t.code)}`,children:$(e,t.code)})]},t.id))})]}),"customer"===t&&Ae.jsx("div",{className:"space-y-3",children:e.branch_availability&&e.branch_availability.some(e=>e.is_available)?Ae.jsxs("button",{onClick:()=>(e=>{N(e),k(!0)})(e),className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 flex items-center justify-center space-x-2",children:[Ae.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),Ae.jsx("span",{children:"Reserve Product"})]}):Ae.jsxs("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-500 font-semibold py-3 px-6 rounded-xl cursor-not-allowed flex items-center justify-center space-x-2",children:[Ae.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})}),Ae.jsx("span",{children:"Out of Stock"})]})})]})]},e.id)})})}),0===q.length&&!l&&Ae.jsx("div",{className:"max-w-4xl mx-auto",children:Ae.jsxs("div",{className:"text-center py-16",children:[Ae.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-gray-100 to-gray-200 rounded-full mb-6",children:Ae.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),Ae.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-3",children:"No Products Found"}),Ae.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:p?`We couldn't find any products matching "${p}". Try adjusting your search terms.`:"No products are currently available. Please check back later."}),p&&Ae.jsxs("button",{onClick:()=>f(""),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[Ae.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ae.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Clear Search"]})]})}),w&&Ae.jsx(_H,{product:w,isOpen:S,onClose:()=>{k(!1),N(null)},onReservationSuccess:()=>{CH()||B()}})]})},TH="reservations",MH=()=>{const{productId:e}=Bt(),t=Dt(),[r,n]=Ct.useState(null),[a,s]=Ct.useState(0);Ct.useEffect(()=>{if(!e)return;const t=localStorage.getItem("localStorage_products");if(t)try{const r=JSON.parse(t).find(t=>t.id===e);if(r){const e={id:r.id||"",name:r.name||"",model:r.model||"",description:r.description||"",price:r.price||0,images:r.imageDataUrls||r.images||[],badges:r.badges||[],options:r.options||{prescription:!1}};n(e)}}catch(r){console.error("Error parsing products from localStorage:",r)}},[e]);return r?Ae.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[Ae.jsx("button",{onClick:()=>t("/customer/products"),className:"mb-4 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Back to Gallery"}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[Ae.jsxs("div",{children:[Ae.jsx("div",{className:"mb-4",children:r.images.length>0?Ae.jsx("img",{src:r.images[a],alt:`${r.name} ${a+1}`,className:"w-full h-96 object-cover rounded"}):Ae.jsx("div",{className:"w-full h-96 bg-gray-200 flex items-center justify-center text-gray-500 rounded",children:"No Image"})}),r.images.length>1&&Ae.jsx("div",{className:"flex gap-2 overflow-x-auto",children:r.images.map((e,t)=>Ae.jsx("img",{src:e,alt:`Thumbnail ${t+1}`,className:"w-20 h-20 object-cover rounded cursor-pointer border-2 "+(t===a?"border-blue-500":"border-gray-300"),onClick:()=>s(t)},t))})]}),Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-3xl font-bold mb-2",children:r.name}),Ae.jsx("p",{className:"text-lg text-gray-600 mb-4",children:r.model}),Ae.jsx("div",{className:"mb-4 flex flex-wrap gap-2",children:r.badges.map((e,t)=>Ae.jsx("span",{className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded",children:e},t))}),Ae.jsxs("p",{className:"text-2xl font-bold mb-4",children:["₱",Number(r.price||0).toFixed(2)]}),Ae.jsx("p",{className:"text-gray-700 mb-6",children:r.description}),Ae.jsxs("div",{className:"mb-6",children:[Ae.jsx("h3",{className:"font-semibold mb-2",children:"Options:"}),Ae.jsxs("ul",{className:"space-y-1",children:[r.options.color&&Ae.jsxs("li",{children:["Color: ",r.options.color]}),Ae.jsxs("li",{children:["Type: ",r.options.prescription?"Prescription":"Non-Prescription"]})]})]}),Ae.jsx("button",{onClick:()=>{if(!r)return;const e=localStorage.getItem(TH);let n=[];if(e)try{n=JSON.parse(e)}catch(s){console.error("Error parsing reservations:",s)}const a=n.findIndex(e=>e.productId===r.id);a>=0?n[a].quantity+=1:n.push({productId:r.id,quantity:1}),localStorage.setItem(TH,JSON.stringify(n)),t("/customer/reservations")},className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold",children:"Reserve the Item"})]})]})]}):Ae.jsx("div",{className:"p-4",children:"Product not found."})},DH="reservations",IH=()=>{const e=Dt(),[t,r]=Ct.useState([]),[n,a]=Ct.useState([]),[s,i]=Ct.useState(!1);Ct.useEffect(()=>{const e=localStorage.getItem(DH);if(e)try{r(JSON.parse(e))}catch(n){console.error("Error parsing reservations:",n)}const t=localStorage.getItem("localStorage_products");if(t)try{const e=JSON.parse(t).map(e=>({id:e.id||"",name:e.name||"",model:e.model||"",description:e.description||"",price:e.price||0,images:e.imageDataUrls||e.images||[],badges:e.badges||[],options:e.options||{prescription:!1}}));a(e)}catch(n){console.error("Error parsing products:",n)}},[]);const o=e=>n.find(t=>t.id===e);return s?Ae.jsxs("div",{className:"p-4 max-w-2xl mx-auto text-center",children:[Ae.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:[Ae.jsx("h2",{className:"text-xl font-bold",children:"Reservation Confirmed!"}),Ae.jsx("p",{children:"Your reservation has been successfully confirmed. Thank you for your purchase."})]}),Ae.jsx("button",{onClick:()=>e("/customer/products"),className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Back to Products"})]}):Ae.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[Ae.jsx("h2",{className:"text-2xl font-bold mb-4",children:"My Reservations"}),0===t.length?Ae.jsx("p",{className:"text-center text-gray-500",children:"No reservations yet."}):Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("div",{className:"space-y-4 mb-6",children:t.map(e=>{const t=o(e.productId);return t?Ae.jsxs("div",{className:"border rounded-lg p-4 flex items-center gap-4",children:[Ae.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:t.images.length>0?Ae.jsx("img",{src:t.images[0],alt:t.name,className:"w-full h-full object-cover rounded"}):Ae.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center text-gray-500 rounded",children:"No Image"})}),Ae.jsxs("div",{className:"flex-grow",children:[Ae.jsx("h3",{className:"font-semibold",children:t.name}),Ae.jsx("p",{className:"text-sm text-gray-600",children:t.model}),Ae.jsxs("p",{className:"font-bold",children:["₱",Number(t.price||0).toFixed(2)]}),Ae.jsxs("p",{className:"text-sm",children:["Quantity: ",e.quantity]})]}),Ae.jsx("div",{className:"text-right",children:Ae.jsxs("p",{className:"font-bold",children:["₱",(t.price*e.quantity).toFixed(2)]})})]},e.productId):null})}),Ae.jsx("div",{className:"border-t pt-4 mb-6",children:Ae.jsxs("div",{className:"flex justify-between items-center text-xl font-bold",children:[Ae.jsx("span",{children:"Total:"}),Ae.jsxs("span",{children:["₱",t.reduce((e,t)=>{const r=o(t.productId);return e+(r?r.price*t.quantity:0)},0).toFixed(2)]})]})}),Ae.jsx("div",{className:"text-center",children:Ae.jsx("button",{onClick:()=>{localStorage.removeItem(DH),r([]),i(!0),setTimeout(()=>i(!1),3e3)},className:"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold",children:"Confirm Reservation"})})]}),Ae.jsx("div",{className:"mt-6 text-center",children:Ae.jsx("button",{onClick:()=>e("/customer/products"),className:"px-6 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Back to Products"})})]})};class RH extends Ct.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?Ae.jsx("div",{className:"p-4",children:Ae.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[Ae.jsx("h2",{className:"font-bold text-lg mb-2",children:"Something went wrong!"}),Ae.jsx("p",{className:"mb-2",children:"The Product Gallery component encountered an error."}),this.state.error&&Ae.jsxs("details",{className:"mt-4",children:[Ae.jsx("summary",{className:"cursor-pointer font-semibold",children:"Error Details"}),Ae.jsxs("div",{className:"mt-2 p-2 bg-red-50 rounded text-sm",children:[Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Error:"})," ",this.state.error.message]}),Ae.jsx("pre",{className:"mt-2 text-xs overflow-auto",children:this.state.error.stack})]})]}),Ae.jsx("div",{className:"mt-4",children:Ae.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"Reload Page"})})]})}):this.props.children}}const FH=()=>{const{user:e}=Rc(),[t,r]=Ct.useState([]),[n,a]=Ct.useState(!0),[s,i]=Ct.useState(null),[o,l]=Ct.useState("all"),[c,d]=Ct.useState(null);Ct.useEffect(()=>{u()},[o]);const u=async()=>{try{a(!0),i(null);const e="http://192.168.100.6:8000/api",t=sessionStorage.getItem("auth_token");let n=`${e}/reservations`;"all"!==o&&(n+=`?status=${o}`);const s=await fetch(n,{headers:{Authorization:t?`Bearer ${t}`:""}});if(!s.ok)throw new Error("Failed to fetch reservations");const l=await s.json();r(l)}catch(e){console.error("Error fetching reservations:",e),i("Failed to load reservations")}finally{a(!1)}},h=async(e,t)=>{try{d(e);const r="http://192.168.100.6:8000/api",n=sessionStorage.getItem("auth_token"),a=await fetch(`${r}/reservations/${e}/${t}`,{method:"PUT",headers:{Authorization:n?`Bearer ${n}`:""}});if(!a.ok){const e=await a.json();throw new Error(e.message||`Failed to ${t} reservation`)}await u(),alert(`Reservation ${t}d successfully!`)}catch(r){console.error(`Error ${t}ing reservation:`,r),alert(r instanceof Error?r.message:`Failed to ${t} reservation`)}finally{d(null)}},m=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},p=e=>{switch(e.status){case"pending":return Ae.jsxs("div",{className:"flex space-x-2",children:[Ae.jsx("button",{onClick:()=>h(e.id,"approve"),disabled:c===e.id,className:"px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600 disabled:bg-gray-400",children:c===e.id?"Processing...":"Approve"}),Ae.jsx("button",{onClick:()=>h(e.id,"reject"),disabled:c===e.id,className:"px-3 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600 disabled:bg-gray-400",children:c===e.id?"Processing...":"Reject"})]});case"approved":return Ae.jsx("button",{onClick:()=>h(e.id,"complete"),disabled:c===e.id,className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 disabled:bg-gray-400",children:c===e.id?"Processing...":"Mark Complete"});default:return Ae.jsx("span",{className:"text-gray-500 text-sm",children:"No actions available"})}};return n?Ae.jsx("div",{className:"p-4",children:Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),Ae.jsx("p",{className:"mt-2",children:"Loading reservations..."})]})}):Ae.jsxs("div",{className:"p-4",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ae.jsx("h2",{className:"text-2xl font-bold",children:"Branch Reservations"}),Ae.jsx("div",{className:"text-sm text-gray-600",children:(null==e?void 0:e.branch_name)||"Your Branch"})]}),s&&Ae.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:s}),Ae.jsx("div",{className:"mb-6",children:Ae.jsxs("select",{value:o,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Ae.jsx("option",{value:"all",children:"All Reservations"}),Ae.jsx("option",{value:"pending",children:"Pending"}),Ae.jsx("option",{value:"approved",children:"Approved"}),Ae.jsx("option",{value:"rejected",children:"Rejected"}),Ae.jsx("option",{value:"completed",children:"Completed"})]})}),Ae.jsx("div",{className:"space-y-4",children:0===t.length?Ae.jsx("div",{className:"text-center py-8 text-gray-500",children:Ae.jsx("p",{children:"No reservations found for your branch."})}):t.map(e=>{return Ae.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:Ae.jsxs("div",{className:"flex items-start space-x-4",children:[Ae.jsx("div",{className:"flex-shrink-0",children:e.product.image_paths&&e.product.image_paths.length>0?Ae.jsx("img",{src:(r=e.product.image_paths[0],`${"http://192.168.100.6:8000/api".replace("/api","")}/storage/${r.startsWith("/")?r.substring(1):r}`),alt:e.product.name,className:"w-16 h-16 object-cover rounded border",onError:e=>{e.currentTarget.style.display="none"}}):Ae.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded border flex items-center justify-center text-gray-500 text-xs",children:"No Image"})}),Ae.jsx("div",{className:"flex-1 min-w-0",children:Ae.jsxs("div",{className:"flex items-start justify-between",children:[Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"font-semibold text-lg",children:e.product.name}),Ae.jsx("p",{className:"text-gray-600 text-sm mb-2",children:e.product.description}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Customer:"})," ",e.user.name]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Email:"})," ",e.user.email]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Quantity:"})," ",e.quantity]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Price:"})," ₱",Number(e.product.price).toFixed(2)]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Total:"})," ₱",(e.quantity*Number(e.product.price)).toFixed(2)]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Reserved:"})," ",(t=e.reserved_at,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})]}),e.notes&&Ae.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[Ae.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.notes]})]}),Ae.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[Ae.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),p(e)]})]})})]})},e.id);var t,r})}),Ae.jsxs("div",{className:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-4",children:[Ae.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[Ae.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.filter(e=>"pending"===e.status).length}),Ae.jsx("div",{className:"text-sm text-yellow-700",children:"Pending"})]}),Ae.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[Ae.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.filter(e=>"approved"===e.status).length}),Ae.jsx("div",{className:"text-sm text-blue-700",children:"Approved"})]}),Ae.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[Ae.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(e=>"completed"===e.status).length}),Ae.jsx("div",{className:"text-sm text-green-700",children:"Completed"})]}),Ae.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[Ae.jsx("div",{className:"text-2xl font-bold text-gray-600",children:t.length}),Ae.jsx("div",{className:"text-sm text-gray-700",children:"Total"})]})]})]})},LH=Cc.create({baseURL:"http://192.168.100.6:8000/api",headers:{"Content-Type":"application/json"}});LH.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const BH=async e=>{const t=new URLSearchParams;(null==e?void 0:e.status)&&"all"!==e.status&&t.append("status",e.status),(null==e?void 0:e.branch_id)&&t.append("branch_id",e.branch_id.toString()),(null==e?void 0:e.date_from)&&t.append("date_from",e.date_from),(null==e?void 0:e.date_to)&&t.append("date_to",e.date_to);return(await LH.get(`/transactions?${t.toString()}`)).data},qH=async e=>(await LH.post("/transactions",e)).data,zH=async(e,t)=>(await LH.post(`/transactions/${e}/finalize`,t)).data,$H=async e=>{const t=new URLSearchParams;(null==e?void 0:e.status)&&"all"!==e.status&&t.append("status",e.status),(null==e?void 0:e.date_from)&&t.append("date_from",e.date_from),(null==e?void 0:e.date_to)&&t.append("date_to",e.date_to);return(await LH.get(`/customer/transactions?${t.toString()}`)).data},UH=async(e,t,r)=>{const n=new URLSearchParams;e&&n.append("date_from",e),t&&n.append("date_to",t),r&&n.append("branch_id",r.toString());return(await LH.get(`/admin/transactions/analytics?${n.toString()}`)).data},VH=async e=>(await LH.get(`/transactions/${e}/receipt/download`,{responseType:"blob"})).data,WH=({transactions:e})=>{const t=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e),r=e.filter(e=>e.reservation);return 0===r.length?Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(Ln,{className:"w-5 h-5"}),Ae.jsx("span",{children:"Reserved Products"})]})}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No products have been reserved yet."})})]}):Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(Ln,{className:"w-5 h-5"}),Ae.jsx("span",{children:"Reserved Products from Gallery"})]})}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>{var r,n,a,s,i,o,l,c,d,u,h,m,p,f;return Ae.jsxs("div",{className:"border rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[Ae.jsxs("div",{className:"aspect-square bg-gray-100 relative",children:[Ae.jsx("img",{src:(f=null==(r=e.reservation)?void 0:r.product,(null==f?void 0:f.image_url)||(null==f?void 0:f.image)||"/placeholder-product.jpg"),alt:null==(n=e.reservation)?void 0:n.product.name,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/placeholder-product.jpg"}}),Ae.jsx("div",{className:"absolute top-2 right-2",children:Ae.jsxs(Yd,{variant:"secondary",className:"bg-white/90",children:[null==(a=e.reservation)?void 0:a.quantity,"x"]})})]}),Ae.jsxs("div",{className:"p-4",children:[Ae.jsx("h3",{className:"font-medium text-lg mb-2 line-clamp-2",children:null==(s=e.reservation)?void 0:s.product.name}),Ae.jsxs("div",{className:"space-y-2 mb-4",children:[Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsx("span",{className:"text-sm text-muted-foreground",children:"Price:"}),Ae.jsx("span",{className:"font-medium",children:t((null==(i=e.reservation)?void 0:i.product.price)||0)})]}),Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsx("span",{className:"text-sm text-muted-foreground",children:"Quantity:"}),Ae.jsx("span",{className:"font-medium",children:null==(o=e.reservation)?void 0:o.quantity})]}),Ae.jsxs("div",{className:"flex justify-between items-center border-t pt-2",children:[Ae.jsx("span",{className:"text-sm font-medium",children:"Total:"}),Ae.jsx("span",{className:"font-bold text-lg",children:t(((null==(l=e.reservation)?void 0:l.product.price)||0)*((null==(c=e.reservation)?void 0:c.quantity)||0))})]})]}),Ae.jsxs("div",{className:"space-y-1 mb-4",children:[(null==(u=null==(d=e.reservation)?void 0:d.product)?void 0:u.brand)&&Ae.jsxs("p",{className:"text-xs text-muted-foreground",children:["Brand: ",e.reservation.product.brand]}),(null==(m=null==(h=e.reservation)?void 0:h.product)?void 0:m.category)&&Ae.jsxs("p",{className:"text-xs text-muted-foreground",children:["Category: ",e.reservation.product.category.name]})]}),Ae.jsxs("div",{className:"border-t pt-3",children:[Ae.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-2",children:[Ae.jsxs("span",{children:["Transaction: ",e.transaction_code]}),Ae.jsx("span",{children:(p=e.created_at,new Date(p).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}))})]}),Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsx(Yd,{variant:"outline",className:"text-xs",children:e.status}),Ae.jsx(Yd,{variant:"secondary",className:"text-xs",children:e.payment_method})]})]}),e.appointment&&Ae.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded border border-blue-200",children:[Ae.jsxs("div",{className:"flex items-center space-x-2 text-xs text-blue-700",children:[Ae.jsx(wn,{className:"w-3 h-3"}),Ae.jsx("span",{children:"Eye Examination included"})]}),e.appointment.optometrist&&Ae.jsx("p",{className:"text-xs text-blue-600 mt-1",children:e.appointment.optometrist.name})]})]})]},e.id)})}),Ae.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium",children:"Total Products Reserved:"}),Ae.jsx("p",{className:"text-2xl font-bold",children:r.reduce((e,t)=>{var r;return e+((null==(r=t.reservation)?void 0:r.quantity)||0)},0)})]}),Ae.jsxs("div",{className:"text-right",children:[Ae.jsx("p",{className:"text-sm font-medium",children:"Total Value:"}),Ae.jsx("p",{className:"text-2xl font-bold",children:t(r.reduce((e,t)=>{var r,n;return e+((null==(r=t.reservation)?void 0:r.product.price)||0)*((null==(n=t.reservation)?void 0:n.quantity)||0)},0))})]})]})})]})]})},HH=()=>{Rc();const{toast:e}=Jt(),[t,r]=Ct.useState([]),[n,a]=Ct.useState(null),[s,i]=Ct.useState(!0),[o,l]=Ct.useState(""),[c,d]=Ct.useState(!1);Ct.useEffect(()=>{u()},[]);const u=async()=>{try{i(!0);const e="http://192.168.100.6:8000/api",t=await fetch(`${e}/transactions/patients`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch patient transactions");const n=await t.json();r(n.patients||[])}catch(t){e({title:"Error",description:"Failed to load patient transactions",variant:"destructive"})}finally{i(!1)}},h=e=>{const t=[];if(e.reservation&&e.reservation.product){const r=e.reservation.product;let n=r.name||"Product";r.brand&&(n+=` - Brand: ${r.brand}`),r.category&&(n+=` - Category: ${r.category.name}`),r.model&&(n+=` - Model: ${r.model}`),r.description&&(n+=` - ${r.description}`),t.push({description:n,qty:e.reservation.quantity||1,unitPrice:r.price||0,amount:(r.price||0)*(e.reservation.quantity||1)})}return e.appointment&&t.push({description:"Eye Examination",qty:1,unitPrice:500,amount:500}),t},m=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e),p=e=>new Date(e).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}),f=t.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.email.toLowerCase().includes(o.toLowerCase()));return Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsx("h1",{className:"text-3xl font-bold",children:"Patient Transaction History"}),Ae.jsxs(Hc,{onClick:u,disabled:s,children:[Ae.jsx(ln,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Search Patients"})}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"space-y-4",children:Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"search",children:"Search by name or email"}),Ae.jsx(Yc,{id:"search",placeholder:"Enter patient name or email...",value:o,onChange:e=>l(e.target.value)})]})})})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Patients with Completed Transactions"})}),Ae.jsx(sd,{children:s?Ae.jsx("div",{className:"text-center py-8",children:"Loading patient data..."}):0===f.length?Ae.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No patients found"}):Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Patient Name"}),Ae.jsx(Gm,{children:"Email"}),Ae.jsx(Gm,{children:"Total Transactions"}),Ae.jsx(Gm,{children:"Total Spent"}),Ae.jsx(Gm,{children:"Appointments"}),Ae.jsx(Gm,{children:"Products"}),Ae.jsx(Gm,{children:"Last Transaction"}),Ae.jsx(Gm,{children:"Actions"})]})}),Ae.jsx(Km,{children:f.map(e=>Ae.jsxs(Ym,{className:"cursor-pointer hover:bg-gray-50",children:[Ae.jsx(Xm,{className:"font-medium",children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ca,{className:"w-4 h-4"}),Ae.jsx("span",{children:e.name})]})}),Ae.jsx(Xm,{children:e.email}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{variant:"outline",children:e.total_transactions})}),Ae.jsx(Xm,{className:"font-semibold",children:m(e.total_spent)}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-1",children:[Ae.jsx(ln,{className:"w-4 h-4"}),Ae.jsx("span",{children:e.completed_appointments})]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-1",children:[Ae.jsx(Ln,{className:"w-4 h-4"}),Ae.jsx("span",{children:e.reserved_products})]})}),Ae.jsx(Xm,{children:p(e.last_transaction_date)}),Ae.jsx(Xm,{children:Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(e=>{a(e),d(!0)})(e),children:[Ae.jsx(wn,{className:"w-4 h-4 mr-2"}),"View Details"]})})]},e.id))})]})})]}),Ae.jsx(Vp,{open:c,onOpenChange:d,children:Ae.jsxs(Yp,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[Ae.jsx(Gp,{children:Ae.jsxs(Qp,{children:["Transaction Details for ",null==n?void 0:n.name]})}),n&&Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Patient Summary"})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Transactions"}),Ae.jsx("p",{className:"text-2xl font-bold",children:n.total_transactions})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Spent"}),Ae.jsx("p",{className:"text-2xl font-bold",children:m(n.total_spent)})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Appointments"}),Ae.jsx("p",{className:"text-2xl font-bold",children:n.completed_appointments})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Products"}),Ae.jsx("p",{className:"text-2xl font-bold",children:n.reserved_products})]})]})})]}),Ae.jsx(WH,{transactions:n.transactions}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Transaction History"})}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"space-y-6",children:n.transactions.map(t=>{return Ae.jsxs("div",{className:"border rounded-lg p-6",children:[Ae.jsxs("div",{className:"flex justify-between items-start mb-4",children:[Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium text-lg",children:t.transaction_code}),Ae.jsx("p",{className:"text-sm text-muted-foreground",children:p(t.created_at)})]}),Ae.jsxs("div",{className:"text-right",children:[Ae.jsx("p",{className:"font-semibold text-xl",children:m(t.total_amount)}),Ae.jsxs("div",{className:"flex space-x-2 mt-2",children:[Ae.jsx(Yd,{variant:"outline",children:t.status}),Ae.jsx(Yd,{variant:"secondary",children:t.payment_method})]})]})]}),Ae.jsxs("div",{className:"space-y-4",children:[t.appointment&&Ae.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:Ae.jsx(wn,{className:"w-6 h-6 text-blue-600"})}),Ae.jsxs("div",{children:[Ae.jsx("h4",{className:"font-medium text-blue-900",children:"Eye Examination"}),Ae.jsxs("p",{className:"text-sm text-blue-700",children:["Completed on ",p(t.appointment.appointment_date)]}),t.appointment.optometrist&&Ae.jsx("p",{className:"text-xs text-blue-600",children:t.appointment.optometrist.name})]})]})}),t.reservation&&t.reservation.product&&Ae.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:Ae.jsxs("div",{className:"flex items-start space-x-4",children:[Ae.jsx("div",{className:"w-16 h-16 bg-white rounded-lg border border-green-200 overflow-hidden",children:Ae.jsx("img",{src:(r=t.reservation.product,(null==r?void 0:r.image_url)||(null==r?void 0:r.image)||"/placeholder-product.jpg"),alt:t.reservation.product.name||"Product",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/placeholder-product.jpg"}})}),Ae.jsxs("div",{className:"flex-1",children:[Ae.jsx("h4",{className:"font-medium text-green-900",children:t.reservation.product.name||"Product"}),Ae.jsxs("p",{className:"text-sm text-green-700",children:["Quantity: ",t.reservation.quantity||1," × ",m(t.reservation.product.price||0)]}),Ae.jsxs("p",{className:"text-sm text-green-600",children:["Total: ",m((t.reservation.product.price||0)*(t.reservation.quantity||1))]}),t.reservation.product.brand&&Ae.jsxs("p",{className:"text-xs text-green-500",children:["Brand: ",t.reservation.product.brand]}),t.reservation.product.category&&Ae.jsxs("p",{className:"text-xs text-green-500",children:["Category: ",t.reservation.product.category.name]})]}),Ae.jsx("div",{className:"text-right",children:Ae.jsx("p",{className:"font-semibold text-green-900",children:m((t.reservation.product.price||0)*(t.reservation.quantity||1))})})]})})]}),"Completed"===t.status&&Ae.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[Ae.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"Receipt Preview"}),Ae.jsxs("div",{className:"space-y-2",children:[h(t).map((e,t)=>Ae.jsxs("div",{className:"flex justify-between items-center text-sm",children:[Ae.jsxs("div",{className:"flex-1",children:[Ae.jsx("p",{className:"font-medium",children:e.description}),Ae.jsxs("p",{className:"text-gray-600",children:["Qty: ",e.qty," × ",m(e.unitPrice)]})]}),Ae.jsx("div",{className:"text-right",children:Ae.jsx("p",{className:"font-medium",children:m(e.amount)})})]},t)),Ae.jsx("div",{className:"border-t pt-2 mt-2",children:Ae.jsxs("div",{className:"flex justify-between items-center font-medium",children:[Ae.jsx("span",{children:"Total:"}),Ae.jsx("span",{children:m(h(t).reduce((e,t)=>e+t.amount,0))})]})})]})]}),Ae.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[Ae.jsxs("div",{className:"text-sm text-muted-foreground",children:["Transaction completed on ",p(t.completed_at||t.created_at)]}),Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(async t=>{try{const r=await VH(t),n=window.URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download=`receipt_${t}.pdf`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(n),document.body.removeChild(a),e({title:"Success",description:"Receipt downloaded successfully"})}catch(r){e({title:"Error",description:"Failed to download receipt",variant:"destructive"})}})(t.id),children:[Ae.jsx(bn,{className:"w-4 h-4 mr-2"}),"Download Receipt"]})]})]},t.id);var r})})})]})]})]})})]})},KH=()=>{const e=Dt(),{toast:t}=Jt(),[r,n]=Ct.useState([]),[a,s]=Ct.useState(!0);Ct.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const e="http://192.168.100.6:8000/api",t=sessionStorage.getItem("auth_token"),r=await fetch(`${e}/appointments?status=completed`,{headers:{Authorization:t?`Bearer ${t}`:"","Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch appointments");const a=await r.json();n(a.data||a||[])}catch(e){console.error("Error loading appointments:",e),t({title:"Error",description:"Failed to load completed appointments",variant:"destructive"})}finally{s(!1)}},o=e=>new Date(`2000-01-01T${e}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return Ae.jsxs(Of,{defaultValue:"create-receipts",className:"w-full",children:[Ae.jsxs(Cf,{className:"grid w-full grid-cols-2",children:[Ae.jsxs(Af,{value:"create-receipts",children:[Ae.jsx($n,{className:"h-4 w-4 mr-2"}),"Create Receipts"]}),Ae.jsxs(Af,{value:"transaction-history",children:[Ae.jsx(Un,{className:"h-4 w-4 mr-2"}),"Transaction History"]})]}),Ae.jsx(Ef,{value:"create-receipts",className:"mt-6",children:Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center gap-2",children:[Ae.jsx(Sn,{className:"h-5 w-5 text-staff"}),"Completed Appointments - Create Receipts"]}),Ae.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:'Click "Create Receipt" for completed appointments that don\'t have a receipt yet'})]}),Ae.jsx(sd,{children:a?Ae.jsx("div",{className:"flex justify-center items-center py-12",children:Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-staff"})}):0===r.length?Ae.jsxs("div",{className:"text-center py-12",children:[Ae.jsx(ln,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ae.jsx("p",{className:"text-gray-600",children:"No completed appointments found"})]}):Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Date & Time"}),Ae.jsx(Gm,{children:"Patient"}),Ae.jsx(Gm,{children:"Type"}),Ae.jsx(Gm,{children:"Optometrist"}),Ae.jsx(Gm,{children:"Receipt Status"}),Ae.jsx(Gm,{children:"Actions"})]})}),Ae.jsx(Km,{children:r.map(t=>{var r,n;return Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex flex-col",children:[Ae.jsx("span",{className:"font-medium",children:(n=t.appointment_date,new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))}),Ae.jsxs("span",{className:"text-sm text-gray-600",children:[o(t.start_time)," - ",o(t.end_time)]})]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(ca,{className:"h-4 w-4 text-gray-400"}),Ae.jsxs("div",{children:[Ae.jsx("div",{className:"font-medium",children:t.patient.name}),Ae.jsx("div",{className:"text-sm text-gray-600",children:t.patient.email})]})]})}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{variant:"outline",className:"capitalize",children:t.type.replace(/_/g," ")})}),Ae.jsx(Xm,{children:Ae.jsx("div",{className:"text-sm",children:(null==(r=t.optometrist)?void 0:r.name)||"Not assigned"})}),Ae.jsx(Xm,{children:t.has_receipt?Ae.jsxs(Yd,{className:"bg-green-100 text-green-800",children:[Ae.jsx(Un,{className:"h-3 w-3 mr-1"}),"Has Receipt"]}):Ae.jsx(Yd,{variant:"outline",className:"text-orange-600 border-orange-300",children:"No Receipt"})}),Ae.jsx(Xm,{children:Ae.jsx("div",{className:"flex items-center gap-2",children:t.has_receipt?Ae.jsxs(Hc,{variant:"outline",size:"sm",disabled:!0,className:"text-gray-500",children:[Ae.jsx(Un,{className:"h-3 w-3 mr-1"}),"Receipt Created"]}):Ae.jsxs(Hc,{variant:"default",size:"sm",onClick:()=>{return r=t.id,void e(`/staff/create-receipt/${r}`);var r},className:"bg-green-600 hover:bg-green-700 text-white",children:[Ae.jsx(Sn,{className:"h-3 w-3 mr-1"}),"Create Receipt"]})})})]},t.id)})})]})})]})}),Ae.jsx(Ef,{value:"transaction-history",className:"mt-6",children:Ae.jsx(HH,{})})]})},YH=()=>{const[e,t]=Ct.useState("reservations");return Ae.jsxs("div",{className:"p-6 space-y-6",children:[Ae.jsx("div",{className:"flex justify-between items-center",children:Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reservations & Transactions"}),Ae.jsx("p",{className:"text-gray-600 mt-1",children:"Manage customer reservations, transactions, and receipts"})]})}),Ae.jsxs(Of,{value:e,onValueChange:t,className:"w-full",children:[Ae.jsxs(Cf,{className:"grid w-full grid-cols-3 lg:w-auto",children:[Ae.jsxs(Af,{value:"reservations",className:"flex items-center gap-2",children:[Ae.jsx(Jn,{className:"h-4 w-4"}),Ae.jsx("span",{className:"hidden sm:inline",children:"Product Reservations"}),Ae.jsx("span",{className:"sm:hidden",children:"Reservations"})]}),Ae.jsxs(Af,{value:"transactions",className:"flex items-center gap-2",children:[Ae.jsx(Un,{className:"h-4 w-4"}),Ae.jsx("span",{className:"hidden sm:inline",children:"Receipts & Transactions"}),Ae.jsx("span",{className:"sm:hidden",children:"Receipts"})]}),Ae.jsxs(Af,{value:"totals",className:"flex items-center gap-2",children:[Ae.jsx(nn,{className:"h-4 w-4"}),Ae.jsx("span",{className:"hidden sm:inline",children:"Totals & Summary"}),Ae.jsx("span",{className:"sm:hidden",children:"Summary"})]})]}),Ae.jsx(Ef,{value:"reservations",className:"mt-6",children:Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center gap-2",children:[Ae.jsx(Jn,{className:"h-5 w-5 text-staff"}),"Customer Product Reservations"]}),Ae.jsx(ad,{children:"Approve, reject, and manage customer product reservations from your branch"})]}),Ae.jsx(sd,{className:"p-0",children:Ae.jsx(FH,{})})]})}),Ae.jsx(Ef,{value:"transactions",className:"mt-6",children:Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center gap-2",children:[Ae.jsx(Un,{className:"h-5 w-5 text-staff"}),"Appointments & Receipts"]}),Ae.jsx(ad,{children:"Create receipts for completed appointments and view all patient transaction history"})]}),Ae.jsx(sd,{className:"p-0",children:Ae.jsx(KH,{})})]})}),Ae.jsx(Ef,{value:"totals",className:"mt-6",children:Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center gap-2",children:[Ae.jsx(nn,{className:"h-5 w-5 text-staff"}),"Totals & Summary"]}),Ae.jsx(ad,{children:"Overview of reservations and transactions totals"})]}),Ae.jsx(sd,{children:Ae.jsx(GH,{})})]})})]})]})},GH=()=>{const[e,t]=At.useState({totalReservations:0,pendingValue:0,approvedValue:0,completedValue:0}),[r,n]=At.useState({totalTransactions:0,totalRevenue:0,avgTransaction:0}),[a,s]=At.useState(!0);At.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const e="http://192.168.100.6:8000/api",r=sessionStorage.getItem("auth_token"),n=await fetch(`${e}/reservations`,{headers:{Authorization:r?`Bearer ${r}`:""}});if(n.ok){const e=await n.json(),r=e.filter(e=>"pending"===e.status),a=e.filter(e=>"approved"===e.status),s=e.filter(e=>"completed"===e.status),i=e=>e.reduce((e,t)=>e+t.quantity*Number(t.product.price),0);t({totalReservations:e.length,pendingValue:i(r),approvedValue:i(a),completedValue:i(s)})}}catch(e){console.error("Error fetching summary data:",e)}finally{s(!1)}};return a?Ae.jsx("div",{className:"flex justify-center items-center py-12",children:Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-staff"})}):Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Reservation Totals"}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Ae.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-100",children:[Ae.jsx("div",{className:"text-sm text-blue-600 font-medium mb-1",children:"Total Reservations"}),Ae.jsx("div",{className:"text-3xl font-bold text-blue-700",children:e.totalReservations})]}),Ae.jsxs("div",{className:"bg-yellow-50 p-6 rounded-lg border border-yellow-100",children:[Ae.jsx("div",{className:"text-sm text-yellow-600 font-medium mb-1",children:"Pending Value"}),Ae.jsxs("div",{className:"text-3xl font-bold text-yellow-700",children:["₱",e.pendingValue.toFixed(2)]})]}),Ae.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-100",children:[Ae.jsx("div",{className:"text-sm text-green-600 font-medium mb-1",children:"Approved Value"}),Ae.jsxs("div",{className:"text-3xl font-bold text-green-700",children:["₱",e.approvedValue.toFixed(2)]})]}),Ae.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg border border-purple-100",children:[Ae.jsx("div",{className:"text-sm text-purple-600 font-medium mb-1",children:"Completed Value"}),Ae.jsxs("div",{className:"text-3xl font-bold text-purple-700",children:["₱",e.completedValue.toFixed(2)]})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Transaction Totals"}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Ae.jsxs("div",{className:"bg-indigo-50 p-6 rounded-lg border border-indigo-100",children:[Ae.jsx("div",{className:"text-sm text-indigo-600 font-medium mb-1",children:"Total Transactions"}),Ae.jsx("div",{className:"text-3xl font-bold text-indigo-700",children:r.totalTransactions})]}),Ae.jsxs("div",{className:"bg-teal-50 p-6 rounded-lg border border-teal-100",children:[Ae.jsx("div",{className:"text-sm text-teal-600 font-medium mb-1",children:"Total Revenue"}),Ae.jsxs("div",{className:"text-3xl font-bold text-teal-700",children:["₱",r.totalRevenue.toFixed(2)]})]}),Ae.jsxs("div",{className:"bg-rose-50 p-6 rounded-lg border border-rose-100",children:[Ae.jsx("div",{className:"text-sm text-rose-600 font-medium mb-1",children:"Avg Transaction"}),Ae.jsxs("div",{className:"text-3xl font-bold text-rose-700",children:["₱",r.avgTransaction.toFixed(2)]})]})]})]}),Ae.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[Ae.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Insights"}),Ae.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[Ae.jsxs("p",{children:[Ae.jsx("span",{className:"font-medium",children:"Total Potential Revenue:"})," ","₱",(e.pendingValue+e.approvedValue+e.completedValue).toFixed(2)]}),Ae.jsxs("p",{children:[Ae.jsx("span",{className:"font-medium",children:"Conversion Rate:"})," ",e.totalReservations>0?(e.completedValue/(e.pendingValue+e.approvedValue+e.completedValue)*100).toFixed(1):0,"%"]})]})]})]})},XH=()=>{Rc();const[e,t]=Ct.useState([]),[r,n]=Ct.useState([]),[a,s]=Ct.useState(!0),[i,o]=Ct.useState(null),[l,c]=Ct.useState("all"),[d,u]=Ct.useState(!1),[h,m]=Ct.useState(null),[p,f]=Ct.useState(0),[x,y]=Ct.useState(""),[v,g]=Ct.useState(!1);Ct.useEffect(()=>{b(),j()},[l]);const b=async()=>{try{s(!0),o(null);const e="http://192.168.100.6:8000/api",r=sessionStorage.getItem("auth_token");let n=`${e}/restock-requests`;"all"!==l&&(n+=`?status=${l}`);const a=await fetch(n,{headers:{Authorization:`Bearer ${r}`}});if(!a.ok)throw new Error("Failed to fetch restock requests");const i=await a.json();t(i)}catch(e){console.error("Error fetching requests:",e),o("Failed to load restock requests")}finally{s(!1)}},j=async()=>{try{const e="http://192.168.100.6:8000/api",t=sessionStorage.getItem("auth_token"),r=await fetch(`${e}/branch-stock/low-stock`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error("Failed to fetch low stock items");const a=await r.json();n(a.low_stock_items||[])}catch(e){console.error("Error fetching low stock items:",e)}},w=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"fulfilled":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},N=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return a?Ae.jsx("div",{className:"p-4",children:Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),Ae.jsx("p",{className:"mt-2",children:"Loading restock requests..."})]})}):Ae.jsxs("div",{className:"p-4",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ae.jsx("h2",{className:"text-2xl font-bold",children:"Restock Requests"}),Ae.jsx("button",{onClick:()=>u(!0),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",children:"Request Restock"})]}),i&&Ae.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:i}),r.length>0&&Ae.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[Ae.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"Low Stock Alert"}),Ae.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"The following items are running low on stock:"}),Ae.jsxs("div",{className:"space-y-2",children:[r.slice(0,3).map(e=>Ae.jsxs("div",{className:"text-sm text-yellow-700",children:["• ",e.product.name," - ",e.available_quantity," available"]},e.id)),r.length>3&&Ae.jsxs("div",{className:"text-sm text-yellow-700",children:["... and ",r.length-3," more items"]})]})]}),Ae.jsx("div",{className:"mb-6",children:Ae.jsxs("select",{value:l,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Ae.jsx("option",{value:"all",children:"All Requests"}),Ae.jsx("option",{value:"pending",children:"Pending"}),Ae.jsx("option",{value:"approved",children:"Approved"}),Ae.jsx("option",{value:"rejected",children:"Rejected"}),Ae.jsx("option",{value:"fulfilled",children:"Fulfilled"})]})}),Ae.jsx("div",{className:"space-y-4",children:0===e.length?Ae.jsx("div",{className:"text-center py-8 text-gray-500",children:Ae.jsx("p",{children:"No restock requests found."})}):e.map(e=>{return Ae.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:Ae.jsxs("div",{className:"flex items-start space-x-4",children:[Ae.jsx("div",{className:"flex-shrink-0",children:e.product.image_paths&&e.product.image_paths.length>0?Ae.jsx("img",{src:(t=e.product.image_paths[0],`${"http://192.168.100.6:8000/api".replace("/api","")}/storage/${t.startsWith("/")?t.substring(1):t}`),alt:e.product.name,className:"w-16 h-16 object-cover rounded border",onError:e=>{e.currentTarget.style.display="none"}}):Ae.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded border flex items-center justify-center text-gray-500 text-xs",children:"No Image"})}),Ae.jsx("div",{className:"flex-1 min-w-0",children:Ae.jsxs("div",{className:"flex items-start justify-between",children:[Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"font-semibold text-lg",children:e.product.name}),Ae.jsx("p",{className:"text-gray-600 text-sm mb-2",children:e.product.description}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Current Stock:"})," ",e.current_stock]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Requested:"})," ",e.requested_quantity]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Requested By:"})," ",e.requestedBy.name]}),Ae.jsxs("div",{children:[Ae.jsx("span",{className:"font-medium",children:"Date:"})," ",N(e.created_at)]})]}),e.notes&&Ae.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[Ae.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.notes]}),e.approvedBy&&Ae.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[Ae.jsx("span",{className:"font-medium",children:"Approved by:"})," ",e.approvedBy.name," on ",N(e.approved_at)]})]}),Ae.jsx("div",{className:"flex flex-col items-end space-y-2",children:Ae.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]})})]})},e.id);var t})}),d&&Ae.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Ae.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:Ae.jsxs("div",{className:"p-6",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Ae.jsx("h3",{className:"text-lg font-bold",children:"Request Restock"}),Ae.jsx("button",{onClick:()=>{u(!1),m(null),f(0),y("")},className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),Ae.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!h||p<=0)alert("Please select a product and enter a valid quantity");else try{g(!0);const e="http://192.168.100.6:8000/api",t=sessionStorage.getItem("auth_token"),r=await fetch(`${e}/restock-requests`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({product_id:h.product_id,requested_quantity:p,notes:x||null})});if(!r.ok){const e=await r.json();throw new Error(e.message||"Failed to create restock request")}await b(),await j(),u(!1),m(null),f(0),y(""),alert("Restock request created successfully!")}catch(t){console.error("Error creating request:",t),alert(t instanceof Error?t.message:"Failed to create restock request")}finally{g(!1)}},className:"space-y-4",children:[Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Product *"}),Ae.jsxs("select",{value:(null==h?void 0:h.id)||"",onChange:e=>{const t=r.find(t=>t.id===Number(e.target.value));m(t||null),f(0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[Ae.jsx("option",{value:"",children:"Choose a product..."}),r.map(e=>Ae.jsxs("option",{value:e.id,children:[e.product.name," - Current: ",e.available_quantity]},e.id))]})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requested Quantity *"}),Ae.jsx("input",{type:"number",min:"1",value:p,onChange:e=>f(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),Ae.jsx("textarea",{value:x,onChange:e=>y(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Any additional information..."})]}),Ae.jsxs("div",{className:"flex space-x-3",children:[Ae.jsx("button",{type:"button",onClick:()=>{u(!1),m(null),f(0),y("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),Ae.jsx("button",{type:"submit",disabled:v||!h,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-400",children:v?"Submitting...":"Submit Request"})]})]})]})})})]})};const QH=({appointmentId:e,defaultCustomerName:t,defaultAddress:r,customerId:n})=>{const{toast:a}=Jt(),[s,i]=Ct.useState("cash"),[o,l]=Ct.useState((new Date).toISOString().slice(0,10)),[c,d]=Ct.useState(t),[u,h]=Ct.useState(""),[m,p]=Ct.useState(r||""),[f,x]=Ct.useState([{description:"",qty:1,unit_price:0,amount:0}]),[y,v]=Ct.useState(0),[g,b]=Ct.useState(0),[j,w]=Ct.useState(!1);Ct.useEffect(()=>{(async()=>{if(n)try{w(!0);const r="http://192.168.100.6:8000/api",s=sessionStorage.getItem("auth_token");console.log(`Loading reservations for customer ID: ${n}, Appointment ID: ${e}`);const i=await fetch(`${r}/reservations?status=approved`,{headers:{Authorization:s?`Bearer ${s}`:"","Content-Type":"application/json"}});if(!i.ok)throw new Error("Failed to fetch reservations");const o=(await i.json()).filter(e=>{var t;return((null==(t=e.user)?void 0:t.id)||e.user_id)===n});if(console.log(`Found ${o.length} approved reservation(s) for customer ${t} (ID: ${n})`),o&&o.length>0){const e=o.map(e=>{const t=e.product;let r=t.name||"Reserved Product";return t.brand&&(r+=` - ${t.brand}`),t.model&&(r+=` (${t.model})`),t.description&&(r+=` - ${t.description}`),console.log(`Adding reserved product: ${r} (Qty: ${e.quantity}, Price: ${t.price})`),{description:r,qty:e.quantity,unit_price:Number(t.price),amount:Number(t.price)*e.quantity}});x([{description:"Eye Examination",qty:1,unit_price:500,amount:500},...e]),a({title:"Reserved Products Loaded",description:`${e.length} reserved product(s) for ${t} added to receipt`})}else console.log(`No approved reservations found for customer ${t} (ID: ${n})`),x([{description:"Eye Examination",qty:1,unit_price:500,amount:500}]),a({title:"No Reserved Products",description:`${t} has no approved product reservations.`,variant:"default"})}catch(r){console.error("Error loading reserved products:",r),a({title:"Note",description:"Could not load reserved products. You can add them manually.",variant:"default"}),x([{description:"Eye Examination",qty:1,unit_price:500,amount:500}])}finally{w(!1)}else console.warn("No customer ID provided, skipping reservation load")})()},[n,e,t,a]);const N=Ct.useMemo(()=>{const e=f.reduce((e,t)=>e+(Number(t.amount)||0),0),t=e/1.12;return{subtotal:e,vatableSales:t,vatAmount:e-t,netOfVat:t,totalDue:e-y-g}},[f,y,g]),S=(e,t)=>{x(r=>r.map((r,n)=>n===e?{...r,...t,amount:Number(t.unit_price??r.unit_price)*Number(t.qty??r.qty)}:r))};return Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Create Service Invoice"})}),Ae.jsxs(sd,{className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{children:"Sales Type"}),Ae.jsxs(Tm,{value:s,onValueChange:e=>i(e),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"cash",children:"Cash"}),Ae.jsx(Lm,{value:"charge",children:"Charge"})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{children:"Date"}),Ae.jsx(Yc,{type:"date",value:o,onChange:e=>l(e.target.value)})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{children:"Registered Name"}),Ae.jsx(Yc,{value:c,onChange:e=>d(e.target.value)})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{children:"TIN"}),Ae.jsx(Yc,{value:u,onChange:e=>h(e.target.value)})]}),Ae.jsxs("div",{className:"col-span-2",children:[Ae.jsx(Zc,{children:"Address"}),Ae.jsx(Yc,{value:m,onChange:e=>p(e.target.value)})]})]}),Ae.jsxs("div",{children:[Ae.jsxs("div",{className:"grid grid-cols-12 gap-2 font-medium",children:[Ae.jsx("div",{className:"col-span-6",children:"Item Description / Nature of Service"}),Ae.jsx("div",{className:"col-span-2",children:"QTY"}),Ae.jsx("div",{className:"col-span-2",children:"Unit Price"}),Ae.jsx("div",{className:"col-span-2",children:"Amount"})]}),f.map((e,t)=>Ae.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center mt-2",children:[Ae.jsx("div",{className:"col-span-6",children:Ae.jsx(Yc,{value:e.description,onChange:e=>S(t,{description:e.target.value})})}),Ae.jsx("div",{className:"col-span-2",children:Ae.jsx(Yc,{type:"number",value:e.qty,onChange:e=>S(t,{qty:Number(e.target.value)})})}),Ae.jsx("div",{className:"col-span-2",children:Ae.jsx(Yc,{type:"number",value:e.unit_price,onChange:e=>S(t,{unit_price:Number(e.target.value)})})}),Ae.jsxs("div",{className:"col-span-2 flex gap-2",children:[Ae.jsx(Yc,{type:"number",value:e.amount,onChange:e=>S(t,{amount:Number(e.target.value)})}),Ae.jsx(Hc,{variant:"ghost",onClick:()=>(e=>x(t=>t.filter((t,r)=>r!==e)))(t),children:"Remove"})]})]},t)),Ae.jsx("div",{className:"mt-2",children:Ae.jsx(Hc,{variant:"secondary",onClick:()=>x(e=>[...e,{description:"",qty:1,unit_price:0,amount:0}]),children:"Add Item"})})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{children:"Vatable Sales"}),Ae.jsxs("span",{children:["₱",N.vatableSales.toFixed(2)]})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{children:"VAT"}),Ae.jsxs("span",{children:["₱",N.vatAmount.toFixed(2)]})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{children:"Zero Rated Sales"}),Ae.jsx("span",{children:"₱0.00"})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{children:"VAT-Exempt Sales"}),Ae.jsx("span",{children:"₱0.00"})]})]}),Ae.jsxs("div",{children:[Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{children:"Less: Discount"}),Ae.jsx(Yc,{className:"w-28",type:"number",value:y,onChange:e=>v(Number(e.target.value))})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{children:"Add: VAT"}),Ae.jsxs("span",{children:["₱",N.vatAmount.toFixed(2)]})]}),Ae.jsxs("div",{className:"flex justify-between",children:[Ae.jsx("span",{children:"Less: Withholding Tax"}),Ae.jsx(Yc,{className:"w-28",type:"number",value:g,onChange:e=>b(Number(e.target.value))})]}),Ae.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[Ae.jsx("span",{children:"Total Amount Due"}),Ae.jsxs("span",{children:["₱",N.totalDue.toFixed(2)]})]})]})]}),Ae.jsx("div",{className:"flex justify-end",children:Ae.jsx(Hc,{onClick:async()=>{try{const t={appointment_id:e,sales_type:s,date:o,customer_name:c,tin:u||void 0,address:m||void 0,items:f,totals:{vatable_sales:Number(N.vatableSales.toFixed(2)),vat_amount:Number(N.vatAmount.toFixed(2)),zero_rated_sales:0,vat_exempt_sales:0,net_of_vat:Number(N.netOfVat.toFixed(2)),less_vat:Number(N.vatAmount.toFixed(2)),add_vat:Number(N.vatAmount.toFixed(2)),discount:Number(y),withholding_tax:Number(g),total_due:Number(N.totalDue.toFixed(2))}};await async function(e){const t=await fetch(Lc("/receipts"),{method:"POST",headers:Bc(),body:JSON.stringify(e)});if(!t.ok){const e=await t.text();throw new Error(e||"Failed to create receipt")}return t.json()}(t),a({title:"Receipt saved",description:"Customers can now download the PDF."})}catch(t){a({title:"Failed to save receipt",description:t.message,variant:"destructive"})}},children:"Save Receipt"})})]})]})},JH=()=>{const[e,t]=Ct.useState([]),[r,n]=Ct.useState(!0),[a,s]=Ct.useState({}),[i,o]=Ct.useState(!1);Ct.useEffect(()=>{l()},[]);const l=async()=>{try{const e=await fetch("/api/branch-stock",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const r=await e.json();t(r)}else As.error("Failed to fetch branch stock data")}catch(e){As.error("Failed to fetch branch stock data")}finally{n(!1)}},c=e=>{switch(e){case"out-of-stock":return"text-red-600 bg-red-100";case"low-stock":return"text-yellow-600 bg-yellow-100";case"in-stock":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},d=e=>{switch(e){case"out-of-stock":return Ae.jsx(na,{className:"w-4 h-4"});case"low-stock":return Ae.jsx(Jr,{className:"w-4 h-4"});case"in-stock":return Ae.jsx(aa,{className:"w-4 h-4"});default:return null}};return r?Ae.jsx("div",{className:"flex items-center justify-center h-64",children:Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):Ae.jsxs("div",{className:"p-6",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ae.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Stock Management"}),Ae.jsxs("button",{onClick:l,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[Ae.jsx(Vn,{className:"w-4 h-4"}),"Refresh"]})]}),Ae.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:Ae.jsx("div",{className:"overflow-x-auto",children:Ae.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ae.jsx("thead",{className:"bg-gray-50",children:Ae.jsxs("tr",{children:[Ae.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),Ae.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branch"}),Ae.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Quantity"}),Ae.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reserved"}),Ae.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available"}),Ae.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),Ae.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),Ae.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{const t=(e=>{const t=e.stock_quantity-e.reserved_quantity;return t<=0?"out-of-stock":t<=5?"low-stock":"in-stock"})(e),r=e.stock_quantity-e.reserved_quantity,n=void 0!==a[e.id];return Ae.jsxs("tr",{className:"hover:bg-gray-50",children:[Ae.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ae.jsxs("div",{className:"flex items-center",children:[Ae.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.product.image_url?Ae.jsx("img",{className:"h-10 w-10 rounded-lg object-cover",src:e.product.image_url,alt:e.product.name}):Ae.jsx("div",{className:"h-10 w-10 rounded-lg bg-gray-200 flex items-center justify-center",children:Ae.jsx("span",{className:"text-gray-400 text-xs",children:"No Image"})})}),Ae.jsxs("div",{className:"ml-4",children:[Ae.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.product.name}),Ae.jsx("div",{className:"text-sm text-gray-500",children:e.product.brand})]})]})}),Ae.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.branch.name}),Ae.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n?Ae.jsx("input",{type:"number",min:"0",value:a[e.id],onChange:t=>{return r=e.id,n=parseInt(t.target.value)||0,void s(e=>({...e,[r]:n}));var r,n},className:"w-20 px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"}):Ae.jsx("span",{className:"text-sm text-gray-900",children:e.stock_quantity})}),Ae.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.reserved_quantity}),Ae.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r}),Ae.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ae.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c(t)}`,children:[d(t),Ae.jsx("span",{className:"ml-1 capitalize",children:t.replace("-"," ")})]})}),Ae.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n?Ae.jsxs("button",{onClick:()=>(async e=>{const t=a[e.id];if(void 0===t||t<0)As.error("Please enter a valid quantity");else{o(!0);try{const r=await fetch(`/api/branch-stock/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({stock_quantity:t})});if(r.ok)As.success("Stock updated successfully"),l(),s(t=>{const r={...t};return delete r[e.id],r});else{const e=await r.json();As.error(e.message||"Failed to update stock")}}catch(r){As.error("Failed to update stock")}finally{o(!1)}}})(e),disabled:i,className:"text-green-600 hover:text-green-900 disabled:opacity-50 flex items-center gap-1",children:[Ae.jsx(Hn,{className:"w-4 h-4"}),i?"Saving...":"Save"]}):Ae.jsx("button",{onClick:()=>s(t=>({...t,[e.id]:e.stock_quantity})),className:"text-blue-600 hover:text-blue-900",children:"Edit"})})]},e.id)})})]})})}),0===e.length&&Ae.jsxs("div",{className:"text-center py-12",children:[Ae.jsx("div",{className:"text-gray-500 text-lg",children:"No stock data available"}),Ae.jsx("div",{className:"text-gray-400 text-sm mt-2",children:"Add some products and set their stock levels across branches"})]})]})},ZH=()=>{const{selectedBranchId:e}=Rp(),[t,r]=Ct.useState([]),[n,a]=Ct.useState(!0),[s,i]=Ct.useState(!1),[o,l]=Ct.useState(null),[c,d]=Ct.useState({name:"",description:"",price:"",stock_quantity:"",category_id:"",is_active:!0}),[u,h]=Ct.useState([]),[m,p]=Ct.useState([]),[f,x]=Ct.useState(!1),[y,v]=Ct.useState(null),[g,b]=Ct.useState([]),[j,w]=Ct.useState(!1),[N,S]=Ct.useState({}),[k,_]=Ct.useState(!1),O=Ct.useRef(null),[C,A]=Ct.useState(""),[E,P]=Ct.useState("grid"),[T,M]=Ct.useState(new Set),[D,I]=Ct.useState("all"),[R,F]=Ct.useState([]);Ct.useEffect(()=>{L(),(async()=>{try{const e="http://192.168.100.6:8000/api",t=sessionStorage.getItem("auth_token"),r=await fetch(`${e}/product-categories`,{headers:{Authorization:t?`Bearer ${t}`:"",Accept:"application/json"}});if(r.ok){const e=await r.json(),t=Array.isArray(e)?e:e.categories||[];F(t.map(e=>({id:e.id,name:e.name})))}}catch{}})();const e=setInterval(()=>{CH()||L()},3e4);return()=>clearInterval(e)},[e]);const L=async()=>{try{a(!0);const e=await Np(""),t=(Array.isArray(e)?e:[]).filter(e=>!T.has(e.id));r(t)}catch(e){console.error("Error fetching products:",e),As.error("Failed to fetch products"),r([])}finally{a(!1)}},B=(e,t)=>{var r,n,a;e.preventDefault(),e.stopPropagation(),console.log("Edit clicked for product:",t.id),l(t),d({name:t.name||"",description:t.description||"",price:(null==(r=t.price)?void 0:r.toString())||"0",stock_quantity:(null==(n=t.stock_quantity)?void 0:n.toString())||"0",category_id:((null==(a=t.category_details)?void 0:a.id)||"").toString(),is_active:t.is_active??!0}),h([]),i(!0)},q=async(e,t)=>{var n,a;if(e.preventDefault(),e.stopPropagation(),console.log("Delete clicked for product:",t),confirm("Are you sure you want to delete this product? This action cannot be undone."))try{await _p(String(t)),EH(t),M(e=>new Set([...e,t])),r(e=>e.filter(e=>e.id!==t)),As.success("Product deleted successfully")}catch(s){console.error("Delete error:",s);let e="Failed to delete product";(null==(a=null==(n=null==s?void 0:s.response)?void 0:n.data)?void 0:a.message)?(e=s.response.data.message,s.response.data.active_reservations&&(e+=` (${s.response.data.active_reservations} active reservations)`)):(null==s?void 0:s.message)&&(e=s.message),As.error(e)}},z=async(e,t)=>{e.preventDefault(),e.stopPropagation(),console.log("Toggle status clicked for product:",t.id);try{const e=new FormData;e.append("is_active",t.is_active?"0":"1"),await kp(String(t.id),e),As.success(`Product ${t.is_active?"deactivated":"activated"} successfully`),CH()?r(e=>e.map(e=>e.id===t.id?{...e,is_active:!t.is_active}:e)):L()}catch(n){console.error("Toggle status error:",n),As.error((null==n?void 0:n.message)||"Failed to update product status")}},$=async(e,t)=>{var r,n;e.preventDefault(),e.stopPropagation(),console.log("Manage stock clicked for product:",t.id),v(t),w(!0);try{const e="http://192.168.100.6:8000/api",r=sessionStorage.getItem("auth_token");if(!r)throw new Error("No authentication token found. Please login again.");const[n,a]=await Promise.all([fetch(`${e}/branches`,{headers:{Authorization:`Bearer ${r}`,Accept:"application/json","Content-Type":"application/json"}}),fetch(`${e}/branch-stock`,{headers:{Authorization:`Bearer ${r}`,Accept:"application/json","Content-Type":"application/json"}})]);if(!n.ok){const e=await n.text();throw console.error("Branches API error:",e),new Error(`Failed to load branches (${n.status}): ${n.statusText}`)}if(!a.ok){const e=await a.text();throw console.error("Stock API error:",e),new Error(`Failed to load branch stock (${a.status}): ${a.statusText}`)}const s=await n.json(),i=await a.json();console.log("Branches response:",s),console.log("Stock response:",i);const o=(s.branches||s||[]).map(e=>({id:e.id,name:e.name,code:e.code})),l=(i.stock||i||[]).filter(e=>e.product_id===t.id);b(o);const c=o.map(e=>{const r=l.find(t=>t.branch_id===e.id);return{id:null==r?void 0:r.id,product_id:t.id,branch_id:e.id,stock_quantity:(null==r?void 0:r.stock_quantity)??0,reserved_quantity:(null==r?void 0:r.reserved_quantity)??0,branch:{id:e.id,name:e.name,code:e.code}}});p(c);const d={};c.forEach(e=>{d[e.branch_id]=e.stock_quantity}),S(d),x(!0)}catch(a){console.error("Manage stock error:",a);const e=(null==a?void 0:a.message)||"Failed to fetch branch stock";As.error(e),((null==(r=null==a?void 0:a.message)?void 0:r.includes("403"))||(null==(n=null==a?void 0:a.message)?void 0:n.includes("authentication")))&&As.error("Authentication error. Please try logging in again.")}finally{w(!1)}},U=e=>{h(t=>[...t,e])},V=()=>{d({name:"",description:"",price:"",stock_quantity:"",category_id:"",is_active:!0}),h([]),l(null),i(!1),O.current&&(O.current.value="")};return n?Ae.jsx("div",{className:"flex items-center justify-center h-64",children:Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):Ae.jsxs("div",{className:"p-6",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Product Management"}),"all"!==e&&Ae.jsx(Yd,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Branch Filtered"})]}),Ae.jsxs("div",{className:"flex items-center gap-4",children:[Ae.jsx(Mp,{selectedBranchId:e,onBranchChange:e=>{},useAdminData:!0}),Ae.jsxs(Hc,{onClick:async()=>{AH(),await L(),As.success("Products refreshed successfully")},variant:"outline",disabled:n,className:"flex items-center gap-2",children:[Ae.jsx(Vn,{className:"h-4 w-4 "+(n?"animate-spin":"")}),"Refresh"]}),Ae.jsxs(Hc,{onClick:()=>i(!0),className:"bg-blue-600 hover:bg-blue-700",children:[Ae.jsx($n,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})]}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Total Products"}),Ae.jsx(Ln,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:t.length}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all branches"})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Active Products"}),Ae.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:t.filter(e=>e.is_active).length}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently available"})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Branches"}),Ae.jsx(sn,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:g.length}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Branch locations"})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Low Stock Items"}),Ae.jsx(Jr,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:m.filter(e=>e.stock_quantity<5).length}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Need restocking"})]})]})]}),Ae.jsxs("div",{className:"mb-6 flex gap-4 items-center",children:[Ae.jsxs("div",{className:"flex-1 relative",children:[Ae.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),Ae.jsx(Yc,{type:"text",placeholder:"Search products by name...",value:C,onChange:e=>A(e.target.value),className:"pl-10"})]}),Ae.jsxs("div",{className:"flex gap-2",children:[Ae.jsx(Hc,{variant:"all"===D?"default":"outline",size:"sm",onClick:()=>I("all"),children:"All"}),Ae.jsx(Hc,{variant:"frames"===D?"default":"outline",size:"sm",onClick:()=>I("frames"),children:"Frames"}),Ae.jsx(Hc,{variant:"sunglasses"===D?"default":"outline",size:"sm",onClick:()=>I("sunglasses"),children:"Sunglasses"}),Ae.jsx(Hc,{variant:"contact_lenses"===D?"default":"outline",size:"sm",onClick:()=>I("contact_lenses"),children:"Contact Lenses"}),Ae.jsx(Hc,{variant:"eye_care"===D?"default":"outline",size:"sm",onClick:()=>I("eye_care"),children:"Eye Care"}),Ae.jsx(Hc,{variant:"others"===D?"default":"outline",size:"sm",onClick:()=>I("others"),children:"Other Products"})]}),Ae.jsxs("div",{className:"flex gap-2",children:[Ae.jsx(Hc,{variant:"grid"===E?"default":"outline",size:"sm",onClick:()=>P("grid"),children:Ae.jsx(On,{className:"h-4 w-4"})}),Ae.jsx(Hc,{variant:"list"===E?"default":"outline",size:"sm",onClick:()=>P("list"),children:Ae.jsx(Pn,{className:"h-4 w-4"})})]})]}),Ae.jsx("div",{className:"grid"===E?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:t.filter(e=>{const t=e.name.toLowerCase().includes(C.toLowerCase()),r=(e.category||e.category_name||"").toString().toLowerCase(),n=`${e.name} ${e.description||""}`.toLowerCase(),a=r.includes("frame")||n.includes("frame"),s=r.includes("sunglass")||n.includes("sunglass")||n.includes("sun glasses"),i=r.includes("contact")||n.includes("contact lens")||n.includes("contacts"),o=r.includes("care")||r.includes("solution")||n.includes("solution")||n.includes("drop")||n.includes("cleaner");let l=!0;switch(D){case"frames":l=a&&!s;break;case"sunglasses":l=s;break;case"contact_lenses":l=i;break;case"eye_care":l=o;break;case"others":l=!(a||s||i||o);break;default:l=!0}return t&&l}).map(e=>Ae.jsxs(td,{className:"overflow-hidden hover:shadow-lg transition-shadow "+("list"===E?"flex flex-row":""),children:[Ae.jsxs("div",{className:"relative bg-gray-100 "+("list"===E?"w-32 h-32":"h-48"),children:[e.image_paths&&e.image_paths.length>0?Ae.jsx("img",{className:"w-full h-full object-cover",src:OH(e.image_paths[0]),alt:e.name}):Ae.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-400",children:[Ae.jsx(Ln,{className:("list"===E?"h-8 w-8":"h-16 w-16")+" mb-2"}),Ae.jsx("span",{className:"text-xs",children:"No Image"})]}),"grid"===E&&Ae.jsx("div",{className:"absolute top-2 right-2",children:Ae.jsx("span",{className:"inline-flex px-3 py-1 text-xs font-semibold rounded-full "+(e.is_active?"bg-green-500 text-white":"bg-red-500 text-white"),children:e.is_active?"Active":"Inactive"})})]}),Ae.jsx(sd,{className:""+("list"===E?"flex-1 p-4 flex items-center":"p-4"),children:"list"===E?Ae.jsxs("div",{className:"flex items-center justify-between w-full gap-4",children:[Ae.jsxs("div",{className:"flex-1 min-w-0",children:[Ae.jsx("h3",{className:"font-semibold text-lg text-gray-900 truncate mb-1",title:e.name,children:e.name}),Ae.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[Ae.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["₱",e.price.toLocaleString()]}),Ae.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"})]})]}),Ae.jsxs("div",{className:"flex items-center gap-6",children:[Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"text-xs text-gray-500",children:"Stock"}),Ae.jsx("div",{className:"text-lg font-bold",children:e.total_stock||0})]}),Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"text-xs text-gray-500",children:"Available"}),Ae.jsx("div",{className:"text-lg font-bold text-green-600",children:e.total_available||0})]}),Ae.jsxs("div",{className:"text-center min-w-[100px]",children:[Ae.jsx("div",{className:"text-xs text-gray-500",children:"Branches"}),Ae.jsx("div",{className:"text-sm font-semibold",children:e.branch_availability&&e.branch_availability.length>0?`${e.branch_availability.filter(e=>e.is_available).length}/${e.branch_availability.length}`:"0/0"})]})]}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsxs(Hc,{onClick:t=>$(t,e),className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[Ae.jsx(sn,{className:"w-4 h-4 mr-2"}),"Stock"]}),Ae.jsx(Hc,{onClick:t=>B(t,e),variant:"outline",size:"sm",className:"text-blue-600",title:"Edit",children:Ae.jsx(Bn,{className:"w-4 h-4"})}),Ae.jsx(Hc,{onClick:t=>z(t,e),variant:"outline",size:"sm",className:"text-yellow-600",title:e.is_active?"Deactivate":"Activate",children:e.is_active?Ae.jsx(jn,{className:"w-4 h-4"}):Ae.jsx(wn,{className:"w-4 h-4"})}),Ae.jsx(Hc,{onClick:t=>q(t,e.id),variant:"outline",size:"sm",className:"text-red-600",title:"Delete",children:Ae.jsx(ra,{className:"w-4 h-4"})})]})]}):Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2 truncate",title:e.name,children:e.name}),Ae.jsx("div",{className:"mb-3",children:Ae.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["₱",e.price.toLocaleString()]})}),Ae.jsxs("div",{className:"space-y-2 mb-4 p-3 bg-gray-50 rounded-lg",children:[Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsxs("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[Ae.jsx(Ln,{className:"h-4 w-4"}),"Total Stock:"]}),Ae.jsx("span",{className:"font-bold text-gray-900",children:e.total_stock||0})]}),Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsx("span",{className:"text-sm text-gray-600",children:"Available:"}),Ae.jsx("span",{className:"font-semibold text-green-600",children:e.total_available||0})]}),(e.total_reserved||0)>0&&Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsx("span",{className:"text-sm text-gray-600",children:"Reserved:"}),Ae.jsx("span",{className:"font-semibold text-orange-600",children:e.total_reserved})]}),Ae.jsx("div",{className:"pt-2 border-t border-gray-200",children:Ae.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[Ae.jsx(sn,{className:"h-4 w-4"}),Ae.jsx("span",{children:e.branch_availability&&e.branch_availability.length>0?`${e.branch_availability.filter(e=>e.is_available).length}/${e.branch_availability.length} branches`:"No stock data"})]})})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs(Hc,{onClick:t=>$(t,e),className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[Ae.jsx(sn,{className:"w-4 h-4 mr-2"}),"Manage Stock"]}),Ae.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[Ae.jsx(Hc,{onClick:t=>B(t,e),variant:"outline",size:"sm",className:"text-blue-600 hover:bg-blue-50",title:"Edit Product",children:Ae.jsx(Bn,{className:"w-4 h-4"})}),Ae.jsx(Hc,{onClick:t=>z(t,e),variant:"outline",size:"sm",className:"text-yellow-600 hover:bg-yellow-50",title:e.is_active?"Deactivate":"Activate",children:e.is_active?Ae.jsx(jn,{className:"w-4 h-4"}):Ae.jsx(wn,{className:"w-4 h-4"})}),Ae.jsx(Hc,{onClick:t=>q(t,e.id),variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50",title:"Delete Product",children:Ae.jsx(ra,{className:"w-4 h-4"})})]})]})]})})]},e.id))}),0===t.length&&!n&&Ae.jsxs(td,{className:"p-12 text-center",children:[Ae.jsx(Ln,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Products Found"}),Ae.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by adding your first product to the gallery."}),Ae.jsxs(Hc,{onClick:()=>{V(),i(!0)},children:[Ae.jsx($n,{className:"w-4 h-4 mr-2"}),"Add First Product"]})]}),s&&Ae.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:Ae.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:Ae.jsxs("div",{className:"mt-3",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Ae.jsx("h3",{className:"text-lg font-medium text-gray-900",children:o?"Edit Product":"Add New Product"}),Ae.jsx("button",{onClick:V,className:"text-gray-400 hover:text-gray-600",children:Ae.jsx(ma,{className:"w-6 h-6"})})]}),Ae.jsxs("form",{onSubmit:async e=>{var t,r,n,a;if(e.preventDefault(),c.name&&c.name.trim())if(!c.price||parseFloat(c.price)<0)As.error("Valid price is required");else if(!c.stock_quantity||parseInt(c.stock_quantity)<0)As.error("Valid stock quantity is required");else try{const e=new FormData;e.append("name",c.name.trim()),e.append("description",(c.description||"").trim()),e.append("price",parseFloat(c.price).toString()),e.append("stock_quantity",parseInt(c.stock_quantity).toString()),e.append("is_active",c.is_active?"1":"0"),c.category_id&&e.append("category_id",c.category_id),u.forEach((t,r)=>{e.append(`images[${r}]`,t)}),o?(await kp(String(o.id),e),As.success("Product updated successfully")):(await Sp(e),As.success("Product created successfully")),CH()?o||As.success("Product created successfully"):await L(),V()}catch(s){console.error("Product creation error:",s);let e="Failed to save product";if(null==(r=null==(t=null==s?void 0:s.response)?void 0:t.data)?void 0:r.message)e=s.response.data.message;else if(null==(a=null==(n=null==s?void 0:s.response)?void 0:n.data)?void 0:a.errors){const t=s.response.data.errors;if("object"==typeof t&&null!==t)try{e=Object.values(t).flat().join(", ")}catch(i){e="Validation errors occurred"}}else(null==s?void 0:s.message)&&(e=s.message);As.error(e)}else As.error("Product name is required")},className:"space-y-4",children:[Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product Name"}),Ae.jsx("input",{type:"text",value:c.name,onChange:e=>d({...c,name:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),Ae.jsx("textarea",{value:c.description,onChange:e=>d({...c,description:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price"}),Ae.jsx("input",{type:"number",step:"0.01",min:"0",value:c.price,onChange:e=>d({...c,price:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Stock Quantity"}),Ae.jsx("input",{type:"number",min:"0",value:c.stock_quantity,onChange:e=>d({...c,stock_quantity:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),Ae.jsxs(Tm,{value:c.category_id,onValueChange:e=>d({...c,category_id:e}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select category"})}),Ae.jsx(Fm,{children:R.map(e=>Ae.jsx(Lm,{value:e.id.toString(),children:e.name},e.id))})]})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product Images"}),u.length>0&&Ae.jsx("div",{className:"mt-2 mb-3",children:Ae.jsx("div",{className:"flex gap-2 flex-wrap",children:u.map((e,t)=>Ae.jsxs("div",{className:"relative",children:[Ae.jsx("img",{src:URL.createObjectURL(e),alt:`Preview ${t+1}`,className:"h-32 w-32 object-cover rounded-lg border border-gray-300"}),Ae.jsx("button",{type:"button",onClick:()=>{h(e=>e.filter((e,r)=>r!==t))},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]},t))})}),Ae.jsxs("div",{className:"flex gap-2",children:[Ae.jsxs("button",{type:"button",onClick:()=>{var e;return null==(e=O.current)?void 0:e.click()},disabled:k,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[k?Ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):Ae.jsx(ia,{className:"w-4 h-4"}),"Select Images"]}),Ae.jsx("input",{ref:O,type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=e.target.files;if(t&&t.length>0)for(let r=0;r<t.length;r++){const e=t[r];if(e.type.startsWith("image/"))if(e.size>2097152)As.error(`Image ${e.name} size must be less than 2MB`);else{if(u.length>=4){As.error("Maximum 4 images allowed");break}U(e)}else As.error(`File ${e.name} is not an image`)}},className:"hidden"})]})]}),Ae.jsxs("div",{className:"flex items-center",children:[Ae.jsx("input",{type:"checkbox",id:"is_active",checked:c.is_active,onChange:e=>d({...c,is_active:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),Ae.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),Ae.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[Ae.jsx("button",{type:"button",onClick:V,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),Ae.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-blue-700",children:o?"Update":"Create"})]})]})]})})}),f&&y&&Ae.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:Ae.jsx("div",{className:"relative top-20 mx-auto p-5 border w-2/3 shadow-lg rounded-md bg-white",children:Ae.jsxs("div",{className:"mt-3",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Ae.jsxs("div",{children:[Ae.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[Ae.jsx(sn,{className:"h-5 w-5 text-blue-600"}),"Branch Stock Management"]}),Ae.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Manage product availability across all branches: ",Ae.jsx("strong",{children:y.name})]})]}),Ae.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:Ae.jsx(ma,{className:"w-6 h-6"})})]}),j?Ae.jsxs("div",{className:"py-8 text-center",children:[Ae.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),Ae.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading branch stock..."})]}):Ae.jsxs("div",{children:[Ae.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:[Ae.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Quick Actions"}),Ae.jsxs("div",{className:"flex items-center space-x-4",children:[Ae.jsx("button",{onClick:()=>{const e={};m.forEach(t=>{e[t.branch_id]=10}),S(e)},className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"Set All to 10"}),Ae.jsx("button",{onClick:()=>{const e={};m.forEach(t=>{e[t.branch_id]=0}),S(e)},className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"Set All to 0"}),Ae.jsx("span",{className:"text-xs text-blue-700",children:'Click individual "Save" buttons to update each branch'})]})]}),Ae.jsx("div",{className:"overflow-x-auto",children:Ae.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ae.jsx("thead",{className:"bg-gray-50",children:Ae.jsxs("tr",{children:[Ae.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branch"}),Ae.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Quantity"}),Ae.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available"}),Ae.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),Ae.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(e=>Ae.jsxs("tr",{children:[Ae.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.branch.name}),Ae.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ae.jsx("input",{type:"number",value:N[e.branch_id]??e.stock_quantity,onChange:t=>{const r=parseInt(t.target.value||"0");S(t=>({...t,[e.branch_id]:isNaN(r)?0:r}))},className:"w-24 px-2 py-1 border rounded",min:0})}),Ae.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ae.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+((N[e.branch_id]??e.stock_quantity)-(e.reserved_quantity??0)>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:(N[e.branch_id]??e.stock_quantity)-(e.reserved_quantity??0)})}),Ae.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:Ae.jsx("button",{className:"text-blue-600 hover:text-blue-900",onClick:async()=>{try{const t="http://192.168.100.6:8000/api",r=sessionStorage.getItem("auth_token"),n=N[e.branch_id]??e.stock_quantity;if(!(await fetch(`${t}/products/${y.id}/branches/${e.branch_id}/stock`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:r?`Bearer ${r}`:""},body:JSON.stringify({stock_quantity:n})})).ok)throw new Error("Update failed");As.success("Stock updated"),p(t=>t.map(t=>t.branch_id===e.branch_id?{...t,stock_quantity:n}:t))}catch(t){As.error("Failed to update stock")}},children:"Save"})})]},e.branch_id))})]})})]})]})})})]})},eK=Ct.createContext(null),tK=({children:e})=>Ae.jsx(eK.Provider,{value:null,children:e}),rK=["eye_exam","contact_fitting","follow_up","consultation","emergency"],nK=["scheduled","confirmed","in_progress","completed","cancelled","no_show"],aK=({appointment:e,onSuccess:t,onCancel:r})=>{const[n,a]=Ct.useState(!1),[s,i]=Ct.useState({sphere:"",cylinder:"",axis:"",pd:"",add:""}),[o,l]=Ct.useState({sphere:"",cylinder:"",axis:"",pd:"",add:""}),[c,d]=Ct.useState({vision_acuity:"",additional_notes:"",recommendations:"",lens_type:"",coating:"",follow_up_date:"",follow_up_notes:""}),[u,h]=Ct.useState(""),[m,p]=Ct.useState(!1),[f,x]=Ct.useState(""),[y,v]=Ct.useState(""),g=(e,t,r)=>{"right"===e?i(e=>({...e,[t]:r})):l(e=>({...e,[t]:r}))},b=e=>{if(!e)return 20;const t=e.match(/20\/(\d+)/);return t?parseInt(t[1]):20};Ct.useEffect(()=>{const e=parseFloat(o.sphere)||0,t=parseFloat(s.sphere)||0,r=parseFloat(o.cylinder)||0,n=parseFloat(s.cylinder)||0,a=parseFloat(o.add)||0,i=parseFloat(s.add)||0,l=b(c.vision_acuity),d=b(c.vision_acuity);if(!(o.sphere||s.sphere||o.cylinder||s.cylinder||o.add||s.add||c.vision_acuity))return void v("");let u="";c.vision_acuity&&(l>40||d>40)&&(u="Amblyopia"),!u&&(Math.abs(e-t)>=2||Math.abs(r-n)>=2)&&(u="Anisometropia"),!u&&(a>=1||i>=1)&&(u="Presbyopia"),!u&&(e<=-.5||t<=-.5)&&(u="Myopia"),!u&&(e>=.5||t>=.5)&&(u="Hyperopia"),!u&&(r<=-.5||n<=-.5)&&(u="Astigmatism"),u||0!==e||0!==t||0!==r||0!==n||0!==a||0!==i||(u="None"),u||0===e&&0===t&&0===r&&0===n||(u=Math.abs(e)>Math.abs(r)||Math.abs(t)>Math.abs(n)?e<0||t<0?"Myopia":"Hyperopia":"Astigmatism"),v(u)},[o.sphere,s.sphere,o.cylinder,s.cylinder,o.add,s.add,c.vision_acuity]);return Ae.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:Ae.jsxs("div",{className:"relative top-4 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ae.jsxs("div",{children:[Ae.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[Ae.jsx(wn,{className:"h-6 w-6 text-blue-600"}),"Create Prescription"]}),Ae.jsxs("p",{className:"text-gray-600 mt-1",children:["Patient: ",Ae.jsx("strong",{children:e.patient.name})," | Date: ",e.appointment_date," | Time: ",e.start_time]})]}),Ae.jsx(Hc,{variant:"ghost",onClick:r,children:Ae.jsx(ma,{className:"h-5 w-5"})})]}),Ae.jsxs("form",{onSubmit:async r=>{r.preventDefault(),a(!0);try{const r=sessionStorage.getItem("auth_token");if(!r)throw new Error("No authentication token found. Please log in again.");const a=sessionStorage.getItem("auth_current_user");let l=null;if(a)try{l=JSON.parse(a)}catch(n){console.warn("Could not parse user data:",n)}console.log("Creating prescription with token:",r.substring(0,20)+"..."),console.log("User data:",l);const d=new Date(e.appointment_date),h=new Date(d);h.setFullYear(h.getFullYear()+2);const p={appointment_id:e.id,right_eye:s,left_eye:o,...c,issue_date:e.appointment_date,expiry_date:h.toISOString().split("T")[0],condition:u,trackable:m,referral_notes:f};console.log("Request body:",p),console.log("API URL:","http://192.168.100.6:8000/api/prescriptions");const x=await fetch("http://192.168.100.6:8000/api/prescriptions",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(p)});if(console.log("Response status:",x.status),console.log("Response headers:",Object.fromEntries(x.headers.entries())),!x.ok){let e="Failed to create prescription";const t=x.clone();try{const t=await x.json();e=t.message||t.error||e,console.error("Error response:",t),console.error("Full error object:",JSON.stringify(t,null,2))}catch(n){try{const r=await t.text();console.error("Error text:",r),e=`HTTP ${x.status}: ${r}`}catch(i){console.error("Could not read response as text:",i),e=`HTTP ${x.status}: Unable to read error details`}}throw 401===x.status&&(e="Authentication failed (401). Token may be invalid or expired. Please log out and log back in."),new Error(e)}const y=await x.json();console.log("Prescription created successfully:",y),As.success("Prescription created successfully"),t()}catch(l){console.error("Prescription creation error:",l),As.error(l.message||"Failed to create prescription")}finally{a(!1)}},className:"space-y-6",children:[Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{className:"text-lg",children:"Eye Examination Results"})}),Ae.jsxs(sd,{className:"space-y-6",children:[Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"text-md font-semibold mb-4 text-blue-700",children:"Right Eye (OD)"}),Ae.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"right_sphere",children:"Sphere"}),Ae.jsx(Yc,{id:"right_sphere",type:"number",step:"0.25",value:s.sphere,onChange:e=>g("right","sphere",e.target.value),placeholder:"e.g., -2.50"})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"right_cylinder",children:"Cylinder"}),Ae.jsx(Yc,{id:"right_cylinder",type:"number",step:"0.25",value:s.cylinder,onChange:e=>g("right","cylinder",e.target.value),placeholder:"e.g., -1.25"})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"right_axis",children:"Axis"}),Ae.jsx(Yc,{id:"right_axis",type:"number",min:"0",max:"180",value:s.axis,onChange:e=>g("right","axis",e.target.value),placeholder:"e.g., 90"})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"right_add",children:"Add"}),Ae.jsx(Yc,{id:"right_add",type:"number",step:"0.25",min:"0",max:"4.00",value:s.add,onChange:e=>g("right","add",e.target.value),placeholder:"e.g., +2.00"})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"right_pd",children:"PD"}),Ae.jsx(Yc,{id:"right_pd",type:"number",step:"0.5",value:s.pd,onChange:e=>g("right","pd",e.target.value),placeholder:"e.g., 32.5"})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"text-md font-semibold mb-4 text-green-700",children:"Left Eye (OS)"}),Ae.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"left_sphere",children:"Sphere"}),Ae.jsx(Yc,{id:"left_sphere",type:"number",step:"0.25",value:o.sphere,onChange:e=>g("left","sphere",e.target.value),placeholder:"e.g., -2.50"})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"left_cylinder",children:"Cylinder"}),Ae.jsx(Yc,{id:"left_cylinder",type:"number",step:"0.25",value:o.cylinder,onChange:e=>g("left","cylinder",e.target.value),placeholder:"e.g., -1.25"})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"left_axis",children:"Axis"}),Ae.jsx(Yc,{id:"left_axis",type:"number",min:"0",max:"180",value:o.axis,onChange:e=>g("left","axis",e.target.value),placeholder:"e.g., 90"})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"left_add",children:"Add"}),Ae.jsx(Yc,{id:"left_add",type:"number",step:"0.25",min:"0",max:"4.00",value:o.add,onChange:e=>g("left","add",e.target.value),placeholder:"e.g., +2.00"})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"left_pd",children:"PD"}),Ae.jsx(Yc,{id:"left_pd",type:"number",step:"0.5",value:o.pd,onChange:e=>g("left","pd",e.target.value),placeholder:"e.g., 32.5"})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"vision_acuity",children:"Vision Acuity"}),Ae.jsx(Yc,{id:"vision_acuity",value:c.vision_acuity,onChange:e=>d(t=>({...t,vision_acuity:e.target.value})),placeholder:"e.g., 20/20, 20/25"})]}),Ae.jsxs("div",{children:[Ae.jsxs(Zc,{htmlFor:"condition",children:["Condition ",y&&"(Suggested)"]}),Ae.jsxs(Tm,{value:u||y,onValueChange:e=>{h(e);p(["None","Other","Myopia","Hyperopia","Astigmatism","Presbyopia","Anisometropia","Amblyopia"].includes(e)),x("")},children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"-- Select Condition --"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"None",children:"None"}),Ae.jsx(Lm,{value:"Other",children:"Other"}),Ae.jsx("div",{className:"px-2 py-1.5 text-sm font-semibold text-gray-500 border-t mt-1 pt-2",children:"Trackable Conditions"}),Ae.jsx(Lm,{value:"Myopia",children:"Myopia"}),Ae.jsx(Lm,{value:"Hyperopia",children:"Hyperopia"}),Ae.jsx(Lm,{value:"Astigmatism",children:"Astigmatism"}),Ae.jsx(Lm,{value:"Presbyopia",children:"Presbyopia"}),Ae.jsx(Lm,{value:"Anisometropia",children:"Anisometropia"}),Ae.jsx(Lm,{value:"Amblyopia",children:"Amblyopia"}),Ae.jsx("div",{className:"px-2 py-1.5 text-sm font-semibold text-gray-500 border-t mt-1 pt-2",children:"Referral Conditions"}),Ae.jsx(Lm,{value:"Strabismus",children:"Strabismus"}),Ae.jsx(Lm,{value:"Keratoconus",children:"Keratoconus"}),Ae.jsx(Lm,{value:"Cataract",children:"Cataract"}),Ae.jsx(Lm,{value:"Glaucoma",children:"Glaucoma"}),Ae.jsx(Lm,{value:"Macular Degeneration",children:"Macular Degeneration"}),Ae.jsx(Lm,{value:"Corneal Scar/Disease",children:"Corneal Scar/Disease"}),Ae.jsx(Lm,{value:"Post-surgery / Trauma",children:"Post-surgery / Trauma"})]})]}),y&&Ae.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["💡 System Suggestion: ",y]})]}),u&&!m&&Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"referral_notes",children:"Referral Notes"}),Ae.jsx(ph,{id:"referral_notes",value:f,onChange:e=>x(e.target.value),placeholder:"Enter referral notes if needed",rows:3})]})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{className:"text-lg",children:"Prescription Recommendations"})}),Ae.jsxs(sd,{className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"lens_type",children:"Lens Type"}),Ae.jsxs(Tm,{value:c.lens_type,onValueChange:e=>d(t=>({...t,lens_type:e})),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select lens type"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"single",children:"Single Vision"}),Ae.jsx(Lm,{value:"bifocal",children:"Bifocal"}),Ae.jsx(Lm,{value:"progressive",children:"Progressive"}),Ae.jsx(Lm,{value:"reading",children:"Reading"}),Ae.jsx(Lm,{value:"computer",children:"Computer"})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"coating",children:"Coating"}),Ae.jsxs(Tm,{value:c.coating,onValueChange:e=>d(t=>({...t,coating:e})),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select coating"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"none",children:"None"}),Ae.jsx(Lm,{value:"anti_reflective",children:"Anti-Reflective"}),Ae.jsx(Lm,{value:"uv_protection",children:"UV Protection"}),Ae.jsx(Lm,{value:"blue_light",children:"Blue Light Filter"}),Ae.jsx(Lm,{value:"photochromic",children:"Photochromic"})]})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"recommendations",children:"Recommendations"}),Ae.jsx(ph,{id:"recommendations",value:c.recommendations,onChange:e=>d(t=>({...t,recommendations:e.target.value})),placeholder:"Enter any specific recommendations for the patient...",rows:3})]})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{className:"text-lg",children:"Additional Information"})}),Ae.jsxs(sd,{className:"space-y-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"additional_notes",children:"Additional Notes"}),Ae.jsx(ph,{id:"additional_notes",value:c.additional_notes,onChange:e=>d(t=>({...t,additional_notes:e.target.value})),placeholder:"Enter any additional notes about the examination...",rows:3})]}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"follow_up_date",children:"Follow-up Date"}),Ae.jsx(Yc,{id:"follow_up_date",type:"date",value:c.follow_up_date,onChange:e=>d(t=>({...t,follow_up_date:e.target.value})),min:(new Date).toISOString().split("T")[0]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"follow_up_notes",children:"Follow-up Notes"}),Ae.jsx(Yc,{id:"follow_up_notes",value:c.follow_up_notes,onChange:e=>d(t=>({...t,follow_up_notes:e.target.value})),placeholder:"Follow-up instructions..."})]})]})]})]}),Ae.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[Ae.jsx(Hc,{type:"button",variant:"outline",onClick:r,disabled:n,children:"Cancel"}),Ae.jsxs(Hc,{type:"submit",disabled:n,className:"flex items-center gap-2",children:[n?Ae.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):Ae.jsx(Hn,{className:"h-4 w-4"}),n?"Creating...":"Create Prescription"]})]})]})]})})},sK=()=>{const{user:e}=Rc(),[t,r]=Ct.useState("all"),[n,a]=Ct.useState("all"),[s,i]=Ct.useState("all"),[o,l]=Ct.useState(!1),[c,d]=Ct.useState(null),{appointments:u,loading:h,error:m,refetch:p}=ih({status:"all"!==t?t:void 0,type:"all"!==n?n:void 0,branch_id:"all"!==s?s:void 0}),f=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-green-100 text-green-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"no_show":return"bg-orange-100 text-orange-800"}},x=e=>{switch(e){case"eye_exam":return"bg-purple-100 text-purple-800";case"contact_fitting":return"bg-indigo-100 text-indigo-800";case"follow_up":return"bg-cyan-100 text-cyan-800";case"consultation":return"bg-teal-100 text-teal-800";case"emergency":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return h?Ae.jsx("div",{className:"flex items-center justify-center h-64",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Ae.jsx("p",{className:"mt-4 text-gray-600",children:"Loading appointments..."})]})}):m?Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx("p",{className:"text-red-600 mb-4",children:m}),Ae.jsxs(Hc,{onClick:p,children:[Ae.jsx(Vn,{className:"h-4 w-4 mr-2"}),"Try Again"]})]}):Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"All Appointments"}),Ae.jsx("p",{className:"text-gray-600",children:"Manage all appointments - you can proceed with any appointment"})]}),Ae.jsxs(Hc,{children:[Ae.jsx(ln,{className:"h-4 w-4 mr-2"}),"Schedule New Appointment"]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(wn,{className:"h-5 w-5"}),Ae.jsx("span",{children:"Filters"})]})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ae.jsxs(Tm,{value:t,onValueChange:r,children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Filter by status"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"all",children:"All Statuses"}),nK.map(e=>Ae.jsx(Lm,{value:e,children:e.replace("_"," ").toUpperCase()},e))]})]}),Ae.jsxs(Tm,{value:n,onValueChange:a,children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Filter by type"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"all",children:"All Types"}),rK.map(e=>Ae.jsx(Lm,{value:e,children:e.replace("_"," ").toUpperCase()},e))]})]}),Ae.jsx(Mp,{selectedBranchId:s,onBranchChange:i,showAllOption:!0,label:"Filter by Branch",placeholder:"All Branches",useAdminData:!1}),Ae.jsx(Hc,{variant:"outline",onClick:()=>{r("all"),a("all"),i("all")},children:"Clear Filters"})]})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{children:["All Appointments (",u.length,")"]}),Ae.jsxs(ad,{children:["Showing all appointments across all branches and optometrists","all"!==t&&` • Filtered by status: ${t}`,"all"!==n&&` • Filtered by type: ${n}`,"all"!==s&&` • Filtered by branch: ${s}`]})]}),Ae.jsxs(sd,{children:[Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Patient"}),Ae.jsx(Gm,{children:"Branch"}),Ae.jsx(Gm,{children:"Date & Time"}),Ae.jsx(Gm,{children:"Type"}),Ae.jsx(Gm,{children:"Status"}),Ae.jsx(Gm,{children:"Assigned To"}),Ae.jsx(Gm,{children:"Actions"})]})}),Ae.jsx(Km,{children:u.map(t=>{var r,n,a,s,i,o,c;return Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ca,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{className:"font-medium",children:(null==(r=t.patient)?void 0:r.name)||"Unknown Patient"})]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(sn,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{className:"font-medium",children:(null==(n=t.branch)?void 0:n.name)||"Unknown Branch"})]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{children:(c=t.appointment_date,new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))}),Ae.jsx(yn,{className:"h-4 w-4 text-gray-400 ml-2"}),Ae.jsx("span",{children:(o=t.start_time,new Date(`1970-01-01T${o}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}))})]})}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{className:x(t.type),children:String(t.type).replace("_"," ")})}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{className:f(t.status),children:String(t.status).replace("_"," ")})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ca,{className:"h-4 w-4 text-gray-400"}),Ae.jsxs("span",{className:"font-medium "+((null==(a=t.optometrist)?void 0:a.id)===(null==e?void 0:e.id)?"text-green-600":t.optometrist?"text-blue-600":"text-gray-500"),children:[(null==(s=t.optometrist)?void 0:s.name)||"Unassigned",(null==(i=t.optometrist)?void 0:i.id)===(null==e?void 0:e.id)&&" (You)"]})]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsxs(Hc,{size:"sm",variant:"outline",children:[Ae.jsx(wn,{className:"h-4 w-4 mr-1"}),"View"]}),"scheduled"===t.status||"confirmed"===t.status?Ae.jsxs(Hc,{size:"sm",variant:"default",className:"bg-blue-600 hover:bg-blue-700",children:[Ae.jsx(ca,{className:"h-4 w-4 mr-1"}),"Take Over"]}):"in_progress"===t.status&&Ae.jsxs(Hc,{size:"sm",variant:"default",onClick:()=>(e=>{d(e),l(!0)})(t),className:"bg-green-600 hover:bg-green-700",children:[Ae.jsx(wn,{className:"h-4 w-4 mr-1"}),"Create Prescription"]})]})})]},t.id)})})]}),0===u.length&&Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx(ln,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ae.jsx("p",{className:"text-gray-600",children:"No appointments found"})]})]})]}),o&&c&&Ae.jsx(aK,{appointment:c,onSuccess:()=>{l(!1),d(null),p()},onCancel:()=>{l(!1),d(null)}})]})},iK=()=>{var e;const{user:t}=Rc(),{toast:r}=Jt();Dt();const[n,a]=Ct.useState(""),[s,i]=Ct.useState("all"),[o,l]=Ct.useState("all"),[c,d]=Ct.useState(null),[u,h]=Ct.useState(!1),[m,p]=Ct.useState(!1),[f,x]=Ct.useState(null),{appointments:y,loading:v,error:g,refetch:b}=ih({status:"all"!==s?s:void 0,type:"all"!==o?o:void 0,patient_name:n||void 0});console.log("StaffAppointments - appointments data:",y),console.log("StaffAppointments - user:",t);const{update:j,loading:w}=lh(),N=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-green-100 text-green-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"no_show":return"bg-orange-100 text-orange-800"}},S=e=>{switch(e){case"eye_exam":return"bg-purple-100 text-purple-800";case"contact_fitting":return"bg-indigo-100 text-indigo-800";case"follow_up":return"bg-cyan-100 text-cyan-800";case"consultation":return"bg-teal-100 text-teal-800";case"emergency":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),_=e=>new Date(`1970-01-01T${e}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),O=async(e,t)=>{try{await j(e,{status:t}),r({title:"Status Updated",description:`Appointment status changed to ${t.replace("_"," ")}`}),b()}catch(n){r({title:"Error",description:"Failed to update appointment status",variant:"destructive"})}};return v?Ae.jsx("div",{className:"flex items-center justify-center h-64",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Ae.jsx("p",{className:"mt-4 text-gray-600",children:"Loading appointments..."})]})}):g?Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx("p",{className:"text-red-600 mb-4",children:g}),Ae.jsx(Hc,{onClick:b,children:"Try Again"})]}):Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Appointment Management"}),Ae.jsxs("p",{className:"text-gray-600",children:["Manage appointments for your branch - ",(null==(e=null==t?void 0:t.branch)?void 0:e.name)||"Current Branch"]})]}),Ae.jsxs("div",{className:"flex gap-2",children:[Ae.jsxs(Hc,{variant:"outline",onClick:()=>h(!0),children:[Ae.jsx($n,{className:"h-4 w-4 mr-2"}),"New Walk-in"]}),Ae.jsxs(Hc,{onClick:b,disabled:v,children:[Ae.jsx(ln,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(kn,{className:"h-5 w-5"}),Ae.jsx("span",{children:"Filters"})]})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ae.jsxs("div",{className:"relative",children:[Ae.jsx(Yn,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Ae.jsx(Yc,{placeholder:"Search by patient name...",value:n,onChange:e=>a(e.target.value),className:"pl-10"})]}),Ae.jsxs(Tm,{value:s,onValueChange:i,children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Filter by status"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"all",children:"All Statuses"}),nK.map(e=>Ae.jsx(Lm,{value:e,children:e.replace("_"," ").toUpperCase()},e))]})]}),Ae.jsxs(Tm,{value:o,onValueChange:l,children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Filter by type"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"all",children:"All Types"}),rK.map(e=>Ae.jsx(Lm,{value:e,children:e.replace("_"," ").toUpperCase()},e))]})]}),Ae.jsx(Hc,{variant:"outline",onClick:()=>{a(""),i("all"),l("all")},children:"Clear Filters"})]})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{children:["Appointments (",y.length,")"]}),Ae.jsxs(ad,{children:["all"!==s&&`Filtered by status: ${s}`,"all"!==o&&`, type: ${o}`]})]}),Ae.jsxs(sd,{children:[Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{className:"w-[150px]",children:"Patient"}),Ae.jsx(Gm,{className:"w-[150px]",children:"Optometrist"}),Ae.jsx(Gm,{className:"w-[180px]",children:"Date & Time"}),Ae.jsx(Gm,{className:"w-[120px]",children:"Type"}),Ae.jsx(Gm,{className:"w-[100px]",children:"Status"}),Ae.jsx(Gm,{className:"w-[300px]",children:"Actions"})]})}),Ae.jsx(Km,{children:y.map(e=>{var t,r,n,a;return Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ca,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{className:"font-medium",children:(null==(t=e.patient)?void 0:t.name)||"Unknown Patient"})]})}),Ae.jsx(Xm,{children:(null==(r=e.optometrist)?void 0:r.name)||"Unknown Optometrist"}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{children:k(e.appointment_date)}),Ae.jsx(yn,{className:"h-4 w-4 text-gray-400 ml-2"}),Ae.jsx("span",{children:_(e.start_time)})]})}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{className:S(e.type),children:e.type.replace("_"," ")})}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{className:N(e.status),children:e.status.replace("_"," ")})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-1",children:[Ae.jsxs(Vp,{children:[Ae.jsx(Wp,{asChild:!0,children:Ae.jsx(Hc,{variant:"ghost",size:"sm",onClick:()=>d(e),children:Ae.jsx(wn,{className:"h-4 w-4"})})}),Ae.jsxs(Yp,{className:"max-w-2xl",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Appointment Details"}),Ae.jsx(Jp,{children:"View detailed information about this appointment"})]}),c&&Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Patient"}),Ae.jsx("p",{className:"text-sm text-gray-900",children:(null==(n=c.patient)?void 0:n.name)||"Unknown Patient"})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Optometrist"}),Ae.jsx("p",{className:"text-sm text-gray-900",children:(null==(a=c.optometrist)?void 0:a.name)||"Unknown Optometrist"})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date"}),Ae.jsx("p",{className:"text-sm text-gray-900",children:k(c.appointment_date)})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Time"}),Ae.jsxs("p",{className:"text-sm text-gray-900",children:[_(c.start_time)," - ",_(c.end_time)]})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Type"}),Ae.jsx(Yd,{className:S(c.type),children:c.type.replace("_"," ")})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),Ae.jsx(Yd,{className:N(c.status),children:c.status.replace("_"," ")})]})]}),c.notes&&Ae.jsxs("div",{children:[Ae.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notes"}),Ae.jsx("p",{className:"text-sm text-gray-900 mt-1",children:c.notes})]})]})]})]}),Ae.jsxs("div",{className:"flex flex-wrap gap-1",children:["scheduled"===e.status&&Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>O(e.id.toString(),"confirmed"),disabled:w,className:"text-green-700 border-green-200 hover:bg-green-50",children:[Ae.jsx(dn,{className:"h-3 w-3 mr-1"}),"Confirm"]}),"confirmed"===e.status&&Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>O(e.id.toString(),"in_progress"),disabled:w,className:"text-blue-700 border-blue-200 hover:bg-blue-50",children:[Ae.jsx(yn,{className:"h-3 w-3 mr-1"}),"Start"]}),"in_progress"===e.status&&Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>O(e.id.toString(),"completed"),disabled:w,className:"text-green-700 border-green-200 hover:bg-green-50",children:[Ae.jsx(dn,{className:"h-3 w-3 mr-1"}),"Complete"]}),["scheduled","confirmed"].includes(e.status)&&Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(e=>{x({appointmentId:e.id.toString(),newDate:e.appointment_date,newTime:e.start_time}),p(!0)})(e),className:"text-orange-700 border-orange-200 hover:bg-orange-50",children:[Ae.jsx(Wn,{className:"h-3 w-3 mr-1"}),"Reschedule"]}),["scheduled","confirmed"].includes(e.status)&&Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(async e=>{confirm("Cancel this appointment? This action cannot be undone.")&&await O(e,"cancelled")})(e.id.toString()),disabled:w,className:"text-red-700 border-red-200 hover:bg-red-50",children:[Ae.jsx(ha,{className:"h-3 w-3 mr-1"}),"Cancel"]}),["scheduled","confirmed"].includes(e.status)&&Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(async e=>{confirm('Mark this appointment as "No Show"? This action cannot be undone.')&&await O(e,"no_show")})(e.id.toString()),disabled:w,className:"text-amber-700 border-amber-200 hover:bg-amber-50",children:[Ae.jsx(ca,{className:"h-3 w-3 mr-1"}),"No Show"]})]})]})})]},e.id)})})]}),0===y.length&&Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx(ln,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ae.jsx("p",{className:"text-gray-600",children:"No appointments found"})]})]})]}),Ae.jsx(Vp,{open:m,onOpenChange:p,children:Ae.jsxs(Yp,{children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Reschedule Appointment"}),Ae.jsx(Jp,{children:"Select a new date and time for this appointment"})]}),f&&Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"reschedule-date",children:"New Date"}),Ae.jsx(Yc,{id:"reschedule-date",type:"date",value:f.newDate,onChange:e=>x({...f,newDate:e.target.value}),min:(new Date).toISOString().split("T")[0]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"reschedule-time",children:"New Time"}),Ae.jsx(Yc,{id:"reschedule-time",type:"time",value:f.newTime,onChange:e=>x({...f,newTime:e.target.value})})]}),Ae.jsxs("div",{className:"flex justify-end space-x-2",children:[Ae.jsx(Hc,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),Ae.jsx(Hc,{onClick:async()=>{if(f)try{const[e,t]=f.newTime.split(":"),n=`${e}:${t}`,a=`${parseInt(e)+1}:${t}`;await j(f.appointmentId,{appointment_date:f.newDate,start_time:n,end_time:a}),r({title:"Appointment Rescheduled",description:"The appointment has been successfully rescheduled"}),p(!1),x(null),b()}catch(e){r({title:"Error",description:"Failed to reschedule appointment",variant:"destructive"})}},disabled:w,children:w?"Rescheduling...":"Reschedule"})]})]})]})}),Ae.jsx(Vp,{open:u,onOpenChange:h,children:Ae.jsxs(Yp,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"New Walk-in Appointment"}),Ae.jsx(Jp,{children:"Create a new appointment for a walk-in customer"})]}),Ae.jsx(cH,{onSuccess:()=>{h(!1),b(),r({title:"Appointment Created",description:"Walk-in appointment has been successfully created"})}})]})})]})},oK=Cc.create({baseURL:"http://192.168.100.6:8000/api",headers:{"Content-Type":"application/json",Accept:"application/json"}});oK.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),oK.interceptors.response.use(e=>e,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const lK=()=>{const{user:e}=Rc(),[t,r]=Ct.useState([]),[n,a]=Ct.useState(!0),[s,i]=Ct.useState(null),[o,l]=Ct.useState(""),[c,d]=Ct.useState(null),[u,h]=Ct.useState(null),[m,p]=Ct.useState(!1);Ct.useEffect(()=>{(null==e?void 0:e.id)?f():null===e&&a(!1)},[null==e?void 0:e.id,e]);const f=async()=>{var e,t;try{a(!0),i(null);const e=await(async()=>(await oK.get("/optometrist/patients")).data)();r(e.data)}catch(n){console.error("Error loading patients:",n),401===(null==(e=n.response)?void 0:e.status)?i("Please log in to view patient records"):403===(null==(t=n.response)?void 0:t.status)?i("You do not have permission to view patient records"):i(n instanceof Error?n.message:"Failed to load patients")}finally{a(!1)}},x=async e=>{try{p(!0);const t=await(async e=>(await oK.get(`/optometrist/patients/${e}`)).data)(e);h(t)}catch(t){console.error("Error loading patient details:",t)}finally{p(!1)}},y=t.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.email.toLowerCase().includes(o.toLowerCase())||e.phone&&e.phone.includes(o)),v=e=>"active"===e?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800";return n?Ae.jsxs("div",{className:"p-6 flex items-center justify-center",children:[Ae.jsx(Tn,{className:"h-8 w-8 animate-spin"}),Ae.jsx("span",{className:"ml-2",children:"Loading patients..."})]}):s?Ae.jsxs("div",{className:"p-6",children:[Ae.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-4",children:[Ae.jsx(Qr,{className:"h-5 w-5"}),Ae.jsxs("span",{children:["Error: ",s]})]}),Ae.jsx(Hc,{onClick:f,children:"Retry"})]}):Ae.jsxs("div",{className:"p-6",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ae.jsx("h1",{className:"text-2xl font-bold",children:"Patient Records"}),Ae.jsxs(Hc,{children:[Ae.jsx(ca,{className:"mr-2 h-4 w-4"}),"Add New Patient"]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:"Patient Management"}),Ae.jsx(ad,{children:"Manage your patient records and medical history"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"mb-4",children:Ae.jsxs("div",{className:"relative",children:[Ae.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),Ae.jsx(Yc,{placeholder:"Search patients by name, email, or phone...",value:o,onChange:e=>l(e.target.value),className:"pl-10"})]})}),0===y.length?Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx(ca,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Patients Found"}),Ae.jsx("p",{className:"text-gray-600",children:"No patients match your search criteria."})]}):Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Patient"}),Ae.jsx(Gm,{children:"Last Visit"}),Ae.jsx(Gm,{children:"Prescriptions"}),Ae.jsx(Gm,{children:"Status"}),Ae.jsx(Gm,{children:"Actions"})]})}),Ae.jsx(Km,{children:y.map(e=>Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{children:Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium",children:e.name}),Ae.jsx("p",{className:"text-sm text-gray-500",children:e.email})]})}),Ae.jsx(Xm,{children:e.last_visit?Ju(new Date(e.last_visit),"MMM d, yyyy"):"N/A"}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{variant:"outline",children:e.total_prescriptions})}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{className:v(e.status),children:e.status})}),Ae.jsx(Xm,{children:Ae.jsxs(Vp,{children:[Ae.jsx(Wp,{asChild:!0,children:Ae.jsx(Hc,{size:"sm",variant:"outline",onClick:()=>{d(e),x(e.id)},children:Ae.jsx(Sn,{className:"h-4 w-4"})})}),Ae.jsxs(Yp,{className:"max-w-4xl",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Patient Details & Prescription History"}),Ae.jsx(Jp,{children:"Complete patient information and prescription history"})]}),c&&u&&Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"font-semibold mb-2",children:"Basic Information"}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium",children:"Name"}),Ae.jsx("p",{children:u.patient.name})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium",children:"Email"}),Ae.jsx("p",{children:u.patient.email})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium",children:"Phone"}),Ae.jsx("p",{children:u.patient.phone||"N/A"})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium",children:"Date of Birth"}),Ae.jsx("p",{children:u.patient.date_of_birth||"N/A"})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"font-semibold mb-4",children:"Appointment History"}),0===u.appointments.length?Ae.jsx("p",{className:"text-gray-500",children:"No appointments found for this patient."}):Ae.jsx("div",{className:"space-y-2",children:u.appointments.map(e=>Ae.jsx(td,{children:Ae.jsxs(sd,{className:"p-3",children:[Ae.jsxs("div",{className:"flex justify-between items-start",children:[Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium",children:e.type}),Ae.jsxs("p",{className:"text-sm text-gray-500",children:[Ju(new Date(e.date),"MMM d, yyyy")," at ",e.time]}),e.branch&&Ae.jsx("p",{className:"text-sm text-gray-500",children:e.branch.name})]}),Ae.jsx(Yd,{className:v(e.status),children:e.status})]}),e.notes&&Ae.jsx("p",{className:"text-sm mt-2 text-gray-600",children:e.notes})]})},e.id))})]}),Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"font-semibold mb-4",children:"Prescription History"}),m?Ae.jsxs("div",{className:"flex items-center justify-center py-4",children:[Ae.jsx(Tn,{className:"h-6 w-6 animate-spin"}),Ae.jsx("span",{className:"ml-2",children:"Loading prescriptions..."})]}):0===u.prescriptions.length?Ae.jsx("p",{className:"text-gray-500",children:"No prescriptions found for this patient."}):Ae.jsx("div",{className:"space-y-3",children:u.prescriptions.map(e=>{var t,r,n,a,s,i,o,l,c;return Ae.jsx(td,{children:Ae.jsxs(sd,{className:"p-4",children:[Ae.jsxs("div",{className:"flex justify-between items-start mb-2",children:[Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium",children:null==(t=e.type)?void 0:t.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}),Ae.jsx("p",{className:"text-sm text-gray-500",children:Ju(new Date(e.issue_date),"MMM d, yyyy")})]}),Ae.jsx(Yd,{className:v(e.status),children:e.status})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ae.jsxs("div",{children:[Ae.jsx("h5",{className:"font-medium",children:"Right Eye (OD)"}),Ae.jsxs("p",{children:["S: ",(null==(r=e.right_eye)?void 0:r.sphere)||"N/A"]}),Ae.jsxs("p",{children:["C: ",(null==(n=e.right_eye)?void 0:n.cylinder)||"N/A"]}),Ae.jsxs("p",{children:["A: ",(null==(a=e.right_eye)?void 0:a.axis)||"N/A"]}),Ae.jsxs("p",{children:["PD: ",(null==(s=e.right_eye)?void 0:s.pd)||"N/A"]})]}),Ae.jsxs("div",{children:[Ae.jsx("h5",{className:"font-medium",children:"Left Eye (OS)"}),Ae.jsxs("p",{children:["S: ",(null==(i=e.left_eye)?void 0:i.sphere)||"N/A"]}),Ae.jsxs("p",{children:["C: ",(null==(o=e.left_eye)?void 0:o.cylinder)||"N/A"]}),Ae.jsxs("p",{children:["A: ",(null==(l=e.left_eye)?void 0:l.axis)||"N/A"]}),Ae.jsxs("p",{children:["PD: ",(null==(c=e.left_eye)?void 0:c.pd)||"N/A"]})]})]}),e.vision_acuity&&Ae.jsx("div",{className:"mt-2 text-sm",children:Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Vision Acuity:"})," ",e.vision_acuity]})}),e.additional_notes&&Ae.jsx("div",{className:"mt-2 text-sm",children:Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Notes:"})," ",e.additional_notes]})}),e.recommendations&&Ae.jsx("div",{className:"mt-2 text-sm",children:Ae.jsxs("p",{children:[Ae.jsx("strong",{children:"Recommendations:"})," ",e.recommendations]})})]})},e.id)})})]})]})]})]})})]},e.id))})]})]})]})]})},cK=()=>{var e,t;const{user:r}=Rc();Jt();const[n,a]=Ct.useState([]),[s,i]=Ct.useState([]),[o,l]=Ct.useState(!0),[c,d]=Ct.useState(null),[u,h]=Ct.useState(!1),[m,p]=Ct.useState(null);Ct.useEffect(()=>{(null==r?void 0:r.id)?f():null===r&&l(!1)},[null==r?void 0:r.id,r]);const f=async()=>{try{l(!0),d(null),await Promise.all([x(),y()])}catch(e){console.error("Error loading data:",e),d(e instanceof Error?e.message:"Failed to load data")}finally{l(!1)}},x=async()=>{var e,t;try{const e=await(async()=>(await oK.get("/optometrist/prescriptions")).data)();a(e.data)}catch(r){throw console.error("Error loading prescriptions:",r),401===(null==(e=r.response)?void 0:e.status)?d("Please log in to view prescriptions"):403===(null==(t=r.response)?void 0:t.status)?d("You do not have permission to view prescriptions"):d(r instanceof Error?r.message:"Failed to load prescriptions"),r}},y=async()=>{try{const e=(await(async()=>(await oK.get("/optometrist/appointments")).data)()).data.filter(e=>"in_progress"===e.status);i(e)}catch(e){throw console.error("Error loading appointments:",e),e}},v=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";case"updated":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return o?Ae.jsxs("div",{className:"p-6 flex items-center justify-center",children:[Ae.jsx(Tn,{className:"h-8 w-8 animate-spin"}),Ae.jsx("span",{className:"ml-2",children:"Loading prescriptions..."})]}):c?Ae.jsxs("div",{className:"p-6",children:[Ae.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-4",children:[Ae.jsx(Qr,{className:"h-5 w-5"}),Ae.jsxs("span",{children:["Error: ",c]})]}),Ae.jsx(Hc,{onClick:f,children:"Retry"})]}):Ae.jsxs("div",{className:"p-6",children:[u&&m&&Ae.jsx(aK,{appointment:{id:m.id,patient:{id:(null==(e=m.patient)?void 0:e.id)||0,name:(null==(t=m.patient)?void 0:t.name)||"Unknown"},appointment_date:m.date,start_time:m.start_time,type:m.type},onSuccess:async()=>{h(!1),p(null),await f()},onCancel:()=>{h(!1),p(null)}}),Ae.jsx("div",{className:"flex justify-between items-center mb-6",children:Ae.jsx("h1",{className:"text-2xl font-bold",children:"Prescription Management"})}),s.length>0&&Ae.jsxs(td,{className:"mb-6",children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:"In-Progress Appointments"}),Ae.jsx(ad,{children:"Create prescriptions for these appointments"})]}),Ae.jsx(sd,{children:Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Patient"}),Ae.jsx(Gm,{children:"Date"}),Ae.jsx(Gm,{children:"Time"}),Ae.jsx(Gm,{children:"Type"}),Ae.jsx(Gm,{children:"Branch"}),Ae.jsx(Gm,{children:"Action"})]})}),Ae.jsx(Km,{children:s.map(e=>{var t,r,n;return Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{children:Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium",children:(null==(t=e.patient)?void 0:t.name)||"Unknown"}),Ae.jsx("p",{className:"text-sm text-gray-500",children:null==(r=e.patient)?void 0:r.email})]})}),Ae.jsx(Xm,{children:Ju(new Date(e.date),"MMM d, yyyy")}),Ae.jsx(Xm,{children:e.start_time}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{variant:"outline",children:e.type})}),Ae.jsx(Xm,{children:(null==(n=e.branch)?void 0:n.name)||"N/A"}),Ae.jsx(Xm,{children:Ae.jsxs(Hc,{size:"sm",onClick:()=>(e=>{p(e),h(!0)})(e),className:"flex items-center gap-2",children:[Ae.jsx($n,{className:"h-4 w-4"}),"Create Prescription"]})})]},e.id)})})]})})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:"All Prescriptions"}),Ae.jsx(ad,{children:"Manage and track all patient prescriptions"})]}),Ae.jsx(sd,{children:0===n.length?Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx(Sn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Prescriptions Found"}),Ae.jsx("p",{className:"text-gray-600",children:"Create your first prescription to get started."})]}):Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Patient"}),Ae.jsx(Gm,{children:"Date"}),Ae.jsx(Gm,{children:"Type"}),Ae.jsx(Gm,{children:"Right Eye (OD)"}),Ae.jsx(Gm,{children:"Left Eye (OS)"}),Ae.jsx(Gm,{children:"Vision Acuity"}),Ae.jsx(Gm,{children:"Status"}),Ae.jsx(Gm,{children:"Actions"})]})}),Ae.jsx(Km,{children:n.map(e=>{var t,r,n,a,s,i,o,l,c,d,u;return Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{children:Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium",children:(null==(t=e.patient)?void 0:t.name)||"Unknown"}),Ae.jsx("p",{className:"text-sm text-gray-500",children:null==(r=e.patient)?void 0:r.email})]})}),Ae.jsx(Xm,{children:Ju(new Date(e.issue_date),"MMM d, yyyy")}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{variant:"outline",children:null==(n=e.type)?void 0:n.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"text-sm",children:[Ae.jsxs("p",{children:["S: ",(null==(a=e.right_eye)?void 0:a.sphere)||"N/A"]}),Ae.jsxs("p",{children:["C: ",(null==(s=e.right_eye)?void 0:s.cylinder)||"N/A"]}),Ae.jsxs("p",{children:["A: ",(null==(i=e.right_eye)?void 0:i.axis)||"N/A"]}),Ae.jsxs("p",{children:["PD: ",(null==(o=e.right_eye)?void 0:o.pd)||"N/A"]})]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"text-sm",children:[Ae.jsxs("p",{children:["S: ",(null==(l=e.left_eye)?void 0:l.sphere)||"N/A"]}),Ae.jsxs("p",{children:["C: ",(null==(c=e.left_eye)?void 0:c.cylinder)||"N/A"]}),Ae.jsxs("p",{children:["A: ",(null==(d=e.left_eye)?void 0:d.axis)||"N/A"]}),Ae.jsxs("p",{children:["PD: ",(null==(u=e.left_eye)?void 0:u.pd)||"N/A"]})]})}),Ae.jsx(Xm,{children:e.vision_acuity||"N/A"}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{className:v(e.status),children:e.status})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex space-x-2",children:[Ae.jsx(Hc,{size:"sm",variant:"outline",children:Ae.jsx(Bn,{className:"h-4 w-4"})}),Ae.jsx(Hc,{size:"sm",variant:"outline",children:Ae.jsx(ra,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]})]})},dK=({isOpen:e,onOpenChange:t,dayOfWeek:r,currentSchedule:n,onSuccess:a})=>{var s;const{user:i}=Rc(),{toast:o}=Jt(),[l,c]=Ct.useState(!1),[d,u]=Ct.useState(!0),[h,m]=Ct.useState([]),[p,f]=Ct.useState({branch_id:(null==n?void 0:n.branch_id)||null,start_time:(null==n?void 0:n.start_time)||"",end_time:(null==n?void 0:n.end_time)||"",reason:""}),x=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][r-1];Ct.useEffect(()=>{(async()=>{try{u(!0);const e=await Tp();m(Array.isArray(e)?e:[])}catch(e){console.error("Error loading branches:",e),m([])}finally{u(!1)}})()},[]),Ct.useEffect(()=>{e&&f({branch_id:(null==n?void 0:n.branch_id)||null,start_time:(null==n?void 0:n.start_time)||"",end_time:(null==n?void 0:n.end_time)||"",reason:""})},[e,n]);const y=(e,t)=>{f(r=>({...r,[e]:t}))},v=null!==p.branch_id,g=h.find(e=>e.id===p.branch_id);return Ae.jsx(Vp,{open:e,onOpenChange:t,children:Ae.jsxs(Yp,{className:"max-w-md",children:[Ae.jsxs(Gp,{children:[Ae.jsxs(Qp,{className:"flex items-center space-x-2",children:[Ae.jsx(Bn,{className:"h-5 w-5"}),Ae.jsxs("span",{children:["Edit ",x," Schedule"]})]}),Ae.jsx(Jp,{children:"admin"===(null==i?void 0:i.role)?"Update the schedule directly":"Request a schedule change (requires admin approval)"})]}),Ae.jsxs("form",{onSubmit:async e=>{var n,s;if(e.preventDefault(),v&&0===h.length)o({title:"Branches Not Available",description:"Unable to load branch information. Please contact your administrator.",variant:"destructive"});else if(p.start_time&&p.end_time)if(p.start_time>=p.end_time)o({title:"Validation Error",description:"End time must be after start time",variant:"destructive"});else{c(!0);try{if("admin"===(null==i?void 0:i.role))await(async(e,t,r,n,a)=>{try{const s=sessionStorage.getItem("auth_token");return(await Cc.put(`${Qm}/schedules/doctor/${e}`,{day_of_week:t,branch_id:r,start_time:n,end_time:a},{headers:{Authorization:s?`Bearer ${s}`:"","Content-Type":"application/json"}})).data}catch(s){throw console.error("Error updating schedule directly:",s),s}})(i.id,r,p.branch_id,p.start_time,p.end_time),o({title:"Schedule Updated",description:`Schedule for ${x} has been updated successfully`});else{if(!p.reason.trim())return void o({title:"Validation Error",description:"Please provide a reason for the schedule change",variant:"destructive"});await(async e=>{try{const t=sessionStorage.getItem("auth_token");return(await Cc.post(`${Qm}/schedule-change-requests`,e,{headers:{Authorization:t?`Bearer ${t}`:"","Content-Type":"application/json"}})).data}catch(t){throw console.error("Error submitting schedule change request:",t),t}})({optometrist_id:(null==i?void 0:i.id)||0,day_of_week:r,branch_id:p.branch_id,start_time:p.start_time,end_time:p.end_time,reason:p.reason}),o({title:"Change Request Submitted",description:`Schedule change request for ${x} has been submitted for admin approval. You'll be notified when it's reviewed.`})}null==a||a(),t(!1)}catch(l){console.error("Error updating schedule:",l),o({title:"Error",description:(null==(s=null==(n=l.response)?void 0:n.data)?void 0:s.message)||"Failed to update schedule",variant:"destructive"})}finally{c(!1)}}else o({title:"Validation Error",description:"Please provide both start and end times",variant:"destructive"})},className:"space-y-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{children:"Availability"}),Ae.jsxs("div",{className:"flex items-center space-x-4",children:[Ae.jsx(Hc,{type:"button",variant:v?"default":"outline",size:"sm",onClick:()=>y("branch_id",v?null:1),children:"Available"}),Ae.jsx(Hc,{type:"button",variant:v?"outline":"default",size:"sm",onClick:()=>y("branch_id",null),children:"Not Available"})]})]}),v&&Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"branch",children:"Branch"}),d?Ae.jsx("div",{className:"p-3 text-center text-sm text-gray-500",children:"Loading branches..."}):0===h.length?Ae.jsx("div",{className:"p-3 text-center text-sm text-gray-500 border rounded-md",children:"Branches not available. Please contact your administrator."}):Ae.jsxs(Tm,{value:(null==(s=p.branch_id)?void 0:s.toString())||"",onValueChange:e=>y("branch_id",e?parseInt(e):null),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select a branch"})}),Ae.jsx(Fm,{children:h.map(e=>Ae.jsx(Lm,{value:e.id.toString(),children:Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(In,{className:"h-4 w-4"}),Ae.jsxs("span",{children:[e.name," (",e.code,")"]})]})},e.id))})]})]}),v&&Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"start_time",children:"Start Time"}),Ae.jsxs("div",{className:"relative",children:[Ae.jsx(yn,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Ae.jsx(Yc,{id:"start_time",type:"time",value:p.start_time,onChange:e=>y("start_time",e.target.value),className:"pl-10",required:!0})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"end_time",children:"End Time"}),Ae.jsxs("div",{className:"relative",children:[Ae.jsx(yn,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Ae.jsx(Yc,{id:"end_time",type:"time",value:p.end_time,onChange:e=>y("end_time",e.target.value),className:"pl-10",required:!0})]})]})]}),"optometrist"===(null==i?void 0:i.role)&&Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"reason",children:"Reason for Change"}),Ae.jsx(ph,{id:"reason",placeholder:"Please explain why you need to change this schedule...",value:p.reason,onChange:e=>y("reason",e.target.value),rows:3,required:!0})]}),Ae.jsx(td,{children:Ae.jsxs(sd,{className:"p-4",children:[Ae.jsx("h4",{className:"font-medium mb-2",children:"Preview"}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-4 w-4 text-gray-500"}),Ae.jsx("span",{className:"text-sm",children:x})]}),v?Ae.jsxs(Ae.Fragment,{children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(In,{className:"h-4 w-4 text-gray-500"}),Ae.jsx("span",{className:"text-sm",children:(null==g?void 0:g.name)||(0===h.length?"Branches not available":"Select a branch")})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(yn,{className:"h-4 w-4 text-gray-500"}),Ae.jsxs("span",{className:"text-sm",children:[p.start_time," - ",p.end_time]})]}),Ae.jsx(Yd,{variant:"default",className:"text-xs",children:"Available"})]}):Ae.jsx(Yd,{variant:"secondary",className:"text-xs",children:"Not Available"})]})]})}),Ae.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[Ae.jsxs(Hc,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l,children:[Ae.jsx(ma,{className:"h-4 w-4 mr-2"}),"Cancel"]}),Ae.jsxs(Hc,{type:"submit",disabled:l,children:[l?Ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):Ae.jsx(Hn,{className:"h-4 w-4 mr-2"}),"admin"===(null==i?void 0:i.role)?"Update Schedule":"Submit Request"]})]})]})]})})},uK=()=>{var e;const{user:t}=Rc(),[r,n]=Ct.useState(new Date),[a,s]=Ct.useState(null),[i,o]=Ct.useState(!1),[l,c]=Ct.useState([]),[d,u]=Ct.useState([]),[h,m]=Ct.useState("schedule"),{data:p,isLoading:f,error:x,refetch:y}=ho({queryKey:["weekly-schedule"],queryFn:aH});Ct.useEffect(()=>{(async()=>{if(null==t?void 0:t.id)try{const e=await ep(t.id);u(e),c(e.filter(e=>"pending"===e.status))}catch(e){console.error("Error fetching requests:",e)}})()},[null==t?void 0:t.id]);const v=(e=>{const t=new Date(e);t.setDate(e.getDate()-e.getDay()+1);const r=[];for(let n=0;n<7;n++){const e=new Date(t);e.setDate(t.getDate()+n),r.push(e)}return r})(r),g=new Date,b=(e,t)=>e.available?t.toDateString()===g.toDateString()?"bg-blue-100 text-blue-800 border-blue-200":"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-400",j=(e,t)=>e.available?t.toDateString()===g.toDateString()?"Today":"Available":"Not Available",w=e=>{const t=new Date(r);t.setDate(r.getDate()+("next"===e?7:-7)),n(t)},N=e=>l.some(t=>t.day_of_week===e),S=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"approved":return"bg-green-100 text-green-800 border-green-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},k=e=>{switch(e){case"pending":return Ae.jsx(Qr,{className:"h-4 w-4"});case"approved":return Ae.jsx(dn,{className:"h-4 w-4"});case"rejected":return Ae.jsx(ha,{className:"h-4 w-4"});default:return null}};if(f)return Ae.jsx("div",{className:"max-w-6xl mx-auto p-6",children:Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-6 w-6 text-blue-600"}),Ae.jsx(nd,{children:"Optometrist Schedule"})]}),Ae.jsx(ad,{children:"Loading weekly schedule..."})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"flex items-center justify-center py-8",children:Ae.jsx(Vn,{className:"h-8 w-8 animate-spin text-blue-600"})})})]})});if(x)return Ae.jsx("div",{className:"max-w-6xl mx-auto p-6",children:Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-6 w-6 text-red-600"}),Ae.jsx(nd,{children:"Optometrist Schedule"})]}),Ae.jsx(ad,{children:"Error loading schedule"})]}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load schedule data"}),Ae.jsxs(Hc,{onClick:()=>y(),variant:"outline",children:[Ae.jsx(Vn,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})]})});const _=((null==(e=null==p?void 0:p.data)?void 0:e.weekly_schedule)||[]).find(e=>e.optometrist.name.includes("Samuel"));return _?Ae.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[Ae.jsxs(Of,{value:h,onValueChange:m,className:"w-full",children:[Ae.jsxs(Cf,{className:"grid w-full grid-cols-2",children:[Ae.jsx(Af,{value:"schedule",children:"My Schedule"}),Ae.jsxs(Af,{value:"requests",children:["My Requests (",d.length,")"]})]}),Ae.jsx(Ef,{value:"schedule",className:"space-y-6",children:Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-6 w-6 text-blue-600"}),Ae.jsxs("div",{children:[Ae.jsx(nd,{children:"Dr. Samuel Loreto Prieto - Weekly Schedule"}),Ae.jsx(ad,{children:"Weekly rotation across 4 branches"})]})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>w("prev"),children:"← Previous Week"}),Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>n(new Date),children:"This Week"}),Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>w("next"),children:"Next Week →"})]})]})}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"mb-6",children:Ae.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ae.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Week of ",v[0].toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),l.length>0&&Ae.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:[Ae.jsx(Qr,{className:"h-4 w-4 text-yellow-600"}),Ae.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:[l.length," pending request",l.length>1?"s":""]})]})]})}),Ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:v.map((e,t)=>{var r,n,a,i;const l=_.schedule[t],c=e.toDateString()===g.toDateString(),d=t+1;return Ae.jsxs("div",{className:"border rounded-xl p-4 relative transition-all duration-200 hover:shadow-md "+(c?"ring-2 ring-blue-500 bg-blue-50/30":"bg-white hover:bg-gray-50"),children:[Ae.jsx("div",{className:"absolute top-3 right-3",children:Ae.jsx(Hc,{variant:"ghost",size:"sm",onClick:()=>(e=>{s(e),o(!0)})(d),className:"h-8 w-8 p-0 hover:bg-blue-100 hover:text-blue-600 transition-colors duration-200",children:Ae.jsx(Bn,{className:"h-4 w-4"})})}),N(d)&&Ae.jsx("div",{className:"absolute top-3 left-3",children:Ae.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:[Ae.jsx(Qr,{className:"h-3 w-3"}),Ae.jsx("span",{children:"Pending"})]})}),Ae.jsxs("div",{className:"text-center mb-4",children:[Ae.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:e.toLocaleDateString("en-US",{weekday:"short"})}),Ae.jsx("div",{className:"text-2xl font-bold "+(c?"text-blue-600":"text-gray-900"),children:e.getDate()}),c&&Ae.jsx("div",{className:"text-xs text-blue-500 font-medium mt-1",children:"Today"})]}),(null==l?void 0:l.available)?Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsx(Yd,{variant:"secondary",className:`w-full justify-center py-1.5 ${b(l,e)} font-medium`,children:j(l,e)}),Ae.jsxs("div",{className:"space-y-3",children:[Ae.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-green-50 rounded-lg",children:[Ae.jsx(In,{className:"h-4 w-4 text-green-600"}),Ae.jsx("span",{className:"text-sm font-semibold text-green-800",children:null==(r=l.branch)?void 0:r.name})]}),Ae.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-blue-50 rounded-lg",children:[Ae.jsx(yn,{className:"h-4 w-4 text-blue-600"}),Ae.jsxs("span",{className:"text-sm font-semibold text-blue-800",children:[null==(n=l.schedule)?void 0:n.start_time," - ",null==(a=l.schedule)?void 0:a.end_time]})]}),Ae.jsx("div",{className:"text-center",children:Ae.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium text-gray-600 bg-gray-100 rounded-full",children:null==(i=l.branch)?void 0:i.code})})]})]}):Ae.jsxs("div",{className:"text-center space-y-3",children:[Ae.jsx(Yd,{variant:"secondary",className:"w-full justify-center py-1.5 bg-gray-100 text-gray-500 font-medium",children:"Not Available"}),Ae.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-400",children:[Ae.jsx(ma,{className:"h-4 w-4"}),Ae.jsx("span",{className:"text-sm",children:"No work scheduled"})]})]})]},e.toISOString())})}),Ae.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[Ae.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Schedule Summary"}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[Ae.jsxs("div",{children:[Ae.jsx("strong",{children:"Total Working Days:"})," ",_.schedule.filter(e=>e.available).length," days"]}),Ae.jsxs("div",{children:[Ae.jsx("strong",{children:"Branches Covered:"})," ",new Set(_.schedule.filter(e=>e.available).map(e=>{var t;return null==(t=e.branch)?void 0:t.name})).size," branches"]})]})]})]})]})}),Ae.jsx(Ef,{value:"requests",className:"space-y-6",children:Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center space-x-2",children:[Ae.jsx(yn,{className:"h-5 w-5 text-blue-600"}),Ae.jsx("span",{children:"My Schedule Change Requests"})]}),Ae.jsx(ad,{children:"View and track your schedule change requests"})]}),Ae.jsx(sd,{children:0===d.length?Ae.jsxs("div",{className:"text-center py-8",children:[Ae.jsx(ln,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Requests"}),Ae.jsx("p",{className:"text-gray-600",children:"You haven't submitted any schedule change requests yet."})]}):Ae.jsx("div",{className:"space-y-4",children:d.map(e=>{return Ae.jsx(td,{className:`border-l-4 ${S(e.status)}`,children:Ae.jsx(sd,{className:"p-4",children:Ae.jsx("div",{className:"flex items-start justify-between",children:Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[k(e.status),Ae.jsx("h3",{className:"font-semibold text-gray-900",children:(t=e.day_of_week,["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][t-1]||"Unknown")}),Ae.jsx(Yd,{variant:"outline",className:S(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(yn,{className:"h-4 w-4 text-gray-400"}),Ae.jsxs("span",{children:[e.start_time," - ",e.end_time]})]}),e.branch&&Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(In,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{children:e.branch.name})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]})]}),Ae.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[Ae.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Your Reason:"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:e.reason})]}),e.admin_notes&&Ae.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[Ae.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Admin Response:"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:e.admin_notes})]})]})})})},e.id);var t})})})]})})]}),Ae.jsx(dK,{isOpen:i,onOpenChange:o,dayOfWeek:a||1,currentSchedule:void 0,onSuccess:()=>{y(),(null==t?void 0:t.id)&&ep(t.id).then(e=>{u(e),c(e.filter(e=>"pending"===e.status))}).catch(e=>{console.error("Error refreshing requests:",e)})}})]}):Ae.jsx("div",{className:"max-w-6xl mx-auto p-6",children:Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ln,{className:"h-6 w-6 text-yellow-600"}),Ae.jsx(nd,{children:"Optometrist Schedule"})]}),Ae.jsx(ad,{children:"No schedule data found"})]}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"text-center py-8",children:Ae.jsx("p",{className:"text-yellow-600",children:"No schedule found for Dr. Samuel Loreto Prieto"})})})]})})},hK=()=>{const{user:e}=Rc();if(!e)return Ae.jsx("div",{children:"Loading..."});return Ae.jsx("div",{className:"space-y-6",children:Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsxs(nd,{className:"flex items-center gap-2",children:[Ae.jsx(ca,{className:"h-5 w-5"}),"Profile Information"]}),Ae.jsx(ad,{children:"Your account details and branch assignment"})]}),Ae.jsxs(sd,{className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),Ae.jsx("p",{className:"text-sm font-medium",children:e.name})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(Dn,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("p",{className:"text-sm font-medium",children:e.email})]})]}),e.phone&&Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone Number"}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(qn,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("p",{className:"text-sm font-medium",children:e.phone})]})]}),e.social_media&&Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Social Media"}),Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(Rn,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("p",{className:"text-sm font-medium",children:e.social_media})]})]}),"customer"===e.role&&!e.phone&&Ae.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:Ae.jsxs("p",{className:"text-sm text-blue-800",children:[Ae.jsx("strong",{children:"Contact Information:"})," Add your phone number and social media handle when booking your next appointment to help us communicate with you better."]})}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Role"}),Ae.jsxs(Yd,{className:`${(e=>{switch(e.toLowerCase()){case"admin":return"bg-red-100 text-red-800 border-red-200";case"optometrist":return"bg-blue-100 text-blue-800 border-blue-200";case"staff":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.role)} flex items-center gap-1 w-fit`,children:[(t=e.role,"admin"===t.toLowerCase()?Ae.jsx(Xn,{className:"h-4 w-4"}):Ae.jsx(ca,{className:"h-4 w-4"})),e.role.charAt(0).toUpperCase()+e.role.slice(1)]})]}),e.branch&&Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Assigned Branch"}),Ae.jsxs("div",{className:"space-y-1",children:[Ae.jsxs("div",{className:"flex items-center gap-2",children:[Ae.jsx(sn,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("p",{className:"text-sm font-medium",children:e.branch.name})]}),Ae.jsxs("div",{className:"flex items-center gap-2 ml-6",children:[Ae.jsx(In,{className:"h-3 w-3 text-gray-400"}),Ae.jsx("p",{className:"text-xs text-gray-500",children:e.branch.address})]})]})]})]}),!e.branch&&"customer"!==e.role&&Ae.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:Ae.jsxs("p",{className:"text-sm text-yellow-800",children:[Ae.jsx("strong",{children:"No Branch Assigned:"})," You haven't been assigned to a branch yet. Please contact your administrator to get assigned to a branch."]})})]})]})});var t},mK=()=>{const{toast:e}=Jt();so();const[t,r]=Ct.useState(""),[n,a]=Ct.useState(null),[s,i]=Ct.useState(!1),[o,l]=Ct.useState(!1),[c,d]=Ct.useState([]),[u,h]=Ct.useState(!0),[m,p]=Ct.useState(new Set),[f,x]=Ct.useState(!1),[y,v]=Ct.useState(new Set),{data:g=[]}=ho({queryKey:["branches"],queryFn:Pp}),[b,j]=Ct.useState({name:"",email:"",password:"",password_confirmation:"",role:"customer",branch_id:"",is_approved:!0});Ct.useEffect(()=>{w()},[]);const w=async()=>{try{h(!0);const e=sessionStorage.getItem("auth_token");console.log("Fetching users with token:",e?"Present":"Missing");const t=await fetch("http://192.168.100.6:8000/api/admin/users",{headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}});if(console.log("Users API response status:",t.status),!t.ok){const e=await t.json();throw console.error("API Error:",e),new Error(e.message||`Failed to fetch users: ${t.status}`)}const r=await t.json();console.log("Users data received:",r);const n=(r.data||[]).filter(e=>!y.has(e.id));d(n)}catch(t){console.error("Error fetching users:",t),e({title:"Error",description:t instanceof Error?t.message:"Failed to fetch users",variant:"destructive"})}finally{h(!1)}},N=()=>{j({name:"",email:"",password:"",password_confirmation:"",role:"customer",branch_id:"",is_approved:!0})},S=e=>{switch(e.toLowerCase()){case"admin":return"bg-red-100 text-red-800 border-red-200";case"optometrist":return"bg-blue-100 text-blue-800 border-blue-200";case"staff":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},k=c.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.email.toLowerCase().includes(t.toLowerCase())||e.role.toLowerCase().includes(t.toLowerCase()));Ct.useEffect(()=>{x(m.size===k.length&&k.length>0)},[m,k]);return u?Ae.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:Ae.jsx("div",{className:"flex items-center justify-center h-64",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),Ae.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})})}):Ae.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[Ae.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(da,{className:"h-6 w-6 text-blue-600"}),Ae.jsx("h1",{className:"text-2xl font-bold",children:"User Management"})]}),Ae.jsxs("div",{className:"flex space-x-2",children:[Ae.jsx(Hc,{variant:"outline",onClick:w,disabled:u,children:u?"Loading...":"Refresh"}),Ae.jsxs(Vp,{open:s,onOpenChange:i,children:[Ae.jsx(Wp,{asChild:!0,children:Ae.jsxs(Hc,{onClick:N,children:[Ae.jsx($n,{className:"mr-2 h-4 w-4"}),"Add User"]})}),Ae.jsxs(Yp,{className:"max-w-2xl",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Add New User"}),Ae.jsx(Jp,{children:"Create a new user account with role and branch assignment."})]}),Ae.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),b.password===b.password_confirmation)try{const t=sessionStorage.getItem("auth_token"),r={...b,branch_id:b.branch_id&&"none"!==b.branch_id?parseInt(b.branch_id):null};console.log("Creating user with data:",r);const n=await fetch("http://192.168.100.6:8000/api/admin/users",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(console.log("Create user response status:",n.status),!n.ok){const e=await n.json();throw console.error("Create user error:",e),new Error(e.message||`Failed to create user: ${n.status}`)}const a=await n.json();console.log("User created successfully:",a),e({title:"Success",description:"User created successfully"}),i(!1),N(),w()}catch(r){console.error("Error creating user:",r),e({title:"Error",description:r.message||"Failed to create user",variant:"destructive"})}else e({title:"Validation Error",description:"Passwords do not match",variant:"destructive"})},className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"name",children:"Full Name"}),Ae.jsx(Yc,{id:"name",value:b.name,onChange:e=>j({...b,name:e.target.value}),required:!0})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"email",children:"Email"}),Ae.jsx(Yc,{id:"email",type:"email",value:b.email,onChange:e=>j({...b,email:e.target.value}),required:!0})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"password",children:"Password"}),Ae.jsx(Yc,{id:"password",type:"password",value:b.password,onChange:e=>j({...b,password:e.target.value}),required:!0})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"password_confirmation",children:"Confirm Password"}),Ae.jsx(Yc,{id:"password_confirmation",type:"password",value:b.password_confirmation,onChange:e=>j({...b,password_confirmation:e.target.value}),required:!0})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"role",children:"Role"}),Ae.jsxs(Tm,{value:b.role,onValueChange:e=>j({...b,role:e}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select role"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"customer",children:"Customer"}),Ae.jsx(Lm,{value:"staff",children:"Staff"}),Ae.jsx(Lm,{value:"optometrist",children:"Optometrist"}),Ae.jsx(Lm,{value:"admin",children:"Admin"})]})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"branch",children:"Branch"}),Ae.jsxs(Tm,{value:b.branch_id,onValueChange:e=>j({...b,branch_id:e}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select branch"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"none",children:"No Branch"}),g.map(e=>Ae.jsx(Lm,{value:e.id.toString(),children:e.name},e.id))]})]})]})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx("input",{type:"checkbox",id:"is_approved",checked:b.is_approved,onChange:e=>j({...b,is_approved:e.target.checked}),className:"rounded"}),Ae.jsx(Zc,{htmlFor:"is_approved",children:"Approved"})]}),Ae.jsxs("div",{className:"flex justify-end space-x-2",children:[Ae.jsx(Hc,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),Ae.jsx(Hc,{type:"submit",children:"Create User"})]})]})]})]})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:"All Users"}),Ae.jsx(ad,{children:"Manage user accounts, roles, and branch assignments"})]}),Ae.jsxs(sd,{children:[Ae.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(Yn,{className:"h-4 w-4 text-gray-400"}),Ae.jsx(Yc,{placeholder:"Search users...",value:t,onChange:e=>r(e.target.value),className:"max-w-sm"})]}),m.size>0&&Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsxs("span",{className:"text-sm text-gray-600",children:[m.size," user(s) selected"]}),Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:async()=>{if(0!==m.size)try{const t=sessionStorage.getItem("auth_token"),r=Array.from(m).map(e=>fetch(`http://192.168.100.6:8000/api/admin/users/${e}/approve`,{method:"POST",headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}})),n=(await Promise.all(r)).filter(e=>!e.ok);if(n.length>0)throw new Error(`Failed to approve ${n.length} user(s)`);e({title:"Success",description:`Successfully approved ${m.size} user(s).`}),p(new Set),x(!1),w()}catch(t){console.error("Error approving users:",t),e({title:"Error",description:t instanceof Error?t.message:"Failed to approve users",variant:"destructive"})}else e({title:"No users selected",description:"Please select users to approve.",variant:"destructive"})},className:"text-green-600 hover:text-green-700",children:[Ae.jsx(oa,{className:"h-4 w-4 mr-1"}),"Approve All"]}),Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:async()=>{if(0!==m.size){if(confirm(`Are you sure you want to delete ${m.size} user(s)? This action cannot be undone.`))try{const t=sessionStorage.getItem("auth_token"),r=Array.from(m).map(e=>fetch(`http://192.168.100.6:8000/api/admin/users/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}})),n=(await Promise.all(r)).filter(e=>!e.ok);if(n.length>0)throw new Error(`Failed to delete ${n.length} user(s)`);v(e=>new Set([...e,...m])),d(e=>e.filter(e=>!m.has(e.id))),e({title:"Success",description:`Successfully deleted ${m.size} user(s).`}),p(new Set),x(!1)}catch(t){console.error("Error deleting users:",t),e({title:"Error",description:t instanceof Error?t.message:"Failed to delete users",variant:"destructive"})}}else e({title:"No users selected",description:"Please select users to delete.",variant:"destructive"})},className:"text-red-600 hover:text-red-700",children:[Ae.jsx(ra,{className:"h-4 w-4 mr-1"}),"Delete All"]})]})]}),Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{className:"w-12",children:Ae.jsx("button",{onClick:()=>{if(f)p(new Set),x(!1);else{const e=new Set(k.map(e=>e.id));p(e),x(!0)}},className:"flex items-center justify-center w-4 h-4 rounded border border-gray-300 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",children:f?Ae.jsx(un,{className:"h-4 w-4 text-blue-600"}):Ae.jsx(Zn,{className:"h-4 w-4 text-gray-400"})})}),Ae.jsx(Gm,{children:"Name"}),Ae.jsx(Gm,{children:"Email"}),Ae.jsx(Gm,{children:"Role"}),Ae.jsx(Gm,{children:"Branch"}),Ae.jsx(Gm,{children:"Status"}),Ae.jsx(Gm,{children:"Created"}),Ae.jsx(Gm,{children:"Actions"})]})}),Ae.jsx(Km,{children:k.map(t=>Ae.jsxs(Ym,{className:m.has(t.id)?"bg-blue-50":"",children:[Ae.jsx(Xm,{children:Ae.jsx("button",{onClick:()=>(e=>{const t=new Set(m);t.has(e)?t.delete(e):t.add(e),p(t),x(t.size===k.length&&k.length>0)})(t.id),className:"flex items-center justify-center w-4 h-4 rounded border border-gray-300 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",children:m.has(t.id)?Ae.jsx(un,{className:"h-4 w-4 text-blue-600"}):Ae.jsx(Zn,{className:"h-4 w-4 text-gray-400"})})}),Ae.jsx(Xm,{className:"font-medium",children:t.name}),Ae.jsx(Xm,{children:t.email}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{className:S(t.role),children:t.role.charAt(0).toUpperCase()+t.role.slice(1)})}),Ae.jsx(Xm,{children:t.branch?Ae.jsxs("div",{className:"flex items-center space-x-1",children:[Ae.jsx(sn,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{className:"text-sm",children:t.branch.name})]}):Ae.jsx("span",{className:"text-sm text-gray-500",children:"No Branch"})}),Ae.jsx(Xm,{children:Ae.jsx(Yd,{variant:t.is_approved?"default":"secondary",children:t.is_approved?"Approved":"Pending"})}),Ae.jsx(Xm,{className:"text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex space-x-2",children:[Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(e=>{var t,r;a(e),j({name:e.name,email:e.email,password:"",password_confirmation:"",role:e.role,branch_id:(null==(r=null==(t=e.branch)?void 0:t.id)?void 0:r.toString())||"none",is_approved:e.is_approved}),l(!0)})(t),children:Ae.jsx(Bn,{className:"h-4 w-4"})}),Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(async t=>{if(confirm("Are you sure you want to delete this user?"))try{const r=sessionStorage.getItem("auth_token");console.log("Deleting user ID:",t),console.log("Auth token present:",r?"Yes":"No");const n=await fetch(`http://192.168.100.6:8000/api/admin/users/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`,Accept:"application/json"}});if(console.log("Delete user response status:",n.status),console.log("Delete user response headers:",Object.fromEntries(n.headers.entries())),!n.ok){const e=await n.json();throw console.error("Delete user error:",e),new Error(e.message||`Failed to delete user: ${n.status}`)}const a=await n.json();console.log("User deleted successfully:",a),v(e=>new Set([...e,t])),d(e=>e.filter(e=>e.id!==t)),e({title:"Success",description:"User deleted successfully"})}catch(r){console.error("Error deleting user:",r),e({title:"Error",description:r.message||"Failed to delete user",variant:"destructive"})}})(t.id),className:"text-red-600 hover:text-red-700",children:Ae.jsx(ra,{className:"h-4 w-4"})})]})})]},t.id))})]})]})]}),Ae.jsx(Vp,{open:o,onOpenChange:l,children:Ae.jsxs(Yp,{className:"max-w-2xl",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Edit User"}),Ae.jsx(Jp,{children:"Update user information, role, and branch assignment."})]}),Ae.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),n)if(b.password&&b.password!==b.password_confirmation)e({title:"Validation Error",description:"Passwords do not match",variant:"destructive"});else try{const t=sessionStorage.getItem("auth_token"),r={name:b.name,email:b.email,role:b.role,is_approved:b.is_approved,branch_id:b.branch_id&&"none"!==b.branch_id?parseInt(b.branch_id):null};b.password&&""!==b.password.trim()&&(r.password=b.password),console.log("Updating user with data:",r);const s=await fetch(`http://192.168.100.6:8000/api/admin/users/${n.id}`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(console.log("Update user response status:",s.status),!s.ok){const e=await s.json();throw console.error("Update user error:",e),new Error(e.message||`Failed to update user: ${s.status}`)}const i=await s.json();console.log("User updated successfully:",i),e({title:"Success",description:"User updated successfully"}),l(!1),a(null),N(),w()}catch(r){console.error("Error updating user:",r),e({title:"Error",description:r.message||"Failed to update user",variant:"destructive"})}},className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit-name",children:"Full Name"}),Ae.jsx(Yc,{id:"edit-name",value:b.name,onChange:e=>j({...b,name:e.target.value}),required:!0})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit-email",children:"Email"}),Ae.jsx(Yc,{id:"edit-email",type:"email",value:b.email,onChange:e=>j({...b,email:e.target.value}),required:!0})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit-password",children:"New Password (leave blank to keep current)"}),Ae.jsx(Yc,{id:"edit-password",type:"password",value:b.password,onChange:e=>j({...b,password:e.target.value}),placeholder:"Enter new password or leave blank"})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit-password-confirmation",children:"Confirm New Password"}),Ae.jsx(Yc,{id:"edit-password-confirmation",type:"password",value:b.password_confirmation,onChange:e=>j({...b,password_confirmation:e.target.value}),placeholder:"Confirm new password"})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit-role",children:"Role"}),Ae.jsxs(Tm,{value:b.role,onValueChange:e=>j({...b,role:e}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select role"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"customer",children:"Customer"}),Ae.jsx(Lm,{value:"staff",children:"Staff"}),Ae.jsx(Lm,{value:"optometrist",children:"Optometrist"}),Ae.jsx(Lm,{value:"admin",children:"Admin"})]})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit-branch",children:"Branch"}),Ae.jsxs(Tm,{value:b.branch_id,onValueChange:e=>j({...b,branch_id:e}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select branch"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"none",children:"No Branch"}),g.map(e=>Ae.jsx(Lm,{value:e.id.toString(),children:e.name},e.id))]})]})]})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx("input",{type:"checkbox",id:"edit-is_approved",checked:b.is_approved,onChange:e=>j({...b,is_approved:e.target.checked}),className:"rounded"}),Ae.jsx(Zc,{htmlFor:"edit-is_approved",children:"Approved"})]}),Ae.jsxs("div",{className:"flex justify-end space-x-2",children:[Ae.jsx(Hc,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),Ae.jsx(Hc,{type:"submit",children:"Update User"})]})]})]})})]})},pK=()=>{const{toast:e}=Jt(),t=so(),[r,n]=Ct.useState(""),[a,s]=Ct.useState(null),[i,o]=Ct.useState(!1),[l,c]=Ct.useState(!1),[d,u]=Ct.useState(!1),{data:h=[],isLoading:m,refetch:p}=ho({queryKey:["branches"],queryFn:Pp}),[f,x]=Ct.useState({name:"",code:"",address:"",phone:"",email:"",is_active:!0}),y=()=>{x({name:"",code:"",address:"",phone:"",email:"",is_active:!0})},v=h.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())||e.code.toLowerCase().includes(r.toLowerCase())||e.address.toLowerCase().includes(r.toLowerCase()));return m?Ae.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:Ae.jsx("div",{className:"flex items-center justify-center h-64",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),Ae.jsx("p",{className:"text-gray-600",children:"Loading branches..."})]})})}):Ae.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[Ae.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(sn,{className:"h-6 w-6 text-blue-600"}),Ae.jsx("h1",{className:"text-2xl font-bold",children:"Branch Management"})]}),Ae.jsxs(Vp,{open:i,onOpenChange:o,children:[Ae.jsx(Wp,{asChild:!0,children:Ae.jsxs(Hc,{onClick:y,className:"bg-green-600 hover:bg-green-700 text-white min-w-[120px]",children:[Ae.jsx($n,{className:"mr-2 h-4 w-4"}),"Add Branch"]})}),Ae.jsxs(Yp,{className:"max-w-2xl",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Add New Branch"}),Ae.jsx(Jp,{children:"Create a new branch location with contact information."})]}),Ae.jsxs("form",{onSubmit:async r=>{r.preventDefault();try{u(!0);const r=sessionStorage.getItem("auth_token"),n="http://192.168.100.6:8000/api",a=await fetch(`${n}/branches`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(f)});if(!a.ok){const e=await a.json();throw new Error(e.message||"Failed to create branch")}e({title:"Success",description:"Branch created successfully"}),o(!1),y(),t.invalidateQueries({queryKey:["branches"]})}catch(n){e({title:"Error",description:n.message||"Failed to create branch",variant:"destructive"})}finally{u(!1)}},className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"name",children:"Branch Name"}),Ae.jsx(Yc,{id:"name",value:f.name,onChange:e=>x({...f,name:e.target.value}),required:!0})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"code",children:"Branch Code"}),Ae.jsx(Yc,{id:"code",value:f.code,onChange:e=>x({...f,code:e.target.value.toUpperCase()}),placeholder:"e.g., MAIN, STA_ROSA",required:!0})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"address",children:"Address"}),Ae.jsx(Yc,{id:"address",value:f.address,onChange:e=>x({...f,address:e.target.value}),required:!0})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"phone",children:"Phone"}),Ae.jsx(Yc,{id:"phone",value:f.phone,onChange:e=>x({...f,phone:e.target.value}),placeholder:"0912-345-6789"})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"email",children:"Email"}),Ae.jsx(Yc,{id:"email",type:"email",value:f.email,onChange:e=>x({...f,email:e.target.value}),placeholder:"branch@everbright.com"})]})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:e=>x({...f,is_active:e.target.checked}),className:"rounded"}),Ae.jsx(Zc,{htmlFor:"is_active",children:"Active"})]}),Ae.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[Ae.jsx(Hc,{type:"button",variant:"outline",onClick:()=>o(!1),className:"min-w-[100px]",children:"Cancel"}),Ae.jsx(Hc,{type:"submit",disabled:d,className:"min-w-[120px] bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:d?Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(Vn,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Branch"})]})]})]})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{children:[Ae.jsx(nd,{children:"All Branches"}),Ae.jsx(ad,{children:"Manage branch locations, contact information, and status"})]}),Ae.jsxs(sd,{children:[Ae.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ae.jsx(Yn,{className:"h-4 w-4 text-gray-400"}),Ae.jsx(Yc,{placeholder:"Search branches...",value:r,onChange:e=>n(e.target.value),className:"max-w-sm"})]}),Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Name"}),Ae.jsx(Gm,{children:"Code"}),Ae.jsx(Gm,{children:"Address"}),Ae.jsx(Gm,{children:"Contact"}),Ae.jsx(Gm,{children:"Status"}),Ae.jsx(Gm,{children:"Created"}),Ae.jsx(Gm,{className:"text-center",children:"Actions"})]})}),Ae.jsx(Km,{children:v.map(r=>Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{className:"font-medium",children:r.name}),Ae.jsx(Xm,{children:Ae.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:r.code})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center space-x-1",children:[Ae.jsx(In,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{className:"text-sm",children:r.address})]})}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"space-y-1",children:[r.phone&&Ae.jsxs("div",{className:"flex items-center space-x-1",children:[Ae.jsx(qn,{className:"h-3 w-3 text-gray-400"}),Ae.jsx("span",{className:"text-xs",children:r.phone})]}),r.email&&Ae.jsxs("div",{className:"flex items-center space-x-1",children:[Ae.jsx(Dn,{className:"h-3 w-3 text-gray-400"}),Ae.jsx("span",{className:"text-xs",children:r.email})]})]})}),Ae.jsx(Xm,{children:Ae.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(r.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:r.is_active?"Active":"Inactive"})}),Ae.jsx(Xm,{className:"text-sm text-gray-500",children:new Date(r.created_at).toLocaleDateString()}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(e=>{s(e),x({name:e.name,code:e.code,address:e.address,phone:e.phone||"",email:e.email||"",is_active:e.is_active}),c(!0)})(r),className:"h-8 w-8 p-0 hover:bg-blue-50 hover:border-blue-300",title:"Edit Branch",children:Ae.jsx(Bn,{className:"h-4 w-4"})}),Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(async r=>{if(confirm("Are you sure you want to delete this branch? This action cannot be undone."))try{u(!0);const n=sessionStorage.getItem("auth_token"),a="http://192.168.100.6:8000/api",s=await fetch(`${a}/branches/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`,Accept:"application/json"}});if(!s.ok){const e=await s.json();throw new Error(e.message||"Failed to delete branch")}e({title:"Success",description:"Branch deleted successfully"}),t.invalidateQueries({queryKey:["branches"]})}catch(n){e({title:"Error",description:n.message||"Failed to delete branch",variant:"destructive"})}finally{u(!1)}})(r.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50 hover:border-red-300",title:"Delete Branch",children:Ae.jsx(ra,{className:"h-4 w-4"})})]})})]},r.id))})]})]})]}),Ae.jsx(Vp,{open:l,onOpenChange:c,children:Ae.jsxs(Yp,{className:"max-w-2xl",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Edit Branch"}),Ae.jsx(Jp,{children:"Update branch information and contact details."})]}),Ae.jsxs("form",{onSubmit:async r=>{if(r.preventDefault(),a)try{u(!0);const r=sessionStorage.getItem("auth_token"),n="http://192.168.100.6:8000/api",i=await fetch(`${n}/branches/${a.id}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(f)});if(!i.ok){const e=await i.json();throw new Error(e.message||"Failed to update branch")}e({title:"Success",description:"Branch updated successfully"}),c(!1),s(null),y(),t.invalidateQueries({queryKey:["branches"]})}catch(n){e({title:"Error",description:n.message||"Failed to update branch",variant:"destructive"})}finally{u(!1)}},className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit-name",children:"Branch Name"}),Ae.jsx(Yc,{id:"edit-name",value:f.name,onChange:e=>x({...f,name:e.target.value}),required:!0})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit-code",children:"Branch Code"}),Ae.jsx(Yc,{id:"edit-code",value:f.code,onChange:e=>x({...f,code:e.target.value.toUpperCase()}),required:!0})]})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit-address",children:"Address"}),Ae.jsx(Yc,{id:"edit-address",value:f.address,onChange:e=>x({...f,address:e.target.value}),required:!0})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit-phone",children:"Phone"}),Ae.jsx(Yc,{id:"edit-phone",value:f.phone,onChange:e=>x({...f,phone:e.target.value})})]}),Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsx(Zc,{htmlFor:"edit-email",children:"Email"}),Ae.jsx(Yc,{id:"edit-email",type:"email",value:f.email,onChange:e=>x({...f,email:e.target.value})})]})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx("input",{type:"checkbox",id:"edit-is_active",checked:f.is_active,onChange:e=>x({...f,is_active:e.target.checked}),className:"rounded"}),Ae.jsx(Zc,{htmlFor:"edit-is_active",children:"Active"})]}),Ae.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[Ae.jsx(Hc,{type:"button",variant:"outline",onClick:()=>c(!1),className:"min-w-[100px]",children:"Cancel"}),Ae.jsx(Hc,{type:"submit",disabled:d,className:"min-w-[120px] bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:d?Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(Vn,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Branch"})]})]})]})})]})},fK="http://192.168.100.6:8000/api",xK=()=>({Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}),yK=()=>{var e;const{toast:t}=Jt(),[r,n]=Ct.useState([]),[a,s]=Ct.useState([]),[i,o]=Ct.useState([]),[l,c]=Ct.useState([]),[d,u]=Ct.useState(!0),[h,m]=Ct.useState("all"),[p,f]=Ct.useState("all"),[x,y]=Ct.useState("all"),[v,g]=Ct.useState(null),[b,j]=Ct.useState(""),[w,N]=Ct.useState(!1),[S,k]=Ct.useState(!1),[_,O]=Ct.useState(!1),[C,A]=Ct.useState(null),[E,P]=Ct.useState({staff_id:"",staff_role:"optometrist",branch_id:"",day_of_week:1,start_time:"09:00",end_time:"17:00",is_active:!0});Ct.useEffect(()=>{T(),M(),D(),I()},[h,p,x]);const T=async()=>{try{const e=await(async e=>{try{const t=new URLSearchParams;return(null==e?void 0:e.role)&&t.append("role",e.role),(null==e?void 0:e.branch_id)&&t.append("branch_id",e.branch_id),(await Cc.get(`${fK}/staff-schedules/staff-members?${t}`,{headers:xK()})).data}catch(t){throw console.error("Error fetching staff members:",t),t}})({role:"all"!==p?p:void 0,branch_id:"all"!==h?h:void 0});n(e.staff_members||[])}catch(e){console.error("Error fetching employees:",e),t({title:"Error",description:"Failed to fetch employees",variant:"destructive"})}},M=async()=>{try{const e=await(async()=>{try{return(await Cc.get(`${fK}/staff-schedules/branches`,{headers:xK()})).data}catch(e){throw console.error("Error fetching branches:",e),e}})();c(e.branches||[])}catch(e){console.error("Error fetching branches:",e)}},D=async()=>{try{if("all"!==h){const e=await(async e=>{try{return(await Cc.get(`${fK}/staff-schedules/branch/${e}`,{headers:xK()})).data}catch(t){throw console.error("Error fetching branch staff schedules:",t),t}})(parseInt(h));s(e.staff_schedules||[])}else{const e=await(async()=>{try{return(await Cc.get(`${fK}/staff-schedules/all`,{headers:xK()})).data}catch(e){throw console.error("Error fetching all staff schedules:",e),e}})();s(e.staff_schedules||[])}}catch(e){console.error("Error fetching schedules:",e),t({title:"Error",description:"Failed to fetch schedules",variant:"destructive"})}},I=async()=>{try{const e=await(async e=>{try{const t=new URLSearchParams;return(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.staff_role)&&t.append("staff_role",e.staff_role),(null==e?void 0:e.branch_id)&&t.append("branch_id",e.branch_id),(await Cc.get(`${fK}/staff-schedules/change-requests?${t}`,{headers:xK()})).data}catch(t){throw console.error("Error fetching change requests:",t),t}})({status:void 0,staff_role:"all"!==p?p:void 0,branch_id:"all"!==h?h:void 0});o(e.change_requests||[])}catch(e){console.error("Error fetching requests:",e),t({title:"Error",description:"Failed to fetch schedule change requests",variant:"destructive"})}finally{u(!1)}},R=async(e,r)=>{try{N(!0),"approved"===r?await(async(e,t)=>{try{return(await Cc.put(`${fK}/staff-schedules/change-requests/${e}/approve`,{admin_notes:t},{headers:xK()})).data}catch(r){throw console.error("Error approving change request:",r),r}})(e,b):await(async(e,t)=>{try{return(await Cc.put(`${fK}/staff-schedules/change-requests/${e}/reject`,{admin_notes:t},{headers:xK()})).data}catch(r){throw console.error("Error rejecting change request:",r),r}})(e,b),t({title:`Request ${r}`,description:`Schedule change request has been ${r}`}),o(t=>t.map(t=>t.id===e?{...t,status:r,admin_notes:b}:t)),g(null),j(""),k(!1),D()}catch(n){console.error("Error updating request:",n),t({title:"Error",description:n.message||"Failed to update request",variant:"destructive"})}finally{N(!1)}},F=async e=>{try{await(async e=>{try{return(await Cc.delete(`${fK}/staff-schedules/${e}`,{headers:xK()})).data}catch(t){throw console.error("Error deleting schedule:",t),t}})(e),t({title:"Schedule Deleted",description:"Employee schedule has been deleted successfully"}),D()}catch(r){console.error("Error deleting schedule:",r),t({title:"Error",description:r.message||"Failed to delete schedule",variant:"destructive"})}},L=e=>{switch(e){case"pending":return"border-yellow-200 bg-yellow-50";case"approved":return"border-green-200 bg-green-50";case"rejected":return"border-red-200 bg-red-50";default:return"border-gray-200 bg-gray-50"}},B=e=>{switch(e){case"pending":return Ae.jsx(Qr,{className:"h-4 w-4 text-yellow-600"});case"approved":return Ae.jsx(dn,{className:"h-4 w-4 text-green-600"});case"rejected":return Ae.jsx(ha,{className:"h-4 w-4 text-red-600"});default:return null}},q=e=>["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][e-1]||"Unknown",z=a.filter(e=>{var t;const r="all"===h||(null==(t=e.branch)?void 0:t.id.toString())===h,n="all"===x||e.staff_id.toString()===x,a="all"===p||e.staff_role===p;return r&&n&&a}),$=i.filter(e=>{var t;const r="all"===h||(null==(t=e.branch)?void 0:t.id.toString())===h,n="all"===x||e.staff_id.toString()===x,a="all"===p||e.staff_role===p;return r&&n&&a}),U=$.filter(e=>"pending"===e.status),V=$.filter(e=>"approved"===e.status),W=$.filter(e=>"rejected"===e.status),H=r.filter(e=>{var t;const r="all"===h||(null==(t=e.branch)?void 0:t.id.toString())===h,n="all"===p||e.role===p;return r&&n});return d?Ae.jsx("div",{className:"flex items-center justify-center h-64",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),Ae.jsx("p",{className:"text-gray-600",children:"Loading employee schedules..."})]})}):Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{children:[Ae.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Employee Schedule Management"}),Ae.jsx("p",{className:"text-gray-600",children:"Manage schedules for all employees (optometrists and staff) across all branches"})]}),Ae.jsxs("div",{className:"flex space-x-2",children:[Ae.jsxs(Hc,{onClick:D,variant:"outline",size:"sm",children:[Ae.jsx(yn,{className:"h-4 w-4 mr-2"}),"Refresh"]}),Ae.jsxs(Hc,{onClick:()=>O(!0),size:"sm",children:[Ae.jsx($n,{className:"h-4 w-4 mr-2"}),"Add Schedule"]})]})]}),Ae.jsx(td,{className:"p-4",children:Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"branch-filter",children:"Branch"}),Ae.jsxs(Tm,{value:h,onValueChange:m,children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"All Branches"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"all",children:"All Branches"}),l.map(e=>Ae.jsx(Lm,{value:e.id.toString(),children:e.name},e.id))]})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"role-filter",children:"Role"}),Ae.jsxs(Tm,{value:p,onValueChange:f,children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"All Roles"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"all",children:"All Roles"}),Ae.jsx(Lm,{value:"optometrist",children:"Optometrists"}),Ae.jsx(Lm,{value:"staff",children:"Staff"})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"employee-filter",children:"Employee"}),Ae.jsxs(Tm,{value:x,onValueChange:y,children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"All Employees"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"all",children:"All Employees"}),H.map(e=>Ae.jsxs(Lm,{value:e.id.toString(),children:[e.name," (",e.role,")"]},e.id))]})]})]}),Ae.jsx("div",{className:"flex items-end",children:Ae.jsxs(Hc,{variant:"outline",onClick:()=>{m("all"),f("all"),y("all")},className:"w-full",children:[Ae.jsx(kn,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})})]})}),Ae.jsxs(Of,{defaultValue:"schedules",className:"w-full",children:[Ae.jsxs(Cf,{className:"grid w-full grid-cols-4",children:[Ae.jsxs(Af,{value:"schedules",children:["Schedules (",z.length,")"]}),Ae.jsxs(Af,{value:"pending",children:["Pending (",U.length,")"]}),Ae.jsxs(Af,{value:"approved",children:["Approved (",V.length,")"]}),Ae.jsxs(Af,{value:"rejected",children:["Rejected (",W.length,")"]})]}),Ae.jsx(Ef,{value:"schedules",className:"space-y-4",children:0===z.length?Ae.jsx(td,{children:Ae.jsxs(sd,{className:"p-8 text-center",children:[Ae.jsx(ln,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Schedules Found"}),Ae.jsx("p",{className:"text-gray-600",children:"No employee schedules match your current filters"})]})}):Ae.jsx("div",{className:"grid gap-4",children:z.map(e=>Ae.jsx(td,{className:"border-l-4 border-blue-200 bg-blue-50",children:Ae.jsx(sd,{className:"p-6",children:Ae.jsxs("div",{className:"flex items-start justify-between",children:[Ae.jsxs("div",{className:"space-y-3",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ca,{className:"h-4 w-4 text-blue-600"}),Ae.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.staff.name}),Ae.jsx(Yd,{variant:"outline",className:"text-xs",children:e.staff_role}),Ae.jsx(Yd,{variant:"outline",className:"text-xs",children:q(e.day_of_week)})]}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(yn,{className:"h-4 w-4 text-gray-400"}),Ae.jsxs("span",{children:[e.start_time," - ",e.end_time]})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(In,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{children:e.branch.name})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ca,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{children:e.staff.email})]})]})]}),Ae.jsxs("div",{className:"flex space-x-2",children:[Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>A(e),children:[Ae.jsx(Bn,{className:"h-4 w-4 mr-2"}),"Edit"]}),Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>F(e.id),children:[Ae.jsx(ra,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})},e.id))})}),Ae.jsx(Ef,{value:"pending",className:"space-y-4",children:0===U.length?Ae.jsx(td,{children:Ae.jsxs(sd,{className:"p-8 text-center",children:[Ae.jsx(ln,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Pending Requests"}),Ae.jsx("p",{className:"text-gray-600",children:"All schedule change requests have been processed"})]})}):Ae.jsx("div",{className:"grid gap-4",children:U.map(e=>Ae.jsx(td,{className:`border-l-4 ${L(e.status)}`,children:Ae.jsx(sd,{className:"p-6",children:Ae.jsxs("div",{className:"flex items-start justify-between",children:[Ae.jsxs("div",{className:"space-y-3",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[B(e.status),Ae.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.staff.name}),Ae.jsx(Yd,{variant:"outline",className:"text-xs",children:e.staff_role}),Ae.jsx(Yd,{variant:"outline",className:"text-xs",children:q(e.day_of_week)})]}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(yn,{className:"h-4 w-4 text-gray-400"}),Ae.jsxs("span",{children:[e.start_time," - ",e.end_time]})]}),e.branch&&Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(In,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{children:e.branch.name})]}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ca,{className:"h-4 w-4 text-gray-400"}),Ae.jsx("span",{children:e.staff.email})]})]}),Ae.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[Ae.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Reason:"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:e.reason})]})]}),Ae.jsx("div",{className:"flex space-x-2",children:Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(e=>{g(e),j(e.admin_notes||""),k(!0)})(e),children:[Ae.jsx(wn,{className:"h-4 w-4 mr-2"}),"Review"]})})]})})},e.id))})}),Ae.jsx(Ef,{value:"approved",className:"space-y-4",children:0===V.length?Ae.jsx(td,{children:Ae.jsxs(sd,{className:"p-8 text-center",children:[Ae.jsx(dn,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Approved Requests"}),Ae.jsx("p",{className:"text-gray-600",children:"No schedule change requests have been approved yet"})]})}):Ae.jsx("div",{className:"space-y-4",children:V.map(e=>{var t;return Ae.jsx(td,{className:"border-l-4 border-green-200 bg-green-50",children:Ae.jsx(sd,{className:"p-6",children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(dn,{className:"h-4 w-4 text-green-600"}),Ae.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[e.staff.name," - ",q(e.day_of_week)]}),Ae.jsx(Yd,{variant:"outline",className:"text-xs",children:e.staff_role})]}),Ae.jsxs("div",{className:"text-sm text-gray-600",children:[e.start_time," - ",e.end_time," • ",(null==(t=e.branch)?void 0:t.name)||"No Branch"]}),e.admin_notes&&Ae.jsxs("div",{className:"bg-green-100 p-2 rounded text-sm",children:[Ae.jsx("strong",{children:"Admin Notes:"})," ",e.admin_notes]})]}),Ae.jsx("div",{className:"text-sm text-gray-500",children:e.reviewed_at?new Date(e.reviewed_at).toLocaleDateString():"N/A"})]})})},e.id)})})}),Ae.jsx(Ef,{value:"rejected",className:"space-y-4",children:0===W.length?Ae.jsx(td,{children:Ae.jsxs(sd,{className:"p-8 text-center",children:[Ae.jsx(ha,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Rejected Requests"}),Ae.jsx("p",{className:"text-gray-600",children:"No schedule change requests have been rejected"})]})}):Ae.jsx("div",{className:"space-y-4",children:W.map(e=>{var t;return Ae.jsx(td,{className:"border-l-4 border-red-200 bg-red-50",children:Ae.jsx(sd,{className:"p-6",children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"space-y-2",children:[Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(ha,{className:"h-4 w-4 text-red-600"}),Ae.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[e.staff.name," - ",q(e.day_of_week)]}),Ae.jsx(Yd,{variant:"outline",className:"text-xs",children:e.staff_role})]}),Ae.jsxs("div",{className:"text-sm text-gray-600",children:[e.start_time," - ",e.end_time," • ",(null==(t=e.branch)?void 0:t.name)||"No Branch"]}),e.admin_notes&&Ae.jsxs("div",{className:"bg-red-100 p-2 rounded text-sm",children:[Ae.jsx("strong",{children:"Admin Notes:"})," ",e.admin_notes]})]}),Ae.jsx("div",{className:"text-sm text-gray-500",children:e.reviewed_at?new Date(e.reviewed_at).toLocaleDateString():"N/A"})]})})},e.id)})})})]}),Ae.jsx(Vp,{open:S,onOpenChange:k,children:Ae.jsxs(Yp,{className:"max-w-2xl",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Review Schedule Change Request"}),Ae.jsxs(Jp,{children:["Review and respond to the schedule change request from ",null==v?void 0:v.staff.name," (",null==v?void 0:v.staff_role,")"]})]}),v&&Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{className:"text-sm font-medium",children:"Day"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:q(v.day_of_week)})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{className:"text-sm font-medium",children:"Time"}),Ae.jsxs("p",{className:"text-sm text-gray-600",children:[v.start_time," - ",v.end_time]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{className:"text-sm font-medium",children:"Branch"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:(null==(e=v.branch)?void 0:e.name)||"No Branch"})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{className:"text-sm font-medium",children:"Employee"}),Ae.jsxs("p",{className:"text-sm text-gray-600",children:[v.staff.name," (",v.staff_role,")"]})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{className:"text-sm font-medium",children:"Reason"}),Ae.jsx("div",{className:"bg-gray-50 p-3 rounded-lg mt-1",children:Ae.jsx("p",{className:"text-sm text-gray-600",children:v.reason})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"admin-notes",className:"text-sm font-medium",children:"Admin Notes (Optional)"}),Ae.jsx(ph,{id:"admin-notes",placeholder:"Add your notes or reason for approval/rejection...",value:b,onChange:e=>j(e.target.value),className:"mt-1",rows:3})]})]}),Ae.jsxs(Xp,{className:"flex space-x-2",children:[Ae.jsx(Hc,{variant:"outline",onClick:()=>k(!1),disabled:w,children:"Cancel"}),Ae.jsxs(Hc,{variant:"destructive",onClick:()=>R(v.id,"rejected"),disabled:w,children:[Ae.jsx(ha,{className:"h-4 w-4 mr-2"}),"Reject"]}),Ae.jsxs(Hc,{onClick:()=>R(v.id,"approved"),disabled:w,children:[Ae.jsx(dn,{className:"h-4 w-4 mr-2"}),"Approve"]})]})]})}),Ae.jsx(Vp,{open:_,onOpenChange:O,children:Ae.jsxs(Yp,{className:"max-w-2xl",children:[Ae.jsxs(Gp,{children:[Ae.jsx(Qp,{children:"Create New Schedule"}),Ae.jsx(Jp,{children:"Create a new schedule for an employee"})]}),Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"staff-select",children:"Employee"}),Ae.jsxs(Tm,{value:E.staff_id,onValueChange:e=>P({...E,staff_id:e}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select employee"})}),Ae.jsx(Fm,{children:H.map(e=>Ae.jsxs(Lm,{value:e.id.toString(),children:[e.name," (",e.role,")"]},e.id))})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"role-select",children:"Role"}),Ae.jsxs(Tm,{value:E.staff_role,onValueChange:e=>P({...E,staff_role:e}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select role"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"optometrist",children:"Optometrist"}),Ae.jsx(Lm,{value:"staff",children:"Staff"})]})]})]})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"branch-select",children:"Branch"}),Ae.jsxs(Tm,{value:E.branch_id,onValueChange:e=>P({...E,branch_id:e}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select branch"})}),Ae.jsx(Fm,{children:l.map(e=>Ae.jsx(Lm,{value:e.id.toString(),children:e.name},e.id))})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"day-select",children:"Day of Week"}),Ae.jsxs(Tm,{value:E.day_of_week.toString(),onValueChange:e=>P({...E,day_of_week:parseInt(e)}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"Select day"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"1",children:"Monday"}),Ae.jsx(Lm,{value:"2",children:"Tuesday"}),Ae.jsx(Lm,{value:"3",children:"Wednesday"}),Ae.jsx(Lm,{value:"4",children:"Thursday"}),Ae.jsx(Lm,{value:"5",children:"Friday"}),Ae.jsx(Lm,{value:"6",children:"Saturday"}),Ae.jsx(Lm,{value:"7",children:"Sunday"})]})]})]})]}),Ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"start-time",children:"Start Time"}),Ae.jsx(Yc,{id:"start-time",type:"time",value:E.start_time,onChange:e=>P({...E,start_time:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"end-time",children:"End Time"}),Ae.jsx(Yc,{id:"end-time",type:"time",value:E.end_time,onChange:e=>P({...E,end_time:e.target.value})})]})]})]}),Ae.jsxs(Xp,{children:[Ae.jsx(Hc,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),Ae.jsx(Hc,{onClick:async()=>{try{await(async e=>{try{return(await Cc.post(`${fK}/staff-schedules`,e,{headers:xK()})).data}catch(t){throw console.error("Error creating/updating schedule:",t),t}})({staff_id:parseInt(E.staff_id),staff_role:E.staff_role,branch_id:parseInt(E.branch_id),day_of_week:E.day_of_week,start_time:E.start_time,end_time:E.end_time,is_active:E.is_active}),t({title:"Schedule Created",description:"Employee schedule has been created successfully"}),O(!1),P({staff_id:"",staff_role:"optometrist",branch_id:"",day_of_week:1,start_time:"09:00",end_time:"17:00",is_active:!0}),D()}catch(e){console.error("Error creating schedule:",e),t({title:"Error",description:e.message||"Failed to create schedule",variant:"destructive"})}},disabled:!E.staff_id||!E.branch_id,children:"Create Schedule"})]})]})})]})},vK=()=>{const{user:e}=Rc(),{toast:t}=Jt(),[r,n]=Ct.useState([]),[a,s]=Ct.useState(!0),[i,o]=Ct.useState({status:"all",date_from:"",date_to:""}),[l,c]=Ct.useState(null),[d,u]=Ct.useState(!1),[h,m]=Ct.useState(!1),[p,f]=Ct.useState({customer_id:0,branch_id:(null==e?void 0:e.branch_id)||0,total_amount:0,payment_method:"Cash",notes:""}),[x,y]=Ct.useState({sales_type:"cash",customer_name:"",tin:"",address:"",eye_exam_fee:0});Ct.useEffect(()=>{v()},[i]);const v=async()=>{try{s(!0);const e=await BH(i);n(e.transactions.data||[])}catch(e){t({title:"Error",description:"Failed to load transactions",variant:"destructive"})}finally{s(!1)}};return Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsx("h1",{className:"text-3xl font-bold",children:"Transaction Management"}),Ae.jsxs(Vp,{open:d,onOpenChange:u,children:[Ae.jsx(Wp,{asChild:!0,children:Ae.jsxs(Hc,{children:[Ae.jsx($n,{className:"w-4 h-4 mr-2"}),"Create Transaction"]})}),Ae.jsxs(Yp,{className:"max-w-md",children:[Ae.jsx(Gp,{children:Ae.jsx(Qp,{children:"Create New Transaction"})}),Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"customer_id",children:"Customer ID"}),Ae.jsx(Yc,{id:"customer_id",type:"number",value:p.customer_id,onChange:e=>f({...p,customer_id:parseInt(e.target.value)})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"total_amount",children:"Total Amount"}),Ae.jsx(Yc,{id:"total_amount",type:"number",step:"0.01",value:p.total_amount,onChange:e=>f({...p,total_amount:parseFloat(e.target.value)})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"payment_method",children:"Payment Method"}),Ae.jsxs(Tm,{value:p.payment_method,onValueChange:e=>f({...p,payment_method:e}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"Cash",children:"Cash"}),Ae.jsx(Lm,{value:"Credit Card",children:"Credit Card"}),Ae.jsx(Lm,{value:"Debit Card",children:"Debit Card"}),Ae.jsx(Lm,{value:"Online Payment",children:"Online Payment"})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"notes",children:"Notes"}),Ae.jsx(Yc,{id:"notes",value:p.notes,onChange:e=>f({...p,notes:e.target.value})})]}),Ae.jsx(Hc,{onClick:async()=>{try{await qH(p),t({title:"Success",description:"Transaction created successfully"}),u(!1),f({customer_id:0,branch_id:(null==e?void 0:e.branch_id)||0,total_amount:0,payment_method:"Cash",notes:""}),v()}catch(r){t({title:"Error",description:"Failed to create transaction",variant:"destructive"})}},className:"w-full",children:"Create Transaction"})]})]})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Filters"})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"status",children:"Status"}),Ae.jsxs(Tm,{value:i.status,onValueChange:e=>o({...i,status:e}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"All Status"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"all",children:"All Status"}),Ae.jsx(Lm,{value:"Pending",children:"Pending"}),Ae.jsx(Lm,{value:"Completed",children:"Completed"}),Ae.jsx(Lm,{value:"Cancelled",children:"Cancelled"})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"date_from",children:"From Date"}),Ae.jsx(Yc,{id:"date_from",type:"date",value:i.date_from,onChange:e=>o({...i,date_from:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"date_to",children:"To Date"}),Ae.jsx(Yc,{id:"date_to",type:"date",value:i.date_to,onChange:e=>o({...i,date_to:e.target.value})})]}),Ae.jsx("div",{className:"flex items-end",children:Ae.jsx(Hc,{onClick:v,className:"w-full",children:"Apply Filters"})})]})})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Transactions"})}),Ae.jsx(sd,{children:a?Ae.jsx("div",{className:"text-center py-8",children:"Loading transactions..."}):Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Transaction Code"}),Ae.jsx(Gm,{children:"Customer"}),Ae.jsx(Gm,{children:"Amount"}),Ae.jsx(Gm,{children:"Status"}),Ae.jsx(Gm,{children:"Payment Method"}),Ae.jsx(Gm,{children:"Created"}),Ae.jsx(Gm,{children:"Actions"})]})}),Ae.jsx(Km,{children:r.map(e=>{var r,n,a,s;return Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{className:"font-mono",children:e.transaction_code}),Ae.jsx(Xm,{children:(null==(r=e.customer)?void 0:r.name)||"N/A"}),Ae.jsx(Xm,{children:(s=e.total_amount,new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(s))}),Ae.jsx(Xm,{children:(a=e.status,Ae.jsx(Yd,{variant:{Pending:"default",Completed:"default",Cancelled:"destructive"}[a]||"default",children:a}))}),Ae.jsx(Xm,{children:e.payment_method}),Ae.jsx(Xm,{children:(n=e.created_at,new Date(n).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex space-x-2",children:[Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>c(e),children:Ae.jsx(wn,{className:"w-4 h-4"})}),"Pending"===e.status&&Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>{var t;c(e),y({sales_type:"cash",customer_name:(null==(t=e.customer)?void 0:t.name)||"",tin:"",address:"",eye_exam_fee:0}),m(!0)},children:"Finalize"}),"Completed"===e.status&&e.receipt&&Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{const t=await VH(e),r=window.URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=`receipt_${e}.pdf`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n)}catch(r){t({title:"Error",description:"Failed to download receipt",variant:"destructive"})}})(e.id),children:Ae.jsx(bn,{className:"w-4 h-4"})})]})})]},e.id)})})]})})]}),Ae.jsx(Vp,{open:h,onOpenChange:m,children:Ae.jsxs(Yp,{className:"max-w-md",children:[Ae.jsx(Gp,{children:Ae.jsx(Qp,{children:"Finalize Transaction"})}),Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"sales_type",children:"Sales Type"}),Ae.jsxs(Tm,{value:x.sales_type,onValueChange:e=>y({...x,sales_type:e}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"cash",children:"Cash"}),Ae.jsx(Lm,{value:"charge",children:"Charge"})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"customer_name",children:"Customer Name"}),Ae.jsx(Yc,{id:"customer_name",value:x.customer_name,onChange:e=>y({...x,customer_name:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"tin",children:"TIN"}),Ae.jsx(Yc,{id:"tin",value:x.tin,onChange:e=>y({...x,tin:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"address",children:"Address"}),Ae.jsx(Yc,{id:"address",value:x.address,onChange:e=>y({...x,address:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"eye_exam_fee",children:"Eye Exam Fee"}),Ae.jsx(Yc,{id:"eye_exam_fee",type:"number",step:"0.01",value:x.eye_exam_fee,onChange:e=>y({...x,eye_exam_fee:parseFloat(e.target.value)})})]}),Ae.jsx(Hc,{onClick:async()=>{if(l)try{await zH(l.id,x),t({title:"Success",description:"Transaction finalized successfully"}),m(!1),c(null),y({sales_type:"cash",customer_name:"",tin:"",address:"",eye_exam_fee:0}),v()}catch(e){t({title:"Error",description:"Failed to finalize transaction",variant:"destructive"})}},className:"w-full",children:"Finalize Transaction"})]})]})})]})},gK=()=>{const{toast:e}=Jt(),[t,r]=Ct.useState(null),[n,a]=Ct.useState([]),[s,i]=Ct.useState(!0),[o,l]=Ct.useState({date_from:new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString().split("T")[0],date_to:(new Date).toISOString().split("T")[0],branch_id:"all"});Ct.useEffect(()=>{c(),d()},[o]);const c=async()=>{try{i(!0);const e=await UH(o.date_from,o.date_to,o.branch_id&&"all"!==o.branch_id?parseInt(o.branch_id):void 0);r(e.analytics)}catch(t){e({title:"Error",description:"Failed to load analytics",variant:"destructive"})}finally{i(!1)}},d=async()=>{try{const e=await BH({date_from:o.date_from,date_to:o.date_to,branch_id:o.branch_id?parseInt(o.branch_id):void 0});a(e.transactions.data||[])}catch(t){e({title:"Error",description:"Failed to load transactions",variant:"destructive"})}},u=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e),h=e=>{switch(e){case"Completed":return"text-green-600";case"Pending":return"text-yellow-600";case"Cancelled":return"text-red-600";default:return"text-gray-600"}};return Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsx("h1",{className:"text-3xl font-bold",children:"Transaction Analytics"}),Ae.jsxs(Hc,{onClick:c,disabled:s,children:[Ae.jsx(aa,{className:"w-4 h-4 mr-2"}),"Refresh Analytics"]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Analytics Filters"})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"date_from",children:"From Date"}),Ae.jsx(Yc,{id:"date_from",type:"date",value:o.date_from,onChange:e=>l({...o,date_from:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"date_to",children:"To Date"}),Ae.jsx(Yc,{id:"date_to",type:"date",value:o.date_to,onChange:e=>l({...o,date_to:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"branch_id",children:"Branch"}),Ae.jsxs(Tm,{value:o.branch_id,onValueChange:e=>l({...o,branch_id:e}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"All Branches"})}),Ae.jsx(Fm,{children:Ae.jsx(Lm,{value:"all",children:"All Branches"})})]})]}),Ae.jsx("div",{className:"flex items-end",children:Ae.jsx(Hc,{onClick:c,className:"w-full",children:"Apply Filters"})})]})})]}),t&&Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Total Income"}),Ae.jsx(gn,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:u(t.total_income)}),Ae.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.completed_transactions," completed transactions"]})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Total Transactions"}),Ae.jsx(da,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:t.total_transactions}),Ae.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.pending_transactions," pending, ",t.cancelled_transactions," cancelled"]})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Average Transaction"}),Ae.jsx(aa,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:u(t.average_transaction_value)}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Per completed transaction"})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Completion Rate"}),Ae.jsx(ln,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsxs("div",{className:"text-2xl font-bold",children:[t.total_transactions>0?Math.round(t.completed_transactions/t.total_transactions*100):0,"%"]}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Transactions completed"})]})]})]}),t&&t.sales_by_branch.length>0&&Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Sales by Branch"})}),Ae.jsx(sd,{children:Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Branch"}),Ae.jsx(Gm,{children:"Total Sales"}),Ae.jsx(Gm,{children:"Percentage"})]})}),Ae.jsx(Km,{children:t.sales_by_branch.map((e,r)=>Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{className:"font-medium",children:e.name}),Ae.jsx(Xm,{children:u(e.total_sales)}),Ae.jsxs(Xm,{children:[t.total_income>0?Math.round(e.total_sales/t.total_income*100):0,"%"]})]},r))})]})})]}),t&&t.sales_by_payment_method.length>0&&Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Sales by Payment Method"})}),Ae.jsx(sd,{children:Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Payment Method"}),Ae.jsx(Gm,{children:"Total Sales"}),Ae.jsx(Gm,{children:"Transaction Count"}),Ae.jsx(Gm,{children:"Average per Transaction"})]})}),Ae.jsx(Km,{children:t.sales_by_payment_method.map((e,t)=>Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{className:"font-medium",children:e.payment_method}),Ae.jsx(Xm,{children:u(e.total_sales)}),Ae.jsx(Xm,{children:e.transaction_count}),Ae.jsx(Xm,{children:u(e.total_sales/e.transaction_count)})]},t))})]})})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Recent Transactions"})}),Ae.jsx(sd,{children:s?Ae.jsx("div",{className:"text-center py-8",children:"Loading transactions..."}):Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Transaction Code"}),Ae.jsx(Gm,{children:"Customer"}),Ae.jsx(Gm,{children:"Amount"}),Ae.jsx(Gm,{children:"Status"}),Ae.jsx(Gm,{children:"Payment Method"}),Ae.jsx(Gm,{children:"Date"})]})}),Ae.jsx(Km,{children:n.slice(0,10).map(e=>{var t,r;return Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{className:"font-mono",children:e.transaction_code}),Ae.jsx(Xm,{children:(null==(t=e.customer)?void 0:t.name)||"N/A"}),Ae.jsx(Xm,{children:u(e.total_amount)}),Ae.jsx(Xm,{children:Ae.jsx("span",{className:h(e.status),children:e.status})}),Ae.jsx(Xm,{children:e.payment_method}),Ae.jsx(Xm,{children:(r=e.created_at,new Date(r).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}))})]},e.id)})})]})})]})]})},bK=()=>{const{toast:e}=Jt(),[t,r]=Ct.useState([]),[n,a]=Ct.useState(!0),[s,i]=Ct.useState({status:"all",date_from:"",date_to:""});Ct.useEffect(()=>{o()},[s]);const o=async()=>{try{a(!0);const e=await $H(s);r(e.transactions.data||[])}catch(t){e({title:"Error",description:"Failed to load transaction history",variant:"destructive"})}finally{a(!1)}},l=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e),c=e=>{var t;const r=[];if(e.appointment&&r.push("Eye Examination"),e.reservation){const n=(null==(t=e.reservation.product)?void 0:t.name)||"Product",a=e.reservation.quantity||1;r.push(`${n} (${a}x)`)}return r.length>0?r.join(", "):"Transaction"};return Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsx("h1",{className:"text-3xl font-bold",children:"My Transaction History"}),Ae.jsxs(Hc,{onClick:o,disabled:n,children:[Ae.jsx(ln,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Filter Transactions"})}),Ae.jsx(sd,{children:Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"status",children:"Status"}),Ae.jsxs(Tm,{value:s.status,onValueChange:e=>i({...s,status:e}),children:[Ae.jsx(Dm,{children:Ae.jsx(Mm,{placeholder:"All Status"})}),Ae.jsxs(Fm,{children:[Ae.jsx(Lm,{value:"all",children:"All Status"}),Ae.jsx(Lm,{value:"Pending",children:"Pending"}),Ae.jsx(Lm,{value:"Completed",children:"Completed"}),Ae.jsx(Lm,{value:"Cancelled",children:"Cancelled"})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"date_from",children:"From Date"}),Ae.jsx(Yc,{id:"date_from",type:"date",value:s.date_from,onChange:e=>i({...s,date_from:e.target.value})})]}),Ae.jsxs("div",{children:[Ae.jsx(Zc,{htmlFor:"date_to",children:"To Date"}),Ae.jsx(Yc,{id:"date_to",type:"date",value:s.date_to,onChange:e=>i({...s,date_to:e.target.value})})]}),Ae.jsx("div",{className:"flex items-end",children:Ae.jsx(Hc,{onClick:o,className:"w-full",children:"Apply Filters"})})]})})]}),Ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Total Transactions"}),Ae.jsx(Un,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:t.length}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"All time transactions"})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Total Spent"}),Ae.jsx(Un,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:l(t.reduce((e,t)=>e+t.total_amount,0))}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Total amount spent"})]})]}),Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:"Completed"}),Ae.jsx(Un,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:t.filter(e=>"Completed"===e.status).length}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed transactions"})]})]})]}),Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Transaction History"})}),Ae.jsx(sd,{children:n?Ae.jsx("div",{className:"text-center py-8",children:"Loading transaction history..."}):0===t.length?Ae.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No transactions found"}):Ae.jsxs(Wm,{children:[Ae.jsx(Hm,{children:Ae.jsxs(Ym,{children:[Ae.jsx(Gm,{children:"Transaction Code"}),Ae.jsx(Gm,{children:"Services/Products"}),Ae.jsx(Gm,{children:"Amount"}),Ae.jsx(Gm,{children:"Status"}),Ae.jsx(Gm,{children:"Payment Method"}),Ae.jsx(Gm,{children:"Date"}),Ae.jsx(Gm,{children:"Actions"})]})}),Ae.jsx(Km,{children:t.map(t=>{return Ae.jsxs(Ym,{children:[Ae.jsx(Xm,{className:"font-mono",children:t.transaction_code}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"max-w-xs",children:[Ae.jsx("p",{className:"text-sm",children:c(t)}),t.branch&&Ae.jsxs("p",{className:"text-xs text-muted-foreground",children:["at ",t.branch.name]})]})}),Ae.jsx(Xm,{children:l(t.total_amount)}),Ae.jsx(Xm,{children:(n=t.status,Ae.jsx(Yd,{variant:{Pending:"default",Completed:"default",Cancelled:"destructive"}[n]||"default",children:n}))}),Ae.jsx(Xm,{children:t.payment_method}),Ae.jsx(Xm,{children:(r=t.created_at,new Date(r).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),Ae.jsx(Xm,{children:Ae.jsxs("div",{className:"flex space-x-2",children:[Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>{console.log("View transaction details:",t)},children:Ae.jsx(wn,{className:"w-4 h-4"})}),"Completed"===t.status&&t.receipt&&Ae.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(async t=>{try{const e=await VH(t),r=window.URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`receipt_${t}.pdf`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n)}catch(r){e({title:"Error",description:"Failed to download receipt",variant:"destructive"})}})(t.id),children:Ae.jsx(bn,{className:"w-4 h-4"})})]})})]},t.id);var r,n})})]})})]})]})},jK=({transaction:e,onViewDetails:t,onDownloadReceipt:r})=>{var n,a;return Ae.jsxs(td,{className:"w-full max-w-md",children:[Ae.jsx(rd,{className:"pb-3",children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsx(nd,{className:"text-lg",children:"Transaction Update"}),Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(dn,{className:"w-5 h-5 text-green-600"}),Ae.jsx(Yd,{className:(e=>{switch(e){case"Completed":return"text-green-600 bg-green-50";case"Pending":return"text-yellow-600 bg-yellow-50";case"Cancelled":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}})(e.status),children:e.status})]})]})}),Ae.jsxs(sd,{className:"space-y-4",children:[Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Transaction Code"}),Ae.jsx("p",{className:"font-mono text-lg",children:e.transaction_code})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Services/Products"}),Ae.jsx("p",{className:"text-sm",children:(e=>{var t;const r=[];if(e.appointment&&r.push("Eye Examination"),e.reservation){const n=(null==(t=e.reservation.product)?void 0:t.name)||"Product",a=e.reservation.quantity||1;r.push(`${n} (${a}x)`)}return r.length>0?r.join(", "):"Transaction"})(e)})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Amount"}),Ae.jsx("p",{className:"text-lg font-semibold",children:(i=e.total_amount,new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(i))})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Payment Method"}),Ae.jsx("p",{className:"text-sm",children:e.payment_method})]}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Date"}),Ae.jsx("p",{className:"text-sm",children:(s=e.created_at,new Date(s).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),e.branch&&Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Branch"}),Ae.jsx("p",{className:"text-sm",children:(null==(n=e.branch)?void 0:n.name)||"N/A"})]}),"Completed"===e.status&&Ae.jsxs("div",{className:"pt-2 border-t",children:[Ae.jsx("p",{className:"text-sm font-medium text-green-600 mb-2",children:"✓ Transaction completed successfully"}),e.receipt&&Ae.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:["Receipt #",(null==(a=e.receipt)?void 0:a.id)||"N/A"," has been generated"]})]}),Ae.jsxs("div",{className:"flex space-x-2 pt-2",children:[Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>t(e),className:"flex-1",children:[Ae.jsx(wn,{className:"w-4 h-4 mr-2"}),"View Details"]}),"Completed"===e.status&&e.receipt&&Ae.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>r(e.id),className:"flex-1",children:[Ae.jsx(bn,{className:"w-4 h-4 mr-2"}),"Download Receipt"]})]})]})]});var s,i},wK=()=>{const{user:e}=Rc(),{toast:t}=Jt(),[r,n]=Ct.useState([]),[a,s]=Ct.useState(!0);Ct.useEffect(()=>{i()},[]);const i=async()=>{var e;try{s(!0);const t=await BH({date_from:new Date(Date.now()-6048e5).toISOString().split("T")[0]});n((null==(e=t.transactions.data)?void 0:e.slice(0,5))||[])}catch(t){console.error("Failed to load recent transactions:",t)}finally{s(!1)}},o=e=>{console.log("View transaction details:",e),t({title:"Transaction Details",description:`Viewing details for transaction ${e.transaction_code}`})},l=async e=>{try{const r=await VH(e),n=window.URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download=`receipt_${e}.pdf`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(n),document.body.removeChild(a),t({title:"Success",description:"Receipt downloaded successfully"})}catch(r){t({title:"Error",description:"Failed to download receipt",variant:"destructive"})}},c=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e);return Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(()=>{if("customer"===(null==e?void 0:e.role)){const e=r.reduce((e,t)=>e+t.total_amount,0),t=r.filter(e=>"Completed"===e.status).length;return[{title:"Recent Transactions",value:r.length,icon:Un,description:"Last 7 days"},{title:"Total Spent",value:c(e),icon:aa,description:"Last 7 days"},{title:"Completed",value:t,icon:wn,description:"Completed transactions"}]}const t=r.reduce((e,t)=>e+t.total_amount,0),n=r.filter(e=>"Completed"===e.status).length,a=r.filter(e=>"Pending"===e.status).length;return[{title:"Recent Transactions",value:r.length,icon:Un,description:"Last 7 days"},{title:"Total Revenue",value:c(t),icon:aa,description:"Last 7 days"},{title:"Completed",value:n,icon:wn,description:"Completed transactions"},{title:"Pending",value:a,icon:da,description:"Pending transactions"}]})().map((e,t)=>Ae.jsxs(td,{children:[Ae.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ae.jsx(nd,{className:"text-sm font-medium",children:e.title}),Ae.jsx(e.icon,{className:"h-4 w-4 text-muted-foreground"})]}),Ae.jsxs(sd,{children:[Ae.jsx("div",{className:"text-2xl font-bold",children:e.value}),Ae.jsx("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},t))}),r.length>0&&Ae.jsxs(td,{children:[Ae.jsx(rd,{children:Ae.jsx(nd,{children:"Recent Transaction Updates"})}),Ae.jsx(sd,{children:Ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>Ae.jsx(jK,{transaction:e,onViewDetails:o,onDownloadReceipt:l},e.id))})})]}),(()=>{switch(null==e?void 0:e.role){case"admin":return Ae.jsxs(Of,{defaultValue:"analytics",className:"space-y-6",children:[Ae.jsxs(Cf,{children:[Ae.jsx(Af,{value:"analytics",children:"Analytics"}),Ae.jsx(Af,{value:"management",children:"Transaction Management"})]}),Ae.jsx(Ef,{value:"analytics",children:Ae.jsx(gK,{})}),Ae.jsx(Ef,{value:"management",children:Ae.jsx(vK,{})})]});case"staff":case"optometrist":return Ae.jsxs(Of,{defaultValue:"management",className:"space-y-6",children:[Ae.jsxs(Cf,{children:[Ae.jsx(Af,{value:"management",children:"Transaction Management"}),Ae.jsx(Af,{value:"patients",children:"Patient Transactions"})]}),Ae.jsx(Ef,{value:"management",children:Ae.jsx(vK,{})}),Ae.jsx(Ef,{value:"patients",children:Ae.jsx(HH,{})})]});case"customer":return Ae.jsx(bK,{});default:return Ae.jsx(td,{children:Ae.jsx(sd,{className:"text-center py-8",children:Ae.jsx("p",{className:"text-muted-foreground",children:"No transaction access for your role."})})})}})()]})},NK=new Ji,SK=()=>Ae.jsx(io,{client:NK,children:Ae.jsx(Ic,{children:Ae.jsx($c,{children:Ae.jsx(Ip,{children:Ae.jsx(tK,{children:Ae.jsxs(di,{children:[Ae.jsx(ps,{}),Ae.jsx(Ls,{}),Ae.jsx(qt,{children:Ae.jsxs(zt,{children:[Ae.jsx($t,{path:"/",element:Ae.jsx(eH,{})}),Ae.jsx($t,{path:"/login",element:Ae.jsx(od,{})}),Ae.jsx($t,{path:"/register",element:Ae.jsx(ld,{})}),Ae.jsx($t,{path:"/faq",element:Ae.jsx(lH,{})}),Ae.jsxs($t,{path:"/customer",element:Ae.jsx(Uc,{allowedRoles:["customer"],children:Ae.jsx(ah,{})}),children:[Ae.jsx($t,{path:"dashboard",element:Ae.jsx(Um,{})}),Ae.jsx($t,{path:"appointments",element:Ae.jsx(uH,{})}),Ae.jsx($t,{path:"history",element:Ae.jsx(jH,{})}),Ae.jsx($t,{path:"prescriptions",element:Ae.jsx(kH,{})}),Ae.jsx($t,{path:"receipts",element:Ae.jsx(SH,{})}),Ae.jsx($t,{path:"feedback",element:Ae.jsx(wH,{})}),Ae.jsx($t,{path:"notifications",element:Ae.jsx(Gf,{})}),Ae.jsx($t,{path:"products",element:Ae.jsx(PH,{})}),Ae.jsx($t,{path:"products/:productId",element:Ae.jsx(MH,{})}),Ae.jsx($t,{path:"profile",element:Ae.jsx(hK,{})}),Ae.jsx($t,{path:"reservations",element:Ae.jsx(IH,{})})]}),Ae.jsx($t,{path:"/customer/book-appointment",element:Ae.jsx(Uc,{allowedRoles:["customer"],children:Ae.jsx(oH,{})})}),Ae.jsxs($t,{path:"/optometrist",element:Ae.jsx(Uc,{allowedRoles:["optometrist"],children:Ae.jsx(ah,{})}),children:[Ae.jsx($t,{index:!0,element:Ae.jsx(Mt,{to:"dashboard",replace:!0})}),Ae.jsx($t,{path:"dashboard",element:Ae.jsx(tp,{})}),Ae.jsx($t,{path:"appointments",element:Ae.jsx(sK,{})}),Ae.jsx($t,{path:"patients",element:Ae.jsx(lK,{})}),Ae.jsx($t,{path:"prescriptions",element:Ae.jsx(cK,{})}),Ae.jsx($t,{path:"schedule",element:Ae.jsx(uK,{})}),Ae.jsx($t,{path:"notifications",element:Ae.jsx(Gf,{})}),Ae.jsx($t,{path:"profile",element:Ae.jsx(hK,{})})]}),Ae.jsxs($t,{path:"/staff",element:Ae.jsx(Uc,{allowedRoles:["staff"],children:Ae.jsx(ah,{})}),children:[Ae.jsx($t,{path:"dashboard",element:Ae.jsx(Ap,{})}),Ae.jsx($t,{path:"appointments",element:Ae.jsx(iK,{})}),Ae.jsx($t,{path:"reservations",element:Ae.jsx(YH,{})}),Ae.jsx($t,{path:"create-receipt/:appointmentId",element:Ae.jsx(kK,{})}),Ae.jsx($t,{path:"restock-requests",element:Ae.jsx(XH,{})}),Ae.jsx($t,{path:"inventory",element:Ae.jsx(of,{})}),Ae.jsx($t,{path:"inventory/legacy",element:Ae.jsx(af,{})}),Ae.jsx($t,{path:"patients",element:Ae.jsx(Qf,{})}),Ae.jsx($t,{path:"profile",element:Ae.jsx(hK,{})}),Ae.jsx($t,{path:"notifications",element:Ae.jsx(Gf,{})})]}),Ae.jsxs($t,{path:"/admin",element:Ae.jsx(Uc,{allowedRoles:["admin"],children:Ae.jsx(ah,{})}),children:[Ae.jsx($t,{path:"dashboard",element:Ae.jsx($p,{})}),Ae.jsx($t,{path:"analytics",element:Ae.jsx(JW,{})}),Ae.jsx($t,{path:"users",element:Ae.jsx(mK,{})}),Ae.jsx($t,{path:"branches",element:Ae.jsx(pK,{})}),Ae.jsx($t,{path:"inventory",element:Ae.jsx(Tf,{})}),Ae.jsx($t,{path:"inventory/consolidated",element:Ae.jsx(Yf,{})}),Ae.jsx($t,{path:"stock-management",element:Ae.jsx(JH,{})}),Ae.jsx($t,{path:"products",element:Ae.jsx(RH,{children:Ae.jsx(ZH,{})})}),Ae.jsx($t,{path:"notifications",element:Ae.jsx(Gf,{})}),Ae.jsx($t,{path:"patients",element:Ae.jsx(Qf,{})}),Ae.jsx($t,{path:"sales",element:Ae.jsx(JW,{})}),Ae.jsx($t,{path:"employee-schedules",element:Ae.jsx(yK,{})}),Ae.jsx($t,{path:"transactions",element:Ae.jsx(wK,{})}),Ae.jsx($t,{path:"profile",element:Ae.jsx(hK,{})})]}),Ae.jsx($t,{path:"*",element:Ae.jsx(tH,{})})]})})]})})})})})});function kK(){var e,t,r;const{appointmentId:n}=Bt(),a=Number(n);Rc();const{data:s}=ho({queryKey:["appointment",a],enabled:!!a,queryFn:async()=>{const e=await fetch(Lc(`/appointments/${a}`),{headers:Bc()});if(!e.ok)throw new Error("Failed to load appointment");return e.json()}}),i=(null==(e=null==s?void 0:s.patient)?void 0:e.name)||"",o=(null==(t=null==s?void 0:s.patient)?void 0:t.address)||"",l=(null==(r=null==s?void 0:s.patient)?void 0:r.id)||(null==s?void 0:s.customer_id);return Ae.jsx(QH,{appointmentId:a,defaultCustomerName:i,defaultAddress:o,customerId:l})}we(document.getElementById("root")).render(Ae.jsx(SK,{}));
