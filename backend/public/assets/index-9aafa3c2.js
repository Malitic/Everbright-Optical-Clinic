var e,t,r,n,a,s,i,o,l,c,d,u,h,m,p,f,x,y,v,g,b,j,w,N,S,_,k,O,C,A,E,P,T,M,D,I,R,L,F,B,q,$,z,U,V,W,H,K,Y,G,X,Q,J,Z,ee,te,re,ne,ae,se,ie,oe,le,ce,de,ue,he,me,pe,fe,xe,ye,ve,ge,be,je,we=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Ne=(e,t,r)=>(we(e,t,"read from private field"),r?r.call(e):t.get(e)),Se=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},_e=(e,t,r,n)=>(we(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ke=(e,t,r,n)=>({set _(n){_e(e,t,n,r)},get _(){return Ne(e,t,n)}}),Oe=(e,t,r)=>(we(e,t,"access private method"),r);import{j as Ce,P as Ae,c as Ee,a as Pe,u as Te,B as Me,b as De,d as Ie,e as Re,f as Le,R as Fe,g as Be,h as qe,i as $e,k as ze,A as Ue,D as Ve,C as We,l as He,m as Ke,S as Ye,n as Ge,o as Xe,p as Qe,q as Je,I as Ze,r as et,s as tt,t as rt,L as nt,v as at,w as st,T as it,x as ot,y as lt,z as ct,F as dt,E as ut,G as ht,H as mt,J as pt,O as ft,K as xt,M as yt,N as vt,Q as gt,U as bt,V as jt,W as wt,X as Nt,Y as St,Z as _t,_ as kt}from"./ui-e8af799e.js";import{b as Ot,r as Ct,a as At,c as Et,d as Pt,g as Tt}from"./vendor-84919cb1.js";import{N as Mt,u as Dt,L as It,a as Rt,b as Lt,O as Ft,c as Bt,B as qt,R as $t,d as zt}from"./router-f21f2c44.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Ut=Ot;je=Ut.createRoot,Ut.hydrateRoot;let Vt=0;const Wt=new Map,Ht=e=>{if(Wt.has(e))return;const t=setTimeout(()=>{Wt.delete(e),Xt({type:"REMOVE_TOAST",toastId:e})},1e6);Wt.set(e,t)},Kt=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Ht(r):e.toasts.forEach(e=>{Ht(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},Yt=[];let Gt={toasts:[]};function Xt(e){Gt=Kt(Gt,e),Yt.forEach(e=>{e(Gt)})}function Qt({...e}){const t=(Vt=(Vt+1)%Number.MAX_SAFE_INTEGER,Vt.toString()),r=()=>Xt({type:"DISMISS_TOAST",toastId:t});return Xt({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>Xt({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function Jt(){const[e,t]=Ct.useState(Gt);return Ct.useEffect(()=>(Yt.push(t),()=>{const e=Yt.indexOf(t);e>-1&&Yt.splice(e,1)}),[e]),{...e,toast:Qt,dismiss:e=>Xt({type:"DISMISS_TOAST",toastId:e})}}var Zt=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),er=Ct.forwardRef((e,t)=>Ce.jsx(Ae.span,{...e,ref:t,style:{...Zt,...e.style}}));er.displayName="VisuallyHidden";var tr=er,rr="ToastProvider",[nr,ar,sr]=Ee("Toast"),[ir,or]=Pe("Toast",[sr]),[lr,cr]=ir(rr),dr=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:s=50,children:i}=e,[o,l]=Ct.useState(null),[c,d]=Ct.useState(0),u=Ct.useRef(!1),h=Ct.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${rr}\`. Expected non-empty \`string\`.`),Ce.jsx(nr.Provider,{scope:t,children:Ce.jsx(lr,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:s,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:Ct.useCallback(()=>d(e=>e+1),[]),onToastRemove:Ct.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:h,children:i})})};dr.displayName=rr;var ur="ToastViewport",hr=["F8"],mr="toast.viewportPause",pr="toast.viewportResume",fr=Ct.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=hr,label:a="Notifications ({hotkey})",...s}=e,i=cr(ur,r),o=ar(r),l=Ct.useRef(null),c=Ct.useRef(null),d=Ct.useRef(null),u=Ct.useRef(null),h=Te(t,u,i.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=i.toastCount>0;Ct.useEffect(()=>{const e=e=>{var t;0!==n.length&&n.every(t=>e[t]||e.code===t)&&(null==(t=u.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]),Ct.useEffect(()=>{const e=l.current,t=u.current;if(p&&e&&t){const r=()=>{if(!i.isClosePausedRef.current){const e=new CustomEvent(mr);t.dispatchEvent(e),i.isClosePausedRef.current=!0}},n=()=>{if(i.isClosePausedRef.current){const e=new CustomEvent(pr);t.dispatchEvent(e),i.isClosePausedRef.current=!1}},a=t=>{!e.contains(t.relatedTarget)&&n()},s=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",r),e.addEventListener("focusout",a),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",s),window.addEventListener("blur",r),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",a),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",r),window.removeEventListener("focus",n)}}},[p,i.isClosePausedRef]);const f=Ct.useCallback(({tabbingDirection:e})=>{const t=o().map(t=>{const r=t.ref.current,n=[r,...Dr(r)];return"forwards"===e?n:n.reverse()});return("forwards"===e?t.reverse():t).flat()},[o]);return Ct.useEffect(()=>{const e=u.current;if(e){const t=t=>{var r,n,a;const s=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!s){const s=document.activeElement,i=t.shiftKey;if(t.target===e&&i)return void(null==(r=c.current)||r.focus());const o=f({tabbingDirection:i?"backwards":"forwards"}),l=o.findIndex(e=>e===s);Ir(o.slice(l+1))?t.preventDefault():i?null==(n=c.current)||n.focus():null==(a=d.current)||a.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[o,f]),Ce.jsxs(Me,{ref:l,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&Ce.jsx(yr,{ref:c,onFocusFromOutsideViewport:()=>{Ir(f({tabbingDirection:"forwards"}))}}),Ce.jsx(nr.Slot,{scope:r,children:Ce.jsx(Ae.ol,{tabIndex:-1,...s,ref:h})}),p&&Ce.jsx(yr,{ref:d,onFocusFromOutsideViewport:()=>{Ir(f({tabbingDirection:"backwards"}))}})]})});fr.displayName=ur;var xr="ToastFocusProxy",yr=Ct.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,s=cr(xr,r);return Ce.jsx(er,{tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const r=e.relatedTarget;!(null==(t=s.viewport)?void 0:t.contains(r))&&n()}})});yr.displayName=xr;var vr="Toast",gr=Ct.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:s,...i}=e,[o,l]=De({prop:n,defaultProp:a??!0,onChange:s,caller:vr});return Ce.jsx(Ie,{present:r||o,children:Ce.jsx(wr,{open:o,...i,ref:t,onClose:()=>l(!1),onPause:Re(e.onPause),onResume:Re(e.onResume),onSwipeStart:Le(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Le(e.onSwipeMove,e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${r}px`)}),onSwipeCancel:Le(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Le(e.onSwipeEnd,e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${r}px`),l(!1)})})})});gr.displayName=vr;var[br,jr]=ir(vr,{onClose(){}}),wr=Ct.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:s,onClose:i,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:h,onSwipeEnd:m,...p}=e,f=cr(vr,r),[x,y]=Ct.useState(null),v=Te(t,e=>y(e)),g=Ct.useRef(null),b=Ct.useRef(null),j=a||f.duration,w=Ct.useRef(0),N=Ct.useRef(j),S=Ct.useRef(0),{onToastAdd:_,onToastRemove:k}=f,O=Re(()=>{var e;(null==x?void 0:x.contains(document.activeElement))&&(null==(e=f.viewport)||e.focus()),i()}),C=Ct.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(S.current),w.current=(new Date).getTime(),S.current=window.setTimeout(O,e))},[O]);Ct.useEffect(()=>{const e=f.viewport;if(e){const t=()=>{C(N.current),null==c||c()},r=()=>{const e=(new Date).getTime()-w.current;N.current=N.current-e,window.clearTimeout(S.current),null==l||l()};return e.addEventListener(mr,r),e.addEventListener(pr,t),()=>{e.removeEventListener(mr,r),e.removeEventListener(pr,t)}}},[f.viewport,j,l,c,C]),Ct.useEffect(()=>{s&&!f.isClosePausedRef.current&&C(j)},[s,j,f.isClosePausedRef,C]),Ct.useEffect(()=>(_(),()=>k()),[_,k]);const A=Ct.useMemo(()=>x?Pr(x):null,[x]);return f.viewport?Ce.jsxs(Ce.Fragment,{children:[A&&Ce.jsx(Nr,{__scopeToast:r,role:"status","aria-live":"foreground"===n?"assertive":"polite",children:A}),Ce.jsx(br,{scope:r,onClose:O,children:Ot.createPortal(Ce.jsx(nr.ItemSlot,{scope:r,children:Ce.jsx(Fe,{asChild:!0,onEscapeKeyDown:Le(o,()=>{f.isFocusedToastEscapeKeyDownRef.current||O(),f.isFocusedToastEscapeKeyDownRef.current=!1}),children:Ce.jsx(Ae.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":f.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Le(e.onKeyDown,e=>{"Escape"===e.key&&(null==o||o(e.nativeEvent),e.nativeEvent.defaultPrevented||(f.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Le(e.onPointerDown,e=>{0===e.button&&(g.current={x:e.clientX,y:e.clientY})}),onPointerMove:Le(e.onPointerMove,e=>{if(!g.current)return;const t=e.clientX-g.current.x,r=e.clientY-g.current.y,n=Boolean(b.current),a=["left","right"].includes(f.swipeDirection),s=["left","up"].includes(f.swipeDirection)?Math.min:Math.max,i=a?s(0,t):0,o=a?0:s(0,r),l="touch"===e.pointerType?10:2,c={x:i,y:o},h={originalEvent:e,delta:c};n?(b.current=c,Tr("toast.swipeMove",u,h,{discrete:!1})):Mr(c,f.swipeDirection,l)?(b.current=c,Tr("toast.swipeStart",d,h,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(r)>l)&&(g.current=null)}),onPointerUp:Le(e.onPointerUp,e=>{const t=b.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),b.current=null,g.current=null,t){const r=e.currentTarget,n={originalEvent:e,delta:t};Mr(t,f.swipeDirection,f.swipeThreshold)?Tr("toast.swipeEnd",m,n,{discrete:!0}):Tr("toast.swipeCancel",h,n,{discrete:!0}),r.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),f.viewport)})]}):null}),Nr=e=>{const{__scopeToast:t,children:r,...n}=e,a=cr(vr,t),[s,i]=Ct.useState(!1),[o,l]=Ct.useState(!1);return function(e=()=>{}){const t=Re(e);qe(()=>{let e=0,r=0;return e=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}},[t])}(()=>i(!0)),Ct.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),o?null:Ce.jsx(Be,{asChild:!0,children:Ce.jsx(er,{...n,children:s&&Ce.jsxs(Ce.Fragment,{children:[a.label," ",r]})})})},Sr=Ct.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return Ce.jsx(Ae.div,{...n,ref:t})});Sr.displayName="ToastTitle";var _r=Ct.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return Ce.jsx(Ae.div,{...n,ref:t})});_r.displayName="ToastDescription";var kr="ToastAction",Or=Ct.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?Ce.jsx(Er,{altText:r,asChild:!0,children:Ce.jsx(Ar,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${kr}\`. Expected non-empty \`string\`.`),null)});Or.displayName=kr;var Cr="ToastClose",Ar=Ct.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=jr(Cr,r);return Ce.jsx(Er,{asChild:!0,children:Ce.jsx(Ae.button,{type:"button",...n,ref:t,onClick:Le(e.onClick,a.onClose)})})});Ar.displayName=Cr;var Er=Ct.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return Ce.jsx(Ae.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function Pr(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const r=e.ariaHidden||e.hidden||"none"===e.style.display,n=""===e.dataset.radixToastAnnounceExclude;if(!r)if(n){const r=e.dataset.radixToastAnnounceAlt;r&&t.push(r)}else t.push(...Pr(e))}}),t}function Tr(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?$e(a,s):a.dispatchEvent(s)}var Mr=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),s=n>a;return"left"===t||"right"===t?s&&n>r:!s&&a>r};function Dr(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Ir(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var Rr=dr,Lr=fr,Fr=gr,Br=Sr,qr=_r,$r=Or,zr=Ar;function Ur(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Ur(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Vr(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Ur(e))&&(n&&(n+=" "),n+=t);return n}const Wr=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Hr=Vr,Kr=(e,t)=>r=>{var n;if(null==(null==t?void 0:t.variants))return Hr(e,null==r?void 0:r.class,null==r?void 0:r.className);const{variants:a,defaultVariants:s}=t,i=Object.keys(a).map(e=>{const t=null==r?void 0:r[e],n=null==s?void 0:s[e];if(null===t)return null;const i=Wr(t)||Wr(n);return a[e][i]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{}),l=null==t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...o}[t]):{...s,...o}[t]===r})?[...e,r,n]:e},[]);return Hr(e,i,l,null==r?void 0:r.class,null==r?void 0:r.className)};var Yr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Gr=(e,t)=>{const r=Ct.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:s,children:i,...o},l)=>{return Ct.createElement("svg",{ref:l,...Yr,width:n,height:n,stroke:r,strokeWidth:s?24*Number(a)/Number(n):a,className:`lucide lucide-${c=e,c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...o},[...t.map(([e,t])=>Ct.createElement(e,t)),...(Array.isArray(i)?i:[i])||[]]);var c});return r.displayName=`${e}`,r},Xr=Gr("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Qr=Gr("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Jr=Gr("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Zr=Gr("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),en=Gr("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),tn=Gr("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),rn=Gr("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),nn=Gr("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),an=Gr("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),sn=Gr("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),on=Gr("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),ln=Gr("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),cn=Gr("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),dn=Gr("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),un=Gr("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),hn=Gr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),mn=Gr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),pn=Gr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),fn=Gr("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),xn=Gr("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),yn=Gr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),vn=Gr("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),gn=Gr("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),bn=Gr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),jn=Gr("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),wn=Gr("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Nn=Gr("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Sn=Gr("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),_n=Gr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),kn=Gr("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),On=Gr("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),Cn=Gr("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),An=Gr("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),En=Gr("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),Pn=Gr("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Tn=Gr("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Mn=Gr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Dn=Gr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),In=Gr("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Rn=Gr("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Ln=Gr("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Fn=Gr("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Bn=Gr("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),qn=Gr("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),$n=Gr("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),zn=Gr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Un=Gr("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),Vn=Gr("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Wn=Gr("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Hn=Gr("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Kn=Gr("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]),Yn=Gr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Gn=Gr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Xn=Gr("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Qn=Gr("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Jn=Gr("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Zn=Gr("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),ea=Gr("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),ta=Gr("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),ra=Gr("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),na=Gr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),aa=Gr("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),sa=Gr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ia=Gr("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),oa=Gr("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),la=Gr("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),ca=Gr("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),da=Gr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ua=Gr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ha=Gr("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),ma=Gr("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),pa=Gr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fa=e=>{const t=ga(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),xa(r,t)||va(e)},getConflictingClassGroupIds:(e,t)=>{const a=r[e]||[];return t&&n[e]?[...a,...n[e]]:a}}},xa=(e,t)=>{var r;if(0===e.length)return t.classGroupId;const n=e[0],a=t.nextPart.get(n),s=a?xa(e.slice(1),a):void 0;if(s)return s;if(0===t.validators.length)return;const i=e.join("-");return null==(r=t.validators.find(({validator:e})=>e(i)))?void 0:r.classGroupId},ya=/^\[(.+)\]$/,va=e=>{if(ya.test(e)){const t=ya.exec(e)[1],r=null==t?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},ga=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Na(Object.entries(e.classGroups),r).forEach(([e,r])=>{ba(r,n,e,t)}),n},ba=(e,t,r,n)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:ja(t,e)).classGroupId=r)}if("function"==typeof e)return wa(e)?void ba(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(([e,a])=>{ba(a,ja(t,e),r,n)})})},ja=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},wa=e=>e.isThemeGetter,Na=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,Sa=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(a,s)=>{r.set(a,s),t++,t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(a(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):a(e,t)}}},_a=e=>{const{separator:t,experimentalParseClassName:r}=e,n=1===t.length,a=t[0],s=t.length,i=e=>{const r=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===a&&(n||e.slice(u,u+s)===t)){r.push(e.slice(l,u)),l=u+s;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===r.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:r,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return r?e=>r({className:e,parseClassName:i}):i},ka=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},Oa=/\s+/;function Ca(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Aa(e))&&(n&&(n+=" "),n+=t);return n}const Aa=e=>{if("string"==typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Aa(e[n]))&&(r&&(r+=" "),r+=t);return r};function Ea(e,...t){let r,n,a,s=function(o){const l=t.reduce((e,t)=>t(e),e());return r=(e=>({cache:Sa(e.cacheSize),parseClassName:_a(e),...fa(e)}))(l),n=r.cache.get,a=r.cache.set,s=i,i(o)};function i(e){const t=n(e);if(t)return t;const s=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,s=[],i=e.trim().split(Oa);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=r(e);let h=Boolean(u),m=n(h?d.substring(0,u):d);if(!m){if(!h){o=e+(o.length>0?" "+o:o);continue}if(m=n(d),!m){o=e+(o.length>0?" "+o:o);continue}h=!1}const p=ka(t).join(":"),f=c?p+"!":p,x=f+m;if(s.includes(x))continue;s.push(x);const y=a(m,h);for(let r=0;r<y.length;++r){const e=y[r];s.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,r);return a(e,s),s}return function(){return s(Ca.apply(null,arguments))}}const Pa=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Ta=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ma=/^\d+\/\d+$/,Da=new Set(["px","full","screen"]),Ia=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ra=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,La=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Fa=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ba=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qa=e=>za(e)||Da.has(e)||Ma.test(e),$a=e=>ts(e,"length",rs),za=e=>Boolean(e)&&!Number.isNaN(Number(e)),Ua=e=>ts(e,"number",za),Va=e=>Boolean(e)&&Number.isInteger(Number(e)),Wa=e=>e.endsWith("%")&&za(e.slice(0,-1)),Ha=e=>Ta.test(e),Ka=e=>Ia.test(e),Ya=new Set(["length","size","percentage"]),Ga=e=>ts(e,Ya,ns),Xa=e=>ts(e,"position",ns),Qa=new Set(["image","url"]),Ja=e=>ts(e,Qa,ss),Za=e=>ts(e,"",as),es=()=>!0,ts=(e,t,r)=>{const n=Ta.exec(e);return!!n&&(n[1]?"string"==typeof t?n[1]===t:t.has(n[1]):r(n[2]))},rs=e=>Ra.test(e)&&!La.test(e),ns=()=>!1,as=e=>Fa.test(e),ss=e=>Ba.test(e),is=Ea(()=>{const e=Pa("colors"),t=Pa("spacing"),r=Pa("blur"),n=Pa("brightness"),a=Pa("borderColor"),s=Pa("borderRadius"),i=Pa("borderSpacing"),o=Pa("borderWidth"),l=Pa("contrast"),c=Pa("grayscale"),d=Pa("hueRotate"),u=Pa("invert"),h=Pa("gap"),m=Pa("gradientColorStops"),p=Pa("gradientColorStopPositions"),f=Pa("inset"),x=Pa("margin"),y=Pa("opacity"),v=Pa("padding"),g=Pa("saturate"),b=Pa("scale"),j=Pa("sepia"),w=Pa("skew"),N=Pa("space"),S=Pa("translate"),_=()=>["auto",Ha,t],k=()=>[Ha,t],O=()=>["",qa,$a],C=()=>["auto",za,Ha],A=()=>["","0",Ha],E=()=>[za,Ha];return{cacheSize:500,separator:":",theme:{colors:[es],spacing:[qa,$a],blur:["none","",Ka,Ha],brightness:E(),borderColor:[e],borderRadius:["none","","full",Ka,Ha],borderSpacing:k(),borderWidth:O(),contrast:E(),grayscale:A(),hueRotate:E(),invert:A(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[Wa,$a],inset:_(),margin:_(),opacity:E(),padding:k(),saturate:E(),scale:E(),sepia:A(),skew:E(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",Ha]}],container:["container"],columns:[{columns:[Ka]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Ha]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Va,Ha]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ha]}],grow:[{grow:A()}],shrink:[{shrink:A()}],order:[{order:["first","last","none",Va,Ha]}],"grid-cols":[{"grid-cols":[es]}],"col-start-end":[{col:["auto",{span:["full",Va,Ha]},Ha]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[es]}],"row-start-end":[{row:["auto",{span:[Va,Ha]},Ha]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ha]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ha]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ha,t]}],"min-w":[{"min-w":[Ha,t,"min","max","fit"]}],"max-w":[{"max-w":[Ha,t,"none","full","min","max","fit","prose",{screen:[Ka]},Ka]}],h:[{h:[Ha,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ha,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ha,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ha,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ka,$a]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ua]}],"font-family":[{font:[es]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ha]}],"line-clamp":[{"line-clamp":["none",za,Ua]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",qa,Ha]}],"list-image":[{"list-image":["none",Ha]}],"list-style-type":[{list:["none","disc","decimal",Ha]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",qa,$a]}],"underline-offset":[{"underline-offset":["auto",qa,Ha]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ha]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ha]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Xa]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ga]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Ja]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[qa,Ha]}],"outline-w":[{outline:[qa,$a]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[qa,$a]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ka,Za]}],"shadow-color":[{shadow:[es]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ka,Ha]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[g]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[g]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ha]}],duration:[{duration:E()}],ease:[{ease:["linear","in","out","in-out",Ha]}],delay:[{delay:E()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ha]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Va,Ha]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ha]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ha]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ha]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[qa,$a,Ua]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function os(...e){return is(Vr(e))}const ls=Rr,cs=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(Lr,{ref:r,className:os("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));cs.displayName=Lr.displayName;const ds=Kr("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),us=Ct.forwardRef(({className:e,variant:t,...r},n)=>Ce.jsx(Fr,{ref:n,className:os(ds({variant:t}),e),...r}));us.displayName=Fr.displayName;Ct.forwardRef(({className:e,...t},r)=>Ce.jsx($r,{ref:r,className:os("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=$r.displayName;const hs=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(zr,{ref:r,className:os("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:Ce.jsx(pa,{className:"h-4 w-4"})}));hs.displayName=zr.displayName;const ms=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(Br,{ref:r,className:os("text-sm font-semibold",e),...t}));ms.displayName=Br.displayName;const ps=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(qr,{ref:r,className:os("text-sm opacity-90",e),...t}));function fs(){const{toasts:e}=Jt();return Ce.jsxs(ls,{children:[e.map(function({id:e,title:t,description:r,action:n,...a}){return Ce.jsxs(us,{...a,children:[Ce.jsxs("div",{className:"grid gap-1",children:[t&&Ce.jsx(ms,{children:t}),r&&Ce.jsx(ps,{children:r})]}),n,Ce.jsx(hs,{})]},e)}),Ce.jsx(cs,{})]})}ps.displayName=qr.displayName;var xs=(e,t,r,n,a,s,i,o)=>{let l=document.documentElement,c=["light","dark"];function d(t){(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&s?a.map(e=>s[e]||e):a;r?(l.classList.remove(...n),l.classList.add(s&&s[t]?s[t]:t)):l.setAttribute(e,t)}),function(e){o&&c.includes(e)&&(l.style.colorScheme=e)}(t)}if(n)d(n);else try{let e=localStorage.getItem(t)||r;d(i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)}catch(u){}},ys=Ct.createContext(void 0),vs={setTheme:e=>{},themes:[]};Ct.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:s,value:i,themes:o,nonce:l,scriptProps:c})=>{let d=JSON.stringify([r,t,s,e,o,i,n,a]).slice(1,-1);return Ct.createElement("script",{...c,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?l:"",dangerouslySetInnerHTML:{__html:`(${xs.toString()})(${d})`}})});var gs=Array(12).fill(0),bs=({visible:e,className:t})=>At.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},At.createElement("div",{className:"sonner-spinner"},gs.map((e,t)=>At.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),js=At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},At.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ws=At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},At.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ns=At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},At.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ss=At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},At.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_s=At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},At.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),At.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ks=1,Os=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:ks++,s=this.toasts.find(e=>e.id===a),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),s?this.toasts=this.toasts.map(t=>t.id===a?(this.publish({...t,...e,id:a,title:r}),{...t,...e,id:a,dismissible:i,title:r}):t):this.addToast({title:r,...n,dismissible:i,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;void 0!==t.loading&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let n,a=e instanceof Promise?e:e(),s=void 0!==r,i=a.then(async e=>{if(n=["resolve",e],At.isValidElement(e))s=!1,this.create({id:r,type:"default",message:e});else if(Cs(e)&&!e.ok){s=!1;let n="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,a="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:r,type:"error",message:n,description:a})}else if(void 0!==t.success){s=!1;let n="function"==typeof t.success?await t.success(e):t.success,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:r,type:"success",message:n,description:a})}}).catch(async e=>{if(n=["reject",e],void 0!==t.error){s=!1;let n="function"==typeof t.error?await t.error(e):t.error,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:r,type:"error",message:n,description:a})}}).finally(()=>{var e;s&&(this.dismiss(r),r=void 0),null==(e=t.finally)||e.call(t)}),o=()=>new Promise((e,t)=>i.then(()=>"reject"===n[0]?t(n[1]):e(n[1])).catch(t));return"string"!=typeof r&&"number"!=typeof r?{unwrap:o}:Object.assign(r,{unwrap:o})},this.custom=(e,t)=>{let r=(null==t?void 0:t.id)||ks++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Cs=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,As=(e,t)=>{let r=(null==t?void 0:t.id)||ks++;return Os.addToast({title:e,...t,id:r}),r},Es=Object.assign(As,{success:Os.success,info:Os.info,warning:Os.warning,error:Os.error,custom:Os.custom,message:Os.message,promise:Os.promise,dismiss:Os.dismiss,loading:Os.loading},{getHistory:()=>Os.toasts,getToasts:()=>Os.getActiveToasts()});function Ps(e){return void 0!==e.label}!function(e,{insertAt:t}={}){if(!e||"undefined"==typeof document)return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===t&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var Ts=3,Ms=14;function Ds(...e){return e.filter(Boolean).join(" ")}var Is=e=>{var t,r,n,a,s,i,o,l,c,d,u;let{invert:h,toast:m,unstyled:p,interacting:f,setHeights:x,visibleToasts:y,heights:v,index:g,toasts:b,expanded:j,removeToast:w,defaultRichColors:N,closeButton:S,style:_,cancelButtonStyle:k,actionButtonStyle:O,className:C="",descriptionClassName:A="",duration:E,position:P,gap:T,loadingIcon:M,expandByDefault:D,classNames:I,icons:R,closeButtonAriaLabel:L="Close toast",pauseWhenPageIsHidden:F}=e,[B,q]=At.useState(null),[$,z]=At.useState(null),[U,V]=At.useState(!1),[W,H]=At.useState(!1),[K,Y]=At.useState(!1),[G,X]=At.useState(!1),[Q,J]=At.useState(!1),[Z,ee]=At.useState(0),[te,re]=At.useState(0),ne=At.useRef(m.duration||E||4e3),ae=At.useRef(null),se=At.useRef(null),ie=0===g,oe=g+1<=y,le=m.type,ce=!1!==m.dismissible,de=m.className||"",ue=m.descriptionClassName||"",he=At.useMemo(()=>v.findIndex(e=>e.toastId===m.id)||0,[v,m.id]),me=At.useMemo(()=>{var e;return null!=(e=m.closeButton)?e:S},[m.closeButton,S]),pe=At.useMemo(()=>m.duration||E||4e3,[m.duration,E]),fe=At.useRef(0),xe=At.useRef(0),ye=At.useRef(0),ve=At.useRef(null),[ge,be]=P.split("-"),je=At.useMemo(()=>v.reduce((e,t,r)=>r>=he?e:e+t.height,0),[v,he]),we=(()=>{let[e,t]=At.useState(document.hidden);return At.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),Ne=m.invert||h,Se="loading"===le;xe.current=At.useMemo(()=>he*T+je,[he,je]),At.useEffect(()=>{ne.current=pe},[pe]),At.useEffect(()=>{V(!0)},[]),At.useEffect(()=>{let e=se.current;if(e){let t=e.getBoundingClientRect().height;return re(t),x(e=>[{toastId:m.id,height:t,position:m.position},...e]),()=>x(e=>e.filter(e=>e.toastId!==m.id))}},[x,m.id]),At.useLayoutEffect(()=>{if(!U)return;let e=se.current,t=e.style.height;e.style.height="auto";let r=e.getBoundingClientRect().height;e.style.height=t,re(r),x(e=>e.find(e=>e.toastId===m.id)?e.map(e=>e.toastId===m.id?{...e,height:r}:e):[{toastId:m.id,height:r,position:m.position},...e])},[U,m.title,m.description,x,m.id]);let _e=At.useCallback(()=>{H(!0),ee(xe.current),x(e=>e.filter(e=>e.toastId!==m.id)),setTimeout(()=>{w(m)},200)},[m,w,x,xe]);return At.useEffect(()=>{if(m.promise&&"loading"===le||m.duration===1/0||"loading"===m.type)return;let e;return j||f||F&&we?(()=>{if(ye.current<fe.current){let e=(new Date).getTime()-fe.current;ne.current=ne.current-e}ye.current=(new Date).getTime()})():ne.current!==1/0&&(fe.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=m.onAutoClose)||e.call(m,m),_e()},ne.current)),()=>clearTimeout(e)},[j,f,m,le,F,we,_e]),At.useEffect(()=>{m.delete&&_e()},[_e,m.delete]),At.createElement("li",{tabIndex:0,ref:se,className:Ds(C,de,null==I?void 0:I.toast,null==(t=null==m?void 0:m.classNames)?void 0:t.toast,null==I?void 0:I.default,null==I?void 0:I[le],null==(r=null==m?void 0:m.classNames)?void 0:r[le]),"data-sonner-toast":"","data-rich-colors":null!=(n=m.richColors)?n:N,"data-styled":!(m.jsx||m.unstyled||p),"data-mounted":U,"data-promise":!!m.promise,"data-swiped":Q,"data-removed":W,"data-visible":oe,"data-y-position":ge,"data-x-position":be,"data-index":g,"data-front":ie,"data-swiping":K,"data-dismissible":ce,"data-type":le,"data-invert":Ne,"data-swipe-out":G,"data-swipe-direction":$,"data-expanded":!!(j||D&&U),style:{"--index":g,"--toasts-before":g,"--z-index":b.length-g,"--offset":`${W?Z:xe.current}px`,"--initial-height":D?"auto":`${te}px`,..._,...m.style},onDragEnd:()=>{Y(!1),q(null),ve.current=null},onPointerDown:e=>{Se||!ce||(ae.current=new Date,ee(xe.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(Y(!0),ve.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,r,n;if(G||!ce)return;ve.current=null;let a=Number((null==(e=se.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),s=Number((null==(t=se.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),i=(new Date).getTime()-(null==(r=ae.current)?void 0:r.getTime()),o="x"===B?a:s,l=Math.abs(o)/i;if(Math.abs(o)>=20||l>.11)return ee(xe.current),null==(n=m.onDismiss)||n.call(m,m),z("x"===B?a>0?"right":"left":s>0?"down":"up"),_e(),X(!0),void J(!1);Y(!1),q(null)},onPointerMove:t=>{var r,n,a,s;if(!ve.current||!ce||(null==(r=window.getSelection())?void 0:r.toString().length)>0)return;let i=t.clientY-ve.current.y,o=t.clientX-ve.current.x,l=null!=(n=e.swipeDirections)?n:function(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}(P);!B&&(Math.abs(o)>1||Math.abs(i)>1)&&q(Math.abs(o)>Math.abs(i)?"x":"y");let c={x:0,y:0};"y"===B?(l.includes("top")||l.includes("bottom"))&&(l.includes("top")&&i<0||l.includes("bottom")&&i>0)&&(c.y=i):"x"===B&&(l.includes("left")||l.includes("right"))&&(l.includes("left")&&o<0||l.includes("right")&&o>0)&&(c.x=o),(Math.abs(c.x)>0||Math.abs(c.y)>0)&&J(!0),null==(a=se.current)||a.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(s=se.current)||s.style.setProperty("--swipe-amount-y",`${c.y}px`)}},me&&!m.jsx?At.createElement("button",{"aria-label":L,"data-disabled":Se,"data-close-button":!0,onClick:Se||!ce?()=>{}:()=>{var e;_e(),null==(e=m.onDismiss)||e.call(m,m)},className:Ds(null==I?void 0:I.closeButton,null==(a=null==m?void 0:m.classNames)?void 0:a.closeButton)},null!=(s=null==R?void 0:R.close)?s:_s):null,m.jsx||Ct.isValidElement(m.title)?m.jsx?m.jsx:"function"==typeof m.title?m.title():m.title:At.createElement(At.Fragment,null,le||m.icon||m.promise?At.createElement("div",{"data-icon":"",className:Ds(null==I?void 0:I.icon,null==(i=null==m?void 0:m.classNames)?void 0:i.icon)},m.promise||"loading"===m.type&&!m.icon?m.icon||(null!=R&&R.loading?At.createElement("div",{className:Ds(null==I?void 0:I.loader,null==(ke=null==m?void 0:m.classNames)?void 0:ke.loader,"sonner-loader"),"data-visible":"loading"===le},R.loading):M?At.createElement("div",{className:Ds(null==I?void 0:I.loader,null==(Oe=null==m?void 0:m.classNames)?void 0:Oe.loader,"sonner-loader"),"data-visible":"loading"===le},M):At.createElement(bs,{className:Ds(null==I?void 0:I.loader,null==(Ce=null==m?void 0:m.classNames)?void 0:Ce.loader),visible:"loading"===le})):null,"loading"!==m.type?m.icon||(null==R?void 0:R[le])||(e=>{switch(e){case"success":return js;case"info":return Ns;case"warning":return ws;case"error":return Ss;default:return null}})(le):null):null,At.createElement("div",{"data-content":"",className:Ds(null==I?void 0:I.content,null==(o=null==m?void 0:m.classNames)?void 0:o.content)},At.createElement("div",{"data-title":"",className:Ds(null==I?void 0:I.title,null==(l=null==m?void 0:m.classNames)?void 0:l.title)},"function"==typeof m.title?m.title():m.title),m.description?At.createElement("div",{"data-description":"",className:Ds(A,ue,null==I?void 0:I.description,null==(c=null==m?void 0:m.classNames)?void 0:c.description)},"function"==typeof m.description?m.description():m.description):null),Ct.isValidElement(m.cancel)?m.cancel:m.cancel&&Ps(m.cancel)?At.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||k,onClick:e=>{var t,r;Ps(m.cancel)&&ce&&(null==(r=(t=m.cancel).onClick)||r.call(t,e),_e())},className:Ds(null==I?void 0:I.cancelButton,null==(d=null==m?void 0:m.classNames)?void 0:d.cancelButton)},m.cancel.label):null,Ct.isValidElement(m.action)?m.action:m.action&&Ps(m.action)?At.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||O,onClick:e=>{var t,r;Ps(m.action)&&(null==(r=(t=m.action).onClick)||r.call(t,e),!e.defaultPrevented&&_e())},className:Ds(null==I?void 0:I.actionButton,null==(u=null==m?void 0:m.classNames)?void 0:u.actionButton)},m.action.label):null));var ke,Oe,Ce};function Rs(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function Ls(e,t){let r={};return[e,t].forEach((e,t)=>{let n=1===t,a=n?"--mobile-offset":"--offset",s=n?"16px":"32px";function i(e){["top","right","bottom","left"].forEach(t=>{r[`${a}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?i(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?r[`${a}-${t}`]=s:r[`${a}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):i(s)}),r}var Fs=Ct.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:s,closeButton:i,className:o,offset:l,mobileOffset:c,theme:d="light",richColors:u,duration:h,style:m,visibleToasts:p=Ts,toastOptions:f,dir:x=Rs(),gap:y=Ms,loadingIcon:v,icons:g,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:j}=e,[w,N]=At.useState([]),S=At.useMemo(()=>Array.from(new Set([n].concat(w.filter(e=>e.position).map(e=>e.position)))),[w,n]),[_,k]=At.useState([]),[O,C]=At.useState(!1),[A,E]=At.useState(!1),[P,T]=At.useState("system"!==d?d:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=At.useRef(null),D=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=At.useRef(null),R=At.useRef(!1),L=At.useCallback(e=>{N(t=>{var r;return null!=(r=t.find(t=>t.id===e.id))&&r.delete||Os.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return At.useEffect(()=>Os.subscribe(e=>{e.dismiss?N(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t)):setTimeout(()=>{Et.flushSync(()=>{N(t=>{let r=t.findIndex(t=>t.id===e.id);return-1!==r?[...t.slice(0,r),{...t[r],...e},...t.slice(r+1)]:[e,...t]})})})}),[]),At.useEffect(()=>{if("system"!==d)return void T(d);if("system"===d&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?T("dark"):T("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{T(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{T(e?"dark":"light")}catch(t){console.error(t)}})}},[d]),At.useEffect(()=>{w.length<=1&&C(!1)},[w]),At.useEffect(()=>{let e=e=>{var t,r;a.every(t=>e[t]||e.code===t)&&(C(!0),null==(t=M.current)||t.focus()),"Escape"===e.code&&(document.activeElement===M.current||null!=(r=M.current)&&r.contains(document.activeElement))&&C(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),At.useEffect(()=>{if(M.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,R.current=!1)}},[M.current]),At.createElement("section",{ref:t,"aria-label":`${b} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((t,n)=>{var a;let[d,b]=t.split("-");return w.length?At.createElement("ol",{key:t,dir:"auto"===x?Rs():x,tabIndex:-1,ref:M,className:o,"data-sonner-toaster":!0,"data-theme":P,"data-y-position":d,"data-lifted":O&&w.length>1&&!s,"data-x-position":b,style:{"--front-toast-height":`${(null==(a=_[0])?void 0:a.height)||0}px`,"--width":"356px","--gap":`${y}px`,...m,...Ls(l,c)},onBlur:e=>{R.current&&!e.currentTarget.contains(e.relatedTarget)&&(R.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||R.current||(R.current=!0,I.current=e.relatedTarget)},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{A||C(!1)},onDragEnd:()=>C(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||E(!0)},onPointerUp:()=>E(!1)},w.filter(e=>!e.position&&0===n||e.position===t).map((n,a)=>{var o,l;return At.createElement(Is,{key:n.id,icons:g,index:a,toast:n,defaultRichColors:u,duration:null!=(o=null==f?void 0:f.duration)?o:h,className:null==f?void 0:f.className,descriptionClassName:null==f?void 0:f.descriptionClassName,invert:r,visibleToasts:p,closeButton:null!=(l=null==f?void 0:f.closeButton)?l:i,interacting:A,position:t,style:null==f?void 0:f.style,unstyled:null==f?void 0:f.unstyled,classNames:null==f?void 0:f.classNames,cancelButtonStyle:null==f?void 0:f.cancelButtonStyle,actionButtonStyle:null==f?void 0:f.actionButtonStyle,removeToast:L,toasts:w.filter(e=>e.position==n.position),heights:_.filter(e=>e.position==n.position),setHeights:k,expandByDefault:s,gap:y,loadingIcon:v,expanded:O,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const Bs=({...e})=>{const{theme:t="system"}=null!=(r=Ct.useContext(ys))?r:vs;var r;return Ce.jsx(Fs,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var[qs,$s]=Pe("Tooltip",[ze]),zs=ze(),Us="TooltipProvider",Vs=700,Ws="tooltip.open",[Hs,Ks]=qs(Us),Ys=e=>{const{__scopeTooltip:t,delayDuration:r=Vs,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:s}=e,i=Ct.useRef(!0),o=Ct.useRef(!1),l=Ct.useRef(0);return Ct.useEffect(()=>{const e=l.current;return()=>window.clearTimeout(e)},[]),Ce.jsx(Hs,{scope:t,isOpenDelayedRef:i,delayDuration:r,onOpen:Ct.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:Ct.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:Ct.useCallback(e=>{o.current=e},[]),disableHoverableContent:a,children:s})};Ys.displayName=Us;var Gs="Tooltip",[Xs,Qs]=qs(Gs),Js="TooltipTrigger";Ct.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Qs(Js,r),s=Ks(Js,r),i=zs(r),o=Ct.useRef(null),l=Te(t,o,a.onTriggerChange),c=Ct.useRef(!1),d=Ct.useRef(!1),u=Ct.useCallback(()=>c.current=!1,[]);return Ct.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),Ce.jsx(Ue,{asChild:!0,...i,children:Ce.jsx(Ae.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:l,onPointerMove:Le(e.onPointerMove,e=>{"touch"!==e.pointerType&&(d.current||s.isPointerInTransitRef.current||(a.onTriggerEnter(),d.current=!0))}),onPointerLeave:Le(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Le(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:Le(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:Le(e.onBlur,a.onClose),onClick:Le(e.onClick,a.onClose)})})}).displayName=Js;var[Zs,ei]=qs("TooltipPortal",{forceMount:void 0}),ti="TooltipContent",ri=Ct.forwardRef((e,t)=>{const r=ei(ti,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...s}=e,i=Qs(ti,e.__scopeTooltip);return Ce.jsx(Ie,{present:n||i.open,children:i.disableHoverableContent?Ce.jsx(oi,{side:a,...s,ref:t}):Ce.jsx(ni,{side:a,...s,ref:t})})}),ni=Ct.forwardRef((e,t)=>{const r=Qs(ti,e.__scopeTooltip),n=Ks(ti,e.__scopeTooltip),a=Ct.useRef(null),s=Te(t,a),[i,o]=Ct.useState(null),{trigger:l,onClose:c}=r,d=a.current,{onPointerInTransitChange:u}=n,h=Ct.useCallback(()=>{o(null),u(!1)},[u]),m=Ct.useCallback((e,t)=>{const r=e.currentTarget,n={x:e.clientX,y:e.clientY},a=function(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(n,function(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,a,s)){case s:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}(n,r.getBoundingClientRect())),s=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const r=e[n];for(;t.length>=2;){const e=t[t.length-1],n=t[t.length-2];if(!((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x)))break;t.pop()}t.push(r)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const t=e[n];for(;r.length>=2;){const e=r[r.length-1],n=r[r.length-2];if(!((e.x-n.x)*(t.y-n.y)>=(e.y-n.y)*(t.x-n.x)))break;r.pop()}r.push(t)}return r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}(t)}([...a,...function(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}(t.getBoundingClientRect())]);o(s),u(!0)},[u]);return Ct.useEffect(()=>()=>h(),[h]),Ct.useEffect(()=>{if(l&&d){const e=e=>m(e,d),t=e=>m(e,l);return l.addEventListener("pointerleave",e),d.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),d.removeEventListener("pointerleave",t)}}},[l,d,m,h]),Ct.useEffect(()=>{if(i){const e=e=>{const t=e.target,r={x:e.clientX,y:e.clientY},n=(null==l?void 0:l.contains(t))||(null==d?void 0:d.contains(t)),a=!function(e,t){const{x:r,y:n}=e;let a=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const e=t[s],o=t[i],l=e.x,c=e.y,d=o.x,u=o.y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(a=!a)}return a}(r,i);n?h():a&&(h(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,d,i,c,h]),Ce.jsx(oi,{...e,ref:s})}),[ai,si]=qs(Gs,{isInside:!1}),ii=Ke("TooltipContent"),oi=Ct.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:i,...o}=e,l=Qs(ti,r),c=zs(r),{onClose:d}=l;return Ct.useEffect(()=>(document.addEventListener(Ws,d),()=>document.removeEventListener(Ws,d)),[d]),Ct.useEffect(()=>{if(l.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(l.trigger))&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,d]),Ce.jsx(Ve,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:Ce.jsxs(We,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Ce.jsx(ii,{children:n}),Ce.jsx(ai,{scope:r,isInside:!0,children:Ce.jsx(tr,{id:l.contentId,role:"tooltip",children:a||n})})]})})});ri.displayName=ti;var li="TooltipArrow";Ct.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=zs(r);return si(li,r).isInside?null:Ce.jsx(He,{...a,...n,ref:t})}).displayName=li;var ci=ri;function di(...e){return is(Vr(e))}const ui=Ys;Ct.forwardRef(({className:e,sideOffset:t=4,...r},n)=>Ce.jsx(ci,{ref:n,sideOffset:t,className:di("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})).displayName=ci.displayName;var hi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mi="undefined"==typeof window||"Deno"in globalThis;function pi(){}function fi(e){return"number"==typeof e&&e>=0&&e!==1/0}function xi(e,t){return Math.max(e+(t||0)-Date.now(),0)}function yi(e,t){return"function"==typeof e?e(t):e}function vi(e,t){return"function"==typeof e?e(t):e}function gi(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:s,queryKey:i,stale:o}=e;if(i)if(n){if(t.queryHash!==ji(i,t.options))return!1}else if(!Ni(t.queryKey,i))return!1;if("all"!==r){const e=t.isActive();if("active"===r&&!e)return!1;if("inactive"===r&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!a||a===t.state.fetchStatus)&&!(s&&!s(t)))}function bi(e,t){const{exact:r,status:n,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(wi(t.options.mutationKey)!==wi(s))return!1}else if(!Ni(t.options.mutationKey,s))return!1}return(!n||t.state.status===n)&&!(a&&!a(t))}function ji(e,t){return((null==t?void 0:t.queryKeyHashFn)||wi)(e)}function wi(e){return JSON.stringify(e,(e,t)=>Oi(t)?Object.keys(t).sort().reduce((e,r)=>(e[r]=t[r],e),{}):t)}function Ni(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(r=>Ni(e[r],t[r])))}function Si(e,t){if(e===t)return e;const r=ki(e)&&ki(t);if(r||Oi(e)&&Oi(t)){const n=r?e:Object.keys(e),a=n.length,s=r?t:Object.keys(t),i=s.length,o=r?[]:{},l=new Set(n);let c=0;for(let d=0;d<i;d++){const n=r?d:s[d];(!r&&l.has(n)||r)&&void 0===e[n]&&void 0===t[n]?(o[n]=void 0,c++):(o[n]=Si(e[n],t[n]),o[n]===e[n]&&void 0!==e[n]&&c++)}return a===i&&c===a?e:o}return t}function _i(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function ki(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Oi(e){if(!Ci(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!!Ci(r)&&(!!r.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function Ci(e){return"[object Object]"===Object.prototype.toString.call(e)}function Ai(e,t,r){return"function"==typeof r.structuralSharing?r.structuralSharing(e,t):!1!==r.structuralSharing?Si(e,t):t}function Ei(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Pi(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Ti=Symbol();function Mi(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==Ti?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}var Di=new(n=class extends hi{constructor(){super(),Se(this,e,void 0),Se(this,t,void 0),Se(this,r,void 0),_e(this,r,e=>{if(!mi&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){Ne(this,t)||this.setEventListener(Ne(this,r))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=Ne(this,t))||e.call(this),_e(this,t,void 0))}setEventListener(e){var n;_e(this,r,e),null==(n=Ne(this,t))||n.call(this),_e(this,t,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(t){Ne(this,e)!==t&&(_e(this,e,t),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var t;return"boolean"==typeof Ne(this,e)?Ne(this,e):"hidden"!==(null==(t=globalThis.document)?void 0:t.visibilityState)}},e=new WeakMap,t=new WeakMap,r=new WeakMap,n),Ii=new(o=class extends hi{constructor(){super(),Se(this,a,!0),Se(this,s,void 0),Se(this,i,void 0),_e(this,i,e=>{if(!mi&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){Ne(this,s)||this.setEventListener(Ne(this,i))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=Ne(this,s))||e.call(this),_e(this,s,void 0))}setEventListener(e){var t;_e(this,i,e),null==(t=Ne(this,s))||t.call(this),_e(this,s,e(this.setOnline.bind(this)))}setOnline(e){Ne(this,a)!==e&&(_e(this,a,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return Ne(this,a)}},a=new WeakMap,s=new WeakMap,i=new WeakMap,o);function Ri(){let e,t;const r=new Promise((r,n)=>{e=r,t=n});function n(e){Object.assign(r,e),delete r.resolve,delete r.reject}return r.status="pending",r.catch(()=>{}),r.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},r.reject=e=>{n({status:"rejected",reason:e}),t(e)},r}function Li(e){return Math.min(1e3*2**e,3e4)}function Fi(e){return"online"!==(e??"online")||Ii.isOnline()}var Bi=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function qi(e){let t,r=!1,n=0;const a=Ri(),s=()=>"pending"!==a.status,i=()=>Di.isFocused()&&("always"===e.networkMode||Ii.isOnline())&&e.canRun(),o=()=>Fi(e.networkMode)&&e.canRun(),l=e=>{s()||(null==t||t(),a.resolve(e))},c=e=>{s()||(null==t||t(),a.reject(e))},d=()=>new Promise(r=>{var n;t=e=>{(s()||i())&&r(e)},null==(n=e.onPause)||n.call(e)}).then(()=>{var r;t=void 0,s()||null==(r=e.onContinue)||r.call(e)}),u=()=>{if(s())return;let t;const a=0===n?e.initialPromise:void 0;try{t=a??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{var a;if(s())return;const o=e.retry??(mi?0:3),l=e.retryDelay??Li,h="function"==typeof l?l(n,t):l,m=!0===o||"number"==typeof o&&n<o||"function"==typeof o&&o(n,t);var p;!r&&m?(n++,null==(a=e.onFail)||a.call(e,n,t),(p=h,new Promise(e=>{setTimeout(e,p)})).then(()=>i()?void 0:d()).then(()=>{r?c(t):u()})):c(t)})};return{promise:a,status:()=>a.status,cancel:t=>{var r;s()||(c(new Bi(t)),null==(r=e.abort)||r.call(e))},continue:()=>(null==t||t(),a),cancelRetry:()=>{r=!0},continueRetry:()=>{r=!1},canStart:o,start:()=>(o()?u():d().then(u),a)}}var $i=e=>setTimeout(e,0);var zi=function(){let e=[],t=0,r=e=>{e()},n=e=>{e()},a=$i;const s=n=>{t?e.push(n):a(()=>{r(n)})};return{batch:s=>{let i;t++;try{i=s()}finally{t--,t||(()=>{const t=e;e=[],t.length&&a(()=>{n(()=>{t.forEach(e=>{r(e)})})})})()}return i},batchCalls:e=>(...t)=>{s(()=>{e(...t)})},schedule:s,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{a=e}}}(),Ui=(c=class{constructor(){Se(this,l,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fi(this.gcTime)&&_e(this,l,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(mi?1/0:3e5))}clearGcTimeout(){Ne(this,l)&&(clearTimeout(Ne(this,l)),_e(this,l,void 0))}},l=new WeakMap,c),Vi=(g=class extends Ui{constructor(e){super(),Se(this,y),Se(this,d,void 0),Se(this,u,void 0),Se(this,h,void 0),Se(this,m,void 0),Se(this,p,void 0),Se(this,f,void 0),Se(this,x,void 0),_e(this,x,!1),_e(this,f,e.defaultOptions),this.setOptions(e.options),this.observers=[],_e(this,m,e.client),_e(this,h,Ne(this,m).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,_e(this,d,function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,n=r?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=e.state??Ne(this,d),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=Ne(this,p))?void 0:e.promise}setOptions(e){this.options={...Ne(this,f),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||Ne(this,h).remove(this)}setData(e,t){const r=Ai(this.state.data,e,this.options);return Oe(this,y,v).call(this,{data:r,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),r}setState(e,t){Oe(this,y,v).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,r;const n=null==(t=Ne(this,p))?void 0:t.promise;return null==(r=Ne(this,p))||r.cancel(e),n?n.then(pi).catch(pi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ne(this,d))}isActive(){return this.observers.some(e=>!1!==vi(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ti||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===yi(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!xi(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null==t||t.refetch({cancelRefetch:!1}),null==(e=Ne(this,p))||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null==t||t.refetch({cancelRefetch:!1}),null==(e=Ne(this,p))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Ne(this,h).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(Ne(this,p)&&(Ne(this,x)?Ne(this,p).cancel({revert:!0}):Ne(this,p).cancelRetry()),this.scheduleGc()),Ne(this,h).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Oe(this,y,v).call(this,{type:"invalidate"})}async fetch(e,t){var r,n,a,s,i,o,l,c,d,f,g,b;if("idle"!==this.state.fetchStatus&&"rejected"!==(null==(r=Ne(this,p))?void 0:r.status()))if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(Ne(this,p))return Ne(this,p).continueRetry(),Ne(this,p).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const j=new AbortController,w=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(_e(this,x,!0),j.signal)})},N=()=>{const e=Mi(this.options,t),r=(()=>{const e={client:Ne(this,m),queryKey:this.queryKey,meta:this.meta};return w(e),e})();return _e(this,x,!1),this.options.persister?this.options.persister(e,r,this):e(r)},S=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:Ne(this,m),state:this.state,fetchFn:N};return w(e),e})();null==(n=this.options.behavior)||n.onFetch(S,this),_e(this,u,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(a=S.fetchOptions)?void 0:a.meta)||Oe(this,y,v).call(this,{type:"fetch",meta:null==(s=S.fetchOptions)?void 0:s.meta}),_e(this,p,qi({initialPromise:null==t?void 0:t.initialPromise,fn:S.fetchFn,abort:j.abort.bind(j),onFail:(e,t)=>{Oe(this,y,v).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Oe(this,y,v).call(this,{type:"pause"})},onContinue:()=>{Oe(this,y,v).call(this,{type:"continue"})},retry:S.options.retry,retryDelay:S.options.retryDelay,networkMode:S.options.networkMode,canRun:()=>!0}));try{const e=await Ne(this,p).start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),null==(o=(i=Ne(this,h).config).onSuccess)||o.call(i,e,this),null==(c=(l=Ne(this,h).config).onSettled)||c.call(l,e,this.state.error,this),e}catch(_){if(_ instanceof Bi){if(_.silent)return Ne(this,p).promise;if(_.revert){if(this.setState({...Ne(this,u),fetchStatus:"idle"}),void 0===this.state.data)throw _;return this.state.data}}throw Oe(this,y,v).call(this,{type:"error",error:_}),null==(f=(d=Ne(this,h).config).onError)||f.call(d,_,this),null==(b=(g=Ne(this,h).config).onSettled)||b.call(g,this.state.data,_,this),_}finally{this.scheduleGc()}}},d=new WeakMap,u=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,f=new WeakMap,x=new WeakMap,y=new WeakSet,v=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...Wi(t.data,this.options),fetchMeta:e.meta??null};case"success":const r={...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return _e(this,u,e.manual?r:void 0),r;case"error":const n=e.error;return{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),zi.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),Ne(this,h).notify({query:this,type:"updated",action:e})})},g);function Wi(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Fi(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var Hi=(j=class extends hi{constructor(e={}){super(),Se(this,b,void 0),this.config=e,_e(this,b,new Map)}build(e,t,r){const n=t.queryKey,a=t.queryHash??ji(n,t);let s=this.get(a);return s||(s=new Vi({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(s)),s}add(e){Ne(this,b).has(e.queryHash)||(Ne(this,b).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Ne(this,b).get(e.queryHash);t&&(e.destroy(),t===e&&Ne(this,b).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){zi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Ne(this,b).get(e)}getAll(){return[...Ne(this,b).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>gi(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>gi(e,t)):t}notify(e){zi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){zi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){zi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},b=new WeakMap,j),Ki=(O=class extends Ui{constructor(e){super(),Se(this,_),Se(this,w,void 0),Se(this,N,void 0),Se(this,S,void 0),this.mutationId=e.mutationId,_e(this,N,e.mutationCache),_e(this,w,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Ne(this,w).includes(e)||(Ne(this,w).push(e),this.clearGcTimeout(),Ne(this,N).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){_e(this,w,Ne(this,w).filter(t=>t!==e)),this.scheduleGc(),Ne(this,N).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Ne(this,w).length||("pending"===this.state.status?this.scheduleGc():Ne(this,N).remove(this))}continue(){var e;return(null==(e=Ne(this,S))?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var t,r,n,a,s,i,o,l,c,d,u,h,m,p,f,x,y,v,g,b;const j=()=>{Oe(this,_,k).call(this,{type:"continue"})};_e(this,S,qi({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{Oe(this,_,k).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Oe(this,_,k).call(this,{type:"pause"})},onContinue:j,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ne(this,N).canRun(this)}));const w="pending"===this.state.status,O=!Ne(this,S).canStart();try{if(w)j();else{Oe(this,_,k).call(this,{type:"pending",variables:e,isPaused:O}),await(null==(r=(t=Ne(this,N).config).onMutate)?void 0:r.call(t,e,this));const s=await(null==(a=(n=this.options).onMutate)?void 0:a.call(n,e));s!==this.state.context&&Oe(this,_,k).call(this,{type:"pending",context:s,variables:e,isPaused:O})}const m=await Ne(this,S).start();return await(null==(i=(s=Ne(this,N).config).onSuccess)?void 0:i.call(s,m,e,this.state.context,this)),await(null==(l=(o=this.options).onSuccess)?void 0:l.call(o,m,e,this.state.context)),await(null==(d=(c=Ne(this,N).config).onSettled)?void 0:d.call(c,m,null,this.state.variables,this.state.context,this)),await(null==(h=(u=this.options).onSettled)?void 0:h.call(u,m,null,e,this.state.context)),Oe(this,_,k).call(this,{type:"success",data:m}),m}catch(C){try{throw await(null==(p=(m=Ne(this,N).config).onError)?void 0:p.call(m,C,e,this.state.context,this)),await(null==(x=(f=this.options).onError)?void 0:x.call(f,C,e,this.state.context)),await(null==(v=(y=Ne(this,N).config).onSettled)?void 0:v.call(y,void 0,C,this.state.variables,this.state.context,this)),await(null==(b=(g=this.options).onSettled)?void 0:b.call(g,void 0,C,e,this.state.context)),C}finally{Oe(this,_,k).call(this,{type:"error",error:C})}}finally{Ne(this,N).runNext(this)}}},w=new WeakMap,N=new WeakMap,S=new WeakMap,_=new WeakSet,k=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),zi.batch(()=>{Ne(this,w).forEach(t=>{t.onMutationUpdate(e)}),Ne(this,N).notify({mutation:this,type:"updated",action:e})})},O);var Yi=(P=class extends hi{constructor(e={}){super(),Se(this,C,void 0),Se(this,A,void 0),Se(this,E,void 0),this.config=e,_e(this,C,new Set),_e(this,A,new Map),_e(this,E,0)}build(e,t,r){const n=new Ki({mutationCache:this,mutationId:++ke(this,E)._,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){Ne(this,C).add(e);const t=Gi(e);if("string"==typeof t){const r=Ne(this,A).get(t);r?r.push(e):Ne(this,A).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Ne(this,C).delete(e)){const t=Gi(e);if("string"==typeof t){const r=Ne(this,A).get(t);if(r)if(r.length>1){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&Ne(this,A).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Gi(e);if("string"==typeof t){const r=Ne(this,A).get(t),n=null==r?void 0:r.find(e=>"pending"===e.state.status);return!n||n===e}return!0}runNext(e){var t;const r=Gi(e);if("string"==typeof r){const n=null==(t=Ne(this,A).get(r))?void 0:t.find(t=>t!==e&&t.state.isPaused);return(null==n?void 0:n.continue())??Promise.resolve()}return Promise.resolve()}clear(){zi.batch(()=>{Ne(this,C).forEach(e=>{this.notify({type:"removed",mutation:e})}),Ne(this,C).clear(),Ne(this,A).clear()})}getAll(){return Array.from(Ne(this,C))}find(e){const t={exact:!0,...e};return this.getAll().find(e=>bi(t,e))}findAll(e={}){return this.getAll().filter(t=>bi(e,t))}notify(e){zi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return zi.batch(()=>Promise.all(e.map(e=>e.continue().catch(pi))))}},C=new WeakMap,A=new WeakMap,E=new WeakMap,P);function Gi(e){var t;return null==(t=e.options.scope)?void 0:t.id}function Xi(e){return{onFetch:(t,r)=>{var n,a,s,i,o;const l=t.options,c=null==(s=null==(a=null==(n=t.fetchOptions)?void 0:n.meta)?void 0:a.fetchMore)?void 0:s.direction,d=(null==(i=t.state.data)?void 0:i.pages)||[],u=(null==(o=t.state.data)?void 0:o.pageParams)||[];let h={pages:[],pageParams:[]},m=0;const p=async()=>{let r=!1;const n=Mi(t.options,t.fetchOptions),a=async(e,a,s)=>{if(r)return Promise.reject();if(null==a&&e.pages.length)return Promise.resolve(e);const i=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:a,direction:s?"backward":"forward",meta:t.options.meta};var n;return n=e,Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",()=>{r=!0}),t.signal)}),e})(),o=await n(i),{maxPages:l}=t.options,c=s?Pi:Ei;return{pages:c(e.pages,o,l),pageParams:c(e.pageParams,a,l)}};if(c&&d.length){const e="backward"===c,t={pages:d,pageParams:u},r=(e?Ji:Qi)(l,t);h=await a(t,r,e)}else{const t=e??d.length;do{const e=0===m?u[0]??l.initialPageParam:Qi(l,h);if(m>0&&null==e)break;h=await a(h,e),m++}while(m<t)}return h};t.options.persister?t.fetchFn=()=>{var e,n;return null==(n=(e=t.options).persister)?void 0:n.call(e,p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=p}}}function Qi(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Ji(e,{pages:t,pageParams:r}){var n;return t.length>0?null==(n=e.getPreviousPageParam)?void 0:n.call(e,t[0],t,r[0],r):void 0}var Zi=(q=class{constructor(e={}){Se(this,T,void 0),Se(this,M,void 0),Se(this,D,void 0),Se(this,I,void 0),Se(this,R,void 0),Se(this,L,void 0),Se(this,F,void 0),Se(this,B,void 0),_e(this,T,e.queryCache||new Hi),_e(this,M,e.mutationCache||new Yi),_e(this,D,e.defaultOptions||{}),_e(this,I,new Map),_e(this,R,new Map),_e(this,L,0)}mount(){ke(this,L)._++,1===Ne(this,L)&&(_e(this,F,Di.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ne(this,T).onFocus())})),_e(this,B,Ii.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ne(this,T).onOnline())})))}unmount(){var e,t;ke(this,L)._--,0===Ne(this,L)&&(null==(e=Ne(this,F))||e.call(this),_e(this,F,void 0),null==(t=Ne(this,B))||t.call(this),_e(this,B,void 0))}isFetching(e){return Ne(this,T).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ne(this,M).findAll({...e,status:"pending"}).length}getQueryData(e){var t;const r=this.defaultQueryOptions({queryKey:e});return null==(t=Ne(this,T).get(r.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Ne(this,T).build(this,t),n=r.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(yi(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Ne(this,T).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=Ne(this,T).get(n.queryHash),s=function(e,t){return"function"==typeof e?e(t):e}(t,null==a?void 0:a.state.data);if(void 0!==s)return Ne(this,T).build(this,n).setData(s,{...r,manual:!0})}setQueriesData(e,t,r){return zi.batch(()=>Ne(this,T).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,r)]))}getQueryState(e){var t;const r=this.defaultQueryOptions({queryKey:e});return null==(t=Ne(this,T).get(r.queryHash))?void 0:t.state}removeQueries(e){const t=Ne(this,T);zi.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const r=Ne(this,T);return zi.batch(()=>(r.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=zi.batch(()=>Ne(this,T).findAll(e).map(e=>e.cancel(r)));return Promise.all(n).then(pi).catch(pi)}invalidateQueries(e,t={}){return zi.batch(()=>(Ne(this,T).findAll(e).forEach(e=>{e.invalidate()}),"none"===(null==e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries({...e,type:(null==e?void 0:e.refetchType)??(null==e?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=zi.batch(()=>Ne(this,T).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(pi)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(n).then(pi)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const r=Ne(this,T).build(this,t);return r.isStaleByTime(yi(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(pi).catch(pi)}fetchInfiniteQuery(e){return e.behavior=Xi(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(pi).catch(pi)}ensureInfiniteQueryData(e){return e.behavior=Xi(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ii.isOnline()?Ne(this,M).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ne(this,T)}getMutationCache(){return Ne(this,M)}getDefaultOptions(){return Ne(this,D)}setDefaultOptions(e){_e(this,D,e)}setQueryDefaults(e,t){Ne(this,I).set(wi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ne(this,I).values()],r={};return t.forEach(t=>{Ni(e,t.queryKey)&&Object.assign(r,t.defaultOptions)}),r}setMutationDefaults(e,t){Ne(this,R).set(wi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ne(this,R).values()],r={};return t.forEach(t=>{Ni(e,t.mutationKey)&&Object.assign(r,t.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ne(this,D).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=ji(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ti&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...Ne(this,D).mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ne(this,T).clear(),Ne(this,M).clear()}},T=new WeakMap,M=new WeakMap,D=new WeakMap,I=new WeakMap,R=new WeakMap,L=new WeakMap,F=new WeakMap,B=new WeakMap,q),eo=(be=class extends hi{constructor(e,t){super(),Se(this,re),Se(this,ae),Se(this,ie),Se(this,le),Se(this,de),Se(this,he),Se(this,pe),Se(this,xe),Se(this,ve),Se(this,$,void 0),Se(this,z,void 0),Se(this,U,void 0),Se(this,V,void 0),Se(this,W,void 0),Se(this,H,void 0),Se(this,K,void 0),Se(this,Y,void 0),Se(this,G,void 0),Se(this,X,void 0),Se(this,Q,void 0),Se(this,J,void 0),Se(this,Z,void 0),Se(this,ee,void 0),Se(this,te,new Set),this.options=t,_e(this,$,e),_e(this,Y,null),_e(this,K,Ri()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(Ne(this,z).addObserver(this),to(Ne(this,z),this.options)?Oe(this,re,ne).call(this):this.updateResult(),Oe(this,de,ue).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ro(Ne(this,z),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ro(Ne(this,z),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Oe(this,he,me).call(this),Oe(this,pe,fe).call(this),Ne(this,z).removeObserver(this)}setOptions(e){const t=this.options,r=Ne(this,z);if(this.options=Ne(this,$).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof vi(this.options.enabled,Ne(this,z)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Oe(this,xe,ye).call(this),Ne(this,z).setOptions(this.options),t._defaulted&&!_i(this.options,t)&&Ne(this,$).getQueryCache().notify({type:"observerOptionsUpdated",query:Ne(this,z),observer:this});const n=this.hasListeners();n&&no(Ne(this,z),r,this.options,t)&&Oe(this,re,ne).call(this),this.updateResult(),!n||Ne(this,z)===r&&vi(this.options.enabled,Ne(this,z))===vi(t.enabled,Ne(this,z))&&yi(this.options.staleTime,Ne(this,z))===yi(t.staleTime,Ne(this,z))||Oe(this,ae,se).call(this);const a=Oe(this,ie,oe).call(this);!n||Ne(this,z)===r&&vi(this.options.enabled,Ne(this,z))===vi(t.enabled,Ne(this,z))&&a===Ne(this,ee)||Oe(this,le,ce).call(this,a)}getOptimisticResult(e){const t=Ne(this,$).getQueryCache().build(Ne(this,$),e),r=this.createResult(t,e);return function(e,t){if(!_i(e.getCurrentResult(),t))return!0;return!1}(this,r)&&(_e(this,V,r),_e(this,H,this.options),_e(this,W,Ne(this,z).state)),r}getCurrentResult(){return Ne(this,V)}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),null==t||t(r),"promise"!==r||this.options.experimental_prefetchInRender||"pending"!==Ne(this,K).status||Ne(this,K).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(e,r))})}trackProp(e){Ne(this,te).add(e)}getCurrentQuery(){return Ne(this,z)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=Ne(this,$).defaultQueryOptions(e),r=Ne(this,$).getQueryCache().build(Ne(this,$),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Oe(this,re,ne).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Ne(this,V)))}createResult(e,t){var r;const n=Ne(this,z),a=this.options,s=Ne(this,V),i=Ne(this,W),o=Ne(this,H),l=e!==n?e.state:Ne(this,U),{state:c}=e;let d,u={...c},h=!1;if(t._optimisticResults){const r=this.hasListeners(),s=!r&&to(e,t),i=r&&no(e,n,t,a);(s||i)&&(u={...u,...Wi(c.data,e.options)}),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:p,status:f}=u;d=u.data;let x=!1;if(void 0!==t.placeholderData&&void 0===d&&"pending"===f){let e;(null==s?void 0:s.isPlaceholderData)&&t.placeholderData===(null==o?void 0:o.placeholderData)?(e=s.data,x=!0):e="function"==typeof t.placeholderData?t.placeholderData(null==(r=Ne(this,Q))?void 0:r.state.data,Ne(this,Q)):t.placeholderData,void 0!==e&&(f="success",d=Ai(null==s?void 0:s.data,e,t),h=!0)}if(t.select&&void 0!==d&&!x)if(s&&d===(null==i?void 0:i.data)&&t.select===Ne(this,G))d=Ne(this,X);else try{_e(this,G,t.select),d=t.select(d),d=Ai(null==s?void 0:s.data,d,t),_e(this,X,d),_e(this,Y,null)}catch(N){_e(this,Y,N)}Ne(this,Y)&&(m=Ne(this,Y),d=Ne(this,X),p=Date.now(),f="error");const y="fetching"===u.fetchStatus,v="pending"===f,g="error"===f,b=v&&y,j=void 0!==d,w={status:f,fetchStatus:u.fetchStatus,isPending:v,isSuccess:"success"===f,isError:g,isInitialLoading:b,isLoading:b,data:d,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:g&&!j,isPaused:"paused"===u.fetchStatus,isPlaceholderData:h,isRefetchError:g&&j,isStale:ao(e,t),refetch:this.refetch,promise:Ne(this,K),isEnabled:!1!==vi(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===w.status?e.reject(w.error):void 0!==w.data&&e.resolve(w.data)},r=()=>{const e=_e(this,K,w.promise=Ri());t(e)},a=Ne(this,K);switch(a.status){case"pending":e.queryHash===n.queryHash&&t(a);break;case"fulfilled":"error"!==w.status&&w.data===a.value||r();break;case"rejected":"error"===w.status&&w.error===a.reason||r()}}return w}updateResult(){const e=Ne(this,V),t=this.createResult(Ne(this,z),this.options);if(_e(this,W,Ne(this,z).state),_e(this,H,this.options),void 0!==Ne(this,W).data&&_e(this,Q,Ne(this,z)),_i(t,e))return;_e(this,V,t);Oe(this,ve,ge).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!Ne(this,te).size)return!0;const n=new Set(r??Ne(this,te));return this.options.throwOnError&&n.add("error"),Object.keys(Ne(this,V)).some(t=>{const r=t;return Ne(this,V)[r]!==e[r]&&n.has(r)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Oe(this,de,ue).call(this)}},$=new WeakMap,z=new WeakMap,U=new WeakMap,V=new WeakMap,W=new WeakMap,H=new WeakMap,K=new WeakMap,Y=new WeakMap,G=new WeakMap,X=new WeakMap,Q=new WeakMap,J=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap,re=new WeakSet,ne=function(e){Oe(this,xe,ye).call(this);let t=Ne(this,z).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(pi)),t},ae=new WeakSet,se=function(){Oe(this,he,me).call(this);const e=yi(this.options.staleTime,Ne(this,z));if(mi||Ne(this,V).isStale||!fi(e))return;const t=xi(Ne(this,V).dataUpdatedAt,e);_e(this,J,setTimeout(()=>{Ne(this,V).isStale||this.updateResult()},t+1))},ie=new WeakSet,oe=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(Ne(this,z)):this.options.refetchInterval)??!1},le=new WeakSet,ce=function(e){Oe(this,pe,fe).call(this),_e(this,ee,e),!mi&&!1!==vi(this.options.enabled,Ne(this,z))&&fi(Ne(this,ee))&&0!==Ne(this,ee)&&_e(this,Z,setInterval(()=>{(this.options.refetchIntervalInBackground||Di.isFocused())&&Oe(this,re,ne).call(this)},Ne(this,ee)))},de=new WeakSet,ue=function(){Oe(this,ae,se).call(this),Oe(this,le,ce).call(this,Oe(this,ie,oe).call(this))},he=new WeakSet,me=function(){Ne(this,J)&&(clearTimeout(Ne(this,J)),_e(this,J,void 0))},pe=new WeakSet,fe=function(){Ne(this,Z)&&(clearInterval(Ne(this,Z)),_e(this,Z,void 0))},xe=new WeakSet,ye=function(){const e=Ne(this,$).getQueryCache().build(Ne(this,$),this.options);if(e===Ne(this,z))return;const t=Ne(this,z);_e(this,z,e),_e(this,U,e.state),this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))},ve=new WeakSet,ge=function(e){zi.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(Ne(this,V))}),Ne(this,$).getQueryCache().notify({query:Ne(this,z),type:"observerResultsUpdated"})})},be);function to(e,t){return function(e,t){return!1!==vi(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&ro(e,t,t.refetchOnMount)}function ro(e,t,r){if(!1!==vi(t.enabled,e)&&"static"!==yi(t.staleTime,e)){const n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&ao(e,t)}return!1}function no(e,t,r,n){return(e!==t||!1===vi(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&ao(e,r)}function ao(e,t){return!1!==vi(t.enabled,e)&&e.isStaleByTime(yi(t.staleTime,e))}var so=Ct.createContext(void 0),io=e=>{const t=Ct.useContext(so);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},oo=({client:e,children:t})=>(Ct.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Ce.jsx(so.Provider,{value:e,children:t})),lo=Ct.createContext(!1);lo.Provider;var co=Ct.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),uo=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function ho(e,t,r){var n,a,s,i,o;const l=Ct.useContext(lo),c=Ct.useContext(co),d=io(r),u=d.defaultQueryOptions(e);null==(a=null==(n=d.getDefaultOptions().queries)?void 0:n._experimental_beforeQuery)||a.call(n,u),u._optimisticResults=l?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=e=>"static"===e?e:Math.max(e??1e3,1e3),r=e.staleTime;e.staleTime="function"==typeof r?(...e)=>t(r(...e)):t(r),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}})(u),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(u,c),(e=>{Ct.useEffect(()=>{e.clearReset()},[e])})(c);const h=!d.getQueryCache().get(u.queryHash),[m]=Ct.useState(()=>new t(d,u)),p=m.getOptimisticResult(u),f=!l&&!1!==e.subscribed;if(Ct.useSyncExternalStore(Ct.useCallback(e=>{const t=f?m.subscribe(zi.batchCalls(e)):pi;return m.updateResult(),t},[m,f]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),Ct.useEffect(()=>{m.setOptions(u)},[u,m]),((e,t)=>(null==e?void 0:e.suspense)&&t.isPending)(u,p))throw uo(u,m,c);if((({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&void 0===e.data||function(e,t){return"function"==typeof e?e(...t):!!e}(r,[e.error,n])))({result:p,errorResetBoundary:c,throwOnError:u.throwOnError,query:d.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw p.error;if(null==(i=null==(s=d.getDefaultOptions().queries)?void 0:s._experimental_afterQuery)||i.call(s,u,p),u.experimental_prefetchInRender&&!mi&&((e,t)=>e.isLoading&&e.isFetching&&!t)(p,l)){const e=h?uo(u,m,c):null==(o=d.getQueryCache().get(u.queryHash))?void 0:o.promise;null==e||e.catch(pi).finally(()=>{m.updateResult()})}return u.notifyOnChangeProps?p:m.trackResult(p)}function mo(e,t){return ho(e,eo,t)}function po(e,t){return function(){return e.apply(t,arguments)}}const{toString:fo}=Object.prototype,{getPrototypeOf:xo}=Object,{iterator:yo,toStringTag:vo}=Symbol,go=(bo=Object.create(null),e=>{const t=fo.call(e);return bo[t]||(bo[t]=t.slice(8,-1).toLowerCase())});var bo;const jo=e=>(e=e.toLowerCase(),t=>go(t)===e),wo=e=>t=>typeof t===e,{isArray:No}=Array,So=wo("undefined");function _o(e){return null!==e&&!So(e)&&null!==e.constructor&&!So(e.constructor)&&Co(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ko=jo("ArrayBuffer");const Oo=wo("string"),Co=wo("function"),Ao=wo("number"),Eo=e=>null!==e&&"object"==typeof e,Po=e=>{if("object"!==go(e))return!1;const t=xo(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||vo in e||yo in e)},To=jo("Date"),Mo=jo("File"),Do=jo("Blob"),Io=jo("FileList"),Ro=jo("URLSearchParams"),[Lo,Fo,Bo,qo]=["ReadableStream","Request","Response","Headers"].map(jo);function $o(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,a;if("object"!=typeof e&&(e=[e]),No(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(_o(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;let i;for(n=0;n<s;n++)i=a[n],t.call(null,e[i],i,e)}}function zo(e,t){if(_o(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,a=r.length;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const Uo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Vo=e=>!So(e)&&e!==Uo;const Wo=(Ho="undefined"!=typeof Uint8Array&&xo(Uint8Array),e=>Ho&&e instanceof Ho);var Ho;const Ko=jo("HTMLFormElement"),Yo=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Go=jo("RegExp"),Xo=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};$o(r,(r,a)=>{let s;!1!==(s=t(r,a,e))&&(n[a]=s||r)}),Object.defineProperties(e,n)};const Qo=jo("AsyncFunction"),Jo=(Zo="function"==typeof setImmediate,el=Co(Uo.postMessage),Zo?setImmediate:el?(tl=`axios@${Math.random()}`,rl=[],Uo.addEventListener("message",({source:e,data:t})=>{e===Uo&&t===tl&&rl.length&&rl.shift()()},!1),e=>{rl.push(e),Uo.postMessage(tl,"*")}):e=>setTimeout(e));var Zo,el,tl,rl;const nl="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Uo):"undefined"!=typeof process&&process.nextTick||Jo,al={isArray:No,isArrayBuffer:ko,isBuffer:_o,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Co(e.append)&&("formdata"===(t=go(e))||"object"===t&&Co(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ko(e.buffer),t},isString:Oo,isNumber:Ao,isBoolean:e=>!0===e||!1===e,isObject:Eo,isPlainObject:Po,isEmptyObject:e=>{if(!Eo(e)||_o(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:Lo,isRequest:Fo,isResponse:Bo,isHeaders:qo,isUndefined:So,isDate:To,isFile:Mo,isBlob:Do,isRegExp:Go,isFunction:Co,isStream:e=>Eo(e)&&Co(e.pipe),isURLSearchParams:Ro,isTypedArray:Wo,isFileList:Io,forEach:$o,merge:function e(){const{caseless:t,skipUndefined:r}=Vo(this)&&this||{},n={},a=(a,s)=>{const i=t&&zo(n,s)||s;Po(n[i])&&Po(a)?n[i]=e(n[i],a):Po(a)?n[i]=e({},a):No(a)?n[i]=a.slice():r&&So(a)||(n[i]=a)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&$o(arguments[s],a);return n},extend:(e,t,r,{allOwnKeys:n}={})=>($o(t,(t,n)=>{r&&Co(t)?e[n]=po(t,r):e[n]=t},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let a,s,i;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)i=a[s],n&&!n(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==r&&xo(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:go,kindOfTest:jo,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(No(e))return e;let t=e.length;if(!Ao(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[yo]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:Ko,hasOwnProperty:Yo,hasOwnProp:Yo,reduceDescriptors:Xo,freezeMethods:e=>{Xo(e,(t,r)=>{if(Co(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];Co(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return No(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:zo,global:Uo,isContextDefined:Vo,isSpecCompliantForm:function(e){return!!(e&&Co(e.append)&&"FormData"===e[vo]&&e[yo])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(Eo(e)){if(t.indexOf(e)>=0)return;if(_o(e))return e;if(!("toJSON"in e)){t[n]=e;const a=No(e)?[]:{};return $o(e,(e,t)=>{const s=r(e,n+1);!So(s)&&(a[t]=s)}),t[n]=void 0,a}}return e};return r(e,0)},isAsyncFn:Qo,isThenable:e=>e&&(Eo(e)||Co(e))&&Co(e.then)&&Co(e.catch),setImmediate:Jo,asap:nl,isIterable:e=>null!=e&&Co(e[yo])};function sl(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}al.inherits(sl,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:al.toJSONObject(this.config),code:this.code,status:this.status}}});const il=sl.prototype,ol={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ol[e]={value:e}}),Object.defineProperties(sl,ol),Object.defineProperty(il,"isAxiosError",{value:!0}),sl.from=(e,t,r,n,a,s)=>{const i=Object.create(il);al.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return sl.call(i,o,l,r,n,a),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",s&&Object.assign(i,s),i};function ll(e){return al.isPlainObject(e)||al.isArray(e)}function cl(e){return al.endsWith(e,"[]")?e.slice(0,-2):e}function dl(e,t,r){return e?e.concat(t).map(function(e,t){return e=cl(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const ul=al.toFlatObject(al,{},null,function(e){return/^is[A-Z]/.test(e)});function hl(e,t,r){if(!al.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=al.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!al.isUndefined(t[e])})).metaTokens,a=r.visitor||c,s=r.dots,i=r.indexes,o=(r.Blob||"undefined"!=typeof Blob&&Blob)&&al.isSpecCompliantForm(t);if(!al.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(al.isDate(e))return e.toISOString();if(al.isBoolean(e))return e.toString();if(!o&&al.isBlob(e))throw new sl("Blob is not supported. Use a Buffer instead.");return al.isArrayBuffer(e)||al.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,a){let o=e;if(e&&!a&&"object"==typeof e)if(al.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(al.isArray(e)&&function(e){return al.isArray(e)&&!e.some(ll)}(e)||(al.isFileList(e)||al.endsWith(r,"[]"))&&(o=al.toArray(e)))return r=cl(r),o.forEach(function(e,n){!al.isUndefined(e)&&null!==e&&t.append(!0===i?dl([r],n,s):null===i?r:r+"[]",l(e))}),!1;return!!ll(e)||(t.append(dl(a,r,s),l(e)),!1)}const d=[],u=Object.assign(ul,{defaultVisitor:c,convertValue:l,isVisitable:ll});if(!al.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!al.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),al.forEach(r,function(r,s){!0===(!(al.isUndefined(r)||null===r)&&a.call(t,r,al.isString(s)?s.trim():s,n,u))&&e(r,n?n.concat(s):[s])}),d.pop()}}(e),t}function ml(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function pl(e,t){this._pairs=[],e&&hl(e,this,t)}const fl=pl.prototype;function xl(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function yl(e,t,r){if(!t)return e;const n=r&&r.encode||xl;al.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let s;if(s=a?a(t,r):al.isURLSearchParams(t)?t.toString():new pl(t,r).toString(n),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}fl.append=function(e,t){this._pairs.push([e,t])},fl.toString=function(e){const t=e?function(t){return e.call(this,t,ml)}:ml;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const vl=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){al.forEach(this.handlers,function(t){null!==t&&e(t)})}},gl={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bl={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:pl,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},jl="undefined"!=typeof window&&"undefined"!=typeof document,wl="object"==typeof navigator&&navigator||void 0,Nl=jl&&(!wl||["ReactNative","NativeScript","NS"].indexOf(wl.product)<0),Sl="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,_l=jl&&window.location.href||"http://localhost",kl={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jl,hasStandardBrowserEnv:Nl,hasStandardBrowserWebWorkerEnv:Sl,navigator:wl,origin:_l},Symbol.toStringTag,{value:"Module"})),...bl};function Ol(e){function t(e,r,n,a){let s=e[a++];if("__proto__"===s)return!0;const i=Number.isFinite(+s),o=a>=e.length;if(s=!s&&al.isArray(n)?n.length:s,o)return al.hasOwnProp(n,s)?n[s]=[n[s],r]:n[s]=r,!i;n[s]&&al.isObject(n[s])||(n[s]=[]);return t(e,r,n[s],a)&&al.isArray(n[s])&&(n[s]=function(e){const t={},r=Object.keys(e);let n;const a=r.length;let s;for(n=0;n<a;n++)s=r[n],t[s]=e[s];return t}(n[s])),!i}if(al.isFormData(e)&&al.isFunction(e.entries)){const r={};return al.forEachEntry(e,(e,n)=>{t(function(e){return al.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null}const Cl={transitional:gl,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,a=al.isObject(e);a&&al.isHTMLForm(e)&&(e=new FormData(e));if(al.isFormData(e))return n?JSON.stringify(Ol(e)):e;if(al.isArrayBuffer(e)||al.isBuffer(e)||al.isStream(e)||al.isFile(e)||al.isBlob(e)||al.isReadableStream(e))return e;if(al.isArrayBufferView(e))return e.buffer;if(al.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return hl(e,new kl.classes.URLSearchParams,{visitor:function(e,t,r,n){return kl.isNode&&al.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((s=al.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return hl(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),function(e,t,r){if(al.isString(e))try{return(t||JSON.parse)(e),al.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Cl.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(al.isResponse(e)||al.isReadableStream(e))return e;if(e&&al.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(a){if(r){if("SyntaxError"===a.name)throw sl.from(a,sl.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kl.classes.FormData,Blob:kl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};al.forEach(["delete","get","head","post","put","patch"],e=>{Cl.headers[e]={}});const Al=Cl,El=al.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Pl=Symbol("internals");function Tl(e){return e&&String(e).trim().toLowerCase()}function Ml(e){return!1===e||null==e?e:al.isArray(e)?e.map(Ml):String(e)}function Dl(e,t,r,n,a){return al.isFunction(n)?n.call(this,t,r):(a&&(t=r),al.isString(t)?al.isString(n)?-1!==t.indexOf(n):al.isRegExp(n)?n.test(t):void 0:void 0)}class Il{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function a(e,t,r){const a=Tl(t);if(!a)throw new Error("header name must be a non-empty string");const s=al.findKey(n,a);(!s||void 0===n[s]||!0===r||void 0===r&&!1!==n[s])&&(n[s||t]=Ml(e))}const s=(e,t)=>al.forEach(e,(e,r)=>a(e,r,t));if(al.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(al.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let r,n,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),r=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!r||t[r]&&El[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(al.isObject(e)&&al.isIterable(e)){let r,n,a={};for(const t of e){if(!al.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[n=t[0]]=(r=a[n])?al.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}s(a,t)}else null!=e&&a(t,e,r);return this}get(e,t){if(e=Tl(e)){const r=al.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(al.isFunction(t))return t.call(this,e,r);if(al.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Tl(e)){const r=al.findKey(this,e);return!(!r||void 0===this[r]||t&&!Dl(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function a(e){if(e=Tl(e)){const a=al.findKey(r,e);!a||t&&!Dl(0,r[a],a,t)||(delete r[a],n=!0)}}return al.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const a=t[r];e&&!Dl(0,this[a],a,e,!0)||(delete this[a],n=!0)}return n}normalize(e){const t=this,r={};return al.forEach(this,(n,a)=>{const s=al.findKey(r,a);if(s)return t[s]=Ml(n),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(a):String(a).trim();i!==a&&delete t[a],t[i]=Ml(n),r[i]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return al.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&al.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const t=(this[Pl]=this[Pl]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Tl(e);t[n]||(!function(e,t){const r=al.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,a){return this[n].call(this,t,e,r,a)},configurable:!0})})}(r,e),t[n]=!0)}return al.isArray(e)?e.forEach(n):n(e),this}}Il.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),al.reduceDescriptors(Il.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),al.freezeMethods(Il);const Rl=Il;function Ll(e,t){const r=this||Al,n=t||r,a=Rl.from(n.headers);let s=n.data;return al.forEach(e,function(e){s=e.call(r,s,a.normalize(),t?t.status:void 0)}),a.normalize(),s}function Fl(e){return!(!e||!e.__CANCEL__)}function Bl(e,t,r){sl.call(this,null==e?"canceled":e,sl.ERR_CANCELED,t,r),this.name="CanceledError"}function ql(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new sl("Request failed with status code "+r.status,[sl.ERR_BAD_REQUEST,sl.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}al.inherits(Bl,sl,{__CANCEL__:!0});const $l=(e,t,r=3)=>{let n=0;const a=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a,s=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=n[i];a||(a=l),r[s]=o,n[s]=l;let d=i,u=0;for(;d!==s;)u+=r[d++],d%=e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}}(50,250);return function(e,t){let r,n,a=0,s=1e3/t;const i=(t,s=Date.now())=>{a=s,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{const t=Date.now(),o=t-a;o>=s?i(e,t):(r=e,n||(n=setTimeout(()=>{n=null,i(r)},s-o)))},()=>r&&i(r)]}(r=>{const s=r.loaded,i=r.lengthComputable?r.total:void 0,o=s-n,l=a(o);n=s;e({loaded:s,total:i,progress:i?s/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&s<=i?(i-s)/l:void 0,event:r,lengthComputable:null!=i,[t?"download":"upload"]:!0})},r)},zl=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Ul=e=>(...t)=>al.asap(()=>e(...t)),Vl=kl.hasStandardBrowserEnv?(Wl=new URL(kl.origin),Hl=kl.navigator&&/(msie|trident)/i.test(kl.navigator.userAgent),e=>(e=new URL(e,kl.origin),Wl.protocol===e.protocol&&Wl.host===e.host&&(Hl||Wl.port===e.port))):()=>!0;var Wl,Hl;const Kl=kl.hasStandardBrowserEnv?{write(e,t,r,n,a,s){const i=[e+"="+encodeURIComponent(t)];al.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),al.isString(n)&&i.push("path="+n),al.isString(a)&&i.push("domain="+a),!0===s&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Yl(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Gl=e=>e instanceof Rl?{...e}:e;function Xl(e,t){t=t||{};const r={};function n(e,t,r,n){return al.isPlainObject(e)&&al.isPlainObject(t)?al.merge.call({caseless:n},e,t):al.isPlainObject(t)?al.merge({},t):al.isArray(t)?t.slice():t}function a(e,t,r,a){return al.isUndefined(t)?al.isUndefined(e)?void 0:n(void 0,e,0,a):n(e,t,0,a)}function s(e,t){if(!al.isUndefined(t))return n(void 0,t)}function i(e,t){return al.isUndefined(t)?al.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function o(r,a,s){return s in t?n(r,a):s in e?n(void 0,r):void 0}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,r)=>a(Gl(e),Gl(t),0,!0)};return al.forEach(Object.keys({...e,...t}),function(n){const s=l[n]||a,i=s(e[n],t[n],n);al.isUndefined(i)&&s!==o||(r[n]=i)}),r}const Ql=e=>{const t=Xl({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:s,headers:i,auth:o}=t;if(t.headers=i=Rl.from(i),t.url=yl(Yl(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),al.isFormData(r))if(kl.hasStandardBrowserEnv||kl.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(al.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&i.set(e,r)})}if(kl.hasStandardBrowserEnv&&(n&&al.isFunction(n)&&(n=n(t)),n||!1!==n&&Vl(t.url))){const e=a&&s&&Kl.read(s);e&&i.set(a,e)}return t},Jl="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=Ql(e);let a=n.data;const s=Rl.from(n.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=n;function p(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(i),n.signal&&n.signal.removeEventListener("abort",i)}let f=new XMLHttpRequest;function x(){if(!f)return;const n=Rl.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());ql(function(e){t(e),p()},function(e){r(e),p()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout,"onloadend"in f?f.onloadend=x:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(x)},f.onabort=function(){f&&(r(new sl("Request aborted",sl.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const n=new sl(t&&t.message?t.message:"Network Error",sl.ERR_NETWORK,e,f);n.event=t||null,r(n),f=null},f.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const a=n.transitional||gl;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new sl(t,a.clarifyTimeoutError?sl.ETIMEDOUT:sl.ECONNABORTED,e,f)),f=null},void 0===a&&s.setContentType(null),"setRequestHeader"in f&&al.forEach(s.toJSON(),function(e,t){f.setRequestHeader(t,e)}),al.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),u&&"json"!==u&&(f.responseType=n.responseType),m&&([l,d]=$l(m,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=$l(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(i=t=>{f&&(r(!t||t.type?new Bl(null,e,f):t),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(i),n.signal&&(n.signal.aborted?i():n.signal.addEventListener("abort",i)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===kl.protocols.indexOf(y)?r(new sl("Unsupported protocol "+y+":",sl.ERR_BAD_REQUEST,e)):f.send(a||null)})},Zl=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const a=function(e){if(!r){r=!0,i();const t=e instanceof Error?e:this.reason;n.abort(t instanceof sl?t:new Bl(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,a(new sl(`timeout ${t} of ms exceeded`,sl.ETIMEDOUT))},t);const i=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:o}=n;return o.unsubscribe=()=>al.asap(i),o}},ec=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,a=0;for(;a<r;)n=a+t,yield e.slice(a,n),a=n},tc=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},rc=(e,t,r,n)=>{const a=async function*(e,t){for await(const r of tc(e))yield*ec(r,t)}(e,t);let s,i=0,o=e=>{s||(s=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await a.next();if(t)return o(),void e.close();let s=n.byteLength;if(r){let e=i+=s;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},{isFunction:nc}=al,ac=(({Request:e,Response:t})=>({Request:e,Response:t}))(al.global),{ReadableStream:sc,TextEncoder:ic}=al.global,oc=(e,...t)=>{try{return!!e(...t)}catch(r){return!1}},lc=e=>{e=al.merge.call({skipUndefined:!0},ac,e);const{fetch:t,Request:r,Response:n}=e,a=t?nc(t):"function"==typeof fetch,s=nc(r),i=nc(n);if(!a)return!1;const o=a&&nc(sc),l=a&&("function"==typeof ic?(c=new ic,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const d=s&&o&&oc(()=>{let e=!1;const t=new r(kl.origin,{body:new sc,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=i&&o&&oc(()=>al.isReadableStream(new n("").body)),h={stream:u&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new sl(`Response type '${e}' is not supported`,sl.ERR_NOT_SUPPORT,r)})});const m=async(e,t)=>{const n=al.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(al.isBlob(e))return e.size;if(al.isSpecCompliantForm(e)){const t=new r(kl.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return al.isArrayBufferView(e)||al.isArrayBuffer(e)?e.byteLength:(al.isURLSearchParams(e)&&(e+=""),al.isString(e)?(await l(e)).byteLength:void 0)})(t):n};return async e=>{let{url:a,method:i,data:o,signal:l,cancelToken:c,timeout:p,onDownloadProgress:f,onUploadProgress:x,responseType:y,headers:v,withCredentials:g="same-origin",fetchOptions:b}=Ql(e),j=t||fetch;y=y?(y+"").toLowerCase():"text";let w=Zl([l,c&&c.toAbortSignal()],p),N=null;const S=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let _;try{if(x&&d&&"get"!==i&&"head"!==i&&0!==(_=await m(v,o))){let e,t=new r(a,{method:"POST",body:o,duplex:"half"});if(al.isFormData(o)&&(e=t.headers.get("content-type"))&&v.setContentType(e),t.body){const[e,r]=zl(_,$l(Ul(x)));o=rc(t.body,65536,e,r)}}al.isString(g)||(g=g?"include":"omit");const t=s&&"credentials"in r.prototype,l={...b,signal:w,method:i.toUpperCase(),headers:v.normalize().toJSON(),body:o,duplex:"half",credentials:t?g:void 0};N=s&&new r(a,l);let c=await(s?j(N,b):j(a,l));const p=u&&("stream"===y||"response"===y);if(u&&(f||p&&S)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=al.toFiniteNumber(c.headers.get("content-length")),[r,a]=f&&zl(t,$l(Ul(f),!0))||[];c=new n(rc(c.body,65536,r,()=>{a&&a(),S&&S()}),e)}y=y||"text";let k=await h[al.findKey(h,y)||"text"](c,e);return!p&&S&&S(),await new Promise((t,r)=>{ql(t,r,{data:k,headers:Rl.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:N})})}catch(k){if(S&&S(),k&&"TypeError"===k.name&&/Load failed|fetch/i.test(k.message))throw Object.assign(new sl("Network Error",sl.ERR_NETWORK,e,N),{cause:k.cause||k});throw sl.from(k,k&&k.code,e,N)}}},cc=new Map,dc=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:a}=t,s=[n,a,r];let i,o,l=s.length,c=cc;for(;l--;)i=s[l],o=c.get(i),void 0===o&&c.set(i,o=l?new Map:lc(t)),c=o;return o};dc();const uc={http:null,xhr:Jl,fetch:{get:dc}};al.forEach(uc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});const hc=e=>`- ${e}`,mc=e=>al.isFunction(e)||null===e||!1===e,pc=(e,t)=>{e=al.isArray(e)?e:[e];const{length:r}=e;let n,a;const s={};for(let i=0;i<r;i++){let r;if(n=e[i],a=n,!mc(n)&&(a=uc[(r=String(n)).toLowerCase()],void 0===a))throw new sl(`Unknown adapter '${r}'`);if(a&&(al.isFunction(a)||(a=a.get(t))))break;s[r||"#"+i]=a}if(!a){const e=Object.entries(s).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new sl("There is no suitable adapter to dispatch the request "+(r?e.length>1?"since :\n"+e.map(hc).join("\n"):" "+hc(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return a};function fc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Bl(null,e)}function xc(e){fc(e),e.headers=Rl.from(e.headers),e.data=Ll.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return pc(e.adapter||Al.adapter,e)(e).then(function(t){return fc(e),t.data=Ll.call(e,e.transformResponse,t),t.headers=Rl.from(t.headers),t},function(t){return Fl(t)||(fc(e),t&&t.response&&(t.response.data=Ll.call(e,e.transformResponse,t.response),t.response.headers=Rl.from(t.response.headers))),Promise.reject(t)})}const yc="1.12.2",vc={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{vc[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const gc={};vc.transitional=function(e,t,r){function n(e,t){return"[Axios v"+yc+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,a,s)=>{if(!1===e)throw new sl(n(a," has been removed"+(t?" in "+t:"")),sl.ERR_DEPRECATED);return t&&!gc[a]&&(gc[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,a,s)}},vc.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};const bc={assertOptions:function(e,t,r){if("object"!=typeof e)throw new sl("options must be an object",sl.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const s=n[a],i=t[s];if(i){const t=e[s],r=void 0===t||i(t,s,e);if(!0!==r)throw new sl("option "+s+" must be "+r,sl.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new sl("Unknown option "+s,sl.ERR_BAD_OPTION)}},validators:vc},jc=bc.validators;class wc{constructor(e){this.defaults=e||{},this.interceptors={request:new vl,response:new vl}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(n){}}throw r}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Xl(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:a}=t;void 0!==r&&bc.assertOptions(r,{silentJSONParsing:jc.transitional(jc.boolean),forcedJSONParsing:jc.transitional(jc.boolean),clarifyTimeoutError:jc.transitional(jc.boolean)},!1),null!=n&&(al.isFunction(n)?t.paramsSerializer={serialize:n}:bc.assertOptions(n,{encode:jc.function,serialize:jc.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),bc.assertOptions(t,{baseUrl:jc.spelling("baseURL"),withXsrfToken:jc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&al.merge(a.common,a[t.method]);a&&al.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=Rl.concat(s,a);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[xc.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=xc.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return yl(Yl((e=Xl(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}al.forEach(["delete","get","head","options"],function(e){wc.prototype[e]=function(t,r){return this.request(Xl(r||{},{method:e,url:t,data:(r||{}).data}))}}),al.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,a){return this.request(Xl(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}wc.prototype[e]=t(),wc.prototype[e+"Form"]=t(!0)});const Nc=wc;class Sc{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,a){r.reason||(r.reason=new Bl(e,n,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Sc(function(t){e=t}),cancel:e}}}const _c=Sc;const kc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kc).forEach(([e,t])=>{kc[t]=e});const Oc=kc;const Cc=function e(t){const r=new Nc(t),n=po(Nc.prototype.request,r);return al.extend(n,Nc.prototype,r,{allOwnKeys:!0}),al.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Xl(t,r))},n}(Al);Cc.Axios=Nc,Cc.CanceledError=Bl,Cc.CancelToken=_c,Cc.isCancel=Fl,Cc.VERSION=yc,Cc.toFormData=hl,Cc.AxiosError=sl,Cc.Cancel=Cc.CanceledError,Cc.all=function(e){return Promise.all(e)},Cc.spread=function(e){return function(t){return e.apply(null,t)}},Cc.isAxiosError=function(e){return al.isObject(e)&&!0===e.isAxiosError},Cc.mergeConfig=Xl,Cc.AxiosHeaders=Rl,Cc.formToJSON=e=>Ol(al.isHTMLForm(e)?new FormData(e):e),Cc.getAdapter=pc,Cc.HttpStatusCode=Oc,Cc.default=Cc;const Ac=Cc,Ec={}.VITE_API_URL||{}.VITE_API_BASE_URL||"http://127.0.0.1:8000/api",Pc=()=>{const e=[];if({}.VITE_API_URL&&e.push({}.VITE_API_URL),{}.VITE_API_BASE_URL&&e.push({}.VITE_API_BASE_URL),e.push("http://127.0.0.1:8000/api"),e.push("http://localhost:8000/api"),e.push("http://192.168.100.6:8000/api"),"undefined"!=typeof window){const t=window.location.hostname;/^\d+\.\d+\.\d+\.\d+$/.test(t)&&e.push(`http://${t}:8000/api`)}return Array.from(new Set(e))},Tc=e=>"ERR_NETWORK"===(null==e?void 0:e.code)||"Network Error"===(null==e?void 0:e.message);Ac.create({baseURL:Ec,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!1});const Mc=Ct.createContext(void 0),Dc="auth_current_user",Ic="auth_token",Rc=({children:e})=>{const[t,r]=Ct.useState(null),[n,a]=Ct.useState(!0);Ct.useEffect(()=>{const e=sessionStorage.getItem(Ic),t=sessionStorage.getItem(Dc);if(console.log("AuthContext: useEffect - checking stored auth data",{token:!!e,storedUser:!!t}),e&&t){const e=JSON.parse(t);console.log("AuthContext: Found stored user:",e),r(e)}a(!1);const n=()=>{console.log("AuthContext: Token expired event received, clearing user state"),r(null)};return window.addEventListener("auth:token-expired",n),()=>{window.removeEventListener("auth:token-expired",n)}},[]),Ct.useEffect(()=>{console.log("AuthContext: User state changed:",t)},[t]);return Ce.jsx(Mc.Provider,{value:{user:t,login:async(e,t,n)=>{var s,i,o;try{console.log("AuthContext: Starting login process"),a(!0),console.log("AuthContext: Calling API login");const i=await(async e=>{const t=Pc();let r=null;for(const a of t)try{return(await Ac.post(`${a}/login`,e,{headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!1})).data}catch(n){if(r=n,Tc(n))continue;throw n}throw r||new Error("Network Error")})({email:e,password:t,role:n});console.log("AuthContext: API response received:",i);const o=null==(s=i.user)?void 0:s.role;console.log("AuthContext: Raw role from API:",o,"Type:",typeof o);const l=("string"==typeof o?o:(null==o?void 0:o.value)??String(o||"customer")).toLowerCase();console.log("AuthContext: Normalized role:",l);const c={...i.user,role:l};return sessionStorage.setItem(Ic,i.token),sessionStorage.setItem(Dc,JSON.stringify(c)),console.log("AuthContext: Auth data stored in sessionStorage"),console.log("AuthContext: Setting user state to:",c),r(c),console.log("AuthContext: User state updated"),c}catch(l){throw console.error("AuthContext: Login error:",l),(null==(o=null==(i=l.response)?void 0:i.data)?void 0:o.message)?new Error(l.response.data.message):l.message?new Error(l.message):new Error("Login failed. Please try again.")}finally{console.log("AuthContext: Setting isLoading to false"),a(!1)}},logout:async()=>{try{await(async()=>{const e=sessionStorage.getItem("auth_token");if(!e)return;const t=Pc();for(const n of t)try{return void(await Ac.post(`${n}/logout`,{},{headers:{Authorization:`Bearer ${e}`},withCredentials:!1}))}catch(r){if(Tc(r))continue;return}})()}catch(e){console.error("Logout API error:",e)}finally{sessionStorage.removeItem(Ic),sessionStorage.removeItem(Dc),r(null)}},register:async(e,t,n,s,i,o)=>{var l,c,d,u,h;try{if(a(!0),!(e=>e.length>=8)(n))throw new Error("Password must be at least 8 characters long.");if(n!==s)throw new Error("Passwords do not match. Please try again.");const c=await(async e=>{const t=Pc();let r=null;for(const a of t)try{return(await Ac.post(`${a}/register`,e,{headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!1})).data}catch(n){if(r=n,Tc(n))continue;throw n}throw r||new Error("Network Error")})({name:e.trim(),email:t.toLowerCase().trim(),password:n,password_confirmation:s,role:i,...o?{branch_id:parseInt(o)}:{}});if(c.token){const e=null==(l=c.user)?void 0:l.role,t=("string"==typeof e?e:(null==e?void 0:e.value)??String(e||"customer")).toLowerCase(),n={...c.user,role:t};sessionStorage.setItem(Ic,c.token),sessionStorage.setItem(Dc,JSON.stringify(n)),r(n)}}catch(m){if(null==(d=null==(c=m.response)?void 0:c.data)?void 0:d.message)throw new Error(m.response.data.message);if(null==(h=null==(u=m.response)?void 0:u.data)?void 0:h.errors){const e=m.response.data.errors,t=Object.values(e)[0];throw new Error(Array.isArray(t)?t[0]:t)}throw m.message?new Error(m.message):new Error("Registration failed. Please try again.")}finally{a(!1)}},isLoading:n},children:e})},Lc=()=>{const e=Ct.useContext(Mc);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},Fc={}.VITE_API_URL||"http://127.0.0.1:8000/api",Bc=Ct.createContext(void 0),qc=()=>{const e=Ct.useContext(Bc);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e},$c=({children:e})=>{const[t,r]=Ct.useState([]),[n,a]=Ct.useState(0),[s,i]=Ct.useState(!1),[o,l]=Ct.useState(null),{user:c}=Lc(),d=Ct.useCallback(async()=>{var e,t,n;if(c)try{i(!0),l(null);const e=await(async e=>{const t=sessionStorage.getItem("auth_token");if(console.log("Notification API: Token from sessionStorage:",t?"Present":"Missing"),!t)throw new Error("No authentication token found");return(await Ac.get(`${Fc}/notifications`,{headers:{Authorization:`Bearer ${t}`},params:e})).data})({per_page:20});r(e.notifications),a(e.unread_count)}catch(s){console.error("Failed to fetch notifications:",s),401===(null==(e=s.response)?void 0:e.status)?(console.log("Token expired or invalid, clearing auth data"),sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_current_user"),r([]),a(0),l(null)):l((null==(n=null==(t=s.response)?void 0:t.data)?void 0:n.message)||"Failed to fetch notifications")}finally{i(!1)}},[c]),u=Ct.useCallback(async()=>{var e;if(c)try{const e=await(async()=>{const e=sessionStorage.getItem("auth_token");if(console.log("Notification API: Token from sessionStorage:",e?"Present":"Missing"),!e)throw new Error("No authentication token found");return(await Ac.get(`${Fc}/notifications/unread-count`,{headers:{Authorization:`Bearer ${e}`}})).data})();a(e.unread_count)}catch(t){console.error("Failed to fetch unread count:",t),401===(null==(e=t.response)?void 0:e.status)&&(console.log("Token expired or invalid, clearing auth data"),sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_current_user"),a(0),r([]))}},[c]),h=Ct.useCallback(async e=>{var t,n;try{await(async e=>{const t=sessionStorage.getItem("auth_token");await Ac.put(`${Fc}/notifications/${e}/read`,{},{headers:{Authorization:t?`Bearer ${t}`:""}})})(e),r(t=>t.map(t=>t.id===e?{...t,status:"read",read_at:(new Date).toISOString()}:t)),a(e=>Math.max(0,e-1))}catch(s){console.error("Failed to mark notification as read:",s),l((null==(n=null==(t=s.response)?void 0:t.data)?void 0:n.message)||"Failed to mark notification as read")}},[]),m=Ct.useCallback(async()=>{var e,t;try{await(async()=>{const e=sessionStorage.getItem("auth_token");return(await Ac.put(`${Fc}/notifications/mark-all-read`,{},{headers:{Authorization:e?`Bearer ${e}`:""}})).data})();r(e=>e.map(e=>({...e,status:"read",read_at:(new Date).toISOString()}))),a(0)}catch(n){console.error("Failed to mark all notifications as read:",n),l((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to mark all notifications as read")}},[]),p=Ct.useCallback(async()=>{await Promise.all([d(),u()])},[d,u]);Ct.useEffect(()=>{if(c){const e=setTimeout(()=>{d()},100),t=setInterval(u,3e4);return()=>{clearTimeout(e),clearInterval(t)}}r([]),a(0)},[c,d,u]);const f={notifications:t,unreadCount:n,loading:s,error:o,fetchNotifications:d,fetchUnreadCount:u,markNotificationAsRead:h,markAllNotificationsAsRead:m,refreshNotifications:p};return Ce.jsx(Bc.Provider,{value:f,children:e})};let zc=!1;Ac.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));const Uc=({children:e,allowedRoles:t})=>{const{user:r,isLoading:n}=Lc();if(console.log("ProtectedRoute: Checking access",{user:r?{id:r.id,role:r.role,name:r.name}:null,isLoading:n,allowedRoles:t}),n)return console.log("ProtectedRoute: Still loading, showing loading indicator"),Ce.jsx("div",{children:"Loading..."});if(!r)return console.log("ProtectedRoute: No user, redirecting to login"),Ce.jsx(Mt,{to:"/login",replace:!0});console.log("ProtectedRoute: User role:",r.role,"Type:",typeof r.role,"Allowed roles:",t);const a=String(r.role).toLowerCase(),s=t.map(e=>String(e).toLowerCase());return console.log("ProtectedRoute: Normalized user role:",a,"Normalized allowed roles:",s),s.includes(a)?(console.log("ProtectedRoute: Access granted, rendering children"),Ce.jsx(Ce.Fragment,{children:e})):(console.log("ProtectedRoute: Role not authorized, redirecting to user dashboard"),Ce.jsx(Mt,{to:`/${r.role}/dashboard`,replace:!0}))};function Vc(...e){return is(Vr(e))}const Wc=Kr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",admin:"bg-admin text-admin-foreground hover:bg-admin/90 shadow-lg",staff:"bg-staff text-staff-foreground hover:bg-staff/90 shadow-lg",optometrist:"bg-optometrist text-optometrist-foreground hover:bg-optometrist/90 shadow-lg",customer:"bg-customer text-customer-foreground hover:bg-customer/90 shadow-lg"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Hc=Ct.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},s)=>{const i=n?Ye:"button";return Ce.jsx(i,{className:Vc(Wc({variant:t,size:r,className:e})),ref:s,...a})});function Kc(...e){return is(Vr(e))}Hc.displayName="Button";const Yc=Ct.forwardRef(({className:e,type:t,...r},n)=>Ce.jsx("input",{type:t,className:Kc("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));Yc.displayName="Input";var Gc=Ct.forwardRef((e,t)=>Ce.jsx(Ae.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Gc.displayName="Label";var Xc=Gc;function Qc(...e){return is(Vr(e))}const Jc=Kr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Zc=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(Xc,{ref:r,className:Qc(Jc(),e),...t}));function ed(...e){return is(Vr(e))}Zc.displayName=Xc.displayName;const td=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("div",{ref:r,className:ed("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));td.displayName="Card";const rd=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("div",{ref:r,className:ed("flex flex-col space-y-1.5 p-6",e),...t}));rd.displayName="CardHeader";const nd=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("h3",{ref:r,className:ed("text-2xl font-semibold leading-none tracking-tight",e),...t}));nd.displayName="CardTitle";const ad=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("p",{ref:r,className:ed("text-sm text-muted-foreground",e),...t}));ad.displayName="CardDescription";const sd=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("div",{ref:r,className:ed("p-6 pt-0",e),...t}));sd.displayName="CardContent";const id=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("div",{ref:r,className:ed("flex items-center p-6 pt-0",e),...t}));id.displayName="CardFooter";const od=()=>{const[e,t]=Ct.useState(""),[r,n]=Ct.useState(""),[a,s]=Ct.useState(!1),[i,o]=Ct.useState("customer"),[l,c]=Ct.useState(!1),{login:d,user:u}=Lc(),h=Dt(),{toast:m}=Jt();return Ct.useEffect(()=>{if(u&&"/login"===window.location.pathname){const e=String(u.role).toLowerCase();console.log("Login useEffect: User already logged in, user role:",u.role),console.log("Login useEffect: Redirecting to:",`/${e}/dashboard`),h(`/${e}/dashboard`,{replace:!0})}},[u,h]),Ce.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:[Ce.jsx("div",{className:"absolute top-4 right-4",children:Ce.jsx(Hc,{variant:"outline",asChild:!0,children:Ce.jsxs(It,{to:"/faq",children:[Ce.jsx(Cn,{className:"h-4 w-4 mr-2"}),"FAQ"]})})}),Ce.jsxs(td,{className:"w-full max-w-sm shadow-sm border border-gray-200",children:[Ce.jsxs(rd,{className:"text-center pb-6",children:[Ce.jsx(nd,{className:"text-xl font-semibold text-gray-900",children:"Sign In"}),Ce.jsx(ad,{className:"text-gray-600",children:"Access your account"})]}),Ce.jsxs(sd,{className:"px-6 pb-6",children:[Ce.jsxs("form",{onSubmit:async t=>{var n,a;t.preventDefault(),c(!0);try{console.log("Starting login with:",{email:e,password:r,role:i});const t=await d(e,r,i);console.log("Login response (normalized):",t);const n=null==t?void 0:t.role,a=n?String(n).toLowerCase():String(i).toLowerCase();console.log("Role from API response:",n),console.log("Selected role in form:",i),console.log("Final role name:",a),m({title:"Login successful",description:`Welcome back! Redirecting to your ${a} dashboard.`});const s=a;console.log("Destination role:",s),console.log("Navigating to:",`/${s}/dashboard`),console.log("Navigating immediately to:",`/${s}/dashboard`),h(`/${s}/dashboard`,{replace:!0})}catch(s){console.error("Login error:",s);const e=null==(a=null==(n=null==s?void 0:s.response)?void 0:n.data)?void 0:a.message;m({title:"Login failed",description:"Account pending admin approval"===e?"Your account is pending admin approval. Please try again later.":s instanceof Error?s.message:"Please check your credentials and try again.",variant:"destructive"})}finally{c(!1)}},className:"space-y-4",children:[Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsx(Zc,{htmlFor:"role",className:"text-sm text-gray-700",children:"Role"}),Ce.jsxs("select",{id:"role",className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:i,onChange:e=>o(e.target.value),children:[Ce.jsx("option",{value:"customer",children:"Customer"}),Ce.jsx("option",{value:"staff",children:"Staff"}),Ce.jsx("option",{value:"optometrist",children:"Optometrist"}),Ce.jsx("option",{value:"admin",children:"Admin"})]})]}),Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsx(Zc,{htmlFor:"email",className:"text-sm text-gray-700",children:"Email"}),Ce.jsx(Yc,{id:"email",type:"email",placeholder:"Enter your email",value:e,onChange:e=>t(e.target.value),className:"w-full",required:!0})]}),Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsx(Zc,{htmlFor:"password",className:"text-sm text-gray-700",children:"Password"}),Ce.jsxs("div",{className:"relative",children:[Ce.jsx(Yc,{id:"password",type:a?"text":"password",placeholder:"Enter your password",value:r,onChange:e=>n(e.target.value),className:"w-full pr-10",required:!0}),Ce.jsx("button",{type:"button",onClick:()=>s(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?Ce.jsx(jn,{className:"h-4 w-4"}):Ce.jsx(wn,{className:"h-4 w-4"})})]})]}),Ce.jsx(Hc,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:l,children:l?"Signing in...":"Sign In"})]}),Ce.jsxs("div",{className:"mt-6 text-center text-sm",children:[Ce.jsx("span",{className:"text-gray-600",children:"Don't have an account? "}),Ce.jsx(It,{to:"/register",className:"text-blue-600 hover:text-blue-700",children:"Sign up"})]})]})]})]})},ld=()=>{const[e,t]=Ct.useState(""),[r,n]=Ct.useState(""),[a,s]=Ct.useState(""),[i,o]=Ct.useState(""),[l,c]=Ct.useState(!1),[d,u]=Ct.useState(!1),[h,m]=Ct.useState(!1),{register:p,user:f}=Lc(),x=Dt(),{toast:y}=Jt();return Ce.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:[Ce.jsx("div",{className:"absolute top-4 right-4",children:Ce.jsx(Hc,{variant:"outline",asChild:!0,children:Ce.jsxs(It,{to:"/faq",children:[Ce.jsx(Cn,{className:"h-4 w-4 mr-2"}),"FAQ"]})})}),Ce.jsxs(td,{className:"w-full max-w-sm shadow-sm border border-gray-200",children:[Ce.jsxs(rd,{className:"text-center pb-6",children:[Ce.jsx(nd,{className:"text-xl font-semibold text-gray-900",children:"Create Account"}),Ce.jsx(ad,{className:"text-gray-600",children:"Create your customer account"})]}),Ce.jsxs(sd,{className:"px-6 pb-6",children:[Ce.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),a===i){m(!0);try{await p(e,r,a,i,"customer",void 0),y({title:"Registration successful",description:"Welcome! Redirecting to your customer dashboard."}),x("/customer/dashboard")}catch(n){y({title:"Registration failed",description:n instanceof Error?n.message:"Please try again.",variant:"destructive"})}finally{m(!1)}}else y({title:"Password mismatch",description:"Passwords do not match. Please try again.",variant:"destructive"})},className:"space-y-4",children:[Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsx(Zc,{htmlFor:"name",className:"text-sm text-gray-700",children:"Full Name"}),Ce.jsx(Yc,{id:"name",type:"text",placeholder:"Enter your full name",value:e,onChange:e=>t(e.target.value),className:"w-full",required:!0})]}),Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsx(Zc,{htmlFor:"email",className:"text-sm text-gray-700",children:"Email"}),Ce.jsx(Yc,{id:"email",type:"email",placeholder:"Enter your email",value:r,onChange:e=>n(e.target.value),className:"w-full",required:!0})]}),Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsx(Zc,{htmlFor:"password",className:"text-sm text-gray-700",children:"Password"}),Ce.jsxs("div",{className:"relative",children:[Ce.jsx(Yc,{id:"password",type:l?"text":"password",placeholder:"Create a password",value:a,onChange:e=>s(e.target.value),className:"w-full pr-10",required:!0}),Ce.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?Ce.jsx(jn,{className:"h-4 w-4"}):Ce.jsx(wn,{className:"h-4 w-4"})})]})]}),Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsx(Zc,{htmlFor:"confirmPassword",className:"text-sm text-gray-700",children:"Confirm Password"}),Ce.jsxs("div",{className:"relative",children:[Ce.jsx(Yc,{id:"confirmPassword",type:d?"text":"password",placeholder:"Confirm your password",value:i,onChange:e=>o(e.target.value),className:"w-full pr-10",required:!0}),Ce.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d?Ce.jsx(jn,{className:"h-4 w-4"}):Ce.jsx(wn,{className:"h-4 w-4"})})]})]}),Ce.jsx(Hc,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:h,children:h?"Creating account...":"Create Account"})]}),Ce.jsxs("div",{className:"mt-6 text-center text-sm",children:[Ce.jsx("span",{className:"text-gray-600",children:"Already have an account? "}),Ce.jsx(It,{to:"/login",className:"text-blue-600 hover:text-blue-700",children:"Sign in"})]}),Ce.jsxs("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded text-sm text-gray-600",children:[Ce.jsx("strong",{children:"For Staff & Optometrists:"})," Employee accounts are managed by administrators. Contact your administrator for account access."]})]})]})]})};var cd={exports:{}},dd={},ud=Ct;var hd="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},md=ud.useState,pd=ud.useEffect,fd=ud.useLayoutEffect,xd=ud.useDebugValue;function yd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!hd(e,r)}catch(n){return!0}}var vd="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=md({inst:{value:r,getSnapshot:t}}),a=n[0].inst,s=n[1];return fd(function(){a.value=r,a.getSnapshot=t,yd(a)&&s({inst:a})},[e,r,t]),pd(function(){return yd(a)&&s({inst:a}),e(function(){yd(a)&&s({inst:a})})},[e]),xd(r),r};dd.useSyncExternalStore=void 0!==ud.useSyncExternalStore?ud.useSyncExternalStore:vd,cd.exports=dd;var gd=cd.exports;function bd(){return()=>{}}var jd="Avatar",[wd,Nd]=Pe(jd),[Sd,_d]=wd(jd),kd=Ct.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,s]=Ct.useState("idle");return Ce.jsx(Sd,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:s,children:Ce.jsx(Ae.span,{...n,ref:t})})});kd.displayName=jd;var Od="AvatarImage",Cd=Ct.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...s}=e,i=_d(Od,r),o=function(e,{referrerPolicy:t,crossOrigin:r}){const n=gd.useSyncExternalStore(bd,()=>!0,()=>!1),a=Ct.useRef(null),s=n?(a.current||(a.current=new window.Image),a.current):null,[i,o]=Ct.useState(()=>Pd(s,e));return qe(()=>{o(Pd(s,e))},[s,e]),qe(()=>{const e=e=>()=>{o(e)};if(!s)return;const n=e("loaded"),a=e("error");return s.addEventListener("load",n),s.addEventListener("error",a),t&&(s.referrerPolicy=t),"string"==typeof r&&(s.crossOrigin=r),()=>{s.removeEventListener("load",n),s.removeEventListener("error",a)}},[s,r,t]),i}(n,s),l=Re(e=>{a(e),i.onImageLoadingStatusChange(e)});return qe(()=>{"idle"!==o&&l(o)},[o,l]),"loaded"===o?Ce.jsx(Ae.img,{...s,ref:t,src:n}):null});Cd.displayName=Od;var Ad="AvatarFallback",Ed=Ct.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,s=_d(Ad,r),[i,o]=Ct.useState(void 0===n);return Ct.useEffect(()=>{if(void 0!==n){const e=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(e)}},[n]),i&&"loaded"!==s.imageLoadingStatus?Ce.jsx(Ae.span,{...a,ref:t}):null});function Pd(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}Ed.displayName=Ad;var Td=kd,Md=Cd,Dd=Ed;function Id(...e){return is(Vr(e))}const Rd=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(Td,{ref:r,className:Id("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Rd.displayName=Td.displayName;const Ld=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(Md,{ref:r,className:Id("aspect-square h-full w-full",e),...t}));Ld.displayName=Md.displayName;const Fd=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(Dd,{ref:r,className:Id("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));function Bd(...e){return is(Vr(e))}Fd.displayName=Dd.displayName;const qd=st,$d=it;Ct.forwardRef(({className:e,inset:t,children:r,...n},a)=>Ce.jsxs(Ge,{ref:a,className:Bd("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,Ce.jsx(pn,{className:"ml-auto h-4 w-4"})]})).displayName=Ge.displayName;Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(Xe,{ref:r,className:Bd("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=Xe.displayName;const zd=Ct.forwardRef(({className:e,sideOffset:t=4,...r},n)=>Ce.jsx(Qe,{children:Ce.jsx(Je,{ref:n,sideOffset:t,className:Bd("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));zd.displayName=Je.displayName;const Ud=Ct.forwardRef(({className:e,inset:t,...r},n)=>Ce.jsx(Ze,{ref:n,className:Bd("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));Ud.displayName=Ze.displayName;Ct.forwardRef(({className:e,children:t,checked:r,...n},a)=>Ce.jsxs(et,{ref:a,className:Bd("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[Ce.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Ce.jsx(tt,{children:Ce.jsx(hn,{className:"h-4 w-4"})})}),t]})).displayName=et.displayName;Ct.forwardRef(({className:e,children:t,...r},n)=>Ce.jsxs(rt,{ref:n,className:Bd("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[Ce.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Ce.jsx(tt,{children:Ce.jsx(xn,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=rt.displayName;const Vd=Ct.forwardRef(({className:e,inset:t,...r},n)=>Ce.jsx(nt,{ref:n,className:Bd("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));Vd.displayName=nt.displayName;const Wd=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(at,{ref:r,className:Bd("-mx-1 my-1 h-px bg-muted",e),...t}));function Hd(...e){return is(Vr(e))}Wd.displayName=at.displayName;const Kd=Kr("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Yd({className:e,variant:t,...r}){return Ce.jsx("div",{className:Hd(Kd({variant:t}),e),...r})}function Gd(...e){return is(Vr(e))}const Xd=()=>{const{user:e}=Lc(),t=Rt();if(!e)return null;const r=(n=e.role,{customer:[{title:"Dashboard",href:"/customer/dashboard",icon:Xr,description:"Overview and quick actions"},{title:"Appointments",href:"/customer/appointments",icon:ln,description:"View and manage appointments"},{title:"Vision History",href:"/customer/history",icon:wn,description:"View your vision records"},{title:"Prescriptions",href:"/customer/prescriptions",icon:Sn,description:"Digital prescriptions"},{title:"Products",href:"/customer/products",icon:Jn,description:"Browse eye care products"},{title:"Receipts",href:"/customer/receipts",icon:Kn,description:"View and download receipts"},{title:"Feedback",href:"/customer/feedback",icon:ea,description:"Share your experience"},{title:"Notifications",href:"/customer/notifications",icon:an,description:"Reminders and updates"},{title:"Profile",href:"/customer/profile",icon:ca,description:"View your profile and branch info"}],optometrist:[{title:"Dashboard",href:"/optometrist/dashboard",icon:Xr,description:"Daily overview"},{title:"Today's Appointments",href:"/optometrist/appointments",icon:yn,description:"View scheduled appointments"},{title:"Patient History",href:"/optometrist/patients",icon:ua,description:"Medical records"},{title:"Prescriptions",href:"/optometrist/prescriptions",icon:Sn,description:"Create and manage prescriptions"},{title:"My Schedule",href:"/optometrist/schedule",icon:ln,description:"View weekly rotation schedule"},{title:"Notifications",href:"/optometrist/notifications",icon:an,description:"View and manage notifications"},{title:"Profile",href:"/optometrist/profile",icon:ca,description:"View your profile and branch info"}],staff:[{title:"Dashboard",href:"/staff/dashboard",icon:Xr,description:"Clinic overview"},{title:"Appointments",href:"/staff/appointments",icon:ln,description:"Manage appointments"},{title:"Reservations & Transactions",href:"/staff/reservations",icon:rn,description:"Customer reservations, transactions, and receipts"},{title:"Inventory",href:"/staff/inventory",icon:Fn,description:"Stock management"},{title:"Patients",href:"/staff/patients",icon:la,description:"Patient management"},{title:"Notifications",href:"/staff/notifications",icon:an,description:"Send notifications"},{title:"Profile",href:"/staff/profile",icon:ca,description:"View your profile and branch info"}],admin:[{title:"Dashboard",href:"/admin/dashboard",icon:nn,description:"Analytics overview"},{title:"Analytics",href:"/admin/analytics",icon:sa,description:"Sales and performance"},{title:"User Management",href:"/admin/users",icon:ua,description:"Manage users and roles"},{title:"Branch Management",href:"/admin/branches",icon:sn,description:"Manage branch locations"},{title:"Inventory",href:"/admin/inventory",icon:Fn,description:"Multi-branch inventory"},{title:"Product Gallery Management",href:"/admin/products",icon:Jn,description:"Manage eye care products"},{title:"Employee Schedule Management",href:"/admin/employee-schedules",icon:ln,description:"Manage all employee schedules across branches"},{title:"Profile",href:"/admin/profile",icon:ca,description:"View your profile and branch info"}]}[n]||[]);var n;const a=e=>({customer:"border-l-customer bg-customer/5",optometrist:"border-l-optometrist bg-optometrist/5",staff:"border-l-staff bg-staff/5",admin:"border-l-admin bg-admin/5"}[e]);return Ce.jsx("aside",{className:"w-64 bg-white border-r border-slate-200 min-h-screen",children:Ce.jsx("nav",{className:"p-4 space-y-2",children:r.map(r=>{const n=t.pathname===r.href;return Ce.jsxs(Lt,{to:r.href,className:Gd("flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200","hover:bg-slate-50 group",n&&["border-l-4",a(e.role),"text-slate-900 font-semibold"],!n&&"text-slate-600 hover:text-slate-900"),children:[Ce.jsx(r.icon,{className:Gd("h-5 w-5 transition-colors",n?"text-slate-700":"text-slate-500 group-hover:text-slate-700")}),Ce.jsxs("div",{className:"flex-1",children:[Ce.jsx("div",{children:r.title}),r.description&&Ce.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:r.description})]})]},r.href)})})})};function Qd(e){return(Qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jd(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Zd(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function eu(e){Zd(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===Qd(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}var tu={};function ru(){return tu}function nu(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function au(e,t){Zd(2,arguments);var r=eu(e),n=eu(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function su(e){if(Zd(1,arguments),!function(e){return Zd(1,arguments),e instanceof Date||"object"===Qd(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!=typeof e)return!1;var t=eu(e);return!isNaN(Number(t))}var iu={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function ou(e){Zd(1,arguments);var t=eu(e);return function(e){Zd(1,arguments);var t=eu(e);return t.setHours(23,59,59,999),t}(t).getTime()===function(e){Zd(1,arguments);var t=eu(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}(t).getTime()}function lu(e,t){Zd(2,arguments);var r,n=eu(e),a=eu(t),s=au(n,a),i=Math.abs(function(e,t){Zd(2,arguments);var r=eu(e),n=eu(t);return 12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth())}(n,a));if(i<1)r=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);var o=au(n,a)===-s;ou(eu(e))&&1===i&&1===au(e,a)&&(o=!1),r=s*(i-Number(o))}return 0===r?0:r}function cu(e,t,r){Zd(2,arguments);var n,a=function(e,t){return Zd(2,arguments),eu(e).getTime()-eu(t).getTime()}(e,t)/1e3;return((n=null==r?void 0:r.roundingMethod)?iu[n]:iu.trunc)(a)}function du(e,t){return Zd(2,arguments),function(e,t){Zd(2,arguments);var r=eu(e).getTime(),n=Jd(t);return new Date(r+n)}(e,-Jd(t))}function uu(e){Zd(1,arguments);var t=eu(e),r=t.getUTCDay(),n=(r<1?7:0)+r-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function hu(e){Zd(1,arguments);var t=eu(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var a=uu(n),s=new Date(0);s.setUTCFullYear(r,0,4),s.setUTCHours(0,0,0,0);var i=uu(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function mu(e){Zd(1,arguments);var t=eu(e),r=uu(t).getTime()-function(e){Zd(1,arguments);var t=hu(e),r=new Date(0);return r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0),uu(r)}(t).getTime();return Math.round(r/6048e5)+1}function pu(e,t){var r,n,a,s,i,o,l,c;Zd(1,arguments);var d=ru(),u=Jd(null!==(r=null!==(n=null!==(a=null!==(s=null==t?void 0:t.weekStartsOn)&&void 0!==s?s:null==t||null===(i=t.locale)||void 0===i||null===(o=i.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==a?a:d.weekStartsOn)&&void 0!==n?n:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==r?r:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=eu(e),m=h.getUTCDay(),p=(m<u?7:0)+m-u;return h.setUTCDate(h.getUTCDate()-p),h.setUTCHours(0,0,0,0),h}function fu(e,t){var r,n,a,s,i,o,l,c;Zd(1,arguments);var d=eu(e),u=d.getUTCFullYear(),h=ru(),m=Jd(null!==(r=null!==(n=null!==(a=null!==(s=null==t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null==t||null===(i=t.locale)||void 0===i||null===(o=i.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==a?a:h.firstWeekContainsDate)&&void 0!==n?n:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==r?r:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(u+1,0,m),p.setUTCHours(0,0,0,0);var f=pu(p,t),x=new Date(0);x.setUTCFullYear(u,0,m),x.setUTCHours(0,0,0,0);var y=pu(x,t);return d.getTime()>=f.getTime()?u+1:d.getTime()>=y.getTime()?u:u-1}function xu(e,t){Zd(1,arguments);var r=eu(e),n=pu(r,t).getTime()-function(e,t){var r,n,a,s,i,o,l,c;Zd(1,arguments);var d=ru(),u=Jd(null!==(r=null!==(n=null!==(a=null!==(s=null==t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null==t||null===(i=t.locale)||void 0===i||null===(o=i.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==a?a:d.firstWeekContainsDate)&&void 0!==n?n:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==r?r:1),h=fu(e,t),m=new Date(0);return m.setUTCFullYear(h,0,u),m.setUTCHours(0,0,0,0),pu(m,t)}(r,t).getTime();return Math.round(n/6048e5)+1}function yu(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var vu={y:function(e,t){var r=e.getUTCFullYear(),n=r>0?r:1-r;return yu("yy"===t?n%100:n,t.length)},M:function(e,t){var r=e.getUTCMonth();return"M"===t?String(r+1):yu(r+1,2)},d:function(e,t){return yu(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:function(e,t){return yu(e.getUTCHours()%12||12,t.length)},H:function(e,t){return yu(e.getUTCHours(),t.length)},m:function(e,t){return yu(e.getUTCMinutes(),t.length)},s:function(e,t){return yu(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,n=e.getUTCMilliseconds();return yu(Math.floor(n*Math.pow(10,r-3)),t.length)}};const gu=vu;var bu="midnight",ju="noon",wu="morning",Nu="afternoon",Su="evening",_u="night",ku={G:function(e,t,r){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){var n=e.getUTCFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return gu.y(e,t)},Y:function(e,t,r,n){var a=fu(e,n),s=a>0?a:1-a;return"YY"===t?yu(s%100,2):"Yo"===t?r.ordinalNumber(s,{unit:"year"}):yu(s,t.length)},R:function(e,t){return yu(hu(e),t.length)},u:function(e,t){return yu(e.getUTCFullYear(),t.length)},Q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return yu(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return yu(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){var n=e.getUTCMonth();switch(t){case"M":case"MM":return gu.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return yu(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){var a=xu(e,n);return"wo"===t?r.ordinalNumber(a,{unit:"week"}):yu(a,t.length)},I:function(e,t,r){var n=mu(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):yu(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):gu.d(e,t)},D:function(e,t,r){var n=function(e){Zd(1,arguments);var t=eu(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=r-t.getTime();return Math.floor(n/864e5)+1}(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):yu(n,t.length)},E:function(e,t,r){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){var a=e.getUTCDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return yu(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){var a=e.getUTCDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return yu(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){var n=e.getUTCDay(),a=0===n?7:n;switch(t){case"i":return String(a);case"ii":return yu(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){var n,a=e.getUTCHours();switch(n=12===a?ju:0===a?bu:a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){var n,a=e.getUTCHours();switch(n=a>=17?Su:a>=12?Nu:a>=4?wu:_u,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return gu.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):gu.H(e,t)},K:function(e,t,r){var n=e.getUTCHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):yu(n,t.length)},k:function(e,t,r){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):yu(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):gu.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):gu.s(e,t)},S:function(e,t){return gu.S(e,t)},X:function(e,t,r,n){var a=(n._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return Cu(a);case"XXXX":case"XX":return Au(a);default:return Au(a,":")}},x:function(e,t,r,n){var a=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return Cu(a);case"xxxx":case"xx":return Au(a);default:return Au(a,":")}},O:function(e,t,r,n){var a=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ou(a,":");default:return"GMT"+Au(a,":")}},z:function(e,t,r,n){var a=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ou(a,":");default:return"GMT"+Au(a,":")}},t:function(e,t,r,n){var a=n._originalDate||e;return yu(Math.floor(a.getTime()/1e3),t.length)},T:function(e,t,r,n){return yu((n._originalDate||e).getTime(),t.length)}};function Ou(e,t){var r=e>0?"-":"+",n=Math.abs(e),a=Math.floor(n/60),s=n%60;if(0===s)return r+String(a);var i=t||"";return r+String(a)+i+yu(s,2)}function Cu(e,t){return e%60==0?(e>0?"-":"+")+yu(Math.abs(e)/60,2):Au(e,t)}function Au(e,t){var r=t||"",n=e>0?"-":"+",a=Math.abs(e);return n+yu(Math.floor(a/60),2)+r+yu(a%60,2)}const Eu=ku;var Pu=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Tu=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};const Mu={p:Tu,P:function(e,t){var r,n=e.match(/(P+)(p+)?/)||[],a=n[1],s=n[2];if(!s)return Pu(e,t);switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",Pu(a,t)).replace("{{time}}",Tu(s,t))}};var Du=["D","DD"],Iu=["YY","YYYY"];function Ru(e,t,r){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Lu={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const Fu=function(e,t,r){var n,a=Lu[e];return n="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!=r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Bu(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var qu={date:Bu({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Bu({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Bu({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var $u={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const zu=function(e,t,r,n){return $u[e]};function Uu(e){return function(t,r){var n;if("formatting"===(null!=r&&r.context?String(r.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,s=null!=r&&r.width?String(r.width):a;n=e.formattingValues[s]||e.formattingValues[a]}else{var i=e.defaultWidth,o=null!=r&&r.width?String(r.width):e.defaultWidth;n=e.values[o]||e.values[i]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function Vu(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;var i,o=s[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r;return}(l,function(e){return e.test(o)}):function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r;return}(l,function(e){return e.test(o)});return i=e.valueCallback?e.valueCallback(c):c,{value:i=r.valueCallback?r.valueCallback(i):i,rest:t.slice(o.length)}}}var Wu;const Hu={code:"en-US",formatDistance:Fu,formatLong:qu,formatRelative:zu,localize:{ordinalNumber:function(e,t){var r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:Uu({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Uu({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Uu({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Uu({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Uu({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Wu={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(Wu.matchPattern);if(!r)return null;var n=r[0],a=e.match(Wu.parsePattern);if(!a)return null;var s=Wu.valueCallback?Wu.valueCallback(a[0]):a[0];return{value:s=t.valueCallback?t.valueCallback(s):s,rest:e.slice(n.length)}}),era:Vu({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Vu({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Vu({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Vu({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Vu({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var Ku=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Yu=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Gu=/^'([^]*?)'?$/,Xu=/''/g,Qu=/[a-zA-Z]/;function Ju(e,t,r){var n,a,s,i,o,l,c,d,u,h,m,p,f,x,y,v,g,b;Zd(2,arguments);var j=String(t),w=ru(),N=null!==(n=null!==(a=null==r?void 0:r.locale)&&void 0!==a?a:w.locale)&&void 0!==n?n:Hu,S=Jd(null!==(s=null!==(i=null!==(o=null!==(l=null==r?void 0:r.firstWeekContainsDate)&&void 0!==l?l:null==r||null===(c=r.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==o?o:w.firstWeekContainsDate)&&void 0!==i?i:null===(u=w.locale)||void 0===u||null===(h=u.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==s?s:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var _=Jd(null!==(m=null!==(p=null!==(f=null!==(x=null==r?void 0:r.weekStartsOn)&&void 0!==x?x:null==r||null===(y=r.locale)||void 0===y||null===(v=y.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==f?f:w.weekStartsOn)&&void 0!==p?p:null===(g=w.locale)||void 0===g||null===(b=g.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==m?m:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!N.localize)throw new RangeError("locale must contain localize property");if(!N.formatLong)throw new RangeError("locale must contain formatLong property");var k=eu(e);if(!su(k))throw new RangeError("Invalid time value");var O=du(k,nu(k)),C={firstWeekContainsDate:S,weekStartsOn:_,locale:N,_originalDate:k},A=j.match(Yu).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,Mu[t])(e,N.formatLong):e}).join("").match(Ku).map(function(n){if("''"===n)return"'";var a=n[0];if("'"===a)return function(e){var t=e.match(Gu);if(!t)return e;return t[1].replace(Xu,"'")}(n);var s=Eu[a];if(s)return null!=r&&r.useAdditionalWeekYearTokens||!function(e){return-1!==Iu.indexOf(e)}(n)||Ru(n,t,String(e)),null!=r&&r.useAdditionalDayOfYearTokens||!function(e){return-1!==Du.indexOf(e)}(n)||Ru(n,t,String(e)),s(O,n,N.localize,C);if(a.match(Qu))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");return n}).join("");return A}function Zu(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}var eh=43200;function th(e,t,r){var n,a;Zd(2,arguments);var s=ru(),i=null!==(n=null!==(a=null==r?void 0:r.locale)&&void 0!==a?a:s.locale)&&void 0!==n?n:Hu;if(!i.formatDistance)throw new RangeError("locale must contain formatDistance property");var o=au(e,t);if(isNaN(o))throw new RangeError("Invalid time value");var l,c,d=Zu(Zu({},r),{addSuffix:Boolean(null==r?void 0:r.addSuffix),comparison:o});o>0?(l=eu(t),c=eu(e)):(l=eu(e),c=eu(t));var u,h=cu(c,l),m=(nu(c)-nu(l))/1e3,p=Math.round((h-m)/60);if(p<2)return null!=r&&r.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,d):h<10?i.formatDistance("lessThanXSeconds",10,d):h<20?i.formatDistance("lessThanXSeconds",20,d):h<40?i.formatDistance("halfAMinute",0,d):h<60?i.formatDistance("lessThanXMinutes",1,d):i.formatDistance("xMinutes",1,d):0===p?i.formatDistance("lessThanXMinutes",1,d):i.formatDistance("xMinutes",p,d);if(p<45)return i.formatDistance("xMinutes",p,d);if(p<90)return i.formatDistance("aboutXHours",1,d);if(p<1440){var f=Math.round(p/60);return i.formatDistance("aboutXHours",f,d)}if(p<2520)return i.formatDistance("xDays",1,d);if(p<eh){var x=Math.round(p/1440);return i.formatDistance("xDays",x,d)}if(p<86400)return u=Math.round(p/eh),i.formatDistance("aboutXMonths",u,d);if((u=lu(c,l))<12){var y=Math.round(p/eh);return i.formatDistance("xMonths",y,d)}var v=u%12,g=Math.floor(u/12);return v<3?i.formatDistance("aboutXYears",g,d):v<9?i.formatDistance("overXYears",g,d):i.formatDistance("almostXYears",g+1,d)}function rh(e,t){return Zd(1,arguments),th(e,Date.now(),t)}const nh=()=>{const[e,t]=Ct.useState(!1),r=Ct.useRef(null),{notifications:n,unreadCount:a,loading:s,markNotificationAsRead:i,markAllNotificationsAsRead:o,refreshNotifications:l}=qc();Ct.useEffect(()=>{const e=e=>{r.current&&!r.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const c=e=>{switch(e){case"appointment":return"📅";case"prescription":return"💊";case"inventory":return"📦";case"user_signup":return"👤";default:return"🔔"}},d=e=>{switch(e){case"appointment":return"text-blue-600";case"prescription":return"text-green-600";case"inventory":return"text-orange-600";case"user_signup":return"text-purple-600";default:return"text-gray-600"}};return Ce.jsxs("div",{className:"relative",ref:r,children:[Ce.jsxs("button",{onClick:()=>{t(!e),e||l()},className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full",children:[Ce.jsx(an,{className:"h-6 w-6"}),a>0&&Ce.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:a>99?"99+":a})]}),e&&Ce.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[Ce.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[Ce.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[a>0&&Ce.jsxs("button",{onClick:async()=>{await o()},className:"text-xs text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[Ce.jsx(cn,{className:"h-3 w-3"}),Ce.jsx("span",{children:"Mark all read"})]}),Ce.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600",children:Ce.jsx(pa,{className:"h-4 w-4"})})]})]}),Ce.jsx("div",{className:"max-h-96 overflow-y-auto",children:s?Ce.jsxs("div",{className:"px-4 py-8 text-center",children:[Ce.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),Ce.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading notifications..."})]}):0===n.length?Ce.jsxs("div",{className:"px-4 py-8 text-center",children:[Ce.jsx(an,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),Ce.jsx("p",{className:"text-gray-500",children:"No notifications yet"})]}):Ce.jsx("div",{className:"divide-y divide-gray-100",children:n.map(e=>Ce.jsx("div",{onClick:()=>(async e=>{"unread"===e.status&&await i(e.id)})(e),className:"px-4 py-3 hover:bg-gray-50 cursor-pointer transition-colors "+("unread"===e.status?"bg-blue-50":""),children:Ce.jsxs("div",{className:"flex items-start space-x-3",children:[Ce.jsx("div",{className:"flex-shrink-0",children:Ce.jsx("span",{className:"text-lg",children:c(e.type)})}),Ce.jsxs("div",{className:"flex-1 min-w-0",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsx("p",{className:`text-sm font-medium ${d(e.type)}`,children:e.title}),"unread"===e.status&&Ce.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),Ce.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.message}),Ce.jsx("p",{className:"text-xs text-gray-400 mt-1",children:rh(new Date(e.created_at),{addSuffix:!0})})]})]})},e.id))})}),n.length>0&&Ce.jsx("div",{className:"px-4 py-2 border-t border-gray-200 bg-gray-50",children:Ce.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Showing ",n.length," notifications"]})})]})]})},ah=()=>{const{user:e,logout:t}=Lc(),r=Dt();if(!e)return console.log("DashboardLayout: No user found, showing loading..."),Ce.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),Ce.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})});const n=(e.name||e.email||"").toString(),a=n.split(" ").filter(Boolean).map(e=>e[0]).join("").toUpperCase().slice(0,2);return Ce.jsxs("div",{className:"min-h-screen bg-slate-50",children:[Ce.jsxs("header",{className:"bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between sticky top-0 z-40 shadow-sm",children:[Ce.jsxs("div",{className:"flex items-center space-x-4",children:[Ce.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Optical Clinic Management"}),Ce.jsx(Yd,{className:(s=e.role,{customer:"bg-customer text-customer-foreground",optometrist:"bg-optometrist text-optometrist-foreground",staff:"bg-staff text-staff-foreground",admin:"bg-admin text-admin-foreground"}[s]),children:e.role.charAt(0).toUpperCase()+e.role.slice(1)})]}),Ce.jsxs("div",{className:"flex items-center space-x-4",children:[Ce.jsx(nh,{}),Ce.jsxs(qd,{children:[Ce.jsx($d,{asChild:!0,children:Ce.jsx(Hc,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:Ce.jsxs(Rd,{className:"h-8 w-8",children:[Ce.jsx(Ld,{src:e.avatar,alt:n}),Ce.jsx(Fd,{children:a})]})})}),Ce.jsxs(zd,{className:"w-56",align:"end",forceMount:!0,children:[Ce.jsx(Vd,{className:"font-normal",children:Ce.jsxs("div",{className:"flex flex-col space-y-1",children:[Ce.jsx("p",{className:"text-sm font-medium leading-none",children:e.name}),Ce.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email}),e.branch&&Ce.jsxs("p",{className:"text-xs leading-none text-muted-foreground",children:["Branch: ",e.branch.name]})]})}),Ce.jsx(Wd,{}),Ce.jsxs(Ud,{children:[Ce.jsx(da,{className:"mr-2 h-4 w-4"}),Ce.jsx("span",{children:"Profile"})]}),Ce.jsxs(Ud,{children:[Ce.jsx(Gn,{className:"mr-2 h-4 w-4"}),Ce.jsx("span",{children:"Settings"})]}),Ce.jsx(Wd,{}),Ce.jsxs(Ud,{onClick:()=>{t(),r("/login")},children:[Ce.jsx(Mn,{className:"mr-2 h-4 w-4"}),Ce.jsx("span",{children:"Log out"})]})]})]})]})]}),Ce.jsxs("div",{className:"flex",children:[Ce.jsx(Xd,{}),Ce.jsx("main",{className:"flex-1 p-6",children:Ce.jsx(Ft,{})})]})]});var s},sh={}.VITE_API_URL||"http://localhost:8000",ih=Ac.create({baseURL:sh,headers:{"Content-Type":"application/json",Accept:"application/json"}});ih.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const oh=e=>{const[t,r]=Ct.useState([]),[n,a]=Ct.useState(!1),[s,i]=Ct.useState(null),o=async()=>{var t,n;a(!0),i(null);try{const t=await(e=>ih.get("/api-mysql.php/appointments",{params:e}))(e);r(t.data.data||t.data||[])}catch(s){i((null==(n=null==(t=s.response)?void 0:t.data)?void 0:n.message)||"Failed to fetch appointments")}finally{a(!1)}};Ct.useEffect(()=>{o()},[JSON.stringify(e)]);return{appointments:t,loading:n,error:s,refetch:()=>o()}},lh=()=>{const[e,t]=Ct.useState(!1),[r,n]=Ct.useState(null);return{create:async e=>{var r,a;t(!0),n(null);try{const t=await(e=>ih.post("/api-mysql.php/appointments",e))(e);return t.data}catch(s){throw n((null==(a=null==(r=s.response)?void 0:r.data)?void 0:a.message)||"Failed to create appointment"),s}finally{t(!1)}},loading:e,error:r}},ch=()=>{const[e,t]=Ct.useState(!1),[r,n]=Ct.useState(null);return{update:async(e,r)=>{var a,s;t(!0),n(null);try{const t=await((e,t)=>ih.put(`/api-mysql.php/appointments/${e}`,t))(e,r);return t.data}catch(i){throw n((null==(s=null==(a=i.response)?void 0:a.data)?void 0:s.message)||"Failed to update appointment"),i}finally{t(!1)}},loading:e,error:r}},dh=()=>{const[e,t]=Ct.useState(!1),[r,n]=Ct.useState(null);return{remove:async e=>{var r,a;t(!0),n(null);try{await(e=>ih.delete(`/api-mysql.php/appointments/${e}`))(e)}catch(s){throw n((null==(a=null==(r=s.response)?void 0:r.data)?void 0:a.message)||"Failed to delete appointment"),s}finally{t(!1)}},loading:e,error:r}};function uh(...e){return is(Vr(e))}function hh({className:e,...t}){return Ce.jsx("div",{className:uh("animate-pulse rounded-md bg-muted",e),...t})}const mh=({notification:e,onDismiss:t})=>{const[r,n]=Ct.useState(!0),[a,s]=Ct.useState(!1),{toast:i}=Jt(),o=Dt(),l=e=>{switch(e){case"good":return"Good Condition";case"needs_fix":return"Needs Repair";case"needs_replacement":return"Needs Replacement";case"bad":return"Poor Condition";default:return e}};return r?Ce.jsxs(td,{className:`mb-4 animate-in slide-in-from-top-2 duration-300 ${(e=>{switch(e){case"good":return"border-green-200 bg-green-50";case"needs_fix":return"border-yellow-200 bg-yellow-50";case"needs_replacement":return"border-orange-200 bg-orange-50";case"bad":return"border-red-200 bg-red-50";default:return"border-blue-200 bg-blue-50"}})(e.condition)}`,children:[Ce.jsx(rd,{className:"pb-3",children:Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"flex items-center space-x-3",children:[(e=>{switch(e){case"good":return Ce.jsx(dn,{className:"h-5 w-5 text-green-500"});case"needs_fix":return Ce.jsx(ha,{className:"h-5 w-5 text-yellow-500"});case"needs_replacement":return Ce.jsx(Vn,{className:"h-5 w-5 text-orange-500"});case"bad":return Ce.jsx(Jr,{className:"h-5 w-5 text-red-500"});default:return Ce.jsx(wn,{className:"h-5 w-5 text-blue-500"})}})(e.condition),Ce.jsxs("div",{children:[Ce.jsxs(nd,{className:"text-lg flex items-center gap-2",children:["Eyewear Condition Assessment",Ce.jsx(Yd,{variant:"outline",className:"text-xs",children:l(e.condition)})]}),Ce.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[Ce.jsx(yn,{className:"h-3 w-3"}),"Assessed by ",e.assessed_by," • ",rh(new Date(e.assessment_date),{addSuffix:!0})]})]})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(Yd,{className:(e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.priority),children:e.priority.toUpperCase()}),Ce.jsx(Hc,{variant:"ghost",size:"sm",onClick:async()=>{n(!1);try{await fetch("/api/notifications/mark-read",{method:"POST",headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"},body:JSON.stringify({notification_id:e.id})}),null==t||t(e.id)}catch(r){console.error("Failed to mark notification as read:",r)}},children:Ce.jsx(pa,{className:"h-4 w-4"})})]})]})}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"space-y-3",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(wn,{className:"h-4 w-4 text-gray-500"}),Ce.jsx("span",{className:"font-medium",children:e.eyewear_label})]}),Ce.jsxs("div",{className:"text-sm text-gray-700 bg-white p-3 rounded-md border",children:[Ce.jsx("strong",{children:"Status:"})," ",l(e.condition),Ce.jsx("br",{}),Ce.jsx("strong",{children:"Action:"})," ",(e=>{switch(e){case"bad":return"Immediate attention required";case"needs_replacement":return"Replacement recommended";case"needs_fix":return"Repair recommended";case"good":return"No action needed";default:return""}})(e.condition)]}),e.notes&&Ce.jsxs("div",{className:"text-sm text-gray-700 bg-white p-3 rounded-md border",children:[Ce.jsx("strong",{children:"Notes:"})," ",e.notes]}),e.next_check_date&&Ce.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:[Ce.jsx(ln,{className:"h-3 w-3"}),Ce.jsx("strong",{children:"Next recommended check:"})," ",new Date(e.next_check_date).toLocaleDateString()]}),Ce.jsxs("div",{className:"flex space-x-2 pt-2",children:["good"!==e.condition&&Ce.jsx(Hc,{size:"sm",onClick:()=>{i({title:"Schedule Eyewear Check",description:"Redirecting to appointment booking..."}),o("/customer/appointments",{state:{prefill:{type:"follow_up",notes:`Eyewear condition check for ${e.eyewear_label}`}}})},children:"Schedule Check"}),Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>{s(!a)},children:a?"Less Details":"More Details"})]}),a&&Ce.jsxs("div",{className:"mt-3 p-3 bg-white rounded-md border",children:[Ce.jsx("h4",{className:"font-medium mb-2",children:"Assessment Details"}),Ce.jsxs("div",{className:"text-sm space-y-1",children:[Ce.jsxs("p",{children:[Ce.jsx("strong",{children:"Assessment Date:"})," ",new Date(e.assessment_date).toLocaleString()]}),Ce.jsxs("p",{children:[Ce.jsx("strong",{children:"Condition:"})," ",l(e.condition)]}),Ce.jsxs("p",{children:[Ce.jsx("strong",{children:"Priority:"})," ",e.priority]}),Ce.jsxs("p",{children:[Ce.jsx("strong",{children:"Assessed By:"})," ",e.assessed_by]}),e.next_check_date&&Ce.jsxs("p",{children:[Ce.jsx("strong",{children:"Next Check:"})," ",new Date(e.next_check_date).toLocaleDateString()]}),e.notes&&Ce.jsxs("p",{children:[Ce.jsx("strong",{children:"Notes:"})," ",e.notes]})]})]})]})})]}):null};function ph(...e){return is(Vr(e))}const fh=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("textarea",{className:ph("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));function xh(e,[t,r]){return Math.min(r,Math.max(t,e))}function yh(e){const t=Ct.useRef({value:e,previous:e});return Ct.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}fh.displayName="Textarea";var vh=[" ","Enter","ArrowUp","ArrowDown"],gh=[" ","Enter"],bh="Select",[jh,wh,Nh]=Ee(bh),[Sh,_h]=Pe(bh,[Nh,ze]),kh=ze(),[Oh,Ch]=Sh(bh),[Ah,Eh]=Sh(bh),Ph=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:s,value:i,defaultValue:o,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:h,required:m,form:p}=e,f=kh(t),[x,y]=Ct.useState(null),[v,g]=Ct.useState(null),[b,j]=Ct.useState(!1),w=mt(c),[N,S]=De({prop:n,defaultProp:a??!1,onChange:s,caller:bh}),[_,k]=De({prop:i,defaultProp:o,onChange:l,caller:bh}),O=Ct.useRef(null),C=!x||(p||!!x.closest("form")),[A,E]=Ct.useState(new Set),P=Array.from(A).map(e=>e.props.value).join(";");return Ce.jsx(pt,{...f,children:Ce.jsxs(Oh,{required:m,scope:t,trigger:x,onTriggerChange:y,valueNode:v,onValueNodeChange:g,valueNodeHasChildren:b,onValueNodeHasChildrenChange:j,contentId:ut(),value:_,onValueChange:k,open:N,onOpenChange:S,dir:w,triggerPointerDownPosRef:O,disabled:h,children:[Ce.jsx(jh.Provider,{scope:t,children:Ce.jsx(Ah,{scope:e.__scopeSelect,onNativeOptionAdd:Ct.useCallback(e=>{E(t=>new Set(t).add(e))},[]),onNativeOptionRemove:Ct.useCallback(e=>{E(t=>{const r=new Set(t);return r.delete(e),r})},[]),children:r})}),C?Ce.jsxs(ym,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:u,value:_,onChange:e=>k(e.target.value),disabled:h,form:p,children:[void 0===_?Ce.jsx("option",{value:""}):null,Array.from(A)]},P):null]})})};Ph.displayName=bh;var Th="SelectTrigger",Mh=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,s=kh(r),i=Ch(Th,r),o=i.disabled||n,l=Te(t,i.onTriggerChange),c=wh(r),d=Ct.useRef("touch"),[u,h,m]=gm(e=>{const t=c().filter(e=>!e.disabled),r=t.find(e=>e.value===i.value),n=bm(t,e,r);void 0!==n&&i.onValueChange(n.value)}),p=e=>{o||(i.onOpenChange(!0),m()),e&&(i.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return Ce.jsx(Ue,{asChild:!0,...s,children:Ce.jsx(Ae.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":vm(i.value)?"":void 0,...a,ref:l,onClick:Le(a.onClick,e=>{e.currentTarget.focus(),"mouse"!==d.current&&p(e)}),onPointerDown:Le(a.onPointerDown,e=>{d.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(p(e),e.preventDefault())}),onKeyDown:Le(a.onKeyDown,e=>{const t=""!==u.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),t&&" "===e.key||vh.includes(e.key)&&(p(),e.preventDefault())})})})});Mh.displayName=Th;var Dh="SelectValue",Ih=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:s,placeholder:i="",...o}=e,l=Ch(Dh,r),{onValueNodeHasChildrenChange:c}=l,d=void 0!==s,u=Te(t,l.onValueNodeChange);return qe(()=>{c(d)},[c,d]),Ce.jsx(Ae.span,{...o,ref:u,style:{pointerEvents:"none"},children:vm(l.value)?Ce.jsx(Ce.Fragment,{children:i}):s})});Ih.displayName=Dh;var Rh=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return Ce.jsx(Ae.span,{"aria-hidden":!0,...a,ref:t,children:n||"▼"})});Rh.displayName="SelectIcon";var Lh=e=>Ce.jsx(Be,{asChild:!0,...e});Lh.displayName="SelectPortal";var Fh="SelectContent",Bh=Ct.forwardRef((e,t)=>{const r=Ch(Fh,e.__scopeSelect),[n,a]=Ct.useState();if(qe(()=>{a(new DocumentFragment)},[]),!r.open){const t=n;return t?Ot.createPortal(Ce.jsx($h,{scope:e.__scopeSelect,children:Ce.jsx(jh.Slot,{scope:e.__scopeSelect,children:Ce.jsx("div",{children:e.children})})}),t):null}return Ce.jsx(Vh,{...e,ref:t})});Bh.displayName=Fh;var qh=10,[$h,zh]=Sh(Fh),Uh=ht("SelectContent.RemoveScroll"),Vh=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:s,onPointerDownOutside:i,side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:m,sticky:p,hideWhenDetached:f,avoidCollisions:x,...y}=e,v=Ch(Fh,r),[g,b]=Ct.useState(null),[j,w]=Ct.useState(null),N=Te(t,e=>b(e)),[S,_]=Ct.useState(null),[k,O]=Ct.useState(null),C=wh(r),[A,E]=Ct.useState(!1),P=Ct.useRef(!1);Ct.useEffect(()=>{if(g)return ot(g)},[g]),lt();const T=Ct.useCallback(e=>{const[t,...r]=C().map(e=>e.ref.current),[n]=r.slice(-1),a=document.activeElement;for(const s of e){if(s===a)return;if(null==s||s.scrollIntoView({block:"nearest"}),s===t&&j&&(j.scrollTop=0),s===n&&j&&(j.scrollTop=j.scrollHeight),null==s||s.focus(),document.activeElement!==a)return}},[C,j]),M=Ct.useCallback(()=>T([S,g]),[T,S,g]);Ct.useEffect(()=>{A&&M()},[A,M]);const{onOpenChange:D,triggerPointerDownPosRef:I}=v;Ct.useEffect(()=>{if(g){let e={x:0,y:0};const t=t=>{var r,n;e={x:Math.abs(Math.round(t.pageX)-((null==(r=I.current)?void 0:r.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(n=I.current)?void 0:n.y)??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():g.contains(r.target)||D(!1),document.removeEventListener("pointermove",t),I.current=null};return null!==I.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[g,D,I]),Ct.useEffect(()=>{const e=()=>D(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[D]);const[R,L]=gm(e=>{const t=C().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),n=bm(t,e,r);n&&setTimeout(()=>n.ref.current.focus())}),F=Ct.useCallback((e,t,r)=>{const n=!P.current&&!r;(void 0!==v.value&&v.value===t||n)&&(_(e),n&&(P.current=!0))},[v.value]),B=Ct.useCallback(()=>null==g?void 0:g.focus(),[g]),q=Ct.useCallback((e,t,r)=>{const n=!P.current&&!r;(void 0!==v.value&&v.value===t||n)&&O(e)},[v.value]),$="popper"===n?Hh:Wh,z=$===Hh?{side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:m,sticky:p,hideWhenDetached:f,avoidCollisions:x}:{};return Ce.jsx($h,{scope:r,content:g,viewport:j,onViewportChange:w,itemRefCallback:F,selectedItem:S,onItemLeave:B,itemTextRefCallback:q,focusSelectedItem:M,selectedItemText:k,position:n,isPositioned:A,searchRef:R,children:Ce.jsx(ct,{as:Uh,allowPinchZoom:!0,children:Ce.jsx(dt,{asChild:!0,trapped:v.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Le(a,e=>{var t;null==(t=v.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:Ce.jsx(Ve,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:Ce.jsx($,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:e=>e.preventDefault(),...y,...z,onPlaced:()=>E(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Le(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||L(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=C().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout(()=>T(t)),e.preventDefault()}})})})})})})});Vh.displayName="SelectContentImpl";var Wh=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,s=Ch(Fh,r),i=zh(Fh,r),[o,l]=Ct.useState(null),[c,d]=Ct.useState(null),u=Te(t,e=>d(e)),h=wh(r),m=Ct.useRef(!1),p=Ct.useRef(!0),{viewport:f,selectedItem:x,selectedItemText:y,focusSelectedItem:v}=i,g=Ct.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&c&&f&&x&&y){const e=s.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),r=s.valueNode.getBoundingClientRect(),a=y.getBoundingClientRect();if("rtl"!==s.dir){const n=a.left-t.left,s=r.left-n,i=e.left-s,l=e.width+i,c=Math.max(l,t.width),d=window.innerWidth-qh,u=xh(s,[qh,Math.max(qh,d-c)]);o.style.minWidth=l+"px",o.style.left=u+"px"}else{const n=t.right-a.right,s=window.innerWidth-r.right-n,i=window.innerWidth-e.right-s,l=e.width+i,c=Math.max(l,t.width),d=window.innerWidth-qh,u=xh(s,[qh,Math.max(qh,d-c)]);o.style.minWidth=l+"px",o.style.right=u+"px"}const i=h(),l=window.innerHeight-2*qh,d=f.scrollHeight,u=window.getComputedStyle(c),p=parseInt(u.borderTopWidth,10),v=parseInt(u.paddingTop,10),g=parseInt(u.borderBottomWidth,10),b=p+v+d+parseInt(u.paddingBottom,10)+g,j=Math.min(5*x.offsetHeight,b),w=window.getComputedStyle(f),N=parseInt(w.paddingTop,10),S=parseInt(w.paddingBottom,10),_=e.top+e.height/2-qh,k=l-_,O=x.offsetHeight/2,C=p+v+(x.offsetTop+O),A=b-C;if(C<=_){const e=i.length>0&&x===i[i.length-1].ref.current;o.style.bottom="0px";const t=c.clientHeight-f.offsetTop-f.offsetHeight,r=C+Math.max(k,O+(e?S:0)+t+g);o.style.height=r+"px"}else{const e=i.length>0&&x===i[0].ref.current;o.style.top="0px";const t=Math.max(_,p+f.offsetTop+(e?N:0)+O)+A;o.style.height=t+"px",f.scrollTop=C-_+f.offsetTop}o.style.margin=`${qh}px 0`,o.style.minHeight=j+"px",o.style.maxHeight=l+"px",null==n||n(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,o,c,f,x,y,s.dir,n]);qe(()=>g(),[g]);const[b,j]=Ct.useState();qe(()=>{c&&j(window.getComputedStyle(c).zIndex)},[c]);const w=Ct.useCallback(e=>{e&&!0===p.current&&(g(),null==v||v(),p.current=!1)},[g,v]);return Ce.jsx(Kh,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:w,children:Ce.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:Ce.jsx(Ae.div,{...a,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Wh.displayName="SelectItemAlignedPosition";var Hh=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=qh,...s}=e,i=kh(r);return Ce.jsx(We,{...i,...s,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Hh.displayName="SelectPopperPosition";var[Kh,Yh]=Sh(Fh,{}),Gh="SelectViewport",Xh=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,s=zh(Gh,r),i=Yh(Gh,r),o=Te(t,s.onViewportChange),l=Ct.useRef(0);return Ce.jsxs(Ce.Fragment,{children:[Ce.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),Ce.jsx(jh.Slot,{scope:r,children:Ce.jsx(Ae.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Le(a.onScroll,e=>{const t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=i;if((null==n?void 0:n.current)&&r){const e=Math.abs(l.current-t.scrollTop);if(e>0){const n=window.innerHeight-2*qh,a=parseFloat(r.style.minHeight),s=parseFloat(r.style.height),i=Math.max(a,s);if(i<n){const a=i+e,s=Math.min(n,a),o=a-s;r.style.height=s+"px","0px"===r.style.bottom&&(t.scrollTop=o>0?o:0,r.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});Xh.displayName=Gh;var Qh="SelectGroup",[Jh,Zh]=Sh(Qh);Ct.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=ut();return Ce.jsx(Jh,{scope:r,id:a,children:Ce.jsx(Ae.div,{role:"group","aria-labelledby":a,...n,ref:t})})}).displayName=Qh;var em="SelectLabel",tm=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Zh(em,r);return Ce.jsx(Ae.div,{id:a.id,...n,ref:t})});tm.displayName=em;var rm="SelectItem",[nm,am]=Sh(rm),sm=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:s,...i}=e,o=Ch(rm,r),l=zh(rm,r),c=o.value===n,[d,u]=Ct.useState(s??""),[h,m]=Ct.useState(!1),p=Te(t,e=>{var t;return null==(t=l.itemRefCallback)?void 0:t.call(l,e,n,a)}),f=ut(),x=Ct.useRef("touch"),y=()=>{a||(o.onValueChange(n),o.onOpenChange(!1))};if(""===n)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Ce.jsx(nm,{scope:r,value:n,disabled:a,textId:f,isSelected:c,onItemTextChange:Ct.useCallback(e=>{u(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:Ce.jsx(jh.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:Ce.jsx(Ae.div,{role:"option","aria-labelledby":f,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:p,onFocus:Le(i.onFocus,()=>m(!0)),onBlur:Le(i.onBlur,()=>m(!1)),onClick:Le(i.onClick,()=>{"mouse"!==x.current&&y()}),onPointerUp:Le(i.onPointerUp,()=>{"mouse"===x.current&&y()}),onPointerDown:Le(i.onPointerDown,e=>{x.current=e.pointerType}),onPointerMove:Le(i.onPointerMove,e=>{var t;x.current=e.pointerType,a?null==(t=l.onItemLeave)||t.call(l):"mouse"===x.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Le(i.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=l.onItemLeave)||t.call(l))}),onKeyDown:Le(i.onKeyDown,e=>{var t;""!==(null==(t=l.searchRef)?void 0:t.current)&&" "===e.key||(gh.includes(e.key)&&y()," "===e.key&&e.preventDefault())})})})})});sm.displayName=rm;var im="SelectItemText",om=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...s}=e,i=Ch(im,r),o=zh(im,r),l=am(im,r),c=Eh(im,r),[d,u]=Ct.useState(null),h=Te(t,e=>u(e),l.onItemTextChange,e=>{var t;return null==(t=o.itemTextRefCallback)?void 0:t.call(o,e,l.value,l.disabled)}),m=null==d?void 0:d.textContent,p=Ct.useMemo(()=>Ce.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:f,onNativeOptionRemove:x}=c;return qe(()=>(f(p),()=>x(p)),[f,x,p]),Ce.jsxs(Ce.Fragment,{children:[Ce.jsx(Ae.span,{id:l.textId,...s,ref:h}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Ot.createPortal(s.children,i.valueNode):null]})});om.displayName=im;var lm="SelectItemIndicator",cm=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return am(lm,r).isSelected?Ce.jsx(Ae.span,{"aria-hidden":!0,...n,ref:t}):null});cm.displayName=lm;var dm="SelectScrollUpButton",um=Ct.forwardRef((e,t)=>{const r=zh(dm,e.__scopeSelect),n=Yh(dm,e.__scopeSelect),[a,s]=Ct.useState(!1),i=Te(t,n.onScrollButtonChange);return qe(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;s(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?Ce.jsx(pm,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});um.displayName=dm;var hm="SelectScrollDownButton",mm=Ct.forwardRef((e,t)=>{const r=zh(hm,e.__scopeSelect),n=Yh(hm,e.__scopeSelect),[a,s]=Ct.useState(!1),i=Te(t,n.onScrollButtonChange);return qe(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,r=Math.ceil(t.scrollTop)<e;s(r)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?Ce.jsx(pm,{...e,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});mm.displayName=hm;var pm=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,s=zh("SelectScrollButton",r),i=Ct.useRef(null),o=wh(r),l=Ct.useCallback(()=>{null!==i.current&&(window.clearInterval(i.current),i.current=null)},[]);return Ct.useEffect(()=>()=>l(),[l]),qe(()=>{var e;const t=o().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[o]),Ce.jsx(Ae.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Le(a.onPointerDown,()=>{null===i.current&&(i.current=window.setInterval(n,50))}),onPointerMove:Le(a.onPointerMove,()=>{var e;null==(e=s.onItemLeave)||e.call(s),null===i.current&&(i.current=window.setInterval(n,50))}),onPointerLeave:Le(a.onPointerLeave,()=>{l()})})}),fm=Ct.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return Ce.jsx(Ae.div,{"aria-hidden":!0,...n,ref:t})});fm.displayName="SelectSeparator";var xm="SelectArrow";Ct.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=kh(r),s=Ch(xm,r),i=zh(xm,r);return s.open&&"popper"===i.position?Ce.jsx(He,{...a,...n,ref:t}):null}).displayName=xm;var ym=Ct.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=Ct.useRef(null),s=Te(n,a),i=yh(t);return Ct.useEffect(()=>{const e=a.current;if(!e)return;const r=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(r,"value").set;if(i!==t&&n){const r=new Event("change",{bubbles:!0});n.call(e,t),e.dispatchEvent(r)}},[i,t]),Ce.jsx(Ae.select,{...r,style:{...Zt,...r.style},ref:s,defaultValue:t})});function vm(e){return""===e||void 0===e}function gm(e){const t=Re(e),r=Ct.useRef(""),n=Ct.useRef(0),a=Ct.useCallback(e=>{const a=r.current+e;t(a),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(a)},[t]),s=Ct.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return Ct.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,s]}function bm(e,t,r){const n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let s=(i=e,o=Math.max(a,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===n.length&&(s=s.filter(e=>e!==r));const l=s.find(e=>e.textValue.toLowerCase().startsWith(n.toLowerCase()));return l!==r?l:void 0}ym.displayName="SelectBubbleInput";var jm=Mh,wm=Rh,Nm=Lh,Sm=Bh,_m=Xh,km=tm,Om=sm,Cm=om,Am=cm,Em=um,Pm=mm,Tm=fm;function Mm(...e){return is(Vr(e))}const Dm=Ph,Im=Ih,Rm=Ct.forwardRef(({className:e,children:t,...r},n)=>Ce.jsxs(jm,{ref:n,className:Mm("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,Ce.jsx(wm,{asChild:!0,children:Ce.jsx(mn,{className:"h-4 w-4 opacity-50"})})]}));Rm.displayName=jm.displayName;const Lm=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(Em,{ref:r,className:Mm("flex cursor-default items-center justify-center py-1",e),...t,children:Ce.jsx(fn,{className:"h-4 w-4"})}));Lm.displayName=Em.displayName;const Fm=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(Pm,{ref:r,className:Mm("flex cursor-default items-center justify-center py-1",e),...t,children:Ce.jsx(mn,{className:"h-4 w-4"})}));Fm.displayName=Pm.displayName;const Bm=Ct.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>Ce.jsx(Nm,{children:Ce.jsxs(Sm,{ref:a,className:Mm("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[Ce.jsx(Lm,{}),Ce.jsx(_m,{className:Mm("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),Ce.jsx(Fm,{})]})}));Bm.displayName=Sm.displayName;Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(km,{ref:r,className:Mm("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=km.displayName;const qm=Ct.forwardRef(({className:e,children:t,...r},n)=>Ce.jsxs(Om,{ref:n,className:Mm("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[Ce.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Ce.jsx(Am,{children:Ce.jsx(hn,{className:"h-4 w-4"})})}),Ce.jsx(Cm,{children:t})]}));qm.displayName=Om.displayName;Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(Tm,{ref:r,className:Mm("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=Tm.displayName;const $m=({reminder:e,onClose:t,onSubmit:r})=>{const{toast:n}=Jt(),[a,s]=Ct.useState(!1),[i,o]=Ct.useState({lens_clarity:"",frame_condition:"",eye_discomfort:"",remarks:""});return Ce.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Ce.jsxs(td,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto",children:[Ce.jsxs(rd,{className:"pb-3",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"urgent":return Ce.jsx(Jr,{className:"h-4 w-4 text-red-500"});case"high":return Ce.jsx(Jr,{className:"h-4 w-4 text-orange-500"});case"medium":return Ce.jsx(wn,{className:"h-4 w-4 text-yellow-500"});case"low":return Ce.jsx(dn,{className:"h-4 w-4 text-green-500"});default:return Ce.jsx(wn,{className:"h-4 w-4 text-blue-500"})}})(e.priority),Ce.jsx(nd,{className:"text-lg",children:"Eyewear Self-Check"})]}),Ce.jsx(Hc,{variant:"ghost",size:"sm",onClick:t,children:Ce.jsx(pa,{className:"h-4 w-4"})})]}),Ce.jsx(ad,{children:"Complete a quick self-assessment for your eyewear"})]}),Ce.jsxs(sd,{children:[Ce.jsxs("div",{className:`p-3 rounded-lg border mb-4 ${(e=>{switch(e){case"urgent":return"border-red-200 bg-red-50";case"high":return"border-orange-200 bg-orange-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-green-200 bg-green-50";default:return"border-blue-200 bg-blue-50"}})(e.priority)}`,children:[Ce.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ce.jsx(wn,{className:"h-4 w-4"}),Ce.jsx("span",{className:"font-medium",children:e.eyewear_label})]}),Ce.jsxs("div",{className:"text-sm text-gray-600",children:[Ce.jsxs("p",{children:["Last assessed: ",new Date(e.assessment_date).toLocaleDateString()]}),Ce.jsxs("p",{children:["Assessed by: ",e.assessed_by]}),e.is_overdue&&Ce.jsx("p",{className:"text-red-600 font-medium",children:"⚠️ This check is overdue"})]})]}),Ce.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),i.lens_clarity&&i.frame_condition&&i.eye_discomfort)try{s(!0),await r(i),n({title:"Success",description:"Self-check submitted successfully"}),t()}catch(a){n({title:"Error",description:a.message||"Failed to submit self-check",variant:"destructive"})}finally{s(!1)}else n({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"})},className:"space-y-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"lens_clarity",children:"How clear are your lenses?"}),Ce.jsxs(Dm,{value:i.lens_clarity,onValueChange:e=>o(t=>({...t,lens_clarity:e})),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select lens clarity"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"clear",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(dn,{className:"h-4 w-4 text-green-500"}),Ce.jsx("span",{children:"Clear - Perfect vision"})]})}),Ce.jsx(qm,{value:"slightly_blurry",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(wn,{className:"h-4 w-4 text-yellow-500"}),Ce.jsx("span",{children:"Slightly Blurry - Minor issues"})]})}),Ce.jsx(qm,{value:"blurry",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(Jr,{className:"h-4 w-4 text-orange-500"}),Ce.jsx("span",{children:"Blurry - Noticeable problems"})]})}),Ce.jsx(qm,{value:"very_blurry",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(Jr,{className:"h-4 w-4 text-red-500"}),Ce.jsx("span",{children:"Very Blurry - Major issues"})]})})]})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"frame_condition",children:"How is your frame condition?"}),Ce.jsxs(Dm,{value:i.frame_condition,onValueChange:e=>o(t=>({...t,frame_condition:e})),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select frame condition"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"excellent",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(dn,{className:"h-4 w-4 text-green-500"}),Ce.jsx("span",{children:"Excellent - Perfect condition"})]})}),Ce.jsx(qm,{value:"good",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(wn,{className:"h-4 w-4 text-green-500"}),Ce.jsx("span",{children:"Good - Minor wear"})]})}),Ce.jsx(qm,{value:"loose",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(Jr,{className:"h-4 w-4 text-yellow-500"}),Ce.jsx("span",{children:"Loose - Needs adjustment"})]})}),Ce.jsx(qm,{value:"damaged",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(Jr,{className:"h-4 w-4 text-red-500"}),Ce.jsx("span",{children:"Damaged - Needs repair"})]})})]})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"eye_discomfort",children:"Any eye discomfort?"}),Ce.jsxs(Dm,{value:i.eye_discomfort,onValueChange:e=>o(t=>({...t,eye_discomfort:e})),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select discomfort level"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"no",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(dn,{className:"h-4 w-4 text-green-500"}),Ce.jsx("span",{children:"No - No discomfort"})]})}),Ce.jsx(qm,{value:"mild",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(wn,{className:"h-4 w-4 text-yellow-500"}),Ce.jsx("span",{children:"Mild - Slight discomfort"})]})}),Ce.jsx(qm,{value:"moderate",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(Jr,{className:"h-4 w-4 text-orange-500"}),Ce.jsx("span",{children:"Moderate - Noticeable discomfort"})]})}),Ce.jsx(qm,{value:"severe",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(Jr,{className:"h-4 w-4 text-red-500"}),Ce.jsx("span",{children:"Severe - Significant discomfort"})]})})]})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"remarks",children:"Additional remarks (optional)"}),Ce.jsx(fh,{id:"remarks",value:i.remarks,onChange:e=>o(t=>({...t,remarks:e.target.value})),placeholder:"Any additional details about your eyewear condition...",rows:3})]}),Ce.jsx(Hc,{type:"submit",className:"w-full",disabled:a,children:a?Ce.jsxs(Ce.Fragment,{children:[Ce.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):Ce.jsxs(Ce.Fragment,{children:[Ce.jsx(dn,{className:"h-4 w-4 mr-2"}),"Submit Self-Check"]})})]})]})]})})},zm=({reminder:e,onDismiss:t,onSubmitSelfCheck:r,onScheduleAppointment:n})=>{Jt(),Dt();const[a,s]=Ct.useState(!1),[i,o]=Ct.useState(!1),[l,c]=Ct.useState(!0),d=()=>{c(!1),setTimeout(()=>{t(e.id)},300)};return l?Ce.jsxs(Ce.Fragment,{children:[Ce.jsxs(td,{className:`mb-4 animate-in slide-in-from-top-2 duration-300 ${(e=>{switch(e){case"urgent":return"border-red-200 bg-red-50";case"high":return"border-orange-200 bg-orange-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-green-200 bg-green-50";default:return"border-blue-200 bg-blue-50"}})(e.priority)}`,children:[Ce.jsx(rd,{className:"pb-3",children:Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"flex items-center space-x-3",children:[Ce.jsx(an,{className:"h-5 w-5 text-orange-500"}),Ce.jsxs("div",{children:[Ce.jsxs(nd,{className:"text-lg flex items-center gap-2",children:["Eyewear Check Reminder",Ce.jsx(Yd,{className:(e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.priority),children:e.priority.toUpperCase()})]}),Ce.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[Ce.jsx(yn,{className:"h-3 w-3"}),rh(new Date(e.created_at),{addSuffix:!0})]})]})]}),Ce.jsx(Hc,{variant:"ghost",size:"sm",onClick:d,children:Ce.jsx(pa,{className:"h-4 w-4"})})]})}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"urgent":return Ce.jsx(Jr,{className:"h-5 w-5 text-red-500"});case"high":return Ce.jsx(Jr,{className:"h-5 w-5 text-orange-500"});case"medium":return Ce.jsx(wn,{className:"h-5 w-5 text-yellow-500"});case"low":return Ce.jsx(dn,{className:"h-5 w-5 text-green-500"});default:return Ce.jsx(wn,{className:"h-5 w-5 text-blue-500"})}})(e.priority),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:e.eyewear_label}),e.is_overdue&&Ce.jsx(Yd,{variant:"destructive",className:"ml-2 text-xs",children:"OVERDUE"})]})]}),Ce.jsxs("div",{className:"text-sm text-gray-700 bg-white p-3 rounded-md border",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ce.jsxs("div",{children:[Ce.jsx("strong",{children:"Last Check:"}),Ce.jsx("br",{}),new Date(e.assessment_date).toLocaleDateString()]}),Ce.jsxs("div",{children:[Ce.jsx("strong",{children:"Assessed By:"}),Ce.jsx("br",{}),e.assessed_by]})]}),e.notes&&Ce.jsxs("div",{className:"mt-2",children:[Ce.jsx("strong",{children:"Notes:"})," ",e.notes]})]}),Ce.jsxs("div",{className:"space-y-3",children:[Ce.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Choose how you'd like to proceed:"}),Ce.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[Ce.jsx(Hc,{variant:"outline",onClick:()=>{s(!0)},className:"justify-start h-auto p-3",children:Ce.jsxs("div",{className:"flex items-center gap-3",children:[Ce.jsx(dn,{className:"h-5 w-5 text-green-500"}),Ce.jsxs("div",{className:"text-left",children:[Ce.jsx("div",{className:"font-medium",children:"Quick Self-Check"}),Ce.jsx("div",{className:"text-xs text-gray-600",children:"Answer a few questions about your eyewear condition"})]})]})}),Ce.jsx(Hc,{variant:"outline",onClick:()=>{o(!0)},className:"justify-start h-auto p-3",children:Ce.jsxs("div",{className:"flex items-center gap-3",children:[Ce.jsx(ln,{className:"h-5 w-5 text-blue-500"}),Ce.jsxs("div",{className:"text-left",children:[Ce.jsx("div",{className:"font-medium",children:"Schedule Appointment"}),Ce.jsx("div",{className:"text-xs text-gray-600",children:"Book a physical check with our optometrist"})]})]})})]})]}),e.is_overdue&&Ce.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[Ce.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[Ce.jsx(Jr,{className:"h-4 w-4"}),Ce.jsx("span",{className:"font-medium",children:"This check is overdue"})]}),Ce.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Please schedule an appointment as soon as possible to ensure optimal eye health."})]})]})})]}),a&&Ce.jsx($m,{reminder:e,onClose:()=>s(!1),onSubmit:async t=>{await r(e.eyewear_id,t),s(!1),d()}}),i&&Ce.jsx(Um,{reminder:e,onClose:()=>o(!1),onSubmit:async t=>{await n(e.eyewear_id,t),o(!1),d()}})]}):null},Um=({reminder:e,onClose:t,onSubmit:r})=>{const[n,a]=Ct.useState({appointment_date:"",preferred_time:"",notes:""}),[s,i]=Ct.useState(!1);return Ce.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Ce.jsxs(td,{className:"w-full max-w-md",children:[Ce.jsxs(rd,{children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsx(nd,{children:"Schedule Eyewear Check"}),Ce.jsx(Hc,{variant:"ghost",size:"sm",onClick:t,children:Ce.jsx(pa,{className:"h-4 w-4"})})]}),Ce.jsx(ad,{children:"Book an appointment for your eyewear condition check"})]}),Ce.jsx(sd,{children:Ce.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{i(!0),await r(n)}finally{i(!1)}},className:"space-y-4",children:[Ce.jsxs("div",{children:[Ce.jsx("label",{className:"text-sm font-medium",children:"Preferred Date"}),Ce.jsx("input",{type:"date",value:n.appointment_date,onChange:e=>a(t=>({...t,appointment_date:e.target.value})),min:(new Date).toISOString().split("T")[0],className:"w-full mt-1 p-2 border rounded-md",required:!0})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"text-sm font-medium",children:"Preferred Time"}),Ce.jsxs("select",{value:n.preferred_time,onChange:e=>a(t=>({...t,preferred_time:e.target.value})),className:"w-full mt-1 p-2 border rounded-md",required:!0,children:[Ce.jsx("option",{value:"",children:"Select time"}),Ce.jsx("option",{value:"09:00",children:"9:00 AM"}),Ce.jsx("option",{value:"10:00",children:"10:00 AM"}),Ce.jsx("option",{value:"11:00",children:"11:00 AM"}),Ce.jsx("option",{value:"14:00",children:"2:00 PM"}),Ce.jsx("option",{value:"15:00",children:"3:00 PM"}),Ce.jsx("option",{value:"16:00",children:"4:00 PM"})]})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"text-sm font-medium",children:"Notes (optional)"}),Ce.jsx("textarea",{value:n.notes,onChange:e=>a(t=>({...t,notes:e.target.value})),placeholder:"Any specific concerns or details...",className:"w-full mt-1 p-2 border rounded-md",rows:3})]}),Ce.jsx(Hc,{type:"submit",className:"w-full",disabled:s,children:s?"Scheduling...":"Schedule Appointment"})]})})]})})},Vm={}.VITE_API_URL||"http://127.0.0.1:8000/api",Wm={}.VITE_API_URL||"http://127.0.0.1:8000/api",Hm=()=>{const{user:e}=Lc(),t=Dt(),{appointments:r,loading:n}=oh(),{toast:a}=Jt(),[s,i]=Ct.useState([]),[o,l]=Ct.useState(!0),[c,d]=Ct.useState([]),[u,h]=Ct.useState(!0),m=(null==r?void 0:r.filter(e=>new Date(e.appointment_date)>new Date&&"scheduled"===e.status))||[],p=m.length>0?m.sort((e,t)=>new Date(e.appointment_date).getTime()-new Date(t.appointment_date).getTime())[0]:null;Ct.useEffect(()=>{const t=async()=>{try{l(!0);const t=await(async e=>{const t=e?{customer_id:e}:{};return(await Ac.get(`${Vm}/notifications`,{params:{...t,type:"eyewear_condition"},headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}})).data.notifications||[]})(null==e?void 0:e.id);i(t)}catch(t){console.error("Failed to load eyewear alerts:",t)}finally{l(!1)}};(null==e?void 0:e.id)&&t()},[null==e?void 0:e.id]),Ct.useEffect(()=>{const t=async()=>{try{h(!0);const e=await(async()=>(await Ac.get(`${Wm}/eyewear/reminders`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}})).data)();d(e.reminders)}catch(e){console.error("Failed to load eyewear reminders:",e)}finally{h(!1)}};(null==e?void 0:e.id)&&t()},[null==e?void 0:e.id]),Ct.useEffect(()=>{const e=e=>{const t=e.detail;"eyewear_condition"===t.type&&(i(e=>[t,...e]),a({title:"Eyewear Condition Update",description:`Your ${t.eyewear_label} has been assessed`,variant:"urgent"===t.priority?"destructive":"default"}))};return window.addEventListener("eyewear-condition-notification",e),()=>{window.removeEventListener("eyewear-condition-notification",e)}},[a]);const f=e=>{i(t=>t.filter(t=>t.id!==e))},x=async e=>{try{await(async e=>{await Ac.post(`${Wm}/notifications/mark-read`,{notification_id:e},{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}})})(e),d(t=>t.filter(t=>t.id!==e))}catch(t){console.error("Failed to dismiss reminder:",t)}},y=async(e,t)=>{await(async(e,t)=>(await Ac.post(`${Wm}/eyewear/${e}/condition-form`,t,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}})).data)(e,t),d(t=>t.filter(t=>t.eyewear_id!==e))},v=async(e,t)=>{await(async(e,t)=>(await Ac.post(`${Wm}/eyewear/${e}/set-appointment`,t,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}})).data)(e,t),d(t=>t.filter(t=>t.eyewear_id!==e))};return Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 rounded-lg p-6 text-white",children:[Ce.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome back, ",(null==e?void 0:e.name)||"Customer","!"]}),Ce.jsx("p",{className:"text-blue-100",children:"Manage your appointments, prescriptions, and eye care needs in one place."})]}),s.length>0&&Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[Ce.jsx(an,{className:"h-5 w-5 text-orange-500"}),"Eyewear Condition Updates"]}),Ce.jsxs(Yd,{variant:"outline",className:"bg-orange-50 text-orange-700",children:[s.length," alert",1!==s.length?"s":""]})]}),s.map(e=>Ce.jsx(mh,{notification:e,onDismiss:f},e.id))]}),c.length>0&&Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[Ce.jsx(an,{className:"h-5 w-5 text-blue-500"}),"Eyewear Check Reminders"]}),Ce.jsxs(Yd,{variant:"outline",className:"bg-blue-50 text-blue-700",children:[c.length," reminder",1!==c.length?"s":""]})]}),c.map(e=>Ce.jsx(zm,{reminder:e,onDismiss:x,onSubmitSelfCheck:y,onScheduleAppointment:v},e.id))]}),o&&Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsx(hh,{className:"h-20 w-full"}),Ce.jsx(hh,{className:"h-20 w-full"})]}),u&&Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsx(hh,{className:"h-20 w-full"}),Ce.jsx(hh,{className:"h-20 w-full"})]}),Ce.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex items-center justify-between",children:[Ce.jsxs("div",{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-5 w-5 text-blue-600"}),Ce.jsx("span",{children:"My Appointments"})]}),Ce.jsx(ad,{children:"View and manage your appointments"})]}),m.length>0&&Ce.jsxs(Yd,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[m.length," upcoming"]})]}),Ce.jsxs(sd,{className:"space-y-4",children:[n?Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(hh,{className:"h-4 w-3/4"}),Ce.jsx(hh,{className:"h-4 w-1/2"})]}):p?Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ce.jsx(yn,{className:"w-4 h-4 text-blue-600"}),Ce.jsx("span",{className:"font-medium",children:"Next:"}),Ce.jsx("span",{children:new Date(p.appointment_date).toLocaleDateString()})]}),Ce.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[Ce.jsx(wn,{className:"w-4 h-4"}),Ce.jsx("span",{children:p.type})]})]}):Ce.jsx("p",{className:"text-center text-gray-500 py-4",children:"No upcoming appointments"}),Ce.jsxs(Hc,{className:"w-full",variant:"outline",onClick:()=>{t("/customer/appointments")},children:[Ce.jsx(ln,{className:"mr-2 h-4 w-4"}),"View All Appointments"]})]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{className:"flex items-center justify-between",children:Ce.jsxs("div",{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(Sn,{className:"h-5 w-5 text-green-600"}),Ce.jsx("span",{children:"My Prescriptions"})]}),Ce.jsx(ad,{children:"Access your prescription history"})]})}),Ce.jsxs(sd,{className:"space-y-4",children:[Ce.jsx("p",{className:"text-center text-gray-500 py-4",children:"View your prescription history"}),Ce.jsxs(Hc,{className:"w-full",variant:"outline",onClick:()=>{t("/customer/prescriptions")},children:[Ce.jsx(Sn,{className:"mr-2 h-4 w-4"}),"View Prescriptions"]})]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{className:"flex items-center justify-between",children:Ce.jsxs("div",{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(zn,{className:"h-5 w-5 text-purple-600"}),Ce.jsx("span",{children:"Book Appointment"})]}),Ce.jsx(ad,{children:"Schedule a new appointment"})]})}),Ce.jsxs(sd,{className:"space-y-4",children:[Ce.jsx("p",{className:"text-center text-gray-500 py-4",children:"Ready to book your next appointment"}),Ce.jsxs(Hc,{className:"w-full",onClick:()=>{t("/customer/appointments")},children:[Ce.jsx(zn,{className:"mr-2 h-4 w-4"}),"Book New Appointment"]})]})]}),Ce.jsxs(td,{className:"bg-gradient-to-br from-orange-50 to-amber-50 border-orange-200",children:[Ce.jsxs(rd,{className:"flex items-center justify-between",children:[Ce.jsxs("div",{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(Qn,{className:"h-5 w-5 text-orange-600"}),Ce.jsx("span",{children:"Eye Care Products"})]}),Ce.jsx(ad,{children:"Browse and reserve products"})]}),Ce.jsx(Fn,{className:"h-8 w-8 text-orange-300"})]}),Ce.jsxs(sd,{className:"space-y-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ce.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Ce.jsx("span",{className:"text-gray-600",children:"Glasses & Frames"})]}),Ce.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ce.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),Ce.jsx("span",{className:"text-gray-600",children:"Contact Lenses"})]}),Ce.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ce.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),Ce.jsx("span",{className:"text-gray-600",children:"Eye Care Solutions"})]})]}),Ce.jsxs(Hc,{className:"w-full bg-orange-600 hover:bg-orange-700",onClick:()=>{t("/customer/products")},children:[Ce.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Browse Products"]})]})]})]})]})};function Km(...e){return is(Vr(e))}const Ym=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("div",{className:"relative w-full overflow-auto",children:Ce.jsx("table",{ref:r,className:Km("w-full caption-bottom text-sm",e),...t})}));Ym.displayName="Table";const Gm=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("thead",{ref:r,className:Km("[&_tr]:border-b",e),...t}));Gm.displayName="TableHeader";const Xm=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("tbody",{ref:r,className:Km("[&_tr:last-child]:border-0",e),...t}));Xm.displayName="TableBody";Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("tfoot",{ref:r,className:Km("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";const Qm=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("tr",{ref:r,className:Km("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Qm.displayName="TableRow";const Jm=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("th",{ref:r,className:Km("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Jm.displayName="TableHead";const Zm=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("td",{ref:r,className:Km("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Zm.displayName="TableCell";Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("caption",{ref:r,className:Km("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";const ep={}.VITE_API_URL||"http://127.0.0.1:8000/api",tp=async e=>{try{return(await Ac.get(`${ep}/schedules/doctor/${e}`)).data}catch(t){throw console.error("Error fetching doctor schedule:",t),t}},rp=async()=>{try{return(await Ac.get(`${ep}/optometrists`)).data}catch(e){throw console.error("Error fetching optometrists:",e),e}},np=async e=>{try{const t=sessionStorage.getItem("auth_token");return(await Ac.get(`${ep}/schedule-change-requests/optometrist/${e}`,{headers:{Authorization:t?`Bearer ${t}`:""}})).data.requests}catch(t){throw console.error("Error fetching optometrist schedule change requests:",t),t}},ap=()=>{const{user:e}=Lc(),{toast:t}=Jt(),[r,n]=Ct.useState(null),[a,s]=Ct.useState(!0),{appointments:i,loading:o,refetch:l}=oh(),{update:c,loading:d}=ch();Ct.useEffect(()=>{(async()=>{if(null==e?void 0:e.id)try{s(!0);const t=await tp(e.id),r=new Date,a=0===r.getDay()?7:r.getDay(),i=t.schedule.find(e=>e.day_of_week===a);i&&i.branch_id&&n({day:i.day,branch:i.branch,branch_id:i.branch_id,time:i.time,start_time:i.start_time||"",end_time:i.end_time||""})}catch(r){console.error("Error fetching today's schedule:",r),t({title:"Error",description:"Failed to load today's schedule",variant:"destructive"})}finally{s(!1)}})()},[null==e?void 0:e.id,t]);const u=(null==i?void 0:i.filter(e=>{const t=new Date(e.appointment_date),r=new Date;return["confirmed","scheduled","in_progress"].includes(e.status)&&t.toDateString()===r.toDateString()}))||[],h=u.reduce((e,t)=>{var r;const n=(null==(r=t.branch)?void 0:r.name)||"Unknown Branch";return e[n]||(e[n]=[]),e[n].push(t),e},{}),m=async e=>{try{await c(e,{status:"in_progress"}),t({title:"Consultation Started",description:"The consultation has been marked as in progress"}),l()}catch(r){console.error("Error starting consultation:",r),t({title:"Error",description:"Failed to start consultation",variant:"destructive"})}},p=async e=>{try{await c(e,{status:"completed"}),t({title:"Consultation Completed",description:"The consultation has been marked as completed"}),l()}catch(r){console.error("Error completing consultation:",r),t({title:"Error",description:"Failed to complete consultation",variant:"destructive"})}},f=e=>{if(!e)return"N/A";const[t,r]=e.split(":"),n=parseInt(t);return`${n%12||12}:${r} ${n>=12?"PM":"AM"}`},x=e=>{const t={confirmed:{variant:"default",label:"Confirmed"},in_progress:{variant:"secondary",label:"In Progress"},completed:{variant:"outline",label:"Completed"},cancelled:{variant:"destructive",label:"Cancelled"}}[e]||{variant:"outline",label:e};return Ce.jsx(Yd,{variant:t.variant,children:t.label})};return a?Ce.jsxs("div",{className:"flex items-center justify-center p-8",children:[Ce.jsx(Tn,{className:"h-6 w-6 animate-spin mr-2"}),Ce.jsx("span",{children:"Loading today's schedule..."})]}):r?Ce.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center gap-2",children:[Ce.jsx(ln,{className:"h-5 w-5"}),"Today's Schedule"]}),Ce.jsxs(ad,{children:["Your work schedule for ",(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(In,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium",children:"Branch"}),Ce.jsx("p",{className:"text-sm text-muted-foreground",children:r.branch})]})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(yn,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium",children:"Working Hours"}),Ce.jsx("p",{className:"text-sm text-muted-foreground",children:r.time})]})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(wn,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium",children:"Appointments"}),Ce.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.length," confirmed"]})]})]})]})})]}),Ce.jsx("div",{className:"space-y-6",children:o?Ce.jsx(td,{children:Ce.jsxs(sd,{className:"flex items-center justify-center p-8",children:[Ce.jsx(Tn,{className:"h-6 w-6 animate-spin mr-2"}),Ce.jsx("span",{children:"Loading appointments..."})]})}):0===u.length?Ce.jsx(td,{children:Ce.jsxs(sd,{className:"text-center py-8",children:[Ce.jsx(da,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Appointments Today"}),Ce.jsx("p",{className:"text-muted-foreground",children:"You don't have any confirmed appointments across your scheduled branches today."})]})}):Object.entries(h).map(([e,t])=>Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center gap-2",children:[Ce.jsx(In,{className:"h-5 w-5 text-blue-600"}),e," Branch"]}),Ce.jsxs(ad,{children:[t.length," confirmed appointment",1!==t.length?"s":""," for today"]})]}),Ce.jsx(sd,{children:Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Patient"}),Ce.jsx(Jm,{children:"Time"}),Ce.jsx(Jm,{children:"Type"}),Ce.jsx(Jm,{children:"Status"}),Ce.jsx(Jm,{children:"Actions"})]})}),Ce.jsx(Xm,{children:t.map(e=>{var t,r;return Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(da,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsx("span",{children:(null==(t=e.patient)?void 0:t.name)||"Unknown Patient"})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(yn,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsx("span",{children:f(e.start_time)})]})}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{variant:"outline",children:(null==(r=e.type)?void 0:r.replace("_"," ").toUpperCase())||"N/A"})}),Ce.jsx(Zm,{children:x(e.status)}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex space-x-2",children:["confirmed"===e.status&&Ce.jsxs(Hc,{size:"sm",onClick:()=>m(e.id.toString()),disabled:d,className:"bg-green-600 hover:bg-green-700",children:[Ce.jsx($n,{className:"h-3 w-3 mr-1"}),"Start"]}),"in_progress"===e.status&&Ce.jsxs(Hc,{size:"sm",onClick:()=>p(e.id.toString()),disabled:d,className:"bg-blue-600 hover:bg-blue-700",children:[Ce.jsx(dn,{className:"h-3 w-3 mr-1"}),"Complete"]})]})})]},e.id)})})]})})]},e))})]}):Ce.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[Ce.jsx(td,{children:Ce.jsxs(sd,{className:"text-center py-8",children:[Ce.jsx(ln,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Schedule for Today"}),Ce.jsx("p",{className:"text-muted-foreground",children:"You don't have any scheduled work at any branch today, but you can still view appointments from all your scheduled branches."})]})}),Ce.jsx("div",{className:"mt-6",children:Ce.jsx("div",{className:"space-y-6",children:o?Ce.jsx(td,{children:Ce.jsxs(sd,{className:"flex items-center justify-center p-8",children:[Ce.jsx(Tn,{className:"h-6 w-6 animate-spin mr-2"}),Ce.jsx("span",{children:"Loading appointments..."})]})}):0===u.length?Ce.jsx(td,{children:Ce.jsxs(sd,{className:"text-center py-8",children:[Ce.jsx(da,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Appointments Today"}),Ce.jsx("p",{className:"text-muted-foreground",children:"You don't have any confirmed appointments across your scheduled branches today."})]})}):Object.entries(h).map(([e,t])=>Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center gap-2",children:[Ce.jsx(In,{className:"h-5 w-5 text-blue-600"}),e," Branch"]}),Ce.jsxs(ad,{children:[t.length," confirmed appointment",1!==t.length?"s":""," for today"]})]}),Ce.jsx(sd,{children:Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Patient"}),Ce.jsx(Jm,{children:"Time"}),Ce.jsx(Jm,{children:"Type"}),Ce.jsx(Jm,{children:"Status"}),Ce.jsx(Jm,{children:"Actions"})]})}),Ce.jsx(Xm,{children:t.map(e=>{var t,r;return Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(da,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsx("span",{children:(null==(t=e.patient)?void 0:t.name)||"Unknown Patient"})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(yn,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsx("span",{children:f(e.start_time)})]})}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{variant:"outline",children:(null==(r=e.type)?void 0:r.replace("_"," ").toUpperCase())||"N/A"})}),Ce.jsx(Zm,{children:x(e.status)}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex space-x-2",children:["confirmed"===e.status&&Ce.jsxs(Hc,{size:"sm",onClick:()=>m(e.id.toString()),disabled:d,className:"bg-green-600 hover:bg-green-700",children:[Ce.jsx($n,{className:"h-3 w-3 mr-1"}),"Start"]}),"in_progress"===e.status&&Ce.jsxs(Hc,{size:"sm",onClick:()=>p(e.id.toString()),disabled:d,className:"bg-blue-600 hover:bg-blue-700",children:[Ce.jsx(dn,{className:"h-3 w-3 mr-1"}),"Complete"]})]})})]},e.id)})})]})})]},e))})})]})};function sp(...e){return is(Vr(e))}const ip=({title:e,description:t,value:r,icon:n,trend:a,action:s,className:i,gradient:o})=>Ce.jsxs(td,{className:sp("border border-gray-200 shadow-sm",i),children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium text-gray-600",children:e}),Ce.jsx(n,{className:"h-4 w-4 text-gray-400"})]}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"space-y-2",children:[r&&Ce.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:r}),t&&Ce.jsx(ad,{className:"text-gray-500 text-sm",children:t}),a&&Ce.jsxs("div",{className:"flex items-center text-sm",children:[Ce.jsxs("span",{className:sp("font-medium",a.isPositive?"text-green-600":"text-red-600"),children:[a.isPositive?"+":"",a.value,"%"]}),Ce.jsx("span",{className:"text-gray-500 ml-1",children:a.label})]}),s&&Ce.jsx(Hc,{onClick:s.onClick,variant:"outline",size:"sm",className:"w-full mt-3",children:s.label})]})})]});var op="Progress",lp=100,[cp,dp]=Pe(op),[up,hp]=cp(op),mp=Ct.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:s=xp,...i}=e;!a&&0!==a||gp(a)||console.error(`Invalid prop \`max\` of value \`${`${a}`}\` supplied to \`${"Progress"}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const o=gp(a)?a:lp;null===n||bp(n,o)||console.error(function(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${n}`,"Progress"));const l=bp(n,o)?n:null,c=vp(l)?s(l,o):void 0;return Ce.jsx(up,{scope:r,value:l,max:o,children:Ce.jsx(Ae.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":vp(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":yp(l,o),"data-value":l??void 0,"data-max":o,...i,ref:t})})});mp.displayName=op;var pp="ProgressIndicator",fp=Ct.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=hp(pp,r);return Ce.jsx(Ae.div,{"data-state":yp(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});function xp(e,t){return`${Math.round(e/t*100)}%`}function yp(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function vp(e){return"number"==typeof e}function gp(e){return vp(e)&&!isNaN(e)&&e>0}function bp(e,t){return vp(e)&&!isNaN(e)&&e<=t&&e>=0}fp.displayName=pp;var jp=mp,wp=fp;function Np(...e){return is(Vr(e))}const Sp=Ct.forwardRef(({className:e,value:t,...r},n)=>Ce.jsx(jp,{ref:n,className:Np("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:Ce.jsx(wp,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Sp.displayName=jp.displayName;const _p=`${{}.VITE_API_URL||"http://127.0.0.1:8000/api"}`;Ac.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&e.headers&&(e.headers.Authorization=`Bearer ${t}`),e});const kp=async(e="",t,r)=>{const n=await Ac.get(`${_p}/products`,{params:{search:e,category:t,active:r}});return n.data.data||n.data},Op=async e=>{const t=e instanceof FormData?e:(()=>{const t=new FormData;return t.append("name",e.name),t.append("description",e.description||""),t.append("price",e.price.toString()),t.append("stock_quantity",e.stock_quantity.toString()),e.category_id&&t.append("category_id",e.category_id.toString()),e.brand&&t.append("brand",e.brand),e.model&&t.append("model",e.model),e.sku&&t.append("sku",e.sku),e.branch_id&&t.append("branch_id",e.branch_id.toString()),void 0!==e.is_active&&t.append("is_active",e.is_active?"1":"0"),e.images&&e.images.length>0&&e.images.forEach((e,r)=>{t.append(`images[${r}]`,e)}),t})();return(await Ac.post(`${_p}/products`,t,{headers:{"Content-Type":"multipart/form-data"}})).data},Cp=async(e,t)=>{const r=t instanceof FormData?t:(()=>{const e=new FormData;return e.append("name",t.name),e.append("description",t.description||""),e.append("price",t.price.toString()),e.append("stock_quantity",t.stock_quantity.toString()),t.category_id&&e.append("category_id",t.category_id.toString()),t.brand&&e.append("brand",t.brand),t.model&&e.append("model",t.model),t.sku&&e.append("sku",t.sku),t.branch_id&&e.append("branch_id",t.branch_id.toString()),void 0!==t.is_active&&e.append("is_active",t.is_active?"1":"0"),t.images&&t.images.length>0&&t.images.forEach((t,r)=>{e.append(`images[${r}]`,t)}),e})();return(await Ac.put(`${_p}/products?id=${e}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data},Ap=async e=>(await Ac.delete(`${_p}/products?id=${e}`)).data,Ep={}.VITE_API_URL||"http://127.0.0.1:8000/api",Pp=Ac.create({baseURL:Ep});Pp.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers=e.headers||{},e.headers.Authorization=`Bearer ${t}`),e});const Tp=()=>{const{user:e}=Lc(),t=null==e?void 0:e.role,[r,n]=Ct.useState([]),[a,s]=Ct.useState([]),[i,o]=Ct.useState(null),[l,c]=Ct.useState(null),[d,u]=Ct.useState(1),[h,m]=Ct.useState("");Ct.useEffect(()=>{p(),"customer"===t&&f();const e=e=>{console.log("Product deleted, refreshing localStorage gallery:",e.detail.productId),p()};return window.addEventListener("productDeleted",e),()=>{window.removeEventListener("productDeleted",e)}},[]);const p=async()=>{try{const e=await kp(h);n(e)}catch(e){console.error("Failed to fetch products:",e)}},f=async()=>{try{const e=await(async()=>(await Pp.get("/reservations")).data)();s(e)}catch(e){console.error("Failed to fetch reservations:",e)}},x=(e,t)=>{i&&o({...i,[e]:t})},y=e=>{o(e||{id:0,name:"",description:"",price:0,image_paths:[],stock_quantity:0,is_active:!0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})},v=()=>{c(null),u(1)},g=async()=>{if(l)try{await(async e=>(await Pp.post("/reservations",e)).data)({product_id:l,branch_id:1,quantity:d}),v(),f(),alert("Reservation created successfully!")}catch(e){console.error("Failed to create reservation:",e),alert("Failed to create reservation.")}},b=r.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())||e.description.toLowerCase().includes(h.toLowerCase()));return Ce.jsxs("div",{className:"p-4",children:[Ce.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Product Gallery"}),Ce.jsxs("div",{className:"mb-4 flex items-center space-x-2",children:[Ce.jsx(Yc,{type:"text",placeholder:"Search products...",value:h,onChange:e=>m(e.target.value),className:"flex-grow","aria-label":"Search products"}),("admin"===t||"staff"===t||"optometrist"===t)&&!i&&Ce.jsxs(Hc,{onClick:()=>y(),variant:"default",className:"flex items-center space-x-1",children:[Ce.jsx(zn,{size:16}),Ce.jsx("span",{children:"Add Product"})]})]}),i&&Ce.jsxs("div",{className:"mb-6 p-4 border rounded bg-gray-50",children:[Ce.jsx("h3",{className:"text-xl font-semibold mb-2",children:i.id?"Edit Product":"Add Product"}),Ce.jsxs("div",{className:"mb-2",children:[Ce.jsx("label",{className:"block font-medium mb-1",children:"Name:"}),Ce.jsx("input",{type:"text",value:i.name,onChange:e=>x("name",e.target.value),className:"w-full border px-2 py-1 rounded"})]}),Ce.jsxs("div",{className:"mb-2",children:[Ce.jsx("label",{className:"block font-medium mb-1",children:"Description:"}),Ce.jsx("textarea",{value:i.description,onChange:e=>x("description",e.target.value),className:"w-full border px-2 py-1 rounded",rows:3})]}),Ce.jsxs("div",{className:"mb-2",children:[Ce.jsx("label",{className:"block font-medium mb-1",children:"Price:"}),Ce.jsx("input",{type:"number",min:0,value:i.price,onChange:e=>x("price",parseFloat(e.target.value)),className:"w-full border px-2 py-1 rounded"})]}),Ce.jsxs("div",{className:"mb-2",children:[Ce.jsx("label",{className:"block font-medium mb-1",children:"Stock Quantity:"}),Ce.jsx("input",{type:"number",min:0,value:i.stock_quantity,onChange:e=>x("stock_quantity",parseInt(e.target.value)),className:"w-full border px-2 py-1 rounded"})]}),Ce.jsxs("div",{className:"flex space-x-2 mt-4",children:[Ce.jsx("button",{onClick:async()=>{if(i)if(i.name.trim())if(i.price<=0)alert("Price must be greater than zero.");else try{const e=new FormData;e.append("name",i.name),e.append("description",i.description),e.append("price",i.price.toString()),e.append("stock_quantity",i.stock_quantity.toString()),e.append("is_active",i.is_active?"1":"0"),i.id?await Cp(i.id,e):await Op(e),o(null),p()}catch(e){console.error("Failed to save product:",e),alert("Failed to save product.")}else alert("Product name is required.")},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Save"}),Ce.jsx("button",{onClick:()=>{o(null)},className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500",children:"Cancel"})]})]}),Ce.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:b.map(e=>{return Ce.jsxs("div",{className:"border rounded p-4 flex flex-col",children:[e.image_paths&&e.image_paths.length>0?Ce.jsx("div",{className:"mb-2",children:Ce.jsx("img",{src:`http://127.0.0.1:8000/storage/${e.image_paths[0]}`,alt:`${e.name} cover`,className:"w-full aspect-[4/3] object-contain border cursor-pointer rounded bg-gray-50"})}):Ce.jsx("div",{className:"mb-2 aspect-[4/3] bg-gray-200 flex items-center justify-center text-gray-500",children:"No Images"}),Ce.jsx("h3",{className:"font-semibold text-lg",children:e.name}),Ce.jsx("p",{className:"text-gray-700 flex-grow",children:e.description}),Ce.jsxs("p",{className:"font-bold mt-2",children:["₱",Number(e.price||0).toFixed(2)]}),Ce.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Stock: ",e.stock_quantity," | Reservations: ",(r=e.id,a.filter(e=>e.product_id===r).length)]}),"customer"===t&&e.is_active&&e.stock_quantity>0&&Ce.jsx(Ce.Fragment,{children:l===e.id?Ce.jsxs("div",{className:"mt-2 p-2 border rounded bg-gray-50",children:[Ce.jsx("input",{type:"number",min:1,max:e.stock_quantity,value:d,onChange:e=>u(parseInt(e.target.value)),className:"w-full border px-2 py-1 rounded mb-2"}),Ce.jsxs("div",{className:"flex space-x-2",children:[Ce.jsx("button",{onClick:g,className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Confirm"}),Ce.jsx("button",{onClick:v,className:"px-3 py-1 bg-gray-400 text-white rounded hover:bg-gray-500",children:"Cancel"})]})]}):Ce.jsx("button",{onClick:()=>(e=>{c(e),u(1)})(e.id),className:"mt-2 px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reserve"})}),("admin"===t||"staff"===t||"optometrist"===t)&&Ce.jsxs("div",{className:"mt-2 flex space-x-2",children:[Ce.jsx("button",{onClick:()=>y(e),className:"px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Edit"}),Ce.jsx("button",{onClick:()=>(async e=>{try{await Ap(e),p()}catch(t){console.error("Failed to delete product:",t),alert("Failed to delete product.")}})(e.id),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]},e.id);var r})}),0===b.length&&Ce.jsx("p",{className:"text-center text-gray-500 mt-8",children:"No products available."})]})},Mp=()=>{var e,t,r,n,a;const s=Dt(),{user:i}=Lc(),{appointments:o,loading:l}=oh(),{data:c,isLoading:d,error:u}=mo({queryKey:["staff-inventory",null==(e=null==i?void 0:i.branch)?void 0:e.id],queryFn:async()=>{var e;if(!(null==(e=null==i?void 0:i.branch)?void 0:e.id))return null;return(await Ac.get(`http://127.0.0.1:8000/api/enhanced-inventory/branch/${i.branch.id}`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}})).data},enabled:!!(null==(t=null==i?void 0:i.branch)?void 0:t.id),retry:3,refetchInterval:3e4}),{data:h,isLoading:m,error:p}=mo({queryKey:["staff-reservations",null==(r=null==i?void 0:i.branch)?void 0:r.id],queryFn:async()=>(await Ac.get("http://127.0.0.1:8000/api/reservations",{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}})).data,retry:3,refetchInterval:3e4}),f=(new Date).toISOString().split("T")[0],x=(null==o?void 0:o.filter(e=>e.appointment_date===f).map(e=>{var t;return{time:new Date(`1970-01-01T${e.start_time}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),patient:(null==(t=e.patient)?void 0:t.name)||"Unknown Patient",type:e.type.replace("_"," "),status:e.status}}))||[],y=(null==o?void 0:o.filter(e=>"completed"===e.status))||[],v=(null==(n=null==c?void 0:c.inventories)?void 0:n.reduce((e,t)=>{const r=t.product_name.split(" ")[0],n=e.find(e=>e.category===r);return n?(n.current+=t.quantity,n.max+=t.quantity+20):e.push({category:r,current:t.quantity,max:t.quantity+20,status:t.quantity<t.min_threshold?"critical":t.quantity<1.5*t.min_threshold?"low":"good"}),e},[]))||[],g=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{className:"bg-gradient-staff rounded-lg p-6 text-white",children:[Ce.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Staff Control Center"}),Ce.jsx("p",{className:"text-staff-foreground/90",children:"Manage clinic operations, inventory, and patient communications efficiently."})]}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ce.jsx(ip,{title:"Today's Appointments",value:x.length,description:"Scheduled appointments",icon:ln,action:{label:"Manage",onClick:()=>s("/staff/appointments"),variant:"staff"},gradient:!0}),Ce.jsx(ip,{title:"Inventory Items",value:u?"Error":(null==(a=null==c?void 0:c.inventories)?void 0:a.length)||0,description:u?"Failed to load":"Items in stock",icon:Fn,trend:u?void 0:{value:v.filter(e=>"low"===e.status||"critical"===e.status).length,label:"items need attention",isPositive:!1},action:{label:"Update Stock",onClick:()=>s("/staff/inventory"),variant:"staff"},gradient:!0}),Ce.jsx(ip,{title:"Pending Reservations",value:p?"Error":(null==h?void 0:h.filter(e=>"pending"===e.status).length)||0,description:p?"Failed to load":"Awaiting approval",icon:ua,action:{label:"View All",onClick:()=>s("/staff/reservations"),variant:"staff"},gradient:!0}),Ce.jsx(ip,{title:"Completed Appointments",value:y.length,description:"Ready for receipts",icon:Sn,action:{label:"Create Receipts",onClick:()=>s("/staff/reservations"),variant:"staff"},gradient:!0})]}),Ce.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ce.jsxs(td,{className:"shadow-lg border-0",children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(Fn,{className:"h-5 w-5 text-staff"}),Ce.jsx("span",{children:"Inventory Status"})]}),Ce.jsx(ad,{children:"Current stock levels by category"})]}),Ce.jsxs(sd,{className:"space-y-4",children:[d?Ce.jsxs("div",{className:"text-center py-4",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),Ce.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading inventory..."})]}):v.length>0?v.map((e,t)=>{const r=e.current/e.max*100,n=(e=>{switch(e){case"good":return{color:"bg-green-500",textColor:"text-green-700"};case"low":return{color:"bg-yellow-500",textColor:"text-yellow-700"};case"critical":return{color:"bg-red-500",textColor:"text-red-700"};default:return{color:"bg-gray-500",textColor:"text-gray-700"}}})(e.status);return Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsx("span",{className:"font-medium text-slate-900",children:e.category}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsxs("span",{className:"text-sm text-slate-600",children:[e.current,"/",e.max]}),Ce.jsx(Yd,{className:`${n.textColor} bg-opacity-10`,children:e.status})]})]}),Ce.jsx(Sp,{value:r,className:"h-2"})]},t)}):Ce.jsxs("div",{className:"text-center py-4",children:[Ce.jsx(Fn,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:"No inventory data available"})]}),Ce.jsx(Hc,{variant:"outline",size:"sm",className:"w-full",onClick:()=>s("/staff/inventory"),children:"View Full Inventory"})]})]}),Ce.jsxs(td,{className:"shadow-lg border-0",children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(yn,{className:"h-5 w-5 text-staff"}),Ce.jsx("span",{children:"Today's Schedule"})]}),Ce.jsx(ad,{children:"Appointment status overview"})]}),Ce.jsxs(sd,{children:[l?Ce.jsxs("div",{className:"text-center py-4",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),Ce.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading appointments..."})]}):x.length>0?Ce.jsx("div",{className:"space-y-3",children:x.map((e,t)=>Ce.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-slate-900",children:e.patient}),Ce.jsxs("p",{className:"text-sm text-slate-600",children:[e.time," • ",e.type]})]}),Ce.jsx(Yd,{className:g(e.status),children:e.status})]},t))}):Ce.jsxs("div",{className:"text-center py-4",children:[Ce.jsx(ln,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:"No appointments scheduled for today"})]}),Ce.jsx(Hc,{variant:"outline",size:"sm",className:"w-full mt-4",onClick:()=>s("/staff/appointments"),children:"Manage All Appointments"})]})]}),Ce.jsxs(td,{className:"shadow-lg border-0",children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(Sn,{className:"h-5 w-5 text-staff"}),Ce.jsx("span",{children:"Receipt Ready"})]}),Ce.jsx(ad,{children:"Completed appointments that need receipts"})]}),Ce.jsxs(sd,{children:[y.length>0?Ce.jsxs("div",{className:"space-y-3",children:[y.slice(0,3).map((e,t)=>{var r;return Ce.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-slate-900",children:(null==(r=e.patient)?void 0:r.name)||"Unknown Patient"}),Ce.jsxs("p",{className:"text-sm text-slate-600",children:[new Date(e.appointment_date).toLocaleDateString()," •",new Date(`1970-01-01T${e.start_time}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]}),Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>s(`/staff/create-receipt/${e.id}`),className:"text-green-700 border-green-200 hover:bg-green-100",children:[Ce.jsx(Sn,{className:"h-3 w-3 mr-1"}),"Create Receipt"]})]},t)}),y.length>3&&Ce.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["+",y.length-3," more completed appointments"]})]}):Ce.jsxs("div",{className:"text-center py-4",children:[Ce.jsx(Sn,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:"No completed appointments"})]}),Ce.jsx(Hc,{variant:"outline",size:"sm",className:"w-full mt-4",onClick:()=>s("/staff/appointments"),children:"View All Appointments"})]})]})]}),Ce.jsxs(td,{className:"shadow-lg border-0",children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(Qn,{className:"h-5 w-5 text-staff"}),Ce.jsx("span",{children:"Product Gallery Management"})]}),Ce.jsx(ad,{children:"Manage products available for customer reservations"})]}),Ce.jsx(sd,{children:Ce.jsx(Tp,{})})]})]})},Dp={}.VITE_API_URL||"http://127.0.0.1:8000/api",Ip=Ac.create({baseURL:Dp});Ip.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),Ip.interceptors.response.use(e=>e,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const Rp=async()=>{const e=await Ip.get("/branches");return Array.isArray(e.data)?e.data:e.data&&Array.isArray(e.data.data)?e.data.data:[]},Lp=async()=>{const e=await Ip.get("/branches/active");return Array.isArray(e.data)?e.data:e.data&&Array.isArray(e.data.data)?e.data.data:[]},Fp=({selectedBranchId:e,onBranchChange:t,showAllOption:r=!0,label:n="Filter by Branch",placeholder:a="All branches",className:s="",useAdminData:i=!1})=>{const{data:o=[],isLoading:l}=mo({queryKey:i?["branches"]:["activeBranches"],queryFn:i?Rp:Lp});return Ce.jsxs("div",{className:`space-y-2 ${s}`,children:[Ce.jsxs(Zc,{htmlFor:"branch-filter",className:"flex items-center gap-2",children:[Ce.jsx(sn,{className:"h-4 w-4"}),n]}),Ce.jsxs(Dm,{value:e,onValueChange:t,children:[Ce.jsx(Rm,{id:"branch-filter",className:"w-full",children:Ce.jsx(Im,{placeholder:l?"Loading branches...":a})}),Ce.jsxs(Bm,{children:[r&&Ce.jsx(qm,{value:"all",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),Ce.jsx("span",{className:"font-semibold",children:"Global View (All Branches)"})]})}),o.map(e=>Ce.jsx(qm,{value:e.id.toString(),children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),Ce.jsx("span",{children:e.name}),Ce.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:e.code})]})},e.id))]})]})]})},Bp=Ct.createContext(void 0),qp=({children:e})=>{const{user:t}=Lc(),[r,n]=Ct.useState("all");Ct.useEffect(()=>{(null==t?void 0:t.branch)?n(t.branch.id.toString()):n("all")},[t]);const a=(null==t?void 0:t.branch)||null,s="admin"===(null==t?void 0:t.role);return Ce.jsx(Bp.Provider,{value:{selectedBranchId:r,setSelectedBranchId:n,userBranch:a,isMultiBranch:s},children:e})},$p=()=>{const e=Ct.useContext(Bp);if(void 0===e)throw new Error("useBranch must be used within a BranchProvider");return e},zp={}.VITE_API_URL||"http://127.0.0.1:8000/api",Up=Ac.create({baseURL:zp}),Vp=async()=>{const e=sessionStorage.getItem("auth_token");if(!e)throw new Error("No authentication token found");try{return(await Up.get("/analytics/branch-performance",{headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}})).data}catch(t){return console.error("Error fetching branch performance:",t),{branches:[],summary:{total_revenue:0,total_patients:0,total_appointments:0,average_growth:0,total_branches:0}}}},Wp={}.VITE_API_URL||"http://127.0.0.1:8000/api";Ac.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers=e.headers||{},e.headers.Authorization=`Bearer ${t}`),e});const Hp=new class{async getTopSellingProducts(e={}){const t=new URLSearchParams;e.period&&t.append("period",e.period.toString()),e.branch_id&&t.append("branch_id",e.branch_id.toString()),e.limit&&t.append("limit",e.limit.toString());return(await Ac.get(`${Wp}/admin/products/analytics?${t}`)).data}async getCategoryAnalytics(e={}){const t=new URLSearchParams;e.period&&t.append("period",e.period.toString()),e.branch_id&&t.append("branch_id",e.branch_id.toString());return(await Ac.get(`${Wp}/admin/products/category-analytics?${t}`)).data}async getLowPerformingProducts(e={}){const t=new URLSearchParams;e.period&&t.append("period",e.period.toString());return(await Ac.get(`${Wp}/admin/products/low-performing?${t}`)).data}};function Kp(e){const t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"₱0":`₱${t.toLocaleString("en-PH",{minimumFractionDigits:0,maximumFractionDigits:2})}`}const Yp=()=>{var e,t,r,n,a,s;const i=Dt(),{selectedBranchId:o,setSelectedBranchId:l,isMultiBranch:c}=$p(),{data:d,isLoading:u,error:h,refetch:m}=mo({queryKey:["branch-performance"],queryFn:Vp,refetchInterval:3e4,retry:3}),{data:p,isLoading:f,error:x,refetch:y}=mo({queryKey:["top-selling-products",o],queryFn:()=>Hp.getTopSellingProducts({period:30,branch_id:"all"!==o?parseInt(o):void 0,limit:4}),refetchInterval:6e4,retry:3}),v=(null==d?void 0:d.branches)||[],g=(null==d?void 0:d.summary)||null,b="all"===o?v:v.filter(e=>e.id.toString()===o),j=(null==p?void 0:p.top_products)||[],w="all"===o?(null==g?void 0:g.total_revenue)||0:b.reduce((e,t)=>e+t.revenue,0),N="all"===o?(null==g?void 0:g.total_patients)||0:b.reduce((e,t)=>e+t.patients,0);return"all"===o?null==g||g.average_growth:b.length>0&&(b.reduce((e,t)=>e+t.growth,0),b.length),Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsx("div",{className:"bg-gradient-admin rounded-lg p-6 text-white",children:Ce.jsx("div",{className:"flex justify-between items-start",children:Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Administrative Dashboard"}),Ce.jsx("p",{className:"text-admin-foreground/90",children:"Complete overview of all clinic operations, performance metrics, and system management."})]})})}),Ce.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsx("div",{className:"flex items-center space-x-4",children:Ce.jsxs("div",{className:"flex items-center space-x-3",children:[Ce.jsx(Fp,{selectedBranchId:o,onBranchChange:l,showAllOption:!0,label:"Filter by Branch",placeholder:"All branches",useAdminData:!0,className:"min-w-[200px]"}),"all"!==o&&Ce.jsxs(Yd,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:["Showing: ",(null==(e=b[0])?void 0:e.name)||"Selected Branch"]}),"all"===o&&Ce.jsx(Yd,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Showing: All Branches"})]})}),Ce.jsx("div",{className:"flex items-center space-x-2",children:Ce.jsxs(Hc,{onClick:()=>{m(),y()},variant:"outline",size:"sm",className:"min-w-[120px] disabled:opacity-50 transition-all duration-200 hover:bg-blue-50 hover:border-blue-300",disabled:u||f,children:[Ce.jsx(Vn,{className:"h-4 w-4 mr-2 "+(u||f?"animate-spin":"")}),u||f?"Refreshing...":"Refresh"]})})]})}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[Ce.jsx(ip,{title:"Monthly Revenue",value:Kp(w),description:"all"===o?"Across all branches":`For ${(null==(t=b[0])?void 0:t.name)||"selected branch"}`,icon:rn,action:{label:"View Analytics",onClick:()=>i("/admin/analytics"),variant:"admin"},gradient:!0}),Ce.jsx(ip,{title:"Active Patients",value:N,description:"all"===o?"Total registered":`Registered at ${(null==(r=b[0])?void 0:r.name)||"selected branch"}`,icon:ua,action:{label:"User Management",onClick:()=>i("/admin/users"),variant:"admin"},gradient:!0}),Ce.jsx(ip,{title:"Total Inventory",value:"Manage",description:"all"===o?"Items across branches":`Items at ${(null==(n=b[0])?void 0:n.name)||"selected branch"}`,icon:Fn,action:{label:"Manage Inventory",onClick:()=>i("/admin/inventory"),variant:"admin"},gradient:!0}),Ce.jsx(ip,{title:"Active Branches",value:"all"===o?v.length:b.length,description:"all"===o?"All locations":"Selected location",icon:ra,action:{label:"Branch Analytics",onClick:()=>i("/admin/analytics"),variant:"admin"},gradient:!0}),Ce.jsx(ip,{title:"Product Gallery",value:"Manage",description:"Add, edit, delete products",icon:Fn,action:{label:"Manage Products",onClick:()=>i("/admin/products"),variant:"admin"},gradient:!0})]}),Ce.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ce.jsxs(td,{className:"shadow-lg border-0",children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(nn,{className:"h-5 w-5 text-admin"}),Ce.jsx("span",{children:"Branch Performance"})]}),Ce.jsx(ad,{children:"all"===o?"Revenue and patient metrics by location":`Performance for ${(null==(a=b[0])?void 0:a.name)||"selected branch"}`})]}),Ce.jsx(sd,{className:"space-y-4",children:u?Ce.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ce.jsx(Vn,{className:"h-6 w-6 animate-spin mr-2"}),Ce.jsx("span",{children:"Loading branch performance..."})]}):h?Ce.jsxs("div",{className:"text-center py-8 text-red-500",children:[Ce.jsx("p",{children:"Failed to load branch performance data"}),Ce.jsx(Hc,{variant:"admin",size:"sm",className:"mt-2",onClick:()=>m(),children:"Retry"})]}):b.length>0?Ce.jsxs(Ce.Fragment,{children:[b.map(e=>Ce.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[Ce.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ce.jsx("h4",{className:"font-semibold text-slate-900",children:e.name}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsxs(Yd,{className:e.growth>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:[e.growth>0?"+":"",e.growth,"%"]}),Ce.jsx(Yd,{variant:e.is_active?"default":"secondary",children:e.is_active?"Active":"Inactive"})]})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-slate-600",children:"Revenue"}),Ce.jsx("p",{className:"font-semibold",children:Kp(e.revenue)})]}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-slate-600",children:"Patients"}),Ce.jsx("p",{className:"font-semibold",children:e.patients})]}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-slate-600",children:"Appointments"}),Ce.jsx("p",{className:"font-semibold",children:e.appointments})]}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-slate-600",children:"Low Stock Alerts"}),Ce.jsx("p",{className:"font-semibold text-red-600",children:e.low_stock_alerts})]})]}),Ce.jsx(Sp,{value:Math.min(e.revenue/5e4*100,100),className:"mt-2 h-2"})]},e.id)),Ce.jsx(Hc,{variant:"admin",size:"sm",className:"w-full mt-3",onClick:()=>i("/admin/analytics"),children:"Detailed Branch Report"})]}):Ce.jsxs("div",{className:"text-center py-8 text-gray-500",children:[Ce.jsx("p",{children:"No branch performance data available."}),Ce.jsx(Hc,{variant:"admin",size:"sm",className:"mt-2",onClick:()=>m(),children:"Retry"})]})})]}),Ce.jsxs(td,{className:"shadow-lg border-0",children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(tn,{className:"h-5 w-5 text-admin"}),Ce.jsx("span",{children:"Top Selling Products"})]}),Ce.jsx(ad,{children:"all"===o?"Best performing products this month":`Best performing products at ${(null==(s=b[0])?void 0:s.name)||"selected branch"}`})]}),Ce.jsxs(sd,{className:"space-y-3",children:[f?Ce.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-admin"}),Ce.jsx("span",{className:"ml-2",children:"Loading products..."})]}):x?Ce.jsxs("div",{className:"text-center py-8 text-red-500",children:[Ce.jsx("p",{children:"Failed to load top products data"}),Ce.jsx(Hc,{variant:"admin",size:"sm",className:"mt-2",onClick:()=>y(),children:"Retry"})]}):j.length>0?j.map((e,t)=>Ce.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[Ce.jsxs("div",{className:"flex-1",children:[Ce.jsx("h4",{className:"font-medium text-slate-900",children:e.name}),Ce.jsxs("p",{className:"text-sm text-slate-600",children:[e.units_sold," units sold"]})]}),Ce.jsxs("div",{className:"text-right",children:[Ce.jsx("p",{className:"font-semibold text-slate-900",children:Kp(e.revenue)}),Ce.jsxs("p",{className:"text-sm "+(e.trend_percentage>0?"text-green-600":"text-red-600"),children:[e.trend_percentage>0?"+":"",e.trend_percentage,"%"]})]})]},e.id)):Ce.jsxs("div",{className:"text-center py-8 text-gray-500",children:[Ce.jsx("p",{children:"No product sales data available"}),Ce.jsx("p",{className:"text-xs mt-1",children:"Data will appear when products are sold"})]}),Ce.jsx(Hc,{variant:"admin",size:"sm",className:"w-full mt-3",onClick:()=>i("/admin/products"),children:"Manage Products"})]})]})]})]})};function Gp(...e){return is(Vr(e))}const Xp=jt,Qp=wt,Jp=bt,Zp=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(ft,{ref:r,className:Gp("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Zp.displayName=ft.displayName;const ef=Ct.forwardRef(({className:e,children:t,...r},n)=>Ce.jsxs(Jp,{children:[Ce.jsx(Zp,{}),Ce.jsxs(xt,{ref:n,className:Gp("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,Ce.jsxs(yt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[Ce.jsx(pa,{className:"h-4 w-4"}),Ce.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ef.displayName=xt.displayName;const tf=({className:e,...t})=>Ce.jsx("div",{className:Gp("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});tf.displayName="DialogHeader";const rf=({className:e,...t})=>Ce.jsx("div",{className:Gp("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});rf.displayName="DialogFooter";const nf=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(vt,{ref:r,className:Gp("text-lg font-semibold leading-none tracking-tight",e),...t}));nf.displayName=vt.displayName;const af=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(gt,{ref:r,className:Gp("text-sm text-muted-foreground",e),...t}));function sf(...e){return is(Vr(e))}af.displayName=gt.displayName;const of=Kr("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),lf=Ct.forwardRef(({className:e,variant:t,...r},n)=>Ce.jsx("div",{ref:n,role:"alert",className:sf(of({variant:t}),e),...r}));lf.displayName="Alert";Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("h5",{ref:r,className:sf("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";const cf=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("div",{ref:r,className:sf("text-sm [&_p]:leading-relaxed",e),...t}));cf.displayName="AlertDescription";const df="http://127.0.0.1:8000/api",uf=()=>{var e;const{user:t}=Lc(),[r,n]=Ct.useState([]),[a,s]=Ct.useState(!0),[i,o]=Ct.useState(null),[l,c]=Ct.useState(""),[d,u]=Ct.useState(""),[h,m]=Ct.useState("all"),[p,f]=Ct.useState(!1),[x,y]=Ct.useState(!1),[v,g]=Ct.useState(null),[b,j]=Ct.useState(null),[w,N]=Ct.useState(null),[S,_]=Ct.useState({product_name:"",sku:"",description:"",quantity:"",min_threshold:"",unit_price:"",manufacturer_id:"",expiry_date:"",image_path:""}),k=Ct.useCallback(async()=>{var e,r;if(null==t?void 0:t.branch_id)try{s(!0),o(null);const e=await Ac.get(`${df}/inventory/enhanced?branch_id=${t.branch_id}`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`},timeout:1e4});n(e.data.inventories||[])}catch(a){console.error("Error loading inventory:",a),o((null==(r=null==(e=a.response)?void 0:e.data)?void 0:r.message)||"Failed to load inventory")}finally{s(!1)}},[null==t?void 0:t.branch_id]);Ct.useEffect(()=>{k()},[k]),Ct.useEffect(()=>{const e=setTimeout(()=>{u(l)},300);return()=>clearTimeout(e)},[l]);const O=Ct.useCallback(async e=>{var r,n;e.preventDefault();try{let e=S.image_path;if(b){const t=new FormData;t.append("image",b),t.append("folder","products");e=(await Ac.post(`${df}/upload/image`,t,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"multipart/form-data"}})).data.image_path}const r={...S,branch_id:null==t?void 0:t.branch_id,image_path:e,quantity:parseInt(S.quantity),min_threshold:parseInt(S.min_threshold),unit_price:parseFloat(S.unit_price)||0,manufacturer_id:S.manufacturer_id||null,expiry_date:S.expiry_date||null};await Ac.post(`${df}/enhanced-inventory`,r,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}}),f(!1),C(),k()}catch(a){console.error("Error adding item:",a),o((null==(n=null==(r=a.response)?void 0:r.data)?void 0:n.message)||"Failed to add item")}},[S,b,null==t?void 0:t.branch_id,k]),C=()=>{_({product_name:"",sku:"",description:"",quantity:"",min_threshold:"",unit_price:"",manufacturer_id:"",expiry_date:"",image_path:""}),j(null),N(null)},A=e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(r){j(r);const e=new FileReader;e.onload=e=>{var t;N(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(r)}},E=e=>{switch(e){case"in_stock":return"bg-green-100 text-green-800";case"low_stock":return"bg-yellow-100 text-yellow-800";case"out_of_stock":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},P=Ct.useMemo(()=>r.filter(e=>{const t=e.product_name.toLowerCase().includes(d.toLowerCase())||e.sku.toLowerCase().includes(d.toLowerCase()),r="all"===h||e.status===h;return t&&r}),[r,d,h]),T=Ct.useMemo(()=>({inStock:P.filter(e=>"in_stock"===e.status).length,lowStock:P.filter(e=>"low_stock"===e.status).length,outOfStock:P.filter(e=>"out_of_stock"===e.status).length}),[P]),M=()=>Ce.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:Ce.jsxs("div",{className:"p-6 space-y-6",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"flex items-center gap-4",children:[Ce.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg animate-pulse"}),Ce.jsxs("div",{children:[Ce.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse mb-2"}),Ce.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"})]})]}),Ce.jsx("div",{className:"h-10 w-24 bg-gray-200 rounded animate-pulse"})]}),Ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx("div",{className:"h-4 w-20 bg-gray-200 rounded animate-pulse"}),Ce.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded animate-pulse"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"h-8 w-12 bg-gray-200 rounded animate-pulse"})})]},e))}),Ce.jsx(td,{children:Ce.jsx(sd,{className:"p-4",children:Ce.jsxs("div",{className:"flex gap-4",children:[Ce.jsx("div",{className:"flex-1 h-10 bg-gray-200 rounded animate-pulse"}),Ce.jsx("div",{className:"w-48 h-10 bg-gray-200 rounded animate-pulse"})]})})}),Ce.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>Ce.jsx(td,{children:Ce.jsx(sd,{className:"p-4",children:Ce.jsxs("div",{className:"flex items-start gap-4",children:[Ce.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg animate-pulse"}),Ce.jsxs("div",{className:"flex-1 space-y-2",children:[Ce.jsx("div",{className:"h-6 w-48 bg-gray-200 rounded animate-pulse"}),Ce.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"}),Ce.jsx("div",{className:"h-4 w-64 bg-gray-200 rounded animate-pulse"})]}),Ce.jsxs("div",{className:"flex flex-col gap-2",children:[Ce.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse"}),Ce.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse"}),Ce.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse"})]})]})})},e))})]})});return a?Ce.jsx(M,{}):Ce.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:Ce.jsxs("div",{className:"p-6 space-y-6",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"flex items-center gap-4",children:[Ce.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:Ce.jsx(Fn,{className:"w-6 h-6 text-white"})}),Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Branch Inventory"}),Ce.jsxs("p",{className:"text-gray-600",children:["Manage inventory for ",(null==(e=null==t?void 0:t.branch)?void 0:e.name)||"your branch"]})]})]}),Ce.jsxs(Hc,{onClick:()=>f(!0),className:"flex items-center gap-2",children:[Ce.jsx(zn,{className:"h-4 w-4"}),"Add Item"]})]}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Total Items"}),Ce.jsx(Fn,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"text-2xl font-bold",children:P.length})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"In Stock"}),Ce.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"text-2xl font-bold text-green-600",children:T.inStock})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Low Stock"}),Ce.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:T.lowStock})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Out of Stock"}),Ce.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"text-2xl font-bold text-red-600",children:T.outOfStock})})]})]}),Ce.jsx(td,{children:Ce.jsx(sd,{className:"p-4",children:Ce.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[Ce.jsx("div",{className:"flex-1",children:Ce.jsxs("div",{className:"relative",children:[Ce.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),Ce.jsx(Yc,{placeholder:"Search by product name or SKU...",value:l,onChange:e=>c(e.target.value),className:"pl-10"})]})}),Ce.jsx("div",{className:"w-full sm:w-48",children:Ce.jsxs(Dm,{value:h,onValueChange:m,children:[Ce.jsxs(Rm,{children:[Ce.jsx(_n,{className:"h-4 w-4 mr-2"}),Ce.jsx(Im,{placeholder:"Filter by status"})]}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"all",children:"All Status"}),Ce.jsx(qm,{value:"in_stock",children:"In Stock"}),Ce.jsx(qm,{value:"low_stock",children:"Low Stock"}),Ce.jsx(qm,{value:"out_of_stock",children:"Out of Stock"})]})]})})]})})}),i&&Ce.jsxs(lf,{variant:"destructive",children:[Ce.jsx(Jr,{className:"h-4 w-4"}),Ce.jsx(cf,{children:i})]}),Ce.jsxs("div",{className:"space-y-4",children:[P.map(e=>{var t;return Ce.jsx(td,{className:"hover:shadow-md transition-shadow",children:Ce.jsx(sd,{className:"p-4",children:Ce.jsxs("div",{className:"flex items-start gap-4",children:[Ce.jsx("div",{className:"flex-shrink-0",children:e.image_path?Ce.jsx("img",{src:e.image_path.startsWith("http")?e.image_path:`http://127.0.0.1:8000/storage/${e.image_path}`,alt:e.product_name,className:"w-20 h-20 object-cover rounded-lg border border-gray-200",onError:e=>{e.currentTarget.src="/placeholder-product.png"}}):Ce.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center",children:Ce.jsx(Fn,{className:"h-8 w-8 text-gray-400"})})}),Ce.jsxs("div",{className:"flex-1 min-w-0",children:[Ce.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ce.jsx("h3",{className:"font-medium text-lg truncate",children:e.product_name}),Ce.jsx(Yd,{className:E(e.status),children:e.status.replace("_"," ")})]}),Ce.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600 mb-3",children:[Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"SKU:"})," ",e.sku]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Quantity:"})," ",e.quantity]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Min Threshold:"})," ",e.min_threshold]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Unit Price:"})," ₱",(null==(t=e.unit_price)?void 0:t.toFixed(2))||"0.00"]})]}),e.description&&Ce.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:e.description}),e.expiry_date&&Ce.jsxs("p",{className:"text-sm text-gray-500",children:["Expires: ",new Date(e.expiry_date).toLocaleDateString()]})]}),Ce.jsxs("div",{className:"flex flex-col gap-2",children:[("low_stock"===e.status||"out_of_stock"===e.status)&&Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(async e=>{var t,r;try{await Ac.post(`${df}/enhanced-inventory/${e.id}/alert`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),alert("Low stock alert sent to admin!")}catch(n){console.error("Error sending alert:",n),o((null==(r=null==(t=n.response)?void 0:t.data)?void 0:r.message)||"Failed to send alert")}})(e),className:"text-yellow-600 border-yellow-600 hover:bg-yellow-50 hover:text-yellow-700",children:[Ce.jsx(an,{className:"h-3 w-3 mr-1"}),"Alert Admin"]}),Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(e=>{var t;g(e),_({product_name:e.product_name,sku:e.sku,description:e.description||"",quantity:e.quantity.toString(),min_threshold:e.min_threshold.toString(),unit_price:(null==(t=e.unit_price)?void 0:t.toString())||"",manufacturer_id:e.manufacturer_id||"",expiry_date:e.expiry_date||"",image_path:e.image_path||""}),N(e.image_path||null),y(!0)})(e),children:[Ce.jsx(Bn,{className:"h-3 w-3 mr-1"}),"Edit"]}),Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(async e=>{var t,r;if(confirm("Are you sure you want to delete this item?"))try{await Ac.delete(`${df}/enhanced-inventory/${e}`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}}),k()}catch(n){console.error("Error deleting item:",n),o((null==(r=null==(t=n.response)?void 0:t.data)?void 0:r.message)||"Failed to delete item")}})(e.id),className:"text-red-600 border-red-600 hover:bg-red-50 hover:text-red-700",children:[Ce.jsx(na,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})})},e.id)}),0===P.length&&!a&&Ce.jsx(td,{children:Ce.jsxs(sd,{className:"p-8 text-center",children:[Ce.jsx(Fn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inventory items found"}),Ce.jsx("p",{className:"text-gray-600 mb-4",children:l||"all"!==h?"Try adjusting your search or filter criteria.":"Get started by adding your first inventory item."}),Ce.jsxs(Hc,{onClick:()=>f(!0),children:[Ce.jsx(zn,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})})]}),Ce.jsx(Xp,{open:p,onOpenChange:f,children:Ce.jsxs(ef,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Add New Inventory Item"}),Ce.jsx(af,{children:"Add a new product to your branch inventory."})]}),Ce.jsxs("form",{onSubmit:O,className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"product_name",children:"Product Name *"}),Ce.jsx(Yc,{id:"product_name",value:S.product_name,onChange:e=>_({...S,product_name:e.target.value}),required:!0})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"sku",children:"SKU *"}),Ce.jsx(Yc,{id:"sku",value:S.sku,onChange:e=>_({...S,sku:e.target.value}),required:!0})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"description",children:"Description"}),Ce.jsx(fh,{id:"description",value:S.description,onChange:e=>_({...S,description:e.target.value}),rows:3})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"quantity",children:"Quantity *"}),Ce.jsx(Yc,{id:"quantity",type:"number",value:S.quantity,onChange:e=>_({...S,quantity:e.target.value}),required:!0})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"min_threshold",children:"Min Threshold *"}),Ce.jsx(Yc,{id:"min_threshold",type:"number",value:S.min_threshold,onChange:e=>_({...S,min_threshold:e.target.value}),required:!0})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"manufacturer_id",children:"Manufacturer ID"}),Ce.jsx(Yc,{id:"manufacturer_id",type:"text",value:S.manufacturer_id,onChange:e=>_({...S,manufacturer_id:e.target.value}),placeholder:"Enter manufacturer ID (optional)"})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"unit_price",children:"Unit Price"}),Ce.jsx(Yc,{id:"unit_price",type:"number",step:"0.01",value:S.unit_price,onChange:e=>_({...S,unit_price:e.target.value})})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"expiry_date",children:"Expiry Date"}),Ce.jsx(Yc,{id:"expiry_date",type:"date",value:S.expiry_date,onChange:e=>_({...S,expiry_date:e.target.value})})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"image",children:"Product Image"}),Ce.jsx(Yc,{id:"image",type:"file",accept:"image/*",onChange:A}),w&&Ce.jsx("div",{className:"mt-2",children:Ce.jsx("img",{src:w,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg border border-gray-200"})})]}),Ce.jsxs(rf,{children:[Ce.jsx(Hc,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),Ce.jsx(Hc,{type:"submit",children:"Add Item"})]})]})]})}),Ce.jsx(Xp,{open:x,onOpenChange:y,children:Ce.jsxs(ef,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Edit Inventory Item"}),Ce.jsx(af,{children:"Update the inventory item details."})]}),Ce.jsxs("form",{onSubmit:async e=>{var t,r;if(e.preventDefault(),v)try{let e=S.image_path;if(b){const t=new FormData;t.append("image",b),t.append("folder","products");e=(await Ac.post(`${df}/upload/image`,t,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"multipart/form-data"}})).data.image_path}const t={...S,image_path:e,quantity:parseInt(S.quantity),min_threshold:parseInt(S.min_threshold),unit_price:parseFloat(S.unit_price)||0,manufacturer_id:S.manufacturer_id||null,expiry_date:S.expiry_date||null};await Ac.put(`${df}/enhanced-inventory/${v.id}`,t,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}}),y(!1),g(null),C(),k()}catch(n){console.error("Error updating item:",n),o((null==(r=null==(t=n.response)?void 0:t.data)?void 0:r.message)||"Failed to update item")}},className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit_product_name",children:"Product Name *"}),Ce.jsx(Yc,{id:"edit_product_name",value:S.product_name,onChange:e=>_({...S,product_name:e.target.value}),required:!0})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit_sku",children:"SKU *"}),Ce.jsx(Yc,{id:"edit_sku",value:S.sku,onChange:e=>_({...S,sku:e.target.value}),required:!0})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit_description",children:"Description"}),Ce.jsx(fh,{id:"edit_description",value:S.description,onChange:e=>_({...S,description:e.target.value}),rows:3})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit_quantity",children:"Quantity *"}),Ce.jsx(Yc,{id:"edit_quantity",type:"number",value:S.quantity,onChange:e=>_({...S,quantity:e.target.value}),required:!0})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit_min_threshold",children:"Min Threshold *"}),Ce.jsx(Yc,{id:"edit_min_threshold",type:"number",value:S.min_threshold,onChange:e=>_({...S,min_threshold:e.target.value}),required:!0})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit_manufacturer_id",children:"Manufacturer ID"}),Ce.jsx(Yc,{id:"edit_manufacturer_id",type:"text",value:S.manufacturer_id,onChange:e=>_({...S,manufacturer_id:e.target.value}),placeholder:"Enter manufacturer ID (optional)"})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit_unit_price",children:"Unit Price"}),Ce.jsx(Yc,{id:"edit_unit_price",type:"number",step:"0.01",value:S.unit_price,onChange:e=>_({...S,unit_price:e.target.value})})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit_expiry_date",children:"Expiry Date"}),Ce.jsx(Yc,{id:"edit_expiry_date",type:"date",value:S.expiry_date,onChange:e=>_({...S,expiry_date:e.target.value})})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit_image",children:"Product Image"}),Ce.jsx(Yc,{id:"edit_image",type:"file",accept:"image/*",onChange:A}),w&&Ce.jsx("div",{className:"mt-2",children:Ce.jsx("img",{src:w,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg border border-gray-200"})})]}),Ce.jsxs(rf,{children:[Ce.jsx(Hc,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"}),Ce.jsx(Hc,{type:"submit",children:"Update Item"})]})]})]})})]})})},hf="http://127.0.0.1:8000/api",mf=()=>{var e,t;const{user:r}=Lc(),[n,a]=Ct.useState([]),[s,i]=Ct.useState(""),[o,l]=Ct.useState(null),[c,d]=Ct.useState(!0),[u,h]=Ct.useState(null),[m,p]=Ct.useState(null),[f,x]=Ct.useState(""),[y,v]=Ct.useState("all"),[g,b]=Ct.useState(!1),[j,w]=Ct.useState(!1),[N,S]=Ct.useState(!1),[_,k]=Ct.useState(null),[O,C]=Ct.useState({name:"",sku:"",description:"",brand:"",model:"",price:"",stock_quantity:"",min_stock_threshold:"5",expiry_date:""});Ct.useEffect(()=>{var e;(null==(e=null==r?void 0:r.branch)?void 0:e.id)?(i(r.branch.id.toString()),d(!1)):(h("No branch assigned to your account"),d(!1))},[null==(e=null==r?void 0:r.branch)?void 0:e.id]);const A=Ct.useCallback(async()=>{var e,t;if(s)try{d(!0),h(null);const e=sessionStorage.getItem("auth_token"),t=await Ac.get(`${hf}/inventory/enhanced?branch_id=${s}`,{headers:{Authorization:`Bearer ${e}`}});a(t.data.inventories||[]),l(t.data.summary||null)}catch(r){console.error("Error loading inventory:",r),h((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Failed to load inventory")}finally{d(!1)}else d(!1)},[s]);Ct.useEffect(()=>{A();const e=setInterval(A,3e4);return()=>clearInterval(e)},[A]);const E=()=>{C({name:"",sku:"",description:"",brand:"",model:"",price:"",stock_quantity:"",min_stock_threshold:"5",expiry_date:""})},P=Ct.useMemo(()=>{console.log("Filtering inventory:",{totalItems:n.length,statusFilter:y,searchTerm:f,uniqueStatuses:[...new Set(n.map(e=>e.status))]});const e=n.filter(e=>{var t,r,n;const a=""===f||e.product_name.toLowerCase().includes(f.toLowerCase())||e.sku.toLowerCase().includes(f.toLowerCase())||(null==(t=e.brand)?void 0:t.toLowerCase().includes(f.toLowerCase()))||(null==(r=e.model)?void 0:r.toLowerCase().includes(f.toLowerCase())),s=null==(n=e.status)?void 0:n.toLowerCase().replace(/\s+/g,"_"),i=y.toLowerCase().replace(/\s+/g,"_");return a&&("all"===y||s===i)});return console.log("Filtered results:",e.length,"items with status filter:",y),e},[n,f,y]),T=e=>{switch(e){case"in_stock":return Ce.jsxs(Yd,{className:"bg-green-500",children:[Ce.jsx(dn,{className:"h-3 w-3 mr-1"}),"In Stock"]});case"low_stock":return Ce.jsxs(Yd,{className:"bg-yellow-500",children:[Ce.jsx(Qr,{className:"h-3 w-3 mr-1"}),"Low Stock"]});case"out_of_stock":return Ce.jsxs(Yd,{className:"bg-red-500",children:[Ce.jsx(Jr,{className:"h-3 w-3 mr-1"}),"Out of Stock"]});default:return Ce.jsx(Yd,{variant:"secondary",children:e})}};return c&&!n.length?Ce.jsxs("div",{className:"flex items-center justify-center h-96",children:[Ce.jsx(Vn,{className:"h-8 w-8 animate-spin text-primary"}),Ce.jsx("span",{className:"ml-2",children:"Loading inventory..."})]}):Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-3xl font-bold",children:"Branch Inventory Management"}),Ce.jsx("p",{className:"text-muted-foreground mt-1",children:(null==(t=null==r?void 0:r.branch)?void 0:t.name)?`Managing inventory for ${r.branch.name}`:"Manage products for your branch"})]}),Ce.jsxs("div",{className:"flex gap-2",children:[Ce.jsxs(Hc,{onClick:A,variant:"outline",className:"gap-2",children:[Ce.jsx(Vn,{className:"h-4 w-4"}),"Refresh"]}),Ce.jsxs(Hc,{onClick:()=>{E(),b(!0)},className:"gap-2",children:[Ce.jsx(zn,{className:"h-4 w-4"}),"Add Product"]})]})]}),u&&Ce.jsxs(lf,{variant:"destructive",children:[Ce.jsx(Jr,{className:"h-4 w-4"}),Ce.jsx(cf,{children:u})]}),m&&Ce.jsxs(lf,{className:"bg-green-50 border-green-200",children:[Ce.jsx(dn,{className:"h-4 w-4 text-green-600"}),Ce.jsx(cf,{className:"text-green-800",children:m})]}),o&&Ce.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Total Items"}),Ce.jsx(Fn,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"text-2xl font-bold",children:o.total_items})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"In Stock"}),Ce.jsx(sa,{className:"h-4 w-4 text-green-600"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.in_stock})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Low Stock"}),Ce.jsx(Qr,{className:"h-4 w-4 text-yellow-600"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:o.low_stock})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Out of Stock"}),Ce.jsx(aa,{className:"h-4 w-4 text-red-600"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"text-2xl font-bold text-red-600",children:o.out_of_stock})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Total Value"}),Ce.jsx(Fn,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"text-2xl font-bold",children:["₱",Number(o.total_value||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})})]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Filters"})}),Ce.jsxs(sd,{className:"flex gap-4",children:[Ce.jsxs("div",{className:"flex-1",children:[Ce.jsx(Zc,{htmlFor:"search",children:"Search"}),Ce.jsxs("div",{className:"relative",children:[Ce.jsx(Yn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),Ce.jsx(Yc,{id:"search",placeholder:"Search by name, SKU, brand...",value:f,onChange:e=>x(e.target.value),className:"pl-8"})]})]}),Ce.jsxs("div",{className:"w-48",children:[Ce.jsx(Zc,{htmlFor:"status",children:"Status Filter"}),Ce.jsxs("select",{id:"status",value:y,onChange:e=>v(e.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2",children:[Ce.jsx("option",{value:"all",children:"All Status"}),Ce.jsx("option",{value:"in_stock",children:"In Stock"}),Ce.jsx("option",{value:"low_stock",children:"Low Stock"}),Ce.jsx("option",{value:"out_of_stock",children:"Out of Stock"})]})]})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{children:["Inventory Items (",P.length,")"]}),Ce.jsx(ad,{children:"Products available in your branch"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"overflow-x-auto",children:Ce.jsxs("table",{className:"w-full",children:[Ce.jsx("thead",{children:Ce.jsxs("tr",{className:"border-b",children:[Ce.jsx("th",{className:"text-left p-2",children:"Product"}),Ce.jsx("th",{className:"text-left p-2",children:"SKU"}),Ce.jsx("th",{className:"text-left p-2",children:"Brand/Model"}),Ce.jsx("th",{className:"text-right p-2",children:"Stock"}),Ce.jsx("th",{className:"text-right p-2",children:"Available"}),Ce.jsx("th",{className:"text-right p-2",children:"Min. Threshold"}),Ce.jsx("th",{className:"text-right p-2",children:"Price"}),Ce.jsx("th",{className:"text-center p-2",children:"Status"}),Ce.jsx("th",{className:"text-center p-2",children:"Actions"})]})}),Ce.jsx("tbody",{children:0===P.length?Ce.jsx("tr",{children:Ce.jsx("td",{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No inventory items found"})}):P.map(e=>Ce.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[Ce.jsx("td",{className:"p-2 font-medium",children:e.product_name}),Ce.jsx("td",{className:"p-2 text-sm text-muted-foreground",children:e.sku}),Ce.jsx("td",{className:"p-2 text-sm",children:e.brand&&e.model?`${e.brand} - ${e.model}`:e.brand||e.model||"-"}),Ce.jsx("td",{className:"p-2 text-right",children:e.stock_quantity}),Ce.jsx("td",{className:"p-2 text-right font-medium",children:e.available_quantity}),Ce.jsx("td",{className:"p-2 text-right text-muted-foreground",children:e.min_threshold}),Ce.jsxs("td",{className:"p-2 text-right",children:["₱",Number(e.effective_price||0).toFixed(2)]}),Ce.jsx("td",{className:"p-2 text-center",children:T(e.status)}),Ce.jsx("td",{className:"p-2",children:Ce.jsxs("div",{className:"flex justify-center gap-2",children:[Ce.jsx(Hc,{variant:"ghost",size:"sm",onClick:()=>(e=>{k(e),C({name:e.product_name,sku:e.sku,description:e.description||"",brand:e.brand||"",model:e.model||"",price:(e.price_override||e.price).toString(),stock_quantity:e.stock_quantity.toString(),min_stock_threshold:e.min_threshold.toString(),expiry_date:e.expiry_date||""}),w(!0)})(e),children:Ce.jsx(Bn,{className:"h-4 w-4"})}),Ce.jsx(Hc,{variant:"ghost",size:"sm",onClick:()=>(e=>{k(e),S(!0)})(e),className:"text-red-600 hover:text-red-700",children:Ce.jsx(na,{className:"h-4 w-4"})})]})})]},e.id))})]})})})]}),Ce.jsx(Xp,{open:g,onOpenChange:b,children:Ce.jsxs(ef,{className:"max-w-2xl",children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Add New Product"}),Ce.jsx(af,{children:"Add a new product to your branch inventory"})]}),Ce.jsxs("form",{onSubmit:async e=>{var t,r;if(e.preventDefault(),s)try{h(null);const e=sessionStorage.getItem("auth_token");await Ac.post(`${hf}/enhanced-inventory`,{branch_id:s,product_name:O.name,sku:O.sku,description:O.description,brand:O.brand,model:O.model,unit_price:parseFloat(O.price),quantity:parseInt(O.stock_quantity),min_threshold:parseInt(O.min_stock_threshold),expiry_date:O.expiry_date||null},{headers:{Authorization:`Bearer ${e}`}}),p("Product added successfully!"),b(!1),E(),A(),setTimeout(()=>p(null),3e3)}catch(n){console.error("Error adding product:",n),h((null==(r=null==(t=n.response)?void 0:t.data)?void 0:r.message)||"Failed to add product")}else h("Please select a branch first")},children:[Ce.jsxs("div",{className:"grid gap-4 py-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"name",children:"Product Name *"}),Ce.jsx(Yc,{id:"name",value:O.name,onChange:e=>C({...O,name:e.target.value}),required:!0})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"sku",children:"SKU *"}),Ce.jsx(Yc,{id:"sku",value:O.sku,onChange:e=>C({...O,sku:e.target.value}),required:!0})]})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"brand",children:"Brand"}),Ce.jsx(Yc,{id:"brand",value:O.brand,onChange:e=>C({...O,brand:e.target.value})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"model",children:"Model"}),Ce.jsx(Yc,{id:"model",value:O.model,onChange:e=>C({...O,model:e.target.value})})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"description",children:"Description"}),Ce.jsx(fh,{id:"description",value:O.description,onChange:e=>C({...O,description:e.target.value}),rows:3})]}),Ce.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"price",children:"Price *"}),Ce.jsx(Yc,{id:"price",type:"number",step:"0.01",min:"0",value:O.price,onChange:e=>C({...O,price:e.target.value}),required:!0})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"stock_quantity",children:"Stock Quantity *"}),Ce.jsx(Yc,{id:"stock_quantity",type:"number",min:"0",value:O.stock_quantity,onChange:e=>C({...O,stock_quantity:e.target.value}),required:!0})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"min_stock_threshold",children:"Min. Threshold"}),Ce.jsx(Yc,{id:"min_stock_threshold",type:"number",min:"0",value:O.min_stock_threshold,onChange:e=>C({...O,min_stock_threshold:e.target.value})})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"expiry_date",children:"Expiry Date (Optional)"}),Ce.jsx(Yc,{id:"expiry_date",type:"date",value:O.expiry_date,onChange:e=>C({...O,expiry_date:e.target.value})})]})]}),Ce.jsxs(rf,{children:[Ce.jsx(Hc,{type:"button",variant:"outline",onClick:()=>{b(!1),E()},children:"Cancel"}),Ce.jsx(Hc,{type:"submit",children:"Add Product"})]})]})]})}),Ce.jsx(Xp,{open:j,onOpenChange:w,children:Ce.jsxs(ef,{children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Update Stock"}),Ce.jsxs(af,{children:["Update stock quantity and settings for ",null==_?void 0:_.product_name]})]}),Ce.jsxs("form",{onSubmit:async e=>{var t,r,n,a,s;if(e.preventDefault(),_)try{h(null);const e={quantity:parseInt(O.stock_quantity),min_threshold:parseInt(O.min_stock_threshold),brand:O.brand,model:O.model};O.price&&""!==O.price.trim()&&(e.unit_price=parseFloat(O.price)),O.expiry_date&&""!==O.expiry_date.trim()&&(e.expiry_date=O.expiry_date),console.log("Updating inventory with payload:",e);const t=sessionStorage.getItem("auth_token");await Ac.put(`${hf}/enhanced-inventory/${_.id}`,e,{headers:{Authorization:`Bearer ${t}`}}),p("Inventory updated successfully!"),w(!1),k(null),E(),A(),setTimeout(()=>p(null),3e3)}catch(i){console.error("Error updating inventory:",i),console.error("Full error response:",null==(t=i.response)?void 0:t.data);const e=(null==(n=null==(r=i.response)?void 0:r.data)?void 0:n.error)||(null==(s=null==(a=i.response)?void 0:a.data)?void 0:s.message)||"Failed to update inventory";h(e)}},children:[Ce.jsxs("div",{className:"grid gap-4 py-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"edit_stock_quantity",children:"Stock Quantity *"}),Ce.jsx(Yc,{id:"edit_stock_quantity",type:"number",min:"0",value:O.stock_quantity,onChange:e=>C({...O,stock_quantity:e.target.value}),required:!0})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"edit_min_threshold",children:"Min. Threshold"}),Ce.jsx(Yc,{id:"edit_min_threshold",type:"number",min:"0",value:O.min_stock_threshold,onChange:e=>C({...O,min_stock_threshold:e.target.value})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"edit_price",children:"Price Override (Optional)"}),Ce.jsx(Yc,{id:"edit_price",type:"number",step:"0.01",min:"0",value:O.price,onChange:e=>C({...O,price:e.target.value})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"edit_expiry_date",children:"Expiry Date (Optional)"}),Ce.jsx(Yc,{id:"edit_expiry_date",type:"date",value:O.expiry_date,onChange:e=>C({...O,expiry_date:e.target.value})})]})]}),Ce.jsxs(rf,{children:[Ce.jsx(Hc,{type:"button",variant:"outline",onClick:()=>{w(!1),k(null)},children:"Cancel"}),Ce.jsx(Hc,{type:"submit",children:"Update"})]})]})]})}),Ce.jsx(Xp,{open:N,onOpenChange:S,children:Ce.jsxs(ef,{children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Confirm Deletion"}),Ce.jsxs(af,{children:['Are you sure you want to remove "',null==_?void 0:_.product_name,'" from your branch inventory? This action cannot be undone.']})]}),Ce.jsxs(rf,{children:[Ce.jsx(Hc,{type:"button",variant:"outline",onClick:()=>{S(!1),k(null)},children:"Cancel"}),Ce.jsx(Hc,{type:"button",variant:"destructive",onClick:async()=>{var e,t;if(_)try{h(null);const e=sessionStorage.getItem("auth_token");await Ac.delete(`${hf}/enhanced-inventory/${_.id}`,{headers:{Authorization:`Bearer ${e}`}}),p("Product removed from inventory successfully!"),S(!1),k(null),A(),setTimeout(()=>p(null),3e3)}catch(r){console.error("Error deleting product:",r),h((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Failed to delete product")}},children:"Delete"})]})]})})]})};var pf="Tabs",[ff,xf]=Pe(pf,[Nt]),yf=Nt(),[vf,gf]=ff(pf),bf=Ct.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:s,orientation:i="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=mt(o),[u,h]=De({prop:n,onChange:a,defaultProp:s??"",caller:pf});return Ce.jsx(vf,{scope:r,baseId:ut(),value:u,onValueChange:h,orientation:i,dir:d,activationMode:l,children:Ce.jsx(Ae.div,{dir:d,"data-orientation":i,...c,ref:t})})});bf.displayName=pf;var jf="TabsList",wf=Ct.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,s=gf(jf,r),i=yf(r);return Ce.jsx(St,{asChild:!0,...i,orientation:s.orientation,dir:s.dir,loop:n,children:Ce.jsx(Ae.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})});wf.displayName=jf;var Nf="TabsTrigger",Sf=Ct.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...s}=e,i=gf(Nf,r),o=yf(r),l=Of(i.baseId,n),c=Cf(i.baseId,n),d=n===i.value;return Ce.jsx(_t,{asChild:!0,...o,focusable:!a,active:d,children:Ce.jsx(Ae.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...s,ref:t,onMouseDown:Le(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(n)}),onKeyDown:Le(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(n)}),onFocus:Le(e.onFocus,()=>{const e="manual"!==i.activationMode;d||a||!e||i.onValueChange(n)})})})});Sf.displayName=Nf;var _f="TabsContent",kf=Ct.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:s,...i}=e,o=gf(_f,r),l=Of(o.baseId,n),c=Cf(o.baseId,n),d=n===o.value,u=Ct.useRef(d);return Ct.useEffect(()=>{const e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),Ce.jsx(Ie,{present:a||d,children:({present:r})=>Ce.jsx(Ae.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!r,id:c,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:r&&s})})});function Of(e,t){return`${e}-trigger-${t}`}function Cf(e,t){return`${e}-content-${t}`}kf.displayName=_f;var Af=wf,Ef=Sf,Pf=kf;function Tf(...e){return is(Vr(e))}const Mf=bf,Df=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(Af,{ref:r,className:Tf("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Df.displayName=Af.displayName;const If=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(Ef,{ref:r,className:Tf("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));If.displayName=Ef.displayName;const Rf=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(Pf,{ref:r,className:Tf("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Rf.displayName=Pf.displayName;const Lf={}.VITE_API_URL||"http://localhost:8000/api",Ff=()=>{Lc();const[e,t]=Ct.useState([]),[r,n]=Ct.useState([]),[a,s]=Ct.useState([]),[i,o]=Ct.useState(!0),[l,c]=Ct.useState(null),[d,u]=Ct.useState(""),[h,m]=Ct.useState("all"),[p,f]=Ct.useState("all"),[x,y]=Ct.useState("all"),[v,g]=Ct.useState("inventory");Ct.useEffect(()=>{b(),j(),w();const e=setInterval(()=>{b()},3e4);return()=>clearInterval(e)},[d,h,p,x]);const b=async()=>{var e,r,n,a,s;try{o(!0),c(null);const a=e=>({in_stock:"In Stock",low_stock:"Low Stock",out_of_stock:"Out of Stock"}[e]||e),s=new URLSearchParams;if(d&&s.append("search",d),"all"!==h){const e=a(h);s.append("status",e)}"all"!==p&&s.append("branch_id",p),"all"!==x&&s.append("manufacturer_id",x),console.log("AdminCentralInventory: Loading with filters:",{searchTerm:d,statusFilter:h,statusFilterConverted:"all"!==h?a(h):"all",branchFilter:p,manufacturerFilter:x});const i=await Ac.get(`${Lf}/inventory/enhanced?${s}`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}});console.log("AdminCentralInventory: Loaded",null==(e=i.data.inventories)?void 0:e.length,"items"),console.log("AdminCentralInventory: Unitop items:",null==(n=null==(r=i.data.inventories)?void 0:r.filter(e=>"2"===e.branch_id||2===e.branch_id))?void 0:n.length),t(i.data.inventories||[])}catch(i){console.error("Error loading inventory:",i),c((null==(s=null==(a=i.response)?void 0:a.data)?void 0:s.message)||"Failed to load inventory")}finally{o(!1)}},j=async()=>{try{const e=await Ac.get(`${Lf}/manufacturers-directory`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}});n(e.data.manufacturers||[])}catch(e){console.error("Error loading manufacturers:",e)}},w=async()=>{try{const e=await Ac.get(`${Lf}/branches`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`}});s(e.data.branches||[])}catch(e){console.error("Error loading branches:",e)}},N=e=>{switch(null==e?void 0:e.toLowerCase().replace(/\s+/g,"_")){case"in_stock":case"in stock":return"bg-green-100 text-green-800";case"low_stock":case"low stock":return"bg-yellow-100 text-yellow-800";case"out_of_stock":case"out of stock":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=e.filter(e=>{var t,r,n;const a=(null==(t=e.product)?void 0:t.name)||"",s=(null==(r=e.product)?void 0:r.sku)||"",i=a.toLowerCase().includes(d.toLowerCase())||s.toLowerCase().includes(d.toLowerCase()),o=null==(n=e.status)?void 0:n.toLowerCase().replace(/\s+/g,"_"),l=h.toLowerCase().replace(/\s+/g,"_"),c="all"===h||o===l,u=String(e.branch_id),m=String(p),f="all"===p||u===m,y="all"===x||e.manufacturer_id===x;return i&&c&&f&&y});console.log("AdminCentralInventory - Filter Results:",{totalItems:e.length,filteredItems:S.length,statusFilter:h,branchFilter:p,searchTerm:d,uniqueStatuses:[...new Set(e.map(e=>e.status))]});const _=e=>null==e?void 0:e.toLowerCase().replace(/\s+/g,"_"),k=S.filter(e=>"in_stock"===_(e.status)),O=S.filter(e=>"low_stock"===_(e.status)),C=S.filter(e=>"out_of_stock"===_(e.status)),A=r.reduce((e,t)=>(e[t.product_line]||(e[t.product_line]=[]),e[t.product_line].push(t),e),{}),E=a.map(t=>{const r=e.filter(e=>e.branch_id===t.id);return{...t,total_items:r.length,in_stock:r.filter(e=>"in_stock"===_(e.status)).length,low_stock:r.filter(e=>"low_stock"===_(e.status)).length,out_of_stock:r.filter(e=>"out_of_stock"===_(e.status)).length}});return Ce.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:Ce.jsxs("div",{className:"p-6 space-y-6",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"flex items-center gap-4",children:[Ce.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:Ce.jsx(Fn,{className:"w-6 h-6 text-white"})}),Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Central Inventory"}),Ce.jsx("p",{className:"text-gray-600",children:"Monitor inventory across all branches"})]})]}),Ce.jsxs(Hc,{onClick:b,disabled:i,variant:"outline",className:"flex items-center gap-2",children:[Ce.jsx(Yn,{className:"h-4 w-4"}),"Refresh"]})]}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Total Items"}),Ce.jsx(Fn,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:S.length}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all branches"})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"In Stock"}),Ce.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold text-green-600",children:k.length}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Available items"})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Low Stock"}),Ce.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:O.length}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Need restocking"})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Out of Stock"}),Ce.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold text-red-600",children:C.length}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Immediate attention needed"})]})]})]}),Ce.jsxs(Mf,{value:v,onValueChange:g,className:"space-y-4",children:[Ce.jsxs(Df,{className:"grid w-full grid-cols-2",children:[Ce.jsx(If,{value:"inventory",children:"Inventory Overview"}),Ce.jsx(If,{value:"manufacturers",children:"Manufacturer Directory"})]}),Ce.jsxs(Rf,{value:"inventory",className:"space-y-4",children:[Ce.jsx(td,{children:Ce.jsx(sd,{className:"p-4",children:Ce.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[Ce.jsxs("div",{className:"flex-1 min-w-[200px]",children:[Ce.jsx(Zc,{htmlFor:"search",children:"Search Items"}),Ce.jsxs("div",{className:"relative",children:[Ce.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),Ce.jsx(Yc,{id:"search",placeholder:"Search by name or SKU...",value:d,onChange:e=>u(e.target.value),className:"pl-10"})]})]}),Ce.jsxs("div",{className:"min-w-[150px]",children:[Ce.jsx(Zc,{htmlFor:"status",children:"Status"}),Ce.jsxs(Dm,{value:h,onValueChange:m,children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Filter by status"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"all",children:"All Status"}),Ce.jsx(qm,{value:"in_stock",children:"In Stock"}),Ce.jsx(qm,{value:"low_stock",children:"Low Stock"}),Ce.jsx(qm,{value:"out_of_stock",children:"Out of Stock"})]})]})]}),Ce.jsxs("div",{className:"min-w-[150px]",children:[Ce.jsx(Zc,{htmlFor:"branch",children:"Branch"}),Ce.jsxs(Dm,{value:p,onValueChange:f,children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Filter by branch"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"all",children:"All Branches"}),a.filter(e=>e.id&&""!==String(e.id).trim()).map(e=>Ce.jsx(qm,{value:String(e.id),children:e.name},e.id))]})]})]}),Ce.jsxs("div",{className:"min-w-[150px]",children:[Ce.jsx(Zc,{htmlFor:"manufacturer",children:"Manufacturer"}),Ce.jsxs(Dm,{value:x,onValueChange:y,children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Filter by manufacturer"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"all",children:"All Manufacturers"}),r.filter(e=>e.id&&""!==String(e.id).trim()).map(e=>Ce.jsx(qm,{value:String(e.id),children:e.name},e.id))]})]})]}),Ce.jsxs(Hc,{onClick:b,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[Ce.jsx(_n,{className:"h-4 w-4"}),"Apply Filters"]})]})})}),Ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(e=>Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center gap-2",children:[Ce.jsx(on,{className:"h-5 w-5"}),e.name]}),Ce.jsx(ad,{children:e.code})]}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{className:"text-sm text-gray-600",children:"Total Items"}),Ce.jsx("span",{className:"font-medium",children:e.total_items})]}),Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{className:"text-sm text-gray-600",children:"In Stock"}),Ce.jsx("span",{className:"font-medium text-green-600",children:e.in_stock})]}),Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{className:"text-sm text-gray-600",children:"Low Stock"}),Ce.jsx("span",{className:"font-medium text-yellow-600",children:e.low_stock})]}),Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{className:"text-sm text-gray-600",children:"Out of Stock"}),Ce.jsx("span",{className:"font-medium text-red-600",children:e.out_of_stock})]})]})})]},e.id))}),Ce.jsxs("div",{className:"space-y-4",children:[S.map(e=>{var t,r,n;return Ce.jsx(td,{children:Ce.jsx(sd,{className:"p-4",children:Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"flex-1",children:[Ce.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ce.jsx("h3",{className:"font-medium",children:(null==(t=e.product)?void 0:t.name)||"Unknown Product"}),Ce.jsx(Yd,{className:N(e.status),children:e.status}),Ce.jsx(Yd,{variant:"outline",children:(null==(r=e.product)?void 0:r.sku)||"N/A"}),Ce.jsx(Yd,{variant:"secondary",children:(null==(n=e.branch)?void 0:n.name)||"Unknown Branch"})]}),Ce.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[Ce.jsxs("div",{className:"flex items-center gap-1",children:[Ce.jsx(Fn,{className:"h-4 w-4"}),Ce.jsxs("span",{className:"font-semibold",children:[e.stock_quantity||0," units"]})]}),(e.reserved_quantity||0)>0&&Ce.jsx("div",{className:"flex items-center gap-1 text-orange-600",children:Ce.jsxs("span",{children:["Reserved: ",e.reserved_quantity]})}),void 0!==e.available_quantity&&Ce.jsx("div",{className:"flex items-center gap-1 text-green-600",children:Ce.jsxs("span",{children:["Available: ",e.available_quantity]})}),Ce.jsxs("div",{className:"flex items-center gap-1",children:[Ce.jsx(Jr,{className:"h-4 w-4"}),Ce.jsxs("span",{children:["Min: ",e.min_stock_threshold||0]})]}),e.price_override&&Ce.jsx("div",{className:"flex items-center gap-1",children:Ce.jsxs("span",{children:["₱",e.price_override]})}),e.expiry_date&&Ce.jsx("div",{className:"flex items-center gap-1",children:Ce.jsxs("span",{children:["Expires: ",new Date(e.expiry_date).toLocaleDateString()]})})]}),e.manufacturer&&Ce.jsx("div",{className:"mt-2",children:Ce.jsxs(Yd,{variant:"outline",className:"text-xs",children:[Ce.jsx(on,{className:"h-3 w-3 mr-1"}),e.manufacturer.name," - ",e.manufacturer.product_line||"N/A"]})})]}),Ce.jsx("div",{className:"flex items-center gap-2",children:Ce.jsxs(Hc,{variant:"outline",size:"sm",children:[Ce.jsx(wn,{className:"h-4 w-4 mr-1"}),"View Details"]})})]})})},e.id)}),0===S.length&&Ce.jsx(td,{children:Ce.jsxs(sd,{className:"p-8 text-center",children:[Ce.jsx(Fn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Inventory Items"}),Ce.jsx("p",{className:"text-gray-600",children:"No inventory items found matching your criteria."})]})})]})]}),Ce.jsx(Rf,{value:"manufacturers",className:"space-y-4",children:Ce.jsxs("div",{className:"space-y-6",children:[Object.entries(A).map(([e,t])=>Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center gap-2",children:[Ce.jsx(nn,{className:"h-5 w-5"}),e]}),Ce.jsxs(ad,{children:[t.length," manufacturer",1!==t.length?"s":""," in this product line"]})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>Ce.jsx(td,{className:"border border-gray-200",children:Ce.jsx(sd,{className:"p-4",children:Ce.jsxs("div",{className:"space-y-3",children:[Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-lg",children:e.name}),Ce.jsx("p",{className:"text-sm text-gray-600",children:e.product_line})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ce.jsx(ua,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{children:e.contact_person})]}),Ce.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ce.jsx(qn,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{children:e.phone})]}),Ce.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ce.jsx(Dn,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{children:e.email})]}),e.address&&Ce.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ce.jsx(In,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{className:"text-xs",children:e.address})]}),e.website&&Ce.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ce.jsx(kn,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs",children:e.website})]})]})]})})},e.id))})})]},e)),0===r.length&&Ce.jsx(td,{children:Ce.jsxs(sd,{className:"p-8 text-center",children:[Ce.jsx(on,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Manufacturers"}),Ce.jsx("p",{className:"text-gray-600",children:"No manufacturers have been added yet."})]})})]})})]})]})})};var Bf="Collapsible",[qf,$f]=Pe(Bf),[zf,Uf]=qf(Bf),Vf=Ct.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:s,onOpenChange:i,...o}=e,[l,c]=De({prop:n,defaultProp:a??!1,onChange:i,caller:Bf});return Ce.jsx(zf,{scope:r,disabled:s,contentId:ut(),open:l,onOpenToggle:Ct.useCallback(()=>c(e=>!e),[c]),children:Ce.jsx(Ae.div,{"data-state":Xf(l),"data-disabled":s?"":void 0,...o,ref:t})})});Vf.displayName=Bf;var Wf="CollapsibleTrigger",Hf=Ct.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,a=Uf(Wf,r);return Ce.jsx(Ae.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Xf(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:t,onClick:Le(e.onClick,a.onOpenToggle)})});Hf.displayName=Wf;var Kf="CollapsibleContent",Yf=Ct.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Uf(Kf,e.__scopeCollapsible);return Ce.jsx(Ie,{present:r||a.open,children:({present:e})=>Ce.jsx(Gf,{...n,ref:t,present:e})})});Yf.displayName=Kf;var Gf=Ct.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:a,...s}=e,i=Uf(Kf,r),[o,l]=Ct.useState(n),c=Ct.useRef(null),d=Te(t,c),u=Ct.useRef(0),h=u.current,m=Ct.useRef(0),p=m.current,f=i.open||o,x=Ct.useRef(f),y=Ct.useRef(void 0);return Ct.useEffect(()=>{const e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),qe(()=>{const e=c.current;if(e){y.current=y.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";const t=e.getBoundingClientRect();u.current=t.height,m.current=t.width,x.current||(e.style.transitionDuration=y.current.transitionDuration,e.style.animationName=y.current.animationName),l(n)}},[i.open,n]),Ce.jsx(Ae.div,{"data-state":Xf(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!f,...s,ref:d,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...e.style},children:f&&a})});function Xf(e){return e?"open":"closed"}const Qf=Vf,Jf=Hf,Zf=Yf,ex=()=>{const{user:e}=Lc(),[t,r]=Ct.useState([]),[n,a]=Ct.useState(null),[s,i]=Ct.useState(!0),[o,l]=Ct.useState(null),[c,d]=Ct.useState(""),[u,h]=Ct.useState(new Set),m=Ct.useCallback(async()=>{var e,t;try{i(!0),l(null);const e=sessionStorage.getItem("auth_token"),t=await Ac.get("http://127.0.0.1:8000/api/inventory/enhanced",{headers:{Authorization:`Bearer ${e}`}});r(t.data.products||[]),a(t.data.summary||null)}catch(n){console.error("Error loading consolidated inventory:",n),l((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to load consolidated inventory")}finally{i(!1)}},[]);Ct.useEffect(()=>{if("admin"!==(null==e?void 0:e.role))return void l("Only administrators can access consolidated inventory view");m();const t=setInterval(m,3e4);return()=>clearInterval(t)},[m,e]);const p=Ct.useMemo(()=>t.filter(e=>{var t,r;return""===c||e.name.toLowerCase().includes(c.toLowerCase())||e.sku.toLowerCase().includes(c.toLowerCase())||(null==(t=e.brand)?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null==(r=e.model)?void 0:r.toLowerCase().includes(c.toLowerCase()))}),[t,c]);return s?Ce.jsxs("div",{className:"flex items-center justify-center h-96",children:[Ce.jsx(Vn,{className:"h-8 w-8 animate-spin text-primary"}),Ce.jsx("span",{className:"ml-2",children:"Loading consolidated inventory..."})]}):"admin"!==(null==e?void 0:e.role)?Ce.jsxs(lf,{variant:"destructive",children:[Ce.jsx(Jr,{className:"h-4 w-4"}),Ce.jsx(cf,{children:"Unauthorized. Only administrators can access this page."})]}):Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-3xl font-bold",children:"Consolidated Inventory"}),Ce.jsx("p",{className:"text-muted-foreground mt-1",children:"System-wide inventory across all branches"})]}),Ce.jsxs(Hc,{onClick:m,variant:"outline",className:"gap-2",children:[Ce.jsx(Vn,{className:"h-4 w-4"}),"Refresh"]})]}),o&&Ce.jsxs(lf,{variant:"destructive",children:[Ce.jsx(Jr,{className:"h-4 w-4"}),Ce.jsx(cf,{children:o})]}),n&&Ce.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Total Products"}),Ce.jsx(Fn,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"text-2xl font-bold",children:n.total_products})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Total Stock Value"}),Ce.jsx(gn,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"text-2xl font-bold",children:["₱",Number(n.total_stock_value||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Low Stock Products"}),Ce.jsx(Qr,{className:"h-4 w-4 text-yellow-600"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:n.low_stock_count})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Out of Stock"}),Ce.jsx(aa,{className:"h-4 w-4 text-red-600"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.out_of_stock_count})})]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Search Products"})}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"relative",children:[Ce.jsx(Yn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),Ce.jsx(Yc,{placeholder:"Search by name, SKU, brand, or model...",value:c,onChange:e=>d(e.target.value),className:"pl-8"})]})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{children:["Products (",p.length,")"]}),Ce.jsx(ad,{children:"Click on a product to view branch-specific availability"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"space-y-2",children:0===p.length?Ce.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No products found"}):p.map(e=>{const t=(r=e.available_stock)<=0?{label:"Out of Stock",color:"bg-red-500"}:r<=10?{label:"Low Stock",color:"bg-yellow-500"}:{label:"In Stock",color:"bg-green-500"};var r;const n=u.has(e.id);return Ce.jsx(Qf,{open:n,onOpenChange:()=>{return t=e.id,void h(e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r});var t},children:Ce.jsxs(td,{children:[Ce.jsx(Jf,{className:"w-full",children:Ce.jsx(rd,{className:"hover:bg-muted/50 transition-colors",children:Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"flex items-center gap-4",children:[e.image&&Ce.jsx("img",{src:e.image,alt:e.name,className:"w-12 h-12 object-cover rounded"}),Ce.jsxs("div",{className:"text-left",children:[Ce.jsx("div",{className:"font-semibold",children:e.name}),Ce.jsxs("div",{className:"text-sm text-muted-foreground",children:["SKU: ",e.sku,e.brand&&` • ${e.brand}`,e.model&&` - ${e.model}`]})]})]}),Ce.jsxs("div",{className:"flex items-center gap-6",children:[Ce.jsxs("div",{className:"text-right",children:[Ce.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Stock"}),Ce.jsx("div",{className:"font-semibold",children:e.total_stock})]}),Ce.jsxs("div",{className:"text-right",children:[Ce.jsx("div",{className:"text-sm text-muted-foreground",children:"Available"}),Ce.jsx("div",{className:"font-semibold text-green-600",children:e.available_stock})]}),Ce.jsxs("div",{className:"text-right",children:[Ce.jsx("div",{className:"text-sm text-muted-foreground",children:"Branches"}),Ce.jsxs("div",{className:"font-semibold flex items-center gap-1",children:[Ce.jsx(on,{className:"h-4 w-4"}),e.branches_count]})]}),Ce.jsxs("div",{className:"text-right",children:[Ce.jsx("div",{className:"text-sm text-muted-foreground",children:"Price"}),Ce.jsxs("div",{className:"font-semibold",children:["₱",Number(e.price||0).toFixed(2)]})]}),Ce.jsx(Yd,{className:t.color,children:t.label}),Ce.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]})]})})}),Ce.jsx(Zf,{children:Ce.jsx(sd,{children:Ce.jsxs("div",{className:"pt-4 border-t",children:[Ce.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[Ce.jsx(on,{className:"h-4 w-4"}),"Branch Availability"]}),Ce.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:e.branch_availability.map(e=>Ce.jsx(td,{className:"border-2",children:Ce.jsx(sd,{className:"p-4",children:Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsx("div",{className:"font-semibold",children:e.branch_name}),Ce.jsx(Yd,{variant:"outline",children:e.branch_code})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[Ce.jsxs("div",{children:[Ce.jsx("div",{className:"text-muted-foreground",children:"Stock"}),Ce.jsx("div",{className:"font-medium",children:e.stock_quantity})]}),Ce.jsxs("div",{children:[Ce.jsx("div",{className:"text-muted-foreground",children:"Available"}),Ce.jsx("div",{className:"font-medium text-green-600",children:e.available_quantity})]}),Ce.jsxs("div",{children:[Ce.jsx("div",{className:"text-muted-foreground",children:"Reserved"}),Ce.jsx("div",{className:"font-medium text-blue-600",children:e.reserved_quantity})]}),Ce.jsxs("div",{children:[Ce.jsx("div",{className:"text-muted-foreground",children:"Status"}),Ce.jsx(Yd,{className:e.status.toLowerCase().includes("out")?"bg-red-500":e.status.toLowerCase().includes("low")?"bg-yellow-500":"bg-green-500",variant:"secondary",children:e.status})]})]}),e.price_override&&Ce.jsxs("div",{className:"text-sm pt-2 border-t",children:[Ce.jsx("div",{className:"text-muted-foreground",children:"Branch Price"}),Ce.jsxs("div",{className:"font-medium",children:["₱",Number(e.price_override||0).toFixed(2)]})]})]})})},e.branch_id))})]})})})]})},e.id)})})})]})]})},tx=()=>{const{toast:e}=Jt(),{user:t}=Lc(),{notifications:r,unreadCount:n,loading:a,markNotificationAsRead:s,markAllNotificationsAsRead:i,refreshNotifications:o}=qc();Ct.useEffect(()=>{o()},[o]);const l="customer"===(null==t?void 0:t.role)?r.filter(e=>["appointment","prescription","reminder"].includes(e.type||"")):r,c=e=>{switch(e){case"appointment":return"bg-blue-100 text-blue-800";case"prescription":return"bg-purple-100 text-purple-800";case"inventory":return"bg-orange-100 text-orange-800";case"system":default:return"bg-slate-100 text-slate-800";case"reminder":return"bg-green-100 text-green-800"}};l.filter(e=>"unread"===e.status).length;const d=({notification:t})=>{const r=(e=>{switch(e){case"appointment":return ln;case"prescription":return wn;case"inventory":return Fn;default:return an}})(t.type);return Ce.jsx(td,{className:"transition-all duration-200 hover:shadow-md "+("unread"===t.status?"border-l-4 border-l-primary bg-primary/5":""),children:Ce.jsx(sd,{className:"p-4",children:Ce.jsxs("div",{className:"flex items-start justify-between",children:[Ce.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[Ce.jsx("div",{className:`p-2 rounded-full ${c(t.type)}`,children:Ce.jsx(r,{className:"h-4 w-4"})}),Ce.jsxs("div",{className:"flex-1 space-y-2",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx("h3",{className:"font-medium "+("unread"===t.status?"font-semibold":""),children:t.title}),Ce.jsx(Yd,{variant:"unread"===t.status?"default":"secondary",children:t.status})]}),Ce.jsx("p",{className:"text-sm text-muted-foreground",children:t.message}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:rh(new Date(t.created_at),{addSuffix:!0})})]})]}),Ce.jsx("div",{className:"flex items-center space-x-2",children:"unread"===t.status&&Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(async t=>{try{await s(t),e({title:"Notification marked as read",description:"The notification has been updated."})}catch(r){e({title:"Error",description:"Failed to mark notification as read.",variant:"destructive"})}})(t.id),children:Ce.jsx(dn,{className:"h-4 w-4"})})})]})})})};return Ce.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[Ce.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(an,{className:"h-6 w-6 text-primary"}),Ce.jsx("h1",{className:"text-2xl font-bold",children:"Notification Center"}),n>0&&Ce.jsxs(Yd,{className:"bg-red-500 text-white",children:[n," unread"]})]}),Ce.jsx("div",{className:"flex space-x-2",children:n>0&&Ce.jsx(Hc,{onClick:async()=>{try{await i(),e({title:"All notifications marked as read",description:"Your notification list has been updated."})}catch(t){e({title:"Error",description:"Failed to mark all notifications as read.",variant:"destructive"})}},children:"Mark All as Read"})})]}),a?Ce.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ce.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),Ce.jsx("span",{className:"ml-2",children:"Loading notifications..."})]}):0===l.length?Ce.jsx(td,{children:Ce.jsxs(sd,{className:"p-8 text-center",children:[Ce.jsx(an,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications yet"}),Ce.jsx("p",{className:"text-gray-600",children:"You'll see notifications here when they arrive."})]})}):Ce.jsxs(Mf,{defaultValue:"all",className:"w-full",children:[Ce.jsxs(Df,{className:"grid w-full "+("customer"===(null==t?void 0:t.role)?"grid-cols-4":"grid-cols-6"),children:[Ce.jsxs(If,{value:"all",children:["All (",l.length,")"]}),Ce.jsxs(If,{value:"unread",children:["Unread (",n,")"]}),Ce.jsxs(If,{value:"appointment",children:["Appointments (",l.filter(e=>"appointment"===e.type).length,")"]}),Ce.jsxs(If,{value:"prescription",children:["Prescriptions (",l.filter(e=>"prescription"===e.type).length,")"]}),"customer"!==(null==t?void 0:t.role)&&Ce.jsxs(Ce.Fragment,{children:[Ce.jsxs(If,{value:"inventory",children:["Inventory (",l.filter(e=>"inventory"===e.type).length,")"]}),Ce.jsxs(If,{value:"system",children:["System (",l.filter(e=>"system"===e.type).length,")"]})]})]}),Ce.jsx(Rf,{value:"all",className:"space-y-4",children:l.map(e=>Ce.jsx(d,{notification:e},e.id))}),Ce.jsx(Rf,{value:"unread",className:"space-y-4",children:l.filter(e=>"unread"===e.status).map(e=>Ce.jsx(d,{notification:e},e.id))}),Ce.jsx(Rf,{value:"appointment",className:"space-y-4",children:l.filter(e=>"appointment"===e.type).map(e=>Ce.jsx(d,{notification:e},e.id))}),Ce.jsx(Rf,{value:"prescription",className:"space-y-4",children:l.filter(e=>"prescription"===e.type).map(e=>Ce.jsx(d,{notification:e},e.id))}),"customer"!==(null==t?void 0:t.role)&&Ce.jsxs(Ce.Fragment,{children:[Ce.jsx(Rf,{value:"inventory",className:"space-y-4",children:l.filter(e=>"inventory"===e.type).map(e=>Ce.jsx(d,{notification:e},e.id))}),Ce.jsx(Rf,{value:"system",className:"space-y-4",children:l.filter(e=>"system"===e.type).map(e=>Ce.jsx(d,{notification:e},e.id))})]})]})]})},rx=()=>{const{toast:e}=Jt(),[t,r]=Ct.useState([]),[n,a]=Ct.useState([]),[s,i]=Ct.useState([]),[o,l]=Ct.useState([]),[c,d]=Ct.useState(!1),[u,h]=Ct.useState(""),[m,p]=Ct.useState(null),[f,x]=Ct.useState(!1);Ct.useEffect(()=>{y()},[]);const y=async()=>{try{d(!0);const e={}.VITE_API_URL||"http://localhost:8000/api",t=sessionStorage.getItem("auth_token"),n=await fetch(`${e}/patients`,{headers:{Authorization:t?`Bearer ${t}`:"","Content-Type":"application/json"}});if(n.ok){const e=await n.json();console.log("Patients API response:",e),Array.isArray(e)?r(e):e.data&&Array.isArray(e.data)?r(e.data):(console.warn("Unexpected patients data structure:",e),r([]))}const s=await fetch(`${e}/prescriptions`,{headers:{Authorization:t?`Bearer ${t}`:"","Content-Type":"application/json"}});if(s.ok){const e=await s.json();console.log("Prescriptions API response:",e),Array.isArray(e)?a(e):e.data&&Array.isArray(e.data)?a(e.data):a([])}const o=await fetch(`${e}/appointments`,{headers:{Authorization:t?`Bearer ${t}`:"","Content-Type":"application/json"}});if(o.ok){const e=await o.json();console.log("Appointments API response:",e),Array.isArray(e)?i(e):e.data&&Array.isArray(e.data)?i(e.data):i([])}const c=await fetch(`${e}/glass-orders`,{headers:{Authorization:t?`Bearer ${t}`:"","Content-Type":"application/json"}});if(c.ok){const e=await c.json();console.log("Glass Orders API response:",e),Array.isArray(e)?l(e):e.data&&Array.isArray(e.data)?l(e.data):l([])}else console.error("Glass orders API error:",c.status,c.statusText),l([])}catch(t){console.error("Error loading data:",t),e({title:"Error",description:"Failed to load patient data",variant:"destructive"})}finally{d(!1)}},v=(t||[]).filter(e=>e.name.toLowerCase().includes(u.toLowerCase())||e.email.toLowerCase().includes(u.toLowerCase())||e.phone&&e.phone.includes(u)),g=e=>(n||[]).filter(t=>t.patient_id===e),b=e=>(s||[]).filter(t=>t.patient_id===e),j=e=>{switch(e.toLowerCase()){case"active":case"completed":case"confirmed":return Ce.jsx(dn,{className:"h-4 w-4 text-green-600"});case"pending":case"scheduled":return Ce.jsx(yn,{className:"h-4 w-4 text-blue-600"});case"cancelled":case"expired":return Ce.jsx(Qr,{className:"h-4 w-4 text-red-600"});default:return Ce.jsx(yn,{className:"h-4 w-4 text-gray-600"})}};return Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Patient Management"}),Ce.jsx("p",{className:"text-gray-600 mt-2",children:"Comprehensive patient records with prescriptions and glass orders"})]}),Ce.jsx("div",{className:"flex space-x-2",children:Ce.jsxs(Hc,{onClick:y,variant:"outline",children:[Ce.jsx(Fn,{className:"h-4 w-4 mr-2"}),"Refresh Data"]})})]}),Ce.jsx(td,{children:Ce.jsx(sd,{className:"pt-6",children:Ce.jsxs("div",{className:"relative",children:[Ce.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),Ce.jsx(Yc,{placeholder:"Search patients by name, email, or phone...",value:u,onChange:e=>h(e.target.value),className:"pl-10"})]})})}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(da,{className:"h-5 w-5 text-blue-600"}),Ce.jsxs("span",{children:["Patient Records (",v.length,")"]})]})}),Ce.jsx(sd,{children:Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Patient"}),Ce.jsx(Jm,{children:"Contact"}),Ce.jsx(Jm,{children:"Prescriptions"}),Ce.jsx(Jm,{children:"Appointments"}),Ce.jsx(Jm,{children:"Glass Orders"}),Ce.jsx(Jm,{children:"Last Visit"}),Ce.jsx(Jm,{children:"Actions"})]})}),Ce.jsx(Xm,{children:v.map(e=>{var t,r,n;const a=g(e.id),s=b(e.id),i=(l=e.id,(o||[]).filter(e=>e.patient_id===l));var l;const c=s.sort((e,t)=>new Date(t.appointment_date).getTime()-new Date(e.appointment_date).getTime())[0];return Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{children:Ce.jsxs("div",{children:[Ce.jsx("div",{className:"font-medium",children:e.name}),e.date_of_birth&&Ce.jsxs("div",{className:"text-sm text-gray-500",children:["DOB: ",new Date(e.date_of_birth).toLocaleDateString()]})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[Ce.jsx(Dn,{className:"h-3 w-3 text-gray-400"}),Ce.jsx("span",{children:e.email})]}),e.phone&&Ce.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[Ce.jsx(qn,{className:"h-3 w-3 text-gray-400"}),Ce.jsx("span",{children:e.phone})]}),e.address&&Ce.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[Ce.jsx(In,{className:"h-3 w-3 text-gray-400"}),Ce.jsx("span",{className:"truncate max-w-32",children:e.address})]})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsxs(Yd,{variant:"outline",className:"text-xs",children:[a.length," Active"]}),a.length>0&&Ce.jsxs("div",{className:"text-xs text-gray-500",children:["Latest: ",(null==(t=a[0])?void 0:t.lens_type)||"N/A"]})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsxs(Yd,{variant:"outline",className:"text-xs",children:[s.length," Total"]}),c&&Ce.jsx("div",{className:"text-xs text-gray-500",children:new Date(c.appointment_date).toLocaleDateString()})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsxs(Yd,{variant:"outline",className:"text-xs",children:[i.length," Orders"]}),i.length>0&&Ce.jsxs("div",{className:"text-xs text-gray-500",children:["Latest: ",(null==(n=null==(r=i[0])?void 0:r.glass_specifications)?void 0:n.lens_type)||"N/A"]})]})}),Ce.jsx(Zm,{children:c?Ce.jsxs("div",{className:"flex items-center space-x-2",children:[j(c.status),Ce.jsx("span",{className:"text-sm",children:c.status})]}):Ce.jsx("span",{className:"text-sm text-gray-500",children:"No visits"})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex space-x-2",children:[Ce.jsxs(Xp,{children:[Ce.jsx(Qp,{asChild:!0,children:Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>p(e),children:[Ce.jsx(wn,{className:"h-3 w-3 mr-1"}),"View Details"]})}),Ce.jsxs(ef,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[Ce.jsxs(tf,{children:[Ce.jsxs(nf,{children:["Patient Details: ",e.name]}),Ce.jsx(af,{children:"View comprehensive patient information, prescriptions, and appointment history"})]}),m&&Ce.jsx(nx,{patient:m,prescriptions:g(m.id),appointments:b(m.id)})]})]}),Ce.jsxs(Xp,{children:[Ce.jsx(Qp,{asChild:!0,children:Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>p(e),children:[Ce.jsx(Fn,{className:"h-3 w-3 mr-1"}),"Glass Order"]})}),Ce.jsxs(ef,{className:"max-w-2xl",children:[Ce.jsxs(tf,{children:[Ce.jsxs(nf,{children:["Create Glass Order for ",e.name]}),Ce.jsx(af,{children:"Create a new glass order based on the patient's prescription requirements"})]}),m&&Ce.jsx(ax,{patient:m,prescriptions:g(m.id),onSuccess:()=>{x(!1),y()}})]})]})]})})]},e.id)})})]})})]})]})},nx=({patient:e,prescriptions:t,appointments:r})=>{const[n,a]=Ct.useState([]);return Ct.useEffect(()=>{(async()=>{try{const t={}.VITE_API_URL||"http://localhost:8000/api",r=sessionStorage.getItem("auth_token"),n=await fetch(`${t}/glass-orders/patient/${e.id}`,{headers:{Authorization:r?`Bearer ${r}`:"","Content-Type":"application/json"}});if(n.ok){const e=await n.json();a(e.data)}}catch(t){console.error("Error loading glass orders:",t)}})()},[e.id]),Ce.jsxs(Mf,{defaultValue:"overview",className:"w-full",children:[Ce.jsxs(Df,{className:"grid w-full grid-cols-5",children:[Ce.jsx(If,{value:"overview",children:"Overview"}),Ce.jsx(If,{value:"prescriptions",children:"Prescriptions"}),Ce.jsx(If,{value:"appointments",children:"Appointments"}),Ce.jsx(If,{value:"glass-orders",children:"Glass Orders"}),Ce.jsx(If,{value:"history",children:"History"})]}),Ce.jsx(Rf,{value:"overview",className:"space-y-4",children:Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Patient Information"})}),Ce.jsxs(sd,{className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Name"}),Ce.jsx("div",{className:"text-sm font-medium",children:e.name})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Email"}),Ce.jsx("div",{className:"text-sm",children:e.email})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Phone"}),Ce.jsx("div",{className:"text-sm",children:e.phone||"Not provided"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Date of Birth"}),Ce.jsx("div",{className:"text-sm",children:e.date_of_birth?new Date(e.date_of_birth).toLocaleDateString():"Not provided"})]})]}),e.address&&Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Address"}),Ce.jsx("div",{className:"text-sm",children:e.address})]})]})]})}),Ce.jsx(Rf,{value:"prescriptions",className:"space-y-4",children:t.length>0?t.map(e=>Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsxs(nd,{className:"text-lg",children:["Prescription #",e.id]}),Ce.jsx(Yd,{className:sx(e.status),children:e.status})]})}),Ce.jsxs(sd,{className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Lens Type"}),Ce.jsx("div",{className:"text-sm",children:e.lens_type||"Not specified"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Coating"}),Ce.jsx("div",{className:"text-sm",children:e.coating||"Not specified"})]})]}),e.recommendations&&Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Recommendations"}),Ce.jsx("div",{className:"text-sm bg-blue-50 p-3 rounded",children:e.recommendations})]}),e.additional_notes&&Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Additional Notes"}),Ce.jsx("div",{className:"text-sm bg-gray-50 p-3 rounded",children:e.additional_notes})]}),Ce.jsxs("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(e.created_at).toLocaleString(),e.optometrist&&` by ${e.optometrist.name}`]})]})]},e.id)):Ce.jsx(td,{children:Ce.jsxs(sd,{className:"text-center py-8",children:[Ce.jsx(wn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("p",{className:"text-gray-500",children:"No prescriptions found for this patient"})]})})}),Ce.jsx(Rf,{value:"appointments",className:"space-y-4",children:r.length>0?r.map(e=>{var t;return Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsxs(nd,{className:"text-lg",children:["Appointment #",e.id]}),Ce.jsx(Yd,{className:sx(e.status),children:e.status})]})}),Ce.jsxs(sd,{className:"space-y-2",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Date"}),Ce.jsx("div",{className:"text-sm",children:new Date(e.appointment_date).toLocaleDateString()})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Time"}),Ce.jsxs("div",{className:"text-sm",children:[new Date(`1970-01-01T${e.start_time}`).toLocaleTimeString()," -",new Date(`1970-01-01T${e.end_time}`).toLocaleTimeString()]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Type"}),Ce.jsx("div",{className:"text-sm",children:e.type})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Optometrist"}),Ce.jsx("div",{className:"text-sm",children:(null==(t=e.optometrist)?void 0:t.name)||"Not assigned"})]})]}),e.branch&&Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Branch"}),Ce.jsx("div",{className:"text-sm",children:e.branch.name})]})]})]},e.id)}):Ce.jsx(td,{children:Ce.jsxs(sd,{className:"text-center py-8",children:[Ce.jsx(ln,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("p",{className:"text-gray-500",children:"No appointments found for this patient"})]})})}),Ce.jsx(Rf,{value:"glass-orders",className:"space-y-4",children:n.length>0?n.map(t=>Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsxs(nd,{className:"text-lg",children:["Glass Order ",t.formatted_number]}),Ce.jsxs("div",{className:"flex space-x-2",children:[Ce.jsx(Yd,{className:sx(t.status),children:t.status}),Ce.jsx(Yd,{variant:"outline",className:ix(t.manufacturer_info.priority),children:t.manufacturer_info.priority})]})]})}),Ce.jsxs(sd,{className:"space-y-4",children:[t.reserved_products&&t.reserved_products.length>0&&Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Reserved Products"}),Ce.jsx("div",{className:"bg-blue-50 p-3 rounded space-y-2",children:t.reserved_products.map((e,t)=>Ce.jsxs("div",{className:"text-sm",children:[Ce.jsx("div",{className:"font-medium",children:e.description}),Ce.jsxs("div",{className:"text-gray-600",children:["Qty: ",e.quantity," | Price: ₱",e.unit_price]})]},t))})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Lens Type"}),Ce.jsx("div",{className:"text-sm",children:t.glass_specifications.lens_type||"Not specified"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Lens Coating"}),Ce.jsx("div",{className:"text-sm",children:t.glass_specifications.lens_coating||"Not specified"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Frame Material"}),Ce.jsx("div",{className:"text-sm",children:t.glass_specifications.frame_material||"Not specified"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Lens Material"}),Ce.jsx("div",{className:"text-sm",children:t.glass_specifications.lens_material||"Not specified"})]})]}),(t.glass_specifications.blue_light_filter||t.glass_specifications.progressive_lens)&&Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Special Features"}),Ce.jsxs("div",{className:"flex space-x-2",children:[t.glass_specifications.blue_light_filter&&Ce.jsx(Yd,{variant:"secondary",children:"Blue Light Filter"}),t.glass_specifications.progressive_lens&&Ce.jsx(Yd,{variant:"secondary",children:"Progressive Lens"})]})]}),t.manufacturer_info.special_instructions&&Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Special Instructions for Manufacturer"}),Ce.jsx("div",{className:"bg-yellow-50 p-3 rounded text-sm",children:t.manufacturer_info.special_instructions})]}),t.manufacturer_info.manufacturer_notes&&Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Manufacturer Contact Notes"}),Ce.jsx("div",{className:"bg-green-50 p-3 rounded text-sm",children:t.manufacturer_info.manufacturer_notes})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Created"}),Ce.jsx("div",{children:new Date(t.created_at).toLocaleString()})]}),t.sent_to_manufacturer_at&&Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Sent to Manufacturer"}),Ce.jsx("div",{children:new Date(t.sent_to_manufacturer_at).toLocaleString()})]})]}),Ce.jsxs("div",{className:"flex space-x-2",children:["pending"===t.status&&Ce.jsx(Hc,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:async()=>{try{const r={}.VITE_API_URL||"http://localhost:8000/api",n=sessionStorage.getItem("auth_token");if((await fetch(`${r}/glass-orders/${t.id}/send-to-manufacturer`,{method:"POST",headers:{Authorization:n?`Bearer ${n}`:"","Content-Type":"application/json"}})).ok){const t=await fetch(`${r}/glass-orders/patient/${e.id}`,{headers:{Authorization:n?`Bearer ${n}`:"","Content-Type":"application/json"}});if(t.ok){const e=await t.json();a(e.data)}}}catch(r){console.error("Error sending to manufacturer:",r)}},children:"Send to Manufacturer"}),Ce.jsx(Hc,{variant:"outline",size:"sm",children:"View Details"})]})]})]},t.id)):Ce.jsx(td,{children:Ce.jsxs(sd,{className:"text-center py-8",children:[Ce.jsx(Fn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("p",{className:"text-gray-500",children:"No glass orders found for this patient"})]})})}),Ce.jsx(Rf,{value:"history",className:"space-y-4",children:Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Patient History Summary"})}),Ce.jsx(sd,{className:"space-y-4",children:Ce.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.length}),Ce.jsx("div",{className:"text-sm text-gray-600",children:"Total Prescriptions"})]}),Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.length}),Ce.jsx("div",{className:"text-sm text-gray-600",children:"Total Appointments"})]}),Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.filter(e=>"completed"===e.status).length}),Ce.jsx("div",{className:"text-sm text-gray-600",children:"Completed Visits"})]})]})})]})})]})},ax=({patient:e,prescriptions:t,onSuccess:r})=>{const{toast:n}=Jt(),[a,s]=Ct.useState({frameType:"",lensType:"",lensCoating:"",blueLightFilter:!1,progressiveLens:!1,lensMaterial:"",frameMaterial:"",frameColor:"",lensColor:"",specialInstructions:"",manufacturerNotes:"",priority:"normal"});return Ce.jsxs("form",{onSubmit:async t=>{t.preventDefault();try{n({title:"Glass Order Created",description:`Glass order for ${e.name} has been created successfully. Manufacturer contact information is ready.`}),r()}catch(a){n({title:"Error",description:"Failed to create glass order",variant:"destructive"})}},className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Lens Type"}),Ce.jsxs(Dm,{value:a.lensType,onValueChange:e=>s(t=>({...t,lensType:e})),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select lens type"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"single",children:"Single Vision"}),Ce.jsx(qm,{value:"progressive",children:"Progressive"}),Ce.jsx(qm,{value:"bifocal",children:"Bifocal"}),Ce.jsx(qm,{value:"reading",children:"Reading Glasses"})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Lens Material"}),Ce.jsxs(Dm,{value:a.lensMaterial,onValueChange:e=>s(t=>({...t,lensMaterial:e})),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select material"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"cr39",children:"CR-39 Plastic"}),Ce.jsx(qm,{value:"polycarbonate",children:"Polycarbonate"}),Ce.jsx(qm,{value:"trivex",children:"Trivex"}),Ce.jsx(qm,{value:"high-index",children:"High Index"})]})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Special Instructions for Manufacturer"}),Ce.jsx(fh,{placeholder:"Any specific requirements or special instructions...",value:a.specialInstructions,onChange:e=>s(t=>({...t,specialInstructions:e.target.value})),rows:3})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Manufacturer Contact Notes"}),Ce.jsx(fh,{placeholder:"Priority level, delivery requirements, contact preferences...",value:a.manufacturerNotes,onChange:e=>s(t=>({...t,manufacturerNotes:e.target.value})),rows:2})]}),Ce.jsxs("div",{className:"flex justify-end space-x-2",children:[Ce.jsx(Hc,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),Ce.jsx(Hc,{type:"submit",className:"bg-green-600 hover:bg-green-700",children:"Create Glass Order"})]})]})},sx=e=>{switch(e.toLowerCase()){case"active":case"completed":case"confirmed":case"delivered":return"bg-green-100 text-green-800";case"pending":case"scheduled":return"bg-blue-100 text-blue-800";case"sent_to_manufacturer":case"in_production":return"bg-yellow-100 text-yellow-800";case"ready_for_pickup":return"bg-purple-100 text-purple-800";case"cancelled":case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ix=e=>{switch(e.toLowerCase()){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},ox={}.VITE_API_URL||{}.VITE_API_BASE_URL||"http://127.0.0.1:8000/api",lx=Ac.create({baseURL:ox,headers:{"Content-Type":"application/json",Accept:"application/json"}});lx.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),lx.interceptors.response.use(e=>e,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const cx=new class{async getCustomerAnalytics(e,t={}){const r=new URLSearchParams;t.period&&r.append("period",t.period.toString()),t.start_date&&r.append("start_date",t.start_date),t.end_date&&r.append("end_date",t.end_date);return(await lx.get(`${ox}/customers/${e}/analytics?${r}`)).data}async getOptometristAnalytics(e,t={}){const r=new URLSearchParams;t.period&&r.append("period",t.period.toString()),t.start_date&&r.append("start_date",t.start_date),t.end_date&&r.append("end_date",t.end_date);return(await lx.get(`${ox}/optometrists/${e}/analytics?${r}`)).data}async getAdminAnalytics(e={}){const t=new URLSearchParams;e.period&&t.append("period",e.period.toString()),e.start_date&&t.append("start_date",e.start_date),e.end_date&&t.append("end_date",e.end_date),e.branch_id&&t.append("branch_id",e.branch_id.toString());try{return(await lx.get(`${ox}/admin/analytics?${t}`)).data}catch(r){return console.error("Error fetching admin analytics:",r),{period:{days:30,start_date:"",end_date:""},branch_performance:[],optometrist_workload:[],staff_activity:[],system_wide_stats:{appointments:0,reservations:0,revenue:0,products:0,branches:0,users:0},common_diagnoses:{by_type:{},by_lens_type:{},by_coating:{}}}}}async getRealTimeAnalytics(){try{return(await lx.get(`${ox}/analytics/realtime`)).data}catch(e){return console.error("Error fetching real-time analytics:",e),{total_appointments_today:0,total_revenue_today:0,active_users:0,low_stock_alerts:0,upcoming_appointments:0,system_health:{database_status:"unknown",api_response_time:0,last_backup:"unknown"}}}}async getAnalyticsTrends(e={}){const t=new URLSearchParams;e.period&&t.append("period",e.period.toString()),e.start_date&&t.append("start_date",e.start_date),e.end_date&&t.append("end_date",e.end_date),e.branch_id&&t.append("branch_id",e.branch_id.toString());try{return(await lx.get(`${ox}/analytics/trends?${t}`)).data}catch(r){return console.error("Error fetching analytics trends:",r),{revenue_trend:[],appointment_trend:[],inventory_trend:[],appointment_types:[]}}}async exportAnalytics(e,t,r={}){const n=new URLSearchParams;n.append("type",e),n.append("format",t),r.period&&n.append("period",r.period.toString()),r.start_date&&n.append("start_date",r.start_date),r.end_date&&n.append("end_date",r.end_date),r.branch_id&&n.append("branch_id",r.branch_id.toString());return(await lx.get(`${ox}/analytics/export?${n}`,{responseType:"blob"})).data}async exportAnalyticsPDF(e={}){const t=sessionStorage.getItem("auth_token");if(!t)throw new Error("No authentication token found");return(await lx.get("/reports/analytics/pdf",{params:e,responseType:"blob",headers:{Authorization:`Bearer ${t}`,Accept:"application/pdf"}})).data}},dx={}.VITE_API_URL||{}.VITE_API_BASE_URL||"http://127.0.0.1:8000/api",ux=Ac.create({baseURL:dx,headers:{"Content-Type":"application/json",Accept:"application/json"}});ux.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),ux.interceptors.response.use(e=>e,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const hx=async()=>{const e=sessionStorage.getItem("auth_token");if(!e)throw new Error("No authentication token found");return(await ux.get("/feedback/available-appointments",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json",Accept:"application/json"}})).data},mx=async e=>{const t=sessionStorage.getItem("auth_token");if(!t)throw new Error("No authentication token found");return(await ux.get(`/customers/${e}/feedback`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json",Accept:"application/json"}})).data};var px=Array.isArray,fx="object"==typeof Pt&&Pt&&Pt.Object===Object&&Pt,xx=fx,yx="object"==typeof self&&self&&self.Object===Object&&self,vx=xx||yx||Function("return this")(),gx=vx.Symbol,bx=gx,jx=Object.prototype,wx=jx.hasOwnProperty,Nx=jx.toString,Sx=bx?bx.toStringTag:void 0;var _x=function(e){var t=wx.call(e,Sx),r=e[Sx];try{e[Sx]=void 0;var n=!0}catch(s){}var a=Nx.call(e);return n&&(t?e[Sx]=r:delete e[Sx]),a},kx=Object.prototype.toString;var Ox=_x,Cx=function(e){return kx.call(e)},Ax=gx?gx.toStringTag:void 0;var Ex=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ax&&Ax in Object(e)?Ox(e):Cx(e)};var Px=function(e){return null!=e&&"object"==typeof e},Tx=Ex,Mx=Px;var Dx=function(e){return"symbol"==typeof e||Mx(e)&&"[object Symbol]"==Tx(e)},Ix=px,Rx=Dx,Lx=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fx=/^\w*$/;var Bx=function(e,t){if(Ix(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Rx(e))||(Fx.test(e)||!Lx.test(e)||null!=t&&e in Object(t))};var qx=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const $x=Tt(qx);var zx=Ex,Ux=qx;var Vx=function(e){if(!Ux(e))return!1;var t=zx(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const Wx=Tt(Vx);var Hx,Kx=vx["__core-js_shared__"],Yx=(Hx=/[^.]+$/.exec(Kx&&Kx.keys&&Kx.keys.IE_PROTO||""))?"Symbol(src)_1."+Hx:"";var Gx=function(e){return!!Yx&&Yx in e},Xx=Function.prototype.toString;var Qx=function(e){if(null!=e){try{return Xx.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Jx=Vx,Zx=Gx,ey=qx,ty=Qx,ry=/^\[object .+?Constructor\]$/,ny=Function.prototype,ay=Object.prototype,sy=ny.toString,iy=ay.hasOwnProperty,oy=RegExp("^"+sy.call(iy).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ly=function(e){return!(!ey(e)||Zx(e))&&(Jx(e)?oy:ry).test(ty(e))},cy=function(e,t){return null==e?void 0:e[t]};var dy=function(e,t){var r=cy(e,t);return ly(r)?r:void 0},uy=dy(Object,"create"),hy=uy;var my=function(){this.__data__=hy?hy(null):{},this.size=0};var py=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},fy=uy,xy=Object.prototype.hasOwnProperty;var yy=function(e){var t=this.__data__;if(fy){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return xy.call(t,e)?t[e]:void 0},vy=uy,gy=Object.prototype.hasOwnProperty;var by=uy;var jy=my,wy=py,Ny=yy,Sy=function(e){var t=this.__data__;return vy?void 0!==t[e]:gy.call(t,e)},_y=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=by&&void 0===t?"__lodash_hash_undefined__":t,this};function ky(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ky.prototype.clear=jy,ky.prototype.delete=wy,ky.prototype.get=Ny,ky.prototype.has=Sy,ky.prototype.set=_y;var Oy=ky;var Cy=function(){this.__data__=[],this.size=0};var Ay=function(e,t){return e===t||e!=e&&t!=t},Ey=Ay;var Py=function(e,t){for(var r=e.length;r--;)if(Ey(e[r][0],t))return r;return-1},Ty=Py,My=Array.prototype.splice;var Dy=Py;var Iy=Py;var Ry=Py;var Ly=Cy,Fy=function(e){var t=this.__data__,r=Ty(t,e);return!(r<0)&&(r==t.length-1?t.pop():My.call(t,r,1),--this.size,!0)},By=function(e){var t=this.__data__,r=Dy(t,e);return r<0?void 0:t[r][1]},qy=function(e){return Iy(this.__data__,e)>-1},$y=function(e,t){var r=this.__data__,n=Ry(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function zy(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}zy.prototype.clear=Ly,zy.prototype.delete=Fy,zy.prototype.get=By,zy.prototype.has=qy,zy.prototype.set=$y;var Uy=zy,Vy=dy(vx,"Map"),Wy=Oy,Hy=Uy,Ky=Vy;var Yy=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Gy=function(e,t){var r=e.__data__;return Yy(t)?r["string"==typeof t?"string":"hash"]:r.map},Xy=Gy;var Qy=Gy;var Jy=Gy;var Zy=Gy;var ev=function(){this.size=0,this.__data__={hash:new Wy,map:new(Ky||Hy),string:new Wy}},tv=function(e){var t=Xy(this,e).delete(e);return this.size-=t?1:0,t},rv=function(e){return Qy(this,e).get(e)},nv=function(e){return Jy(this,e).has(e)},av=function(e,t){var r=Zy(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function sv(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}sv.prototype.clear=ev,sv.prototype.delete=tv,sv.prototype.get=rv,sv.prototype.has=nv,sv.prototype.set=av;var iv=sv,ov=iv;function lv(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var i=e.apply(this,n);return r.cache=s.set(a,i)||s,i};return r.cache=new(lv.Cache||ov),r}lv.Cache=ov;var cv=lv;const dv=Tt(cv);var uv=cv;var hv=function(e){var t=uv(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t},mv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pv=/\\(\\)?/g,fv=hv(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(mv,function(e,r,n,a){t.push(n?a.replace(pv,"$1"):r||e)}),t});var xv=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a},yv=xv,vv=px,gv=Dx,bv=gx?gx.prototype:void 0,jv=bv?bv.toString:void 0;var wv=function e(t){if("string"==typeof t)return t;if(vv(t))return yv(t,e)+"";if(gv(t))return jv?jv.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},Nv=wv;var Sv=function(e){return null==e?"":Nv(e)},_v=px,kv=Bx,Ov=fv,Cv=Sv;var Av=function(e,t){return _v(e)?e:kv(e,t)?[e]:Ov(Cv(e))},Ev=Dx;var Pv=function(e){if("string"==typeof e||Ev(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Tv=Av,Mv=Pv;var Dv=function(e,t){for(var r=0,n=(t=Tv(t,e)).length;null!=e&&r<n;)e=e[Mv(t[r++])];return r&&r==n?e:void 0},Iv=Dv;var Rv=function(e,t,r){var n=null==e?void 0:Iv(e,t);return void 0===n?r:n};const Lv=Tt(Rv);const Fv=Tt(function(e){return null==e});var Bv=Ex,qv=px,$v=Px;const zv=Tt(function(e){return"string"==typeof e||!qv(e)&&$v(e)&&"[object String]"==Bv(e)});var Uv,Vv={exports:{}},Wv={},Hv=Symbol.for("react.element"),Kv=Symbol.for("react.portal"),Yv=Symbol.for("react.fragment"),Gv=Symbol.for("react.strict_mode"),Xv=Symbol.for("react.profiler"),Qv=Symbol.for("react.provider"),Jv=Symbol.for("react.context"),Zv=Symbol.for("react.server_context"),eg=Symbol.for("react.forward_ref"),tg=Symbol.for("react.suspense"),rg=Symbol.for("react.suspense_list"),ng=Symbol.for("react.memo"),ag=Symbol.for("react.lazy"),sg=Symbol.for("react.offscreen");function ig(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Hv:switch(e=e.type){case Yv:case Xv:case Gv:case tg:case rg:return e;default:switch(e=e&&e.$$typeof){case Zv:case Jv:case eg:case ag:case ng:case Qv:return e;default:return t}}case Kv:return t}}}Uv=Symbol.for("react.module.reference"),Wv.ContextConsumer=Jv,Wv.ContextProvider=Qv,Wv.Element=Hv,Wv.ForwardRef=eg,Wv.Fragment=Yv,Wv.Lazy=ag,Wv.Memo=ng,Wv.Portal=Kv,Wv.Profiler=Xv,Wv.StrictMode=Gv,Wv.Suspense=tg,Wv.SuspenseList=rg,Wv.isAsyncMode=function(){return!1},Wv.isConcurrentMode=function(){return!1},Wv.isContextConsumer=function(e){return ig(e)===Jv},Wv.isContextProvider=function(e){return ig(e)===Qv},Wv.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Hv},Wv.isForwardRef=function(e){return ig(e)===eg},Wv.isFragment=function(e){return ig(e)===Yv},Wv.isLazy=function(e){return ig(e)===ag},Wv.isMemo=function(e){return ig(e)===ng},Wv.isPortal=function(e){return ig(e)===Kv},Wv.isProfiler=function(e){return ig(e)===Xv},Wv.isStrictMode=function(e){return ig(e)===Gv},Wv.isSuspense=function(e){return ig(e)===tg},Wv.isSuspenseList=function(e){return ig(e)===rg},Wv.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Yv||e===Xv||e===Gv||e===tg||e===rg||e===sg||"object"==typeof e&&null!==e&&(e.$$typeof===ag||e.$$typeof===ng||e.$$typeof===Qv||e.$$typeof===Jv||e.$$typeof===eg||e.$$typeof===Uv||void 0!==e.getModuleId)},Wv.typeOf=ig,Vv.exports=Wv;var og=Vv.exports,lg=Ex,cg=Px;var dg=function(e){return"number"==typeof e||cg(e)&&"[object Number]"==lg(e)};const ug=Tt(dg);var hg=dg;const mg=Tt(function(e){return hg(e)&&e!=+e});var pg=function(e){return 0===e?0:e>0?1:-1},fg=function(e){return zv(e)&&e.indexOf("%")===e.length-1},xg=function(e){return ug(e)&&!mg(e)},yg=function(e){return xg(e)||zv(e)},vg=0,gg=function(e){var t=++vg;return"".concat(e||"").concat(t)},bg=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!xg(e)&&!zv(e))return n;if(fg(e)){var s=e.indexOf("%");r=t*parseFloat(e.slice(0,s))/100}else r=+e;return mg(r)&&(r=n),a&&r>t&&(r=t),r},jg=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},wg=function(e,t){return xg(e)&&xg(t)?function(r){return e+r*(t-e)}:function(){return t}};function Ng(e,t,r){return e&&e.length?e.find(function(e){return e&&("function"==typeof t?t(e):Lv(e,t))===r}):null}var Sg=function(e,t){return xg(e)&&xg(t)?e-t:zv(e)&&zv(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function _g(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function kg(e){return(kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Og=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Cg=["points","pathLength"],Ag={svg:["viewBox","children"],polygon:Cg,polyline:Cg},Eg=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Pg=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if(Ct.isValidElement(e)&&(r=e.props),!$x(r))return null;var n={};return Object.keys(r).forEach(function(e){Eg.includes(e)&&(n[e]=t||function(t){return r[e](r,t)})}),n},Tg=function(e,t,r){if(!$x(e)||"object"!==kg(e))return null;var n=null;return Object.keys(e).forEach(function(a){var s=e[a];Eg.includes(a)&&"function"==typeof s&&(n||(n={}),n[a]=function(e,t,r){return function(n){return e(t,r,n),null}}(s,t,r))}),n},Mg=["children"],Dg=["children"];function Ig(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Rg(e){return(Rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Lg={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Fg=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},Bg=null,qg=null,$g=function e(t){if(t===Bg&&Array.isArray(qg))return qg;var r=[];return Ct.Children.forEach(t,function(t){Fv(t)||(og.isFragment(t)?r=r.concat(e(t.props.children)):r.push(t))}),qg=r,Bg=t,r};function zg(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(function(e){return Fg(e)}):[Fg(t)],$g(e).forEach(function(e){var t=Lv(e,"type.displayName")||Lv(e,"type.name");-1!==n.indexOf(t)&&r.push(e)}),r}function Ug(e,t){var r=zg(e,t);return r&&r[0]}var Vg=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,n=t.height;return!(!xg(r)||r<=0||!xg(n)||n<=0)},Wg=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Hg=function(e){return e&&"object"===Rg(e)&&"clipDot"in e},Kg=function(e,t,r){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if(Ct.isValidElement(e)&&(n=e.props),!$x(n))return null;var a={};return Object.keys(n).forEach(function(e){var s;(function(e,t,r,n){var a,s=null!==(a=null==Ag?void 0:Ag[n])&&void 0!==a?a:[];return t.startsWith("data-")||!Wx(e)&&(n&&s.includes(t)||Og.includes(t))||r&&Eg.includes(t)})(null===(s=n)||void 0===s?void 0:s[e],e,t,r)&&(a[e]=n[e])}),a},Yg=function e(t,r){if(t===r)return!0;var n=Ct.Children.count(t);if(n!==Ct.Children.count(r))return!1;if(0===n)return!0;if(1===n)return Gg(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var s=t[a],i=r[a];if(Array.isArray(s)||Array.isArray(i)){if(!e(s,i))return!1}else if(!Gg(s,i))return!1}return!0},Gg=function(e,t){if(Fv(e)&&Fv(t))return!0;if(!Fv(e)&&!Fv(t)){var r=e.props||{},n=r.children,a=Ig(r,Mg),s=t.props||{},i=s.children,o=Ig(s,Dg);return n&&i?_g(a,o)&&Yg(n,i):!n&&!i&&_g(a,o)}return!1},Xg=function(e,t){var r=[],n={};return $g(e).forEach(function(e,a){if(function(e){return e&&e.type&&zv(e.type)&&Wg.indexOf(e.type)>=0}(e))r.push(e);else if(e){var s=Fg(e.type),i=t[s]||{},o=i.handler,l=i.once;if(o&&(!l||!n[s])){var c=o(e,s,a);r.push(c),n[s]=!0}}}),r},Qg=["children","width","height","viewBox","className","style","title","desc"];function Jg(){return Jg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jg.apply(this,arguments)}function Zg(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eb(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,s=e.className,i=e.style,o=e.title,l=e.desc,c=Zg(e,Qg),d=a||{width:r,height:n,x:0,y:0},u=Vr("recharts-surface",s);return At.createElement("svg",Jg({},Kg(c,!0,"svg"),{className:u,width:r,height:n,style:i,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),At.createElement("title",null,o),At.createElement("desc",null,l),t)}var tb=["children","className"];function rb(){return rb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rb.apply(this,arguments)}function nb(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var ab=At.forwardRef(function(e,t){var r=e.children,n=e.className,a=nb(e,tb),s=Vr("recharts-layer",n);return At.createElement("g",rb({className:s},Kg(a,!0),{ref:t}),r)}),sb=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a]};var ib=function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++n<a;)s[n]=e[n+t];return s};var ob=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:ib(e,t,r)},lb=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var cb=function(e){return lb.test(e)};var db=function(e){return e.split("")},ub="\\ud800-\\udfff",hb="["+ub+"]",mb="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",pb="\\ud83c[\\udffb-\\udfff]",fb="[^"+ub+"]",xb="(?:\\ud83c[\\udde6-\\uddff]){2}",yb="[\\ud800-\\udbff][\\udc00-\\udfff]",vb="(?:"+mb+"|"+pb+")"+"?",gb="[\\ufe0e\\ufe0f]?",bb=gb+vb+("(?:\\u200d(?:"+[fb,xb,yb].join("|")+")"+gb+vb+")*"),jb="(?:"+[fb+mb+"?",mb,xb,yb,hb].join("|")+")",wb=RegExp(pb+"(?="+pb+")|"+jb+bb,"g");var Nb=db,Sb=cb,_b=function(e){return e.match(wb)||[]};var kb=ob,Ob=cb,Cb=function(e){return Sb(e)?_b(e):Nb(e)},Ab=Sv;const Eb=Tt(function(e){return function(t){t=Ab(t);var r=Ob(t)?Cb(t):void 0,n=r?r[0]:t.charAt(0),a=r?kb(r,1).join(""):t.slice(1);return n[e]()+a}}("toUpperCase"));function Pb(e){return function(){return e}}const Tb=Math.cos,Mb=Math.sin,Db=Math.sqrt,Ib=Math.PI,Rb=2*Ib,Lb=Math.PI,Fb=2*Lb,Bb=1e-6,qb=Fb-Bb;function $b(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class zb{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?$b:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return $b;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,a,s){this._append`C${+e},${+t},${+r},${+n},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,r,n,a){if(e=+e,t=+t,r=+r,n=+n,(a=+a)<0)throw new Error(`negative radius: ${a}`);let s=this._x1,i=this._y1,o=r-e,l=n-t,c=s-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>Bb)if(Math.abs(d*o-l*c)>Bb&&a){let h=r-s,m=n-i,p=o*o+l*l,f=h*h+m*m,x=Math.sqrt(p),y=Math.sqrt(u),v=a*Math.tan((Lb-Math.acos((p+u-f)/(2*x*y)))/2),g=v/y,b=v/x;Math.abs(g-1)>Bb&&this._append`L${e+g*c},${t+g*d}`,this._append`A${a},${a},0,0,${+(d*h>c*m)},${this._x1=e+b*o},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,r,n,a,s){if(e=+e,t=+t,s=!!s,(r=+r)<0)throw new Error(`negative radius: ${r}`);let i=r*Math.cos(n),o=r*Math.sin(n),l=e+i,c=t+o,d=1^s,u=s?n-a:a-n;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Bb||Math.abs(this._y1-c)>Bb)&&this._append`L${l},${c}`,r&&(u<0&&(u=u%Fb+Fb),u>qb?this._append`A${r},${r},0,1,${d},${e-i},${t-o}A${r},${r},0,1,${d},${this._x1=l},${this._y1=c}`:u>Bb&&this._append`A${r},${r},0,${+(u>=Lb)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function Ub(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new zb(t)}function Vb(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Wb(e){this._context=e}function Hb(e){return new Wb(e)}function Kb(e){return e[0]}function Yb(e){return e[1]}function Gb(e,t){var r=Pb(!0),n=null,a=Hb,s=null,i=Ub(o);function o(o){var l,c,d,u=(o=Vb(o)).length,h=!1;for(null==n&&(s=a(d=i())),l=0;l<=u;++l)!(l<u&&r(c=o[l],l,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(c,l,o),+t(c,l,o));if(d)return s=null,d+""||null}return e="function"==typeof e?e:void 0===e?Kb:Pb(e),t="function"==typeof t?t:void 0===t?Yb:Pb(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:Pb(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:Pb(+e),o):t},o.defined=function(e){return arguments.length?(r="function"==typeof e?e:Pb(!!e),o):r},o.curve=function(e){return arguments.length?(a=e,null!=n&&(s=a(n)),o):a},o.context=function(e){return arguments.length?(null==e?n=s=null:s=a(n=e),o):n},o}function Xb(e,t,r){var n=null,a=Pb(!0),s=null,i=Hb,o=null,l=Ub(c);function c(c){var d,u,h,m,p,f=(c=Vb(c)).length,x=!1,y=new Array(f),v=new Array(f);for(null==s&&(o=i(p=l())),d=0;d<=f;++d){if(!(d<f&&a(m=c[d],d,c))===x)if(x=!x)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=d-1;h>=u;--h)o.point(y[h],v[h]);o.lineEnd(),o.areaEnd()}x&&(y[d]=+e(m,d,c),v[d]=+t(m,d,c),o.point(n?+n(m,d,c):y[d],r?+r(m,d,c):v[d]))}if(p)return o=null,p+""||null}function d(){return Gb().defined(a).curve(i).context(s)}return e="function"==typeof e?e:void 0===e?Kb:Pb(+e),t="function"==typeof t?t:Pb(void 0===t?0:+t),r="function"==typeof r?r:void 0===r?Yb:Pb(+r),c.x=function(t){return arguments.length?(e="function"==typeof t?t:Pb(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:Pb(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:Pb(+e),c):n},c.y=function(e){return arguments.length?(t="function"==typeof e?e:Pb(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:Pb(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Pb(+e),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(e){return arguments.length?(a="function"==typeof e?e:Pb(!!e),c):a},c.curve=function(e){return arguments.length?(i=e,null!=s&&(o=i(s)),c):i},c.context=function(e){return arguments.length?(null==e?s=o=null:o=i(s=e),c):s},c}Wb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class Qb{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const Jb={draw(e,t){const r=Db(t/Ib);e.moveTo(r,0),e.arc(0,0,r,0,Rb)}},Zb={draw(e,t){const r=Db(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},ej=Db(1/3),tj=2*ej,rj={draw(e,t){const r=Db(t/tj),n=r*ej;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},nj={draw(e,t){const r=Db(t),n=-r/2;e.rect(n,n,r,r)}},aj=Mb(Ib/10)/Mb(7*Ib/10),sj=Mb(Rb/10)*aj,ij=-Tb(Rb/10)*aj,oj={draw(e,t){const r=Db(.8908130915292852*t),n=sj*r,a=ij*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const t=Rb*s/5,i=Tb(t),o=Mb(t);e.lineTo(o*r,-i*r),e.lineTo(i*n-o*a,o*n+i*a)}e.closePath()}},lj=Db(3),cj={draw(e,t){const r=-Db(t/(3*lj));e.moveTo(0,2*r),e.lineTo(-lj*r,-r),e.lineTo(lj*r,-r),e.closePath()}},dj=-.5,uj=Db(3)/2,hj=1/Db(12),mj=3*(hj/2+1),pj={draw(e,t){const r=Db(t/mj),n=r/2,a=r*hj,s=n,i=r*hj+r,o=-s,l=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,l),e.lineTo(dj*n-uj*a,uj*n+dj*a),e.lineTo(dj*s-uj*i,uj*s+dj*i),e.lineTo(dj*o-uj*l,uj*o+dj*l),e.lineTo(dj*n+uj*a,dj*a-uj*n),e.lineTo(dj*s+uj*i,dj*i-uj*s),e.lineTo(dj*o+uj*l,dj*l-uj*o),e.closePath()}};function fj(){}function xj(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function yj(e){this._context=e}function vj(e){this._context=e}function gj(e){this._context=e}function bj(e){this._context=e}function jj(e){return e<0?-1:1}function wj(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(jj(s)+jj(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function Nj(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Sj(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function _j(e){this._context=e}function kj(e){this._context=new Oj(e)}function Oj(e){this._context=e}function Cj(e){this._context=e}function Aj(e){var t,r,n=e.length-1,a=new Array(n),s=new Array(n),i=new Array(n);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/s[t-1],s[t]-=r,i[t]-=r*i[t-1];for(a[n-1]=i[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function Ej(e,t){this._context=e,this._t=t}function Pj(e,t){if((a=e.length)>1)for(var r,n,a,s=1,i=e[t[0]],o=i.length;s<a;++s)for(n=i,i=e[t[s]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function Tj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Mj(e,t){return e[t]}function Dj(e){const t=[];return t.key=e,t}function Ij(e){return(Ij="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}yj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xj(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xj(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},vj.prototype={areaStart:fj,areaEnd:fj,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:xj(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},gj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:xj(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},bj.prototype={areaStart:fj,areaEnd:fj,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},_j.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Sj(this,this._t0,Nj(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Sj(this,Nj(this,r=wj(this,e,t)),r);break;default:Sj(this,this._t0,r=wj(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(kj.prototype=Object.create(_j.prototype)).point=function(e,t){_j.prototype.point.call(this,t,e)},Oj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}},Cj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=Aj(e),a=Aj(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Ej.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var Rj=["type","size","sizeType"];function Lj(){return Lj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lj.apply(this,arguments)}function Fj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Bj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fj(Object(r),!0).forEach(function(t){qj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function qj(e,t,r){var n;return n=function(e,t){if("object"!=Ij(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ij(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ij(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $j(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var zj={symbolCircle:Jb,symbolCross:Zb,symbolDiamond:rj,symbolSquare:nj,symbolStar:oj,symbolTriangle:cj,symbolWye:pj},Uj=Math.PI/180,Vj=function(e){var t,r,n=e.type,a=void 0===n?"circle":n,s=e.size,i=void 0===s?64:s,o=e.sizeType,l=void 0===o?"area":o,c=Bj(Bj({},$j(e,Rj)),{},{type:a,size:i,sizeType:l}),d=c.className,u=c.cx,h=c.cy,m=Kg(c,!0);return u===+u&&h===+h&&i===+i?At.createElement("path",Lj({},m,{className:Vr("recharts-symbols",d),transform:"translate(".concat(u,", ").concat(h,")"),d:(t=function(e){var t="symbol".concat(Eb(e));return zj[t]||Jb}(a),r=function(e,t){let r=null,n=Ub(a);function a(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return e="function"==typeof e?e:Pb(e||Jb),t="function"==typeof t?t:Pb(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"==typeof t?t:Pb(t),a):e},a.size=function(e){return arguments.length?(t="function"==typeof e?e:Pb(+e),a):t},a.context=function(e){return arguments.length?(r=null==e?null:e,a):r},a}().type(t).size(function(e,t,r){if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*Uj;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.pow(Math.tan(n),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(i,l,a)),r())})):null};function Wj(e){return(Wj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hj(){return Hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hj.apply(this,arguments)}function Kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Yj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ew(n.key),n)}}function Gj(e,t,r){return t=Qj(t),function(e,t){if(t&&("object"===Wj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xj()?Reflect.construct(t,r||[],Qj(e).constructor):t.apply(e,r))}function Xj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Xj=function(){return!!e})()}function Qj(e){return(Qj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jj(e,t){return(Jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Zj(e,t,r){return(t=ew(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ew(e){var t=function(e,t){if("object"!=Wj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Wj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wj(t)?t:t+""}Vj.registerSymbol=function(e,t){zj["symbol".concat(Eb(e))]=t};var tw=32,rw=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Gj(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jj(e,t)}(e,Ct.PureComponent),t=e,r=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,r=16,n=tw/6,a=tw/3,s=e.inactive?t:e.color;if("plainline"===e.type)return At.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:tw,y2:r,className:"recharts-legend-icon"});if("line"===e.type)return At.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(r,"h").concat(a,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(2*a,",").concat(r,"\n            H").concat(tw,"M").concat(2*a,",").concat(r,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(a,",").concat(r),className:"recharts-legend-icon"});if("rect"===e.type)return At.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(4,"h").concat(tw,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(At.isValidElement(e.legendIcon)){var i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kj(Object(r),!0).forEach(function(t){Zj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return delete i.legendIcon,At.cloneElement(e.legendIcon,i)}return At.createElement(Vj,{fill:s,cx:r,cy:r,size:tw,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,r=t.payload,n=t.iconSize,a=t.layout,s=t.formatter,i=t.inactiveColor,o={x:0,y:0,width:tw,height:tw},l={display:"horizontal"===a?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map(function(t,r){var a=t.formatter||s,d=Vr(Zj(Zj({"recharts-legend-item":!0},"legend-item-".concat(r),!0),"inactive",t.inactive));if("none"===t.type)return null;var u=Wx(t.value)?null:t.value;sb(!Wx(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var h=t.inactive?i:t.color;return At.createElement("li",Hj({className:d,style:l,key:"legend-item-".concat(r)},Tg(e.props,t,r)),At.createElement(eb,{width:n,height:n,viewBox:o,style:c},e.renderIcon(t)),At.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},a?a(u,t,r):u))})}},{key:"render",value:function(){var e=this.props,t=e.payload,r=e.layout,n=e.align;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:"horizontal"===r?n:"left"};return At.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}],r&&Yj(t.prototype,r),n&&Yj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();Zj(rw,"displayName","Legend"),Zj(rw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var nw=Uy;var aw=Uy,sw=Vy,iw=iv;var ow=Uy,lw=function(){this.__data__=new nw,this.size=0},cw=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},dw=function(e){return this.__data__.get(e)},uw=function(e){return this.__data__.has(e)},hw=function(e,t){var r=this.__data__;if(r instanceof aw){var n=r.__data__;if(!sw||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new iw(n)}return r.set(e,t),this.size=r.size,this};function mw(e){var t=this.__data__=new ow(e);this.size=t.size}mw.prototype.clear=lw,mw.prototype.delete=cw,mw.prototype.get=dw,mw.prototype.has=uw,mw.prototype.set=hw;var pw=mw;var fw=iv,xw=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},yw=function(e){return this.__data__.has(e)};function vw(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new fw;++t<r;)this.add(e[t])}vw.prototype.add=vw.prototype.push=xw,vw.prototype.has=yw;var gw=vw;var bw=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var jw=function(e,t){return e.has(t)},ww=gw,Nw=bw,Sw=jw;var _w=function(e,t,r,n,a,s){var i=1&r,o=e.length,l=t.length;if(o!=l&&!(i&&l>o))return!1;var c=s.get(e),d=s.get(t);if(c&&d)return c==t&&d==e;var u=-1,h=!0,m=2&r?new ww:void 0;for(s.set(e,t),s.set(t,e);++u<o;){var p=e[u],f=t[u];if(n)var x=i?n(f,p,u,t,e,s):n(p,f,u,e,t,s);if(void 0!==x){if(x)continue;h=!1;break}if(m){if(!Nw(t,function(e,t){if(!Sw(m,t)&&(p===e||a(p,e,r,n,s)))return m.push(t)})){h=!1;break}}else if(p!==f&&!a(p,f,r,n,s)){h=!1;break}}return s.delete(e),s.delete(t),h};var kw=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},Ow=vx.Uint8Array,Cw=Ay,Aw=_w,Ew=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},Pw=kw,Tw=gx?gx.prototype:void 0,Mw=Tw?Tw.valueOf:void 0;var Dw=function(e,t,r,n,a,s,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new Ow(e),new Ow(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Cw(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=Ew;case"[object Set]":var l=1&n;if(o||(o=Pw),e.size!=t.size&&!l)return!1;var c=i.get(e);if(c)return c==t;n|=2,i.set(e,t);var d=Aw(o(e),o(t),n,a,s,i);return i.delete(e),d;case"[object Symbol]":if(Mw)return Mw.call(e)==Mw.call(t)}return!1};var Iw=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e},Rw=Iw,Lw=px;var Fw=function(e,t,r){var n=t(e);return Lw(e)?n:Rw(n,r(e))};var Bw=function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,s=[];++r<n;){var i=e[r];t(i,r,e)&&(s[a++]=i)}return s},qw=function(){return[]},$w=Object.prototype.propertyIsEnumerable,zw=Object.getOwnPropertySymbols,Uw=zw?function(e){return null==e?[]:(e=Object(e),Bw(zw(e),function(t){return $w.call(e,t)}))}:qw;var Vw=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},Ww=Ex,Hw=Px;var Kw,Yw,Gw,Xw,Qw,Jw,Zw,eN,tN=function(e){return Hw(e)&&"[object Arguments]"==Ww(e)},rN=Px,nN=Object.prototype,aN=nN.hasOwnProperty,sN=nN.propertyIsEnumerable,iN=tN(function(){return arguments}())?tN:function(e){return rN(e)&&aN.call(e,"callee")&&!sN.call(e,"callee")},oN={exports:{}};Kw=oN,Gw=vx,Xw=function(){return!1},Qw=(Yw=oN.exports)&&!Yw.nodeType&&Yw,Jw=Qw&&Kw&&!Kw.nodeType&&Kw,Zw=Jw&&Jw.exports===Qw?Gw.Buffer:void 0,eN=(Zw?Zw.isBuffer:void 0)||Xw,Kw.exports=eN;var lN=oN.exports,cN=/^(?:0|[1-9]\d*)$/;var dN=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&cN.test(e))&&e>-1&&e%1==0&&e<t};var uN=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},hN=Ex,mN=uN,pN=Px,fN={};fN["[object Float32Array]"]=fN["[object Float64Array]"]=fN["[object Int8Array]"]=fN["[object Int16Array]"]=fN["[object Int32Array]"]=fN["[object Uint8Array]"]=fN["[object Uint8ClampedArray]"]=fN["[object Uint16Array]"]=fN["[object Uint32Array]"]=!0,fN["[object Arguments]"]=fN["[object Array]"]=fN["[object ArrayBuffer]"]=fN["[object Boolean]"]=fN["[object DataView]"]=fN["[object Date]"]=fN["[object Error]"]=fN["[object Function]"]=fN["[object Map]"]=fN["[object Number]"]=fN["[object Object]"]=fN["[object RegExp]"]=fN["[object Set]"]=fN["[object String]"]=fN["[object WeakMap]"]=!1;var xN=function(e){return pN(e)&&mN(e.length)&&!!fN[hN(e)]};var yN=function(e){return function(t){return e(t)}},vN={exports:{}};!function(e,t){var r=fx,n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,s=a&&a.exports===n&&r.process,i=function(){try{var e=a&&a.require&&a.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=i}(vN,vN.exports);var gN=vN.exports,bN=xN,jN=yN,wN=gN&&gN.isTypedArray,NN=wN?jN(wN):bN,SN=Vw,_N=iN,kN=px,ON=lN,CN=dN,AN=NN,EN=Object.prototype.hasOwnProperty;var PN=function(e,t){var r=kN(e),n=!r&&_N(e),a=!r&&!n&&ON(e),s=!r&&!n&&!a&&AN(e),i=r||n||a||s,o=i?SN(e.length,String):[],l=o.length;for(var c in e)!t&&!EN.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||CN(c,l))||o.push(c);return o},TN=Object.prototype;var MN=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||TN)};var DN=function(e,t){return function(r){return e(t(r))}},IN=DN(Object.keys,Object),RN=MN,LN=IN,FN=Object.prototype.hasOwnProperty;var BN=Vx,qN=uN;var $N=function(e){return null!=e&&qN(e.length)&&!BN(e)},zN=PN,UN=function(e){if(!RN(e))return LN(e);var t=[];for(var r in Object(e))FN.call(e,r)&&"constructor"!=r&&t.push(r);return t},VN=$N;var WN=function(e){return VN(e)?zN(e):UN(e)},HN=Fw,KN=Uw,YN=WN;var GN=function(e){return HN(e,YN,KN)},XN=Object.prototype.hasOwnProperty;var QN=function(e,t,r,n,a,s){var i=1&r,o=GN(e),l=o.length;if(l!=GN(t).length&&!i)return!1;for(var c=l;c--;){var d=o[c];if(!(i?d in t:XN.call(t,d)))return!1}var u=s.get(e),h=s.get(t);if(u&&h)return u==t&&h==e;var m=!0;s.set(e,t),s.set(t,e);for(var p=i;++c<l;){var f=e[d=o[c]],x=t[d];if(n)var y=i?n(x,f,d,t,e,s):n(f,x,d,e,t,s);if(!(void 0===y?f===x||a(f,x,r,n,s):y)){m=!1;break}p||(p="constructor"==d)}if(m&&!p){var v=e.constructor,g=t.constructor;v==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g||(m=!1)}return s.delete(e),s.delete(t),m},JN=dy(vx,"DataView"),ZN=dy(vx,"Promise"),eS=dy(vx,"Set"),tS=JN,rS=Vy,nS=ZN,aS=eS,sS=dy(vx,"WeakMap"),iS=Ex,oS=Qx,lS="[object Map]",cS="[object Promise]",dS="[object Set]",uS="[object WeakMap]",hS="[object DataView]",mS=oS(tS),pS=oS(rS),fS=oS(nS),xS=oS(aS),yS=oS(sS),vS=iS;(tS&&vS(new tS(new ArrayBuffer(1)))!=hS||rS&&vS(new rS)!=lS||nS&&vS(nS.resolve())!=cS||aS&&vS(new aS)!=dS||sS&&vS(new sS)!=uS)&&(vS=function(e){var t=iS(e),r="[object Object]"==t?e.constructor:void 0,n=r?oS(r):"";if(n)switch(n){case mS:return hS;case pS:return lS;case fS:return cS;case xS:return dS;case yS:return uS}return t});var gS=pw,bS=_w,jS=Dw,wS=QN,NS=vS,SS=px,_S=lN,kS=NN,OS="[object Arguments]",CS="[object Array]",AS="[object Object]",ES=Object.prototype.hasOwnProperty;var PS=function(e,t,r,n,a,s){var i=SS(e),o=SS(t),l=i?CS:NS(e),c=o?CS:NS(t),d=(l=l==OS?AS:l)==AS,u=(c=c==OS?AS:c)==AS,h=l==c;if(h&&_S(e)){if(!_S(t))return!1;i=!0,d=!1}if(h&&!d)return s||(s=new gS),i||kS(e)?bS(e,t,r,n,a,s):jS(e,t,l,r,n,a,s);if(!(1&r)){var m=d&&ES.call(e,"__wrapped__"),p=u&&ES.call(t,"__wrapped__");if(m||p){var f=m?e.value():e,x=p?t.value():t;return s||(s=new gS),a(f,x,r,n,s)}}return!!h&&(s||(s=new gS),wS(e,t,r,n,a,s))},TS=Px;var MS=function e(t,r,n,a,s){return t===r||(null==t||null==r||!TS(t)&&!TS(r)?t!=t&&r!=r:PS(t,r,n,a,e,s))},DS=pw,IS=MS;var RS=qx;var LS=function(e){return e==e&&!RS(e)},FS=LS,BS=WN;var qS=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}},$S=function(e,t,r,n){var a=r.length,s=a,i=!n;if(null==e)return!s;for(e=Object(e);a--;){var o=r[a];if(i&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<s;){var l=(o=r[a])[0],c=e[l],d=o[1];if(i&&o[2]){if(void 0===c&&!(l in e))return!1}else{var u=new DS;if(n)var h=n(c,d,l,e,t,u);if(!(void 0===h?IS(d,c,3,n,u):h))return!1}}return!0},zS=function(e){for(var t=BS(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,FS(a)]}return t},US=qS;var VS=Av,WS=iN,HS=px,KS=dN,YS=uN,GS=Pv;var XS=function(e,t){return null!=e&&t in Object(e)},QS=function(e,t,r){for(var n=-1,a=(t=VS(t,e)).length,s=!1;++n<a;){var i=GS(t[n]);if(!(s=null!=e&&r(e,i)))break;e=e[i]}return s||++n!=a?s:!!(a=null==e?0:e.length)&&YS(a)&&KS(i,a)&&(HS(e)||WS(e))};var JS=MS,ZS=Rv,e_=function(e,t){return null!=e&&QS(e,t,XS)},t_=Bx,r_=LS,n_=qS,a_=Pv;var s_=function(e){return e};var i_=Dv;var o_=function(e){return function(t){return null==t?void 0:t[e]}},l_=function(e){return function(t){return i_(t,e)}},c_=Bx,d_=Pv;var u_=function(e){var t=zS(e);return 1==t.length&&t[0][2]?US(t[0][0],t[0][1]):function(r){return r===e||$S(r,e,t)}},h_=function(e,t){return t_(e)&&r_(t)?n_(a_(e),t):function(r){var n=ZS(r,e);return void 0===n&&n===t?e_(r,e):JS(t,n,3)}},m_=s_,p_=px,f_=function(e){return c_(e)?o_(d_(e)):l_(e)};var x_=function(e){return"function"==typeof e?e:null==e?m_:"object"==typeof e?p_(e)?h_(e[0],e[1]):u_(e):f_(e)};var y_=function(e,t,r,n){for(var a=e.length,s=r+(n?1:-1);n?s--:++s<a;)if(t(e[s],s,e))return s;return-1};var v_=y_,g_=function(e){return e!=e},b_=function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1};var j_=function(e,t,r){return t==t?b_(e,t,r):v_(e,g_,r)};var w_=function(e,t){return!!(null==e?0:e.length)&&j_(e,t,0)>-1};var N_=function(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1};var S_=eS,__=function(){},k_=S_&&1/kw(new S_([,-0]))[1]==1/0?function(e){return new S_(e)}:__,O_=gw,C_=w_,A_=N_,E_=jw,P_=k_,T_=kw;var M_=x_,D_=function(e,t,r){var n=-1,a=C_,s=e.length,i=!0,o=[],l=o;if(r)i=!1,a=A_;else if(s>=200){var c=t?null:P_(e);if(c)return T_(c);i=!1,a=E_,l=new O_}else l=t?[]:o;e:for(;++n<s;){var d=e[n],u=t?t(d):d;if(d=r||0!==d?d:0,i&&u==u){for(var h=l.length;h--;)if(l[h]===u)continue e;t&&l.push(u),o.push(d)}else a(l,u,r)||(l!==o&&l.push(u),o.push(d))}return o};const I_=Tt(function(e,t){return e&&e.length?D_(e,M_(t)):[]});function R_(e,t,r){return!0===t?I_(e,r):Wx(t)?I_(e,t):e}function L_(e){return(L_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var F_=["ref"];function B_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function q_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B_(Object(r),!0).forEach(function(t){H_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K_(n.key),n)}}function z_(e,t,r){return t=V_(t),function(e,t){if(t&&("object"===L_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,U_()?Reflect.construct(t,r||[],V_(e).constructor):t.apply(e,r))}function U_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(U_=function(){return!!e})()}function V_(e){return(V_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W_(e,t){return(W_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function H_(e,t,r){return(t=K_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K_(e){var t=function(e,t){if("object"!=L_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=L_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L_(t)?t:t+""}function Y_(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function G_(e){return e.value}var X_=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return H_(t=z_(this,e,[].concat(n)),"lastBoundingBox",{width:-1,height:-1}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W_(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"getWithHeight",value:function(e,t){var r=q_(q_({},this.defaultProps),e.props).layout;return"vertical"===r&&xg(e.props.height)?{height:e.props.height}:"horizontal"===r?{width:e.props.width||t}:null}}],(r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?q_({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,r,n=this.props,a=n.layout,s=n.align,i=n.verticalAlign,o=n.margin,l=n.chartWidth,c=n.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===s&&"vertical"===a?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===s?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(r="middle"===i?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===i?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),q_(q_({},t),r)}},{key:"render",value:function(){var e=this,t=this.props,r=t.content,n=t.width,a=t.height,s=t.wrapperStyle,i=t.payloadUniqBy,o=t.payload,l=q_(q_({position:"absolute",width:n||"auto",height:a||"auto"},this.getDefaultPosition(s)),s);return At.createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(t){e.wrapperNode=t}},function(e,t){if(At.isValidElement(e))return At.cloneElement(e,t);if("function"==typeof e)return At.createElement(e,t);t.ref;var r=Y_(t,F_);return At.createElement(rw,r)}(r,q_(q_({},this.props),{},{payload:R_(o,i,G_)})))}}])&&$_(t.prototype,r),n&&$_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();H_(X_,"displayName","Legend"),H_(X_,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Q_=iN,J_=px,Z_=gx?gx.isConcatSpreadable:void 0;var ek=Iw,tk=function(e){return J_(e)||Q_(e)||!!(Z_&&e&&e[Z_])};var rk=function e(t,r,n,a,s){var i=-1,o=t.length;for(n||(n=tk),s||(s=[]);++i<o;){var l=t[i];r>0&&n(l)?r>1?e(l,r-1,n,a,s):ek(s,l):a||(s[s.length]=l)}return s};var nk=function(e){return function(t,r,n){for(var a=-1,s=Object(t),i=n(t),o=i.length;o--;){var l=i[e?o:++a];if(!1===r(s[l],l,s))break}return t}}(),ak=WN;var sk=function(e,t){return e&&nk(e,t,ak)},ik=$N;var ok=function(e,t){return function(r,n){if(null==r)return r;if(!ik(r))return e(r,n);for(var a=r.length,s=t?a:-1,i=Object(r);(t?s--:++s<a)&&!1!==n(i[s],s,i););return r}}(sk),lk=ok,ck=$N;var dk=function(e,t){var r=-1,n=ck(e)?Array(e.length):[];return lk(e,function(e,a,s){n[++r]=t(e,a,s)}),n};var uk=Dx;var hk=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,a=e==e,s=uk(e),i=void 0!==t,o=null===t,l=t==t,c=uk(t);if(!o&&!c&&!s&&e>t||s&&i&&l&&!o&&!c||n&&i&&l||!r&&l||!a)return 1;if(!n&&!s&&!c&&e<t||c&&r&&a&&!n&&!s||o&&r&&a||!i&&a||!l)return-1}return 0};var mk=xv,pk=Dv,fk=x_,xk=dk,yk=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e},vk=yN,gk=function(e,t,r){for(var n=-1,a=e.criteria,s=t.criteria,i=a.length,o=r.length;++n<i;){var l=hk(a[n],s[n]);if(l)return n>=o?l:l*("desc"==r[n]?-1:1)}return e.index-t.index},bk=s_,jk=px;var wk=function(e,t,r){t=t.length?mk(t,function(e){return jk(e)?function(t){return pk(t,1===e.length?e[0]:e)}:e}):[bk];var n=-1;t=mk(t,vk(fk));var a=xk(e,function(e,r,a){return{criteria:mk(t,function(t){return t(e)}),index:++n,value:e}});return yk(a,function(e,t){return gk(e,t,r)})};var Nk=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},Sk=Nk,_k=Math.max;var kk=function(e,t,r){return t=_k(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=_k(n.length-t,0),i=Array(s);++a<s;)i[a]=n[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=n[a];return o[t]=r(i),Sk(e,this,o)}};var Ok=function(e){return function(){return e}},Ck=dy,Ak=function(){try{var e=Ck(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Ek=Ok,Pk=Ak,Tk=Pk?function(e,t){return Pk(e,"toString",{configurable:!0,enumerable:!1,value:Ek(t),writable:!0})}:s_,Mk=Date.now;var Dk=function(e){var t=0,r=0;return function(){var n=Mk(),a=16-(n-r);if(r=n,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Tk),Ik=s_,Rk=kk,Lk=Dk;var Fk=Ay,Bk=$N,qk=dN,$k=qx;var zk=function(e,t,r){if(!$k(r))return!1;var n=typeof t;return!!("number"==n?Bk(r)&&qk(t,r.length):"string"==n&&t in r)&&Fk(r[t],e)},Uk=rk,Vk=wk,Wk=zk;const Hk=Tt(function(e,t){return Lk(Rk(e,t,Ik),e+"")}(function(e,t){if(null==e)return[];var r=t.length;return r>1&&Wk(e,t[0],t[1])?t=[]:r>2&&Wk(t[0],t[1],t[2])&&(t=[t[0]]),Vk(e,Uk(t,1),[])}));function Kk(e){return(Kk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yk(){return Yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yk.apply(this,arguments)}function Gk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Jk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qk(Object(r),!0).forEach(function(t){Zk(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Zk(e,t,r){var n;return n=function(e,t){if("object"!=Kk(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Kk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Kk(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eO(e){return Array.isArray(e)&&yg(e[0])&&yg(e[1])?e.join(" ~ "):e}var tO=function(e){var t=e.separator,r=void 0===t?" : ":t,n=e.contentStyle,a=void 0===n?{}:n,s=e.itemStyle,i=void 0===s?{}:s,o=e.labelStyle,l=void 0===o?{}:o,c=e.payload,d=e.formatter,u=e.itemSorter,h=e.wrapperClassName,m=e.labelClassName,p=e.label,f=e.labelFormatter,x=e.accessibilityLayer,y=void 0!==x&&x,v=Jk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),g=Jk({margin:0},l),b=!Fv(p),j=b?p:"",w=Vr("recharts-default-tooltip",h),N=Vr("recharts-tooltip-label",m);b&&f&&null!=c&&(j=f(p,c));var S=y?{role:"status","aria-live":"assertive"}:{};return At.createElement("div",Yk({className:w,style:v},S),At.createElement("p",{className:N,style:g},At.isValidElement(j)?j:"".concat(j)),function(){if(c&&c.length){var e=(u?Hk(c,u):c).map(function(e,t){if("none"===e.type)return null;var n=Jk({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},i),a=e.formatter||d||eO,s=e.value,o=e.name,l=s,u=o;if(a&&null!=l&&null!=u){var h=a(s,o,e,t,c);if(Array.isArray(h)){var m=Gk(h,2);l=m[0],u=m[1]}else l=h}return At.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:n},yg(u)?At.createElement("span",{className:"recharts-tooltip-item-name"},u):null,yg(u)?At.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,At.createElement("span",{className:"recharts-tooltip-item-value"},l),At.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return At.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function rO(e){return(rO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nO(e,t,r){var n;return n=function(e,t){if("object"!=rO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==rO(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var aO="recharts-tooltip-wrapper",sO={visibility:"hidden"};function iO(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Vr(aO,nO(nO(nO(nO({},"".concat(aO,"-right"),xg(r)&&t&&xg(t.x)&&r>=t.x),"".concat(aO,"-left"),xg(r)&&t&&xg(t.x)&&r<t.x),"".concat(aO,"-bottom"),xg(n)&&t&&xg(t.y)&&n>=t.y),"".concat(aO,"-top"),xg(n)&&t&&xg(t.y)&&n<t.y))}function oO(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(s&&xg(s[n]))return s[n];var d=r[n]-o-a,u=r[n]+a;return t[n]?i[n]?d:u:i[n]?d<l[n]?Math.max(u,l[n]):Math.max(d,l[n]):u+o>l[n]+c?Math.max(d,l[n]):Math.max(u,l[n])}function lO(e){return(lO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cO(Object(r),!0).forEach(function(t){xO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function uO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yO(n.key),n)}}function hO(e,t,r){return t=pO(t),function(e,t){if(t&&("object"===lO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mO()?Reflect.construct(t,r||[],pO(e).constructor):t.apply(e,r))}function mO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(mO=function(){return!!e})()}function pO(e){return(pO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fO(e,t){return(fO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xO(e,t,r){return(t=yO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yO(e){var t=function(e,t){if("object"!=lO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lO(t)?t:t+""}var vO=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return xO(t=hO(this,e,[].concat(n)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),xO(t,"handleKeyDown",function(e){var r,n,a,s;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(r=null===(n=t.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==r?r:0,y:null!==(a=null===(s=t.props.coordinate)||void 0===s?void 0:s.y)&&void 0!==a?a:0}})}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fO(e,t)}(e,Ct.PureComponent),t=e,(r=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,a=t.animationDuration,s=t.animationEasing,i=t.children,o=t.coordinate,l=t.hasPayload,c=t.isAnimationActive,d=t.offset,u=t.position,h=t.reverseDirection,m=t.useTranslate3d,p=t.viewBox,f=t.wrapperStyle,x=function(e){var t,r,n=e.allowEscapeViewBox,a=e.coordinate,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,d=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&a?function(e){var t=e.translateX,r=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:t=oO({allowEscapeViewBox:n,coordinate:a,key:"x",offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),translateY:r=oO({allowEscapeViewBox:n,coordinate:a,key:"y",offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:c}):sO,cssClasses:iO({translateX:t,translateY:r,coordinate:a})}}({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:p}),y=x.cssClasses,v=x.cssProperties,g=dO(dO({transition:c&&r?"transform ".concat(a,"ms ").concat(s):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&l?"visible":"hidden",position:"absolute",top:0,left:0},f);return At.createElement("div",{tabIndex:-1,className:y,style:g,ref:function(t){e.wrapperNode=t}},i)}}])&&uO(t.prototype,r),n&&uO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),gO={isSsr:!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return gO[e]},set:function(e,t){if("string"==typeof e)gO[e]=t;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(t){gO[t]=e[t]})}}};function bO(e){return(bO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jO(Object(r),!0).forEach(function(t){CO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function NO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AO(n.key),n)}}function SO(e,t,r){return t=kO(t),function(e,t){if(t&&("object"===bO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_O()?Reflect.construct(t,r||[],kO(e).constructor):t.apply(e,r))}function _O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_O=function(){return!!e})()}function kO(e){return(kO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OO(e,t){return(OO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function CO(e,t,r){return(t=AO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AO(e){var t=function(e,t){if("object"!=bO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bO(t)?t:t+""}function EO(e){return e.dataKey}var PO=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),SO(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OO(e,t)}(e,Ct.PureComponent),t=e,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,a=t.animationDuration,s=t.animationEasing,i=t.content,o=t.coordinate,l=t.filterNull,c=t.isAnimationActive,d=t.offset,u=t.payload,h=t.payloadUniqBy,m=t.position,p=t.reverseDirection,f=t.useTranslate3d,x=t.viewBox,y=t.wrapperStyle,v=null!=u?u:[];l&&v.length&&(v=R_(u.filter(function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)}),h,EO));var g=v.length>0;return At.createElement(vO,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:r,coordinate:o,hasPayload:g,offset:d,position:m,reverseDirection:p,useTranslate3d:f,viewBox:x,wrapperStyle:y},function(e,t){return At.isValidElement(e)?At.cloneElement(e,t):"function"==typeof e?At.createElement(e,t):At.createElement(tO,t)}(i,wO(wO({},this.props),{},{payload:v})))}}])&&NO(t.prototype,r),n&&NO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();CO(PO,"displayName","Tooltip"),CO(PO,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!gO.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var TO=vx,MO=/\s/;var DO=function(e){for(var t=e.length;t--&&MO.test(e.charAt(t)););return t},IO=/^\s+/;var RO=function(e){return e?e.slice(0,DO(e)+1).replace(IO,""):e},LO=qx,FO=Dx,BO=/^[-+]0x[0-9a-f]+$/i,qO=/^0b[01]+$/i,$O=/^0o[0-7]+$/i,zO=parseInt;var UO=function(e){if("number"==typeof e)return e;if(FO(e))return NaN;if(LO(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=LO(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=RO(e);var r=qO.test(e);return r||$O.test(e)?zO(e.slice(2),r?2:8):BO.test(e)?NaN:+e},VO=qx,WO=function(){return TO.Date.now()},HO=UO,KO=Math.max,YO=Math.min;var GO=function(e,t,r){var n,a,s,i,o,l,c=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var r=n,s=a;return n=a=void 0,c=t,i=e.apply(s,r)}function p(e){var r=e-l;return void 0===l||r>=t||r<0||u&&e-c>=s}function f(){var e=WO();if(p(e))return x(e);o=setTimeout(f,function(e){var r=t-(e-l);return u?YO(r,s-(e-c)):r}(e))}function x(e){return o=void 0,h&&n?m(e):(n=a=void 0,i)}function y(){var e=WO(),r=p(e);if(n=arguments,a=this,l=e,r){if(void 0===o)return function(e){return c=e,o=setTimeout(f,t),d?m(e):i}(l);if(u)return clearTimeout(o),o=setTimeout(f,t),m(l)}return void 0===o&&(o=setTimeout(f,t)),i}return t=HO(t)||0,VO(r)&&(d=!!r.leading,s=(u="maxWait"in r)?KO(HO(r.maxWait)||0,t):s,h="trailing"in r?!!r.trailing:h),y.cancel=function(){void 0!==o&&clearTimeout(o),c=0,n=l=a=o=void 0},y.flush=function(){return void 0===o?i:x(WO())},y},XO=GO,QO=qx;const JO=Tt(function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return QO(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),XO(e,t,{leading:n,maxWait:t,trailing:a})});function ZO(e){return(ZO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(r),!0).forEach(function(t){rC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rC(e,t,r){var n;return n=function(e,t){if("object"!=ZO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ZO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ZO(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return aC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sC=Ct.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=void 0===n?{width:-1,height:-1}:n,s=e.width,i=void 0===s?"100%":s,o=e.height,l=void 0===o?"100%":o,c=e.minWidth,d=void 0===c?0:c,u=e.minHeight,h=e.maxHeight,m=e.children,p=e.debounce,f=void 0===p?0:p,x=e.id,y=e.className,v=e.onResize,g=e.style,b=void 0===g?{}:g,j=Ct.useRef(null),w=Ct.useRef();w.current=v,Ct.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var N=nC(Ct.useState({containerWidth:a.width,containerHeight:a.height}),2),S=N[0],_=N[1],k=Ct.useCallback(function(e,t){_(function(r){var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]);Ct.useEffect(function(){var e=function(e){var t,r=e[0].contentRect,n=r.width,a=r.height;k(n,a),null===(t=w.current)||void 0===t||t.call(w,n,a)};f>0&&(e=JO(e,f,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),r=j.current.getBoundingClientRect(),n=r.width,a=r.height;return k(n,a),t.observe(j.current),function(){t.disconnect()}},[k,f]);var O=Ct.useMemo(function(){var e=S.containerWidth,t=S.containerHeight;if(e<0||t<0)return null;sb(fg(i)||fg(l),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",i,l),sb(!r||r>0,"The aspect(%s) must be greater than zero.",r);var n=fg(i)?e:i,a=fg(l)?t:l;r&&r>0&&(n?a=n/r:a&&(n=a*r),h&&a>h&&(a=h)),sb(n>0||a>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",n,a,i,l,d,u,r);var s=!Array.isArray(m)&&Fg(m.type).endsWith("Chart");return At.Children.map(m,function(e){return At.isValidElement(e)?Ct.cloneElement(e,tC({width:n,height:a},s?{style:tC({height:"100%",width:"100%",maxHeight:a,maxWidth:n},e.props.style)}:{})):e})},[r,m,l,h,u,d,S,i]);return At.createElement("div",{id:x?"".concat(x):void 0,className:Vr("recharts-responsive-container",y),style:tC(tC({},b),{},{width:i,height:l,minWidth:d,minHeight:u,maxHeight:h}),ref:j},O)}),iC=function(e){return null};function oC(e){return(oC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lC(Object(r),!0).forEach(function(t){dC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function dC(e,t,r){var n;return n=function(e,t){if("object"!=oC(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==oC(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}iC.displayName="Cell";var uC={widthCache:{},cacheCount:0},hC={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},mC="recharts_measurement_span";var pC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||gO.isSsr)return{width:0,height:0};var r,n=(r=cC({},t),Object.keys(r).forEach(function(e){r[e]||delete r[e]}),r),a=JSON.stringify({text:e,copyStyle:n});if(uC.widthCache[a])return uC.widthCache[a];try{var s=document.getElementById(mC);s||((s=document.createElement("span")).setAttribute("id",mC),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var i=cC(cC({},hC),n);Object.assign(s.style,i),s.textContent="".concat(e);var o=s.getBoundingClientRect(),l={width:o.width,height:o.height};return uC.widthCache[a]=l,++uC.cacheCount>2e3&&(uC.cacheCount=0,uC.widthCache={}),l}catch(c){return{width:0,height:0}}};function fC(e){return(fC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gC(n.key),n)}}function gC(e){var t=function(e,t){if("object"!=fC(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fC(t)?t:t+""}var bC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wC=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NC=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,SC={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},_C=Object.keys(SC),kC="NaN";var OC=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),""===r||wC.test(r)||(this.num=NaN,this.unit=""),_C.includes(r)&&(this.num=function(e,t){return e*SC[t]}(t,r),this.unit="px")}return t=e,n=[{key:"parse",value:function(t){var r,n=xC(null!==(r=NC.exec(t))&&void 0!==r?r:[],3),a=n[1],s=n[2];return new e(parseFloat(a),null!=s?s:"")}}],(r=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&vC(t.prototype,r),n&&vC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function CC(e){if(e.includes(kC))return kC;for(var t=e;t.includes("*")||t.includes("/");){var r,n=xC(null!==(r=bC.exec(t))&&void 0!==r?r:[],4),a=n[1],s=n[2],i=n[3],o=OC.parse(null!=a?a:""),l=OC.parse(null!=i?i:""),c="*"===s?o.multiply(l):o.divide(l);if(c.isNaN())return kC;t=t.replace(bC,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,u=xC(null!==(d=jC.exec(t))&&void 0!==d?d:[],4),h=u[1],m=u[2],p=u[3],f=OC.parse(null!=h?h:""),x=OC.parse(null!=p?p:""),y="+"===m?f.add(x):f.subtract(x);if(y.isNaN())return kC;t=t.replace(jC,y.toString())}return t}var AC=/\(([^()]*)\)/;function EC(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var r=xC(AC.exec(t),2)[1];t=t.replace(AC,CC(r))}return t}(t),t=CC(t)}function PC(e){var t=function(e){try{return EC(e)}catch(t){return kC}}(e.slice(5,-1));return t===kC?"":t}var TC=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],MC=["dx","dy","angle","className","breakAll"];function DC(){return DC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DC.apply(this,arguments)}function IC(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function RC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var FC=/[ \f\n\r\t\v\u2028\u2029]+/,BC=function(e){var t=e.children,r=e.breakAll,n=e.style;try{var a=[];return Fv(t)||(a=r?t.toString().split(""):t.toString().split(FC)),{wordsWithComputedWidth:a.map(function(e){return{word:e,width:pC(e,n).width}}),spaceWidth:r?0:pC(" ",n).width}}catch(s){return null}},qC=function(e){return[{words:Fv(e)?[]:e.toString().split(FC)}]},$C=function(e){var t=e.width,r=e.scaleToFit,n=e.children,a=e.style,s=e.breakAll,i=e.maxLines;if((t||r)&&!gO.isSsr){var o=BC({breakAll:s,children:n,style:a});return o?function(e,t,r,n,a){var s=e.maxLines,i=e.children,o=e.style,l=e.breakAll,c=xg(s),d=i,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var s=t.word,i=t.width,o=e[e.length-1];if(o&&(null==n||a||o.width+i+r<Number(n)))o.words.push(s),o.width+=i+r;else{var l={words:[s],width:i};e.push(l)}return e},[])},h=u(t);if(!c)return h;for(var m,p=function(e){var t=d.slice(0,e),r=BC({breakAll:l,style:o,children:t+"…"}).wordsWithComputedWidth,a=u(r),i=a.length>s||function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})}(a).width>Number(n);return[i,a]},f=0,x=d.length-1,y=0;f<=x&&y<=d.length-1;){var v=Math.floor((f+x)/2),g=RC(p(v-1),2),b=g[0],j=g[1],w=RC(p(v),1)[0];if(b||w||(f=v+1),b&&w&&(x=v-1),!b&&w){m=j;break}y++}return m||h}({breakAll:s,children:n,maxLines:i,style:a},o.wordsWithComputedWidth,o.spaceWidth,t,r):qC(n)}return qC(n)},zC="#808080",UC=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,a=void 0===n?0:n,s=e.lineHeight,i=void 0===s?"1em":s,o=e.capHeight,l=void 0===o?"0.71em":o,c=e.scaleToFit,d=void 0!==c&&c,u=e.textAnchor,h=void 0===u?"start":u,m=e.verticalAnchor,p=void 0===m?"end":m,f=e.fill,x=void 0===f?zC:f,y=IC(e,TC),v=Ct.useMemo(function(){return $C({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:d,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,d,y.style,y.width]),g=y.dx,b=y.dy,j=y.angle,w=y.className,N=y.breakAll,S=IC(y,MC);if(!yg(r)||!yg(a))return null;var _,k=r+(xg(g)?g:0),O=a+(xg(b)?b:0);switch(p){case"start":_=PC("calc(".concat(l,")"));break;case"middle":_=PC("calc(".concat((v.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:_=PC("calc(".concat(v.length-1," * -").concat(i,")"))}var C=[];if(d){var A=v[0].width,E=y.width;C.push("scale(".concat((xg(E)?E/A:1)/A,")"))}return j&&C.push("rotate(".concat(j,", ").concat(k,", ").concat(O,")")),C.length&&(S.transform=C.join(" ")),At.createElement("text",DC({},Kg(S,!0),{x:k,y:O,className:Vr("recharts-text",w),textAnchor:h,fill:x.includes("url")?zC:x}),v.map(function(e,t){var r=e.words.join(N?"":" ");return At.createElement("tspan",{x:k,dy:0===t?_:i,key:"".concat(r,"-").concat(t)},r)}))};function VC(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function WC(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function HC(e){let t,r,n;function a(e,n,a=0,s=e.length){if(a<s){if(0!==t(n,n))return s;do{const t=a+s>>>1;r(e[t],n)<0?a=t+1:s=t}while(a<s)}return a}return 2!==e.length?(t=VC,r=(t,r)=>VC(e(t),r),n=(t,r)=>e(t)-r):(t=e===VC||e===WC?e:KC,r=e,n=e),{left:a,center:function(e,t,r=0,s=e.length){const i=a(e,t,r,s-1);return i>r&&n(e[i-1],t)>-n(e[i],t)?i-1:i},right:function(e,n,a=0,s=e.length){if(a<s){if(0!==t(n,n))return s;do{const t=a+s>>>1;r(e[t],n)<=0?a=t+1:s=t}while(a<s)}return a}}}function KC(){return 0}function YC(e){return null===e?NaN:+e}const GC=HC(VC).right;HC(YC).center;const XC=GC;class QC extends Map{constructor(e,t=ZC){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(JC(this,e))}has(e){return super.has(JC(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){const n=t(r);e.has(n)&&(r=e.get(n),e.delete(n));return r}(this,e))}}function JC({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function ZC(e){return null!==e&&"object"==typeof e?e.valueOf():e}function eA(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const tA=Math.sqrt(50),rA=Math.sqrt(10),nA=Math.sqrt(2);function aA(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=tA?10:s>=rA?5:s>=nA?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/i,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*i,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?aA(e,t,2*r):[o,l,c]}function sA(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[a,s,i]=n?aA(t,e,r):aA(e,t,r);if(!(s>=a))return[];const o=s-a+1,l=new Array(o);if(n)if(i<0)for(let c=0;c<o;++c)l[c]=(s-c)/-i;else for(let c=0;c<o;++c)l[c]=(s-c)*i;else if(i<0)for(let c=0;c<o;++c)l[c]=(a+c)/-i;else for(let c=0;c<o;++c)l[c]=(a+c)*i;return l}function iA(e,t,r){return aA(e=+e,t=+t,r=+r)[2]}function oA(e,t,r){r=+r;const n=(t=+t)<(e=+e),a=n?iA(t,e,r):iA(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function lA(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r<a||void 0===r&&a>=a)&&(r=a)}return r}function cA(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r>a||void 0===r&&a>=a)&&(r=a)}return r}function dA(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=void 0===a?eA:function(e=VC){if(e===VC)return eA;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}(a);n>r;){if(n-r>600){const s=n-r+1,i=t-r+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(i-s/2<0?-1:1);dA(e,t,Math.max(r,Math.floor(t-i*l/s+c)),Math.min(n,Math.floor(t+(s-i)*l/s+c)),a)}const s=e[t];let i=r,o=n;for(uA(e,r,t),a(e[n],s)>0&&uA(e,r,n);i<o;){for(uA(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}0===a(e[r],s)?uA(e,r,o):(++o,uA(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function uA(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function hA(e,t,r=YC){if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e);return i+(+r(e[s+1],s+1,e)-i)*(a-s)}}function mA(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function pA(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const fA=Symbol("implicit");function xA(){var e=new QC,t=[],r=[],n=fA;function a(a){let s=e.get(a);if(void 0===s){if(n!==fA)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return a.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new QC;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return a},a.range=function(e){return arguments.length?(r=Array.from(e),a):r.slice()},a.unknown=function(e){return arguments.length?(n=e,a):n},a.copy=function(){return xA(t,r).unknown(n)},mA.apply(a,arguments),a}function yA(){var e,t,r=xA().unknown(void 0),n=r.domain,a=r.range,s=0,i=1,o=!1,l=0,c=0,d=.5;function u(){var r=n().length,u=i<s,h=u?i:s,m=u?s:i;e=(m-h)/Math.max(1,r-l+2*c),o&&(e=Math.floor(e)),h+=(m-h-e*(r-l))*d,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=0|Math.max(0,Math.ceil((t-e)/r)),s=new Array(a);++n<a;)s[n]=e+n*r;return s}(r).map(function(t){return h+e*t});return a(u?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),u()):n()},r.range=function(e){return arguments.length?([s,i]=e,s=+s,i=+i,u()):[s,i]},r.rangeRound=function(e){return[s,i]=e,s=+s,i=+i,o=!0,u()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(o=!!e,u()):o},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},r.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},r.copy=function(){return yA(n(),[s,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},mA.apply(u(),arguments)}function vA(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return vA(t())},e}function gA(){return vA(yA.apply(null,arguments).paddingInner(1))}function bA(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function jA(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function wA(){}var NA=.7,SA=1/NA,_A="\\s*([+-]?\\d+)\\s*",kA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",OA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CA=/^#([0-9a-f]{3,8})$/,AA=new RegExp(`^rgb\\(${_A},${_A},${_A}\\)$`),EA=new RegExp(`^rgb\\(${OA},${OA},${OA}\\)$`),PA=new RegExp(`^rgba\\(${_A},${_A},${_A},${kA}\\)$`),TA=new RegExp(`^rgba\\(${OA},${OA},${OA},${kA}\\)$`),MA=new RegExp(`^hsl\\(${kA},${OA},${OA}\\)$`),DA=new RegExp(`^hsla\\(${kA},${OA},${OA},${kA}\\)$`),IA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function RA(){return this.rgb().formatHex()}function LA(){return this.rgb().formatRgb()}function FA(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=CA.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?BA(t):3===r?new zA(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?qA(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?qA(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=AA.exec(e))?new zA(t[1],t[2],t[3],1):(t=EA.exec(e))?new zA(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=PA.exec(e))?qA(t[1],t[2],t[3],t[4]):(t=TA.exec(e))?qA(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=MA.exec(e))?YA(t[1],t[2]/100,t[3]/100,1):(t=DA.exec(e))?YA(t[1],t[2]/100,t[3]/100,t[4]):IA.hasOwnProperty(e)?BA(IA[e]):"transparent"===e?new zA(NaN,NaN,NaN,0):null}function BA(e){return new zA(e>>16&255,e>>8&255,255&e,1)}function qA(e,t,r,n){return n<=0&&(e=t=r=NaN),new zA(e,t,r,n)}function $A(e,t,r,n){return 1===arguments.length?((a=e)instanceof wA||(a=FA(a)),a?new zA((a=a.rgb()).r,a.g,a.b,a.opacity):new zA):new zA(e,t,r,null==n?1:n);var a}function zA(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function UA(){return`#${KA(this.r)}${KA(this.g)}${KA(this.b)}`}function VA(){const e=WA(this.opacity);return`${1===e?"rgb(":"rgba("}${HA(this.r)}, ${HA(this.g)}, ${HA(this.b)}${1===e?")":`, ${e})`}`}function WA(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function HA(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function KA(e){return((e=HA(e))<16?"0":"")+e.toString(16)}function YA(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new XA(e,t,r,n)}function GA(e){if(e instanceof XA)return new XA(e.h,e.s,e.l,e.opacity);if(e instanceof wA||(e=FA(e)),!e)return new XA;if(e instanceof XA)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,l=(s+a)/2;return o?(i=t===s?(r-n)/o+6*(r<n):r===s?(n-t)/o+2:(t-r)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new XA(i,o,l,e.opacity)}function XA(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function QA(e){return(e=(e||0)%360)<0?e+360:e}function JA(e){return Math.max(0,Math.min(1,e||0))}function ZA(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}bA(wA,FA,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:RA,formatHex:RA,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return GA(this).formatHsl()},formatRgb:LA,toString:LA}),bA(zA,$A,jA(wA,{brighter(e){return e=null==e?SA:Math.pow(SA,e),new zA(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?NA:Math.pow(NA,e),new zA(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zA(HA(this.r),HA(this.g),HA(this.b),WA(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:UA,formatHex:UA,formatHex8:function(){return`#${KA(this.r)}${KA(this.g)}${KA(this.b)}${KA(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:VA,toString:VA})),bA(XA,function(e,t,r,n){return 1===arguments.length?GA(e):new XA(e,t,r,null==n?1:n)},jA(wA,{brighter(e){return e=null==e?SA:Math.pow(SA,e),new XA(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?NA:Math.pow(NA,e),new XA(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new zA(ZA(e>=240?e-240:e+120,a,n),ZA(e,a,n),ZA(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new XA(QA(this.h),JA(this.s),JA(this.l),WA(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=WA(this.opacity);return`${1===e?"hsl(":"hsla("}${QA(this.h)}, ${100*JA(this.s)}%, ${100*JA(this.l)}%${1===e?")":`, ${e})`}`}}));const eE=e=>()=>e;function tE(e){return 1===(e=+e)?rE:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):eE(isNaN(t)?r:t)}}function rE(e,t){var r=t-e;return r?function(e,t){return function(r){return e+r*t}}(e,r):eE(isNaN(e)?t:e)}const nE=function e(t){var r=tE(t);function n(e,t){var n=r((e=$A(e)).r,(t=$A(t)).r),a=r(e.g,t.g),s=r(e.b,t.b),i=rE(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=s(t),e.opacity=i(t),e+""}}return n.gamma=e,n}(1);function aE(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,a=t.slice();return function(s){for(r=0;r<n;++r)a[r]=e[r]*(1-s)+t[r]*s;return a}}function sE(e,t){var r,n=t?t.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),i=new Array(n);for(r=0;r<a;++r)s[r]=hE(e[r],t[r]);for(;r<n;++r)i[r]=t[r];return function(e){for(r=0;r<a;++r)i[r]=s[r](e);return i}}function iE(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function oE(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function lE(e,t){var r,n={},a={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?n[r]=hE(e[r],t[r]):a[r]=t[r];return function(e){for(r in n)a[r]=n[r](e);return a}}var cE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dE=new RegExp(cE.source,"g");function uE(e,t){var r,n,a,s=cE.lastIndex=dE.lastIndex=0,i=-1,o=[],l=[];for(e+="",t+="";(r=cE.exec(e))&&(n=dE.exec(t));)(a=n.index)>s&&(a=t.slice(s,a),o[i]?o[i]+=a:o[++i]=a),(r=r[0])===(n=n[0])?o[i]?o[i]+=n:o[++i]=n:(o[++i]=null,l.push({i:i,x:oE(r,n)})),s=dE.lastIndex;return s<t.length&&(a=t.slice(s),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)o[(r=l[n]).i]=r.x(e);return o.join("")})}function hE(e,t){var r,n,a=typeof t;return null==t||"boolean"===a?eE(t):("number"===a?oE:"string"===a?(r=FA(t))?(t=r,nE):uE:t instanceof FA?nE:t instanceof Date?iE:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?sE:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?lE:oE:aE))(e,t)}function mE(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function pE(e){return+e}var fE=[0,1];function xE(e){return e}function yE(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function vE(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=yE(a,n),s=r(i,s)):(n=yE(n,a),s=r(s,i)),function(e){return s(n(e))}}function gE(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=yE(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(t){var r=XC(e,t,1,n)-1;return s[r](a[r](t))}}function bE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function jE(){var e,t,r,n,a,s,i=fE,o=fE,l=hE,c=xE;function d(){var e,t,r,l=Math.min(i.length,o.length);return c!==xE&&(e=i[0],t=i[l-1],e>t&&(r=e,e=t,t=r),c=function(r){return Math.max(e,Math.min(t,r))}),n=l>2?gE:vE,a=s=null,u}function u(t){return null==t||isNaN(t=+t)?r:(a||(a=n(i.map(e),o,l)))(e(c(t)))}return u.invert=function(r){return c(t((s||(s=n(o,i.map(e),oE)))(r)))},u.domain=function(e){return arguments.length?(i=Array.from(e,pE),d()):i.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=mE,d()},u.clamp=function(e){return arguments.length?(c=!!e||xE,d()):c!==xE},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(r=e,u):r},function(r,n){return e=r,t=n,d()}}function wE(){return jE()(xE,xE)}function NE(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function SE(e){return(e=NE(Math.abs(e)))?e[1]:NaN}var _E,kE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function OE(e){if(!(t=kE.exec(e)))throw new Error("invalid format: "+e);var t;return new CE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function CE(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function AE(e,t){var r=NE(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}OE.prototype=CE.prototype,CE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const EE={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>AE(100*e,t),r:AE,s:function(e,t){var r=NE(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(_E=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+NE(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function PE(e){return e}var TE,ME,DE,IE=Array.prototype.map,RE=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function LE(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?PE:(t=IE.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var a=e.length,s=[],i=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(e.substring(a-=o,a+o)),!((l+=o+1)>n));)o=t[i=(i+1)%t.length];return s.reverse().join(r)}),a=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?PE:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(IE.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=OE(e)).fill,r=e.align,u=e.sign,h=e.symbol,m=e.zero,p=e.width,f=e.comma,x=e.precision,y=e.trim,v=e.type;"n"===v?(f=!0,v="g"):EE[v]||(void 0===x&&(x=12),y=!0,v="g"),(m||"0"===t&&"="===r)&&(m=!0,t="0",r="=");var g="$"===h?a:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===h?s:/[%p]/.test(v)?l:"",j=EE[v],w=/[defgprs%]/.test(v);function N(e){var a,s,l,h=g,N=b;if("c"===v)N=j(e)+N,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:j(Math.abs(e),x),y&&(e=function(e){e:for(var t,r=e.length,n=1,a=-1;n<r;++n)switch(e[n]){case".":a=t=n;break;case"0":0===a&&(a=n),t=n;break;default:if(!+e[n])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==u&&(S=!1),h=(S?"("===u?u:c:"-"===u||"("===u?"":u)+h,N=("s"===v?RE[8+_E/3]:"")+N+(S&&"("===u?")":""),w)for(a=-1,s=e.length;++a<s;)if(48>(l=e.charCodeAt(a))||l>57){N=(46===l?i+e.slice(a+1):e.slice(a))+N,e=e.slice(0,a);break}}f&&!m&&(e=n(e,1/0));var _=h.length+e.length+N.length,k=_<p?new Array(p-_+1).join(t):"";switch(f&&m&&(e=n(k+e,k.length?p-N.length:1/0),k=""),r){case"<":e=h+e+N+k;break;case"=":e=h+k+e+N;break;case"^":e=k.slice(0,_=k.length>>1)+h+e+N+k.slice(_);break;default:e=k+h+e+N}return o(e)}return x=void 0===x?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var r=u(((e=OE(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(SE(t)/3))),a=Math.pow(10,-n),s=RE[8+n/3];return function(e){return r(a*e)+s}}}}function FE(e,t,r,n){var a,s=oA(e,t,r);switch((n=OE(null==n?",f":n)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(SE(t)/3)))-SE(Math.abs(e)))}(s,i))||(n.precision=a),DE(n,i);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,SE(t)-SE(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(e){return Math.max(0,-SE(Math.abs(e)))}(s))||(n.precision=a-2*("%"===n.type))}return ME(n)}function BE(e){var t=e.domain;return e.ticks=function(e){var r=t();return sA(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return FE(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,a,s=t(),i=0,o=s.length-1,l=s[i],c=s[o],d=10;for(c<l&&(a=l,l=c,c=a,a=i,i=o,o=a);d-- >0;){if((a=iA(l,c,r))===n)return s[i]=l,s[o]=c,t(s);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}n=a}return e},e}function qE(){var e=wE();return e.copy=function(){return bE(e,qE())},mA.apply(e,arguments),BE(e)}function $E(e,t){var r,n=0,a=(e=e.slice()).length-1,s=e[n],i=e[a];return i<s&&(r=n,n=a,a=r,r=s,s=i,i=r),e[n]=t.floor(s),e[a]=t.ceil(i),e}function zE(e){return Math.log(e)}function UE(e){return Math.exp(e)}function VE(e){return-Math.log(-e)}function WE(e){return-Math.exp(-e)}function HE(e){return isFinite(e)?+("1e"+e):e<0?0:e}function KE(e){return(t,r)=>-e(-t,r)}function YE(e){const t=e(zE,UE),r=t.domain;let n,a,s=10;function i(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),a=function(e){return 10===e?HE:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),r()[0]<0?(n=KE(n),a=KE(a),e(VE,WE)):e(zE,UE),t}return t.base=function(e){return arguments.length?(s=+e,i()):s},t.domain=function(e){return arguments.length?(r(e),i()):r()},t.ticks=e=>{const t=r();let i=t[0],o=t[t.length-1];const l=o<i;l&&([i,o]=[o,i]);let c,d,u=n(i),h=n(o);const m=null==e?10:+e;let p=[];if(!(s%1)&&h-u<m){if(u=Math.floor(u),h=Math.ceil(h),i>0){for(;u<=h;++u)for(c=1;c<s;++c)if(d=u<0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}}else for(;u<=h;++u)for(c=s-1;c>=1;--c)if(d=u>0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}2*p.length<m&&(p=sA(i,o,m))}else p=sA(u,h,Math.min(h-u,m)).map(a);return l?p.reverse():p},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===s?"s":","),"function"!=typeof r&&(s%1||null!=(r=OE(r)).precision||(r.trim=!0),r=ME(r)),e===1/0)return r;const i=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/a(Math.round(n(e)));return t*s<s-.5&&(t*=s),t<=i?r(e):""}},t.nice=()=>r($E(r(),{floor:e=>a(Math.floor(n(e))),ceil:e=>a(Math.ceil(n(e)))})),t}function GE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function XE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function QE(e){var t=1,r=e(GE(t),XE(t));return r.constant=function(r){return arguments.length?e(GE(t=+r),XE(t)):t},BE(r)}function JE(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ZE(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function eP(e){return e<0?-e*e:e*e}function tP(e){var t=e(xE,xE),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(xE,xE):.5===r?e(ZE,eP):e(JE(r),JE(1/r)):r},BE(t)}function rP(){var e=tP(jE());return e.copy=function(){return bE(e,rP()).exponent(e.exponent())},mA.apply(e,arguments),e}function nP(e){return Math.sign(e)*e*e}TE=LE({thousands:",",grouping:[3],currency:["$",""]}),ME=TE.format,DE=TE.formatPrefix;const aP=new Date,sP=new Date;function iP(e,t,r,n){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),a.round=e=>{const t=a(e),r=a.ceil(e);return e-t<r-e?t:r},a.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),a.range=(r,n,s)=>{const i=[];if(r=a.ceil(r),s=null==s?1:Math.floor(s),!(r<n&&s>0))return i;let o;do{i.push(o=new Date(+r)),t(r,s),e(r)}while(o<r&&r<n);return i},a.filter=r=>iP(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(a.count=(t,n)=>(aP.setTime(+t),sP.setTime(+n),e(aP),e(sP),Math.floor(r(aP,sP))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(n?t=>n(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const oP=iP(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);oP.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?iP(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):oP:null),oP.range;const lP=1e3,cP=6e4,dP=36e5,uP=864e5,hP=6048e5,mP=2592e6,pP=31536e6,fP=iP(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*lP)},(e,t)=>(t-e)/lP,e=>e.getUTCSeconds());fP.range;const xP=iP(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lP)},(e,t)=>{e.setTime(+e+t*cP)},(e,t)=>(t-e)/cP,e=>e.getMinutes());xP.range;const yP=iP(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*cP)},(e,t)=>(t-e)/cP,e=>e.getUTCMinutes());yP.range;const vP=iP(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lP-e.getMinutes()*cP)},(e,t)=>{e.setTime(+e+t*dP)},(e,t)=>(t-e)/dP,e=>e.getHours());vP.range;const gP=iP(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*dP)},(e,t)=>(t-e)/dP,e=>e.getUTCHours());gP.range;const bP=iP(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*cP)/uP,e=>e.getDate()-1);bP.range;const jP=iP(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uP,e=>e.getUTCDate()-1);jP.range;const wP=iP(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uP,e=>Math.floor(e/uP));function NP(e){return iP(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*cP)/hP)}wP.range;const SP=NP(0),_P=NP(1),kP=NP(2),OP=NP(3),CP=NP(4),AP=NP(5),EP=NP(6);function PP(e){return iP(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/hP)}SP.range,_P.range,kP.range,OP.range,CP.range,AP.range,EP.range;const TP=PP(0),MP=PP(1),DP=PP(2),IP=PP(3),RP=PP(4),LP=PP(5),FP=PP(6);TP.range,MP.range,DP.range,IP.range,RP.range,LP.range,FP.range;const BP=iP(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());BP.range;const qP=iP(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth());qP.range;const $P=iP(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());$P.every=e=>isFinite(e=Math.floor(e))&&e>0?iP(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,$P.range;const zP=iP(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function UP(e,t,r,n,a,s){const i=[[fP,1,lP],[fP,5,5e3],[fP,15,15e3],[fP,30,3e4],[s,1,cP],[s,5,3e5],[s,15,9e5],[s,30,18e5],[a,1,dP],[a,3,108e5],[a,6,216e5],[a,12,432e5],[n,1,uP],[n,2,1728e5],[r,1,hP],[t,1,mP],[t,3,7776e6],[e,1,pP]];function o(t,r,n){const a=Math.abs(r-t)/n,s=HC(([,,e])=>e).right(i,a);if(s===i.length)return e.every(oA(t/pP,r/pP,n));if(0===s)return oP.every(Math.max(oA(t,r,n),1));const[o,l]=i[a/i[s-1][2]<i[s][2]/a?s-1:s];return o.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const a=r&&"function"==typeof r.range?r:o(e,t,r),s=a?a.range(e,+t+1):[];return n?s.reverse():s},o]}zP.every=e=>isFinite(e=Math.floor(e))&&e>0?iP(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,zP.range;const[VP,WP]=UP(zP,qP,TP,wP,gP,yP),[HP,KP]=UP($P,BP,SP,bP,vP,xP);function YP(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function GP(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function XP(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var QP,JP,ZP,eT={"-":"",_:" ",0:"0"},tT=/^\s*\d+/,rT=/^%/,nT=/[\\^$*+?|[\]().{}]/g;function aT(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function sT(e){return e.replace(nT,"\\$&")}function iT(e){return new RegExp("^(?:"+e.map(sT).join("|")+")","i")}function oT(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function lT(e,t,r){var n=tT.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function cT(e,t,r){var n=tT.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function dT(e,t,r){var n=tT.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function uT(e,t,r){var n=tT.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function hT(e,t,r){var n=tT.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function mT(e,t,r){var n=tT.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function pT(e,t,r){var n=tT.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function fT(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function xT(e,t,r){var n=tT.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function yT(e,t,r){var n=tT.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function vT(e,t,r){var n=tT.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function gT(e,t,r){var n=tT.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function bT(e,t,r){var n=tT.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function jT(e,t,r){var n=tT.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function wT(e,t,r){var n=tT.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function NT(e,t,r){var n=tT.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function ST(e,t,r){var n=tT.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function _T(e,t,r){var n=rT.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function kT(e,t,r){var n=tT.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function OT(e,t,r){var n=tT.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function CT(e,t){return aT(e.getDate(),t,2)}function AT(e,t){return aT(e.getHours(),t,2)}function ET(e,t){return aT(e.getHours()%12||12,t,2)}function PT(e,t){return aT(1+bP.count($P(e),e),t,3)}function TT(e,t){return aT(e.getMilliseconds(),t,3)}function MT(e,t){return TT(e,t)+"000"}function DT(e,t){return aT(e.getMonth()+1,t,2)}function IT(e,t){return aT(e.getMinutes(),t,2)}function RT(e,t){return aT(e.getSeconds(),t,2)}function LT(e){var t=e.getDay();return 0===t?7:t}function FT(e,t){return aT(SP.count($P(e)-1,e),t,2)}function BT(e){var t=e.getDay();return t>=4||0===t?CP(e):CP.ceil(e)}function qT(e,t){return e=BT(e),aT(CP.count($P(e),e)+(4===$P(e).getDay()),t,2)}function $T(e){return e.getDay()}function zT(e,t){return aT(_P.count($P(e)-1,e),t,2)}function UT(e,t){return aT(e.getFullYear()%100,t,2)}function VT(e,t){return aT((e=BT(e)).getFullYear()%100,t,2)}function WT(e,t){return aT(e.getFullYear()%1e4,t,4)}function HT(e,t){var r=e.getDay();return aT((e=r>=4||0===r?CP(e):CP.ceil(e)).getFullYear()%1e4,t,4)}function KT(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+aT(t/60|0,"0",2)+aT(t%60,"0",2)}function YT(e,t){return aT(e.getUTCDate(),t,2)}function GT(e,t){return aT(e.getUTCHours(),t,2)}function XT(e,t){return aT(e.getUTCHours()%12||12,t,2)}function QT(e,t){return aT(1+jP.count(zP(e),e),t,3)}function JT(e,t){return aT(e.getUTCMilliseconds(),t,3)}function ZT(e,t){return JT(e,t)+"000"}function eM(e,t){return aT(e.getUTCMonth()+1,t,2)}function tM(e,t){return aT(e.getUTCMinutes(),t,2)}function rM(e,t){return aT(e.getUTCSeconds(),t,2)}function nM(e){var t=e.getUTCDay();return 0===t?7:t}function aM(e,t){return aT(TP.count(zP(e)-1,e),t,2)}function sM(e){var t=e.getUTCDay();return t>=4||0===t?RP(e):RP.ceil(e)}function iM(e,t){return e=sM(e),aT(RP.count(zP(e),e)+(4===zP(e).getUTCDay()),t,2)}function oM(e){return e.getUTCDay()}function lM(e,t){return aT(MP.count(zP(e)-1,e),t,2)}function cM(e,t){return aT(e.getUTCFullYear()%100,t,2)}function dM(e,t){return aT((e=sM(e)).getUTCFullYear()%100,t,2)}function uM(e,t){return aT(e.getUTCFullYear()%1e4,t,4)}function hM(e,t){var r=e.getUTCDay();return aT((e=r>=4||0===r?RP(e):RP.ceil(e)).getUTCFullYear()%1e4,t,4)}function mM(){return"+0000"}function pM(){return"%"}function fM(e){return+e}function xM(e){return Math.floor(+e/1e3)}function yM(e){return new Date(e)}function vM(e){return e instanceof Date?+e:+new Date(+e)}function gM(e,t,r,n,a,s,i,o,l,c){var d=wE(),u=d.invert,h=d.domain,m=c(".%L"),p=c(":%S"),f=c("%I:%M"),x=c("%I %p"),y=c("%a %d"),v=c("%b %d"),g=c("%B"),b=c("%Y");function j(e){return(l(e)<e?m:o(e)<e?p:i(e)<e?f:s(e)<e?x:n(e)<e?a(e)<e?y:v:r(e)<e?g:b)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?h(Array.from(e,vM)):h().map(yM)},d.ticks=function(t){var r=h();return e(r[0],r[r.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?j:c(t)},d.nice=function(e){var r=h();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?h($E(r,e)):d},d.copy=function(){return bE(d,gM(e,t,r,n,a,s,i,o,l,c))},d}function bM(){var e,t,r,n,a,s=0,i=1,o=xE,l=!1;function c(t){return null==t||isNaN(t=+t)?a:o(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var r,n;return arguments.length?([r,n]=t,o=e(r,n),c):[o(0),o(1)]}}return c.domain=function(a){return arguments.length?([s,i]=a,e=n(s=+s),t=n(i=+i),r=e===t?0:1/(t-e),c):[s,i]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(hE),c.rangeRound=d(mE),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return n=a,e=a(s),t=a(i),r=e===t?0:1/(t-e),c}}function jM(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function wM(){var e=tP(bM());return e.copy=function(){return jM(e,wM()).exponent(e.exponent())},pA.apply(e,arguments)}function NM(){var e,t,r,n,a,s,i,o=0,l=.5,c=1,d=1,u=xE,h=!1;function m(e){return isNaN(e=+e)?i:(e=.5+((e=+s(e))-t)*(d*e<d*t?n:a),u(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var r,n,a;return arguments.length?([r,n,a]=t,u=function(e,t){void 0===t&&(t=e,e=hE);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return s[t](e-t)}}(e,[r,n,a]),m):[u(0),u(.5),u(1)]}}return m.domain=function(i){return arguments.length?([o,l,c]=i,e=s(o=+o),t=s(l=+l),r=s(c=+c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,m):[o,l,c]},m.clamp=function(e){return arguments.length?(h=!!e,m):h},m.interpolator=function(e){return arguments.length?(u=e,m):u},m.range=p(hE),m.rangeRound=p(mE),m.unknown=function(e){return arguments.length?(i=e,m):i},function(i){return s=i,e=i(o),t=i(l),r=i(c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,m}}function SM(){var e=tP(NM());return e.copy=function(){return jM(e,SM()).exponent(e.exponent())},pA.apply(e,arguments)}!function(e){QP=function(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,c=iT(a),d=oT(a),u=iT(s),h=oT(s),m=iT(i),p=oT(i),f=iT(o),x=oT(o),y=iT(l),v=oT(l),g={a:function(e){return i[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:CT,e:CT,f:MT,g:VT,G:HT,H:AT,I:ET,j:PT,L:TT,m:DT,M:IT,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:fM,s:xM,S:RT,u:LT,U:FT,V:qT,w:$T,W:zT,x:null,X:null,y:UT,Y:WT,Z:KT,"%":pM},b={a:function(e){return i[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:YT,e:YT,f:ZT,g:dM,G:hM,H:GT,I:XT,j:QT,L:JT,m:eM,M:tM,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:fM,s:xM,S:rM,u:nM,U:aM,V:iM,w:oM,W:lM,x:null,X:null,y:cM,Y:uM,Z:mM,"%":pM},j={a:function(e,t,r){var n=m.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=y.exec(t.slice(r));return n?(e.m=v.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.m=x.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return S(e,t,r,n)},d:vT,e:vT,f:ST,g:pT,G:mT,H:bT,I:bT,j:gT,L:NT,m:yT,M:jT,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=d.get(n[0].toLowerCase()),r+n[0].length):-1},q:xT,Q:kT,s:OT,S:wT,u:cT,U:dT,V:uT,w:lT,W:hT,x:function(e,t,n){return S(e,r,t,n)},X:function(e,t,r){return S(e,n,t,r)},y:pT,Y:mT,Z:fT,"%":_T};function w(e,t){return function(r){var n,a,s,i=[],o=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++o<c;)37===e.charCodeAt(o)&&(i.push(e.slice(l,o)),null!=(a=eT[n=e.charAt(++o)])?n=e.charAt(++o):a="e"===n?" ":"0",(s=t[n])&&(n=s(r,a)),i.push(n),l=o+1);return i.push(e.slice(l,o)),i.join("")}}function N(e,t){return function(r){var n,a,s=XP(1900,void 0,1);if(S(s,e,r+="",0)!=r.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(a=(n=GP(XP(s.y,0,1))).getUTCDay(),n=a>4||0===a?MP.ceil(n):MP(n),n=jP.offset(n,7*(s.V-1)),s.y=n.getUTCFullYear(),s.m=n.getUTCMonth(),s.d=n.getUTCDate()+(s.w+6)%7):(a=(n=YP(XP(s.y,0,1))).getDay(),n=a>4||0===a?_P.ceil(n):_P(n),n=bP.offset(n,7*(s.V-1)),s.y=n.getFullYear(),s.m=n.getMonth(),s.d=n.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),a="Z"in s?GP(XP(s.y,0,1)).getUTCDay():YP(XP(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(a+5)%7:s.w+7*s.U-(a+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,GP(s)):YP(s)}}function S(e,t,r,n){for(var a,s,i=0,o=t.length,l=r.length;i<o;){if(n>=l)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(s=j[a in eT?t.charAt(i++):a])||(n=s(e,r,n))<0)return-1}else if(a!=r.charCodeAt(n++))return-1}return n}return g.x=w(r,g),g.X=w(n,g),g.c=w(t,g),b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),{format:function(e){var t=w(e+="",g);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),JP=QP.format,QP.parse,ZP=QP.utcFormat,QP.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const _M=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:yA,scaleDiverging:function e(){var t=BE(NM()(xE));return t.copy=function(){return jM(t,e())},pA.apply(t,arguments)},scaleDivergingLog:function e(){var t=YE(NM()).domain([.1,1,10]);return t.copy=function(){return jM(t,e()).base(t.base())},pA.apply(t,arguments)},scaleDivergingPow:SM,scaleDivergingSqrt:function(){return SM.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=QE(NM());return t.copy=function(){return jM(t,e()).constant(t.constant())},pA.apply(t,arguments)},scaleIdentity:function e(t){var r;function n(e){return null==e||isNaN(e=+e)?r:e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,pE),n):t.slice()},n.unknown=function(e){return arguments.length?(r=e,n):r},n.copy=function(){return e(t).unknown(r)},t=arguments.length?Array.from(t,pE):[0,1],BE(n)},scaleImplicit:fA,scaleLinear:qE,scaleLog:function e(){const t=YE(jE()).domain([1,10]);return t.copy=()=>bE(t,e()).base(t.base()),mA.apply(t,arguments),t},scaleOrdinal:xA,scalePoint:gA,scalePow:rP,scaleQuantile:function e(){var t,r=[],n=[],a=[];function s(){var e=0,t=Math.max(1,n.length);for(a=new Array(t-1);++e<t;)a[e-1]=hA(r,e/t);return i}function i(e){return null==e||isNaN(e=+e)?t:n[XC(a,e)]}return i.invertExtent=function(e){var t=n.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:r[0],t<a.length?a[t]:r[r.length-1]]},i.domain=function(e){if(!arguments.length)return r.slice();r=[];for(let t of e)null==t||isNaN(t=+t)||r.push(t);return r.sort(VC),s()},i.range=function(e){return arguments.length?(n=Array.from(e),s()):n.slice()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.quantiles=function(){return a.slice()},i.copy=function(){return e().domain(r).range(n).unknown(t)},mA.apply(i,arguments)},scaleQuantize:function e(){var t,r=0,n=1,a=1,s=[.5],i=[0,1];function o(e){return null!=e&&e<=e?i[XC(s,e,0,a)]:t}function l(){var e=-1;for(s=new Array(a);++e<a;)s[e]=((e+1)*n-(e-a)*r)/(a+1);return o}return o.domain=function(e){return arguments.length?([r,n]=e,r=+r,n=+n,l()):[r,n]},o.range=function(e){return arguments.length?(a=(i=Array.from(e)).length-1,l()):i.slice()},o.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,s[0]]:t>=a?[s[a-1],n]:[s[t-1],s[t]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return s.slice()},o.copy=function(){return e().domain([r,n]).range(i).unknown(t)},mA.apply(BE(o),arguments)},scaleRadial:function e(){var t,r=wE(),n=[0,1],a=!1;function s(e){var n=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(r(e));return isNaN(n)?t:a?Math.round(n):n}return s.invert=function(e){return r.invert(nP(e))},s.domain=function(e){return arguments.length?(r.domain(e),s):r.domain()},s.range=function(e){return arguments.length?(r.range((n=Array.from(e,pE)).map(nP)),s):n.slice()},s.rangeRound=function(e){return s.range(e).round(!0)},s.round=function(e){return arguments.length?(a=!!e,s):a},s.clamp=function(e){return arguments.length?(r.clamp(e),s):r.clamp()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e(r.domain(),n).round(a).clamp(r.clamp()).unknown(t)},mA.apply(s,arguments),BE(s)},scaleSequential:function e(){var t=BE(bM()(xE));return t.copy=function(){return jM(t,e())},pA.apply(t,arguments)},scaleSequentialLog:function e(){var t=YE(bM()).domain([1,10]);return t.copy=function(){return jM(t,e()).base(t.base())},pA.apply(t,arguments)},scaleSequentialPow:wM,scaleSequentialQuantile:function e(){var t=[],r=xE;function n(e){if(null!=e&&!isNaN(e=+e))return r((XC(t,e,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(VC),n},n.interpolator=function(e){return arguments.length?(r=e,n):r},n.range=function(){return t.map((e,n)=>r(n/(t.length-1)))},n.quantiles=function(e){return Array.from({length:e+1},(r,n)=>function(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return cA(e);if(t>=1)return lA(e);var n,a=(n-1)*t,s=Math.floor(a),i=lA(dA(e,s).subarray(0,s+1));return i+(cA(e.subarray(s+1))-i)*(a-s)}}(t,n/e))},n.copy=function(){return e(r).domain(t)},pA.apply(n,arguments)},scaleSequentialSqrt:function(){return wM.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=QE(bM());return t.copy=function(){return jM(t,e()).constant(t.constant())},pA.apply(t,arguments)},scaleSqrt:function(){return rP.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=QE(jE());return t.copy=function(){return bE(t,e()).constant(t.constant())},mA.apply(t,arguments)},scaleThreshold:function e(){var t,r=[.5],n=[0,1],a=1;function s(e){return null!=e&&e<=e?n[XC(r,e,0,a)]:t}return s.domain=function(e){return arguments.length?(r=Array.from(e),a=Math.min(r.length,n.length-1),s):r.slice()},s.range=function(e){return arguments.length?(n=Array.from(e),a=Math.min(r.length,n.length-1),s):n.slice()},s.invertExtent=function(e){var t=n.indexOf(e);return[r[t-1],r[t]]},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e().domain(r).range(n).unknown(t)},mA.apply(s,arguments)},scaleTime:function(){return mA.apply(gM(HP,KP,$P,BP,SP,bP,vP,xP,fP,JP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return mA.apply(gM(VP,WP,zP,qP,TP,jP,gP,yP,fP,ZP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:FE},Symbol.toStringTag,{value:"Module"}));var kM=Dx;var OM=function(e,t,r){for(var n=-1,a=e.length;++n<a;){var s=e[n],i=t(s);if(null!=i&&(void 0===o?i==i&&!kM(i):r(i,o)))var o=i,l=s}return l};var CM=function(e,t){return e>t},AM=OM,EM=CM,PM=s_;const TM=Tt(function(e){return e&&e.length?AM(e,PM,EM):void 0});var MM=function(e,t){return e<t},DM=OM,IM=MM,RM=s_;const LM=Tt(function(e){return e&&e.length?DM(e,RM,IM):void 0});var FM=xv,BM=x_,qM=dk,$M=px;var zM=rk,UM=function(e,t){return($M(e)?FM:qM)(e,BM(t))};const VM=Tt(function(e,t){return zM(UM(e,t),1)});var WM=MS;const HM=Tt(function(e,t){return WM(e,t)});var KM,YM=1e9,GM=!0,XM="[DecimalError] ",QM=XM+"Invalid argument: ",JM=XM+"Exponent out of range: ",ZM=Math.floor,eD=Math.pow,tD=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,rD=1e7,nD=9007199254740991,aD=ZM(1286742750677284.5),sD={};function iD(e,t){var r,n,a,s,i,o,l,c,d=e.constructor,u=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),GM?xD(t,u):t;if(l=e.d,c=t.d,i=e.e,a=t.e,l=l.slice(),s=i-a){for(s<0?(n=l,s=-s,o=c.length):(n=c,a=i,o=l.length),s>(o=(i=Math.ceil(u/7))>o?i+1:o+1)&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for((o=l.length)-(s=c.length)<0&&(s=o,n=c,c=l,l=n),r=0;s;)r=(l[--s]=l[s]+c[s]+r)/rD|0,l[s]%=rD;for(r&&(l.unshift(r),++a),o=l.length;0==l[--o];)l.pop();return t.d=l,t.e=a,GM?xD(t,u):t}function oD(e,t,r){if(e!==~~e||e<t||e>r)throw Error(QM+e)}function lD(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)(r=7-(n=e[t]+"").length)&&(s+=mD(r)),s+=n;(r=7-(n=(i=e[t])+"").length)&&(s+=mD(r))}else if(0===i)return"0";for(;i%10==0;)i/=10;return s+i}sD.absoluteValue=sD.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},sD.comparedTo=sD.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,r=(n=s.d.length)<(a=e.d.length)?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1},sD.decimalPlaces=sD.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},sD.dividedBy=sD.div=function(e){return cD(this,new this.constructor(e))},sD.dividedToIntegerBy=sD.idiv=function(e){var t=this.constructor;return xD(cD(this,new t(e),0,1),t.precision)},sD.equals=sD.eq=function(e){return!this.cmp(e)},sD.exponent=function(){return uD(this)},sD.greaterThan=sD.gt=function(e){return this.cmp(e)>0},sD.greaterThanOrEqualTo=sD.gte=function(e){return this.cmp(e)>=0},sD.isInteger=sD.isint=function(){return this.e>this.d.length-2},sD.isNegative=sD.isneg=function(){return this.s<0},sD.isPositive=sD.ispos=function(){return this.s>0},sD.isZero=function(){return 0===this.s},sD.lessThan=sD.lt=function(e){return this.cmp(e)<0},sD.lessThanOrEqualTo=sD.lte=function(e){return this.cmp(e)<1},sD.logarithm=sD.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(KM))throw Error(XM+"NaN");if(r.s<1)throw Error(XM+(r.s?"NaN":"-Infinity"));return r.eq(KM)?new n(0):(GM=!1,t=cD(pD(r,s),pD(e,s),s),GM=!0,xD(t,a))},sD.minus=sD.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?yD(t,e):iD(t,(e.s=-e.s,e))},sD.modulo=sD.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(!(e=new n(e)).s)throw Error(XM+"NaN");return r.s?(GM=!1,t=cD(r,e,0,1).times(e),GM=!0,r.minus(t)):xD(new n(r),a)},sD.naturalExponential=sD.exp=function(){return dD(this)},sD.naturalLogarithm=sD.ln=function(){return pD(this)},sD.negated=sD.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},sD.plus=sD.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?iD(t,e):yD(t,(e.s=-e.s,e))},sD.precision=sD.sd=function(e){var t,r,n,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(QM+e);if(t=uD(a)+1,r=7*(n=a.d.length-1)+1,n=a.d[n]){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},sD.squareRoot=sD.sqrt=function(){var e,t,r,n,a,s,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(XM+"NaN")}for(e=uD(o),GM=!1,0==(a=Math.sqrt(+o))||a==1/0?(((t=lD(o.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=ZM((e+1)/2)-(e<0||e%2),n=new l(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new l(a.toString()),a=i=(r=l.precision)+3;;)if(n=(s=n).plus(cD(o,s,i+2)).times(.5),lD(s.d).slice(0,i)===(t=lD(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&"4999"==t){if(xD(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if("9999"!=t)break;i+=4}return GM=!0,xD(n,r)},sD.times=sD.mul=function(e){var t,r,n,a,s,i,o,l,c,d=this,u=d.constructor,h=d.d,m=(e=new u(e)).d;if(!d.s||!e.s)return new u(0);for(e.s*=d.s,r=d.e+e.e,(l=h.length)<(c=m.length)&&(s=h,h=m,m=s,i=l,l=c,c=i),s=[],n=i=l+c;n--;)s.push(0);for(n=c;--n>=0;){for(t=0,a=l+n;a>n;)o=s[a]+m[n]*h[a-n-1]+t,s[a--]=o%rD|0,t=o/rD|0;s[a]=(s[a]+t)%rD|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,GM?xD(e,u.precision):e},sD.toDecimalPlaces=sD.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(oD(e,0,YM),void 0===t?t=n.rounding:oD(t,0,8),xD(r,e+uD(r)+1,t))},sD.toExponential=function(e,t){var r,n=this,a=n.constructor;return void 0===e?r=vD(n,!0):(oD(e,0,YM),void 0===t?t=a.rounding:oD(t,0,8),r=vD(n=xD(new a(n),e+1,t),!0,e+1)),r},sD.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return void 0===e?vD(a):(oD(e,0,YM),void 0===t?t=s.rounding:oD(t,0,8),r=vD((n=xD(new s(a),e+uD(a)+1,t)).abs(),!1,e+uD(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)},sD.toInteger=sD.toint=function(){var e=this,t=e.constructor;return xD(new t(e),uD(e)+1,t.rounding)},sD.toNumber=function(){return+this},sD.toPower=sD.pow=function(e){var t,r,n,a,s,i,o=this,l=o.constructor,c=+(e=new l(e));if(!e.s)return new l(KM);if(!(o=new l(o)).s){if(e.s<1)throw Error(XM+"Infinity");return o}if(o.eq(KM))return o;if(n=l.precision,e.eq(KM))return xD(o,n);if(i=(t=e.e)>=(r=e.d.length-1),s=o.s,i){if((r=c<0?-c:c)<=nD){for(a=new l(KM),t=Math.ceil(n/7+4),GM=!1;r%2&&gD((a=a.times(o)).d,t),0!==(r=ZM(r/2));)gD((o=o.times(o)).d,t);return GM=!0,e.s<0?new l(KM).div(a):xD(a,n)}}else if(s<0)throw Error(XM+"NaN");return s=s<0&&1&e.d[Math.max(t,r)]?-1:1,o.s=1,GM=!1,a=e.times(pD(o,n+12)),GM=!0,(a=dD(a)).s=s,a},sD.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return void 0===e?n=vD(a,(r=uD(a))<=s.toExpNeg||r>=s.toExpPos):(oD(e,1,YM),void 0===t?t=s.rounding:oD(t,0,8),n=vD(a=xD(new s(a),e,t),e<=(r=uD(a))||r<=s.toExpNeg,e)),n},sD.toSignificantDigits=sD.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(oD(e,1,YM),void 0===t?t=r.rounding:oD(t,0,8)),xD(new r(this),e,t)},sD.toString=sD.valueOf=sD.val=sD.toJSON=sD[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=uD(e),r=e.constructor;return vD(e,t<=r.toExpNeg||t>=r.toExpPos)};var cD=function(){function e(e,t){var r,n=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+n,e[a]=r%rD|0,n=r/rD|0;return n&&e.unshift(n),e}function t(e,t,r,n){var a,s;if(r!=n)s=r>n?1:-1;else for(a=s=0;a<r;a++)if(e[a]!=t[a]){s=e[a]>t[a]?1:-1;break}return s}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*rD+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,a,s,i){var o,l,c,d,u,h,m,p,f,x,y,v,g,b,j,w,N,S,_=n.constructor,k=n.s==a.s?1:-1,O=n.d,C=a.d;if(!n.s)return new _(n);if(!a.s)throw Error(XM+"Division by zero");for(l=n.e-a.e,N=C.length,j=O.length,p=(m=new _(k)).d=[],c=0;C[c]==(O[c]||0);)++c;if(C[c]>(O[c]||0)&&--l,(v=null==s?s=_.precision:i?s+(uD(n)-uD(a))+1:s)<0)return new _(0);if(v=v/7+2|0,c=0,1==N)for(d=0,C=C[0],v++;(c<j||d)&&v--;c++)g=d*rD+(O[c]||0),p[c]=g/C|0,d=g%C|0;else{for((d=rD/(C[0]+1)|0)>1&&(C=e(C,d),O=e(O,d),N=C.length,j=O.length),b=N,x=(f=O.slice(0,N)).length;x<N;)f[x++]=0;(S=C.slice()).unshift(0),w=C[0],C[1]>=rD/2&&++w;do{d=0,(o=t(C,f,N,x))<0?(y=f[0],N!=x&&(y=y*rD+(f[1]||0)),(d=y/w|0)>1?(d>=rD&&(d=rD-1),1==(o=t(u=e(C,d),f,h=u.length,x=f.length))&&(d--,r(u,N<h?S:C,h))):(0==d&&(o=d=1),u=C.slice()),(h=u.length)<x&&u.unshift(0),r(f,u,x),-1==o&&(o=t(C,f,N,x=f.length))<1&&(d++,r(f,N<x?S:C,x)),x=f.length):0===o&&(d++,f=[0]),p[c++]=d,o&&f[0]?f[x++]=O[b]||0:(f=[O[b]],x=1)}while((b++<j||void 0!==f[0])&&v--)}return p[0]||p.shift(),m.e=l,xD(m,i?s+uD(m)+1:s)}}();function dD(e,t){var r,n,a,s,i,o=0,l=0,c=e.constructor,d=c.precision;if(uD(e)>16)throw Error(JM+uD(e));if(!e.s)return new c(KM);for(null==t?(GM=!1,i=d):i=t,s=new c(.03125);e.abs().gte(.1);)e=e.times(s),l+=5;for(i+=Math.log(eD(2,l))/Math.LN10*2+5|0,r=n=a=new c(KM),c.precision=i;;){if(n=xD(n.times(e),i),r=r.times(++o),lD((s=a.plus(cD(n,r,i))).d).slice(0,i)===lD(a.d).slice(0,i)){for(;l--;)a=xD(a.times(a),i);return c.precision=d,null==t?(GM=!0,xD(a,d)):a}a=s}}function uD(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function hD(e,t,r){if(t>e.LN10.sd())throw GM=!0,r&&(e.precision=r),Error(XM+"LN10 precision limit exceeded");return xD(new e(e.LN10),t)}function mD(e){for(var t="";e--;)t+="0";return t}function pD(e,t){var r,n,a,s,i,o,l,c,d,u=1,h=e,m=h.d,p=h.constructor,f=p.precision;if(h.s<1)throw Error(XM+(h.s?"NaN":"-Infinity"));if(h.eq(KM))return new p(0);if(null==t?(GM=!1,c=f):c=t,h.eq(10))return null==t&&(GM=!0),hD(p,c);if(c+=10,p.precision=c,n=(r=lD(m)).charAt(0),s=uD(h),!(Math.abs(s)<15e14))return l=hD(p,c+2,f).times(s+""),h=pD(new p(n+"."+r.slice(1)),c-10).plus(l),p.precision=f,null==t?(GM=!0,xD(h,f)):h;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=lD((h=h.times(e)).d)).charAt(0),u++;for(s=uD(h),n>1?(h=new p("0."+r),s++):h=new p(n+"."+r.slice(1)),o=i=h=cD(h.minus(KM),h.plus(KM),c),d=xD(h.times(h),c),a=3;;){if(i=xD(i.times(d),c),lD((l=o.plus(cD(i,new p(a),c))).d).slice(0,c)===lD(o.d).slice(0,c))return o=o.times(2),0!==s&&(o=o.plus(hD(p,c+2,f).times(s+""))),o=cD(o,new p(u),c),p.precision=f,null==t?(GM=!0,xD(o,f)):o;o=l,a+=2}}function fD(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(n,a)){if(a-=n,r=r-n-1,e.e=ZM(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=7;n<a;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),GM&&(e.e>aD||e.e<-aD))throw Error(JM+r)}else e.s=0,e.e=0,e.d=[0];return e}function xD(e,t,r){var n,a,s,i,o,l,c,d,u=e.d;for(i=1,s=u[0];s>=10;s/=10)i++;if((n=t-i)<0)n+=7,a=t,c=u[d=0];else{if((d=Math.ceil((n+1)/7))>=(s=u.length))return e;for(c=s=u[d],i=1;s>=10;s/=10)i++;a=(n%=7)-7+i}if(void 0!==r&&(o=c/(s=eD(10,i-a-1))%10|0,l=t<0||void 0!==u[d+1]||c%s,l=r<4?(o||l)&&(0==r||r==(e.s<0?3:2)):o>5||5==o&&(4==r||l||6==r&&(n>0?a>0?c/eD(10,i-a):0:u[d-1])%10&1||r==(e.s<0?8:7))),t<1||!u[0])return l?(s=uD(e),u.length=1,t=t-s-1,u[0]=eD(10,(7-t%7)%7),e.e=ZM(-t/7)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(0==n?(u.length=d,s=1,d--):(u.length=d+1,s=eD(10,7-n),u[d]=a>0?(c/eD(10,i-a)%eD(10,a)|0)*s:0),l)for(;;){if(0==d){(u[0]+=s)==rD&&(u[0]=1,++e.e);break}if(u[d]+=s,u[d]!=rD)break;u[d--]=0,s=1}for(n=u.length;0===u[--n];)u.pop();if(GM&&(e.e>aD||e.e<-aD))throw Error(JM+uD(e));return e}function yD(e,t){var r,n,a,s,i,o,l,c,d,u,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),GM?xD(t,m):t;if(l=e.d,u=t.d,n=t.e,c=e.e,l=l.slice(),i=c-n){for((d=i<0)?(r=l,i=-i,o=u.length):(r=u,n=c,o=l.length),i>(a=Math.max(Math.ceil(m/7),o)+2)&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for((d=(a=l.length)<(o=u.length))&&(o=a),a=0;a<o;a++)if(l[a]!=u[a]){d=l[a]<u[a];break}i=0}for(d&&(r=l,l=u,u=r,t.s=-t.s),o=l.length,a=u.length-o;a>0;--a)l[o++]=0;for(a=u.length;a>i;){if(l[--a]<u[a]){for(s=a;s&&0===l[--s];)l[s]=rD-1;--l[s],l[a]+=rD}l[a]-=u[a]}for(;0===l[--o];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(t.d=l,t.e=n,GM?xD(t,m):t):new h(0)}function vD(e,t,r){var n,a=uD(e),s=lD(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+mD(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+mD(-a-1)+s,r&&(n=r-i)>0&&(s+=mD(n))):a>=i?(s+=mD(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+mD(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=mD(n))),e.s<0?"-"+s:s}function gD(e,t){if(e.length>t)return e.length=t,!0}function bD(e){if(!e||"object"!=typeof e)throw Error(XM+"Object expected");var t,r,n,a=["precision",1,YM,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(n=e[r=a[t]])){if(!(ZM(n)===n&&n>=a[t+1]&&n<=a[t+2]))throw Error(QM+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(QM+r+": "+n);this[r]=new this(n)}return this}var jD=function e(t){var r,n,a;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(QM+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):fD(t,e.toString())}if("string"!=typeof e)throw Error(QM+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!tD.test(e))throw Error(QM+e);fD(t,e)}if(s.prototype=sD,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=bD,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)t.hasOwnProperty(n=a[r++])||(t[n]=this[n]);return s.config(t),s}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});KM=new jD(1);const wD=jD;function ND(e){return function(e){if(Array.isArray(e))return SD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return SD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SD(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _D=function(e){return e},kD={"@@functional/placeholder":!0},OD=function(e){return e===kD},CD=function(e){return function t(){return 0===arguments.length||1===arguments.length&&OD(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},AD=function e(t,r){return 1===t?r:CD(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var i=a.filter(function(e){return e!==kD}).length;return i>=t?r.apply(void 0,a):e(t-i,CD(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=a.map(function(e){return OD(e)?t.shift():e});return r.apply(void 0,ND(s).concat(t))}))})},ED=function(e){return AD(e.length,e)},PD=function(e,t){for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},TD=ED(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),MD=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},DD=function(e){var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every(function(e,r){return e===t[r]})?r:(t=a,r=e.apply(void 0,a))}};const ID={rangeStep:function(e,t,r){for(var n=new wD(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s},getDigitCount:function(e){return 0===e?1:Math.floor(new wD(e).abs().log(10).toNumber())+1},interpolateNumber:ED(function(e,t,r){var n=+e;return n+r*(+t-n)}),uninterpolateNumber:ED(function(e,t,r){var n=t-+e;return(r-e)/(n=n||1/0)}),uninterpolateTruncation:ED(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))})};function RD(e){return function(e){if(Array.isArray(e))return BD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||FD(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,s=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}return r}(e,t)||FD(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FD(e,t){if(e){if("string"==typeof e)return BD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?BD(e,t):void 0}}function BD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qD(e){var t=LD(e,2),r=t[0],n=t[1],a=r,s=n;return r>n&&(a=n,s=r),[a,s]}function $D(e,t,r){if(e.lte(0))return new wD(0);var n=ID.getDigitCount(e.toNumber()),a=new wD(10).pow(n),s=e.div(a),i=1!==n?.05:.1,o=new wD(Math.ceil(s.div(i).toNumber())).add(r).mul(i).mul(a);return t?o:new wD(Math.ceil(o))}function zD(e,t,r){var n=1,a=new wD(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new wD(10).pow(ID.getDigitCount(e)-1),a=new wD(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new wD(Math.floor(e)))}else 0===e?a=new wD(Math.floor((t-1)/2)):r||(a=new wD(Math.floor(e)));var i=Math.floor((t-1)/2),o=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return _D;var n=t.reverse(),a=n[0],s=n.slice(1);return function(){return s.reduce(function(e,t){return t(e)},a.apply(void 0,arguments))}}(TD(function(e){return a.add(new wD(e-i).mul(n)).toNumber()}),PD);return o(0,t)}function UD(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new wD(0),tickMin:new wD(0),tickMax:new wD(0)};var s,i=$D(new wD(t).sub(e).div(r-1),n,a);s=e<=0&&t>=0?new wD(0):(s=new wD(e).add(t).div(2)).sub(new wD(s).mod(i));var o=Math.ceil(s.sub(e).div(i).toNumber()),l=Math.ceil(new wD(t).sub(s).div(i).toNumber()),c=o+l+1;return c>r?UD(e,t,r,n,a+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:i,tickMin:s.sub(new wD(o).mul(i)),tickMax:s.add(new wD(l).mul(i))})}var VD=DD(function(e){var t=LD(e,2),r=t[0],n=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(a,2),o=LD(qD([r,n]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0){var d=c===1/0?[l].concat(RD(PD(0,a-1).map(function(){return 1/0}))):[].concat(RD(PD(0,a-1).map(function(){return-1/0})),[c]);return r>n?MD(d):d}if(l===c)return zD(l,a,s);var u=UD(l,c,i,s),h=u.step,m=u.tickMin,p=u.tickMax,f=ID.rangeStep(m,p.add(new wD(.1).mul(h)),h);return r>n?MD(f):f}),WD=DD(function(e,t){var r=LD(e,2),n=r[0],a=r[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=LD(qD([n,a]),2),o=i[0],l=i[1];if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(t,2),d=$D(new wD(l).sub(o).div(c-1),s,0),u=[].concat(RD(ID.rangeStep(new wD(o),new wD(l).sub(new wD(.99).mul(d)),d)),[l]);return n>a?MD(u):u}),HD="Invariant failed";function KD(e,t){if(!e)throw new Error(HD)}var YD=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function GD(e){return(GD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XD(){return XD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XD.apply(this,arguments)}function QD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return JD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ZD(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iI(n.key),n)}}function tI(e,t,r){return t=nI(t),function(e,t){if(t&&("object"===GD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rI()?Reflect.construct(t,r||[],nI(e).constructor):t.apply(e,r))}function rI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(rI=function(){return!!e})()}function nI(e){return(nI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aI(e,t){return(aI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sI(e,t,r){return(t=iI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iI(e){var t=function(e,t){if("object"!=GD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=GD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==GD(t)?t:t+""}var oI=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),tI(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aI(e,t)}(e,At.Component),t=e,(r=[{key:"render",value:function(){var e=this.props,t=e.offset,r=e.layout,n=e.width,a=e.dataKey,s=e.data,i=e.dataPointFormatter,o=e.xAxis,l=e.yAxis,c=ZD(e,YD),d=Kg(c,!1);"x"===this.props.direction&&"number"!==o.type&&KD(!1);var u=s.map(function(e){var s=i(e,a),c=s.x,u=s.y,h=s.value,m=s.errorVal;if(!m)return null;var p,f,x=[];if(Array.isArray(m)){var y=QD(m,2);p=y[0],f=y[1]}else p=f=m;if("vertical"===r){var v=o.scale,g=u+t,b=g+n,j=g-n,w=v(h-p),N=v(h+f);x.push({x1:N,y1:b,x2:N,y2:j}),x.push({x1:w,y1:g,x2:N,y2:g}),x.push({x1:w,y1:b,x2:w,y2:j})}else if("horizontal"===r){var S=l.scale,_=c+t,k=_-n,O=_+n,C=S(h-p),A=S(h+f);x.push({x1:k,y1:A,x2:O,y2:A}),x.push({x1:_,y1:C,x2:_,y2:A}),x.push({x1:k,y1:C,x2:O,y2:C})}return At.createElement(ab,XD({className:"recharts-errorBar",key:"bar-".concat(x.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},d),x.map(function(e){return At.createElement("line",XD({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return At.createElement(ab,{className:"recharts-errorBars"},u)}}])&&eI(t.prototype,r),n&&eI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function lI(e){return(lI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cI(Object(r),!0).forEach(function(t){uI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function uI(e,t,r){var n;return n=function(e,t){if("object"!=lI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==lI(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}sI(oI,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),sI(oI,"displayName","ErrorBar");var hI=function(e){var t=e.children,r=e.formattedGraphicalItems,n=e.legendWidth,a=e.legendContent,s=Ug(t,X_);if(!s)return null;var i,o=X_.defaultProps,l=void 0!==o?dI(dI({},o),s.props):{};return i=s.props&&s.props.payload?s.props&&s.props.payload:"children"===a?(r||[]).reduce(function(e,t){var r=t.item,n=t.props,a=n.sectors||n.data||[];return e.concat(a.map(function(e){return{type:s.props.iconType||r.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(r||[]).map(function(e){var t=e.item,r=t.type.defaultProps,n=void 0!==r?dI(dI({},r),t.props):{},a=n.dataKey,s=n.name,i=n.legendType;return{inactive:n.hide,dataKey:a,type:l.iconType||i||"square",color:jI(t),value:s||a,payload:n}}),dI(dI(dI({},l),X_.getWithHeight(s,n)),{},{payload:i,item:s})};function mI(e){return(mI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pI(e){return function(e){if(Array.isArray(e))return fI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fI(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xI(Object(r),!0).forEach(function(t){vI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vI(e,t,r){var n;return n=function(e,t){if("object"!=mI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==mI(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gI(e,t,r){return Fv(e)||Fv(t)?r:yg(t)?Lv(e,t,r):Wx(t)?t(e):r}function bI(e,t,r,n){var a=VM(e,function(e){return gI(e,t)});if("number"===r){var s=a.filter(function(e){return xg(e)||parseFloat(e)});return s.length?[LM(s),TM(s)]:[1/0,-1/0]}return(n?a.filter(function(e){return!Fv(e)}):a).map(function(e){return yg(e)||e instanceof Date?e:""})}var jI=function(e){var t,r,n=e.type.displayName,a=null!==(t=e.type)&&void 0!==t&&t.defaultProps?yI(yI({},e.type.defaultProps),e.props):e.props,s=a.stroke,i=a.fill;switch(n){case"Line":r=s;break;case"Area":case"Radar":r=s&&"none"!==s?s:i;break;default:r=i}return r},wI=function(e,t,r,n,a){var s=zg(t.props.children,oI).filter(function(e){return function(e,t,r){return!!Fv(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===r?"xAxis"===t:"y"!==r||"yAxis"===t)}(n,a,e.props.direction)});if(s&&s.length){var i=s.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var n=gI(t,r);if(Fv(n))return e;var a=Array.isArray(n)?[LM(n),TM(n)]:[n,n],s=i.reduce(function(e,r){var n=gI(t,r,0),s=a[0]-Math.abs(Array.isArray(n)?n[0]:n),i=a[1]+Math.abs(Array.isArray(n)?n[1]:n);return[Math.min(s,e[0]),Math.max(i,e[1])]},[1/0,-1/0]);return[Math.min(s[0],e[0]),Math.max(s[1],e[1])]},[1/0,-1/0])}return null},NI=function(e,t,r,n,a){var s=t.map(function(t){var s=t.props.dataKey;return"number"===r&&s&&wI(e,t,s,n)||bI(e,s,r,a)});if("number"===r)return s.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var i={};return s.reduce(function(e,t){for(var r=0,n=t.length;r<n;r++)i[t[r]]||(i[t[r]]=!0,e.push(t[r]));return e},[])},SI=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},_I=function(e,t,r,n){if(n)return e.map(function(e){return e.coordinate});var a,s,i=e.map(function(e){return e.coordinate===t&&(a=!0),e.coordinate===r&&(s=!0),e.coordinate});return a||i.push(t),s||i.push(r),i},kI=function(e,t,r){if(!e)return null;var n=e.scale,a=e.duplicateDomain,s=e.type,i=e.range,o="scaleBand"===e.realScaleType?n.bandwidth()/2:2,l=(t||r)&&"category"===s&&n.bandwidth?n.bandwidth()/o:0;return l="angleAxis"===e.axisType&&(null==i?void 0:i.length)>=2?2*pg(i[0]-i[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=a?a.indexOf(e):e;return{coordinate:n(t)+l,value:e,offset:l}}).filter(function(e){return!mg(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:n(e)+l,value:e,index:t,offset:l}}):n.ticks&&!r?n.ticks(e.tickCount).map(function(e){return{coordinate:n(e)+l,value:e,offset:l}}):n.domain().map(function(e,t){return{coordinate:n(e)+l,value:a?a[e]:e,index:t,offset:l}})},OI=new WeakMap,CI=function(e,t){if("function"!=typeof t)return e;OI.has(e)||OI.set(e,new WeakMap);var r=OI.get(e);if(r.has(t))return r.get(t);var n=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,n),n},AI=function(e,t,r){var n=e.scale,a=e.type,s=e.layout,i=e.axisType;if("auto"===n)return"radial"===s&&"radiusAxis"===i?{scale:yA(),realScaleType:"band"}:"radial"===s&&"angleAxis"===i?{scale:qE(),realScaleType:"linear"}:"category"===a&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:gA(),realScaleType:"point"}:"category"===a?{scale:yA(),realScaleType:"band"}:{scale:qE(),realScaleType:"linear"};if(zv(n)){var o="scale".concat(Eb(n));return{scale:(_M[o]||gA)(),realScaleType:_M[o]?o:"point"}}return Wx(n)?{scale:n}:{scale:gA(),realScaleType:"point"}},EI=1e-4,PI=function(e){var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-EI,s=Math.max(n[0],n[1])+EI,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}},TI={sign:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=mg(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,a,s=0,i=e[0].length;s<i;++s){for(a=r=0;r<n;++r)a+=e[r][s][1]||0;if(a)for(r=0;r<n;++r)e[r][s][1]/=a}Pj(e,t)}},none:Pj,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,a=e[t[0]],s=a.length;n<s;++n){for(var i=0,o=0;i<r;++i)o+=e[i][n][1]||0;a[n][1]+=a[n][0]=-o/2}Pj(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,a,s=0,i=1;i<n;++i){for(var o=0,l=0,c=0;o<a;++o){for(var d=e[t[o]],u=d[i][1]||0,h=(u-(d[i-1][1]||0))/2,m=0;m<o;++m){var p=e[t[m]];h+=(p[i][1]||0)-(p[i-1][1]||0)}l+=u,c+=h*u}r[i-1][1]+=r[i-1][0]=s,l&&(s-=c/l)}r[i-1][1]+=r[i-1][0]=s,Pj(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=mg(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}}},MI=function(e,t,r){var n=t.map(function(e){return e.props.dataKey}),a=TI[r],s=function(){var e=Pb([]),t=Tj,r=Pj,n=Mj;function a(a){var s,i,o=Array.from(e.apply(this,arguments),Dj),l=o.length,c=-1;for(const e of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+n(e,o[s].key,c,a)]).data=e;for(s=0,i=Vb(t(o));s<l;++s)o[i[s]].index=s;return r(o,i),o}return a.keys=function(t){return arguments.length?(e="function"==typeof t?t:Pb(Array.from(t)),a):e},a.value=function(e){return arguments.length?(n="function"==typeof e?e:Pb(+e),a):n},a.order=function(e){return arguments.length?(t=null==e?Tj:"function"==typeof e?e:Pb(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(r=null==e?Pj:e,a):r},a}().keys(n).value(function(e,t){return+gI(e,t,0)}).order(Tj).offset(a);return s(e)},DI=function(e,t){var r=t.realScaleType,n=t.type,a=t.tickCount,s=t.originalDomain,i=t.allowDecimals,o=r||t.scale;if("auto"!==o&&"linear"!==o)return null;if(a&&"number"===n&&s&&("auto"===s[0]||"auto"===s[1])){var l=e.domain();if(!l.length)return null;var c=VD(l,a,i);return e.domain([LM(c),TM(c)]),{niceTicks:c}}if(a&&"number"===n){var d=e.domain();return{niceTicks:WD(d,a,i)}}return null};function II(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,s=e.index,i=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Fv(a[t.dataKey])){var o=Ng(r,"value",a[t.dataKey]);if(o)return o.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var l=gI(a,Fv(i)?t.dataKey:i);return Fv(l)?null:t.scale(l)}var RI=function(e){var t=e.axis,r=e.ticks,n=e.offset,a=e.bandSize,s=e.entry,i=e.index;if("category"===t.type)return r[i]?r[i].coordinate+n:null;var o=gI(s,t.dataKey,t.domain[i]);return Fv(o)?null:t.scale(o)-a/2+n},LI=function(e,t,r){return Object.keys(e).reduce(function(n,a){var s=e[a].stackedData.reduce(function(e,n){var a=n.slice(t,r+1).reduce(function(e,t){return[LM(t.concat([e[0]]).filter(xg)),TM(t.concat([e[1]]).filter(xg))]},[1/0,-1/0]);return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(s[0],n[0]),Math.max(s[1],n[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},FI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,BI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qI=function(e,t,r){if(Wx(e))return e(t,r);if(!Array.isArray(e))return t;var n=[];if(xg(e[0]))n[0]=r?e[0]:Math.min(e[0],t[0]);else if(FI.test(e[0])){var a=+FI.exec(e[0])[1];n[0]=t[0]-a}else Wx(e[0])?n[0]=e[0](t[0]):n[0]=t[0];if(xg(e[1]))n[1]=r?e[1]:Math.max(e[1],t[1]);else if(BI.test(e[1])){var s=+BI.exec(e[1])[1];n[1]=t[1]+s}else Wx(e[1])?n[1]=e[1](t[1]):n[1]=t[1];return n},$I=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Hk(t,function(e){return e.coordinate}),s=1/0,i=1,o=a.length;i<o;i++){var l=a[i],c=a[i-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},zI=function(e,t,r){return e&&e.length?HM(e,Lv(r,"type.defaultProps.domain"))?t:e:t},UI=function(e,t){var r=e.type.defaultProps?yI(yI({},e.type.defaultProps),e.props):e.props,n=r.dataKey,a=r.name,s=r.unit,i=r.formatter,o=r.tooltipType,l=r.chartType,c=r.hide;return yI(yI({},Kg(e,!1)),{},{dataKey:n,unit:s,formatter:i,name:a||n,color:jI(e),value:gI(t,n),type:o,payload:t,chartType:l,hide:c})};function VI(e){return(VI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function HI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?WI(Object(r),!0).forEach(function(t){KI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function KI(e,t,r){var n;return n=function(e,t){if("object"!=VI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=VI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==VI(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return GI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GI(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var XI=Math.PI/180,QI=function(e){return 180*e/Math.PI},JI=function(e,t,r,n){return{x:e+Math.cos(-XI*n)*r,y:t+Math.sin(-XI*n)*r}},ZI=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},eR=function(e,t){var r,n,a,s,i,o,l=e.x,c=e.y,d=t.cx,u=t.cy,h=(n={x:d,y:u},a=(r={x:l,y:c}).x,s=r.y,i=n.x,o=n.y,Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2)));if(h<=0)return{radius:h};var m=(l-d)/h,p=Math.acos(m);return c>u&&(p=2*Math.PI-p),{radius:h,angle:QI(p),angleInRadian:p}},tR=function(e,t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),s=Math.floor(n/360);return e+360*Math.min(a,s)},rR=function(e,t){var r=e.x,n=e.y,a=eR({x:r,y:n},t),s=a.radius,i=a.angle,o=t.innerRadius,l=t.outerRadius;if(s<o||s>l)return!1;if(0===s)return!0;var c,d=function(e){var t=e.startAngle,r=e.endAngle,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-360*s,endAngle:r-360*s}}(t),u=d.startAngle,h=d.endAngle,m=i;if(u<=h){for(;m>h;)m-=360;for(;m<u;)m+=360;c=m>=u&&m<=h}else{for(;m>u;)m-=360;for(;m<h;)m+=360;c=m>=h&&m<=u}return c?HI(HI({},t),{},{radius:s,angle:tR(m,t)}):null},nR=function(e){return Ct.isValidElement(e)||Wx(e)||"boolean"==typeof e?"":e.className};function aR(e){return(aR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var sR=["offset"];function iR(e){return function(e){if(Array.isArray(e))return oR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return oR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oR(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lR(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cR(Object(r),!0).forEach(function(t){uR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function uR(e,t,r){var n;return n=function(e,t){if("object"!=aR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=aR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==aR(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hR(){return hR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hR.apply(this,arguments)}var mR=function(e,t,r){var n,a,s=e.position,i=e.viewBox,o=e.offset,l=e.className,c=i,d=c.cx,u=c.cy,h=c.innerRadius,m=c.outerRadius,p=c.startAngle,f=c.endAngle,x=c.clockWise,y=(h+m)/2,v=function(e,t){return pg(t-e)*Math.min(Math.abs(t-e),360)}(p,f),g=v>=0?1:-1;"insideStart"===s?(n=p+g*o,a=x):"insideEnd"===s?(n=f-g*o,a=!x):"end"===s&&(n=f+g*o,a=x),a=v<=0?a:!a;var b=JI(d,u,y,n),j=JI(d,u,y,n+359*(a?1:-1)),w="M".concat(b.x,",").concat(b.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(a?0:1,",\n    ").concat(j.x,",").concat(j.y),N=Fv(e.id)?gg("recharts-radial-line-"):e.id;return At.createElement("text",hR({},r,{dominantBaseline:"central",className:Vr("recharts-radial-bar-label",l)}),At.createElement("defs",null,At.createElement("path",{id:N,d:w})),At.createElement("textPath",{xlinkHref:"#".concat(N)},t))};function pR(e){var t,r=e.offset,n=dR({offset:void 0===r?5:r},lR(e,sR)),a=n.viewBox,s=n.position,i=n.value,o=n.children,l=n.content,c=n.className,d=void 0===c?"":c,u=n.textBreakAll;if(!a||Fv(i)&&Fv(o)&&!Ct.isValidElement(l)&&!Wx(l))return null;if(Ct.isValidElement(l))return Ct.cloneElement(l,n);if(Wx(l)){if(t=Ct.createElement(l,n),Ct.isValidElement(t))return t}else t=function(e){var t=e.value,r=e.formatter,n=Fv(e.children)?t:e.children;return Wx(r)?r(n):n}(n);var h=function(e){return"cx"in e&&xg(e.cx)}(a),m=Kg(n,!0);if(h&&("insideStart"===s||"insideEnd"===s||"end"===s))return mR(n,t,m);var p=h?function(e){var t=e.viewBox,r=e.offset,n=e.position,a=t,s=a.cx,i=a.cy,o=a.innerRadius,l=a.outerRadius,c=(a.startAngle+a.endAngle)/2;if("outside"===n){var d=JI(s,i,l+r,c),u=d.x;return{x:u,y:d.y,textAnchor:u>=s?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=JI(s,i,(o+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(n):function(e){var t=e.viewBox,r=e.parentViewBox,n=e.offset,a=e.position,s=t,i=s.x,o=s.y,l=s.width,c=s.height,d=c>=0?1:-1,u=d*n,h=d>0?"end":"start",m=d>0?"start":"end",p=l>=0?1:-1,f=p*n,x=p>0?"end":"start",y=p>0?"start":"end";if("top"===a)return dR(dR({},{x:i+l/2,y:o-d*n,textAnchor:"middle",verticalAnchor:h}),r?{height:Math.max(o-r.y,0),width:l}:{});if("bottom"===a)return dR(dR({},{x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:m}),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{});if("left"===a){var v={x:i-f,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return dR(dR({},v),r?{width:Math.max(v.x-r.x,0),height:c}:{})}if("right"===a){var g={x:i+l+f,y:o+c/2,textAnchor:y,verticalAnchor:"middle"};return dR(dR({},g),r?{width:Math.max(r.x+r.width-g.x,0),height:c}:{})}var b=r?{width:l,height:c}:{};return"insideLeft"===a?dR({x:i+f,y:o+c/2,textAnchor:y,verticalAnchor:"middle"},b):"insideRight"===a?dR({x:i+l-f,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},b):"insideTop"===a?dR({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:m},b):"insideBottom"===a?dR({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},b):"insideTopLeft"===a?dR({x:i+f,y:o+u,textAnchor:y,verticalAnchor:m},b):"insideTopRight"===a?dR({x:i+l-f,y:o+u,textAnchor:x,verticalAnchor:m},b):"insideBottomLeft"===a?dR({x:i+f,y:o+c-u,textAnchor:y,verticalAnchor:h},b):"insideBottomRight"===a?dR({x:i+l-f,y:o+c-u,textAnchor:x,verticalAnchor:h},b):$x(a)&&(xg(a.x)||fg(a.x))&&(xg(a.y)||fg(a.y))?dR({x:i+bg(a.x,l),y:o+bg(a.y,c),textAnchor:"end",verticalAnchor:"end"},b):dR({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)}(n);return At.createElement(UC,hR({className:Vr("recharts-label",d)},m,p,{breakAll:u}),t)}pR.displayName="Label";var fR=function(e){var t=e.cx,r=e.cy,n=e.angle,a=e.startAngle,s=e.endAngle,i=e.r,o=e.radius,l=e.innerRadius,c=e.outerRadius,d=e.x,u=e.y,h=e.top,m=e.left,p=e.width,f=e.height,x=e.clockWise,y=e.labelViewBox;if(y)return y;if(xg(p)&&xg(f)){if(xg(d)&&xg(u))return{x:d,y:u,width:p,height:f};if(xg(h)&&xg(m))return{x:h,y:m,width:p,height:f}}return xg(d)&&xg(u)?{x:d,y:u,width:0,height:0}:xg(t)&&xg(r)?{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:l||0,outerRadius:c||o||i||0,clockWise:x}:e.viewBox?e.viewBox:{}};pR.parseViewBox=fR,pR.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=fR(e),s=zg(n,pR).map(function(e,r){return Ct.cloneElement(e,{viewBox:t||a,key:"label-".concat(r)})});if(!r)return s;var i=function(e,t){return e?!0===e?At.createElement(pR,{key:"label-implicit",viewBox:t}):yg(e)?At.createElement(pR,{key:"label-implicit",viewBox:t,value:e}):Ct.isValidElement(e)?e.type===pR?Ct.cloneElement(e,{key:"label-implicit",viewBox:t}):At.createElement(pR,{key:"label-implicit",content:e,viewBox:t}):Wx(e)?At.createElement(pR,{key:"label-implicit",content:e,viewBox:t}):$x(e)?At.createElement(pR,hR({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||a);return[i].concat(iR(s))};const xR=Tt(function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0});function yR(e){return(yR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var vR=["valueAccessor"],gR=["data","dataKey","clockWise","id","textBreakAll"];function bR(e){return function(e){if(Array.isArray(e))return jR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return jR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jR(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wR(){return wR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wR.apply(this,arguments)}function NR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function SR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?NR(Object(r),!0).forEach(function(t){_R(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _R(e,t,r){var n;return n=function(e,t){if("object"!=yR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==yR(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kR(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var OR=function(e){return Array.isArray(e.value)?xR(e.value):e.value};function CR(e){var t=e.valueAccessor,r=void 0===t?OR:t,n=kR(e,vR),a=n.data,s=n.dataKey,i=n.clockWise,o=n.id,l=n.textBreakAll,c=kR(n,gR);return a&&a.length?At.createElement(ab,{className:"recharts-label-list"},a.map(function(e,t){var n=Fv(s)?r(e,t):gI(e&&e.payload,s),a=Fv(o)?{}:{id:"".concat(o,"-").concat(t)};return At.createElement(pR,wR({},Kg(e,!0),c,a,{parentViewBox:e.parentViewBox,value:n,textBreakAll:l,viewBox:pR.parseViewBox(Fv(i)?e:SR(SR({},e),{},{clockWise:i})),key:"label-".concat(t),index:t}))})):null}function AR(e){return(AR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ER(){return ER=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ER.apply(this,arguments)}function PR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function TR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PR(Object(r),!0).forEach(function(t){MR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function MR(e,t,r){var n;return n=function(e,t){if("object"!=AR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=AR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==AR(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}CR.displayName="LabelList",CR.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=zg(e.children,CR).map(function(e,r){return Ct.cloneElement(e,{data:t,key:"labelList-".concat(r)})});return r?[function(e,t){return e?!0===e?At.createElement(CR,{key:"labelList-implicit",data:t}):At.isValidElement(e)||Wx(e)?At.createElement(CR,{key:"labelList-implicit",data:t,content:e}):$x(e)?At.createElement(CR,wR({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t)].concat(bR(n)):n};var DR=function(e){var t=e.cx,r=e.cy,n=e.radius,a=e.angle,s=e.sign,i=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,c=o*(i?1:-1)+n,d=Math.asin(o/c)/XI,u=l?a:a+s*d,h=l?a-s*d:a;return{center:JI(t,r,c,u),circleTangency:JI(t,r,n,u),lineTangency:JI(t,r,c*Math.cos(d*XI),h),theta:d}},IR=function(e){var t=e.cx,r=e.cy,n=e.innerRadius,a=e.outerRadius,s=e.startAngle,i=function(e,t){return pg(t-e)*Math.min(Math.abs(t-e),359.999)}(s,e.endAngle),o=s+i,l=JI(t,r,a,s),c=JI(t,r,a,o),d="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(i)>180),",").concat(+(s>o),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(n>0){var u=JI(t,r,n,s),h=JI(t,r,n,o);d+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(i)>180),",").concat(+(s<=o),",\n            ").concat(u.x,",").concat(u.y," Z")}else d+="L ".concat(t,",").concat(r," Z");return d},RR={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},LR=function(e){var t=TR(TR({},RR),e),r=t.cx,n=t.cy,a=t.innerRadius,s=t.outerRadius,i=t.cornerRadius,o=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,d=t.endAngle,u=t.className;if(s<a||c===d)return null;var h,m=Vr("recharts-sector",u),p=s-a,f=bg(i,p,0,!0);return h=f>0&&Math.abs(c-d)<360?function(e){var t=e.cx,r=e.cy,n=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,i=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,d=pg(c-l),u=DR({cx:t,cy:r,radius:a,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),h=u.circleTangency,m=u.lineTangency,p=u.theta,f=DR({cx:t,cy:r,radius:a,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:o}),x=f.circleTangency,y=f.lineTangency,v=f.theta,g=o?Math.abs(l-c):Math.abs(l-c)-p-v;if(g<0)return i?"M ".concat(m.x,",").concat(m.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*-s,",0\n      "):IR({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:c});var b="M ".concat(m.x,",").concat(m.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(g>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,"\n  ");if(n>0){var j=DR({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),w=j.circleTangency,N=j.lineTangency,S=j.theta,_=DR({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),k=_.circleTangency,O=_.lineTangency,C=_.theta,A=o?Math.abs(l-c):Math.abs(l-c)-S-C;if(A<0&&0===s)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+="L".concat(O.x,",").concat(O.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(k.x,",").concat(k.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(A>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else b+="L".concat(t,",").concat(r,"Z");return b}({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(f,p/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}):IR({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:c,endAngle:d}),At.createElement("path",ER({},Kg(t,!0),{className:m,d:h,role:"img"}))};function FR(e){return(FR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BR(){return BR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BR.apply(this,arguments)}function qR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qR(Object(r),!0).forEach(function(t){zR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function zR(e,t,r){var n;return n=function(e,t){if("object"!=FR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=FR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==FR(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var UR={curveBasisClosed:function(e){return new vj(e)},curveBasisOpen:function(e){return new gj(e)},curveBasis:function(e){return new yj(e)},curveBumpX:function(e){return new Qb(e,!0)},curveBumpY:function(e){return new Qb(e,!1)},curveLinearClosed:function(e){return new bj(e)},curveLinear:Hb,curveMonotoneX:function(e){return new _j(e)},curveMonotoneY:function(e){return new kj(e)},curveNatural:function(e){return new Cj(e)},curveStep:function(e){return new Ej(e,.5)},curveStepAfter:function(e){return new Ej(e,1)},curveStepBefore:function(e){return new Ej(e,0)}},VR=function(e){return e.x===+e.x&&e.y===+e.y},WR=function(e){return e.x},HR=function(e){return e.y},KR=function(e){var t,r=e.type,n=void 0===r?"linear":r,a=e.points,s=void 0===a?[]:a,i=e.baseLine,o=e.layout,l=e.connectNulls,c=void 0!==l&&l,d=function(e,t){if(Wx(e))return e;var r="curve".concat(Eb(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?UR[r]||Hb:UR["".concat(r).concat("vertical"===t?"Y":"X")]}(n,o),u=c?s.filter(function(e){return VR(e)}):s;if(Array.isArray(i)){var h=c?i.filter(function(e){return VR(e)}):i,m=u.map(function(e,t){return $R($R({},e),{},{base:h[t]})});return(t="vertical"===o?Xb().y(HR).x1(WR).x0(function(e){return e.base.x}):Xb().x(WR).y1(HR).y0(function(e){return e.base.y})).defined(VR).curve(d),t(m)}return(t="vertical"===o&&xg(i)?Xb().y(HR).x1(WR).x0(i):xg(i)?Xb().x(WR).y1(HR).y0(i):Gb().x(WR).y(HR)).defined(VR).curve(d),t(u)},YR=function(e){var t=e.className,r=e.points,n=e.path,a=e.pathRef;if(!(r&&r.length||n))return null;var s=r&&r.length?KR(e):n;return Ct.createElement("path",BR({},Kg(e,!1),Pg(e),{className:Vr("recharts-curve",t),d:s,ref:a}))},GR={exports:{}};function XR(){}function QR(){}QR.resetWarningCache=XR;GR.exports=function(){function e(e,t,r,n,a,s){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==s){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:QR,resetWarningCache:XR};return r.PropTypes=r,r}();const JR=Tt(GR.exports);var ZR=Object.getOwnPropertyNames,eL=Object.getOwnPropertySymbols,tL=Object.prototype.hasOwnProperty;function rL(e,t){return function(r,n,a){return e(r,n,a)&&t(r,n,a)}}function nL(e){return function(t,r,n){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,n);var a=n.cache,s=a.get(t),i=a.get(r);if(s&&i)return s===r&&i===t;a.set(t,r),a.set(r,t);var o=e(t,r,n);return a.delete(t),a.delete(r),o}}function aL(e){return ZR(e).concat(eL(e))}var sL=Object.hasOwn||function(e,t){return tL.call(e,t)};function iL(e,t){return e===t||!e&&!t&&e!=e&&t!=t}var oL=Object.getOwnPropertyDescriptor,lL=Object.keys;function cL(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function dL(e,t){return iL(e.getTime(),t.getTime())}function uL(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function hL(e,t){return e===t}function mL(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a,s,i=new Array(n),o=e.entries(),l=0;(a=o.next())&&!a.done;){for(var c=t.entries(),d=!1,u=0;(s=c.next())&&!s.done;)if(i[u])u++;else{var h=a.value,m=s.value;if(r.equals(h[0],m[0],l,u,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){d=i[u]=!0;break}u++}if(!d)return!1;l++}return!0}var pL=iL;function fL(e,t,r){var n=lL(e),a=n.length;if(lL(t).length!==a)return!1;for(;a-- >0;)if(!wL(e,t,r,n[a]))return!1;return!0}function xL(e,t,r){var n,a,s,i=aL(e),o=i.length;if(aL(t).length!==o)return!1;for(;o-- >0;){if(!wL(e,t,r,n=i[o]))return!1;if(a=oL(e,n),s=oL(t,n),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable))return!1}return!0}function yL(e,t){return iL(e.valueOf(),t.valueOf())}function vL(e,t){return e.source===t.source&&e.flags===t.flags}function gL(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a,s,i=new Array(n),o=e.values();(a=o.next())&&!a.done;){for(var l=t.values(),c=!1,d=0;(s=l.next())&&!s.done;){if(!i[d]&&r.equals(a.value,s.value,a.value,s.value,e,t,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function bL(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function jL(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function wL(e,t,r,n){return!("_owner"!==n&&"__o"!==n&&"__v"!==n||!e.$$typeof&&!t.$$typeof)||sL(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var NL=Array.isArray,SL="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,_L=Object.assign,kL=Object.prototype.toString.call.bind(Object.prototype.toString);var OL=CL();function CL(e){void 0===e&&(e={});var t,r=e.circular,n=void 0!==r&&r,a=e.createInternalComparator,s=e.createState,i=e.strict,o=void 0!==i&&i,l=function(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?xL:cL,areDatesEqual:dL,areErrorsEqual:uL,areFunctionsEqual:hL,areMapsEqual:n?rL(mL,xL):mL,areNumbersEqual:pL,areObjectsEqual:n?xL:fL,arePrimitiveWrappersEqual:yL,areRegExpsEqual:vL,areSetsEqual:n?rL(gL,xL):gL,areTypedArraysEqual:n?xL:bL,areUrlsEqual:jL};if(r&&(a=_L({},a,r(a))),t){var s=nL(a.areArraysEqual),i=nL(a.areMapsEqual),o=nL(a.areObjectsEqual),l=nL(a.areSetsEqual);a=_L({},a,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return a}(e),c=function(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,s=e.areMapsEqual,i=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,d=e.areSetsEqual,u=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,m,p){if(e===m)return!0;if(null==e||null==m)return!1;var f=typeof e;if(f!==typeof m)return!1;if("object"!==f)return"number"===f?i(e,m,p):"function"===f&&a(e,m,p);var x=e.constructor;if(x!==m.constructor)return!1;if(x===Object)return o(e,m,p);if(NL(e))return t(e,m,p);if(null!=SL&&SL(e))return u(e,m,p);if(x===Date)return r(e,m,p);if(x===RegExp)return c(e,m,p);if(x===Map)return s(e,m,p);if(x===Set)return d(e,m,p);var y=kL(e);return"[object Date]"===y?r(e,m,p):"[object RegExp]"===y?c(e,m,p):"[object Map]"===y?s(e,m,p):"[object Set]"===y?d(e,m,p):"[object Object]"===y?"function"!=typeof e.then&&"function"!=typeof m.then&&o(e,m,p):"[object URL]"===y?h(e,m,p):"[object Error]"===y?n(e,m,p):"[object Arguments]"===y?o(e,m,p):("[object Boolean]"===y||"[object Number]"===y||"[object String]"===y)&&l(e,m,p)}}(l);return function(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,s=e.strict;if(n)return function(e,i){var o=n(),l=o.cache,c=void 0===l?t?new WeakMap:void 0:l,d=o.meta;return r(e,i,{cache:c,equals:a,meta:d,strict:s})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var i={cache:void 0,equals:a,meta:void 0,strict:s};return function(e,t){return r(e,t,i)}}({circular:n,comparator:c,createState:s,equals:a?a(c):(t=c,function(e,r,n,a,s,i,o){return t(e,r,o)}),strict:o})}function AL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=-1;requestAnimationFrame(function n(a){r<0&&(r=a),a-r>t?(e(a),r=-1):function(e){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(e)}(n)})}function EL(e){return(EL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PL(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return TL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TL(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ML(){var e=function(){return null},t=!1,r=function r(n){if(!t){if(Array.isArray(n)){if(!n.length)return;var a=PL(n),s=a[0],i=a.slice(1);return"number"==typeof s?void AL(r.bind(null,i),s):(r(s),void AL(r.bind(null,i)))}"object"===EL(n)&&e(n),"function"==typeof n&&n()}};return{stop:function(){t=!0},start:function(e){t=!1,r(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function DL(e){return(DL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function RL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?IL(Object(r),!0).forEach(function(t){LL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function LL(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==DL(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==DL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===DL(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}CL({strict:!0}),CL({circular:!0}),CL({circular:!0,strict:!0}),CL({createInternalComparator:function(){return iL}}),CL({strict:!0,createInternalComparator:function(){return iL}}),CL({circular:!0,createInternalComparator:function(){return iL}}),CL({circular:!0,createInternalComparator:function(){return iL},strict:!0});var FL=function(e){return e},BL=function(e,t){return Object.keys(t).reduce(function(r,n){return RL(RL({},r),{},LL({},n,e(n,t[n])))},{})},qL=function(e,t,r){return e.map(function(e){return"".concat((n=e,n.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}))," ").concat(t,"ms ").concat(r);var n}).join(",")};function $L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||UL(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zL(e){return function(e){if(Array.isArray(e))return VL(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||UL(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UL(e,t){if(e){if("string"==typeof e)return VL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?VL(e,t):void 0}}function VL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var WL=1e-4,HL=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},KL=function(e,t){return e.map(function(e,r){return e*Math.pow(t,r)}).reduce(function(e,t){return e+t})},YL=function(e,t){return function(r){var n=HL(e,t);return KL(n,r)}},GL=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1],s=t[2],i=t[3];if(1===t.length)switch(t[0]){case"linear":n=0,a=0,s=1,i=1;break;case"ease":n=.25,a=.1,s=.25,i=1;break;case"ease-in":n=.42,a=0,s=1,i=1;break;case"ease-out":n=.42,a=0,s=.58,i=1;break;case"ease-in-out":n=0,a=0,s=.58,i=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=$L(o[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),4);n=l[0],a=l[1],s=l[2],i=l[3]}}var c,d,u=YL(n,s),h=YL(a,i),m=(c=n,d=s,function(e){var t=HL(c,d),r=[].concat(zL(t.map(function(e,t){return e*t}).slice(1)),[0]);return KL(r,e)}),p=function(e){return e>1?1:e<0?0:e},f=function(e){for(var t=e>1?1:e,r=t,n=0;n<8;++n){var a=u(r)-t,s=m(r);if(Math.abs(a-t)<WL||s<WL)return h(r);r=p(r-a/s)}return h(r)};return f.isStepper=!1,f},XL=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0];if("string"==typeof n)switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return GL(n);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,r=void 0===t?100:t,n=e.damping,a=void 0===n?8:n,s=e.dt,i=void 0===s?17:s,o=function(e,t,n){var s=n+(-(e-t)*r-n*a)*i/1e3,o=n*i/1e3+e;return Math.abs(o-t)<WL&&Math.abs(s)<WL?[t,0]:[o,s]};return o.isStepper=!0,o.dt=i,o}();default:if("cubic-bezier"===n.split("(")[0])return GL(n)}return"function"==typeof n?n:null};function QL(e){return(QL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JL(e){return function(e){if(Array.isArray(e))return aF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ZL(Object(r),!0).forEach(function(t){tF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tF(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==QL(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==QL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===QL(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||nF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nF(e,t){if(e){if("string"==typeof e)return aF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aF(e,t):void 0}}function aF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sF=function(e,t,r){return e+(t-e)*r},iF=function(e){return e.from!==e.to},oF=function e(t,r,n){var a=BL(function(e,r){if(iF(r)){var n=rF(t(r.from,r.to,r.velocity),2),a=n[0],s=n[1];return eF(eF({},r),{},{from:a,velocity:s})}return r},r);return n<1?BL(function(e,t){return iF(t)?eF(eF({},t),{},{velocity:sF(t.velocity,a[e].velocity,n),from:sF(t.from,a[e].from,n)}):t},r):e(t,a,n-1)};const lF=function(e,t,r,n,a){var s,i,o,l,c=(s=e,i=t,[Object.keys(s),Object.keys(i)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})),d=c.reduce(function(r,n){return eF(eF({},r),{},tF({},n,[e[n],t[n]]))},{}),u=c.reduce(function(r,n){return eF(eF({},r),{},tF({},n,{from:e[n],velocity:0,to:t[n]}))},{}),h=-1,m=function(){return null};return m=r.isStepper?function(n){o||(o=n);var s=(n-o)/r.dt;u=oF(r,u,s),a(eF(eF(eF({},e),t),BL(function(e,t){return t.from},u))),o=n,Object.values(u).filter(iF).length&&(h=requestAnimationFrame(m))}:function(s){l||(l=s);var i=(s-l)/n,o=BL(function(e,t){return sF.apply(void 0,JL(t).concat([r(i)]))},d);if(a(eF(eF(eF({},e),t),o)),i<1)h=requestAnimationFrame(m);else{var c=BL(function(e,t){return sF.apply(void 0,JL(t).concat([r(1)]))},d);a(eF(eF(eF({},e),t),c))}},function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(h)}}};function cF(e){return(cF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var dF=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function uF(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hF(e){return function(e){if(Array.isArray(e))return mF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return mF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mF(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pF(Object(r),!0).forEach(function(t){xF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xF(e,t,r){return(t=vF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vF(n.key),n)}}function vF(e){var t=function(e,t){if("object"!==cF(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==cF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===cF(t)?t:String(t)}function gF(e,t){return(gF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=NF(e);if(t){var a=NF(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return jF(this,r)}}function jF(e,t){if(t&&("object"===cF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wF(e)}function wF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NF(e){return(NF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var SF=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gF(e,t)}(a,Ct.PureComponent);var e,t,r,n=bF(a);function a(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var s=(r=n.call(this,e,t)).props,i=s.isActive,o=s.attributeName,l=s.from,c=s.to,d=s.steps,u=s.children,h=s.duration;if(r.handleStyleChange=r.handleStyleChange.bind(wF(r)),r.changeStyle=r.changeStyle.bind(wF(r)),!i||h<=0)return r.state={style:{}},"function"==typeof u&&(r.state={style:c}),jF(r);if(d&&d.length)r.state={style:d[0].style};else if(l){if("function"==typeof u)return r.state={style:l},jF(r);r.state={style:o?xF({},o,l):l}}else r.state={style:{}};return r}return e=a,(t=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,r=e.canBegin;this.mounted=!0,t&&r&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isActive,n=t.canBegin,a=t.attributeName,s=t.shouldReAnimate,i=t.to,o=t.from,l=this.state.style;if(n)if(r){if(!(OL(e.to,i)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=c||s?o:e.to;if(this.state&&l){var u={style:a?xF({},a,d):d};(a&&l[a]!==d||!a&&l!==d)&&this.setState(u)}this.runAnimation(fF(fF({},this.props),{},{from:d,begin:0}))}}else{var h={style:a?xF({},a,i):i};this.state&&l&&(a&&l[a]!==i||!a&&l!==i)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,r=e.from,n=e.to,a=e.duration,s=e.easing,i=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,c=lF(r,n,XL(s),a,this.changeStyle);this.manager.start([l,i,function(){t.stopJSAnimation=c()},a,o])}},{key:"runStepAnimation",value:function(e){var t=this,r=e.steps,n=e.begin,a=e.onAnimationStart,s=r[0],i=s.style,o=s.duration,l=void 0===o?0:o;return this.manager.start([a].concat(hF(r.reduce(function(e,n,a){if(0===a)return e;var s=n.duration,i=n.easing,o=void 0===i?"ease":i,l=n.style,c=n.properties,d=n.onAnimationEnd,u=a>0?r[a-1]:n,h=c||Object.keys(l);if("function"==typeof o||"spring"===o)return[].concat(hF(e),[t.runJSAnimation.bind(t,{from:u.style,to:l,duration:s,easing:o}),s]);var m=qL(h,s,o),p=fF(fF(fF({},u.style),l),{},{transition:m});return[].concat(hF(e),[p,s,d]).filter(FL)},[i,Math.max(l,n)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=ML());var t=e.begin,r=e.duration,n=e.attributeName,a=e.to,s=e.easing,i=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,c=e.children,d=this.manager;if(this.unSubscribe=d.subscribe(this.handleStyleChange),"function"!=typeof s&&"function"!=typeof c&&"spring"!==s)if(l.length>1)this.runStepAnimation(e);else{var u=n?xF({},n,a):a,h=qL(Object.keys(u),r,s);d.start([i,t,fF(fF({},u),{},{transition:h}),r,o])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children;e.begin;var r=e.duration;e.attributeName,e.easing;var n=e.isActive;e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart;var a=uF(e,dF),s=Ct.Children.count(t),i=this.state.style;if("function"==typeof t)return t(i);if(!n||0===s||r<=0)return t;var o=function(e){var t=e.props,r=t.style,n=void 0===r?{}:r,s=t.className;return Ct.cloneElement(e,fF(fF({},a),{},{style:fF(fF({},n),i),className:s}))};return 1===s?o(Ct.Children.only(t)):At.createElement("div",null,Ct.Children.map(t,function(e){return o(e)}))}}])&&yF(e.prototype,t),r&&yF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}();SF.displayName="Animate",SF.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},SF.propTypes={from:JR.oneOfType([JR.object,JR.string]),to:JR.oneOfType([JR.object,JR.string]),attributeName:JR.string,duration:JR.number,begin:JR.number,easing:JR.oneOfType([JR.string,JR.func]),steps:JR.arrayOf(JR.shape({duration:JR.number.isRequired,style:JR.object.isRequired,easing:JR.oneOfType([JR.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),JR.func]),properties:JR.arrayOf("string"),onAnimationEnd:JR.func})),children:JR.oneOfType([JR.node,JR.func]),isActive:JR.bool,canBegin:JR.bool,onAnimationEnd:JR.func,shouldReAnimate:JR.bool,onAnimationStart:JR.func,onAnimationReStart:JR.func};const _F=SF;function kF(e){return(kF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OF(){return OF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OF.apply(this,arguments)}function CF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return AF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AF(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function EF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function PF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?EF(Object(r),!0).forEach(function(t){TF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function TF(e,t,r){var n;return n=function(e,t){if("object"!=kF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=kF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==kF(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var MF=function(e,t,r,n,a){var s,i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=a[u]>i?i:a[u];s="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(s+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),s+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(s+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+o*d[1])),s+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(s+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+r-l*d[2],",").concat(t+n)),s+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(s+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-o*d[3])),s+="Z"}else if(i>0&&a===+a&&a>0){var h=Math.min(i,a);s="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+r-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,"\n            L ").concat(e+r,",").concat(t+n-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(t+n,"\n            L ").concat(e+l*h,",").concat(t+n,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else s="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return s},DF=function(e,t){if(!e||!t)return!1;var r=e.x,n=e.y,a=t.x,s=t.y,i=t.width,o=t.height;if(Math.abs(i)>0&&Math.abs(o)>0){var l=Math.min(a,a+i),c=Math.max(a,a+i),d=Math.min(s,s+o),u=Math.max(s,s+o);return r>=l&&r<=c&&n>=d&&n<=u}return!1},IF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RF=function(e){var t=PF(PF({},IF),e),r=Ct.useRef(),n=CF(Ct.useState(-1),2),a=n[0],s=n[1];Ct.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&s(e)}catch(t){}},[]);var i=t.x,o=t.y,l=t.width,c=t.height,d=t.radius,u=t.className,h=t.animationEasing,m=t.animationDuration,p=t.animationBegin,f=t.isAnimationActive,x=t.isUpdateAnimationActive;if(i!==+i||o!==+o||l!==+l||c!==+c||0===l||0===c)return null;var y=Vr("recharts-rectangle",u);return x?At.createElement(_F,{canBegin:a>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:m,animationEasing:h,isActive:x},function(e){var n=e.width,s=e.height,i=e.x,o=e.y;return At.createElement(_F,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,isActive:f,easing:h},At.createElement("path",OF({},Kg(t,!0),{className:y,d:MF(i,o,n,s,d),ref:r})))}):At.createElement("path",OF({},Kg(t,!0),{className:y,d:MF(i,o,l,c,d)}))},LF=["points","className","baseLinePoints","connectNulls"];function FF(){return FF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FF.apply(this,arguments)}function BF(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qF(e){return function(e){if(Array.isArray(e))return $F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $F(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zF=function(e){return e&&e.x===+e.x&&e.y===+e.y},UF=function(e,t){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach(function(e){zF(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])}),zF(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(r=[r.reduce(function(e,t){return[].concat(qF(e),qF(t))},[])]);var n=r.map(function(e){return e.reduce(function(e,t,r){return"".concat(e).concat(0===r?"M":"L").concat(t.x,",").concat(t.y)},"")}).join("");return 1===r.length?"".concat(n,"Z"):n},VF=function(e){var t=e.points,r=e.className,n=e.baseLinePoints,a=e.connectNulls,s=BF(e,LF);if(!t||!t.length)return null;var i=Vr("recharts-polygon",r);if(n&&n.length){var o=s.stroke&&"none"!==s.stroke,l=function(e,t,r){var n=UF(e,r);return"".concat("Z"===n.slice(-1)?n.slice(0,-1):n,"L").concat(UF(t.reverse(),r).slice(1))}(t,n,a);return At.createElement("g",{className:i},At.createElement("path",FF({},Kg(s,!0),{fill:"Z"===l.slice(-1)?s.fill:"none",stroke:"none",d:l})),o?At.createElement("path",FF({},Kg(s,!0),{fill:"none",d:UF(t,a)})):null,o?At.createElement("path",FF({},Kg(s,!0),{fill:"none",d:UF(n,a)})):null)}var c=UF(t,a);return At.createElement("path",FF({},Kg(s,!0),{fill:"Z"===c.slice(-1)?s.fill:"none",className:i,d:c}))};function WF(){return WF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WF.apply(this,arguments)}var HF=function(e){var t=e.cx,r=e.cy,n=e.r,a=Vr("recharts-dot",e.className);return t===+t&&r===+r&&n===+n?Ct.createElement("circle",WF({},Kg(e,!1),Pg(e),{className:a,cx:t,cy:r,r:n})):null};function KF(e){return(KF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var YF=["x","y","top","left","width","height","className"];function GF(){return GF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GF.apply(this,arguments)}function XF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function QF(e,t,r){var n;return n=function(e,t){if("object"!=KF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=KF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==KF(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JF(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var ZF=function(e,t,r,n,a,s){return"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r)},eB=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,a=void 0===n?0:n,s=e.top,i=void 0===s?0:s,o=e.left,l=void 0===o?0:o,c=e.width,d=void 0===c?0:c,u=e.height,h=void 0===u?0:u,m=e.className,p=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XF(Object(r),!0).forEach(function(t){QF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:r,y:a,top:i,left:l,width:d,height:h},JF(e,YF));return xg(r)&&xg(a)&&xg(d)&&xg(h)&&xg(i)&&xg(l)?At.createElement("path",GF({},Kg(p,!0),{className:Vr("recharts-cross",m),d:ZF(r,a,d,h,i,l)})):null},tB=OM,rB=CM,nB=x_;const aB=Tt(function(e,t){return e&&e.length?tB(e,nB(t),rB):void 0});var sB=OM,iB=x_,oB=MM;const lB=Tt(function(e,t){return e&&e.length?sB(e,iB(t),oB):void 0});var cB=["cx","cy","angle","ticks","axisLine"],dB=["ticks","tick","angle","tickFormatter","stroke"];function uB(e){return(uB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hB(){return hB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hB.apply(this,arguments)}function mB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mB(Object(r),!0).forEach(function(t){jB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function fB(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wB(n.key),n)}}function yB(e,t,r){return t=gB(t),function(e,t){if(t&&("object"===uB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,vB()?Reflect.construct(t,r||[],gB(e).constructor):t.apply(e,r))}function vB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(vB=function(){return!!e})()}function gB(e){return(gB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bB(e,t){return(bB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jB(e,t,r){return(t=wB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wB(e){var t=function(e,t){if("object"!=uB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=uB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uB(t)?t:t+""}var NB=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),yB(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bB(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"renderTickItem",value:function(e,t,r){return At.isValidElement(e)?At.cloneElement(e,t):Wx(e)?e(t):At.createElement(UC,hB({},t,{className:"recharts-polar-radius-axis-tick-value"}),r)}}],(r=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,r=this.props,n=r.angle,a=r.cx,s=r.cy;return JI(a,s,t,n)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.angle,a=e.ticks,s=aB(a,function(e){return e.coordinate||0});return{cx:t,cy:r,startAngle:n,endAngle:n,innerRadius:lB(a,function(e){return e.coordinate||0}).coordinate||0,outerRadius:s.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.angle,a=e.ticks,s=e.axisLine,i=fB(e,cB),o=a.reduce(function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]},[1/0,-1/0]),l=JI(t,r,o[0],n),c=JI(t,r,o[1],n),d=pB(pB(pB({},Kg(i,!1)),{},{fill:"none"},Kg(s,!1)),{},{x1:l.x,y1:l.y,x2:c.x,y2:c.y});return At.createElement("line",hB({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var t=this,r=this.props,n=r.ticks,a=r.tick,s=r.angle,i=r.tickFormatter,o=r.stroke,l=fB(r,dB),c=this.getTickTextAnchor(),d=Kg(l,!1),u=Kg(a,!1),h=n.map(function(r,n){var l=t.getTickValueCoord(r),h=pB(pB(pB(pB({textAnchor:c,transform:"rotate(".concat(90-s,", ").concat(l.x,", ").concat(l.y,")")},d),{},{stroke:"none",fill:o},u),{},{index:n},l),{},{payload:r});return At.createElement(ab,hB({className:Vr("recharts-polar-radius-axis-tick",nR(a)),key:"tick-".concat(r.coordinate)},Tg(t.props,r,n)),e.renderTickItem(a,h,i?i(r.value,n):r.value))});return At.createElement(ab,{className:"recharts-polar-radius-axis-ticks"},h)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.axisLine,n=e.tick;return t&&t.length?At.createElement(ab,{className:Vr("recharts-polar-radius-axis",this.props.className)},r&&this.renderAxisLine(),n&&this.renderTicks(),pR.renderCallByParent(this.props,this.getViewBox())):null}}])&&xB(t.prototype,r),n&&xB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function SB(e){return(SB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _B(){return _B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_B.apply(this,arguments)}function kB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function OB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kB(Object(r),!0).forEach(function(t){MB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function CB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DB(n.key),n)}}function AB(e,t,r){return t=PB(t),function(e,t){if(t&&("object"===SB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,EB()?Reflect.construct(t,r||[],PB(e).constructor):t.apply(e,r))}function EB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(EB=function(){return!!e})()}function PB(e){return(PB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TB(e,t){return(TB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function MB(e,t,r){return(t=DB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DB(e){var t=function(e,t){if("object"!=SB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=SB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SB(t)?t:t+""}jB(NB,"displayName","PolarRadiusAxis"),jB(NB,"axisType","radiusAxis"),jB(NB,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var IB=Math.PI/180,RB=1e-5,LB=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),AB(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TB(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"renderTickItem",value:function(e,t,r){return At.isValidElement(e)?At.cloneElement(e,t):Wx(e)?e(t):At.createElement(UC,_B({},t,{className:"recharts-polar-angle-axis-tick-value"}),r)}}],(r=[{key:"getTickLineCoord",value:function(e){var t=this.props,r=t.cx,n=t.cy,a=t.radius,s=t.orientation,i=t.tickSize||8,o=JI(r,n,a,e.coordinate),l=JI(r,n,a+("inner"===s?-1:1)*i,e.coordinate);return{x1:o.x,y1:o.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,r=Math.cos(-e.coordinate*IB);return r>RB?"outer"===t?"start":"end":r<-RB?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.radius,a=e.axisLine,s=e.axisLineType,i=OB(OB({},Kg(this.props,!1)),{},{fill:"none"},Kg(a,!1));if("circle"===s)return At.createElement(HF,_B({className:"recharts-polar-angle-axis-line"},i,{cx:t,cy:r,r:n}));var o=this.props.ticks.map(function(e){return JI(t,r,n,e.coordinate)});return At.createElement(VF,_B({className:"recharts-polar-angle-axis-line"},i,{points:o}))}},{key:"renderTicks",value:function(){var t=this,r=this.props,n=r.ticks,a=r.tick,s=r.tickLine,i=r.tickFormatter,o=r.stroke,l=Kg(this.props,!1),c=Kg(a,!1),d=OB(OB({},l),{},{fill:"none"},Kg(s,!1)),u=n.map(function(r,n){var u=t.getTickLineCoord(r),h=OB(OB(OB({textAnchor:t.getTickTextAnchor(r)},l),{},{stroke:"none",fill:o},c),{},{index:n,payload:r,x:u.x2,y:u.y2});return At.createElement(ab,_B({className:Vr("recharts-polar-angle-axis-tick",nR(a)),key:"tick-".concat(r.coordinate)},Tg(t.props,r,n)),s&&At.createElement("line",_B({className:"recharts-polar-angle-axis-tick-line"},d,u)),a&&e.renderTickItem(a,h,i?i(r.value,n):r.value))});return At.createElement(ab,{className:"recharts-polar-angle-axis-ticks"},u)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.radius,n=e.axisLine;return r<=0||!t||!t.length?null:At.createElement(ab,{className:Vr("recharts-polar-angle-axis",this.props.className)},n&&this.renderAxisLine(),this.renderTicks())}}])&&CB(t.prototype,r),n&&CB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();MB(LB,"displayName","PolarAngleAxis"),MB(LB,"axisType","angleAxis"),MB(LB,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var FB=DN(Object.getPrototypeOf,Object),BB=Ex,qB=FB,$B=Px,zB=Function.prototype,UB=Object.prototype,VB=zB.toString,WB=UB.hasOwnProperty,HB=VB.call(Object);const KB=Tt(function(e){if(!$B(e)||"[object Object]"!=BB(e))return!1;var t=qB(e);if(null===t)return!0;var r=WB.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&VB.call(r)==HB});var YB=Ex,GB=Px;const XB=Tt(function(e){return!0===e||!1===e||GB(e)&&"[object Boolean]"==YB(e)});function QB(e){return(QB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JB(){return JB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JB.apply(this,arguments)}function ZB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return eq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eq(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tq(Object(r),!0).forEach(function(t){nq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function nq(e,t,r){var n;return n=function(e,t){if("object"!=QB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=QB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==QB(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var aq,sq=function(e,t,r,n,a){var s,i=r-n;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-i/2,",").concat(t+a),s+="L ".concat(e+r-i/2-n,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z")},iq={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oq=function(e){var t=rq(rq({},iq),e),r=Ct.useRef(),n=ZB(Ct.useState(-1),2),a=n[0],s=n[1];Ct.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&s(e)}catch(t){}},[]);var i=t.x,o=t.y,l=t.upperWidth,c=t.lowerWidth,d=t.height,u=t.className,h=t.animationEasing,m=t.animationDuration,p=t.animationBegin,f=t.isUpdateAnimationActive;if(i!==+i||o!==+o||l!==+l||c!==+c||d!==+d||0===l&&0===c||0===d)return null;var x=Vr("recharts-trapezoid",u);return f?At.createElement(_F,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:d,x:i,y:o},duration:m,animationEasing:h,isActive:f},function(e){var n=e.upperWidth,s=e.lowerWidth,i=e.height,o=e.x,l=e.y;return At.createElement(_F,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,easing:h},At.createElement("path",JB({},Kg(t,!0),{className:x,d:sq(o,l,n,s,i),ref:r})))}):At.createElement("g",null,At.createElement("path",JB({},Kg(t,!0),{className:x,d:sq(i,o,l,c,d)})))},lq=["option","shapeType","propTransformer","activeClassName","isActive"];function cq(e){return(cq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dq(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uq(Object(r),!0).forEach(function(t){mq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mq(e,t,r){var n;return n=function(e,t){if("object"!=cq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=cq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==cq(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pq(e,t){return hq(hq({},t),e)}function fq(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return At.createElement(RF,r);case"trapezoid":return At.createElement(oq,r);case"sector":return At.createElement(LR,r);case"symbols":if(function(e){return"symbols"===e}(t))return At.createElement(Vj,r);break;default:return null}}function xq(e){var t,r=e.option,n=e.shapeType,a=e.propTransformer,s=void 0===a?pq:a,i=e.activeClassName,o=void 0===i?"recharts-active-shape":i,l=e.isActive,c=dq(e,lq);if(Ct.isValidElement(r))t=Ct.cloneElement(r,hq(hq({},c),function(e){return Ct.isValidElement(e)?e.props:e}(r)));else if(Wx(r))t=r(c);else if(KB(r)&&!XB(r)){var d=s(r,c);t=At.createElement(fq,{shapeType:n,elementProps:d})}else{var u=c;t=At.createElement(fq,{shapeType:n,elementProps:u})}return l?At.createElement(ab,{className:o},t):t}function yq(e,t){return null!=t&&"trapezoids"in e.props}function vq(e,t){return null!=t&&"sectors"in e.props}function gq(e,t){return null!=t&&"points"in e.props}function bq(e,t){var r,n,a=e.x===(null==t||null===(r=t.labelViewBox)||void 0===r?void 0:r.x)||e.x===t.x,s=e.y===(null==t||null===(n=t.labelViewBox)||void 0===n?void 0:n.y)||e.y===t.y;return a&&s}function jq(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function wq(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function Nq(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=function(e,t){var r;return yq(e,t)?r="trapezoids":vq(e,t)?r="sectors":gq(e,t)&&(r="points"),r}(r,t),s=function(e,t){var r,n;return yq(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:vq(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:gq(e,t)?t.payload:{}}(r,t),i=n.filter(function(e,n){var i=HM(s,e),o=r.props[a].filter(function(e){var n=function(e,t){var r;return yq(e,t)?r=bq:vq(e,t)?r=jq:gq(e,t)&&(r=wq),r}(r,t);return n(e,t)}),l=r.props[a].indexOf(o[o.length-1]);return i&&n===l});return n.indexOf(i[i.length-1])}function Sq(e){return(Sq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _q(){return _q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_q.apply(this,arguments)}function kq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Oq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kq(Object(r),!0).forEach(function(t){Mq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Cq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dq(n.key),n)}}function Aq(e,t,r){return t=Pq(t),function(e,t){if(t&&("object"===Sq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Eq()?Reflect.construct(t,r||[],Pq(e).constructor):t.apply(e,r))}function Eq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Eq=function(){return!!e})()}function Pq(e){return(Pq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tq(e,t){return(Tq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Mq(e,t,r){return(t=Dq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dq(e){var t=function(e,t){if("object"!=Sq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Sq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sq(t)?t:t+""}var Iq=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Mq(r=Aq(this,e,[t]),"pieRef",null),Mq(r,"sectorRefs",[]),Mq(r,"id",gg("recharts-pie-")),Mq(r,"handleAnimationEnd",function(){var e=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Wx(e)&&e()}),Mq(r,"handleAnimationStart",function(){var e=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Wx(e)&&e()}),r.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tq(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t,r){if(At.isValidElement(e))return At.cloneElement(e,t);if(Wx(e))return e(t);var n=Vr("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return At.createElement(YR,_q({},t,{key:r,type:"linear",className:n}))}},{key:"renderLabelItem",value:function(e,t,r){if(At.isValidElement(e))return At.cloneElement(e,t);var n=r;if(Wx(e)&&(n=e(t),At.isValidElement(n)))return n;var a=Vr("recharts-pie-label-text","boolean"==typeof e||Wx(e)?"":e.className);return At.createElement(UC,_q({},t,{alignmentBaseline:"middle",className:a}),n)}}],(r=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.label,a=r.labelLine,s=r.dataKey,i=r.valueKey,o=Kg(this.props,!1),l=Kg(n,!1),c=Kg(a,!1),d=n&&n.offsetRadius||20,u=t.map(function(t,r){var u=(t.startAngle+t.endAngle)/2,h=JI(t.cx,t.cy,t.outerRadius+d,u),m=Oq(Oq(Oq(Oq({},o),t),{},{stroke:"none"},l),{},{index:r,textAnchor:e.getTextAnchor(h.x,t.cx)},h),p=Oq(Oq(Oq(Oq({},o),t),{},{fill:"none",stroke:t.fill},c),{},{index:r,points:[JI(t.cx,t.cy,t.outerRadius,u),h]}),f=s;return Fv(s)&&Fv(i)?f="value":Fv(s)&&(f=i),At.createElement(ab,{key:"label-".concat(t.startAngle,"-").concat(t.endAngle,"-").concat(t.midAngle,"-").concat(r)},a&&e.renderLabelLineItem(a,p,"line"),e.renderLabelItem(n,m,gI(t,f)))});return At.createElement(ab,{className:"recharts-pie-labels"},u)}},{key:"renderSectorsStatically",value:function(e){var t=this,r=this.props,n=r.activeShape,a=r.blendStroke,s=r.inactiveShape;return e.map(function(r,i){if(0===(null==r?void 0:r.startAngle)&&0===(null==r?void 0:r.endAngle)&&1!==e.length)return null;var o=t.isActiveIndex(i),l=s&&t.hasActiveIndex()?s:null,c=o?n:l,d=Oq(Oq({},r),{},{stroke:a?r.fill:r.stroke,tabIndex:-1});return At.createElement(ab,_q({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},Tg(t.props,r,i),{key:"sector-".concat(null==r?void 0:r.startAngle,"-").concat(null==r?void 0:r.endAngle,"-").concat(r.midAngle,"-").concat(i)}),At.createElement(xq,_q({option:c,isActive:o,shapeType:"sector"},d)))})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,r=t.sectors,n=t.isAnimationActive,a=t.animationBegin,s=t.animationDuration,i=t.animationEasing,o=t.animationId,l=this.state,c=l.prevSectors,d=l.prevIsAnimationActive;return At.createElement(_F,{begin:a,duration:s,isActive:n,easing:i,from:{t:0},to:{t:1},key:"pie-".concat(o,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(t){var n=t.t,a=[],s=(r&&r[0]).startAngle;return r.forEach(function(e,t){var r=c&&c[t],i=t>0?Lv(e,"paddingAngle",0):0;if(r){var o=wg(r.endAngle-r.startAngle,e.endAngle-e.startAngle),l=Oq(Oq({},e),{},{startAngle:s+i,endAngle:s+o(n)+i});a.push(l),s=l.endAngle}else{var d=e.endAngle,u=e.startAngle,h=wg(0,d-u)(n),m=Oq(Oq({},e),{},{startAngle:s+i,endAngle:s+h+i});a.push(m),s=m.endAngle}}),At.createElement(ab,null,e.renderSectorsStatically(a))})}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var r=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"ArrowRight":var n=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,r=e.isAnimationActive,n=this.state.prevSectors;return!(r&&t&&t.length)||n&&HM(n,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,r=t.hide,n=t.sectors,a=t.className,s=t.label,i=t.cx,o=t.cy,l=t.innerRadius,c=t.outerRadius,d=t.isAnimationActive,u=this.state.isAnimationFinished;if(r||!n||!n.length||!xg(i)||!xg(o)||!xg(l)||!xg(c))return null;var h=Vr("recharts-pie",a);return At.createElement(ab,{tabIndex:this.props.rootTabIndex,className:h,ref:function(t){e.pieRef=t}},this.renderSectors(),s&&this.renderLabels(n),pR.renderCallByParent(this.props,null,!1),(!d||u)&&CR.renderCallByParent(this.props,n,!1))}}])&&Cq(t.prototype,r),n&&Cq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();aq=Iq,Mq(Iq,"displayName","Pie"),Mq(Iq,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!gO.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),Mq(Iq,"parseDeltaAngle",function(e,t){return pg(t-e)*Math.min(Math.abs(t-e),360)}),Mq(Iq,"getRealPieData",function(e){var t=e.data,r=e.children,n=Kg(e,!1),a=zg(r,iC);return t&&t.length?t.map(function(e,t){return Oq(Oq(Oq({payload:e},n),e),a&&a[t]&&a[t].props)}):a&&a.length?a.map(function(e){return Oq(Oq({},n),e.props)}):[]}),Mq(Iq,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,s=t.height,i=ZI(a,s);return{cx:n+bg(e.cx,a,a/2),cy:r+bg(e.cy,s,s/2),innerRadius:bg(e.innerRadius,i,0),outerRadius:bg(e.outerRadius,i,.8*i),maxRadius:e.maxRadius||Math.sqrt(a*a+s*s)/2}}),Mq(Iq,"getComposedData",function(e){var t=e.item,r=e.offset,n=void 0!==t.type.defaultProps?Oq(Oq({},t.type.defaultProps),t.props):t.props,a=aq.getRealPieData(n);if(!a||!a.length)return null;var s=n.cornerRadius,i=n.startAngle,o=n.endAngle,l=n.paddingAngle,c=n.dataKey,d=n.nameKey,u=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),p=aq.parseCoordinateOfPie(n,r),f=aq.parseDeltaAngle(i,o),x=Math.abs(f),y=c;Fv(c)&&Fv(u)?(sb(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y="value"):Fv(c)&&(sb(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y=u);var v,g,b=a.filter(function(e){return 0!==gI(e,y,0)}).length,j=x-b*m-(x>=360?b:b-1)*l,w=a.reduce(function(e,t){var r=gI(t,y,0);return e+(xg(r)?r:0)},0);w>0&&(v=a.map(function(e,t){var r,n=gI(e,y,0),a=gI(e,d,t),o=(xg(n)?n:0)/w,c=(r=t?g.endAngle+pg(f)*l*(0!==n?1:0):i)+pg(f)*((0!==n?m:0)+o*j),u=(r+c)/2,x=(p.innerRadius+p.outerRadius)/2,v=[{name:a,value:n,payload:e,dataKey:y,type:h}],b=JI(p.cx,p.cy,x,u);return g=Oq(Oq(Oq({percent:o,cornerRadius:s,name:a,tooltipPayload:v,midAngle:u,middleRadius:x,tooltipPosition:b},e),p),{},{value:gI(e,y),startAngle:r,endAngle:c,payload:e,paddingAngle:pg(f)*l})}));return Oq(Oq({},p),{},{sectors:v,data:a})});var Rq=Math.ceil,Lq=Math.max;var Fq=UO,Bq=1/0;var qq=function(e){return e?(e=Fq(e))===Bq||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},$q=function(e,t,r,n){for(var a=-1,s=Lq(Rq((t-e)/(r||1)),0),i=Array(s);s--;)i[n?s:++a]=e,e+=r;return i},zq=zk,Uq=qq;const Vq=Tt(function(e){return function(t,r,n){return n&&"number"!=typeof n&&zq(t,r,n)&&(r=n=void 0),t=Uq(t),void 0===r?(r=t,t=0):r=Uq(r),n=void 0===n?t<r?1:-1:Uq(n),$q(t,r,n,e)}}());function Wq(e){return(Wq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Kq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hq(Object(r),!0).forEach(function(t){Yq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Yq(e,t,r){var n;return n=function(e,t){if("object"!=Wq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Wq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Wq(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gq=["Webkit","Moz","O","ms"];function Xq(e){return(Xq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qq(){return Qq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qq.apply(this,arguments)}function Jq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Zq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jq(Object(r),!0).forEach(function(t){s$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function e$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i$(n.key),n)}}function t$(e,t,r){return t=n$(t),function(e,t){if(t&&("object"===Xq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r$()?Reflect.construct(t,r||[],n$(e).constructor):t.apply(e,r))}function r$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(r$=function(){return!!e})()}function n$(e){return(n$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a$(e,t){return(a$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s$(e,t,r){return(t=i$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i$(e){var t=function(e,t){if("object"!=Xq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Xq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xq(t)?t:t+""}var o$=function(e){return e.changedTouches&&!!e.changedTouches.length},l$=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s$(r=t$(this,e,[t]),"handleDrag",function(e){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(e):r.state.isSlideMoving&&r.handleSlideDrag(e)}),s$(r,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&r.handleDrag(e.changedTouches[0])}),s$(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=r.props,t=e.endIndex,n=e.onDragEnd,a=e.startIndex;null==n||n({endIndex:t,startIndex:a})}),r.detachDragEndListener()}),s$(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),s$(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),s$(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),s$(r,"handleSlideDragStart",function(e){var t=o$(e)?e.changedTouches[0]:e;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a$(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,r=e.y,n=e.width,a=e.height,s=e.stroke,i=Math.floor(r+a/2)-1;return At.createElement(At.Fragment,null,At.createElement("rect",{x:t,y:r,width:n,height:a,fill:s,stroke:"none"}),At.createElement("line",{x1:t+1,y1:i,x2:t+n-1,y2:i,fill:"none",stroke:"#fff"}),At.createElement("line",{x1:t+1,y1:i+2,x2:t+n-1,y2:i+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,r){return At.isValidElement(t)?At.cloneElement(t,r):Wx(t)?t(r):e.renderDefaultTraveller(r)}},{key:"getDerivedStateFromProps",value:function(e,t){var r=e.data,n=e.width,a=e.x,s=e.travellerWidth,i=e.updateId,o=e.startIndex,l=e.endIndex;if(r!==t.prevData||i!==t.prevUpdateId)return Zq({prevData:r,prevTravellerWidth:s,prevUpdateId:i,prevX:a,prevWidth:n},r&&r.length?function(e){var t=e.data,r=e.startIndex,n=e.endIndex,a=e.x,s=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=gA().domain(Vq(0,o)).range([a,a+s-i]),c=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(r),endX:l(n),scale:l,scaleValues:c}}({data:r,width:n,x:a,travellerWidth:s,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(n!==t.prevWidth||a!==t.prevX||s!==t.prevTravellerWidth)){t.scale.range([a,a+n-s]);var c=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:r,prevTravellerWidth:s,prevUpdateId:i,prevX:a,prevWidth:n,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var r=0,n=e.length-1;n-r>1;){var a=Math.floor((r+n)/2);e[a]>t?n=a:r=a}return t>=e[n]?n:r}}],(r=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var r=t.startX,n=t.endX,a=this.state.scaleValues,s=this.props,i=s.gap,o=s.data.length-1,l=Math.min(r,n),c=Math.max(r,n),d=e.getIndexInRange(a,l),u=e.getIndexInRange(a,c);return{startIndex:d-d%i,endIndex:u===o?o:u-u%i}}},{key:"getTextOfTick",value:function(e){var t=this.props,r=t.data,n=t.tickFormatter,a=t.dataKey,s=gI(r[e],a,e);return Wx(n)?n(s,e):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,r=t.slideMoveStartX,n=t.startX,a=t.endX,s=this.props,i=s.x,o=s.width,l=s.travellerWidth,c=s.startIndex,d=s.endIndex,u=s.onChange,h=e.pageX-r;h>0?h=Math.min(h,i+o-l-a,i+o-l-n):h<0&&(h=Math.max(h,i-n,i-a));var m=this.getIndex({startX:n+h,endX:a+h});m.startIndex===c&&m.endIndex===d||!u||u(m),this.setState({startX:n+h,endX:a+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var r=o$(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:r.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,r=t.brushMoveStartX,n=t.movingTravellerId,a=t.endX,s=t.startX,i=this.state[n],o=this.props,l=o.x,c=o.width,d=o.travellerWidth,u=o.onChange,h=o.gap,m=o.data,p={startX:this.state.startX,endX:this.state.endX},f=e.pageX-r;f>0?f=Math.min(f,l+c-d-i):f<0&&(f=Math.max(f,l-i)),p[n]=i+f;var x=this.getIndex(p),y=x.startIndex,v=x.endIndex;this.setState(s$(s$({},n,i+f),"brushMoveStartX",e.pageX),function(){var e;u&&(e=m.length-1,("startX"===n&&(a>s?y%h===0:v%h===0)||a<s&&v===e||"endX"===n&&(a>s?v%h===0:y%h===0)||a>s&&v===e)&&u(x))})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var r=this,n=this.state,a=n.scaleValues,s=n.startX,i=n.endX,o=this.state[t],l=a.indexOf(o);if(-1!==l){var c=l+e;if(!(-1===c||c>=a.length)){var d=a[c];"startX"===t&&d>=i||"endX"===t&&d<=s||this.setState(s$({},t,d),function(){r.props.onChange(r.getIndex({startX:r.state.startX,endX:r.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,a=e.height,s=e.fill,i=e.stroke;return At.createElement("rect",{stroke:i,fill:s,x:t,y:r,width:n,height:a})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,a=e.height,s=e.data,i=e.children,o=e.padding,l=Ct.Children.only(i);return l?At.cloneElement(l,{x:t,y:r,width:n,height:a,margin:o,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(t,r){var n,a,s=this,i=this.props,o=i.y,l=i.travellerWidth,c=i.height,d=i.traveller,u=i.ariaLabel,h=i.data,m=i.startIndex,p=i.endIndex,f=Math.max(t,this.props.x),x=Zq(Zq({},Kg(this.props,!1)),{},{x:f,y:o,width:l,height:c}),y=u||"Min value: ".concat(null===(n=h[m])||void 0===n?void 0:n.name,", Max value: ").concat(null===(a=h[p])||void 0===a?void 0:a.name);return At.createElement(ab,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":t,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),s.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,r))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,x))}},{key:"renderSlide",value:function(e,t){var r=this.props,n=r.y,a=r.height,s=r.stroke,i=r.travellerWidth,o=Math.min(e,t)+i,l=Math.max(Math.abs(t-e)-i,0);return At.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:o,y:n,width:l,height:a})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,r=e.endIndex,n=e.y,a=e.height,s=e.travellerWidth,i=e.stroke,o=this.state,l=o.startX,c=o.endX,d={pointerEvents:"none",fill:i};return At.createElement(ab,{className:"recharts-brush-texts"},At.createElement(UC,Qq({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,c)-5,y:n+a/2},d),this.getTextOfTick(t)),At.createElement(UC,Qq({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,c)+s+5,y:n+a/2},d),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,t=e.data,r=e.className,n=e.children,a=e.x,s=e.y,i=e.width,o=e.height,l=e.alwaysShowText,c=this.state,d=c.startX,u=c.endX,h=c.isTextActive,m=c.isSlideMoving,p=c.isTravellerMoving,f=c.isTravellerFocused;if(!t||!t.length||!xg(a)||!xg(s)||!xg(i)||!xg(o)||i<=0||o<=0)return null;var x=Vr("recharts-brush",r),y=1===At.Children.count(n),v=function(e,t){if(!e)return null;var r=e.replace(/(\w)/,function(e){return e.toUpperCase()}),n=Gq.reduce(function(e,n){return Kq(Kq({},e),{},Yq({},n+r,t))},{});return n[e]=t,n}("userSelect","none");return At.createElement(ab,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:v},this.renderBackground(),y&&this.renderPanorama(),this.renderSlide(d,u),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(u,"endX"),(h||m||p||f||l)&&this.renderText())}}])&&e$(t.prototype,r),n&&e$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();s$(l$,"displayName","Brush"),s$(l$,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var c$=ok;var d$=bw,u$=x_,h$=function(e,t){var r;return c$(e,function(e,n,a){return!(r=t(e,n,a))}),!!r},m$=px,p$=zk;const f$=Tt(function(e,t,r){var n=m$(e)?d$:h$;return r&&p$(e,t,r)&&(t=void 0),n(e,u$(t))});var x$=function(e,t){var r=e.alwaysShow,n=e.ifOverflow;return r&&(n="extendDomain"),n===t},y$=Ak;var v$=function(e,t,r){"__proto__"==t&&y$?y$(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},g$=sk,b$=x_;const j$=Tt(function(e,t){var r={};return t=b$(t),g$(e,function(e,n,a){v$(r,n,t(e,n,a))}),r});var w$=ok;var N$=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0},S$=function(e,t){var r=!0;return w$(e,function(e,n,a){return r=!!t(e,n,a)}),r},_$=x_,k$=px,O$=zk;const C$=Tt(function(e,t,r){var n=k$(e)?N$:S$;return r&&O$(e,t,r)&&(t=void 0),n(e,_$(t))});var A$=["x","y"];function E$(e){return(E$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P$(){return P$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P$.apply(this,arguments)}function T$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function M$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T$(Object(r),!0).forEach(function(t){D$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function D$(e,t,r){var n;return n=function(e,t){if("object"!=E$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==E$(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I$(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function R$(e,t){var r=e.x,n=e.y,a=I$(e,A$),s="".concat(r),i=parseInt(s,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||a.height),d=parseInt(c,10),u="".concat(t.width||a.width),h=parseInt(u,10);return M$(M$(M$(M$(M$({},t),a),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function L$(e){return At.createElement(xq,P$({shapeType:"rectangle",propTransformer:R$,activeClassName:"recharts-active-bar"},e))}var F$,B$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(r,n){if("number"==typeof e)return e;var a=xg(r)||function(e){return Fv(e)}(r);return a?e(r,n):(a||KD(!1),t)}},q$=["value","background"];function $$(e){return($$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z$(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function U$(){return U$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U$.apply(this,arguments)}function V$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function W$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V$(Object(r),!0).forEach(function(t){Q$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function H$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,J$(n.key),n)}}function K$(e,t,r){return t=G$(t),function(e,t){if(t&&("object"===$$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y$()?Reflect.construct(t,r||[],G$(e).constructor):t.apply(e,r))}function Y$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Y$=function(){return!!e})()}function G$(e){return(G$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X$(e,t){return(X$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q$(e,t,r){return(t=J$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J$(e){var t=function(e,t){if("object"!=$$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$$(t)?t:t+""}var Z$=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Q$(t=K$(this,e,[].concat(n)),"state",{isAnimationFinished:!1}),Q$(t,"id",gg("recharts-bar-")),Q$(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()}),Q$(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X$(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],(r=[{key:"renderRectanglesStatically",value:function(e){var t=this,r=this.props,n=r.shape,a=r.dataKey,s=r.activeIndex,i=r.activeBar,o=Kg(this.props,!1);return e&&e.map(function(e,r){var l=r===s,c=l?i:n,d=W$(W$(W$({},o),e),{},{isActive:l,option:c,index:r,dataKey:a,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return At.createElement(ab,U$({className:"recharts-bar-rectangle"},Tg(t.props,e,r),{key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(r)}),At.createElement(L$,d))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,r=t.data,n=t.layout,a=t.isAnimationActive,s=t.animationBegin,i=t.animationDuration,o=t.animationEasing,l=t.animationId,c=this.state.prevData;return At.createElement(_F,{begin:s,duration:i,isActive:a,easing:o,from:{t:0},to:{t:1},key:"bar-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var a=t.t,s=r.map(function(e,t){var r=c&&c[t];if(r){var s=wg(r.x,e.x),i=wg(r.y,e.y),o=wg(r.width,e.width),l=wg(r.height,e.height);return W$(W$({},e),{},{x:s(a),y:i(a),width:o(a),height:l(a)})}if("horizontal"===n){var d=wg(0,e.height)(a);return W$(W$({},e),{},{y:e.y+e.height-d,height:d})}var u=wg(0,e.width)(a);return W$(W$({},e),{},{width:u})});return At.createElement(ab,null,e.renderRectanglesStatically(s))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,r=e.isAnimationActive,n=this.state.prevData;return!(r&&t&&t.length)||n&&HM(n,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,r=t.data,n=t.dataKey,a=t.activeIndex,s=Kg(this.props.background,!1);return r.map(function(t,r){t.value;var i=t.background,o=z$(t,q$);if(!i)return null;var l=W$(W$(W$(W$(W$({},o),{},{fill:"#eee"},i),s),Tg(e.props,t,r)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:n,index:r,className:"recharts-bar-background-rectangle"});return At.createElement(L$,U$({key:"background-bar-".concat(r),option:e.props.background,isActive:r===a},l))})}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.data,a=r.xAxis,s=r.yAxis,i=r.layout,o=zg(r.children,oI);if(!o)return null;var l="vertical"===i?n[0].height/2:n[0].width/2,c=function(e,t){var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:gI(e,t)}},d={clipPath:e?"url(#clipPath-".concat(t,")"):null};return At.createElement(ab,d,o.map(function(e){return At.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:n,xAxis:a,yAxis:s,layout:i,offset:l,dataPointFormatter:c})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,r=e.data,n=e.className,a=e.xAxis,s=e.yAxis,i=e.left,o=e.top,l=e.width,c=e.height,d=e.isAnimationActive,u=e.background,h=e.id;if(t||!r||!r.length)return null;var m=this.state.isAnimationFinished,p=Vr("recharts-bar",n),f=a&&a.allowDataOverflow,x=s&&s.allowDataOverflow,y=f||x,v=Fv(h)?this.id:h;return At.createElement(ab,{className:p},f||x?At.createElement("defs",null,At.createElement("clipPath",{id:"clipPath-".concat(v)},At.createElement("rect",{x:f?i:i-l/2,y:x?o:o-c/2,width:f?l:2*l,height:x?c:2*c}))):null,At.createElement(ab,{className:"recharts-bar-rectangles",clipPath:y?"url(#clipPath-".concat(v,")"):null},u?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(y,v),(!d||m)&&CR.renderCallByParent(this.props,r))}}])&&H$(t.prototype,r),n&&H$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function ez(e){return(ez="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sz(n.key),n)}}function rz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rz(Object(r),!0).forEach(function(t){az(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function az(e,t,r){return(t=sz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sz(e){var t=function(e,t){if("object"!=ez(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ez(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ez(t)?t:t+""}F$=Z$,Q$(Z$,"displayName","Bar"),Q$(Z$,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!gO.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),Q$(Z$,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,s=e.xAxis,i=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,d=e.dataStartIndex,u=e.displayedData,h=e.offset,m=function(e,t){if(!e)return null;for(var r=0,n=e.length;r<n;r++)if(e[r].item===t)return e[r].position;return null}(n,r);if(!m)return null;var p=t.layout,f=r.type.defaultProps,x=void 0!==f?W$(W$({},f),r.props):r.props,y=x.dataKey,v=x.children,g=x.minPointSize,b="horizontal"===p?i:s,j=c?b.scale.domain():null,w=function(e){var t=e.numericAxis,r=t.scale.domain();if("number"===t.type){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]}({numericAxis:b}),N=zg(v,iC),S=u.map(function(e,t){var n,u,h,f,x,v;c?n=function(e,t){if(!t||2!==t.length||!xg(t[0])||!xg(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!xg(e[0])||e[0]<r)&&(a[0]=r),(!xg(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a}(c[d+t],j):(n=gI(e,y),Array.isArray(n)||(n=[w,n]));var b=B$(g,F$.defaultProps.minPointSize)(n[1],t);if("horizontal"===p){var S,_=[i.scale(n[0]),i.scale(n[1])],k=_[0],O=_[1];u=RI({axis:s,ticks:o,bandSize:a,offset:m.offset,entry:e,index:t}),h=null!==(S=null!=O?O:k)&&void 0!==S?S:void 0,f=m.size;var C=k-O;if(x=Number.isNaN(C)?0:C,v={x:u,y:i.y,width:f,height:i.height},Math.abs(b)>0&&Math.abs(x)<Math.abs(b)){var A=pg(x||b)*(Math.abs(b)-Math.abs(x));h-=A,x+=A}}else{var E=[s.scale(n[0]),s.scale(n[1])],P=E[0],T=E[1];if(u=P,h=RI({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:e,index:t}),f=T-P,x=m.size,v={x:s.x,y:h,width:s.width,height:x},Math.abs(b)>0&&Math.abs(f)<Math.abs(b))f+=pg(f||b)*(Math.abs(b)-Math.abs(f))}return W$(W$(W$({},e),{},{x:u,y:h,width:f,height:x,value:c?n:n[1],payload:e,background:v},N&&N[t]&&N[t].props),{},{tooltipPayload:[UI(r,e)],tooltipPosition:{x:u+f/2,y:h+x/2}})});return W$({data:S,layout:p},h)});var iz=function(e,t,r,n,a){var s=e.width,i=e.height,o=e.layout,l=e.children,c=Object.keys(t),d={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:i-r.bottom,bottomMirror:i-r.bottom},u=!!Ug(l,Z$);return c.reduce(function(s,i){var l,c,h,m,p,f=t[i],x=f.orientation,y=f.domain,v=f.padding,g=void 0===v?{}:v,b=f.mirror,j=f.reversed,w="".concat(x).concat(b?"Mirror":"");if("number"===f.type&&("gap"===f.padding||"no-gap"===f.padding)){var N=y[1]-y[0],S=1/0,_=f.categoricalDomain.sort(Sg);if(_.forEach(function(e,t){t>0&&(S=Math.min((e||0)-(_[t-1]||0),S))}),Number.isFinite(S)){var k=S/N,O="vertical"===f.layout?r.height:r.width;if("gap"===f.padding&&(l=k*O/2),"no-gap"===f.padding){var C=bg(e.barCategoryGap,k*O),A=k*O/2;l=A-C-(A-C)/O*C}}}c="xAxis"===n?[r.left+(g.left||0)+(l||0),r.left+r.width-(g.right||0)-(l||0)]:"yAxis"===n?"horizontal"===o?[r.top+r.height-(g.bottom||0),r.top+(g.top||0)]:[r.top+(g.top||0)+(l||0),r.top+r.height-(g.bottom||0)-(l||0)]:f.range,j&&(c=[c[1],c[0]]);var E=AI(f,a,u),P=E.scale,T=E.realScaleType;P.domain(y).range(c),PI(P);var M=DI(P,nz(nz({},f),{},{realScaleType:T}));"xAxis"===n?(p="top"===x&&!b||"bottom"===x&&b,h=r.left,m=d[w]-p*f.height):"yAxis"===n&&(p="left"===x&&!b||"right"===x&&b,h=d[w]-p*f.width,m=r.top);var D=nz(nz(nz({},f),M),{},{realScaleType:T,x:h,y:m,scale:P,width:"xAxis"===n?r.width:f.width,height:"yAxis"===n?r.height:f.height});return D.bandSize=$I(D,M),f.hide||"xAxis"!==n?f.hide||(d[w]+=(p?-1:1)*D.width):d[w]+=(p?-1:1)*D.height,nz(nz({},s),{},az({},i,D))},{})},oz=function(e,t){var r=e.x,n=e.y,a=t.x,s=t.y;return{x:Math.min(r,a),y:Math.min(n,s),width:Math.abs(a-r),height:Math.abs(s-n)}},lz=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,r=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.bandAware,n=t.position;if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a;case"end":var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}],n=[{key:"create",value:function(t){return new e(t)}}],r&&tz(t.prototype,r),n&&tz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();az(lz,"EPS",1e-4);var cz=function(e){var t=Object.keys(e).reduce(function(t,r){return nz(nz({},t),{},az({},r,lz.create(e[r])))},{});return nz(nz({},t),{},{apply:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.bandAware,a=r.position;return j$(e,function(e,r){return t[r].apply(e,{bandAware:n,position:a})})},isInRange:function(e){return C$(e,function(e,r){return t[r].isInRange(e)})}})};var dz=x_,uz=$N,hz=WN;var mz=function(e){return function(t,r,n){var a=Object(t);if(!uz(t)){var s=dz(r);t=hz(t),r=function(e){return s(a[e],e,a)}}var i=e(t,r,n);return i>-1?a[s?t[i]:i]:void 0}},pz=qq;var fz=y_,xz=x_,yz=function(e){var t=pz(e),r=t%1;return t==t?r?t-r:t:0},vz=Math.max;const gz=Tt(mz(function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:yz(r);return a<0&&(a=vz(n+a,0)),fz(e,xz(t),a)}));var bz=dv(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),jz=Ct.createContext(void 0),wz=Ct.createContext(void 0),Nz=Ct.createContext(void 0),Sz=Ct.createContext({}),_z=Ct.createContext(void 0),kz=Ct.createContext(0),Oz=Ct.createContext(0),Cz=function(e){var t=e.state,r=t.xAxisMap,n=t.yAxisMap,a=t.offset,s=e.clipPathId,i=e.children,o=e.width,l=e.height,c=bz(a);return At.createElement(jz.Provider,{value:r},At.createElement(wz.Provider,{value:n},At.createElement(Sz.Provider,{value:a},At.createElement(Nz.Provider,{value:c},At.createElement(_z.Provider,{value:s},At.createElement(kz.Provider,{value:l},At.createElement(Oz.Provider,{value:o},i)))))))},Az=function(e){var t=Ct.useContext(jz);null==t&&KD(!1);var r=t[e];return null==r&&KD(!1),r},Ez=function(e){var t=Ct.useContext(wz);null==t&&KD(!1);var r=t[e];return null==r&&KD(!1),r},Pz=function(){return Ct.useContext(Oz)},Tz=function(){return Ct.useContext(kz)};function Mz(e){return(Mz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zz(n.key),n)}}function Iz(e,t,r){return t=Lz(t),function(e,t){if(t&&("object"===Mz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Rz()?Reflect.construct(t,r||[],Lz(e).constructor):t.apply(e,r))}function Rz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Rz=function(){return!!e})()}function Lz(e){return(Lz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fz(e,t){return(Fz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bz(Object(r),!0).forEach(function(t){$z(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $z(e,t,r){return(t=zz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zz(e){var t=function(e,t){if("object"!=Mz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Mz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mz(t)?t:t+""}function Uz(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vz(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vz(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wz(){return Wz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wz.apply(this,arguments)}function Hz(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,s=e.yAxisId,i=e.shape,o=e.className,l=e.alwaysShow,c=Ct.useContext(_z),d=Az(a),u=Ez(s),h=Ct.useContext(Nz);if(!c||!h)return null;sb(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=function(e,t,r,n,a,s,i,o,l){var c=a.x,d=a.y,u=a.width,h=a.height;if(r){var m=l.y,p=e.y.apply(m,{position:s});if(x$(l,"discard")&&!e.y.isInRange(p))return null;var f=[{x:c+u,y:p},{x:c,y:p}];return"left"===o?f.reverse():f}if(t){var x=l.x,y=e.x.apply(x,{position:s});if(x$(l,"discard")&&!e.x.isInRange(y))return null;var v=[{x:y,y:d+h},{x:y,y:d}];return"top"===i?v.reverse():v}if(n){var g=l.segment.map(function(t){return e.apply(t,{position:s})});return x$(l,"discard")&&f$(g,function(t){return!e.isInRange(t)})?null:g}return null}(cz({x:d.scale,y:u.scale}),yg(t),yg(r),n&&2===n.length,h,e.position,d.orientation,u.orientation,e);if(!m)return null;var p=Uz(m,2),f=p[0],x=f.x,y=f.y,v=p[1],g=v.x,b=v.y,j=qz(qz({clipPath:x$(e,"hidden")?"url(#".concat(c,")"):void 0},Kg(e,!0)),{},{x1:x,y1:y,x2:g,y2:b});return At.createElement(ab,{className:Vr("recharts-reference-line",o)},function(e,t){return At.isValidElement(e)?At.cloneElement(e,t):Wx(e)?e(t):At.createElement("line",Wz({},t,{className:"recharts-reference-line-line"}))}(i,j),pR.renderCallByParent(e,function(e){var t=e.x1,r=e.y1,n=e.x2,a=e.y2;return oz({x:t,y:r},{x:n,y:a})}({x1:x,y1:y,x2:g,y2:b})))}var Kz=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Iz(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fz(e,t)}(e,At.Component),t=e,(r=[{key:"render",value:function(){return At.createElement(Hz,this.props)}}])&&Dz(t.prototype,r),n&&Dz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Yz(){return Yz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yz.apply(this,arguments)}function Gz(e){return(Gz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Qz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xz(Object(r),!0).forEach(function(t){nU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Jz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aU(n.key),n)}}function Zz(e,t,r){return t=tU(t),function(e,t){if(t&&("object"===Gz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,eU()?Reflect.construct(t,r||[],tU(e).constructor):t.apply(e,r))}function eU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(eU=function(){return!!e})()}function tU(e){return(tU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rU(e,t){return(rU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nU(e,t,r){return(t=aU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aU(e){var t=function(e,t){if("object"!=Gz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Gz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gz(t)?t:t+""}$z(Kz,"displayName","ReferenceLine"),$z(Kz,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var sU=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Zz(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rU(e,t)}(e,At.Component),t=e,(r=[{key:"render",value:function(){var t=this.props,r=t.x,n=t.y,a=t.r,s=t.alwaysShow,i=t.clipPathId,o=yg(r),l=yg(n);if(sb(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!o||!l)return null;var c=function(e){var t=e.x,r=e.y,n=e.xAxis,a=e.yAxis,s=cz({x:n.scale,y:a.scale}),i=s.apply({x:t,y:r},{bandAware:!0});return x$(e,"discard")&&!s.isInRange(i)?null:i}(this.props);if(!c)return null;var d=c.x,u=c.y,h=this.props,m=h.shape,p=h.className,f=Qz(Qz({clipPath:x$(this.props,"hidden")?"url(#".concat(i,")"):void 0},Kg(this.props,!0)),{},{cx:d,cy:u});return At.createElement(ab,{className:Vr("recharts-reference-dot",p)},e.renderDot(m,f),pR.renderCallByParent(this.props,{x:d-a,y:u-a,width:2*a,height:2*a}))}}])&&Jz(t.prototype,r),n&&Jz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function iU(){return iU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iU.apply(this,arguments)}function oU(e){return(oU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lU(Object(r),!0).forEach(function(t){fU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function dU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xU(n.key),n)}}function uU(e,t,r){return t=mU(t),function(e,t){if(t&&("object"===oU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,hU()?Reflect.construct(t,r||[],mU(e).constructor):t.apply(e,r))}function hU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(hU=function(){return!!e})()}function mU(e){return(mU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pU(e,t){return(pU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fU(e,t,r){return(t=xU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xU(e){var t=function(e,t){if("object"!=oU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oU(t)?t:t+""}nU(sU,"displayName","ReferenceDot"),nU(sU,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),nU(sU,"renderDot",function(e,t){return At.isValidElement(e)?At.cloneElement(e,t):Wx(e)?e(t):At.createElement(HF,Yz({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))});var yU=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),uU(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pU(e,t)}(e,At.Component),t=e,(r=[{key:"render",value:function(){var t=this.props,r=t.x1,n=t.x2,a=t.y1,s=t.y2,i=t.className,o=t.alwaysShow,l=t.clipPathId;sb(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=yg(r),d=yg(n),u=yg(a),h=yg(s),m=this.props.shape;if(!(c||d||u||h||m))return null;var p=function(e,t,r,n,a){var s=a.x1,i=a.x2,o=a.y1,l=a.y2,c=a.xAxis,d=a.yAxis;if(!c||!d)return null;var u=cz({x:c.scale,y:d.scale}),h={x:e?u.x.apply(s,{position:"start"}):u.x.rangeMin,y:r?u.y.apply(o,{position:"start"}):u.y.rangeMin},m={x:t?u.x.apply(i,{position:"end"}):u.x.rangeMax,y:n?u.y.apply(l,{position:"end"}):u.y.rangeMax};return!x$(a,"discard")||u.isInRange(h)&&u.isInRange(m)?oz(h,m):null}(c,d,u,h,this.props);if(!p&&!m)return null;var f=x$(this.props,"hidden")?"url(#".concat(l,")"):void 0;return At.createElement(ab,{className:Vr("recharts-reference-area",i)},e.renderRect(m,cU(cU({clipPath:f},Kg(this.props,!0)),p)),pR.renderCallByParent(this.props,p))}}])&&dU(t.prototype,r),n&&dU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function vU(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var n=[],a=0;a<e.length;a+=t){if(void 0!==r&&!0!==r(e[a]))return;n.push(e[a])}return n}function gU(e,t,r){return function(e){var t=e.width,r=e.height,n=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=n*Math.PI/180,s=Math.atan(r/t),i=a>s&&a<Math.PI-s?r/Math.sin(a):t/Math.cos(a);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},r)}function bU(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function jU(e){return(jU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function NU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wU(Object(r),!0).forEach(function(t){SU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function SU(e,t,r){var n;return n=function(e,t){if("object"!=jU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=jU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==jU(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _U(e,t,r){var n=e.tick,a=e.ticks,s=e.viewBox,i=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,d=e.unit,u=e.angle;if(!a||!a.length||!n)return[];if(xg(l)||gO.isSsr)return function(e,t){return vU(e,t+1)}(a,"number"==typeof l&&xg(l)?l:0);var h=[],m="top"===o||"bottom"===o?"width":"height",p=d&&"width"===m?pC(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},f=function(e,n){var a=Wx(c)?c(e.value,n):e.value;return"width"===m?gU(pC(a,{fontSize:t,letterSpacing:r}),p,u):pC(a,{fontSize:t,letterSpacing:r})[m]},x=a.length>=2?pg(a[1].coordinate-a[0].coordinate):1,y=function(e,t,r){var n="width"===r,a=e.x,s=e.y,i=e.width,o=e.height;return 1===t?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}(s,x,m);return"equidistantPreserveStart"===l?function(e,t,r,n,a){for(var s,i=(n||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,h=function(){var t=null==n?void 0:n[c];if(void 0===t)return{v:vU(n,d)};var s,i=c,h=function(){return void 0===s&&(s=r(t,i)),s},m=t.coordinate,p=0===c||bU(e,m,h,u,l);p||(c=0,u=o,d+=1),p&&(u=m+e*(h()/2+a),c+=d)};d<=i.length;)if(s=h())return s.v;return[]}(x,y,f,a,i):(h="preserveStart"===l||"preserveStartEnd"===l?function(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end;if(s){var d=n[o-1],u=r(d,o-1),h=e*(d.coordinate+e*u/2-c);i[o-1]=d=NU(NU({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate}),bU(e,d.tickCoord,function(){return u},l,c)&&(c=d.tickCoord-e*(u/2+a),i[o-1]=NU(NU({},d),{},{isShow:!0}))}for(var m=s?o-1:o,p=function(t){var n,s=i[t],o=function(){return void 0===n&&(n=r(s,t)),n};if(0===t){var d=e*(s.coordinate-e*o()/2-l);i[t]=s=NU(NU({},s),{},{tickCoord:d<0?s.coordinate-d*e:s.coordinate})}else i[t]=s=NU(NU({},s),{},{tickCoord:s.coordinate});bU(e,s.tickCoord,o,l,c)&&(l=s.tickCoord+e*(o()/2+a),i[t]=NU(NU({},s),{},{isShow:!0}))},f=0;f<m;f++)p(f);return i}(x,y,f,a,i,"preserveStartEnd"===l):function(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,o=t.start,l=t.end,c=function(t){var n,c=s[t],d=function(){return void 0===n&&(n=r(c,t)),n};if(t===i-1){var u=e*(c.coordinate+e*d()/2-l);s[t]=c=NU(NU({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else s[t]=c=NU(NU({},c),{},{tickCoord:c.coordinate});bU(e,c.tickCoord,d,o,l)&&(l=c.tickCoord-e*(d()/2+a),s[t]=NU(NU({},c),{},{isShow:!0}))},d=i-1;d>=0;d--)c(d);return s}(x,y,f,a,i),h.filter(function(e){return e.isShow}))}fU(yU,"displayName","ReferenceArea"),fU(yU,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),fU(yU,"renderRect",function(e,t){return At.isValidElement(e)?At.cloneElement(e,t):Wx(e)?e(t):At.createElement(RF,iU({},t,{className:"recharts-reference-area-rect"}))});var kU=["viewBox"],OU=["viewBox"],CU=["ticks"];function AU(e){return(AU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EU(){return EU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EU.apply(this,arguments)}function PU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function TU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PU(Object(r),!0).forEach(function(t){BU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function MU(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function DU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qU(n.key),n)}}function IU(e,t,r){return t=LU(t),function(e,t){if(t&&("object"===AU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,RU()?Reflect.construct(t,r||[],LU(e).constructor):t.apply(e,r))}function RU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(RU=function(){return!!e})()}function LU(e){return(LU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FU(e,t){return(FU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function BU(e,t,r){return(t=qU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qU(e){var t=function(e,t){if("object"!=AU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=AU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==AU(t)?t:t+""}var $U=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(r=IU(this,e,[t])).state={fontSize:"",letterSpacing:""},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FU(e,t)}(e,Ct.Component),t=e,n=[{key:"renderTickItem",value:function(e,t,r){var n=Vr(t.className,"recharts-cartesian-axis-tick-value");return At.isValidElement(e)?At.cloneElement(e,TU(TU({},t),{},{className:n})):Wx(e)?e(TU(TU({},t),{},{className:n})):At.createElement(UC,EU({},t,{className:"recharts-cartesian-axis-tick-value"}),r)}}],(r=[{key:"shouldComponentUpdate",value:function(e,t){var r=e.viewBox,n=MU(e,kU),a=this.props,s=a.viewBox,i=MU(a,OU);return!_g(r,s)||!_g(n,i)||!_g(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,r,n,a,s,i,o=this.props,l=o.x,c=o.y,d=o.width,u=o.height,h=o.orientation,m=o.tickSize,p=o.mirror,f=o.tickMargin,x=p?-1:1,y=e.tickSize||m,v=xg(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=r=e.coordinate,i=(n=(a=c+ +!p*u)-x*y)-x*f,s=v;break;case"left":n=a=e.coordinate,s=(t=(r=l+ +!p*d)-x*y)-x*f,i=v;break;case"right":n=a=e.coordinate,s=(t=(r=l+ +p*d)+x*y)+x*f,i=v;break;default:t=r=e.coordinate,i=(n=(a=c+ +p*u)+x*y)+x*f,s=v}return{line:{x1:t,y1:n,x2:r,y2:a},tick:{x:s,y:i}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,r=t.orientation,n=t.mirror;switch(r){case"left":e=n?"start":"end";break;case"right":e=n?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,r=e.mirror,n="end";switch(t){case"left":case"right":n="middle";break;case"top":n=r?"start":"end";break;default:n=r?"end":"start"}return n}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,a=e.height,s=e.orientation,i=e.mirror,o=e.axisLine,l=TU(TU(TU({},Kg(this.props,!1)),Kg(o,!1)),{},{fill:"none"});if("top"===s||"bottom"===s){var c=+("top"===s&&!i||"bottom"===s&&i);l=TU(TU({},l),{},{x1:t,y1:r+c*a,x2:t+n,y2:r+c*a})}else{var d=+("left"===s&&!i||"right"===s&&i);l=TU(TU({},l),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return At.createElement("line",EU({},l,{className:Vr("recharts-cartesian-axis-line",Lv(o,"className"))}))}},{key:"renderTicks",value:function(t,r,n){var a=this,s=this.props,i=s.tickLine,o=s.stroke,l=s.tick,c=s.tickFormatter,d=s.unit,u=_U(TU(TU({},this.props),{},{ticks:t}),r,n),h=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),p=Kg(this.props,!1),f=Kg(l,!1),x=TU(TU({},p),{},{fill:"none"},Kg(i,!1)),y=u.map(function(t,r){var n=a.getTickLineCoord(t),s=n.line,y=n.tick,v=TU(TU(TU(TU({textAnchor:h,verticalAnchor:m},p),{},{stroke:"none",fill:o},f),y),{},{index:r,payload:t,visibleTicksCount:u.length,tickFormatter:c});return At.createElement(ab,EU({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},Tg(a.props,t,r)),i&&At.createElement("line",EU({},x,s,{className:Vr("recharts-cartesian-axis-tick-line",Lv(i,"className"))})),l&&e.renderTickItem(l,v,"".concat(Wx(c)?c(t.value,r):t.value).concat(d||"")))});return At.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var e=this,t=this.props,r=t.axisLine,n=t.width,a=t.height,s=t.ticksGenerator,i=t.className;if(t.hide)return null;var o=this.props,l=o.ticks,c=MU(o,CU),d=l;return Wx(s)&&(d=l&&l.length>0?s(this.props):s(c)),n<=0||a<=0||!d||!d.length?null:At.createElement(ab,{className:Vr("recharts-cartesian-axis",i),ref:function(t){e.layerReference=t}},r&&this.renderAxisLine(),this.renderTicks(d,this.state.fontSize,this.state.letterSpacing),pR.renderCallByParent(this.props))}}])&&DU(t.prototype,r),n&&DU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();BU($U,"displayName","CartesianAxis"),BU($U,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var zU=["x1","y1","x2","y2","key"],UU=["offset"];function VU(e){return(VU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function HU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?WU(Object(r),!0).forEach(function(t){KU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function KU(e,t,r){var n;return n=function(e,t){if("object"!=VU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=VU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==VU(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YU(){return YU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YU.apply(this,arguments)}function GU(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var XU=function(e){var t=e.fill;if(!t||"none"===t)return null;var r=e.fillOpacity,n=e.x,a=e.y,s=e.width,i=e.height,o=e.ry;return At.createElement("rect",{x:n,y:a,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function QU(e,t){var r;if(At.isValidElement(e))r=At.cloneElement(e,t);else if(Wx(e))r=e(t);else{var n=t.x1,a=t.y1,s=t.x2,i=t.y2,o=t.key,l=GU(t,zU),c=Kg(l,!1);c.offset;var d=GU(c,UU);r=At.createElement("line",YU({},d,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:o}))}return r}function JU(e){var t=e.x,r=e.width,n=e.horizontal,a=void 0===n||n,s=e.horizontalPoints;if(!a||!s||!s.length)return null;var i=s.map(function(n,s){var i=HU(HU({},e),{},{x1:t,y1:n,x2:t+r,y2:n,key:"line-".concat(s),index:s});return QU(a,i)});return At.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function ZU(e){var t=e.y,r=e.height,n=e.vertical,a=void 0===n||n,s=e.verticalPoints;if(!a||!s||!s.length)return null;var i=s.map(function(n,s){var i=HU(HU({},e),{},{x1:n,y1:t,x2:n,y2:t+r,key:"line-".concat(s),index:s});return QU(a,i)});return At.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function eV(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,s=e.width,i=e.height,o=e.horizontalPoints,l=e.horizontal;if(!(void 0===l||l)||!t||!t.length)return null;var c=o.map(function(e){return Math.round(e+a-a)}).sort(function(e,t){return e-t});a!==c[0]&&c.unshift(0);var d=c.map(function(e,o){var l=!c[o+1]?a+i-e:c[o+1]-e;if(l<=0)return null;var d=o%t.length;return At.createElement("rect",{key:"react-".concat(o),y:e,x:n,height:l,width:s,stroke:"none",fill:t[d],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return At.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function tV(e){var t=e.vertical,r=void 0===t||t,n=e.verticalFill,a=e.fillOpacity,s=e.x,i=e.y,o=e.width,l=e.height,c=e.verticalPoints;if(!r||!n||!n.length)return null;var d=c.map(function(e){return Math.round(e+s-s)}).sort(function(e,t){return e-t});s!==d[0]&&d.unshift(0);var u=d.map(function(e,t){var r=!d[t+1]?s+o-e:d[t+1]-e;if(r<=0)return null;var c=t%n.length;return At.createElement("rect",{key:"react-".concat(t),x:e,y:i,width:r,height:l,stroke:"none",fill:n[c],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return At.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var rV=function(e,t){var r=e.xAxis,n=e.width,a=e.height,s=e.offset;return _I(_U(HU(HU(HU({},$U.defaultProps),r),{},{ticks:kI(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},nV=function(e,t){var r=e.yAxis,n=e.width,a=e.height,s=e.offset;return _I(_U(HU(HU(HU({},$U.defaultProps),r),{},{ticks:kI(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},aV={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function sV(e){var t,r,n,a,s,i,o,l,c=Pz(),d=Tz(),u=Ct.useContext(Sz),h=HU(HU({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:aV.stroke,fill:null!==(r=e.fill)&&void 0!==r?r:aV.fill,horizontal:null!==(n=e.horizontal)&&void 0!==n?n:aV.horizontal,horizontalFill:null!==(a=e.horizontalFill)&&void 0!==a?a:aV.horizontalFill,vertical:null!==(s=e.vertical)&&void 0!==s?s:aV.vertical,verticalFill:null!==(i=e.verticalFill)&&void 0!==i?i:aV.verticalFill,x:xg(e.x)?e.x:u.left,y:xg(e.y)?e.y:u.top,width:xg(e.width)?e.width:u.width,height:xg(e.height)?e.height:u.height}),m=h.x,p=h.y,f=h.width,x=h.height,y=h.syncWithTicks,v=h.horizontalValues,g=h.verticalValues,b=(o=Ct.useContext(jz),jg(o)),j=(l=Ct.useContext(wz),gz(l,function(e){return C$(e.domain,Number.isFinite)})||jg(l));if(!xg(f)||f<=0||!xg(x)||x<=0||!xg(m)||m!==+m||!xg(p)||p!==+p)return null;var w=h.verticalCoordinatesGenerator||rV,N=h.horizontalCoordinatesGenerator||nV,S=h.horizontalPoints,_=h.verticalPoints;if((!S||!S.length)&&Wx(N)){var k=v&&v.length,O=N({yAxis:j?HU(HU({},j),{},{ticks:k?v:j.ticks}):void 0,width:c,height:d,offset:u},!!k||y);sb(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(VU(O),"]")),Array.isArray(O)&&(S=O)}if((!_||!_.length)&&Wx(w)){var C=g&&g.length,A=w({xAxis:b?HU(HU({},b),{},{ticks:C?g:b.ticks}):void 0,width:c,height:d,offset:u},!!C||y);sb(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(VU(A),"]")),Array.isArray(A)&&(_=A)}return At.createElement("g",{className:"recharts-cartesian-grid"},At.createElement(XU,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),At.createElement(JU,YU({},h,{offset:u,horizontalPoints:S,xAxis:b,yAxis:j})),At.createElement(ZU,YU({},h,{offset:u,verticalPoints:_,xAxis:b,yAxis:j})),At.createElement(eV,YU({},h,{horizontalPoints:S})),At.createElement(tV,YU({},h,{verticalPoints:_})))}sV.displayName="CartesianGrid";var iV=["type","layout","connectNulls","ref"],oV=["key"];function lV(e){return(lV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cV(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dV(){return dV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dV.apply(this,arguments)}function uV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uV(Object(r),!0).forEach(function(t){bV(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uV(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mV(e){return function(e){if(Array.isArray(e))return pV(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return pV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pV(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jV(n.key),n)}}function xV(e,t,r){return t=vV(t),function(e,t){if(t&&("object"===lV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,yV()?Reflect.construct(t,r||[],vV(e).constructor):t.apply(e,r))}function yV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(yV=function(){return!!e})()}function vV(e){return(vV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gV(e,t){return(gV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bV(e,t,r){return(t=jV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jV(e){var t=function(e,t){if("object"!=lV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lV(t)?t:t+""}var wV=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return bV(t=xV(this,e,[].concat(n)),"state",{isAnimationFinished:!0,totalLength:0}),bV(t,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),bV(t,"getStrokeDasharray",function(r,n,a){var s=a.reduce(function(e,t){return e+t});if(!s)return t.generateSimpleStrokeDasharray(n,r);for(var i=Math.floor(r/s),o=r%s,l=n-r,c=[],d=0,u=0;d<a.length;u+=a[d],++d)if(u+a[d]>o){c=[].concat(mV(a.slice(0,d)),[o-u]);break}var h=c.length%2==0?[0,l]:[l];return[].concat(mV(e.repeat(a,i)),mV(c),h).map(function(e){return"".concat(e,"px")}).join(", ")}),bV(t,"id",gg("recharts-line-")),bV(t,"pathRef",function(e){t.mainCurve=e}),bV(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),bV(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gV(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var r=e.length%2!=0?[].concat(mV(e),[0]):e,n=[],a=0;a<t;++a)n=[].concat(mV(n),mV(r));return n}},{key:"renderDotItem",value:function(e,t){var r;if(At.isValidElement(e))r=At.cloneElement(e,t);else if(Wx(e))r=e(t);else{var n=t.key,a=cV(t,oV),s=Vr("recharts-line-dot","boolean"!=typeof e?e.className:"");r=At.createElement(HF,dV({key:n},a,{className:s}))}return r}}],(r=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.points,a=r.xAxis,s=r.yAxis,i=r.layout,o=zg(r.children,oI);if(!o)return null;var l=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:gI(e.payload,t)}},c={clipPath:e?"url(#clipPath-".concat(t,")"):null};return At.createElement(ab,c,o.map(function(e){return At.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:n,xAxis:a,yAxis:s,layout:i,dataPointFormatter:l})}))}},{key:"renderDots",value:function(t,r,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.dot,i=a.points,o=a.dataKey,l=Kg(this.props,!1),c=Kg(s,!0),d=i.map(function(t,r){var n=hV(hV(hV({key:"dot-".concat(r),r:3},l),c),{},{index:r,cx:t.x,cy:t.y,value:t.value,dataKey:o,payload:t.payload,points:i});return e.renderDotItem(s,n)}),u={clipPath:t?"url(#clipPath-".concat(r?"":"dots-").concat(n,")"):null};return At.createElement(ab,dV({className:"recharts-line-dots",key:"dots"},u),d)}},{key:"renderCurveStatically",value:function(e,t,r,n){var a=this.props,s=a.type,i=a.layout,o=a.connectNulls;a.ref;var l=cV(a,iV),c=hV(hV(hV({},Kg(l,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(r,")"):null,points:e},n),{},{type:s,layout:i,connectNulls:o});return At.createElement(YR,dV({},c,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var r=this,n=this.props,a=n.points,s=n.strokeDasharray,i=n.isAnimationActive,o=n.animationBegin,l=n.animationDuration,c=n.animationEasing,d=n.animationId,u=n.animateNewValues,h=n.width,m=n.height,p=this.state,f=p.prevPoints,x=p.totalLength;return At.createElement(_F,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var i=n.t;if(f){var o=f.length/a.length,l=a.map(function(e,t){var r=Math.floor(t*o);if(f[r]){var n=f[r],a=wg(n.x,e.x),s=wg(n.y,e.y);return hV(hV({},e),{},{x:a(i),y:s(i)})}if(u){var l=wg(2*h,e.x),c=wg(m/2,e.y);return hV(hV({},e),{},{x:l(i),y:c(i)})}return hV(hV({},e),{},{x:e.x,y:e.y})});return r.renderCurveStatically(l,e,t)}var c,d=wg(0,x)(i);if(s){var p="".concat(s).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});c=r.getStrokeDasharray(d,x,p)}else c=r.generateSimpleStrokeDasharray(x,d);return r.renderCurveStatically(a,e,t,{strokeDasharray:c})})}},{key:"renderCurve",value:function(e,t){var r=this.props,n=r.points,a=r.isAnimationActive,s=this.state,i=s.prevPoints,o=s.totalLength;return a&&n&&n.length&&(!i&&o>0||!HM(i,n))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(n,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,a=t.points,s=t.className,i=t.xAxis,o=t.yAxis,l=t.top,c=t.left,d=t.width,u=t.height,h=t.isAnimationActive,m=t.id;if(r||!a||!a.length)return null;var p=this.state.isAnimationFinished,f=1===a.length,x=Vr("recharts-line",s),y=i&&i.allowDataOverflow,v=o&&o.allowDataOverflow,g=y||v,b=Fv(m)?this.id:m,j=null!==(e=Kg(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},w=j.r,N=void 0===w?3:w,S=j.strokeWidth,_=void 0===S?2:S,k=(Hg(n)?n:{}).clipDot,O=void 0===k||k,C=2*N+_;return At.createElement(ab,{className:x},y||v?At.createElement("defs",null,At.createElement("clipPath",{id:"clipPath-".concat(b)},At.createElement("rect",{x:y?c:c-d/2,y:v?l:l-u/2,width:y?d:2*d,height:v?u:2*u})),!O&&At.createElement("clipPath",{id:"clipPath-dots-".concat(b)},At.createElement("rect",{x:c-C/2,y:l-C/2,width:d+C,height:u+C}))):null,!f&&this.renderCurve(g,b),this.renderErrorBar(g,b),(f||n)&&this.renderDots(g,O,b),(!h||p)&&CR.renderCallByParent(this.props,a))}}])&&fV(t.prototype,r),n&&fV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();bV(wV,"displayName","Line"),bV(wV,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!gO.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),bV(wV,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,s=e.yAxisTicks,i=e.dataKey,o=e.bandSize,l=e.displayedData,c=e.offset,d=t.layout;return hV({points:l.map(function(e,t){var l=gI(e,i);return"horizontal"===d?{x:II({axis:r,ticks:a,bandSize:o,entry:e,index:t}),y:Fv(l)?null:n.scale(l),value:l,payload:e}:{x:Fv(l)?null:r.scale(l),y:II({axis:n,ticks:s,bandSize:o,entry:e,index:t}),value:l,payload:e}}),layout:d},c)});var NV,SV=["layout","type","stroke","connectNulls","isRange","ref"],_V=["key"];function kV(e){return(kV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OV(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function CV(){return CV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CV.apply(this,arguments)}function AV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function EV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AV(Object(r),!0).forEach(function(t){RV(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AV(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function PV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LV(n.key),n)}}function TV(e,t,r){return t=DV(t),function(e,t){if(t&&("object"===kV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,MV()?Reflect.construct(t,r||[],DV(e).constructor):t.apply(e,r))}function MV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(MV=function(){return!!e})()}function DV(e){return(DV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IV(e,t){return(IV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function RV(e,t,r){return(t=LV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LV(e){var t=function(e,t){if("object"!=kV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=kV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kV(t)?t:t+""}var FV=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return RV(t=TV(this,e,[].concat(n)),"state",{isAnimationFinished:!0}),RV(t,"id",gg("recharts-area-")),RV(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),Wx(e)&&e()}),RV(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),Wx(e)&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IV(e,t)}(e,Ct.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],(r=[{key:"renderDots",value:function(t,r,n){var a=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(a&&!s)return null;var i=this.props,o=i.dot,l=i.points,c=i.dataKey,d=Kg(this.props,!1),u=Kg(o,!0),h=l.map(function(t,r){var n=EV(EV(EV({key:"dot-".concat(r),r:3},d),u),{},{index:r,cx:t.x,cy:t.y,dataKey:c,value:t.value,payload:t.payload,points:l});return e.renderDotItem(o,n)}),m={clipPath:t?"url(#clipPath-".concat(r?"":"dots-").concat(n,")"):null};return At.createElement(ab,CV({className:"recharts-area-dots"},m),h)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,r=t.baseLine,n=t.points,a=t.strokeWidth,s=n[0].x,i=n[n.length-1].x,o=e*Math.abs(s-i),l=TM(n.map(function(e){return e.y||0}));return xg(r)&&"number"==typeof r?l=Math.max(r,l):r&&Array.isArray(r)&&r.length&&(l=Math.max(TM(r.map(function(e){return e.y||0})),l)),xg(l)?At.createElement("rect",{x:s<i?s:s-o,y:0,width:o,height:Math.floor(l+(a?parseInt("".concat(a),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,r=t.baseLine,n=t.points,a=t.strokeWidth,s=n[0].y,i=n[n.length-1].y,o=e*Math.abs(s-i),l=TM(n.map(function(e){return e.x||0}));return xg(r)&&"number"==typeof r?l=Math.max(r,l):r&&Array.isArray(r)&&r.length&&(l=Math.max(TM(r.map(function(e){return e.x||0})),l)),xg(l)?At.createElement("rect",{x:0,y:s<i?s:s-o,width:l+(a?parseInt("".concat(a),10):1),height:Math.floor(o)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,r,n){var a=this.props,s=a.layout,i=a.type,o=a.stroke,l=a.connectNulls,c=a.isRange;a.ref;var d=OV(a,SV);return At.createElement(ab,{clipPath:r?"url(#clipPath-".concat(n,")"):null},At.createElement(YR,CV({},Kg(d,!0),{points:e,connectNulls:l,type:i,baseLine:t,layout:s,stroke:"none",className:"recharts-area-area"})),"none"!==o&&At.createElement(YR,CV({},Kg(this.props,!1),{className:"recharts-area-curve",layout:s,type:i,connectNulls:l,fill:"none",points:e})),"none"!==o&&c&&At.createElement(YR,CV({},Kg(this.props,!1),{className:"recharts-area-curve",layout:s,type:i,connectNulls:l,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e,t){var r=this,n=this.props,a=n.points,s=n.baseLine,i=n.isAnimationActive,o=n.animationBegin,l=n.animationDuration,c=n.animationEasing,d=n.animationId,u=this.state,h=u.prevPoints,m=u.prevBaseLine;return At.createElement(_F,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},key:"area-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var i=n.t;if(h){var o,l=h.length/a.length,c=a.map(function(e,t){var r=Math.floor(t*l);if(h[r]){var n=h[r],a=wg(n.x,e.x),s=wg(n.y,e.y);return EV(EV({},e),{},{x:a(i),y:s(i)})}return e});return o=xg(s)&&"number"==typeof s?wg(m,s)(i):Fv(s)||mg(s)?wg(m,0)(i):s.map(function(e,t){var r=Math.floor(t*l);if(m[r]){var n=m[r],a=wg(n.x,e.x),s=wg(n.y,e.y);return EV(EV({},e),{},{x:a(i),y:s(i)})}return e}),r.renderAreaStatically(c,o,e,t)}return At.createElement(ab,null,At.createElement("defs",null,At.createElement("clipPath",{id:"animationClipPath-".concat(t)},r.renderClipRect(i))),At.createElement(ab,{clipPath:"url(#animationClipPath-".concat(t,")")},r.renderAreaStatically(a,s,e,t)))})}},{key:"renderArea",value:function(e,t){var r=this.props,n=r.points,a=r.baseLine,s=r.isAnimationActive,i=this.state,o=i.prevPoints,l=i.prevBaseLine,c=i.totalLength;return s&&n&&n.length&&(!o&&c>0||!HM(o,n)||!HM(l,a))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(n,a,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,a=t.points,s=t.className,i=t.top,o=t.left,l=t.xAxis,c=t.yAxis,d=t.width,u=t.height,h=t.isAnimationActive,m=t.id;if(r||!a||!a.length)return null;var p=this.state.isAnimationFinished,f=1===a.length,x=Vr("recharts-area",s),y=l&&l.allowDataOverflow,v=c&&c.allowDataOverflow,g=y||v,b=Fv(m)?this.id:m,j=null!==(e=Kg(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},w=j.r,N=void 0===w?3:w,S=j.strokeWidth,_=void 0===S?2:S,k=(Hg(n)?n:{}).clipDot,O=void 0===k||k,C=2*N+_;return At.createElement(ab,{className:x},y||v?At.createElement("defs",null,At.createElement("clipPath",{id:"clipPath-".concat(b)},At.createElement("rect",{x:y?o:o-d/2,y:v?i:i-u/2,width:y?d:2*d,height:v?u:2*u})),!O&&At.createElement("clipPath",{id:"clipPath-dots-".concat(b)},At.createElement("rect",{x:o-C/2,y:i-C/2,width:d+C,height:u+C}))):null,f?null:this.renderArea(g,b),(n||f)&&this.renderDots(g,O,b),(!h||p)&&CR.renderCallByParent(this.props,a))}}])&&PV(t.prototype,r),n&&PV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function BV(e){return(BV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HV(n.key),n)}}function $V(e,t,r){return t=UV(t),function(e,t){if(t&&("object"===BV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zV()?Reflect.construct(t,r||[],UV(e).constructor):t.apply(e,r))}function zV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(zV=function(){return!!e})()}function UV(e){return(UV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VV(e,t){return(VV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function WV(e,t,r){return(t=HV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HV(e){var t=function(e,t){if("object"!=BV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=BV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BV(t)?t:t+""}function KV(){return KV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KV.apply(this,arguments)}function YV(e){var t=e.xAxisId,r=Pz(),n=Tz(),a=Az(t);return null==a?null:Ct.createElement($U,KV({},a,{className:Vr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return kI(e,!0)}}))}NV=FV,RV(FV,"displayName","Area"),RV(FV,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!gO.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),RV(FV,"getBaseValue",function(e,t,r,n){var a=e.layout,s=e.baseValue,i=t.props.baseValue,o=null!=i?i:s;if(xg(o)&&"number"==typeof o)return o;var l="horizontal"===a?n:r,c=l.scale.domain();if("number"===l.type){var d=Math.max(c[0],c[1]),u=Math.min(c[0],c[1]);return"dataMin"===o?u:"dataMax"===o||d<0?d:Math.max(Math.min(c[0],c[1]),0)}return"dataMin"===o?c[0]:"dataMax"===o?c[1]:c[0]}),RV(FV,"getComposedData",function(e){var t,r=e.props,n=e.item,a=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,m=e.offset,p=r.layout,f=d&&d.length,x=NV.getBaseValue(r,n,a,s),y="horizontal"===p,v=!1,g=h.map(function(e,t){var r;f?r=d[u+t]:(r=gI(e,c),Array.isArray(r)?v=!0:r=[x,r]);var n=null==r[1]||f&&null==gI(e,c);return y?{x:II({axis:a,ticks:i,bandSize:l,entry:e,index:t}),y:n?null:s.scale(r[1]),value:r,payload:e}:{x:n?null:a.scale(r[1]),y:II({axis:s,ticks:o,bandSize:l,entry:e,index:t}),value:r,payload:e}});return t=f||v?g.map(function(e){var t=Array.isArray(e.value)?e.value[0]:null;return y?{x:e.x,y:null!=t&&null!=e.y?s.scale(t):null}:{x:null!=t?a.scale(t):null,y:e.y}}):y?s.scale(x):a.scale(x),EV({points:g,baseLine:t,layout:p,isRange:v},m)}),RV(FV,"renderDotItem",function(e,t){var r;if(At.isValidElement(e))r=At.cloneElement(e,t);else if(Wx(e))r=e(t);else{var n=Vr("recharts-area-dot","boolean"!=typeof e?e.className:""),a=t.key,s=OV(t,_V);r=At.createElement(HF,CV({},s,{key:a,className:n}))}return r});var GV=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$V(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VV(e,t)}(e,Ct.Component),t=e,(r=[{key:"render",value:function(){return Ct.createElement(YV,this.props)}}])&&qV(t.prototype,r),n&&qV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function XV(e){return(XV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nW(n.key),n)}}function JV(e,t,r){return t=eW(t),function(e,t){if(t&&("object"===XV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ZV()?Reflect.construct(t,r||[],eW(e).constructor):t.apply(e,r))}function ZV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ZV=function(){return!!e})()}function eW(e){return(eW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tW(e,t){return(tW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rW(e,t,r){return(t=nW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nW(e){var t=function(e,t){if("object"!=XV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=XV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XV(t)?t:t+""}function aW(){return aW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aW.apply(this,arguments)}WV(GV,"displayName","XAxis"),WV(GV,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var sW=function(e){var t=e.yAxisId,r=Pz(),n=Tz(),a=Ez(t);return null==a?null:Ct.createElement($U,aW({},a,{className:Vr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return kI(e,!0)}}))},iW=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),JV(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tW(e,t)}(e,Ct.Component),t=e,(r=[{key:"render",value:function(){return Ct.createElement(sW,this.props)}}])&&QV(t.prototype,r),n&&QV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function oW(e){return function(e){if(Array.isArray(e))return lW(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return lW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lW(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}rW(iW,"displayName","YAxis"),rW(iW,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var cW=function(e,t,r,n,a){var s=zg(e,Kz),i=zg(e,sU),o=[].concat(oW(s),oW(i)),l=zg(e,yU),c="".concat(n,"Id"),d=n[0],u=t;if(o.length&&(u=o.reduce(function(e,t){if(t.props[c]===r&&x$(t.props,"extendDomain")&&xg(t.props[d])){var n=t.props[d];return[Math.min(e[0],n),Math.max(e[1],n)]}return e},u)),l.length){var h="".concat(d,"1"),m="".concat(d,"2");u=l.reduce(function(e,t){if(t.props[c]===r&&x$(t.props,"extendDomain")&&xg(t.props[h])&&xg(t.props[m])){var n=t.props[h],a=t.props[m];return[Math.min(e[0],n,a),Math.max(e[1],n,a)]}return e},u)}return a&&a.length&&(u=a.reduce(function(e,t){return xg(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},u)),u},dW={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new a(n,s||e,i),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,s=n.length,i=new Array(s);a<s;a++)i[a]=n[a].fn;return i},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,a,s,i){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,a),!0;case 5:return d.fn.call(d.context,t,n,a,s),!0;case 6:return d.fn.call(d.context,t,n,a,s,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,m=d.length;for(c=0;c<m;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,a);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,a){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||a&&!o.once||n&&o.context!==n||i(this,s);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||a&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:i(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(dW);var uW=new(Tt(dW.exports)),hW="recharts.syncMouseEvents";function mW(e){return(mW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xW(n.key),n)}}function fW(e,t,r){return(t=xW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xW(e){var t=function(e,t){if("object"!=mW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mW(t)?t:t+""}var yW=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),fW(this,"activeIndex",0),fW(this,"coordinateList",[]),fW(this,"layout","horizontal")},(t=[{key:"setDetails",value:function(e){var t,r=e.coordinateList,n=void 0===r?null:r,a=e.container,s=void 0===a?null:a,i=e.layout,o=void 0===i?null:i,l=e.offset,c=void 0===l?null:l,d=e.mouseHandlerCallback,u=void 0===d?null:d;this.coordinateList=null!==(t=null!=n?n:this.coordinateList)&&void 0!==t?t:[],this.container=null!=s?s:this.container,this.layout=null!=o?o:this.layout,this.offset=null!=c?c:this.offset,this.mouseHandlerCallback=null!=u?u:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var r=this.container.getBoundingClientRect(),n=r.x,a=r.y,s=r.height,i=this.coordinateList[this.activeIndex].coordinate,o=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=n+i+o,d=a+this.offset.top+s/2+l;this.mouseHandlerCallback({pageX:c,pageY:d})}}}])&&pW(e.prototype,t),r&&pW(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function vW(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,s=e.endAngle;return{points:[JI(t,r,n,a),JI(t,r,n,s)],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function gW(e,t,r){var n,a,s,i;if("horizontal"===e)s=n=t.x,a=r.top,i=r.top+r.height;else if("vertical"===e)i=a=t.y,n=r.left,s=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return vW(t);var o=t.cx,l=t.cy,c=t.innerRadius,d=t.outerRadius,u=t.angle,h=JI(o,l,c,u),m=JI(o,l,d,u);n=h.x,a=h.y,s=m.x,i=m.y}return[{x:n,y:a},{x:s,y:i}]}function bW(e){return(bW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jW(Object(r),!0).forEach(function(t){NW(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function NW(e,t,r){var n;return n=function(e,t){if("object"!=bW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==bW(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SW(e){var t,r,n,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,h=e.layout,m=e.chartName,p=null!==(t=a.props.cursor)&&void 0!==t?t:null===(r=a.type.defaultProps)||void 0===r?void 0:r.cursor;if(!a||!p||!i||!o||"ScatterChart"!==m&&"axis"!==s)return null;var f=YR;if("ScatterChart"===m)n=o,f=eB;else if("BarChart"===m)n=function(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-a,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(h,o,c,u),f=RF;else if("radial"===h){var x=vW(o),y=x.cx,v=x.cy,g=x.radius;n={cx:y,cy:v,startAngle:x.startAngle,endAngle:x.endAngle,innerRadius:g,outerRadius:g},f=LR}else n={points:gW(h,o,c)},f=YR;var b=wW(wW(wW(wW({stroke:"#ccc",pointerEvents:"none"},c),n),Kg(p,!1)),{},{payload:l,payloadIndex:d,className:Vr("recharts-tooltip-cursor",p.className)});return Ct.isValidElement(p)?Ct.cloneElement(p,b):Ct.createElement(f,b)}var _W=["item"],kW=["children","className","width","height","style","compact","title","desc"];function OW(e){return(OW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CW(){return CW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CW.apply(this,arguments)}function AW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||LW(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EW(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function PW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zW(n.key),n)}}function TW(e,t,r){return t=DW(t),function(e,t){if(t&&("object"===OW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,MW()?Reflect.construct(t,r||[],DW(e).constructor):t.apply(e,r))}function MW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(MW=function(){return!!e})()}function DW(e){return(DW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IW(e,t){return(IW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function RW(e){return function(e){if(Array.isArray(e))return FW(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||LW(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LW(e,t){if(e){if("string"==typeof e)return FW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?FW(e,t):void 0}}function FW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function BW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?BW(Object(r),!0).forEach(function(t){$W(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $W(e,t,r){return(t=zW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zW(e){var t=function(e,t){if("object"!=OW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=OW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OW(t)?t:t+""}var UW={xAxis:["bottom","top"],yAxis:["left","right"]},VW={width:"100%",height:"100%"},WW={x:0,y:0};function HW(e){return e}var KW=function(e,t){var r=t.graphicalItems,n=t.dataStartIndex,a=t.dataEndIndex,s=(null!=r?r:[]).reduce(function(e,t){var r=t.props.data;return r&&r.length?[].concat(RW(e),RW(r)):e},[]);return s.length>0?s:e&&e.length&&xg(n)&&xg(a)?e.slice(n,a+1):[]};function YW(e){return"number"===e?[0,"auto"]:void 0}var GW=function(e,t,r,n){var a=e.graphicalItems,s=e.tooltipAxis,i=KW(t,e);return r<0||!a||!a.length||r>=i.length?null:a.reduce(function(a,o){var l,c,d=null!==(l=o.props.data)&&void 0!==l?l:t;(d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1)),s.dataKey&&!s.allowDuplicatedCategory)?c=Ng(void 0===d?i:d,s.dataKey,n):c=d&&d[r]||i[r];return c?[].concat(RW(a),[UI(o,c)]):a},[])},XW=function(e,t,r,n){var a=n||{x:e.chartX,y:e.chartY},s=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(a,r),i=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,i=null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0;if(i<=1)return 0;if(a&&"angleAxis"===a.axisType&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var o=a.range,l=0;l<i;l++){var c=l>0?n[l-1].coordinate:n[i-1].coordinate,d=n[l].coordinate,u=l>=i-1?n[0].coordinate:n[l+1].coordinate,h=void 0;if(pg(d-c)!==pg(u-d)){var m=[];if(pg(u-d)===pg(o[1]-o[0])){h=u;var p=d+o[1]-o[0];m[0]=Math.min(p,(p+c)/2),m[1]=Math.max(p,(p+c)/2)}else{h=c;var f=u+o[1]-o[0];m[0]=Math.min(d,(f+d)/2),m[1]=Math.max(d,(f+d)/2)}var x=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>x[0]&&e<=x[1]||e>=m[0]&&e<=m[1]){s=n[l].index;break}}else{var y=Math.min(c,u),v=Math.max(c,u);if(e>(y+d)/2&&e<=(v+d)/2){s=n[l].index;break}}}else for(var g=0;g<i;g++)if(0===g&&e<=(r[g].coordinate+r[g+1].coordinate)/2||g>0&&g<i-1&&e>(r[g].coordinate+r[g-1].coordinate)/2&&e<=(r[g].coordinate+r[g+1].coordinate)/2||g===i-1&&e>(r[g].coordinate+r[g-1].coordinate)/2){s=r[g].index;break}return s}(s,i,l,o);if(c>=0&&l){var d=l[c]&&l[c].value,u=GW(e,t,c,d),h=function(e,t,r,n){var a=t.find(function(e){return e&&e.index===r});if(a){if("horizontal"===e)return{x:a.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:a.coordinate};if("centric"===e){var s=a.coordinate,i=n.radius;return qW(qW(qW({},n),JI(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,l=n.angle;return qW(qW(qW({},n),JI(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return WW}(r,i,c,a);return{activeTooltipIndex:c,activeLabel:d,activePayload:u,activeCoordinate:h}}return null},QW=function(e,t){var r=t.axes,n=t.graphicalItems,a=t.axisType,s=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=e.stackOffset,h=SI(c,a);return r.reduce(function(t,r){var m,p=void 0!==r.type.defaultProps?qW(qW({},r.type.defaultProps),r.props):r.props,f=p.type,x=p.dataKey,y=p.allowDataOverflow,v=p.allowDuplicatedCategory,g=p.scale,b=p.ticks,j=p.includeHidden,w=p[s];if(t[w])return t;var N,S,_,k=KW(e.data,{graphicalItems:n.filter(function(e){var t;return(s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s])===w}),dataStartIndex:o,dataEndIndex:l}),O=k.length;(function(e,t,r){if("number"===r&&!0===t&&Array.isArray(e)){var n=null==e?void 0:e[0],a=null==e?void 0:e[1];if(n&&a&&xg(n)&&xg(a))return!0}return!1})(p.domain,y,f)&&(N=qI(p.domain,null,y),!h||"number"!==f&&"auto"===g||(_=bI(k,x,"category")));var C=YW(f);if(!N||0===N.length){var A,E=null!==(A=p.domain)&&void 0!==A?A:C;if(x){if(N=bI(k,x,f),"category"===f&&h){var P=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1}(N);v&&P?(S=N,N=Vq(0,O)):v||(N=zI(E,N,r).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(RW(e),[t])},[]))}else if("category"===f)N=v?N.filter(function(e){return""!==e&&!Fv(e)}):zI(E,N,r).reduce(function(e,t){return e.indexOf(t)>=0||""===t||Fv(t)?e:[].concat(RW(e),[t])},[]);else if("number"===f){var T=function(e,t,r,n,a){var s=t.map(function(t){return wI(e,t,r,a,n)}).filter(function(e){return!Fv(e)});return s&&s.length?s.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null}(k,n.filter(function(e){var t,r,n=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],a="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===w&&(j||!a)}),x,a,c);T&&(N=T)}!h||"number"!==f&&"auto"===g||(_=bI(k,x,"category"))}else N=h?Vq(0,O):i&&i[w]&&i[w].hasStack&&"number"===f?"expand"===u?[0,1]:LI(i[w].stackGroups,o,l):NI(k,n.filter(function(e){var t=s in e.props?e.props[s]:e.type.defaultProps[s],r="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===w&&(j||!r)}),f,c,!0);if("number"===f)N=cW(d,N,w,a,b),E&&(N=qI(E,N,y));else if("category"===f&&E){var M=E;N.every(function(e){return M.indexOf(e)>=0})&&(N=M)}}return qW(qW({},t),{},$W({},w,qW(qW({},p),{},{axisType:a,domain:N,categoricalDomain:_,duplicateDomain:S,originalDomain:null!==(m=p.domain)&&void 0!==m?m:C,isCategorical:h,layout:c})))},{})},JW=function(e,t){var r=t.axisType,n=void 0===r?"xAxis":r,a=t.AxisComp,s=t.graphicalItems,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.children,d="".concat(n,"Id"),u=zg(c,a),h={};return u&&u.length?h=QW(e,{axes:u,graphicalItems:s,axisType:n,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l}):s&&s.length&&(h=function(e,t){var r=t.graphicalItems,n=t.Axis,a=t.axisType,s=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=KW(e.data,{graphicalItems:r,dataStartIndex:o,dataEndIndex:l}),h=u.length,m=SI(c,a),p=-1;return r.reduce(function(e,t){var f,x=(void 0!==t.type.defaultProps?qW(qW({},t.type.defaultProps),t.props):t.props)[s],y=YW("number");return e[x]?e:(p++,m?f=Vq(0,h):i&&i[x]&&i[x].hasStack?(f=LI(i[x].stackGroups,o,l),f=cW(d,f,x,a)):(f=qI(y,NI(u,r.filter(function(e){var t,r,n=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],a="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===x&&!a}),"number",c),n.defaultProps.allowDataOverflow),f=cW(d,f,x,a)),qW(qW({},e),{},$W({},x,qW(qW({axisType:a},n.defaultProps),{},{hide:!0,orientation:Lv(UW,"".concat(a,".").concat(p%2),null),domain:f,originalDomain:y,isCategorical:m,layout:c}))))},{})}(e,{Axis:a,graphicalItems:s,axisType:n,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l})),h},ZW=function(e){var t=e.children,r=e.defaultShowTooltip,n=Ug(t,l$),a=0,s=0;return e.data&&0!==e.data.length&&(s=e.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(a=n.props.startIndex),n.props.endIndex>=0&&(s=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:Boolean(r)}},eH=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},tH=function(e,t){var r=e.props,n=(e.graphicalItems,e.xAxisMap),a=void 0===n?{}:n,s=e.yAxisMap,i=void 0===s?{}:s,o=r.width,l=r.height,c=r.children,d=r.margin||{},u=Ug(c,l$),h=Ug(c,X_),m=Object.keys(i).reduce(function(e,t){var r=i[t],n=r.orientation;return r.mirror||r.hide?e:qW(qW({},e),{},$W({},n,e[n]+r.width))},{left:d.left||0,right:d.right||0}),p=Object.keys(a).reduce(function(e,t){var r=a[t],n=r.orientation;return r.mirror||r.hide?e:qW(qW({},e),{},$W({},n,Lv(e,"".concat(n))+r.height))},{top:d.top||0,bottom:d.bottom||0}),f=qW(qW({},p),m),x=f.bottom;u&&(f.bottom+=u.props.height||l$.defaultProps.height),h&&t&&(f=function(e,t,r,n){var a=r.children,s=r.width,i=r.margin,o=s-(i.left||0)-(i.right||0),l=hI({children:a,legendWidth:o});if(l){var c=n||{},d=c.width,u=c.height,h=l.align,m=l.verticalAlign,p=l.layout;if(("vertical"===p||"horizontal"===p&&"middle"===m)&&"center"!==h&&xg(e[h]))return yI(yI({},e),{},vI({},h,e[h]+(d||0)));if(("horizontal"===p||"vertical"===p&&"center"===h)&&"middle"!==m&&xg(e[m]))return yI(yI({},e),{},vI({},m,e[m]+(u||0)))}return e}(f,0,r,t));var y=o-f.left-f.right,v=l-f.top-f.bottom;return qW(qW({brushBottom:x},f),{},{width:Math.max(y,0),height:Math.max(v,0)})},rH=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},nH=function(e){var t=e.chartName,r=e.GraphicalChild,n=e.defaultTooltipEventType,a=void 0===n?"axis":n,s=e.validateTooltipEventTypes,i=void 0===s?["axis"]:s,o=e.axisComponents,l=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,u=function(e,t){var r=t.graphicalItems,n=t.stackGroups,a=t.offset,s=t.updateId,i=t.dataStartIndex,l=t.dataEndIndex,c=e.barSize,d=e.layout,u=e.barGap,h=e.barCategoryGap,m=e.maxBarSize,p=eH(d),f=p.numericAxisName,x=p.cateAxisName,y=function(e){return!(!e||!e.length)&&e.some(function(e){var t=Fg(e&&e.type);return t&&t.indexOf("Bar")>=0})}(r),v=[];return r.forEach(function(r,p){var g=KW(e.data,{graphicalItems:[r],dataStartIndex:i,dataEndIndex:l}),b=void 0!==r.type.defaultProps?qW(qW({},r.type.defaultProps),r.props):r.props,j=b.dataKey,w=b.maxBarSize,N=b["".concat(f,"Id")],S=b["".concat(x,"Id")],_=o.reduce(function(e,r){var n=t["".concat(r.axisType,"Map")],a=b["".concat(r.axisType,"Id")];n&&n[a]||"zAxis"===r.axisType||KD(!1);var s=n[a];return qW(qW({},e),{},$W($W({},r.axisType,s),"".concat(r.axisType,"Ticks"),kI(s)))},{}),k=_[x],O=_["".concat(x,"Ticks")],C=n&&n[N]&&n[N].hasStack&&function(e,t){var r,n=(null!==(r=e.type)&&void 0!==r&&r.defaultProps?yI(yI({},e.type.defaultProps),e.props):e.props).stackId;if(yg(n)){var a=t[n];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null}(r,n[N].stackGroups),A=Fg(r.type).indexOf("Bar")>=0,E=$I(k,O),P=[],T=y&&function(e){var t=e.barSize,r=e.totalSize,n=e.stackGroups,a=void 0===n?{}:n;if(!a)return{};for(var s={},i=Object.keys(a),o=0,l=i.length;o<l;o++)for(var c=a[i[o]].stackGroups,d=Object.keys(c),u=0,h=d.length;u<h;u++){var m=c[d[u]],p=m.items,f=m.cateAxisId,x=p.filter(function(e){return Fg(e.type).indexOf("Bar")>=0});if(x&&x.length){var y=x[0].type.defaultProps,v=void 0!==y?yI(yI({},y),x[0].props):x[0].props,g=v.barSize,b=v[f];s[b]||(s[b]=[]);var j=Fv(g)?t:g;s[b].push({item:x[0],stackList:x.slice(1),barSize:Fv(j)?void 0:bg(j,r,0)})}}return s}({barSize:c,stackGroups:n,totalSize:rH(_,x)});if(A){var M,D,I=Fv(w)?m:w,R=null!==(M=null!==(D=$I(k,O,!0))&&void 0!==D?D:I)&&void 0!==M?M:0;P=function(e){var t=e.barGap,r=e.barCategoryGap,n=e.bandSize,a=e.sizeList,s=void 0===a?[]:a,i=e.maxBarSize,o=s.length;if(o<1)return null;var l,c=bg(t,n,0,!0),d=[];if(s[0].barSize===+s[0].barSize){var u=!1,h=n/o,m=s.reduce(function(e,t){return e+t.barSize||0},0);(m+=(o-1)*c)>=n&&(m-=(o-1)*c,c=0),m>=n&&h>0&&(u=!0,m=o*(h*=.9));var p={offset:((n-m)/2|0)-c,size:0};l=s.reduce(function(e,t){var r={item:t.item,position:{offset:p.offset+p.size+c,size:u?h:t.barSize}},n=[].concat(pI(e),[r]);return p=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:p})}),n},d)}else{var f=bg(r,n,0,!0);n-2*f-(o-1)*c<=0&&(c=0);var x=(n-2*f-(o-1)*c)/o;x>1&&(x>>=0);var y=i===+i?Math.min(x,i):x;l=s.reduce(function(e,t,r){var n=[].concat(pI(e),[{item:t.item,position:{offset:f+(x+c)*r+(x-y)/2,size:y}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:n[n.length-1].position})}),n},d)}return l}({barGap:u,barCategoryGap:h,bandSize:R!==E?R:E,sizeList:T[S],maxBarSize:I}),R!==E&&(P=P.map(function(e){return qW(qW({},e),{},{position:qW(qW({},e.position),{},{offset:e.position.offset-R/2})})}))}var L,F,B=r&&r.type&&r.type.getComposedData;B&&v.push({props:qW(qW({},B(qW(qW({},_),{},{displayedData:g,props:e,dataKey:j,item:r,bandSize:E,barPosition:P,offset:a,stackedData:C,layout:d,dataStartIndex:i,dataEndIndex:l}))),{},$W($W($W({key:r.key||"item-".concat(p)},f,_[f]),x,_[x]),"animationId",s)),childIndex:(L=r,F=e.children,$g(F).indexOf(L)),item:r})}),v},h=function(e,n){var a=e.props,s=e.dataStartIndex,i=e.dataEndIndex,l=e.updateId;if(!Vg({props:a}))return null;var d=a.children,h=a.layout,m=a.stackOffset,p=a.data,f=a.reverseStackOrder,x=eH(h),y=x.numericAxisName,v=x.cateAxisName,g=zg(d,r),b=function(e,t,r,n,a,s){if(!e)return null;var i=(s?t.reverse():t).reduce(function(e,t){var a,s=null!==(a=t.type)&&void 0!==a&&a.defaultProps?yI(yI({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(s.hide)return e;var o=s[r],l=e[o]||{hasStack:!1,stackGroups:{}};if(yg(i)){var c=l.stackGroups[i]||{numericAxisId:r,cateAxisId:n,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[i]=c}else l.stackGroups[gg("_stackId_")]={numericAxisId:r,cateAxisId:n,items:[t]};return yI(yI({},e),{},vI({},o,l))},{});return Object.keys(i).reduce(function(t,s){var o=i[s];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce(function(t,s){var i=o.stackGroups[s];return yI(yI({},t),{},vI({},s,{numericAxisId:r,cateAxisId:n,items:i.items,stackedData:MI(e,i.items,a)}))},{})),yI(yI({},t),{},vI({},s,o))},{})}(p,g,"".concat(y,"Id"),"".concat(v,"Id"),m,f),j=o.reduce(function(e,t){var r="".concat(t.axisType,"Map");return qW(qW({},e),{},$W({},r,JW(a,qW(qW({},t),{},{graphicalItems:g,stackGroups:t.axisType===y&&b,dataStartIndex:s,dataEndIndex:i}))))},{}),w=tH(qW(qW({},j),{},{props:a,graphicalItems:g}),null==n?void 0:n.legendBBox);Object.keys(j).forEach(function(e){j[e]=c(a,j[e],w,e.replace("Map",""),t)});var N,S,_=j["".concat(v,"Map")],k=(N=jg(_),{tooltipTicks:S=kI(N,!1,!0),orderedTooltipTicks:Hk(S,function(e){return e.coordinate}),tooltipAxis:N,tooltipAxisBandSize:$I(N,S)}),O=u(a,qW(qW({},j),{},{dataStartIndex:s,dataEndIndex:i,updateId:l,graphicalItems:g,stackGroups:b,offset:w}));return qW(qW({formattedGraphicalItems:O,graphicalItems:g,offset:w,stackGroups:b},k),j)},m=function(){function e(r){var n,a,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$W(s=TW(this,e,[r]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),$W(s,"accessibilityManager",new yW),$W(s,"handleLegendBBoxUpdate",function(e){if(e){var t=s.state,r=t.dataStartIndex,n=t.dataEndIndex,a=t.updateId;s.setState(qW({legendBBox:e},h({props:s.props,dataStartIndex:r,dataEndIndex:n,updateId:a},qW(qW({},s.state),{},{legendBBox:e}))))}}),$W(s,"handleReceiveSyncEvent",function(e,t,r){if(s.props.syncId===e){if(r===s.eventEmitterSymbol&&"function"!=typeof s.props.syncMethod)return;s.applySyncEvent(t)}}),$W(s,"handleBrushChange",function(e){var t=e.startIndex,r=e.endIndex;if(t!==s.state.dataStartIndex||r!==s.state.dataEndIndex){var n=s.state.updateId;s.setState(function(){return qW({dataStartIndex:t,dataEndIndex:r},h({props:s.props,dataStartIndex:t,dataEndIndex:r,updateId:n},s.state))}),s.triggerSyncEvent({dataStartIndex:t,dataEndIndex:r})}}),$W(s,"handleMouseEnter",function(e){var t=s.getMouseInfo(e);if(t){var r=qW(qW({},t),{},{isTooltipActive:!0});s.setState(r),s.triggerSyncEvent(r);var n=s.props.onMouseEnter;Wx(n)&&n(r,e)}}),$W(s,"triggeredAfterMouseMove",function(e){var t=s.getMouseInfo(e),r=t?qW(qW({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};s.setState(r),s.triggerSyncEvent(r);var n=s.props.onMouseMove;Wx(n)&&n(r,e)}),$W(s,"handleItemMouseEnter",function(e){s.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),$W(s,"handleItemMouseLeave",function(){s.setState(function(){return{isTooltipActive:!1}})}),$W(s,"handleMouseMove",function(e){e.persist(),s.throttleTriggeredAfterMouseMove(e)}),$W(s,"handleMouseLeave",function(e){s.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};s.setState(t),s.triggerSyncEvent(t);var r=s.props.onMouseLeave;Wx(r)&&r(t,e)}),$W(s,"handleOuterEvent",function(e){var t,r=function(e){var t=e&&e.type;return t&&Lg[t]?Lg[t]:null}(e),n=Lv(s.props,"".concat(r));r&&Wx(n)&&n(null!==(t=/.*touch.*/i.test(r)?s.getMouseInfo(e.changedTouches[0]):s.getMouseInfo(e))&&void 0!==t?t:{},e)}),$W(s,"handleClick",function(e){var t=s.getMouseInfo(e);if(t){var r=qW(qW({},t),{},{isTooltipActive:!0});s.setState(r),s.triggerSyncEvent(r);var n=s.props.onClick;Wx(n)&&n(r,e)}}),$W(s,"handleMouseDown",function(e){var t=s.props.onMouseDown;Wx(t)&&t(s.getMouseInfo(e),e)}),$W(s,"handleMouseUp",function(e){var t=s.props.onMouseUp;Wx(t)&&t(s.getMouseInfo(e),e)}),$W(s,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),$W(s,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseDown(e.changedTouches[0])}),$W(s,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseUp(e.changedTouches[0])}),$W(s,"handleDoubleClick",function(e){var t=s.props.onDoubleClick;Wx(t)&&t(s.getMouseInfo(e),e)}),$W(s,"handleContextMenu",function(e){var t=s.props.onContextMenu;Wx(t)&&t(s.getMouseInfo(e),e)}),$W(s,"triggerSyncEvent",function(e){void 0!==s.props.syncId&&uW.emit(hW,s.props.syncId,e,s.eventEmitterSymbol)}),$W(s,"applySyncEvent",function(e){var t=s.props,r=t.layout,n=t.syncMethod,a=s.state.updateId,i=e.dataStartIndex,o=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)s.setState(qW({dataStartIndex:i,dataEndIndex:o},h({props:s.props,dataStartIndex:i,dataEndIndex:o,updateId:a},s.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,d=e.activeTooltipIndex,u=s.state,m=u.offset,p=u.tooltipTicks;if(!m)return;if("function"==typeof n)d=n(p,e);else if("value"===n){d=-1;for(var f=0;f<p.length;f++)if(p[f].value===e.activeLabel){d=f;break}}var x=qW(qW({},m),{},{x:m.left,y:m.top}),y=Math.min(l,x.x+x.width),v=Math.min(c,x.y+x.height),g=p[d]&&p[d].value,b=GW(s.state,s.props.data,d),j=p[d]?{x:"horizontal"===r?p[d].coordinate:y,y:"horizontal"===r?v:p[d].coordinate}:WW;s.setState(qW(qW({},e),{},{activeLabel:g,activeCoordinate:j,activePayload:b,activeTooltipIndex:d}))}else s.setState(e)}),$W(s,"renderCursor",function(e){var r,n=s.state,a=n.isTooltipActive,i=n.activeCoordinate,o=n.activePayload,l=n.offset,c=n.activeTooltipIndex,d=n.tooltipAxisBandSize,u=s.getTooltipEventType(),h=null!==(r=e.props.active)&&void 0!==r?r:a,m=s.props.layout,p=e.key||"_recharts-cursor";return At.createElement(SW,{key:p,activeCoordinate:i,activePayload:o,activeTooltipIndex:c,chartName:t,element:e,isActive:h,layout:m,offset:l,tooltipAxisBandSize:d,tooltipEventType:u})}),$W(s,"renderPolarAxis",function(e,t,r){var n=Lv(e,"type.axisType"),a=Lv(s.state,"".concat(n,"Map")),i=e.type.defaultProps,o=void 0!==i?qW(qW({},i),e.props):e.props,l=a&&a[o["".concat(n,"Id")]];return Ct.cloneElement(e,qW(qW({},l),{},{className:Vr(n,l.className),key:e.key||"".concat(t,"-").concat(r),ticks:kI(l,!0)}))}),$W(s,"renderPolarGrid",function(e){var t=e.props,r=t.radialLines,n=t.polarAngles,a=t.polarRadius,i=s.state,o=i.radiusAxisMap,l=i.angleAxisMap,c=jg(o),d=jg(l),u=d.cx,h=d.cy,m=d.innerRadius,p=d.outerRadius;return Ct.cloneElement(e,{polarAngles:Array.isArray(n)?n:kI(d,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(a)?a:kI(c,!0).map(function(e){return e.coordinate}),cx:u,cy:h,innerRadius:m,outerRadius:p,key:e.key||"polar-grid",radialLines:r})}),$W(s,"renderLegend",function(){var e=s.state.formattedGraphicalItems,t=s.props,r=t.children,n=t.width,a=t.height,i=s.props.margin||{},o=n-(i.left||0)-(i.right||0),c=hI({children:r,formattedGraphicalItems:e,legendWidth:o,legendContent:l});if(!c)return null;var d=c.item,u=EW(c,_W);return Ct.cloneElement(d,qW(qW({},u),{},{chartWidth:n,chartHeight:a,margin:i,onBBoxUpdate:s.handleLegendBBoxUpdate}))}),$W(s,"renderTooltip",function(){var e,t=s.props,r=t.children,n=t.accessibilityLayer,a=Ug(r,PO);if(!a)return null;var i=s.state,o=i.isTooltipActive,l=i.activeCoordinate,c=i.activePayload,d=i.activeLabel,u=i.offset,h=null!==(e=a.props.active)&&void 0!==e?e:o;return Ct.cloneElement(a,{viewBox:qW(qW({},u),{},{x:u.left,y:u.top}),active:h,label:d,payload:h?c:[],coordinate:l,accessibilityLayer:n})}),$W(s,"renderBrush",function(e){var t=s.props,r=t.margin,n=t.data,a=s.state,i=a.offset,o=a.dataStartIndex,l=a.dataEndIndex,c=a.updateId;return Ct.cloneElement(e,{key:e.key||"_recharts-brush",onChange:CI(s.handleBrushChange,e.props.onChange),data:n,x:xg(e.props.x)?e.props.x:i.left,y:xg(e.props.y)?e.props.y:i.top+i.height+i.brushBottom-(r.bottom||0),width:xg(e.props.width)?e.props.width:i.width,startIndex:o,endIndex:l,updateId:"brush-".concat(c)})}),$W(s,"renderReferenceElement",function(e,t,r){if(!e)return null;var n=s.clipPathId,a=s.state,i=a.xAxisMap,o=a.yAxisMap,l=a.offset,c=e.type.defaultProps||{},d=e.props,u=d.xAxisId,h=void 0===u?c.xAxisId:u,m=d.yAxisId,p=void 0===m?c.yAxisId:m;return Ct.cloneElement(e,{key:e.key||"".concat(t,"-").concat(r),xAxis:i[h],yAxis:o[p],viewBox:{x:l.left,y:l.top,width:l.width,height:l.height},clipPathId:n})}),$W(s,"renderActivePoints",function(t){var r=t.item,n=t.activePoint,a=t.basePoint,s=t.childIndex,i=t.isRange,o=[],l=r.props.key,c=void 0!==r.item.type.defaultProps?qW(qW({},r.item.type.defaultProps),r.item.props):r.item.props,d=c.activeDot,u=qW(qW({index:s,dataKey:c.dataKey,cx:n.x,cy:n.y,r:4,fill:jI(r.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value},Kg(d,!1)),Pg(d));return o.push(e.renderActiveDot(d,u,"".concat(l,"-activePoint-").concat(s))),a?o.push(e.renderActiveDot(d,qW(qW({},u),{},{cx:a.x,cy:a.y}),"".concat(l,"-basePoint-").concat(s))):i&&o.push(null),o}),$W(s,"renderGraphicChild",function(e,t,r){var n=s.filterFormatItem(e,t,r);if(!n)return null;var a=s.getTooltipEventType(),i=s.state,o=i.isTooltipActive,l=i.tooltipAxis,c=i.activeTooltipIndex,d=i.activeLabel,u=Ug(s.props.children,PO),h=n.props,m=h.points,p=h.isRange,f=h.baseLine,x=void 0!==n.item.type.defaultProps?qW(qW({},n.item.type.defaultProps),n.item.props):n.item.props,y=x.activeDot,v=x.hide,g=x.activeBar,b=x.activeShape,j=Boolean(!v&&o&&u&&(y||g||b)),w={};"axis"!==a&&u&&"click"===u.props.trigger?w={onClick:CI(s.handleItemMouseEnter,e.props.onClick)}:"axis"!==a&&(w={onMouseLeave:CI(s.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:CI(s.handleItemMouseEnter,e.props.onMouseEnter)});var N=Ct.cloneElement(e,qW(qW({},n.props),w));if(j){if(!(c>=0)){var S,_=(null!==(S=s.getItemByXY(s.state.activeCoordinate))&&void 0!==S?S:{graphicalItem:N}).graphicalItem,k=_.item,O=void 0===k?e:k,C=_.childIndex,A=qW(qW(qW({},n.props),w),{},{activeIndex:C});return[Ct.cloneElement(O,A),null,null]}var E,P;if(l.dataKey&&!l.allowDuplicatedCategory){var T="function"==typeof l.dataKey?function(e){return"function"==typeof l.dataKey?l.dataKey(e.payload):null}:"payload.".concat(l.dataKey.toString());E=Ng(m,T,d),P=p&&f&&Ng(f,T,d)}else E=null==m?void 0:m[c],P=p&&f&&f[c];if(b||g){var M=void 0!==e.props.activeIndex?e.props.activeIndex:c;return[Ct.cloneElement(e,qW(qW(qW({},n.props),w),{},{activeIndex:M})),null,null]}if(!Fv(E))return[N].concat(RW(s.renderActivePoints({item:n,activePoint:E,basePoint:P,childIndex:c,isRange:p})))}return p?[N,null,null]:[N,null]}),$W(s,"renderCustomized",function(e,t,r){return Ct.cloneElement(e,qW(qW({key:"recharts-customized-".concat(r)},s.props),s.state))}),$W(s,"renderMap",{CartesianGrid:{handler:HW,once:!0},ReferenceArea:{handler:s.renderReferenceElement},ReferenceLine:{handler:HW},ReferenceDot:{handler:s.renderReferenceElement},XAxis:{handler:HW},YAxis:{handler:HW},Brush:{handler:s.renderBrush,once:!0},Bar:{handler:s.renderGraphicChild},Line:{handler:s.renderGraphicChild},Area:{handler:s.renderGraphicChild},Radar:{handler:s.renderGraphicChild},RadialBar:{handler:s.renderGraphicChild},Scatter:{handler:s.renderGraphicChild},Pie:{handler:s.renderGraphicChild},Funnel:{handler:s.renderGraphicChild},Tooltip:{handler:s.renderCursor,once:!0},PolarGrid:{handler:s.renderPolarGrid,once:!0},PolarAngleAxis:{handler:s.renderPolarAxis},PolarRadiusAxis:{handler:s.renderPolarAxis},Customized:{handler:s.renderCustomized}}),s.clipPathId="".concat(null!==(n=r.id)&&void 0!==n?n:gg("recharts"),"-clip"),s.throttleTriggeredAfterMouseMove=JO(s.triggeredAfterMouseMove,null!==(a=r.throttleDelay)&&void 0!==a?a:1e3/60),s.state={},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IW(e,t)}(e,Ct.Component),r=e,n=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,r=e.data,n=e.height,a=e.layout,s=Ug(t,PO);if(s){var i=s.props.defaultIndex;if(!("number"!=typeof i||i<0||i>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[i]&&this.state.tooltipTicks[i].value,l=GW(this.state,r,i,o),c=this.state.tooltipTicks[i].coordinate,d=(this.state.offset.top+n)/2,u="horizontal"===a?{x:c,y:d}:{y:c,x:d},h=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});h&&(u=qW(qW({},u),h.props.points[i].tooltipPosition),l=h.props.points[i].tooltipPayload);var m={activeTooltipIndex:i,isTooltipActive:!0,activeLabel:o,activePayload:l,activeCoordinate:u};this.setState(m),this.renderCursor(s),this.accessibilityManager.setIndex(i)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(r=this.props.margin.left)&&void 0!==r?r:0,top:null!==(n=this.props.margin.top)&&void 0!==n?n:0}}),null):null;var r,n}},{key:"componentDidUpdate",value:function(e){Yg([Ug(e.children,PO)],[Ug(this.props.children,PO)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=Ug(this.props.children,PO);if(e&&"boolean"==typeof e.props.shared){var t=e.props.shared?"axis":"item";return i.indexOf(t)>=0?t:a}return a}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,r=this.container,n=r.getBoundingClientRect(),a={top:(t=n).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},s={chartX:Math.round(e.pageX-a.left),chartY:Math.round(e.pageY-a.top)},i=n.width/r.offsetWidth||1,o=this.inRange(s.chartX,s.chartY,i);if(!o)return null;var l=this.state,c=l.xAxisMap,d=l.yAxisMap,u=this.getTooltipEventType(),h=XW(this.state,this.props.data,this.props.layout,o);if("axis"!==u&&c&&d){var m=jg(c).scale,p=jg(d).scale,f=m&&m.invert?m.invert(s.chartX):null,x=p&&p.invert?p.invert(s.chartY):null;return qW(qW({},s),{},{xValue:f,yValue:x},h)}return h?qW(qW({},s),h):null}},{key:"inRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.props.layout,a=e/r,s=t/r;if("horizontal"===n||"vertical"===n){var i=this.state.offset;return a>=i.left&&a<=i.left+i.width&&s>=i.top&&s<=i.top+i.height?{x:a,y:s}:null}var o=this.state,l=o.angleAxisMap,c=o.radiusAxisMap;if(l&&c){var d=jg(l);return rR({x:a,y:s},d)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),r=Ug(e,PO),n={};return r&&"axis"===t&&(n="click"===r.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),qW(qW({},Pg(this.props,this.handleOuterEvent)),n)}},{key:"addListener",value:function(){uW.on(hW,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){uW.removeListener(hW,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,r){for(var n=this.state.formattedGraphicalItems,a=0,s=n.length;a<s;a++){var i=n[a];if(i.item===e||i.props.key===e.key||t===Fg(i.item.type)&&r===i.childIndex)return i}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,r=t.left,n=t.top,a=t.height,s=t.width;return At.createElement("defs",null,At.createElement("clipPath",{id:e},At.createElement("rect",{x:r,y:n,height:a,width:s})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=AW(t,2),n=r[0],a=r[1];return qW(qW({},e),{},$W({},n,a.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=AW(t,2),n=r[0],a=r[1];return qW(qW({},e),{},$W({},n,a.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,r=t.formattedGraphicalItems,n=t.activeItem;if(r&&r.length)for(var a=0,s=r.length;a<s;a++){var i=r[a],o=i.props,l=i.item,c=void 0!==l.type.defaultProps?qW(qW({},l.type.defaultProps),l.props):l.props,d=Fg(l.type);if("Bar"===d){var u=(o.data||[]).find(function(t){return DF(e,t)});if(u)return{graphicalItem:i,payload:u}}else if("RadialBar"===d){var h=(o.data||[]).find(function(t){return rR(e,t)});if(h)return{graphicalItem:i,payload:h}}else if(yq(i,n)||vq(i,n)||gq(i,n)){var m=Nq({graphicalItem:i,activeTooltipItem:n,itemData:c.data}),p=void 0===c.activeIndex?m:c.activeIndex;return{graphicalItem:qW(qW({},i),{},{childIndex:p}),payload:gq(i,n)?c.data[m]:i.props.data[m]}}}return null}},{key:"render",value:function(){var e=this;if(!Vg(this))return null;var t,r,n=this.props,a=n.children,s=n.className,i=n.width,o=n.height,l=n.style,c=n.compact,d=n.title,u=n.desc,h=EW(n,kW),m=Kg(h,!1);if(c)return At.createElement(Cz,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},At.createElement(eb,CW({},m,{width:i,height:o,title:d,desc:u}),this.renderClipPath(),Xg(a,this.renderMap)));this.props.accessibilityLayer&&(m.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,m.role=null!==(r=this.props.role)&&void 0!==r?r:"application",m.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},m.onFocus=function(){e.accessibilityManager.focus()});var p=this.parseEventsOfWrapper();return At.createElement(Cz,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},At.createElement("div",CW({className:Vr("recharts-wrapper",s),style:qW({position:"relative",cursor:"default",width:i,height:o},l)},p,{ref:function(t){e.container=t}}),At.createElement(eb,CW({},m,{width:i,height:o,title:d,desc:u,style:VW}),this.renderClipPath(),Xg(a,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],n&&PW(r.prototype,n),s&&PW(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}();$W(m,"displayName",t),$W(m,"defaultProps",qW({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),$W(m,"getDerivedStateFromProps",function(e,t){var r=e.dataKey,n=e.data,a=e.children,s=e.width,i=e.height,o=e.layout,l=e.stackOffset,c=e.margin,d=t.dataStartIndex,u=t.dataEndIndex;if(void 0===t.updateId){var m=ZW(e);return qW(qW(qW({},m),{},{updateId:0},h(qW(qW({props:e},m),{},{updateId:0}),t)),{},{prevDataKey:r,prevData:n,prevWidth:s,prevHeight:i,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(r!==t.prevDataKey||n!==t.prevData||s!==t.prevWidth||i!==t.prevHeight||o!==t.prevLayout||l!==t.prevStackOffset||!_g(c,t.prevMargin)){var p=ZW(e),f={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},x=qW(qW({},XW(t,n,o)),{},{updateId:t.updateId+1}),y=qW(qW(qW({},p),f),x);return qW(qW(qW({},y),h(qW({props:e},y),t)),{},{prevDataKey:r,prevData:n,prevWidth:s,prevHeight:i,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(!Yg(a,t.prevChildren)){var v,g,b,j,w=Ug(a,l$),N=w&&null!==(v=null===(g=w.props)||void 0===g?void 0:g.startIndex)&&void 0!==v?v:d,S=w&&null!==(b=null===(j=w.props)||void 0===j?void 0:j.endIndex)&&void 0!==b?b:u,_=N!==d||S!==u,k=!Fv(n)&&!_?t.updateId:t.updateId+1;return qW(qW({updateId:k},h(qW(qW({props:e},t),{},{updateId:k,dataStartIndex:N,dataEndIndex:S}),t)),{},{prevChildren:a,dataStartIndex:N,dataEndIndex:S})}return null}),$W(m,"renderActiveDot",function(e,t,r){var n;return n=Ct.isValidElement(e)?Ct.cloneElement(e,t):Wx(e)?e(t):At.createElement(HF,t),At.createElement(ab,{className:"recharts-active-dot",key:r},n)});var p=Ct.forwardRef(function(e,t){return At.createElement(m,CW({},e,{ref:t}))});return p.displayName=m.displayName,p},aH=nH({chartName:"LineChart",GraphicalChild:wV,axisComponents:[{axisType:"xAxis",AxisComp:GV},{axisType:"yAxis",AxisComp:iW}],formatAxisMap:iz}),sH=nH({chartName:"BarChart",GraphicalChild:Z$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:GV},{axisType:"yAxis",AxisComp:iW}],formatAxisMap:iz}),iH=nH({chartName:"PieChart",GraphicalChild:Iq,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:LB},{axisType:"radiusAxis",AxisComp:NB}],formatAxisMap:function(e,t,r,n,a){var s=e.width,i=e.height,o=e.startAngle,l=e.endAngle,c=bg(e.cx,s,s/2),d=bg(e.cy,i,i/2),u=ZI(s,i,r),h=bg(e.innerRadius,u,0),m=bg(e.outerRadius,u,.8*u);return Object.keys(t).reduce(function(e,r){var s,i=t[r],u=i.domain,p=i.reversed;if(Fv(i.range))"angleAxis"===n?s=[o,l]:"radiusAxis"===n&&(s=[h,m]),p&&(s=[s[1],s[0]]);else{var f=YI(s=i.range,2);o=f[0],l=f[1]}var x=AI(i,a),y=x.realScaleType,v=x.scale;v.domain(u).range(s),PI(v);var g=DI(v,HI(HI({},i),{},{realScaleType:y})),b=HI(HI(HI({},i),g),{},{range:s,radius:m,realScaleType:y,scale:v,cx:c,cy:d,innerRadius:h,outerRadius:m,startAngle:o,endAngle:l});return HI(HI({},e),{},KI({},r,b))},{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),oH=nH({chartName:"AreaChart",GraphicalChild:FV,axisComponents:[{axisType:"xAxis",AxisComp:GV},{axisType:"yAxis",AxisComp:iW}],formatAxisMap:iz});const lH=()=>{var e,t,r,n,a,s,i,o,l,c,d;const[u,h]=Ct.useState("30"),{selectedBranchId:m,setSelectedBranchId:p}=$p(),{user:f}=Lc();console.log("AnalyticsDashboard: User authentication debug:",{user:f,userRole:null==f?void 0:f.role,isAdmin:"admin"===(null==f?void 0:f.role),hasToken:!!sessionStorage.getItem("auth_token")});const{data:x,isLoading:y,error:v,refetch:g}=mo({queryKey:["admin-analytics",u,m],queryFn:()=>(console.log("Fetching admin analytics..."),cx.getAdminAnalytics({period:parseInt(u),branch_id:"all"!==m?parseInt(m):void 0})),refetchInterval:6e4,retry:3,onError:e=>{console.error("Admin analytics error:",e)}}),{data:b,isLoading:j,error:w,refetch:N}=mo({queryKey:["realtime-analytics"],queryFn:()=>(console.log("Fetching real-time analytics..."),cx.getRealTimeAnalytics()),refetchInterval:1e4,retry:3,onError:e=>{console.error("Real-time analytics error:",e)}}),{data:S,isLoading:_,error:k}=mo({queryKey:["analytics-trends",u,m],queryFn:()=>(console.log("Fetching analytics trends..."),cx.getAnalyticsTrends({period:parseInt(u),branch_id:"all"!==m?parseInt(m):void 0})),refetchInterval:3e5,retry:3,onError:e=>{console.error("Analytics trends error:",e)}}),{data:O,isLoading:C,error:A,refetch:E}=mo({queryKey:["feedback-analytics",m,u],queryFn:()=>(console.log("Executing feedback analytics query..."),(async e=>{const t=sessionStorage.getItem("auth_token");if(!t)throw new Error("No authentication token found");console.log("Feedback Analytics API Call:",{url:"/admin/feedback/analytics",params:e,token:t.substring(0,20)+"..."});try{const r=await ux.get("/admin/feedback/analytics",{params:e,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json",Accept:"application/json"}});return console.log("Feedback Analytics Response:",r.data),r.data}catch(r){throw console.error("Feedback Analytics Error:",r),r}})({branch_id:"all"!==m?parseInt(m):void 0,start_date:new Date(Date.now()-24*parseInt(u)*60*60*1e3).toISOString().split("T")[0],end_date:(new Date).toISOString().split("T")[0]})),refetchInterval:3e5,enabled:!0,retry:3,onError:e=>{console.error("Feedback analytics error:",e)}});console.log("Feedback Analytics Debug:",{feedbackData:O,feedbackLoading:C,feedbackError:A,selectedBranchId:m,timeRange:u}),null==(e=null==S?void 0:S.revenue_trend)||e.map(e=>({month:new Date(e.date).toLocaleDateString("en-US",{month:"short"}),date:e.date,revenue:e.revenue,appointments:e.appointments,patients:e.patients}));const P=(null==(t=null==S?void 0:S.appointment_types)?void 0:t.map((e,t)=>({name:e.name,value:e.value,color:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"][t%6]})))||[],T=(null==(r=null==S?void 0:S.appointment_trend)?void 0:r.map(e=>({date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),fullDate:e.date,total:e.total,completed:e.completed,cancelled:e.cancelled})))||[],M=[{title:"Total Revenue",value:(null==b?void 0:b.total_revenue_today)?`₱${b.total_revenue_today.toLocaleString()}`:"₱0",change:(null==(n=null==x?void 0:x.system_wide_stats)?void 0:n.revenue)?`₱${x.system_wide_stats.revenue.toLocaleString()}`:"₱0",trend:"up",icon:rn,description:"today / period total"},{title:"Active Users",value:(null==b?void 0:b.active_users)?b.active_users.toString():"0",change:(null==(a=null==x?void 0:x.system_wide_stats)?void 0:a.users)?x.system_wide_stats.users.toString():"0",trend:"up",icon:ua,description:"active / total users"},{title:"Appointments Today",value:(null==b?void 0:b.total_appointments_today)?b.total_appointments_today.toString():"0",change:(null==(s=null==x?void 0:x.system_wide_stats)?void 0:s.appointments)?x.system_wide_stats.appointments.toString():"0",trend:"up",icon:ln,description:"today / period total"},{title:"Low Stock Alerts",value:(null==b?void 0:b.low_stock_alerts)?b.low_stock_alerts.toString():"0",change:(null==b?void 0:b.upcoming_appointments)?b.upcoming_appointments.toString():"0",trend:(null==b?void 0:b.low_stock_alerts)&&b.low_stock_alerts>0?"down":"up",icon:Jr,description:"alerts / upcoming appointments"}];return Ce.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[Ce.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(nn,{className:"h-6 w-6 text-admin"}),Ce.jsx("h1",{className:"text-2xl font-bold",children:"Analytics Dashboard"}),"all"!==m&&Ce.jsx(Yd,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Selected Branch"})]}),Ce.jsxs("div",{className:"flex items-center space-x-4",children:[Ce.jsx(Fp,{selectedBranchId:m,onBranchChange:p,useAdminData:!0}),Ce.jsxs(Dm,{value:u,onValueChange:h,children:[Ce.jsx(Rm,{className:"w-48",children:Ce.jsx(Im,{placeholder:"Select time range"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"7",children:"Last 7 days"}),Ce.jsx(qm,{value:"30",children:"Last 30 days"}),Ce.jsx(qm,{value:"90",children:"Last 90 days"}),Ce.jsx(qm,{value:"365",children:"Last year"})]})]}),Ce.jsxs(Hc,{onClick:()=>{g(),N(),E()},variant:"outline",size:"sm",className:"min-w-[100px] disabled:opacity-50",disabled:y||j||C,children:[Ce.jsx(Vn,{className:"h-4 w-4 mr-2 "+(y||j||C?"animate-spin":"")}),y||j||C?"Refreshing...":"Refresh"]}),Ce.jsxs(Hc,{onClick:async()=>{var e,t;try{Es.loading("Generating PDF report...",{id:"pdf-export"});const e=await cx.exportAnalyticsPDF({period:parseInt(u),branch_id:"all"!==m?parseInt(m):void 0}),t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=`analytics_report_${(new Date).toISOString().split("T")[0]}.pdf`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t),Es.success("PDF report downloaded successfully!",{id:"pdf-export"})}catch(r){console.error("PDF export error:",r),Es.error((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Failed to export PDF report",{id:"pdf-export"})}},variant:"outline",size:"sm",className:"min-w-[100px]",children:[Ce.jsx(bn,{className:"h-4 w-4 mr-2"}),"Export PDF"]})]})]}),Ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:M.map((e,t)=>Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:e.title}),Ce.jsx(e.icon,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:e.value}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(Yd,{className:"up"===e.trend?"bg-green-500 text-white":"bg-red-500 text-white",children:e.change}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:e.description})]})]})]},t))}),Ce.jsxs(Mf,{defaultValue:"revenue",className:"w-full",children:[Ce.jsxs(Df,{className:"grid w-full grid-cols-3",children:[Ce.jsx(If,{value:"revenue",children:"Revenue"}),Ce.jsx(If,{value:"appointments",children:"Appointments"}),Ce.jsx(If,{value:"feedback",children:"Feedback"})]}),Ce.jsx(Rf,{value:"revenue",className:"space-y-6",children:Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"Revenue Trends"}),Ce.jsx(ad,{children:"Daily revenue and patient metrics over the selected period"})]}),Ce.jsx(sd,{children:_?Ce.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ce.jsx(Vn,{className:"h-6 w-6 animate-spin mr-2"}),Ce.jsx("span",{children:"Loading trends data..."})]}):Ce.jsx(sC,{width:"100%",height:450,children:Ce.jsxs(sH,{data:(null==S?void 0:S.revenue_trend)||[],children:[Ce.jsx(sV,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),Ce.jsx(GV,{dataKey:"date",tick:{fontSize:12,fill:"#666"},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),axisLine:{stroke:"#ddd"}}),Ce.jsx(iW,{yAxisId:"revenue",orientation:"left",tick:{fontSize:12,fill:"#666"},tickFormatter:e=>`₱${(e/1e3).toFixed(0)}k`,axisLine:{stroke:"#ddd"}}),Ce.jsx(iW,{yAxisId:"count",orientation:"right",tick:{fontSize:12,fill:"#666"},axisLine:{stroke:"#ddd"}}),Ce.jsx(PO,{formatter:(e,t)=>["Revenue (₱)"===t?`₱${Number(e||0).toLocaleString()}`:e,t],labelFormatter:e=>new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e5e5",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",fontSize:"14px"}}),Ce.jsx(X_,{wrapperStyle:{paddingTop:"20px",fontSize:"14px"}}),Ce.jsx(Z$,{yAxisId:"revenue",dataKey:"revenue",fill:"#1e40af",name:"Revenue (₱)",radius:[2,2,0,0]}),Ce.jsx(Z$,{yAxisId:"count",dataKey:"patients",fill:"#059669",name:"Patients",radius:[2,2,0,0]}),Ce.jsx(Z$,{yAxisId:"count",dataKey:"appointments",fill:"#d97706",name:"Appointments",radius:[2,2,0,0]})]})})})]})}),Ce.jsxs(Rf,{value:"appointments",className:"space-y-6",children:[Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"Appointment Trends"}),Ce.jsx(ad,{children:"Daily appointment volumes over time"})]}),Ce.jsx(sd,{children:_?Ce.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),Ce.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading appointment trends..."})]})}):T.length>0?Ce.jsx(sC,{width:"100%",height:300,children:Ce.jsxs(sH,{data:T,children:[Ce.jsx(sV,{strokeDasharray:"3 3"}),Ce.jsx(GV,{dataKey:"date",tick:{fontSize:12},interval:"preserveStartEnd"}),Ce.jsx(iW,{}),Ce.jsx(PO,{labelFormatter:(e,t)=>{var r;const n=null==(r=null==t?void 0:t[0])?void 0:r.payload;return n?new Date(n.fullDate).toLocaleDateString():e},formatter:(e,t)=>[e,"total"===t?"Total":"completed"===t?"Completed":"cancelled"===t?"Cancelled":t]}),Ce.jsx(Z$,{dataKey:"total",fill:"#3b82f6",name:"total"}),Ce.jsx(Z$,{dataKey:"completed",fill:"#10b981",name:"completed"}),Ce.jsx(Z$,{dataKey:"cancelled",fill:"#ef4444",name:"cancelled"})]})}):Ce.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ce.jsx("div",{className:"text-center",children:Ce.jsx("p",{className:"text-muted-foreground",children:"No appointment data available"})})})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"Appointments by Type"}),Ce.jsx(ad,{children:"Distribution of appointment types"})]}),Ce.jsx(sd,{children:_?Ce.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),Ce.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading appointment types..."})]})}):P.length>0?Ce.jsx(sC,{width:"100%",height:300,children:Ce.jsxs(iH,{children:[Ce.jsx(Iq,{data:P,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:e=>{const{name:t,value:r}=e,n=P.reduce((e,t)=>e+t.value,0);return`${t??""}: ${n>0?Math.round(r/n*100):0}%`},children:P.map((e,t)=>Ce.jsx(iC,{fill:e.color},`cell-${t}`))}),Ce.jsx(PO,{formatter:(e,t)=>[e,t]})]})}):Ce.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ce.jsx("div",{className:"text-center",children:Ce.jsx("p",{className:"text-muted-foreground",children:"No appointment type data available"})})})})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"Appointment Metrics"}),Ce.jsx(ad,{children:"Key performance indicators"})]}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"text-3xl font-bold text-green-600",children:"94%"}),Ce.jsx("div",{className:"text-sm text-muted-foreground",children:"Show-up Rate"})]}),Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"18min"}),Ce.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Wait Time"})]}),Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"text-3xl font-bold text-purple-600",children:"85%"}),Ce.jsx("div",{className:"text-sm text-muted-foreground",children:"On-time Rate"})]}),Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"text-3xl font-bold text-orange-600",children:"42min"}),Ce.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Duration"})]})]})})]})]}),Ce.jsxs(Rf,{value:"feedback",className:"space-y-6",children:[A&&Ce.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[Ce.jsx("h3",{className:"text-red-800 font-semibold",children:"Error Loading Feedback Data"}),Ce.jsx("p",{className:"text-red-600 text-sm mt-1",children:A instanceof Error?A.message:"Unknown error occurred"}),Ce.jsx(Hc,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>E(),children:"Retry"})]}),C&&Ce.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ce.jsx("p",{className:"text-blue-600",children:"Loading feedback data..."})}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Overall Rating"}),Ce.jsx(ea,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:(null==(i=null==O?void 0:O.overall_stats)?void 0:i.avg_rating)?O.overall_stats.avg_rating.toFixed(1):"0.0"}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"out of 5.0 stars"})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Total Feedback"}),Ce.jsx(Ln,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:(null==(o=null==O?void 0:O.overall_stats)?void 0:o.total_feedback)||0}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"customer reviews"})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Unique Customers"}),Ce.jsx(ua,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:(null==(l=null==O?void 0:O.overall_stats)?void 0:l.unique_customers)||0}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"provided feedback"})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Response Rate"}),Ce.jsx(Xr,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsxs("div",{className:"text-2xl font-bold",children:[(null==(c=null==O?void 0:O.overall_stats)?void 0:c.total_feedback)&&(null==(d=null==O?void 0:O.overall_stats)?void 0:d.unique_customers)?Math.round(O.overall_stats.total_feedback/O.overall_stats.unique_customers*100):0,"%"]}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"feedback per customer"})]})]})]}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"Rating Distribution"}),Ce.jsx(ad,{children:"Breakdown of customer ratings"})]}),Ce.jsx(sd,{children:C?Ce.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),Ce.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading rating distribution..."})]})}):(null==O?void 0:O.rating_distribution)&&O.rating_distribution.length>0?Ce.jsx("div",{className:"space-y-3",children:O.rating_distribution.map(e=>{const t=O.rating_distribution.reduce((e,t)=>e+t.count,0),r=t>0?Math.round(e.count/t*100):0;return Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsxs("span",{className:"text-sm font-medium",children:[e.rating," Star",1!==e.rating?"s":""]}),Ce.jsx("div",{className:"flex",children:[...Array(5)].map((t,r)=>Ce.jsx(ea,{className:"h-4 w-4 "+(r<e.rating?"text-yellow-400 fill-current":"text-gray-300")},r))})]}),Ce.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.count," (",r,"%)"]})]}),Ce.jsx(Sp,{value:r,className:"h-2"})]},e.rating)})}):Ce.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ce.jsx("div",{className:"text-center",children:Ce.jsx("p",{className:"text-muted-foreground",children:"No rating data available"})})})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"Branch Ratings"}),Ce.jsx(ad,{children:"Average ratings by branch"})]}),Ce.jsx(sd,{children:C?Ce.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),Ce.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading branch ratings..."})]})}):(null==O?void 0:O.branch_ratings)&&O.branch_ratings.length>0?Ce.jsx("div",{className:"space-y-4",children:O.branch_ratings.map(e=>Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsx("span",{className:"text-sm font-medium",children:e.branch_name}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx("span",{className:"text-sm font-bold",children:e.avg_rating.toFixed(1)}),Ce.jsx("div",{className:"flex",children:[...Array(5)].map((t,r)=>Ce.jsx(ea,{className:"h-4 w-4 "+(r<Math.floor(e.avg_rating)?"text-yellow-400 fill-current":r<e.avg_rating?"text-yellow-400 fill-current opacity-50":"text-gray-300")},r))})]})]}),Ce.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[Ce.jsxs("span",{children:[e.feedback_count," reviews"]}),Ce.jsx(Sp,{value:e.avg_rating/5*100,className:"w-20 h-1"})]})]},e.branch_id))}):Ce.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ce.jsx("div",{className:"text-center",children:Ce.jsx("p",{className:"text-muted-foreground",children:"No branch rating data available"})})})})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"Feedback Trends"}),Ce.jsx(ad,{children:"Rating trends over time"})]}),Ce.jsx(sd,{children:C?Ce.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),Ce.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading feedback trends..."})]})}):(null==O?void 0:O.trend_data)&&O.trend_data.length>0?Ce.jsx(sC,{width:"100%",height:300,children:Ce.jsxs(oH,{data:O.trend_data,children:[Ce.jsx(sV,{strokeDasharray:"3 3"}),Ce.jsx(GV,{dataKey:"month",tick:{fontSize:12},tickFormatter:e=>new Date(e+"-01").toLocaleDateString("en-US",{month:"short",year:"2-digit"})}),Ce.jsx(iW,{domain:[0,5]}),Ce.jsx(PO,{formatter:(e,t)=>["avg_rating"===t?Number(e).toFixed(2):e,"avg_rating"===t?"Average Rating":"Feedback Count"],labelFormatter:e=>new Date(e+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),Ce.jsx(FV,{type:"monotone",dataKey:"avg_rating",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.3,name:"avg_rating"})]})}):Ce.jsx("div",{className:"flex items-center justify-center h-[300px]",children:Ce.jsx("div",{className:"text-center",children:Ce.jsx("p",{className:"text-muted-foreground",children:"No trend data available"})})})})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{children:[Ce.jsx(nd,{children:"Latest Feedback"}),Ce.jsx(ad,{children:"Recent customer reviews and comments"})]}),Ce.jsxs(Hc,{onClick:()=>E(),variant:"outline",size:"sm",children:[Ce.jsx(Vn,{className:"h-4 w-4 mr-2 "+(C?"animate-spin":"")}),"Refresh"]})]})}),Ce.jsx(sd,{children:C?Ce.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ce.jsx(Vn,{className:"h-6 w-6 animate-spin mr-2"}),Ce.jsx("span",{children:"Loading latest feedback..."})]}):(null==O?void 0:O.latest_feedback)&&O.latest_feedback.length>0?Ce.jsx("div",{className:"space-y-4",children:O.latest_feedback.map(e=>Ce.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx("span",{className:"font-medium",children:e.customer_name}),Ce.jsx(Yd,{variant:"outline",className:"text-xs",children:e.branch_name})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx("div",{className:"flex",children:[...Array(5)].map((t,r)=>Ce.jsx(ea,{className:"h-4 w-4 "+(r<e.rating?"text-yellow-400 fill-current":"text-gray-300")},r))}),Ce.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]})]}),e.comment&&Ce.jsxs("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded",children:['"',e.comment,'"']}),e.appointment_date&&Ce.jsxs("p",{className:"text-xs text-muted-foreground",children:["Appointment: ",new Date(e.appointment_date).toLocaleDateString()]})]},e.id))}):Ce.jsxs("div",{className:"text-center py-8 text-gray-500",children:[Ce.jsx("p",{children:"No feedback data available."}),Ce.jsx(Hc,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>E(),children:"Retry"})]})})]})]})]})]})},cH="/assets/everbright-bg-7fc38de9.png",dH=()=>{const e=[{title:"Customers",description:"Book appointments, view vision history, and manage prescriptions",icon:wn,color:"customer",path:"/login",features:["Book Appointments","Vision History","Digital Prescriptions","Receipt Downloads"]},{title:"Optometrists",description:"Manage patient care, prescriptions, and daily appointments",icon:ua,color:"optometrist",path:"/login",features:["Patient Records","Prescription Management","Daily Schedule","Medical History"]},{title:"Clinic Staff",description:"Handle inventory, appointments, and patient communications",icon:ln,color:"staff",path:"/login",features:["Inventory Management","Appointment Scheduling","Patient Notifications","Sales Tracking"]},{title:"Administrators",description:"Comprehensive system management and analytics overview",icon:nn,color:"admin",path:"/login",features:["Multi-branch Analytics","User Management","System Configuration","Performance Reports"]}];return Ce.jsxs("div",{className:"min-h-screen relative",style:{backgroundImage:`url(${cH})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[Ce.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm"}),Ce.jsxs("div",{className:"relative z-10",children:[Ce.jsx("header",{className:"bg-white shadow-sm border-b",children:Ce.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(wn,{className:"h-8 w-8 text-primary"}),Ce.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Everbright Optical Clinic"})]}),Ce.jsxs("div",{className:"flex space-x-4",children:[Ce.jsx(Hc,{variant:"outline",asChild:!0,children:Ce.jsxs(It,{to:"/faq",children:[Ce.jsx(Cn,{className:"h-4 w-4 mr-2"}),"FAQ"]})}),Ce.jsx(Hc,{variant:"outline",asChild:!0,children:Ce.jsx(It,{to:"/register",children:"Sign Up"})}),Ce.jsx(Hc,{asChild:!0,children:Ce.jsx(It,{to:"/login",children:"Sign In"})})]})]})}),Ce.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center",children:[Ce.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-slate-900 mb-6",children:["Everbright Optical Clinic",Ce.jsx("span",{className:"block text-primary",children:"Management System"})]}),Ce.jsx("p",{className:"text-xl text-slate-600 mb-8 max-w-3xl mx-auto"}),Ce.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[Ce.jsx(Hc,{size:"lg",asChild:!0,children:Ce.jsxs(It,{to:"/register",children:["Get Started",Ce.jsx(en,{className:"ml-2 h-5 w-5"})]})}),Ce.jsx(Hc,{size:"lg",variant:"outline",asChild:!0,children:Ce.jsx(It,{to:"/login",children:"Sign In to Existing Account"})})]})]}),Ce.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[Ce.jsxs("div",{className:"text-center mb-16",children:[Ce.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Designed for Every Role"}),Ce.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Our platform provides specialized dashboards and features tailored to each user type in your optical clinic."})]}),Ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((e,t)=>Ce.jsxs(td,{className:"shadow-lg border-0 hover:shadow-xl transition-all duration-300 group",children:[Ce.jsxs(rd,{className:"text-center",children:[Ce.jsx("div",{className:"mx-auto w-16 h-16 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 "+("customer"===e.color?"bg-customer":"optometrist"===e.color?"bg-optometrist":"staff"===e.color?"bg-staff":"bg-admin"),children:Ce.jsx(e.icon,{className:"h-8 w-8 text-white"})}),Ce.jsx(nd,{className:"text-xl font-bold",children:e.title}),Ce.jsx(ad,{className:"text-sm",children:e.description})]}),Ce.jsxs(sd,{children:[Ce.jsx("ul",{className:"space-y-2 mb-6",children:e.features.map((e,t)=>Ce.jsxs("li",{className:"flex items-center text-sm text-slate-600",children:[Ce.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full mr-3"}),e]},t))}),Ce.jsx(Hc,{className:"w-full",variant:e.color,asChild:!0,children:Ce.jsx(It,{to:e.path,children:"Access Dashboard"})})]})]},t))})]}),Ce.jsx("section",{className:"bg-white py-20",children:Ce.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ce.jsxs("div",{className:"text-center mb-16",children:[Ce.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Everything You Need"}),Ce.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Comprehensive features to manage every aspect of your optical clinic operations."})]}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:Ce.jsx(ln,{className:"h-8 w-8 text-blue-600"})}),Ce.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Smart Scheduling"}),Ce.jsx("p",{className:"text-slate-600",children:"Efficient appointment management with automated reminders and notifications."})]}),Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:Ce.jsx(ua,{className:"h-8 w-8 text-green-600"})}),Ce.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Patient Management"}),Ce.jsx("p",{className:"text-slate-600",children:"Complete patient records, medical history, and prescription tracking."})]}),Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:Ce.jsx(nn,{className:"h-8 w-8 text-purple-600"})}),Ce.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Analytics & Reports"}),Ce.jsx("p",{className:"text-slate-600",children:"Comprehensive insights into clinic performance and business metrics."})]})]})]})}),Ce.jsx("footer",{className:"bg-slate-900 text-white py-12",children:Ce.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[Ce.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[Ce.jsx(wn,{className:"h-6 w-6"}),Ce.jsx("span",{className:"text-xl font-bold",children:"Optical Clinic Management"})]}),Ce.jsx("p",{className:"text-slate-400",children:"Streamlining optical clinic operations with modern technology."})]})})]})]})},uH=()=>{const e=Rt();return Ct.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),Ce.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),Ce.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),Ce.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},hH=()=>{const[e,t]=Ct.useState([]),r=[{title:"👓 Booking Appointments",items:[{id:"how-to-book",question:"How can I book an appointment?",answer:'Go to your customer dashboard → "Book Appointment." Select your preferred date, and the system will automatically show where the optometrist is available based on their branch schedule.'},{id:"choose-branch",question:"Can I choose my preferred branch?",answer:"You can select a date, and the system will show which branch the optometrist (Dr. Samuel Prieto) will be available on that day. The branch is auto-filled to avoid scheduling conflicts."},{id:"reschedule-cancel",question:"Can I reschedule or cancel my appointment?",answer:'Yes. Go to your "Appointments" tab → click "Manage" → choose "Reschedule" or "Cancel." You can only reschedule if the appointment has not yet been confirmed by the staff.'},{id:"appointment-confirmed",question:"How will I know if my appointment is confirmed?",answer:'Once a staff member from your selected branch confirms your booking, you will receive an in-app notification and the appointment status will change to "Confirmed."'},{id:"view-schedule",question:"Can I see the optometrist's schedule before booking?",answer:"Yes. Click \"View Doctor's Schedule\" to see Dr. Samuel's weekly rotation across the four branches. This helps you choose the right date for your preferred branch."}]},{title:"💳 Payments and Receipts",items:[{id:"pay-online",question:"Do I need to pay online?",answer:"No. All payments are made in person at the branch after your consultation or when you pick up your reserved eyewear."},{id:"get-receipt",question:"Can I get a receipt for my payment?",answer:"Yes. Once your payment is processed by the branch staff, a digital receipt will automatically appear in your dashboard. You can also download it as a PDF."},{id:"missing-receipt",question:"What if my payment receipt is missing?",answer:"Contact the branch where your appointment took place. The staff can regenerate and re-upload your receipt to your account."}]},{title:"🧾 Prescriptions and Eye Health",items:[{id:"view-prescription",question:"Where can I see my latest prescription?",answer:'Go to "Vision History" in your dashboard. It lists your past consultations, prescriptions, and progress. You can also download your prescription in PDF format.'},{id:"prescription-details",question:"What does my prescription show?",answer:"Your prescription includes your left and right eye measurements, diagnosis, and recommended lens type. It helps track your eye progress over time."},{id:"track-vision-changes",question:"Can I track changes in my vision?",answer:"Yes. The Vision History includes a simple progress chart that shows improvements or changes in both eyes based on your past prescriptions."}]},{title:"🕶️ Products and Eyewear Reservations",items:[{id:"reserve-eyewear",question:"Can I reserve eyewear before my check-up?",answer:"Yes. You can browse the product gallery of your selected branch and reserve frames or lenses. Your staff will assist you after your consultation."},{id:"branch-products",question:"Are the products the same in all branches?",answer:"No. Each branch has its own inventory. Make sure to check the product availability for your chosen branch before booking."},{id:"view-reservations",question:"Can I view my reserved eyewear?",answer:'Yes. Go to "My Reservations" in your dashboard to view all pending and completed reservations.'}]},{title:"🧠 Account and Support",items:[{id:"update-info",question:"Can I update my personal information?",answer:'Yes. Go to "Profile Settings" → edit your details. Make sure your email and contact number are updated for appointment notifications.'},{id:"forgot-password",question:"What if I forgot my password?",answer:'Click "Forgot Password" on the login page, and a password reset link will be sent to your email.'},{id:"contact-help",question:"Who can I contact for help?",answer:'You can message your assigned branch directly through the "Contact Branch" feature or visit the FAQ → Support section for quick answers.'}]},{title:"⚡ Feedback and Satisfaction",items:[{id:"give-feedback",question:"How can I give feedback about my visit?",answer:'After your appointment is completed, go to "Feedback" in your dashboard. Select your appointment and rate your experience.'},{id:"feedback-private",question:"Is my feedback visible to other patients?",answer:"No. Feedback is sent privately to the admin for analytics to improve clinic services per branch."},{id:"feedback-impact",question:"What happens after I submit feedback?",answer:"Your rating contributes to the branch's satisfaction analytics, helping the clinic improve patient care and service quality."}]}];return Ce.jsxs("div",{className:"min-h-screen relative",style:{backgroundImage:`url(${cH})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[Ce.jsx("div",{className:"absolute inset-0 bg-white/90 backdrop-blur-sm"}),Ce.jsxs("div",{className:"relative z-10",children:[Ce.jsx("header",{className:"bg-white shadow-sm border-b",children:Ce.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(wn,{className:"h-8 w-8 text-primary"}),Ce.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Everbright Optical Clinic"})]}),Ce.jsxs("div",{className:"flex space-x-4",children:[Ce.jsx(Hc,{variant:"outline",asChild:!0,children:Ce.jsx(It,{to:"/register",children:"Sign Up"})}),Ce.jsx(Hc,{asChild:!0,children:Ce.jsx(It,{to:"/login",children:"Sign In"})})]})]})}),Ce.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[Ce.jsx("div",{className:"mb-8",children:Ce.jsx(Hc,{variant:"outline",asChild:!0,children:Ce.jsxs(It,{to:"/",children:[Ce.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})}),Ce.jsxs("div",{className:"text-center mb-12",children:[Ce.jsxs("div",{className:"flex items-center justify-center mb-4",children:[Ce.jsx(Cn,{className:"h-12 w-12 text-primary mr-4"}),Ce.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"Frequently Asked Questions"})]}),Ce.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Find answers to common questions about using the Optical Management System"})]}),Ce.jsx("div",{className:"space-y-8",children:r.map((r,n)=>Ce.jsxs(td,{className:"shadow-lg",children:[Ce.jsx(rd,{children:Ce.jsx(nd,{className:"text-2xl text-primary",children:r.title})}),Ce.jsx(sd,{className:"space-y-4",children:r.items.map(r=>Ce.jsxs(Qf,{open:e.includes(r.id),onOpenChange:()=>{return e=r.id,void t(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e},children:[Ce.jsx(Jf,{asChild:!0,children:Ce.jsxs(Hc,{variant:"ghost",className:"w-full justify-between p-4 h-auto text-left",children:[Ce.jsx("span",{className:"font-semibold text-slate-900",children:r.question}),e.includes(r.id)?Ce.jsx(fn,{className:"h-5 w-5 text-slate-500"}):Ce.jsx(mn,{className:"h-5 w-5 text-slate-500"})]})}),Ce.jsx(Zf,{className:"px-4 pb-4",children:Ce.jsx("div",{className:"text-slate-600 leading-relaxed",children:r.answer})})]},r.id))})]},n))}),Ce.jsxs(td,{className:"mt-12 shadow-lg",children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{className:"text-2xl text-center",children:"Still Need Help?"}),Ce.jsx(ad,{className:"text-center",children:"Can't find the answer you're looking for? Contact our friendly staff for assistance"})]}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[Ce.jsxs("div",{className:"flex flex-col items-center",children:[Ce.jsx(Dn,{className:"h-8 w-8 text-primary mb-2"}),Ce.jsx("h3",{className:"font-semibold mb-1",children:"Email Support"}),Ce.jsx("p",{className:"text-sm text-slate-600",children:"support@everbrightoptical.com"})]}),Ce.jsxs("div",{className:"flex flex-col items-center",children:[Ce.jsx(qn,{className:"h-8 w-8 text-primary mb-2"}),Ce.jsx("h3",{className:"font-semibold mb-1",children:"Phone Support"}),Ce.jsx("p",{className:"text-sm text-slate-600",children:"(555) 123-4567"})]}),Ce.jsxs("div",{className:"flex flex-col items-center",children:[Ce.jsx(In,{className:"h-8 w-8 text-primary mb-2"}),Ce.jsx("h3",{className:"font-semibold mb-1",children:"Visit Us"}),Ce.jsx("p",{className:"text-sm text-slate-600",children:"123 Main Street, City, State"})]})]})})]})]}),Ce.jsx("footer",{className:"bg-slate-900 text-white py-12 mt-12",children:Ce.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[Ce.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[Ce.jsx(wn,{className:"h-6 w-6"}),Ce.jsx("span",{className:"text-xl font-bold",children:"Everbright Optical Clinic"})]}),Ce.jsx("p",{className:"text-slate-400",children:"Streamlining optical clinic operations with modern technology."})]})})]})]})},mH={}.VITE_API_URL||"http://127.0.0.1:8000/api",pH=Ac.create({baseURL:mH,headers:{"Content-Type":"application/json",Accept:"application/json"}});pH.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const fH=()=>pH.get("/appointments/weekly-schedule"),xH=({doctorId:e,doctorName:t,children:r})=>{const[n,a]=Ct.useState(!1),[s,i]=Ct.useState(null),[o,l]=Ct.useState(!1),{toast:c}=Jt(),d=e=>"Not Available"===e.branch?Ce.jsx(Yd,{variant:"secondary",children:"Not Available"}):Ce.jsx(Yd,{variant:"default",children:"Available"}),u=e=>"Not Available"===e.branch?"text-muted-foreground":"text-green-600 font-medium";return Ce.jsxs(Xp,{open:n,onOpenChange:t=>{a(t),t&&!s&&(async()=>{l(!0);try{const t=await tp(e);i(t)}catch(t){console.error("Error fetching schedule:",t),c({title:"Error",description:"Failed to fetch doctor schedule. Please try again.",variant:"destructive"})}finally{l(!1)}})()},children:[Ce.jsx(Qp,{asChild:!0,children:r}),Ce.jsxs(ef,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[Ce.jsxs(tf,{children:[Ce.jsxs(nf,{className:"flex items-center gap-2",children:[Ce.jsx(ln,{className:"h-5 w-5"}),t,"'s Weekly Schedule"]}),Ce.jsx(af,{children:"View the optometrist's 6-day rotation schedule across all branches"})]}),Ce.jsx("div",{className:"space-y-4",children:o?Ce.jsx("div",{className:"space-y-3",children:[...Array(6)].map((e,t)=>Ce.jsxs("div",{className:"flex items-center space-x-4",children:[Ce.jsx(hh,{className:"h-4 w-20"}),Ce.jsx(hh,{className:"h-4 w-24"}),Ce.jsx(hh,{className:"h-4 w-32"}),Ce.jsx(hh,{className:"h-6 w-20"})]},t))}):s?Ce.jsxs(Ce.Fragment,{children:[Ce.jsx(td,{children:Ce.jsxs(rd,{className:"pb-3",children:[Ce.jsxs(nd,{className:"text-lg flex items-center gap-2",children:[Ce.jsx(da,{className:"h-5 w-5"}),s.doctor.name]}),Ce.jsx(ad,{children:s.doctor.email})]})}),Ce.jsx("div",{className:"border rounded-lg",children:Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{className:"w-[120px]",children:"Day"}),Ce.jsx(Jm,{className:"w-[150px]",children:"Branch"}),Ce.jsx(Jm,{className:"w-[200px]",children:"Time"}),Ce.jsx(Jm,{className:"w-[120px]",children:"Status"})]})}),Ce.jsx(Xm,{children:s.schedule.map((e,t)=>Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{className:"font-medium",children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(ln,{className:"h-4 w-4 text-muted-foreground"}),e.day]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(In,{className:"h-4 w-4 text-muted-foreground"}),e.branch]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(yn,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsx("span",{className:u(e),children:e.time})]})}),Ce.jsx(Zm,{children:d(e)})]},t))})]})}),Ce.jsx(td,{children:Ce.jsx(sd,{className:"pt-4",children:Ce.jsxs("div",{className:"text-sm text-muted-foreground",children:[Ce.jsxs("p",{className:"mb-2",children:[Ce.jsx("strong",{children:"Schedule Summary:"})," ",s.doctor.name," works a 6-day rotation across multiple branches, providing comprehensive eye care services."]}),Ce.jsxs("p",{children:[Ce.jsx("strong",{children:"Note:"})," Saturday hours are typically shorter. Please book your appointment accordingly."]})]})})})]}):Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(ln,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ce.jsx("p",{className:"text-muted-foreground",children:"No schedule data available"})]})}),Ce.jsx("div",{className:"flex justify-end gap-2 pt-4",children:Ce.jsx(Hc,{variant:"outline",onClick:()=>a(!1),children:"Close"})})]})]})},yH=({doctorId:e,doctorName:t})=>{const[r,n]=Ct.useState(null),[a,s]=Ct.useState(!1),[i,o]=Ct.useState(!1),{toast:l}=Jt();Ct.useEffect(()=>{(async()=>{s(!0);try{const t=await tp(e);n(t)}catch(t){console.error("Error fetching schedule:",t),l({title:"Error",description:"Failed to fetch doctor schedule",variant:"destructive"})}finally{s(!1)}})()},[e]);const c=e=>"Not Available"===e.branch?"text-muted-foreground":"text-green-600",d=e=>"Not Available"===e.branch?Ce.jsx(Yd,{variant:"secondary",className:"text-xs",children:"Not Available"}):Ce.jsx(Yd,{variant:"default",className:"text-xs",children:"Available"}),u=(()=>{if(!r)return null;const e=new Date,t=0===e.getDay()?7:e.getDay();return r.schedule.find(e=>e.day_of_week===t)})();return a?Ce.jsxs(td,{className:"h-fit",children:[Ce.jsx(rd,{className:"pb-3",children:Ce.jsxs(nd,{className:"text-sm flex items-center gap-2",children:[Ce.jsx(ln,{className:"h-4 w-4"}),"Doctor's Schedule"]})}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),Ce.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})]})})]}):Ce.jsxs(td,{className:"h-fit",children:[Ce.jsxs(rd,{className:"pb-3",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs(nd,{className:"text-sm flex items-center gap-2",children:[Ce.jsx(ln,{className:"h-4 w-4"}),t,"'s Schedule"]}),Ce.jsx(Hc,{variant:"ghost",size:"sm",onClick:()=>o(!i),className:"h-6 w-6 p-0",children:i?Ce.jsx(fn,{className:"h-3 w-3"}):Ce.jsx(mn,{className:"h-3 w-3"})})]}),Ce.jsx(ad,{className:"text-xs",children:"Weekly rotation across branches"})]}),Ce.jsxs(sd,{className:"pt-0",children:[u&&Ce.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[Ce.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ce.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Today"}),d(u)]}),Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ce.jsx(In,{className:"h-3 w-3 text-blue-600"}),Ce.jsx("span",{className:c(u),children:u.branch})]}),Ce.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Ce.jsx(yn,{className:"h-3 w-3 text-blue-600"}),Ce.jsx("span",{className:c(u),children:u.time})]})]})]}),i&&r&&Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Weekly Schedule"}),r.schedule.map((e,t)=>Ce.jsxs("div",{className:"flex items-center justify-between py-1.5 px-2 rounded hover:bg-gray-50",children:[Ce.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[Ce.jsx("div",{className:"text-xs font-medium w-16 text-muted-foreground",children:e.day.slice(0,3)}),Ce.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[Ce.jsx(In,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),Ce.jsx("span",{className:"text-xs truncate",children:e.branch})]})]}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx("span",{className:"text-xs text-muted-foreground",children:e.time}),d(e)]})]},t))]}),!i&&Ce.jsx("div",{className:"text-xs text-muted-foreground text-center py-2",children:"Click to view full schedule"})]})]})},vH=({onSuccess:e})=>{const{toast:t}=Jt(),{user:r}=Lc(),n=Dt(),[a,s]=Ct.useState(!1),[i,o]=Ct.useState({date:"",time:"",appointmentType:"",notes:""}),[l,c]=Ct.useState(null),[d,u]=Ct.useState(null),{create:h,loading:m}=lh(),{appointments:p,loading:f,refetch:x}=oh(),{data:y}=mo({queryKey:["optometrists"],queryFn:rp}),{data:v,isLoading:g,error:b}=mo({queryKey:["availability",i.date],queryFn:()=>{return e=i.date,pH.get("/appointments/availability",{params:{date:e}});var e},enabled:!!i.date});Ct.useEffect(()=>{(null==v?void 0:v.data)&&(c(v.data),o(e=>({...e,optometrist:v.data.optometrist,branch:v.data.branch})))},[v]),Ct.useEffect(()=>{if((null==y?void 0:y.optometrists)&&y.optometrists.length>0){const e=y.optometrists[0];u({id:e.id,name:e.name})}},[y]);const j=[{value:"eye_exam",label:"Eye Exam"},{value:"contact_fitting",label:"Contact Lens Fitting"},{value:"consultation",label:"Consultation"},{value:"follow_up",label:"Follow-up"},{value:"emergency",label:"Emergency"}],w=(e,t)=>{const[r,n]=e.split(":").map(Number);let a=30;switch(t){case"eye_exam":a=60;break;case"contact_fitting":a=45;break;default:a=30}const s=n+a,i=s%60;return`${(r+Math.floor(s/60)).toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},N=(e,t)=>{o(r=>({...r,[e]:t}))};return Ce.jsx("div",{className:"max-w-6xl mx-auto p-6",children:Ce.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Ce.jsxs("div",{className:"lg:col-span-2",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-6 w-6 text-customer"}),Ce.jsx(nd,{children:"Book New Appointment"})]}),d&&Ce.jsx(xH,{doctorId:d.id,doctorName:d.name,children:Ce.jsxs(Hc,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[Ce.jsx(wn,{className:"h-4 w-4"}),"View Doctor's Schedule"]})})]}),Ce.jsx(ad,{children:"Schedule your next eye examination or consultation"})]}),Ce.jsx(sd,{children:Ce.jsxs("form",{onSubmit:async n=>{var a,d,u,m;if(n.preventDefault(),i.date&&i.time&&i.appointmentType&&l)if(r){s(!0);try{if(!l.optometrist_id||!l.branch_id)throw new Error("Optometrist or branch information is missing from availability data");const n={patient_id:"string"==typeof r.id?parseInt(r.id):r.id,optometrist_id:"string"==typeof l.optometrist_id?parseInt(l.optometrist_id):l.optometrist_id,branch_id:"string"==typeof l.branch_id?parseInt(l.branch_id):l.branch_id,appointment_date:i.date,start_time:i.time,end_time:w(i.time,i.appointmentType),type:i.appointmentType,notes:i.notes||void 0};console.log("Appointment data being sent:",n),console.log("User ID:",r.id,"Type:",typeof r.id),console.log("Optometrist ID:",l.optometrist_id,"Type:",typeof l.optometrist_id),console.log("Branch ID:",l.branch_id,"Type:",typeof l.branch_id),await h(n),t({title:"Appointment Booked Successfully",description:`Your appointment with ${l.optometrist||"the optometrist"} at ${l.branch||"the branch"} has been scheduled for ${i.date} at ${i.time}.`}),o({date:"",time:"",appointmentType:"",notes:""}),c(null),x(),e&&e()}catch(p){console.error("Error booking appointment:",p);let e="There was an error booking your appointment. Please try again.";if(null==(d=null==(a=p.response)?void 0:a.data)?void 0:d.errors){const t=p.response.data.errors;e=`Validation errors: ${Object.values(t).flat().join(", ")}`,console.error("Validation errors:",t)}else(null==(m=null==(u=p.response)?void 0:u.data)?void 0:m.message)&&(e=p.response.data.message);t({title:"Booking Failed",description:e,variant:"destructive"})}finally{s(!1)}}else t({title:"Authentication Required",description:"Please log in to book an appointment.",variant:"destructive"});else t({title:"Incomplete Form",description:"Please fill in all required fields and select a date with available times.",variant:"destructive"})},className:"space-y-6",children:[Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"date",children:"Appointment Date"}),Ce.jsx(Yc,{id:"date",type:"date",value:i.date,onChange:e=>N("date",e.target.value),min:(new Date).toISOString().split("T")[0],required:!0})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"time",children:"Preferred Time"}),Ce.jsxs(Dm,{value:i.time,onValueChange:e=>N("time",e),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:g?"Loading available times...":"Select time"})}),Ce.jsx(Bm,{children:g?Ce.jsx(qm,{value:"loading",disabled:!0,children:Ce.jsxs("div",{className:"flex items-center",children:[Ce.jsx(Tn,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading available times..."]})}):(null==l?void 0:l.available_times)?l.available_times.filter(e=>e&&""!==String(e).trim()).map(e=>{const t=(e=>{const[t,r]=e.split(" "),[n,a]=t.split(":");let s=parseInt(n);return"PM"===r&&12!==s?s+=12:"AM"===r&&12===s&&(s=0),`${s.toString().padStart(2,"0")}:${a}`})(e);return Ce.jsx(qm,{value:t,children:Ce.jsxs("div",{className:"flex items-center",children:[Ce.jsx(yn,{className:"mr-2 h-4 w-4"}),e]})},e)}):Ce.jsx(qm,{value:"no-times",disabled:!0,children:"No available times for this date"})})]})]})]}),b&&Ce.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:Ce.jsxs("div",{className:"flex",children:[Ce.jsx(Qr,{className:"h-5 w-5 text-red-400"}),Ce.jsxs("div",{className:"ml-3",children:[Ce.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Availability"}),Ce.jsx("p",{className:"mt-1 text-sm text-red-700",children:b.message||"Failed to load available times for this date."})]})]})}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"branch",children:"Branch"}),Ce.jsx(Yc,{id:"branch",value:(null==l?void 0:l.branch)||"",disabled:!0,placeholder:"Select a date to see assigned branch"})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"optometrist",children:"Optometrist"}),Ce.jsx(Yc,{id:"optometrist",value:(null==l?void 0:l.optometrist)||"",disabled:!0,placeholder:"Select a date to see assigned optometrist"})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"appointmentType",children:"Service Type"}),Ce.jsxs(Dm,{value:i.appointmentType,onValueChange:e=>N("appointmentType",e),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select service type"})}),Ce.jsx(Bm,{children:j.map(e=>Ce.jsx(qm,{value:e.value,children:e.label},e.value))})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"notes",children:"Additional Notes (Optional)"}),Ce.jsx(fh,{id:"notes",placeholder:"Any special requirements or symptoms you'd like to discuss...",value:i.notes,onChange:e=>N("notes",e.target.value),rows:3})]}),Ce.jsx(Hc,{type:"submit",className:"w-full",variant:"customer",disabled:m||a,children:m||a?Ce.jsxs(Ce.Fragment,{children:[Ce.jsx(Tn,{className:"mr-2 h-4 w-4 animate-spin"}),"Booking..."]}):"Book Appointment"})]})})]}),Ce.jsxs(td,{className:"mt-6","data-section":"appointments",children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Your Upcoming Appointments"})}),Ce.jsx(sd,{children:f?Ce.jsxs("div",{className:"flex items-center justify-center p-8",children:[Ce.jsx(Tn,{className:"h-6 w-6 animate-spin mr-2"}),"Loading appointments..."]}):0===p.length?Ce.jsx("div",{className:"text-center p-8 text-muted-foreground",children:"No upcoming appointments found."}):Ce.jsx("div",{className:"space-y-4",children:p.map(e=>{var t,r;return Ce.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[Ce.jsxs("div",{className:"flex items-center space-x-4",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-4 w-4 text-customer"}),Ce.jsx("span",{className:"font-medium",children:e.appointment_date})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(yn,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsx("span",{children:e.start_time})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(da,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsx("span",{children:(null==(t=e.optometrist)?void 0:t.name)||"Unknown Optometrist"})]})]}),Ce.jsx("div",{className:"text-sm text-muted-foreground",children:(null==(r=j.find(t=>t.value===e.type))?void 0:r.label)||e.type})]},e.id)})})})]})]}),Ce.jsx("div",{className:"lg:col-span-1",children:Ce.jsxs("div",{className:"sticky top-6 space-y-4",children:[d&&Ce.jsx(yH,{doctorId:d.id,doctorName:d.name}),Ce.jsxs(td,{children:[Ce.jsx(rd,{className:"pb-3",children:Ce.jsx(nd,{className:"text-sm",children:"Quick Actions"})}),Ce.jsxs(sd,{className:"space-y-2",children:[Ce.jsxs(Hc,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>n("/customer/appointments"),children:[Ce.jsx(ln,{className:"h-4 w-4 mr-2"}),"View My Appointments"]}),Ce.jsxs(Hc,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>{var e;return window.scrollTo({top:(null==(e=document.querySelector('[data-section="appointments"]'))?void 0:e.offsetTop)||0,behavior:"smooth"})},children:[Ce.jsx(yn,{className:"h-4 w-4 mr-2"}),"View My Appointments"]})]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{className:"pb-3",children:Ce.jsx(nd,{className:"text-sm",children:"Need Help?"})}),Ce.jsxs(sd,{children:[Ce.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Select a date to see which branch and doctor will be available for your appointment."}),Ce.jsxs("div",{className:"space-y-2 text-xs",children:[Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Ce.jsx("span",{children:"Available"})]}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),Ce.jsx("span",{children:"Not Available"})]})]})]})]})]})})]})})},gH=()=>{const e=Dt();return Ce.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[Ce.jsxs("div",{className:"mb-6",children:[Ce.jsxs(Hc,{variant:"outline",onClick:()=>e("/customer/appointments"),className:"mb-4",children:[Ce.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Back to Appointments"]}),Ce.jsx("h1",{className:"text-3xl font-bold text-customer",children:"Book New Appointment"}),Ce.jsx("p",{className:"text-muted-foreground mt-2",children:"Schedule your eye examination with our qualified optometrists"})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"Appointment Booking"}),Ce.jsx(ad,{children:"Select your preferred date, time, and appointment type to schedule your visit"})]}),Ce.jsx(sd,{children:Ce.jsx(vH,{onSuccess:()=>{e("/customer/appointments")}})})]})]})},bH={}.VITE_API_URL||"http://127.0.0.1:8000/api",jH=({isOpen:e,onClose:t})=>{const[r,n]=Ct.useState(null),[a,s]=Ct.useState(!0),[i,o]=Ct.useState(null);return Ct.useEffect(()=>{if(e){(async()=>{try{s(!0);try{const e=await(async()=>(await Ac.get(`${bH}/branch-contacts/my-branch`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}})).data)();return void n(e.contact)}catch(e){console.log("API not available, using fallback contact info")}n({id:1,branch_id:1,branch_name:"Everbright Optical",phone_number:"+63 123 456 7890",formatted_phone:"+63 123 456 7890",email:"info@everbrightoptical.com",whatsapp_number:"+63 123 456 7890",formatted_whatsapp:"+63 123 456 7890",whatsapp_link:"https://wa.me/631234567890",address:"123 Main Street, Makati City",operating_hours:"Mon-Fri: 8AM-6PM, Sat: 9AM-4PM",social_media:{facebook:"https://facebook.com/everbrightoptical",instagram:"https://instagram.com/everbrightoptical"},is_active:!0})}catch(t){o(t instanceof Error?t.message:"Failed to load contact information"),console.error("Error fetching contact:",t)}finally{s(!1)}})()}},[e]),Ce.jsx(Xp,{open:e,onOpenChange:t,children:Ce.jsxs(ef,{className:"max-w-md mx-auto",children:[Ce.jsxs(tf,{children:[Ce.jsxs(nf,{className:"flex items-center gap-2",children:[Ce.jsx(sn,{className:"h-5 w-5 text-blue-600"}),"Contact Information"]}),Ce.jsx(af,{children:"Get in touch with our clinic"})]}),a?Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsx(hh,{className:"h-16 w-full"}),Ce.jsx(hh,{className:"h-16 w-full"}),Ce.jsx(hh,{className:"h-16 w-full"})]}):i||!r?Ce.jsxs("div",{className:"flex items-center gap-2 text-red-600 p-4",children:[Ce.jsx(Qr,{className:"h-4 w-4"}),Ce.jsx("p",{className:"text-sm",children:i||"Contact information not available"})]}):Ce.jsxs("div",{className:"space-y-4",children:[r.phone_number&&Ce.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[Ce.jsx(qn,{className:"h-4 w-4 text-blue-600"}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Phone"}),Ce.jsx("p",{className:"text-sm text-blue-700",children:r.formatted_phone})]})]}),r.email&&Ce.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[Ce.jsx(Dn,{className:"h-4 w-4 text-green-600"}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-green-900",children:"Email"}),Ce.jsx("p",{className:"text-sm text-green-700",children:r.email})]})]}),r.whatsapp_number&&Ce.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[Ce.jsx(Rn,{className:"h-4 w-4 text-green-600"}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-green-900",children:"WhatsApp"}),Ce.jsx("p",{className:"text-sm text-green-700",children:r.formatted_whatsapp})]})]}),r.address&&Ce.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[Ce.jsx(In,{className:"h-4 w-4 text-gray-600 mt-0.5"}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Address"}),Ce.jsx("p",{className:"text-sm text-gray-700",children:r.address})]})]}),r.operating_hours&&Ce.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[Ce.jsx(yn,{className:"h-4 w-4 text-gray-600 mt-0.5"}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Operating Hours"}),Ce.jsx("p",{className:"text-sm text-gray-700",children:r.operating_hours})]})]}),Object.keys(r.social_media).length>0&&Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Follow Us"}),Ce.jsxs("div",{className:"flex gap-2",children:[r.social_media.facebook&&Ce.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded-lg",children:[Ce.jsx(Nn,{className:"h-4 w-4 text-blue-600"}),Ce.jsx("span",{className:"text-sm text-blue-700",children:"Facebook"})]}),r.social_media.instagram&&Ce.jsxs("div",{className:"flex items-center gap-2 p-2 bg-pink-50 rounded-lg",children:[Ce.jsx(An,{className:"h-4 w-4 text-pink-600"}),Ce.jsx("span",{className:"text-sm text-pink-700",children:"Instagram"})]}),r.social_media.twitter&&Ce.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded-lg",children:[Ce.jsx(ia,{className:"h-4 w-4 text-blue-400"}),Ce.jsx("span",{className:"text-sm text-blue-600",children:"Twitter"})]}),r.social_media.linkedin&&Ce.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded-lg",children:[Ce.jsx(En,{className:"h-4 w-4 text-blue-700"}),Ce.jsx("span",{className:"text-sm text-blue-700",children:"LinkedIn"})]})]})]})]})]})})},wH=()=>{var e;const[t,r]=Ct.useState(null),[n,a]=Ct.useState(!1),[s,i]=Ct.useState(!1),{user:o}=Lc(),l=Dt(),{appointments:c,loading:d,error:u,refetch:h}=oh(),{update:m,loading:p}=ch();dh(),console.log("CustomerAppointments - Auth state:",{user:o,hasToken:!!sessionStorage.getItem("auth_token"),token:(null==(e=sessionStorage.getItem("auth_token"))?void 0:e.substring(0,10))+"..."});const f=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-green-100 text-green-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"no_show":return"bg-orange-100 text-orange-800"}},x=(e,t="Unknown")=>e?e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()):t;return Ce.jsxs("div",{className:"p-6 space-y-6",children:[Ce.jsxs("div",{className:"flex justify-between items-start",children:[Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Appointments"}),Ce.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage your upcoming and past appointments"})]}),Ce.jsxs(Hc,{onClick:()=>l("/customer/book-appointment"),className:"bg-customer hover:bg-customer/90",children:[Ce.jsx(zn,{className:"h-4 w-4 mr-2"}),"Book Appointment"]})]}),u&&Ce.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:Ce.jsxs("div",{className:"flex",children:[Ce.jsx(Qr,{className:"h-5 w-5 text-red-400"}),Ce.jsxs("div",{className:"ml-3",children:[Ce.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading appointments"}),Ce.jsx("p",{className:"mt-1 text-sm text-red-700",children:u}),Ce.jsx("div",{className:"mt-3",children:Ce.jsx(Hc,{size:"sm",variant:"outline",onClick:h,children:"Try Again"})})]})]})}),Ce.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Ce.jsx("div",{className:"lg:col-span-2 space-y-4",children:d?Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsx(hh,{className:"h-32 w-full"}),Ce.jsx(hh,{className:"h-32 w-full"}),Ce.jsx(hh,{className:"h-32 w-full"})]}):0===c.length?Ce.jsx(td,{children:Ce.jsxs(sd,{className:"p-8 text-center",children:[Ce.jsx(ln,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Appointments Found"}),Ce.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have any appointments scheduled yet."})]})}):c.map(e=>{var n,s,i,o,l,c;return Ce.jsx(td,{className:"hover:shadow-md transition-shadow",children:Ce.jsxs(sd,{className:"p-4",children:[Ce.jsxs("div",{className:"flex justify-between items-start mb-3",children:[Ce.jsxs("div",{children:[Ce.jsx("div",{className:"flex items-center gap-2 mb-1",children:Ce.jsx("span",{className:"font-semibold text-lg",children:x(e.type,"Appointment")})}),Ce.jsx(Yd,{className:f(e.status),children:e.status})]}),Ce.jsxs(Hc,{variant:"ghost",size:"sm",onClick:()=>r(t===e.id?null:e.id),children:[t===e.id?"Hide":"View"," Details"]})]}),Ce.jsxs("div",{className:"space-y-3",children:[Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(ln,{className:"w-4 h-4 text-gray-500"}),Ce.jsxs("span",{className:"text-sm text-gray-600",children:[Ju(new Date(e.appointment_date),"MMMM d, yyyy")," at ",e.start_time," - ",e.end_time]})]}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(da,{className:"w-4 h-4 text-gray-500"}),Ce.jsxs("span",{className:"text-sm text-gray-600",children:["Dr. ",(null==(n=e.optometrist)?void 0:n.name)||"TBD"]})]}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(In,{className:"w-4 h-4 text-gray-500"}),Ce.jsx("span",{className:"text-sm text-gray-600",children:(null==(s=e.branch)?void 0:s.name)||"Branch TBD"})]}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(wn,{className:"w-4 h-4 text-gray-500"}),Ce.jsx("span",{className:"text-sm text-gray-600",children:x(e.type,"Appointment")})]}),t===e.id&&Ce.jsxs("div",{className:"mt-4 space-y-3 pt-3 border-t",children:[Ce.jsx("h4",{className:"font-medium text-sm mb-3 text-gray-900",children:"Appointment Details:"}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(ln,{className:"w-4 h-4 text-gray-500"}),Ce.jsxs("span",{className:"text-gray-600",children:[Ce.jsx("strong",{children:"Date:"})," ",Ju(new Date(e.appointment_date),"EEEE, MMMM d, yyyy")]})]}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(yn,{className:"w-4 h-4 text-gray-500"}),Ce.jsxs("span",{className:"text-gray-600",children:[Ce.jsx("strong",{children:"Time:"})," ",e.start_time," - ",e.end_time]})]}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(da,{className:"w-4 h-4 text-gray-500"}),Ce.jsxs("span",{className:"text-gray-600",children:[Ce.jsx("strong",{children:"Doctor:"})," Dr. ",(null==(i=e.optometrist)?void 0:i.name)||"TBD"]})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-start gap-2",children:[Ce.jsx(In,{className:"w-4 h-4 text-gray-500 mt-0.5"}),Ce.jsxs("div",{className:"text-gray-600",children:[Ce.jsxs("div",{children:[Ce.jsx("strong",{children:"Branch:"})," ",(null==(o=e.branch)?void 0:o.name)||"Branch TBD"]}),(null==(l=e.branch)?void 0:l.address)&&Ce.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["📍 ",e.branch.address]}),(null==(c=e.branch)?void 0:c.phone)&&Ce.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["📞 ",e.branch.phone]})]})]}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(wn,{className:"w-4 h-4 text-gray-500"}),Ce.jsxs("span",{className:"text-gray-600",children:[Ce.jsx("strong",{children:"Type:"})," ",x(e.type,"Appointment")]})]}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(Qr,{className:"w-4 h-4 text-gray-500"}),Ce.jsxs("span",{className:"text-gray-600",children:[Ce.jsx("strong",{children:"Status:"}),Ce.jsx(Yd,{className:`ml-2 ${f(e.status)}`,children:x(e.status,"Unknown")})]})]})]})]}),e.notes&&Ce.jsxs("div",{className:"mt-4 pt-3 border-t",children:[Ce.jsx("h5",{className:"font-medium text-sm mb-2 text-gray-900",children:"Special Notes:"}),Ce.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md",children:e.notes})]})]})]}),Ce.jsxs("div",{className:"mt-4 flex gap-2",children:["scheduled"===e.status&&Ce.jsxs(Ce.Fragment,{children:[Ce.jsx(Hc,{size:"sm",variant:"outline",onClick:()=>(e.id,void a(!0)),disabled:p,children:"Reschedule"}),Ce.jsx(Hc,{size:"sm",variant:"outline",className:"text-red-600",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to cancel this appointment?"))try{await m(e.toString(),{status:"cancelled"}),h()}catch(t){console.error("Failed to cancel appointment:",t),alert("Failed to cancel appointment. Please try again.")}})(e.id),disabled:p,children:"Cancel"})]}),Ce.jsx(Hc,{size:"sm",variant:"outline",children:"Contact Clinic"})]})]})},e.id)})}),Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"Quick Actions"}),Ce.jsx(ad,{children:"Manage your appointments"})]}),Ce.jsx(sd,{className:"space-y-3",children:Ce.jsxs(Hc,{variant:"outline",className:"w-full",size:"sm",onClick:()=>i(!0),children:[Ce.jsx(qn,{className:"w-4 h-4 mr-2"}),"Contact Support"]})})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Appointment Stats"})}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{className:"text-sm",children:"Total Appointments"}),Ce.jsx("span",{className:"text-sm font-medium",children:c.length})]}),Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{className:"text-sm",children:"Upcoming"}),Ce.jsx("span",{className:"text-sm font-medium",children:c.filter(e=>"scheduled"===e.status||"confirmed"===e.status).length})]}),Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{className:"text-sm",children:"Completed"}),Ce.jsx("span",{className:"text-sm font-medium",children:c.filter(e=>"completed"===e.status).length})]})]})})]})]})]}),n&&Ce.jsx("div",{className:"mt-6",children:Ce.jsx(vH,{})}),Ce.jsx(jH,{isOpen:s,onClose:()=>i(!1)})]})},NH={}.VITE_API_URL||"http://localhost:8000",SH=Ac.create({baseURL:NH,headers:{"Content-Type":"application/json",Accept:"application/json"}});SH.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const _H=e=>SH.get(`/api-mysql.php/prescriptions/patient/${e}`),kH=async e=>{const t=await(e=>SH.get("/api-mysql.php/prescriptions",{params:e}))(e);return t.data};function OH(...e){return is(Vr(e))}const CH=Ct.createContext(void 0);const AH=({id:e,config:t})=>{var r,n,a,s,i;return Ce.jsx("style",{dangerouslySetInnerHTML:{__html:`\n          [data-chart="${e}"] {\n            --color-primary: ${(null==(r=t.primary)?void 0:r.color)||"hsl(var(--chart-1))"};\n            --color-secondary: ${(null==(n=t.secondary)?void 0:n.color)||"hsl(var(--chart-2))"};\n            --color-muted: ${(null==(a=t.muted)?void 0:a.color)||"hsl(var(--chart-3))"};\n            --color-background: ${(null==(s=t.background)?void 0:s.color)||"hsl(var(--chart-background))"};\n            --color-border: ${(null==(i=t.border)?void 0:i.color)||"hsl(var(--chart-border))"};\n          }\n        `}})};Ct.forwardRef(({className:e,...t},r)=>Ce.jsx("div",{ref:r,className:OH("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",e),...t})).displayName="ChartTooltip";const EH=Ct.forwardRef(({className:e,config:t,...r},n)=>{const a=Ct.useId();return Ce.jsxs("div",{ref:n,className:OH("w-full",e),"data-chart":a,...r,children:[Ce.jsx(AH,{id:a,config:t}),r.children]})});EH.displayName="ChartContainer";Ct.forwardRef(({className:e,active:t,payload:r,label:n,...a},s)=>{const{config:i}=function(){const e=Ct.useContext(CH);if(!e)throw new Error("useChart must be used within a ChartProvider");return e}();if(!t||!r||!r.length)return null;r[0].payload;const o=n;return Ce.jsxs("div",{ref:s,className:OH("grid min-w-[12rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-3 py-2 text-xs shadow-xl",e),...a,children:[Ce.jsx("div",{className:"font-medium",children:o}),Ce.jsx("div",{className:"grid gap-2",children:r.map((e,t)=>{const r=i[e.dataKey];return Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:(null==r?void 0:r.color)||`hsl(var(--chart-${t+1}))`}}),Ce.jsxs("span",{children:[(null==r?void 0:r.label)||e.dataKey,": ",e.value]})]},t)})})]})}).displayName="ChartTooltipContent";const PH={rightEye:{label:"Right Eye (OD)",color:"#2563eb"},leftEye:{label:"Left Eye (OS)",color:"#dc2626"}};function TH({data:e,title:t="Eye Progress Tracker",description:r,className:n}){const a=e.map(e=>({date:e.date,rightEye:"number"==typeof e.rightEye?e.rightEye:parseFloat(String(e.rightEye||"0")),leftEye:"number"==typeof e.leftEye?e.leftEye:parseFloat(String(e.leftEye||"0")),condition:e.condition,progressStatus:e.progressStatus,trackable:e.trackable})),s=a;console.log("Eye Tracker - Display Data:",s),console.log("Eye Tracker - Conditions found:",s.map(e=>({date:e.date,condition:e.condition,trackable:e.trackable,progressStatus:e.progressStatus})));const i=(()=>{if(s.length<2)return null;const e=s[s.length-1],t=s[s.length-2],r=(e.rightEye-t.rightEye+(e.leftEye-t.leftEye))/2;return{change:r,isPositive:r<=0,percentage:Math.abs(r).toFixed(2)}})(),o=Ct.useMemo(()=>s.filter(e=>e.condition&&"None"!==e.condition&&"Not specified"!==e.condition).map(e=>({date:e.date,condition:e.condition,progressStatus:e.progressStatus,trackable:e.trackable})),[s]),l=o.length>0?o[o.length-1]:null;return a&&0!==a.length?Ce.jsxs(td,{className:`w-full ${n||""}`,children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:t}),r&&Ce.jsx(ad,{children:r})]}),Ce.jsx(sd,{children:Ce.jsx(EH,{config:PH,className:"h-[350px] w-full",children:Ce.jsx(sC,{width:"100%",height:"100%",children:Ce.jsxs(aH,{accessibilityLayer:!0,data:s,margin:{top:10,right:20,left:10,bottom:10},children:[Ce.jsx(sV,{vertical:!1}),Ce.jsx(GV,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:e=>e.slice(0,10)}),Ce.jsx(iW,{tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:e=>`${e}D`}),Ce.jsx(PO,{formatter:(e,t)=>[`${e}D`,"rightEye"===t?"Right Eye (OD)":"Left Eye (OS)"],labelFormatter:e=>`Date: ${e}`,content:e=>{const{active:t,payload:r}=e;if(t&&r&&r.length){const e=r[0].payload,t=e.condition&&"None"!==e.condition&&"Not specified"!==e.condition;return Ce.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-3",children:[Ce.jsx("p",{className:"font-semibold text-sm mb-2",children:e.date}),Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600"}),Ce.jsxs("span",{className:"text-sm",children:["Right Eye: ",e.rightEye,"D"]})]}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx("div",{className:"w-3 h-3 rounded-full bg-red-600"}),Ce.jsxs("span",{className:"text-sm",children:["Left Eye: ",e.leftEye,"D"]})]}),t&&Ce.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(Qr,{className:"h-3 w-3 text-amber-500"}),Ce.jsx("span",{className:"text-xs font-semibold text-amber-700",children:e.condition})]}),e.progressStatus&&"N/A"!==e.progressStatus&&Ce.jsxs("span",{className:"text-xs text-gray-600 ml-5",children:["Status: ",e.progressStatus]})]})]})]})}return null}}),Ce.jsx(wV,{dataKey:"rightEye",type:"monotone",stroke:"#2563eb",strokeWidth:2,dot:e=>{const{cx:t,cy:r,payload:n}=e,a=n.condition&&"None"!==n.condition&&"Not specified"!==n.condition;return Ce.jsx("circle",{cx:t,cy:r,r:a?6:4,fill:"#2563eb",stroke:a?"#fbbf24":"#2563eb",strokeWidth:a?2:0},`rightEye-dot-${n.date}`)},activeDot:{r:6}},"rightEye"),Ce.jsx(wV,{dataKey:"leftEye",type:"monotone",stroke:"#dc2626",strokeWidth:2,dot:e=>{const{cx:t,cy:r,payload:n}=e,a=n.condition&&"None"!==n.condition&&"Not specified"!==n.condition;return Ce.jsx("circle",{cx:t,cy:r,r:a?6:4,fill:"#dc2626",stroke:a?"#fbbf24":"#dc2626",strokeWidth:a?2:0},`leftEye-dot-${n.date}`)},activeDot:{r:6}},"leftEye")]})})})}),l&&Ce.jsx("div",{className:"px-6 pb-4",children:Ce.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ce.jsx("div",{className:"flex items-start justify-between",children:Ce.jsxs("div",{className:"flex items-start gap-3",children:[Ce.jsx(Qr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"Tracked Condition"}),Ce.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ce.jsx(Yd,{variant:"outline",className:"bg-white border-blue-300 text-blue-700",children:l.condition}),l.progressStatus&&"N/A"!==l.progressStatus&&Ce.jsx(Yd,{variant:"Improving"===l.progressStatus?"default":"Stable"===l.progressStatus?"secondary":"destructive",className:"Improving"===l.progressStatus?"bg-green-100 text-green-800 border-green-300":"Stable"===l.progressStatus?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-red-100 text-red-800 border-red-300",children:l.progressStatus})]}),Ce.jsx("p",{className:"text-sm text-blue-700",children:o.length>1?`Tracked across ${o.length} examinations`:"First recorded examination"})]})]})})})}),Ce.jsx(id,{children:Ce.jsxs("div",{className:"flex w-full items-start justify-between gap-4 text-sm",children:[Ce.jsx("div",{className:"grid gap-2",children:i?Ce.jsxs(Ce.Fragment,{children:[Ce.jsxs("div",{className:"flex items-center gap-2 font-medium leading-none",children:[i.isPositive?"Improving":"Changing"," by ",i.percentage,"D",Ce.jsx(sa,{className:"h-4 w-4"})]}),Ce.jsxs("div",{className:"flex items-center gap-2 leading-none text-muted-foreground",children:["Showing vision data from ",s.length," examination",1!==s.length?"s":""]})]}):Ce.jsx("div",{className:"leading-none text-muted-foreground",children:"Add more examinations to see trends"})}),o.length>0&&Ce.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:Ce.jsxs("div",{className:"flex items-center gap-1",children:[Ce.jsxs("div",{className:"relative",children:[Ce.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600"}),Ce.jsx("div",{className:"absolute inset-0 w-3 h-3 rounded-full border-2 border-amber-400"})]}),Ce.jsx("span",{children:"= Tracked condition"})]})})]})})]}):Ce.jsxs(td,{className:`w-full ${n||""}`,children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:t}),r&&Ce.jsx(ad,{children:r})]}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"text-center py-12",children:[Ce.jsx(sa,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Vision Data Yet"}),Ce.jsx("p",{className:"text-gray-600 mb-4",children:"Your eye progress will be tracked here once you have multiple prescriptions."}),Ce.jsx("p",{className:"text-sm text-gray-500",children:"The chart will show how your eyesight changes over time, helping you understand your vision health."})]})})]})}const MH=()=>{var e,t,r,n;const{user:a}=Lc(),[s,i]=Ct.useState(null),[o,l]=Ct.useState([]),[c,d]=Ct.useState(!0),[u,h]=Ct.useState(null),[m,p]=Ct.useState(0);Ct.useEffect(()=>{(null==a?void 0:a.id)?f():null===a&&d(!1)},[null==a?void 0:a.id,a]),Ct.useEffect(()=>{const e=()=>{(null==a?void 0:a.id)&&f(!1)};return window.addEventListener("focus",e),()=>window.removeEventListener("focus",e)},[null==a?void 0:a.id]);const f=async(e=!1)=>{var t,r,n,a,s,i,o;try{d(!0),h(null),console.log("Loading prescriptions...");const r=await kH();console.log("Prescriptions response:",r);const n=(null==(t=r.data)?void 0:t.data)||r.data||[];if(e&&n.length>m&&m>0){const e=n.length-m;console.log(`New prescription(s) detected: ${e}`),alert(`New prescription(s) detected: ${e} prescription(s) added to your vision history!`)}l(n),p(n.length)}catch(c){console.error("Error loading prescriptions:",c),console.error("Error details:",{status:null==(r=c.response)?void 0:r.status,statusText:null==(n=c.response)?void 0:n.statusText,data:null==(a=c.response)?void 0:a.data,message:c.message}),401===(null==(s=c.response)?void 0:s.status)?h("Please log in to view your prescriptions"):403===(null==(i=c.response)?void 0:i.status)?h("You do not have permission to view prescriptions"):500===(null==(o=c.response)?void 0:o.status)?h("Server error. Please try again later or contact support."):h(c instanceof Error?c.message:"Failed to load prescriptions")}finally{d(!1)}},x=Ct.useMemo(()=>o.map(e=>{var t,r,n,a,s,i,o,l,c,d,u,h,m,p,f,x,y,v,g,b,j,w,N,S,_;const k=(null==(t=e.prescription_data)?void 0:t.right_eye)||{},O=(null==(r=e.prescription_data)?void 0:r.left_eye)||{},C=(null==(n=e.prescription_data)?void 0:n.condition)||e.condition,A=(null==(a=e.prescription_data)?void 0:a.trackable)||e.trackable,E=(null==(s=e.prescription_data)?void 0:s.progress_status)||e.progress_status,P=(null==(i=e.prescription_data)?void 0:i.progress_notes)||e.progress_notes,T=(null==(o=e.prescription_data)?void 0:o.referral_notes)||e.referral_notes;C&&"None"!==C&&console.log("Prescription with condition:",{id:e.id,date:e.exam_date,condition:C,trackable:A,progressStatus:E,prescription_data:e.prescription_data});const M=[];return(null==(l=e.prescription_data)?void 0:l.vision_acuity)&&M.push(`Vision acuity: ${e.prescription_data.vision_acuity}`),C&&"None"!==C&&(M.push(`Condition: ${C}`),A&&E&&M.push(`Progress: ${E}`),A&&P&&M.push(`Progress notes: ${P}`),!A&&T&&M.push(`Referral notes: ${T}`)),(null==(c=e.prescription_data)?void 0:c.additional_notes)&&M.push(e.prescription_data.additional_notes),(null==(d=e.prescription_data)?void 0:d.follow_up_date)&&M.push(`Follow-up scheduled for ${Ju(new Date(e.prescription_data.follow_up_date),"MMM d, yyyy")}`),0===M.length&&M.push("Eye examination completed successfully"),{id:e.id.toString(),date:(null==(u=e.appointment)?void 0:u.appointment_date)||e.issue_date,type:(e=>{switch(e){case"glasses":case"sunglasses":case"progressive":case"bifocal":default:return"comprehensive-exam";case"contact_lenses":return"contact-lens"}})(e.type),optometrist:(null==(h=e.optometrist)?void 0:h.name)||"Dr. Unknown",findings:M,prescription:{rightEye:{sphere:(null==(m=null==k?void 0:k.sphere)?void 0:m.toString())||"0.00",cylinder:(null==(p=null==k?void 0:k.cylinder)?void 0:p.toString())||"0.00",axis:(null==(f=null==k?void 0:k.axis)?void 0:f.toString())||"0",pd:(null==(x=null==k?void 0:k.pd)?void 0:x.toString())||"0",add:(null==(y=null==k?void 0:k.add)?void 0:y.toString())||"0.00"},leftEye:{sphere:(null==(v=null==O?void 0:O.sphere)?void 0:v.toString())||"0.00",cylinder:(null==(g=null==O?void 0:O.cylinder)?void 0:g.toString())||"0.00",axis:(null==(b=null==O?void 0:O.axis)?void 0:b.toString())||"0",pd:(null==(j=null==O?void 0:O.pd)?void 0:j.toString())||"0",add:(null==(w=null==O?void 0:O.add)?void 0:w.toString())||"0.00"}},condition:C,trackable:A,progressStatus:E,progressNotes:P,referralNotes:T,nextExam:(null==(N=e.prescription_data)?void 0:N.follow_up_date)||e.expiry_date,notes:(null==(S=e.prescription_data)?void 0:S.notes)||(null==(_=e.prescription_data)?void 0:_.additional_notes)||"Eye examination completed successfully"}}).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),[o]),y=e=>{switch(e){case"comprehensive-exam":return"bg-purple-100 text-purple-800";case"contact-lens":return"bg-blue-100 text-blue-800";case"follow-up":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},v=e=>{switch(e){case"comprehensive-exam":return"Comprehensive Exam";case"contact-lens":return"Contact Lens";case"follow-up":return"Follow-up";default:return e}},g=Ct.useMemo(()=>{const e=x.filter(e=>!!e.prescription).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime());if(0===e.length)return[];const t=e=>{if(null==e)return 0;const t=("number"==typeof e?e.toString():e).replace("+",""),r=Number(t);return isNaN(r)?0:r};return e.map((r,n)=>{var a,s,i,o,l,c,d,u,h,m,p,f;const x=t(null==(a=r.prescription)?void 0:a.rightEye.sphere),y=t(null==(s=r.prescription)?void 0:s.leftEye.sphere);let v=0,g=0,b="stable",j="stable";if(n>0){const r=e[n-1],a=t(null==(i=r.prescription)?void 0:i.rightEye.sphere),s=t(null==(o=r.prescription)?void 0:o.leftEye.sphere);v=Math.abs(x-a),g=Math.abs(y-s),b=v<=.25?"stable":v<=.5?"slight":"significant",j=g<=.25?"stable":g<=.5?"slight":"significant"}return{date:Ju(new Date(r.date),"MMM d, yyyy"),fullDate:r.date,examDate:r.date,reSphere:x,reCylinder:t(null==(l=r.prescription)?void 0:l.rightEye.cylinder),reAxis:t(null==(c=r.prescription)?void 0:c.rightEye.axis),rePD:t(null==(d=r.prescription)?void 0:d.rightEye.pd),reAdd:t(null==(u=r.prescription)?void 0:u.rightEye.add),reChange:v,reStatus:b,leSphere:y,leCylinder:t(null==(h=r.prescription)?void 0:h.leftEye.cylinder),leAxis:t(null==(m=r.prescription)?void 0:m.leftEye.axis),lePD:t(null==(p=r.prescription)?void 0:p.leftEye.pd),leAdd:t(null==(f=r.prescription)?void 0:f.leftEye.add),leChange:g,leStatus:j,visionAcuity:r.findings[0]||"N/A",optometrist:r.optometrist,isLatest:n===e.length-1,condition:r.condition||"Not specified",trackable:r.trackable||!1,progressStatus:r.progressStatus||"N/A",progressNotes:r.progressNotes||""}})},[x]),b=Ct.useMemo(()=>{const e=g.map(e=>({date:e.date,rightEye:e.reSphere,leftEye:e.leSphere,visionAcuity:e.visionAcuity,condition:e.condition,progressStatus:e.progressStatus,trackable:e.trackable}));return console.log("CustomerVisionHistory - Eye Tracker Data:",e),console.log("CustomerVisionHistory - Conditions:",e.map(e=>({date:e.date,condition:e.condition,trackable:e.trackable,progressStatus:e.progressStatus}))),e},[g]);return Ce.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[Ce.jsx("style",{children:"\n          :root {\n            --chart-1: 219 78% 61%;\n            --chart-2: 142 71% 45%;\n            --chart-3: 197 37% 24%;\n            --chart-4: 43 74% 66%;\n            --chart-5: 27 87% 67%;\n          }\n          .glass-card {\n            background: rgba(255, 255, 255, 0.85);\n            backdrop-filter: blur(10px);\n            border: 1px solid rgba(255, 255, 255, 0.2);\n          }\n          .progress-glow {\n            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);\n          }\n        "}),Ce.jsxs("div",{className:"p-4 space-y-4",children:[Ce.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ce.jsxs("div",{className:"flex items-center gap-4",children:[Ce.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:Ce.jsx(wn,{className:"w-6 h-6 text-white"})}),Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Vision History"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:"Track your eye health progress"})]})]}),Ce.jsxs(Hc,{onClick:f,disabled:c,variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-blue-50",children:[Ce.jsx(Vn,{className:"h-4 w-4 "+(c?"animate-spin":"")}),c?"Refreshing...":"Refresh"]})]}),Ce.jsx("div",{className:"max-w-6xl mx-auto",children:Ce.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[Ce.jsx("div",{className:"lg:col-span-2",children:Ce.jsxs(td,{className:"glass-card shadow-2xl border-0 overflow-hidden",children:[Ce.jsx(rd,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3",children:Ce.jsxs(nd,{className:"flex items-center gap-2 text-lg",children:[Ce.jsx(ln,{className:"w-5 h-5"}),"Examination History"]})}),Ce.jsx(sd,{className:"p-4",children:c?Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsx(hh,{className:"h-32 w-full"}),Ce.jsx(hh,{className:"h-32 w-full"}),Ce.jsx(hh,{className:"h-32 w-full"})]}):u?Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(Qr,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),Ce.jsx("p",{className:"text-red-600",children:"Failed to load vision history"}),Ce.jsx("p",{className:"text-sm text-gray-500 mt-2",children:u})]}):0===x.length?Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(wn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Vision History Found"}),Ce.jsx("p",{className:"text-gray-600",children:"You don't have any vision examinations recorded yet."})]}):Ce.jsx("div",{className:"space-y-3",children:x.map((e,t)=>Ce.jsx(td,{className:"group hover:shadow-lg transition-all duration-200 border border-gray-200 bg-white overflow-hidden",children:Ce.jsxs(sd,{className:"p-4",children:[Ce.jsxs("div",{className:"flex justify-between items-center mb-3",children:[Ce.jsxs("div",{className:"flex items-center gap-3",children:[Ce.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:["#",x.length-t]}),Ce.jsxs("div",{children:[Ce.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ce.jsx("span",{className:"font-semibold text-gray-900",children:Ju(new Date(e.date),"MMM d, yyyy")}),Ce.jsx(Yd,{className:`${y(e.type)} text-xs`,children:v(e.type)})]}),Ce.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[Ce.jsx(da,{className:"w-3 h-3"}),Ce.jsx("span",{children:e.optometrist})]})]})]}),Ce.jsx(Hc,{variant:"ghost",size:"sm",onClick:()=>i(s===e.id?null:e.id),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 px-2 py-1",children:Ce.jsx(wn,{className:"w-4 h-4"})})]}),e.prescription&&Ce.jsx("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:Ce.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[Ce.jsxs("div",{children:[Ce.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ce.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),Ce.jsx("span",{className:"font-medium text-blue-700",children:"Right Eye"})]}),Ce.jsxs("div",{className:"font-mono text-gray-800",children:[e.prescription.rightEye.sphere," / ",e.prescription.rightEye.cylinder," × ",e.prescription.rightEye.axis,"°"]})]}),Ce.jsxs("div",{children:[Ce.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ce.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),Ce.jsx("span",{className:"font-medium text-purple-700",children:"Left Eye"})]}),Ce.jsxs("div",{className:"font-mono text-gray-800",children:[e.prescription.leftEye.sphere," / ",e.prescription.leftEye.cylinder," × ",e.prescription.leftEye.axis,"°"]})]})]})}),s===e.id&&Ce.jsxs("div",{className:"mt-4 space-y-3 pt-3 border-t",children:[Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-sm mb-2",children:"Findings:"}),Ce.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:e.findings.map((e,t)=>Ce.jsx("li",{children:e},t))})]}),e.prescription&&Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-sm mb-2",children:"Prescription:"}),Ce.jsxs("div",{className:"bg-gray-50 p-3 rounded-md text-sm space-y-3",children:[Ce.jsxs("div",{children:[Ce.jsx("h5",{className:"font-medium text-blue-700 mb-2",children:"Right Eye (RE)"}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Sphere:"})," ",e.prescription.rightEye.sphere]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Cylinder:"})," ",e.prescription.rightEye.cylinder]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Axis:"})," ",e.prescription.rightEye.axis,"°"]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"PD:"})," ",e.prescription.rightEye.pd,"mm"]}),e.prescription.rightEye.add&&"0.00"!==e.prescription.rightEye.add&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Add:"})," ",e.prescription.rightEye.add]})]})]}),Ce.jsxs("div",{children:[Ce.jsx("h5",{className:"font-medium text-green-700 mb-2",children:"Left Eye (LE)"}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Sphere:"})," ",e.prescription.leftEye.sphere]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Cylinder:"})," ",e.prescription.leftEye.cylinder]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Axis:"})," ",e.prescription.leftEye.axis,"°"]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"PD:"})," ",e.prescription.leftEye.pd,"mm"]}),e.prescription.leftEye.add&&"0.00"!==e.prescription.leftEye.add&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Add:"})," ",e.prescription.leftEye.add]})]})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-sm mb-1",children:"Next Exam:"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:Ju(new Date(e.nextExam),"MMMM d, yyyy")})]}),Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-sm mb-1",children:"Notes:"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:e.notes})]})]})]})},e.id))})})]})}),Ce.jsxs("div",{className:"space-y-4",children:[b.length>0?Ce.jsx(TH,{data:b,title:"Eye Progress Tracker",description:b.length>0?`${Ju(new Date((null==(e=g[0])?void 0:e.examDate)||new Date),"MMMM yyyy")} - ${Ju(new Date((null==(t=g[g.length-1])?void 0:t.examDate)||new Date),"MMMM yyyy")}`:void 0,className:"border border-gray-200 shadow-md"}):Ce.jsx(td,{className:"border border-gray-200 shadow-md",children:Ce.jsx(sd,{className:"pt-6",children:Ce.jsxs("div",{className:"text-center py-12",children:[Ce.jsx(sa,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Vision Data Yet"}),Ce.jsx("p",{className:"text-gray-600 mb-4",children:"Your eye progress will be tracked here once you have multiple prescriptions."}),Ce.jsx("p",{className:"text-sm text-gray-500",children:"The chart will show how your eyesight changes over time, helping you understand your vision health."})]})})}),Ce.jsxs(td,{className:"border border-gray-200 shadow-md",children:[Ce.jsx(rd,{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3",children:Ce.jsxs(nd,{className:"flex items-center gap-2 text-lg",children:[Ce.jsx(wn,{className:"w-5 h-5"}),"Vision Summary"]})}),Ce.jsx(sd,{className:"p-4",children:Ce.jsxs("div",{className:"space-y-3",children:[Ce.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[Ce.jsx("span",{className:"text-sm text-gray-600",children:"Total Exams"}),Ce.jsx(Yd,{variant:"secondary",children:x.length})]}),Ce.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[Ce.jsx("span",{className:"text-sm text-gray-600",children:"Last Exam"}),Ce.jsx("span",{className:"text-sm font-medium",children:x.length>0?Ju(new Date((null==(r=x[0])?void 0:r.date)||new Date),"MMM d, yyyy"):"N/A"})]}),Ce.jsxs("div",{className:"flex items-center justify-between py-2",children:[Ce.jsx("span",{className:"text-sm text-gray-600",children:"Next Due"}),Ce.jsx("span",{className:"text-sm font-medium",children:x.length>0?Ju(new Date((null==(n=x[0])?void 0:n.nextExam)||new Date),"MMM d, yyyy"):"N/A"})]})]})})]}),Ce.jsxs(Hc,{className:"w-full",variant:"default",children:[Ce.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Report"]})]})]})})]})]})},DH=()=>{const{user:e}=Lc(),[t,r]=Ct.useState(""),[n,a]=Ct.useState(null),[s,i]=Ct.useState(null),[o,l]=Ct.useState(!1),[c,d]=Ct.useState(!1),[u,h]=Ct.useState(!1),[m,p]=Ct.useState(!1),[f,x]=Ct.useState([]),[y,v]=Ct.useState([]),[g,b]=Ct.useState({date:"",time:"",service:"",notes:"",phone:"",social_media:""});Ct.useEffect(()=>{(async()=>{d(!0);try{const e=await fetch("http://127.0.0.1:8000/api/schedules");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(t.schedules&&Object.keys(t.schedules).length>0){const e=Object.values(t.schedules).filter(e=>e.schedule&&e.schedule.length>0);e.length>0?i(e[0]):(console.log("No doctors with schedules found"),i(null))}else console.log("No schedules found in response:",t),i(null)}catch(e){console.error("Error fetching doctor schedule:",e),Es.error("Failed to fetch doctor schedule. Please check if the server is running."),i(null)}finally{d(!1)}})()},[]);const j=e=>{r(e),(async e=>{if(e){l(!0);try{const t=await fetch(`http://127.0.0.1:8000/api/appointments/availability?date=${e}`),r=await t.json();if(r.available&&r.availability&&r.availability.length>0){const t=r.availability[0];a({available:!0,branch:t.branch,optometrist:t.optometrist}),b(r=>({...r,date:e,time:"",service:"",branch:t.branch.name,optometrist:t.optometrist.name})),x(t.available_times.map(e=>e.display)),v(r.services||[]),Es.success(`${t.optometrist.name} is available at ${t.branch.name} on ${e}`)}else a(null),x([]),v([]),Es.error(r.message||"No optometrists available on this date")}catch(t){console.error("Error fetching availability:",t),Es.error("Failed to fetch availability")}finally{l(!1)}}})(e)},w=e=>{const[t,r]=e.split(" "),[n,a]=t.split(":").map(Number);let s=n+1;return 12===s&&"AM"===r?`12:${a.toString().padStart(2,"0")} PM`:13===s&&"AM"===r?`01:${a.toString().padStart(2,"0")} PM`:s>12?`${(s-12).toString().padStart(2,"0")}:${a.toString().padStart(2,"0")} PM`:`${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")} ${r}`};return Ce.jsx("div",{className:"max-w-2xl mx-auto p-6",children:Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center gap-2",children:[Ce.jsx(ln,{className:"h-5 w-5"}),"Book an Appointment"]}),Ce.jsx(ad,{children:"Select a date to see available appointment slots with Dr. Samuel Loreto Prieto"})]}),Ce.jsx(sd,{children:Ce.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),n&&e){h(!0);try{const t=e=>{const[t,r]=e.split(" "),[n,a]=t.split(":");let s=parseInt(n);return"PM"===r&&12!==s&&(s+=12),"AM"===r&&12===s&&(s=0),`${s.toString().padStart(2,"0")}:${a}`},s=e=>({"Eye Exam":"eye_exam","Contact Lens Fitting":"contact_fitting","Prescription Check":"consultation","Follow-up":"follow_up"}[e]||"consultation"),i={patient_id:e.id,optometrist_id:n.optometrist.id,branch_id:n.branch.id,appointment_date:g.date,start_time:t(g.time),end_time:t(w(g.time)),type:s(g.service),notes:g.notes,phone:g.phone,social_media:g.social_media},o=await fetch("http://127.0.0.1:8000/api/appointments/simple",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`},body:JSON.stringify(i)});if(o.ok)Es.success("Appointment booked successfully!"),b({date:"",time:"",service:"",notes:""}),r(""),a(null);else{const e=await o.json();Es.error(e.error||"Failed to book appointment")}}catch(s){console.error("Error booking appointment:",s),Es.error("Failed to book appointment")}finally{h(!1)}}else Es.error("Please select a date and ensure you are logged in")},className:"space-y-6",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"date",children:"Select Date"}),Ce.jsx(Yc,{id:"date",type:"date",value:t,onChange:e=>j(e.target.value),min:(new Date).toISOString().split("T")[0],required:!0,className:"w-full"})]}),Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{children:[Ce.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Dr. Samuel's Weekly Schedule"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:"View when Dr. Samuel is available at each branch"})]}),Ce.jsxs(Hc,{type:"button",variant:"outline",size:"sm",onClick:()=>p(!m),disabled:c,children:[Ce.jsx(wn,{className:"h-4 w-4 mr-2"}),m?"Hide":"Show"," Schedule"]})]}),m&&Ce.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:c?Ce.jsxs("div",{className:"text-center py-4",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),Ce.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading schedule..."})]}):s?Ce.jsxs("div",{className:"space-y-3",children:[Ce.jsx("div",{className:"text-center mb-4",children:Ce.jsxs("h4",{className:"font-medium text-gray-900",children:[s.doctor.name,"'s Weekly Rotation"]})}),Ce.jsx("div",{className:"overflow-x-auto",children:Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{className:"w-[120px]",children:"Day"}),Ce.jsx(Jm,{children:"Branch"}),Ce.jsx(Jm,{className:"w-[180px]",children:"Time"})]})}),Ce.jsx(Xm,{children:s.schedule.sort((e,t)=>e.day_of_week-t.day_of_week).map(e=>Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{children:Ce.jsx(Yd,{variant:"outline",className:"font-medium",children:e.day_name})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(In,{className:"h-4 w-4 text-gray-500"}),Ce.jsxs("div",{children:[Ce.jsx("div",{className:"font-medium",children:e.branch.name}),Ce.jsx("div",{className:"text-sm text-gray-500",children:e.branch.code})]})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(yn,{className:"h-4 w-4 text-gray-500"}),Ce.jsx("span",{className:"font-mono text-sm",children:e.time_range})]})})]},e.day_of_week))})]})}),Ce.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:Ce.jsxs("div",{className:"flex items-start gap-2",children:[Ce.jsx(da,{className:"h-4 w-4 text-blue-600 mt-0.5"}),Ce.jsx("div",{children:Ce.jsxs("p",{className:"text-sm text-blue-700",children:[Ce.jsx("strong",{children:"Tip:"})," Select a date above to see which branch Dr. Samuel will be at and book your appointment."]})})]})})]}):Ce.jsx("div",{className:"text-center py-4",children:Ce.jsx("p",{className:"text-gray-600",children:"No schedule available"})})}),o&&Ce.jsxs("div",{className:"text-center py-4",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),Ce.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Checking availability..."})]}),n&&Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg",children:[Ce.jsx(In,{className:"h-4 w-4 text-blue-600"}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium",children:"Branch"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:n.branch.name})]})]}),Ce.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-lg",children:[Ce.jsx(da,{className:"h-4 w-4 text-green-600"}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium",children:"Optometrist"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:n.optometrist.name})]})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"time",children:"Select Time"}),Ce.jsxs(Dm,{value:g.time,onValueChange:e=>b(t=>({...t,time:e})),required:!0,children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Choose a time slot"})}),Ce.jsx(Bm,{children:f.filter(e=>e&&""!==String(e).trim()).map(e=>Ce.jsx(qm,{value:e,children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(yn,{className:"h-4 w-4"}),e]})},e))})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"service",children:"Appointment Type (Service)"}),Ce.jsxs(Dm,{value:g.service,onValueChange:e=>b(t=>({...t,service:e})),required:!0,children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select appointment type"})}),Ce.jsx(Bm,{children:y.filter(e=>e&&""!==String(e).trim()).map(e=>Ce.jsx(qm,{value:e,children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(ta,{className:"h-4 w-4"}),e]})},e))})]})]}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"phone",children:"Contact Number"}),Ce.jsx(Yc,{id:"phone",type:"tel",value:g.phone,onChange:e=>b(t=>({...t,phone:e.target.value})),placeholder:"e.g., +63 912 345 6789",required:!0})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"social_media",children:"Social Media Handle (Optional)"}),Ce.jsx(Yc,{id:"social_media",type:"text",value:g.social_media,onChange:e=>b(t=>({...t,social_media:e.target.value})),placeholder:"e.g., @username or Facebook profile"})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"notes",children:"Additional Notes (Optional)"}),Ce.jsx(fh,{id:"notes",value:g.notes,onChange:e=>b(t=>({...t,notes:e.target.value})),placeholder:"Any specific concerns or requests...",rows:3})]}),Ce.jsx(Hc,{type:"submit",disabled:u||!g.time||!g.service||!g.phone,className:"w-full",children:u?Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Booking Appointment..."]}):Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(Sn,{className:"h-4 w-4"}),"Book Appointment"]})})]}),t&&!o&&!n&&Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(ln,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Appointments Available"}),Ce.jsx("p",{className:"text-gray-600",children:"Dr. Samuel Loreto Prieto is not available on this date. Please select a different date."})]})]})})]})})},IH=()=>{const{user:e}=Lc(),[t,r]=Ct.useState(null),[n,a]=Ct.useState(!1),[s,i]=Ct.useState("exam"),{prescriptions:o,loading:l,error:c}=(e=>{const[t,r]=Ct.useState([]),[n,a]=Ct.useState(!1),[s,i]=Ct.useState(null),o=async()=>{var t,n;if(e){a(!0),i(null);try{const t=(await _H(e)).data.sort((e,t)=>{var r,n;const a=new Date((null==(r=e.appointment)?void 0:r.appointment_date)||e.issue_date);return new Date((null==(n=t.appointment)?void 0:n.appointment_date)||t.issue_date).getTime()-a.getTime()});r(t)}catch(s){i((null==(n=null==(t=s.response)?void 0:t.data)?void 0:n.message)||"Failed to fetch patient prescriptions")}finally{a(!1)}}else r([])};return Ct.useEffect(()=>{o()},[e]),{prescriptions:t,loading:n,error:s,refetch:()=>o()}})((null==e?void 0:e.id)||null),d=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";case"upcoming":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},u=e=>{switch(e){case"glasses":return"Glasses";case"contact_lenses":return"Contact Lenses";case"sunglasses":return"Sunglasses";case"progressive":return"Progressive Lenses";case"bifocal":return"Bifocal Lenses";default:return e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}};return Ce.jsxs("div",{className:"p-6 space-y-6",children:[Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Prescriptions"}),Ce.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your vision prescriptions and orders"})]}),Ce.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Ce.jsx("div",{className:"lg:col-span-2",children:Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"Current Prescriptions"}),Ce.jsx(ad,{children:"Your active vision prescriptions"})]}),Ce.jsx(sd,{children:l?Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsx(hh,{className:"h-32 w-full"}),Ce.jsx(hh,{className:"h-32 w-full"}),Ce.jsx(hh,{className:"h-32 w-full"})]}):c?Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(Qr,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),Ce.jsx("p",{className:"text-red-600",children:"Failed to load prescriptions"}),Ce.jsx("p",{className:"text-sm text-gray-500 mt-2",children:c})]}):0===o.length?Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(wn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Prescriptions Found"}),Ce.jsx("p",{className:"text-gray-600",children:"You don't have any prescriptions yet."})]}):Ce.jsx("div",{className:"space-y-4",children:o.map(e=>{var n,a,s;return Ce.jsx(td,{className:"hover:shadow-md transition-shadow",children:Ce.jsxs(sd,{className:"p-4",children:[Ce.jsxs("div",{className:"flex justify-between items-start mb-3",children:[Ce.jsxs("div",{children:[Ce.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[(e.type,Ce.jsx(wn,{className:"w-4 h-4"})),Ce.jsx("span",{className:"font-semibold",children:u(e.type)})]}),Ce.jsx(Yd,{className:d(e.status),children:e.status})]}),Ce.jsxs(Hc,{variant:"ghost",size:"sm",onClick:()=>r(t===e.id?null:e.id),children:[t===e.id?"Hide":"View"," Details"]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[Ce.jsx(ln,{className:"w-4 h-4"}),Ce.jsxs("span",{children:["Issued: ",Ju(new Date((null==(n=e.appointment)?void 0:n.appointment_date)||e.issue_date),"MMM d, yyyy")]})]}),Ce.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[Ce.jsx(Qr,{className:"w-4 h-4"}),Ce.jsxs("span",{children:["Valid until: ",Ju(new Date(e.expiry_date),"MMM d, yyyy")]})]}),t===e.id&&Ce.jsxs("div",{className:"mt-4 space-y-3 pt-3 border-t",children:[Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-sm mb-2",children:"Eye Examination Results:"}),Ce.jsxs("div",{className:"bg-gray-50 p-3 rounded-md text-sm space-y-3",children:[Ce.jsxs("div",{children:[Ce.jsx("h5",{className:"font-medium text-blue-700 mb-2",children:"Right Eye (OD)"}),Ce.jsx("div",{className:"grid grid-cols-2 gap-2",children:(()=>{const t="string"==typeof e.right_eye?JSON.parse(e.right_eye):e.right_eye||{};return Ce.jsxs(Ce.Fragment,{children:[(null==t?void 0:t.sphere)&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Sphere:"})," ",t.sphere]}),(null==t?void 0:t.cylinder)&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Cylinder:"})," ",t.cylinder]}),(null==t?void 0:t.axis)&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Axis:"})," ",t.axis,"°"]}),(null==t?void 0:t.pd)&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"PD:"})," ",t.pd,"mm"]})]})})()})]}),Ce.jsxs("div",{children:[Ce.jsx("h5",{className:"font-medium text-green-700 mb-2",children:"Left Eye (OS)"}),Ce.jsx("div",{className:"grid grid-cols-2 gap-2",children:(()=>{const t="string"==typeof e.left_eye?JSON.parse(e.left_eye):e.left_eye||{};return Ce.jsxs(Ce.Fragment,{children:[(null==t?void 0:t.sphere)&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Sphere:"})," ",t.sphere]}),(null==t?void 0:t.cylinder)&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Cylinder:"})," ",t.cylinder]}),(null==t?void 0:t.axis)&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Axis:"})," ",t.axis,"°"]}),(null==t?void 0:t.pd)&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"PD:"})," ",t.pd,"mm"]})]})})()})]}),e.vision_acuity&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Vision Acuity:"})," ",e.vision_acuity]})]})]}),(e.lens_type||e.coating||e.recommendations)&&Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-sm mb-2",children:"Prescription Recommendations:"}),Ce.jsxs("div",{className:"bg-blue-50 p-3 rounded-md text-sm space-y-1",children:[e.lens_type&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Lens Type:"})," ",e.lens_type]}),e.coating&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Coating:"})," ",e.coating]}),e.recommendations&&Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Recommendations:"})," ",e.recommendations]})]})]}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-sm mb-1",children:"Optometrist:"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:(null==(a=e.optometrist)?void 0:a.name)||"Unknown"})]}),Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-sm mb-1",children:"Branch:"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:(null==(s=e.branch)?void 0:s.name)||"Unknown"})]})]}),e.additional_notes&&Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-sm mb-1",children:"Additional Notes:"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:e.additional_notes})]}),e.follow_up_date&&Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-sm mb-1",children:"Follow-up Date:"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:Ju(new Date(e.follow_up_date),"MMM d, yyyy")})]}),e.follow_up_notes&&Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-sm mb-1",children:"Follow-up Notes:"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:e.follow_up_notes})]})]})]})]})},e.id)})})})]})}),Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Quick Actions"})}),Ce.jsxs(sd,{className:"space-y-2",children:[Ce.jsxs(Hc,{className:"w-full",variant:"default",onClick:()=>{i("order"),a(!0)},children:[Ce.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Order New Glasses"]}),Ce.jsxs(Hc,{className:"w-full",variant:"outline",onClick:()=>{i("consultation"),a(!0)},children:[Ce.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Contact Optometrist"]}),Ce.jsxs(Hc,{className:"w-full",variant:"outline",onClick:()=>{i("exam"),a(!0)},children:[Ce.jsx(ta,{className:"w-4 h-4 mr-2"}),"Schedule Eye Exam"]})]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Prescription Summary"})}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"space-y-3",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsx("span",{className:"text-sm text-gray-600",children:"Active Prescriptions"}),Ce.jsx(Yd,{variant:"secondary",children:o.filter(e=>"active"===e.status).length})]}),Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsx("span",{className:"text-sm text-gray-600",children:"Expiring Soon"}),Ce.jsx(Yd,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:o.filter(e=>Math.ceil((new Date(e.expiry_date).getTime()-(new Date).getTime())/864e5)<=30&&"active"===e.status).length})]}),Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsx("span",{className:"text-sm text-gray-600",children:"Total Prescriptions"}),Ce.jsx(Yd,{variant:"secondary",children:o.length})]})]})})]})]})]}),Ce.jsx(Xp,{open:n,onOpenChange:a,children:Ce.jsxs(ef,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:(()=>{switch(s){case"order":return"Order New Glasses";case"consultation":return"Contact Optometrist";case"exam":return"Schedule Eye Exam";default:return"Book Appointment"}})()}),Ce.jsxs(af,{children:["order"===s&&"Book an appointment to order new glasses based on your prescription.","consultation"===s&&"Schedule a consultation with an optometrist to discuss your vision needs.","exam"===s&&"Schedule a comprehensive eye examination to update your prescription."]})]}),Ce.jsx(DH,{appointmentType:s,onSuccess:()=>a(!1)})]})})]})},RH=()=>{const{toast:e}=Jt(),{user:t}=Lc(),[r,n]=Ct.useState([]),[a,s]=Ct.useState([]),[i,o]=Ct.useState(!0),[l,c]=Ct.useState(!1),[d,u]=Ct.useState(null),[h,m]=Ct.useState(0),[p,f]=Ct.useState("");Ct.useEffect(()=>{x()},[null==t?void 0:t.id]);const x=async()=>{var r,a,i,l,c;if(null==t?void 0:t.id)try{o(!0),console.log("Fetching feedback data for user:",t);const[e,r]=await Promise.all([hx(),mx(t.id)]);console.log("Appointments response:",e),console.log("Feedback response:",r),n(e.appointments),s(r.data)}catch(d){console.error("Error fetching data:",d),console.error("Error details:",{message:d.message,status:null==(r=d.response)?void 0:r.status,statusText:null==(a=d.response)?void 0:a.statusText,data:null==(i=d.response)?void 0:i.data}),e({title:"Error",description:(null==(c=null==(l=d.response)?void 0:l.data)?void 0:c.message)||d.message||"Failed to fetch data",variant:"destructive"})}finally{o(!1)}else o(!1)},y=(e,t=!1)=>Ce.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(r=>Ce.jsx("button",{type:"button",disabled:!t,onClick:()=>t&&m(r),className:`text-2xl ${t?"cursor-pointer hover:scale-110 transition-transform":"cursor-default"} ${r<=e?"text-yellow-400":"text-gray-300"}`,children:"★"},r))}),v=e=>({1:"Very Poor",2:"Poor",3:"Average",4:"Good",5:"Excellent"}[e]||"Unknown");return i||!(null==t?void 0:t.id)?Ce.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ce.jsx(Tn,{className:"h-8 w-8 animate-spin"}),Ce.jsx("span",{className:"ml-2",children:"Loading feedback data..."})]}):Ce.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[Ce.jsxs("div",{className:"mb-6",children:[Ce.jsx("h1",{className:"text-3xl font-bold text-customer",children:"Customer Feedback"}),Ce.jsx("p",{className:"text-muted-foreground mt-2",children:"Share your experience and help us improve our services"})]}),Ce.jsxs(Mf,{defaultValue:"submit",className:"w-full",children:[Ce.jsxs(Df,{className:"grid w-full grid-cols-2",children:[Ce.jsx(If,{value:"submit",children:"Submit Feedback"}),Ce.jsx(If,{value:"history",children:"Feedback History"})]}),Ce.jsxs(Rf,{value:"submit",className:"space-y-6",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(Ln,{className:"h-5 w-5 text-customer"}),Ce.jsx("span",{children:"Submit New Feedback"})]}),Ce.jsx(ad,{children:"Select a completed appointment and share your experience"})]}),Ce.jsxs(sd,{className:"space-y-6",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"appointment",children:"Select Appointment"}),Ce.jsxs(Dm,{value:(null==d?void 0:d.id.toString())||"",onValueChange:e=>{const t=r.find(t=>t.id.toString()===e);u(t||null)},children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Choose an appointment to review"})}),Ce.jsx(Bm,{children:r.map(e=>Ce.jsx(qm,{value:e.id.toString(),children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-4 w-4"}),Ce.jsxs("span",{children:[e.date," at ",e.time]}),Ce.jsx(Yd,{variant:"outline",children:e.type})]})},e.id))})]})]}),d&&Ce.jsx(td,{className:"bg-muted/50",children:Ce.jsxs(sd,{className:"pt-4",children:[Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsx("span",{children:d.date})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(yn,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsx("span",{children:d.time})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(In,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsx("span",{children:d.branch_name})]})]}),d.optometrist_name&&Ce.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[Ce.jsx(da,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsx("span",{children:d.optometrist_name})]})]})}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{children:"Rating"}),Ce.jsxs("div",{className:"space-y-2",children:[y(h,!0),h>0&&Ce.jsx("p",{className:"text-sm text-muted-foreground",children:v(h)})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"comment",children:"Comments (Optional)"}),Ce.jsx(fh,{id:"comment",placeholder:"Tell us about your experience...",value:p,onChange:e=>f(e.target.value),rows:4,maxLength:1e3}),Ce.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.length,"/1000 characters"]})]}),Ce.jsxs(Hc,{onClick:async()=>{if(d&&0!==h)try{c(!0);const t={appointment_id:d.id,rating:h,comment:p.trim()||void 0};await(async e=>{const t=sessionStorage.getItem("auth_token");if(!t)throw new Error("No authentication token found");return(await ux.post("/feedback",e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json",Accept:"application/json"}})).data})(t),e({title:"Success",description:"Feedback submitted successfully!"}),u(null),m(0),f(""),await x()}catch(t){console.error("Error submitting feedback:",t),e({title:"Error",description:t.message||"Failed to submit feedback",variant:"destructive"})}finally{c(!1)}else e({title:"Validation Error",description:"Please select an appointment and provide a rating",variant:"destructive"})},disabled:l||!d||0===h,className:"w-full",variant:"customer",children:[l&&Ce.jsx(Tn,{className:"h-4 w-4 mr-2 animate-spin"}),"Submit Feedback"]})]})]}),0===r.length&&Ce.jsx(td,{children:Ce.jsx(sd,{className:"pt-6",children:Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(Ln,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Appointments Available for Feedback"}),Ce.jsx("p",{className:"text-muted-foreground",children:"You don't have any completed appointments that haven't been reviewed yet."})]})})})]}),Ce.jsx(Rf,{value:"history",className:"space-y-6",children:Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(ea,{className:"h-5 w-5 text-customer"}),Ce.jsx("span",{children:"Your Feedback History"})]}),Ce.jsx(ad,{children:"View all your submitted feedback"})]}),Ce.jsx(sd,{children:a.length>0?Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Appointment"}),Ce.jsx(Jm,{children:"Branch"}),Ce.jsx(Jm,{children:"Rating"}),Ce.jsx(Jm,{children:"Comment"}),Ce.jsx(Jm,{children:"Date"})]})}),Ce.jsx(Xm,{children:a.map(e=>{var t,r,n,a;return Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsx("div",{className:"font-medium",children:(null==(t=e.appointment)?void 0:t.appointment_type)||"Appointment"}),Ce.jsxs("div",{className:"text-sm text-muted-foreground",children:[null==(r=e.appointment)?void 0:r.appointment_date," at ",null==(n=e.appointment)?void 0:n.appointment_time]}),(null==(a=e.appointment)?void 0:a.optometrist)&&Ce.jsx("div",{className:"text-xs text-muted-foreground",children:e.appointment.optometrist.name})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(In,{className:"h-4 w-4 text-muted-foreground"}),Ce.jsx("span",{children:e.branch.name})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"space-y-1",children:[y(e.rating),Ce.jsx("div",{className:"text-sm text-muted-foreground",children:v(e.rating)})]})}),Ce.jsx(Zm,{children:e.comment?Ce.jsx("p",{className:"text-sm max-w-xs truncate",title:e.comment,children:e.comment}):Ce.jsx("span",{className:"text-muted-foreground text-sm",children:"No comment"})}),Ce.jsx(Zm,{children:Ce.jsx("div",{className:"text-sm",children:new Date(e.created_at).toLocaleDateString()})})]},e.id)})})]}):Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(ea,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Feedback Submitted"}),Ce.jsx("p",{className:"text-muted-foreground",children:"You haven't submitted any feedback yet. Complete an appointment to get started!"})]})})]})})]})]})},LH={}.VITE_API_URL||{}.VITE_API_BASE_URL||"http://127.0.0.1:8000/api",FH=e=>`${LH}${e.startsWith("/")?e:`/${e}`}`,BH=()=>{const e=sessionStorage.getItem("auth_token");return{"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""}},qH=Ac.create({baseURL:LH,headers:{"Content-Type":"application/json",Accept:"application/json"}});qH.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),qH.interceptors.response.use(e=>e,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const $H=()=>{const{user:e}=Lc(),{toast:t}=Jt(),[r,n]=Ct.useState(null),[a,s]=Ct.useState([]),[i,o]=Ct.useState(!0);Ct.useEffect(()=>{l()},[null==e?void 0:e.id]);const l=async()=>{if(null==e?void 0:e.id)try{o(!0);const t=await(async e=>(await qH.get(`/customers/${e}/receipts`)).data)(e.id);console.log("Receipts data:",t.data),s(t.data)}catch(r){console.error("Error fetching receipts:",r),t({title:"Error",description:r.message||"Failed to fetch receipts",variant:"destructive"})}finally{o(!1)}else o(!1)},c=e=>{switch(e){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"refunded":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=e=>{switch(e.toLowerCase()){case"card":case"credit card":case"debit card":case"online":return Ce.jsx(vn,{className:"w-4 h-4"});case"insurance":return Ce.jsx(wn,{className:"w-4 h-4"});default:return Ce.jsx("span",{className:"text-sm font-bold",children:"₱"})}},u=e=>{const t="string"==typeof e?parseFloat(e):Number(e);return isNaN(t)?"0.00":t.toFixed(2)};return i?Ce.jsx("div",{className:"p-6",children:Ce.jsxs("div",{className:"flex items-center justify-center py-8",children:[Ce.jsx(Tn,{className:"h-8 w-8 animate-spin"}),Ce.jsx("span",{className:"ml-2",children:"Loading receipts..."})]})}):(null==e?void 0:e.id)?Ce.jsxs("div",{className:"p-6 space-y-6",children:[Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Receipts"}),Ce.jsx("p",{className:"text-gray-600 mt-2",children:"View and download your payment receipts"})]}),0===a.length?Ce.jsx(td,{children:Ce.jsx(sd,{className:"p-6",children:Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(wn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Receipts Found"}),Ce.jsx("p",{className:"text-muted-foreground",children:"You don't have any receipts yet. Receipts will appear here after you complete appointments or purchases."})]})})}):Ce.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:Ce.jsx("div",{className:"lg:col-span-2 space-y-4",children:a.map(e=>{var a;return Ce.jsx(td,{className:"hover:shadow-md transition-shadow",children:Ce.jsxs(sd,{className:"p-4",children:[Ce.jsxs("div",{className:"flex justify-between items-start mb-3",children:[Ce.jsxs("div",{children:[Ce.jsx("div",{className:"flex items-center gap-2 mb-1",children:Ce.jsxs("span",{className:"font-semibold text-lg",children:["#",e.receipt_number]})}),Ce.jsx(Yd,{className:c(e.payment_status),children:e.payment_status})]}),Ce.jsxs(Hc,{variant:"ghost",size:"sm",onClick:()=>n(r===e.id?null:e.id),children:[r===e.id?"Hide":"View"," Details"]})]}),Ce.jsxs("div",{className:"space-y-3",children:[Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(ln,{className:"w-4 h-4 text-gray-500"}),Ce.jsx("span",{className:"text-sm text-gray-600",children:Ju(new Date(e.created_at),"MMM dd, yyyy")})]}),e.branch&&Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(In,{className:"w-4 h-4 text-gray-500"}),Ce.jsx("span",{className:"text-sm text-gray-600",children:e.branch.name})]}),(null==(a=e.appointment)?void 0:a.optometrist)&&Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(wn,{className:"w-4 h-4 text-gray-500"}),Ce.jsx("span",{className:"text-sm text-gray-600",children:e.appointment.optometrist.name})]}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[d(e.payment_method),Ce.jsx("span",{className:"text-sm text-gray-600 capitalize",children:e.payment_method})]}),Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsx("span",{className:"text-sm text-gray-500",children:"Total Amount"}),Ce.jsxs("span",{className:"text-lg font-semibold",children:["₱",u(e.total_amount)]})]})]}),r===e.id&&Ce.jsxs("div",{className:"mt-4 space-y-3 pt-3 border-t",children:[Ce.jsx("h4",{className:"font-medium text-sm mb-2",children:"Items:"}),Ce.jsx("div",{className:"space-y-2",children:e.items.map((e,t)=>Ce.jsxs("div",{className:"flex justify-between text-sm",children:[Ce.jsxs("span",{children:[e.description," (x",e.quantity,")"]}),Ce.jsxs("span",{children:["₱",u(e.total)]})]},t))}),Ce.jsxs("div",{className:"border-t pt-2 space-y-1",children:[Ce.jsxs("div",{className:"flex justify-between text-sm",children:[Ce.jsx("span",{children:"Subtotal"}),Ce.jsxs("span",{children:["₱",u(e.subtotal)]})]}),Ce.jsxs("div",{className:"flex justify-between text-sm",children:[Ce.jsx("span",{children:"Tax"}),Ce.jsxs("span",{children:["₱",u(e.tax_amount)]})]}),Ce.jsxs("div",{className:"flex justify-between text-sm font-bold",children:[Ce.jsx("span",{children:"Total"}),Ce.jsxs("span",{children:["₱",u(e.total_amount)]})]})]}),e.notes&&Ce.jsxs("div",{className:"mt-3 pt-3 border-t",children:[Ce.jsx("h5",{className:"font-medium text-sm mb-1",children:"Notes:"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:e.notes})]})]}),Ce.jsxs("div",{className:"flex gap-2 mt-4",children:[Ce.jsxs(Hc,{size:"sm",variant:"outline",onClick:()=>(async e=>{try{const r=sessionStorage.getItem("auth_token");if(!r)return void t({title:"Authentication Required",description:"Please log in to download receipts",variant:"destructive"});const n={}.VITE_API_URL||"http://localhost:8000/api",a=await fetch(`${n}/receipts/${e}/download`,{method:"GET",headers:{Authorization:`Bearer ${r}`}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const s=await a.blob(),i=window.URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=`receipt-${e}.pdf`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(i),t({title:"Download Started",description:"Receipt download has been initiated"})}catch(r){console.error("Download error:",r),t({title:"Download Failed",description:r.message||"Failed to download receipt",variant:"destructive"})}})(e.id),children:[Ce.jsx(bn,{className:"w-4 h-4 mr-2"}),"Download"]}),Ce.jsxs(Hc,{size:"sm",variant:"outline",onClick:()=>n(r===e.id?null:e.id),children:[Ce.jsx(wn,{className:"w-4 h-4 mr-2"}),r===e.id?"Hide":"View"]})]})]})},e.id)})})})]}):Ce.jsx("div",{className:"p-6",children:Ce.jsx(td,{children:Ce.jsx(sd,{className:"p-6",children:Ce.jsx("p",{className:"text-center text-muted-foreground",children:"Please log in to view your receipts."})})})})},zH=({product:e,isOpen:t,onClose:r,onReservationSuccess:n})=>{var a;const{user:s}=Lc(),[i,o]=Ct.useState(null),[l,c]=Ct.useState(1),[d,u]=Ct.useState(""),[h,m]=Ct.useState(!1),[p,f]=Ct.useState(null);Ct.useEffect(()=>{t&&(o(null),c(1),u(""),f(null))},[t]);const x=(null==(a=e.branch_availability)?void 0:a.filter(e=>e.is_available))||[],y=()=>{var t;if(!i)return 1;const r=null==(t=e.branch_availability)?void 0:t.find(e=>e.branch.id===i);return(null==r?void 0:r.available_quantity)||1};return t?Ce.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Ce.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:Ce.jsxs("div",{className:"p-6",children:[Ce.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Ce.jsx("h2",{className:"text-xl font-bold",children:"Reserve Product"}),Ce.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),Ce.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[Ce.jsx("h3",{className:"font-semibold text-lg",children:e.name}),Ce.jsx("p",{className:"text-gray-600 text-sm mb-2",children:e.description}),Ce.jsxs("p",{className:"font-bold text-blue-600",children:["₱",Number(e.price||0).toFixed(2)]})]}),p&&Ce.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:p}),Ce.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),i)if(s){m(!0),f(null);try{const t=await fetch(({}.VITE_API_URL||"http://127.0.0.1:8000/api")+"/reservations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:sessionStorage.getItem("auth_token")?`Bearer ${sessionStorage.getItem("auth_token")}`:""},body:JSON.stringify({product_id:e.id,branch_id:i,quantity:l,notes:d||null})});if(!t.ok){const e=await t.json().catch(()=>null);throw new Error(e&&e.message||"Failed to create reservation")}n(),r(),alert("Reservation created successfully! You will be notified when it's ready for pickup.")}catch(a){console.error("Reservation error:",a),f(a instanceof Error?a.message:"Failed to create reservation")}finally{m(!1)}}else f("You must be logged in to make a reservation");else f("Please select a branch")},className:"space-y-4",children:[Ce.jsxs("div",{children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Branch *"}),Ce.jsxs("select",{value:i||"",onChange:e=>o(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[Ce.jsx("option",{value:"",children:"Choose a branch..."}),x.map(e=>Ce.jsxs("option",{value:e.branch.id,children:[e.branch.name," - ",e.available_quantity," available"]},e.branch.id))]})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),Ce.jsx("input",{type:"number",min:"1",max:y(),value:l,onChange:e=>c(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),Ce.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: ",y()," pieces"]})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),Ce.jsx("textarea",{value:d,onChange:e=>u(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Any special requests or notes..."})]}),i&&Ce.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:(()=>{var t;const r=null==(t=e.branch_availability)?void 0:t.find(e=>e.branch.id===i),n=null==r?void 0:r.branch;return n?Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-blue-800",children:n.name}),Ce.jsx("p",{className:"text-sm text-blue-600",children:n.address}),n.phone&&Ce.jsxs("p",{className:"text-sm text-blue-600",children:["Phone: ",n.phone]})]}):null})()}),Ce.jsxs("div",{className:"flex space-x-3 pt-4",children:[Ce.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),Ce.jsx("button",{type:"submit",disabled:h||!i,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:h?"Creating...":"Reserve Product"})]})]}),Ce.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:Ce.jsxs("p",{className:"text-sm text-yellow-800",children:[Ce.jsx("strong",{children:"Important:"})," This is a reservation only. You must visit the branch to complete your purchase and pay physically. No online payment is available."]})})]})})}):null},UH=e=>{if(!e)return"";if(e.startsWith("http"))return e;if(e.startsWith("data:"))return e;return`${({}.VITE_API_URL||{}.VITE_API_BASE_URL||"http://127.0.0.1:8000/api-mysql.php").replace("/api-mysql.php","")}/storage/${e.startsWith("/")?e.substring(1):e}`},VH=(e,t="400x300")=>{const[r,n]=t.split("x").map(Number),a=encodeURIComponent(e||"N/A");return`data:image/svg+xml;base64,${btoa(`\n    <svg width="${r}" height="${n}" xmlns="http://www.w3.org/2000/svg">\n      <rect width="100%" height="100%" fill="#f3f4f6"/>\n      <text x="50%" y="50%" font-family="Arial, sans-serif" font-size="16" fill="#9ca3af" text-anchor="middle" dy=".3em">\n        ${a}\n      </text>\n    </svg>\n  `)}`},WH=()=>{const e=Date.now(),t=sessionStorage.getItem("lastProductDeletion"),r=e-12e4;return t&&parseInt(t)>r},HH=()=>{sessionStorage.removeItem("lastProductDeletion")},KH=e=>{const t=new CustomEvent("productDeleted",{detail:{productId:e}});window.dispatchEvent(t),(()=>{try{Object.keys(localStorage).forEach(e=>{(e.includes("products")||e.includes("app_data_p")||e.includes("localStorage_products"))&&localStorage.removeItem(e)}),Object.keys(sessionStorage).forEach(e=>{(e.includes("products")||e.includes("app_data_p"))&&sessionStorage.removeItem(e)}),console.log("Product caches cleared after deletion")}catch(e){console.error("Error clearing product caches:",e)}})(),sessionStorage.setItem("lastProductDeletion",Date.now().toString())},YH=()=>{const{user:e}=Lc(),t=null==e?void 0:e.role,{data:r=[]}=mo({queryKey:["activeBranches"],queryFn:Lp}),n=e=>e.name,[a,s]=Ct.useState([]),[i,o]=Ct.useState([]),[l,c]=Ct.useState(!1),[d,u]=Ct.useState(!1),[h,m]=Ct.useState(null),[p,f]=Ct.useState(""),[x,y]=Ct.useState("all"),[v,g]=Ct.useState("all"),[b,j]=Ct.useState("all"),[w,N]=Ct.useState(null),[S,_]=Ct.useState(!1),[k,O]=Ct.useState({}),[C,A]=Ct.useState({}),[E,P]=Ct.useState(null),[T,M]=Ct.useState(null),[D,I]=Ct.useState({}),R=e=>{M(null),P(e.targetTouches[0].clientX)},L=e=>{M(e.targetTouches[0].clientX)};Ct.useEffect(()=>{F()},[]),Ct.useEffect(()=>{B(!1);const e=setInterval(()=>{WH()||B(!0)},3e4),t=e=>{console.log("Product deleted, refreshing gallery:",e.detail.productId),B(!0)};return window.addEventListener("productDeleted",t),()=>{clearInterval(e),window.removeEventListener("productDeleted",t)}},[]);const F=async()=>{try{const e=await fetch("http://127.0.0.1:8000/api/product-categories");if(e.ok){const t=await e.json();o(t.categories||[])}}catch(e){console.error("Failed to fetch categories:",e)}},B=async(e=!1)=>{try{e||d||(c(!0),m(null));const t=Date.now(),r=await kp(p),n=Date.now()-t;console.log(`Products loaded in ${n}ms`),s(r)}catch(t){console.error("Failed to fetch products:",t),m("Failed to load products. Please try again.")}finally{e||d||c(!1),d||u(!0)}};Ct.useEffect(()=>{const e=setTimeout(()=>{WH()||B(!0)},500);return()=>clearTimeout(e)},[p]);const q=At.useMemo(()=>a.filter(e=>{var t,r,n;const a=""===p||e.name.toLowerCase().includes(p.toLowerCase())||(null==(t=e.description)?void 0:t.toLowerCase().includes(p.toLowerCase())),s="all"===x||(null==(r=e.category_id)?void 0:r.toString())===x,i=((null==(n=e.category_details)?void 0:n.name)||e.category||"").toString().toLowerCase(),o=`${e.name} ${e.model||""} ${e.description||""}`.toLowerCase();let l=!0;"frames"===v?l=i.includes("frame")||o.includes("frame"):"contact_lenses"===v?l=i.includes("contact")||o.includes("contact lens")||o.includes("contacts"):"eye_care"===v?l=i.includes("care")||i.includes("solution")||o.includes("solution")||o.includes("drop")||o.includes("cleaner"):"sunglasses"===v&&(l=i.includes("sunglass")||o.includes("sunglass")||o.includes("sun glasses"));let c=!0;return"frames"===v&&"all"!==b&&(c="cat-eye"===b?o.includes("cat eye")||o.includes("cateye"):o.includes(b)),a&&s&&l&&c}),[a,p,x,v,b]),$=r,z=(e,t)=>{if(!e.branch_availability)return"Not available";const r=e.branch_availability.find(e=>e.branch.code===t);return r?r.is_available?`${r.available_quantity} pcs`:"Out of Stock":"Not available"},U=(e,t)=>{if(!e.branch_availability)return"text-gray-500";const r=e.branch_availability.find(e=>e.branch.code===t);return r&&r.is_available?r.available_quantity<5?"text-yellow-600 font-semibold":"text-green-600 font-semibold":"text-red-500 font-semibold"};return Ce.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[Ce.jsx("style",{children:"\n        .scrollbar-hide {\n          -ms-overflow-style: none;\n          scrollbar-width: none;\n        }\n        .scrollbar-hide::-webkit-scrollbar {\n          display: none;\n        }\n        .cursor-zoom-in {\n          cursor: pointer;\n        }\n        .cursor-zoom-in:hover {\n          cursor: zoom-in;\n        }\n      "}),h&&Ce.jsx("div",{className:"max-w-4xl mx-auto mb-6",children:Ce.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl shadow-sm",children:Ce.jsxs("div",{className:"flex items-center",children:[Ce.jsx("svg",{className:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:Ce.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),h]})})}),Ce.jsx("div",{className:"max-w-7xl mx-auto mb-8",children:Ce.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6",children:Ce.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[Ce.jsxs("div",{className:"flex-1 relative",children:[Ce.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:Ce.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),Ce.jsx("input",{type:"text",placeholder:"Search for glasses, lenses, or eye care products...",value:p,onChange:e=>f(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm transition-all duration-200"})]}),Ce.jsxs("div",{className:"flex gap-2",children:[Ce.jsxs("button",{onClick:async()=>{HH(),await B(!1)},disabled:l,className:"px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[Ce.jsx(Vn,{className:"h-4 w-4 "+(l?"animate-spin":"")}),"Refresh"]}),p&&Ce.jsx("button",{onClick:()=>f(""),className:"px-4 py-3 text-gray-500 hover:text-gray-700 transition-colors",children:"Clear"})]})]})})}),Ce.jsx("div",{className:"max-w-7xl mx-auto mb-4",children:Ce.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-4",children:[Ce.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ce.jsx("button",{onClick:()=>{g("all"),j("all")},className:"px-3 py-2 rounded-lg text-sm font-medium "+("all"===v?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:"All"}),Ce.jsx("button",{onClick:()=>g("frames"),className:"px-3 py-2 rounded-lg text-sm font-medium "+("frames"===v?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:"Frames"}),Ce.jsx("button",{onClick:()=>{g("contact_lenses"),j("all")},className:"px-3 py-2 rounded-lg text-sm font-medium "+("contact_lenses"===v?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:"Contact Lenses"}),Ce.jsx("button",{onClick:()=>{g("eye_care"),j("all")},className:"px-3 py-2 rounded-lg text-sm font-medium "+("eye_care"===v?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:"Eye Care Products"}),Ce.jsx("button",{onClick:()=>{g("sunglasses"),j("all")},className:"px-3 py-2 rounded-lg text-sm font-medium "+("sunglasses"===v?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:"Sunglasses"})]}),"frames"===v&&Ce.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:["all","round","square","rectangle","cat-eye","aviator"].map(e=>Ce.jsx("button",{onClick:()=>j(e),className:"px-3 py-1.5 rounded-full text-xs font-medium "+(b===e?"bg-purple-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"),children:"all"===e?"All Shapes":e.replace("-"," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})]})}),i.length>0&&Ce.jsx("div",{className:"max-w-7xl mx-auto mb-8",children:Ce.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6",children:[Ce.jsxs("div",{className:"flex items-center mb-4",children:[Ce.jsx("svg",{className:"w-5 h-5 text-gray-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),Ce.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Browse by Category"})]}),Ce.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:[Ce.jsx("button",{onClick:()=>y("all"),className:"flex-shrink-0 px-4 py-2 rounded-lg font-medium transition-all duration-200 "+("all"===x?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg transform scale-105":"bg-white hover:bg-gray-50 text-gray-700 border border-gray-200"),children:"All Products"}),i.map(e=>Ce.jsxs("button",{onClick:()=>y(e.id.toString()),className:"flex-shrink-0 px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 "+(x===e.id.toString()?"text-white shadow-lg transform scale-105":"bg-white hover:bg-gray-50 text-gray-700 border border-gray-200"),style:{backgroundColor:x===e.id.toString()?e.color:void 0},children:[Ce.jsx("span",{className:"text-lg",children:e.icon}),Ce.jsx("span",{children:e.name}),e.product_count>0&&Ce.jsx("span",{className:"ml-1 px-2 py-0.5 rounded-full text-xs "+(x===e.id.toString()?"bg-white/20 text-white":"bg-gray-100 text-gray-600"),children:e.product_count})]},e.id))]})]})}),l&&Ce.jsx("div",{className:"max-w-4xl mx-auto",children:Ce.jsxs("div",{className:"text-center py-16",children:[Ce.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full mb-6",children:Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-white border-t-transparent"})}),Ce.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Loading Products"}),Ce.jsx("p",{className:"text-gray-500",children:"Discovering the perfect eye care solutions for you..."})]})}),Ce.jsx("div",{className:"max-w-7xl mx-auto",children:Ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:q.map(e=>{var r,a,s,o;return Ce.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-gray-100 hover:border-blue-200 transform hover:-translate-y-1",children:[e.image_paths&&e.image_paths.length>0?Ce.jsxs("div",{className:"relative",children:[Ce.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100 rounded-t-2xl focus-within:ring-2 focus-within:ring-blue-500 select-none cursor-zoom-in",tabIndex:0,onKeyDown:t=>{if(e.image_paths.length>1){const r=k[e.id]||0;if("ArrowLeft"===t.key){t.preventDefault();const n=r>0?r-1:e.image_paths.length-1;O(t=>({...t,[e.id]:n}))}else if("ArrowRight"===t.key){t.preventDefault();const n=r<e.image_paths.length-1?r+1:0;O(t=>({...t,[e.id]:n}))}}},onTouchStart:R,onTouchMove:L,onTouchEnd:()=>((e,t)=>{if(!E||!T)return;const r=E-T,n=r>50,a=r<-50;if(n||a){const r=k[e]||0;let s=r;n?s=r<t-1?r+1:0:a&&(s=r>0?r-1:t-1),O(t=>({...t,[e]:s}))}})(e.id,e.image_paths.length),onMouseEnter:()=>{return t=e.id,void I(e=>({...e,[t]:{isZooming:!0,x:50,y:50}}));var t},onMouseLeave:()=>{return t=e.id,void I(e=>({...e,[t]:{isZooming:!1,x:50,y:50}}));var t},children:[Ce.jsx("img",{src:UH(e.image_paths[k[e.id]||0]),alt:`${e.name} cover`,className:"w-full h-full object-contain transition-all duration-300",style:{transform:(null==(r=D[e.id])?void 0:r.isZooming)?"scale(1.25)":"scale(1)",transformOrigin:"center center"},onError:t=>{t.currentTarget.src=VH(e.name,"400x300")}}),(null==(a=D[e.id])?void 0:a.isZooming)&&Ce.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 pointer-events-none transition-opacity duration-300"}),Ce.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.image_paths.length>1&&Ce.jsxs(Ce.Fragment,{children:[Ce.jsx("button",{onClick:t=>{t.stopPropagation();const r=k[e.id]||0,n=r>0?r-1:e.image_paths.length-1;O(t=>({...t,[e.id]:n}))},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white/95 text-gray-700 rounded-full p-2 shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-200 hover:scale-110",children:Ce.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),Ce.jsx("button",{onClick:t=>{t.stopPropagation();const r=k[e.id]||0,n=r<e.image_paths.length-1?r+1:0;O(t=>({...t,[e.id]:n}))},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white/95 text-gray-700 rounded-full p-2 shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-200 hover:scale-110",children:Ce.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),Ce.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded-full",children:[(k[e.id]||0)+1," / ",e.image_paths.length]})]}),!(null==(s=D[e.id])?void 0:s.isZooming)&&Ce.jsxs("div",{className:"absolute top-3 right-3 bg-white/80 backdrop-blur-sm text-gray-700 text-xs px-2 py-1 rounded-md opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center space-x-1 shadow-sm",children:[Ce.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}),Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9"})]}),Ce.jsx("span",{children:"Hover to zoom"})]}),(null==(o=D[e.id])?void 0:o.isZooming)&&Ce.jsxs("div",{className:"absolute top-3 right-3 bg-blue-500/90 backdrop-blur-sm text-white text-xs px-2 py-1 rounded-md flex items-center space-x-1 shadow-lg",children:[Ce.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),Ce.jsx("span",{children:"1.25x Zoom"})]})]}),e.image_paths.length>1&&Ce.jsx("div",{className:"px-4 py-3 bg-gray-50/50",children:Ce.jsx("div",{className:"flex space-x-2 overflow-x-auto scrollbar-hide",children:e.image_paths.map((t,r)=>Ce.jsxs("button",{onClick:t=>{t.stopPropagation(),O(t=>({...t,[e.id]:r}))},className:"flex-shrink-0 relative group/thumb transition-all duration-200 "+((k[e.id]||0)===r?"transform scale-110":"hover:scale-105"),children:[Ce.jsx("img",{src:UH(t),alt:`${e.name} ${r+1}`,className:"w-16 h-16 object-cover rounded-lg border-2 transition-all duration-200 "+((k[e.id]||0)===r?"border-blue-500 ring-2 ring-blue-200 shadow-lg":"border-gray-200 hover:border-blue-300 hover:shadow-md"),onError:e=>{e.currentTarget.src=VH("N/A","64x64")}}),(k[e.id]||0)===r&&Ce.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:Ce.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:Ce.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},r))})})]}):Ce.jsx("div",{className:"aspect-[4/3] bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center text-gray-400",children:Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Ce.jsx("p",{className:"text-sm",children:"No Image Available"})]})}),Ce.jsxs("div",{className:"p-6",children:[Ce.jsxs("div",{className:"mb-4",children:[e.category_id&&i.find(t=>t.id===e.category_id)&&Ce.jsx("div",{className:"mb-3",children:(()=>{const t=i.find(t=>t.id===e.category_id);return t?Ce.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium text-white shadow-sm",style:{backgroundColor:t.color},children:[Ce.jsx("span",{children:t.icon}),Ce.jsx("span",{children:t.name})]}):null})()}),Ce.jsx("h3",{className:"font-bold text-xl text-gray-800 mb-2 group-hover:text-blue-600 transition-colors duration-200",children:e.name}),Ce.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-3",children:e.description}),Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsx("div",{className:"flex items-baseline",children:Ce.jsxs("span",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:["₱",Number(e.price||0).toFixed(2)]})}),Ce.jsxs("div",{className:"flex items-center space-x-1",children:[Ce.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),Ce.jsx("span",{className:"text-xs text-gray-500",children:"Available"})]})]})]}),Ce.jsxs("div",{className:"mb-6",children:[Ce.jsxs("button",{onClick:()=>A(t=>({...t,[e.id]:!t[e.id]})),className:"flex items-center justify-between w-full p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200 text-sm font-medium text-gray-700",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Ce.jsx("span",{children:C[e.id]?"Hide branch availability":"Check branch availability"})]}),Ce.jsx("svg",{className:"w-4 h-4 transition-transform duration-200 "+(C[e.id]?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),C[e.id]&&Ce.jsx("div",{className:"mt-3 space-y-2 bg-white border border-gray-100 rounded-lg p-3",children:$.map(t=>Ce.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-50 last:border-b-0",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),Ce.jsx("span",{className:"text-sm font-medium text-gray-700",children:n(t)})]}),Ce.jsx("span",{className:`text-sm font-semibold px-2 py-1 rounded-full ${U(e,t.code)}`,children:z(e,t.code)})]},t.id))})]}),"customer"===t&&Ce.jsx("div",{className:"space-y-3",children:e.branch_availability&&e.branch_availability.some(e=>e.is_available)?Ce.jsxs("button",{onClick:()=>(e=>{N(e),_(!0)})(e),className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 flex items-center justify-center space-x-2",children:[Ce.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),Ce.jsx("span",{children:"Reserve Product"})]}):Ce.jsxs("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-500 font-semibold py-3 px-6 rounded-xl cursor-not-allowed flex items-center justify-center space-x-2",children:[Ce.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})}),Ce.jsx("span",{children:"Out of Stock"})]})})]})]},e.id)})})}),0===q.length&&!l&&Ce.jsx("div",{className:"max-w-4xl mx-auto",children:Ce.jsxs("div",{className:"text-center py-16",children:[Ce.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-gray-100 to-gray-200 rounded-full mb-6",children:Ce.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),Ce.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-3",children:"No Products Found"}),Ce.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:p?`We couldn't find any products matching "${p}". Try adjusting your search terms.`:"No products are currently available. Please check back later."}),p&&Ce.jsxs("button",{onClick:()=>f(""),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[Ce.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ce.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Clear Search"]})]})}),w&&Ce.jsx(zH,{product:w,isOpen:S,onClose:()=>{_(!1),N(null)},onReservationSuccess:()=>{WH()||B()}})]})},GH="reservations",XH=()=>{const{productId:e}=Bt(),t=Dt(),[r,n]=Ct.useState(null),[a,s]=Ct.useState(0);Ct.useEffect(()=>{if(!e)return;const t=localStorage.getItem("localStorage_products");if(t)try{const r=JSON.parse(t).find(t=>t.id===e);if(r){const e={id:r.id||"",name:r.name||"",model:r.model||"",description:r.description||"",price:r.price||0,images:r.imageDataUrls||r.images||[],badges:r.badges||[],options:r.options||{prescription:!1}};n(e)}}catch(r){console.error("Error parsing products from localStorage:",r)}},[e]);return r?Ce.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[Ce.jsx("button",{onClick:()=>t("/customer/products"),className:"mb-4 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Back to Gallery"}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[Ce.jsxs("div",{children:[Ce.jsx("div",{className:"mb-4",children:r.images.length>0?Ce.jsx("img",{src:r.images[a],alt:`${r.name} ${a+1}`,className:"w-full h-96 object-cover rounded"}):Ce.jsx("div",{className:"w-full h-96 bg-gray-200 flex items-center justify-center text-gray-500 rounded",children:"No Image"})}),r.images.length>1&&Ce.jsx("div",{className:"flex gap-2 overflow-x-auto",children:r.images.map((e,t)=>Ce.jsx("img",{src:e,alt:`Thumbnail ${t+1}`,className:"w-20 h-20 object-cover rounded cursor-pointer border-2 "+(t===a?"border-blue-500":"border-gray-300"),onClick:()=>s(t)},t))})]}),Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-3xl font-bold mb-2",children:r.name}),Ce.jsx("p",{className:"text-lg text-gray-600 mb-4",children:r.model}),Ce.jsx("div",{className:"mb-4 flex flex-wrap gap-2",children:r.badges.map((e,t)=>Ce.jsx("span",{className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded",children:e},t))}),Ce.jsxs("p",{className:"text-2xl font-bold mb-4",children:["₱",Number(r.price||0).toFixed(2)]}),Ce.jsx("p",{className:"text-gray-700 mb-6",children:r.description}),Ce.jsxs("div",{className:"mb-6",children:[Ce.jsx("h3",{className:"font-semibold mb-2",children:"Options:"}),Ce.jsxs("ul",{className:"space-y-1",children:[r.options.color&&Ce.jsxs("li",{children:["Color: ",r.options.color]}),Ce.jsxs("li",{children:["Type: ",r.options.prescription?"Prescription":"Non-Prescription"]})]})]}),Ce.jsx("button",{onClick:()=>{if(!r)return;const e=localStorage.getItem(GH);let n=[];if(e)try{n=JSON.parse(e)}catch(s){console.error("Error parsing reservations:",s)}const a=n.findIndex(e=>e.productId===r.id);a>=0?n[a].quantity+=1:n.push({productId:r.id,quantity:1}),localStorage.setItem(GH,JSON.stringify(n)),t("/customer/reservations")},className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold",children:"Reserve the Item"})]})]})]}):Ce.jsx("div",{className:"p-4",children:"Product not found."})},QH="reservations",JH=()=>{const e=Dt(),[t,r]=Ct.useState([]),[n,a]=Ct.useState([]),[s,i]=Ct.useState(!1);Ct.useEffect(()=>{const e=localStorage.getItem(QH);if(e)try{r(JSON.parse(e))}catch(n){console.error("Error parsing reservations:",n)}const t=localStorage.getItem("localStorage_products");if(t)try{const e=JSON.parse(t).map(e=>({id:e.id||"",name:e.name||"",model:e.model||"",description:e.description||"",price:e.price||0,images:e.imageDataUrls||e.images||[],badges:e.badges||[],options:e.options||{prescription:!1}}));a(e)}catch(n){console.error("Error parsing products:",n)}},[]);const o=e=>n.find(t=>t.id===e);return s?Ce.jsxs("div",{className:"p-4 max-w-2xl mx-auto text-center",children:[Ce.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:[Ce.jsx("h2",{className:"text-xl font-bold",children:"Reservation Confirmed!"}),Ce.jsx("p",{children:"Your reservation has been successfully confirmed. Thank you for your purchase."})]}),Ce.jsx("button",{onClick:()=>e("/customer/products"),className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Back to Products"})]}):Ce.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[Ce.jsx("h2",{className:"text-2xl font-bold mb-4",children:"My Reservations"}),0===t.length?Ce.jsx("p",{className:"text-center text-gray-500",children:"No reservations yet."}):Ce.jsxs(Ce.Fragment,{children:[Ce.jsx("div",{className:"space-y-4 mb-6",children:t.map(e=>{const t=o(e.productId);return t?Ce.jsxs("div",{className:"border rounded-lg p-4 flex items-center gap-4",children:[Ce.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:t.images.length>0?Ce.jsx("img",{src:t.images[0],alt:t.name,className:"w-full h-full object-cover rounded"}):Ce.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center text-gray-500 rounded",children:"No Image"})}),Ce.jsxs("div",{className:"flex-grow",children:[Ce.jsx("h3",{className:"font-semibold",children:t.name}),Ce.jsx("p",{className:"text-sm text-gray-600",children:t.model}),Ce.jsxs("p",{className:"font-bold",children:["₱",Number(t.price||0).toFixed(2)]}),Ce.jsxs("p",{className:"text-sm",children:["Quantity: ",e.quantity]})]}),Ce.jsx("div",{className:"text-right",children:Ce.jsxs("p",{className:"font-bold",children:["₱",(t.price*e.quantity).toFixed(2)]})})]},e.productId):null})}),Ce.jsx("div",{className:"border-t pt-4 mb-6",children:Ce.jsxs("div",{className:"flex justify-between items-center text-xl font-bold",children:[Ce.jsx("span",{children:"Total:"}),Ce.jsxs("span",{children:["₱",t.reduce((e,t)=>{const r=o(t.productId);return e+(r?r.price*t.quantity:0)},0).toFixed(2)]})]})}),Ce.jsx("div",{className:"text-center",children:Ce.jsx("button",{onClick:()=>{localStorage.removeItem(QH),r([]),i(!0),setTimeout(()=>i(!1),3e3)},className:"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold",children:"Confirm Reservation"})})]}),Ce.jsx("div",{className:"mt-6 text-center",children:Ce.jsx("button",{onClick:()=>e("/customer/products"),className:"px-6 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Back to Products"})})]})};class ZH extends Ct.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?Ce.jsx("div",{className:"p-4",children:Ce.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[Ce.jsx("h2",{className:"font-bold text-lg mb-2",children:"Something went wrong!"}),Ce.jsx("p",{className:"mb-2",children:"The Product Gallery component encountered an error."}),this.state.error&&Ce.jsxs("details",{className:"mt-4",children:[Ce.jsx("summary",{className:"cursor-pointer font-semibold",children:"Error Details"}),Ce.jsxs("div",{className:"mt-2 p-2 bg-red-50 rounded text-sm",children:[Ce.jsxs("p",{children:[Ce.jsx("strong",{children:"Error:"})," ",this.state.error.message]}),Ce.jsx("pre",{className:"mt-2 text-xs overflow-auto",children:this.state.error.stack})]})]}),Ce.jsx("div",{className:"mt-4",children:Ce.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"Reload Page"})})]})}):this.props.children}}const eK=()=>{const{user:e}=Lc(),[t,r]=Ct.useState([]),[n,a]=Ct.useState(!0),[s,i]=Ct.useState(null),[o,l]=Ct.useState("all"),[c,d]=Ct.useState(null);Ct.useEffect(()=>{u()},[o]);const u=async()=>{try{a(!0),i(null);const e={}.VITE_API_URL||"http://127.0.0.1:8000/api",t=sessionStorage.getItem("auth_token");let n=`${e}/reservations`;"all"!==o&&(n+=`?status=${o}`);const s=await fetch(n,{headers:{Authorization:t?`Bearer ${t}`:""}});if(!s.ok)throw new Error("Failed to fetch reservations");const l=await s.json();r(l)}catch(e){console.error("Error fetching reservations:",e),i("Failed to load reservations")}finally{a(!1)}},h=async(e,t)=>{try{d(e);const r={}.VITE_API_URL||"http://127.0.0.1:8000/api",n=sessionStorage.getItem("auth_token"),a=await fetch(`${r}/reservations/${e}/${t}`,{method:"PUT",headers:{Authorization:n?`Bearer ${n}`:""}});if(!a.ok){const e=await a.json();throw new Error(e.message||`Failed to ${t} reservation`)}await u(),alert(`Reservation ${t}d successfully!`)}catch(r){console.error(`Error ${t}ing reservation:`,r),alert(r instanceof Error?r.message:`Failed to ${t} reservation`)}finally{d(null)}},m=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},p=e=>{switch(e.status){case"pending":return Ce.jsxs("div",{className:"flex space-x-2",children:[Ce.jsx("button",{onClick:()=>h(e.id,"approve"),disabled:c===e.id,className:"px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600 disabled:bg-gray-400",children:c===e.id?"Processing...":"Approve"}),Ce.jsx("button",{onClick:()=>h(e.id,"reject"),disabled:c===e.id,className:"px-3 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600 disabled:bg-gray-400",children:c===e.id?"Processing...":"Reject"})]});case"approved":return Ce.jsx("button",{onClick:()=>h(e.id,"complete"),disabled:c===e.id,className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 disabled:bg-gray-400",children:c===e.id?"Processing...":"Mark Complete"});default:return Ce.jsx("span",{className:"text-gray-500 text-sm",children:"No actions available"})}};return n?Ce.jsx("div",{className:"p-4",children:Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),Ce.jsx("p",{className:"mt-2",children:"Loading reservations..."})]})}):Ce.jsxs("div",{className:"p-4",children:[Ce.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ce.jsx("h2",{className:"text-2xl font-bold",children:"Branch Reservations"}),Ce.jsx("div",{className:"text-sm text-gray-600",children:(null==e?void 0:e.branch_name)||"Your Branch"})]}),s&&Ce.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:s}),Ce.jsx("div",{className:"mb-6",children:Ce.jsxs("select",{value:o,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Ce.jsx("option",{value:"all",children:"All Reservations"}),Ce.jsx("option",{value:"pending",children:"Pending"}),Ce.jsx("option",{value:"approved",children:"Approved"}),Ce.jsx("option",{value:"rejected",children:"Rejected"}),Ce.jsx("option",{value:"completed",children:"Completed"})]})}),Ce.jsx("div",{className:"space-y-4",children:0===t.length?Ce.jsx("div",{className:"text-center py-8 text-gray-500",children:Ce.jsx("p",{children:"No reservations found for your branch."})}):t.map(e=>{return Ce.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:Ce.jsxs("div",{className:"flex items-start space-x-4",children:[Ce.jsx("div",{className:"flex-shrink-0",children:e.product.image_paths&&e.product.image_paths.length>0?Ce.jsx("img",{src:(r=e.product.image_paths[0],`${({}.VITE_API_URL||"http://127.0.0.1:8000/api").replace("/api","")}/storage/${r.startsWith("/")?r.substring(1):r}`),alt:e.product.name,className:"w-16 h-16 object-cover rounded border",onError:e=>{e.currentTarget.style.display="none"}}):Ce.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded border flex items-center justify-center text-gray-500 text-xs",children:"No Image"})}),Ce.jsx("div",{className:"flex-1 min-w-0",children:Ce.jsxs("div",{className:"flex items-start justify-between",children:[Ce.jsxs("div",{children:[Ce.jsx("h3",{className:"font-semibold text-lg",children:e.product.name}),Ce.jsx("p",{className:"text-gray-600 text-sm mb-2",children:e.product.description}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Customer:"})," ",e.user.name]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Email:"})," ",e.user.email]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Quantity:"})," ",e.quantity]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Price:"})," ₱",Number(e.product.price).toFixed(2)]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Total:"})," ₱",(e.quantity*Number(e.product.price)).toFixed(2)]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Reserved:"})," ",(t=e.reserved_at,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})]}),e.notes&&Ce.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[Ce.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.notes]})]}),Ce.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[Ce.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),p(e)]})]})})]})},e.id);var t,r})}),Ce.jsxs("div",{className:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-4",children:[Ce.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[Ce.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.filter(e=>"pending"===e.status).length}),Ce.jsx("div",{className:"text-sm text-yellow-700",children:"Pending"})]}),Ce.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[Ce.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.filter(e=>"approved"===e.status).length}),Ce.jsx("div",{className:"text-sm text-blue-700",children:"Approved"})]}),Ce.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[Ce.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(e=>"completed"===e.status).length}),Ce.jsx("div",{className:"text-sm text-green-700",children:"Completed"})]}),Ce.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[Ce.jsx("div",{className:"text-2xl font-bold text-gray-600",children:t.length}),Ce.jsx("div",{className:"text-sm text-gray-700",children:"Total"})]})]})]})},tK={}.VITE_API_URL||"http://127.0.0.1:8000/api",rK=Ac.create({baseURL:tK,headers:{"Content-Type":"application/json"}});rK.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const nK=async e=>{const t=new URLSearchParams;(null==e?void 0:e.status)&&"all"!==e.status&&t.append("status",e.status),(null==e?void 0:e.branch_id)&&t.append("branch_id",e.branch_id.toString()),(null==e?void 0:e.date_from)&&t.append("date_from",e.date_from),(null==e?void 0:e.date_to)&&t.append("date_to",e.date_to);return(await rK.get(`/transactions?${t.toString()}`)).data},aK=async e=>(await rK.post("/transactions",e)).data,sK=async(e,t)=>(await rK.post(`/transactions/${e}/finalize`,t)).data,iK=async e=>{const t=new URLSearchParams;(null==e?void 0:e.status)&&"all"!==e.status&&t.append("status",e.status),(null==e?void 0:e.date_from)&&t.append("date_from",e.date_from),(null==e?void 0:e.date_to)&&t.append("date_to",e.date_to);return(await rK.get(`/customer/transactions?${t.toString()}`)).data},oK=async(e,t,r)=>{const n=new URLSearchParams;e&&n.append("date_from",e),t&&n.append("date_to",t),r&&n.append("branch_id",r.toString());return(await rK.get(`/admin/transactions/analytics?${n.toString()}`)).data},lK=async e=>(await rK.get(`/transactions/${e}/receipt/download`,{responseType:"blob"})).data,cK=({transactions:e})=>{const t=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e),r=e.filter(e=>e.reservation);return 0===r.length?Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(Fn,{className:"w-5 h-5"}),Ce.jsx("span",{children:"Reserved Products"})]})}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No products have been reserved yet."})})]}):Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(Fn,{className:"w-5 h-5"}),Ce.jsx("span",{children:"Reserved Products from Gallery"})]})}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>{var r,n,a,s,i,o,l,c,d,u,h,m,p,f;return Ce.jsxs("div",{className:"border rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[Ce.jsxs("div",{className:"aspect-square bg-gray-100 relative",children:[Ce.jsx("img",{src:(f=null==(r=e.reservation)?void 0:r.product,(null==f?void 0:f.image_url)||(null==f?void 0:f.image)||"/placeholder-product.jpg"),alt:null==(n=e.reservation)?void 0:n.product.name,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/placeholder-product.jpg"}}),Ce.jsx("div",{className:"absolute top-2 right-2",children:Ce.jsxs(Yd,{variant:"secondary",className:"bg-white/90",children:[null==(a=e.reservation)?void 0:a.quantity,"x"]})})]}),Ce.jsxs("div",{className:"p-4",children:[Ce.jsx("h3",{className:"font-medium text-lg mb-2 line-clamp-2",children:null==(s=e.reservation)?void 0:s.product.name}),Ce.jsxs("div",{className:"space-y-2 mb-4",children:[Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsx("span",{className:"text-sm text-muted-foreground",children:"Price:"}),Ce.jsx("span",{className:"font-medium",children:t((null==(i=e.reservation)?void 0:i.product.price)||0)})]}),Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsx("span",{className:"text-sm text-muted-foreground",children:"Quantity:"}),Ce.jsx("span",{className:"font-medium",children:null==(o=e.reservation)?void 0:o.quantity})]}),Ce.jsxs("div",{className:"flex justify-between items-center border-t pt-2",children:[Ce.jsx("span",{className:"text-sm font-medium",children:"Total:"}),Ce.jsx("span",{className:"font-bold text-lg",children:t(((null==(l=e.reservation)?void 0:l.product.price)||0)*((null==(c=e.reservation)?void 0:c.quantity)||0))})]})]}),Ce.jsxs("div",{className:"space-y-1 mb-4",children:[(null==(u=null==(d=e.reservation)?void 0:d.product)?void 0:u.brand)&&Ce.jsxs("p",{className:"text-xs text-muted-foreground",children:["Brand: ",e.reservation.product.brand]}),(null==(m=null==(h=e.reservation)?void 0:h.product)?void 0:m.category)&&Ce.jsxs("p",{className:"text-xs text-muted-foreground",children:["Category: ",e.reservation.product.category.name]})]}),Ce.jsxs("div",{className:"border-t pt-3",children:[Ce.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-2",children:[Ce.jsxs("span",{children:["Transaction: ",e.transaction_code]}),Ce.jsx("span",{children:(p=e.created_at,new Date(p).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}))})]}),Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsx(Yd,{variant:"outline",className:"text-xs",children:e.status}),Ce.jsx(Yd,{variant:"secondary",className:"text-xs",children:e.payment_method})]})]}),e.appointment&&Ce.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded border border-blue-200",children:[Ce.jsxs("div",{className:"flex items-center space-x-2 text-xs text-blue-700",children:[Ce.jsx(wn,{className:"w-3 h-3"}),Ce.jsx("span",{children:"Eye Examination included"})]}),e.appointment.optometrist&&Ce.jsx("p",{className:"text-xs text-blue-600 mt-1",children:e.appointment.optometrist.name})]})]})]},e.id)})}),Ce.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium",children:"Total Products Reserved:"}),Ce.jsx("p",{className:"text-2xl font-bold",children:r.reduce((e,t)=>{var r;return e+((null==(r=t.reservation)?void 0:r.quantity)||0)},0)})]}),Ce.jsxs("div",{className:"text-right",children:[Ce.jsx("p",{className:"text-sm font-medium",children:"Total Value:"}),Ce.jsx("p",{className:"text-2xl font-bold",children:t(r.reduce((e,t)=>{var r,n;return e+((null==(r=t.reservation)?void 0:r.product.price)||0)*((null==(n=t.reservation)?void 0:n.quantity)||0)},0))})]})]})})]})]})},dK=()=>{Lc();const{toast:e}=Jt(),[t,r]=Ct.useState([]),[n,a]=Ct.useState(null),[s,i]=Ct.useState(!0),[o,l]=Ct.useState(""),[c,d]=Ct.useState(!1);Ct.useEffect(()=>{u()},[]);const u=async()=>{try{i(!0);const e={}.VITE_API_URL||"http://localhost:8000/api",t=await fetch(`${e}/transactions/patients`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch patient transactions");const n=await t.json();r(n.patients||[])}catch(t){e({title:"Error",description:"Failed to load patient transactions",variant:"destructive"})}finally{i(!1)}},h=e=>{const t=[];if(e.reservation&&e.reservation.product){const r=e.reservation.product;let n=r.name||"Product";r.brand&&(n+=` - Brand: ${r.brand}`),r.category&&(n+=` - Category: ${r.category.name}`),r.model&&(n+=` - Model: ${r.model}`),r.description&&(n+=` - ${r.description}`),t.push({description:n,qty:e.reservation.quantity||1,unitPrice:r.price||0,amount:(r.price||0)*(e.reservation.quantity||1)})}return e.appointment&&t.push({description:"Eye Examination",qty:1,unitPrice:500,amount:500}),t},m=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e),p=e=>new Date(e).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}),f=t.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.email.toLowerCase().includes(o.toLowerCase()));return Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsx("h1",{className:"text-3xl font-bold",children:"Patient Transaction History"}),Ce.jsxs(Hc,{onClick:u,disabled:s,children:[Ce.jsx(ln,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Search Patients"})}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"space-y-4",children:Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"search",children:"Search by name or email"}),Ce.jsx(Yc,{id:"search",placeholder:"Enter patient name or email...",value:o,onChange:e=>l(e.target.value)})]})})})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Patients with Completed Transactions"})}),Ce.jsx(sd,{children:s?Ce.jsx("div",{className:"text-center py-8",children:"Loading patient data..."}):0===f.length?Ce.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No patients found"}):Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Patient Name"}),Ce.jsx(Jm,{children:"Email"}),Ce.jsx(Jm,{children:"Total Transactions"}),Ce.jsx(Jm,{children:"Total Spent"}),Ce.jsx(Jm,{children:"Appointments"}),Ce.jsx(Jm,{children:"Products"}),Ce.jsx(Jm,{children:"Last Transaction"}),Ce.jsx(Jm,{children:"Actions"})]})}),Ce.jsx(Xm,{children:f.map(e=>Ce.jsxs(Qm,{className:"cursor-pointer hover:bg-gray-50",children:[Ce.jsx(Zm,{className:"font-medium",children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(da,{className:"w-4 h-4"}),Ce.jsx("span",{children:e.name})]})}),Ce.jsx(Zm,{children:e.email}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{variant:"outline",children:e.total_transactions})}),Ce.jsx(Zm,{className:"font-semibold",children:m(e.total_spent)}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-1",children:[Ce.jsx(ln,{className:"w-4 h-4"}),Ce.jsx("span",{children:e.completed_appointments})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-1",children:[Ce.jsx(Fn,{className:"w-4 h-4"}),Ce.jsx("span",{children:e.reserved_products})]})}),Ce.jsx(Zm,{children:p(e.last_transaction_date)}),Ce.jsx(Zm,{children:Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(e=>{a(e),d(!0)})(e),children:[Ce.jsx(wn,{className:"w-4 h-4 mr-2"}),"View Details"]})})]},e.id))})]})})]}),Ce.jsx(Xp,{open:c,onOpenChange:d,children:Ce.jsxs(ef,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[Ce.jsx(tf,{children:Ce.jsxs(nf,{children:["Transaction Details for ",null==n?void 0:n.name]})}),n&&Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Patient Summary"})}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Transactions"}),Ce.jsx("p",{className:"text-2xl font-bold",children:n.total_transactions})]}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Spent"}),Ce.jsx("p",{className:"text-2xl font-bold",children:m(n.total_spent)})]}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Appointments"}),Ce.jsx("p",{className:"text-2xl font-bold",children:n.completed_appointments})]}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Products"}),Ce.jsx("p",{className:"text-2xl font-bold",children:n.reserved_products})]})]})})]}),Ce.jsx(cK,{transactions:n.transactions}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Transaction History"})}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"space-y-6",children:n.transactions.map(t=>{return Ce.jsxs("div",{className:"border rounded-lg p-6",children:[Ce.jsxs("div",{className:"flex justify-between items-start mb-4",children:[Ce.jsxs("div",{children:[Ce.jsx("p",{className:"font-medium text-lg",children:t.transaction_code}),Ce.jsx("p",{className:"text-sm text-muted-foreground",children:p(t.created_at)})]}),Ce.jsxs("div",{className:"text-right",children:[Ce.jsx("p",{className:"font-semibold text-xl",children:m(t.total_amount)}),Ce.jsxs("div",{className:"flex space-x-2 mt-2",children:[Ce.jsx(Yd,{variant:"outline",children:t.status}),Ce.jsx(Yd,{variant:"secondary",children:t.payment_method})]})]})]}),Ce.jsxs("div",{className:"space-y-4",children:[t.appointment&&Ce.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ce.jsxs("div",{className:"flex items-center space-x-3",children:[Ce.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:Ce.jsx(wn,{className:"w-6 h-6 text-blue-600"})}),Ce.jsxs("div",{children:[Ce.jsx("h4",{className:"font-medium text-blue-900",children:"Eye Examination"}),Ce.jsxs("p",{className:"text-sm text-blue-700",children:["Completed on ",p(t.appointment.appointment_date)]}),t.appointment.optometrist&&Ce.jsx("p",{className:"text-xs text-blue-600",children:t.appointment.optometrist.name})]})]})}),t.reservation&&t.reservation.product&&Ce.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:Ce.jsxs("div",{className:"flex items-start space-x-4",children:[Ce.jsx("div",{className:"w-16 h-16 bg-white rounded-lg border border-green-200 overflow-hidden",children:Ce.jsx("img",{src:(r=t.reservation.product,(null==r?void 0:r.image_url)||(null==r?void 0:r.image)||"/placeholder-product.jpg"),alt:t.reservation.product.name||"Product",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/placeholder-product.jpg"}})}),Ce.jsxs("div",{className:"flex-1",children:[Ce.jsx("h4",{className:"font-medium text-green-900",children:t.reservation.product.name||"Product"}),Ce.jsxs("p",{className:"text-sm text-green-700",children:["Quantity: ",t.reservation.quantity||1," × ",m(t.reservation.product.price||0)]}),Ce.jsxs("p",{className:"text-sm text-green-600",children:["Total: ",m((t.reservation.product.price||0)*(t.reservation.quantity||1))]}),t.reservation.product.brand&&Ce.jsxs("p",{className:"text-xs text-green-500",children:["Brand: ",t.reservation.product.brand]}),t.reservation.product.category&&Ce.jsxs("p",{className:"text-xs text-green-500",children:["Category: ",t.reservation.product.category.name]})]}),Ce.jsx("div",{className:"text-right",children:Ce.jsx("p",{className:"font-semibold text-green-900",children:m((t.reservation.product.price||0)*(t.reservation.quantity||1))})})]})})]}),"Completed"===t.status&&Ce.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[Ce.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"Receipt Preview"}),Ce.jsxs("div",{className:"space-y-2",children:[h(t).map((e,t)=>Ce.jsxs("div",{className:"flex justify-between items-center text-sm",children:[Ce.jsxs("div",{className:"flex-1",children:[Ce.jsx("p",{className:"font-medium",children:e.description}),Ce.jsxs("p",{className:"text-gray-600",children:["Qty: ",e.qty," × ",m(e.unitPrice)]})]}),Ce.jsx("div",{className:"text-right",children:Ce.jsx("p",{className:"font-medium",children:m(e.amount)})})]},t)),Ce.jsx("div",{className:"border-t pt-2 mt-2",children:Ce.jsxs("div",{className:"flex justify-between items-center font-medium",children:[Ce.jsx("span",{children:"Total:"}),Ce.jsx("span",{children:m(h(t).reduce((e,t)=>e+t.amount,0))})]})})]})]}),Ce.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[Ce.jsxs("div",{className:"text-sm text-muted-foreground",children:["Transaction completed on ",p(t.completed_at||t.created_at)]}),Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(async t=>{try{const r=await lK(t),n=window.URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download=`receipt_${t}.pdf`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(n),document.body.removeChild(a),e({title:"Success",description:"Receipt downloaded successfully"})}catch(r){e({title:"Error",description:"Failed to download receipt",variant:"destructive"})}})(t.id),children:[Ce.jsx(bn,{className:"w-4 h-4 mr-2"}),"Download Receipt"]})]})]},t.id);var r})})})]})]})]})})]})},uK=()=>{const e=Dt(),{toast:t}=Jt(),[r,n]=Ct.useState([]),[a,s]=Ct.useState(!0);Ct.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const e={}.VITE_API_URL||"http://localhost:8000/api",t=sessionStorage.getItem("auth_token"),r=await fetch(`${e}/appointments?status=completed`,{headers:{Authorization:t?`Bearer ${t}`:"","Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch appointments");const a=await r.json();n(a.data||a||[])}catch(e){console.error("Error loading appointments:",e),t({title:"Error",description:"Failed to load completed appointments",variant:"destructive"})}finally{s(!1)}},o=e=>new Date(`2000-01-01T${e}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return Ce.jsxs(Mf,{defaultValue:"create-receipts",className:"w-full",children:[Ce.jsxs(Df,{className:"grid w-full grid-cols-2",children:[Ce.jsxs(If,{value:"create-receipts",children:[Ce.jsx(zn,{className:"h-4 w-4 mr-2"}),"Create Receipts"]}),Ce.jsxs(If,{value:"transaction-history",children:[Ce.jsx(Un,{className:"h-4 w-4 mr-2"}),"Transaction History"]})]}),Ce.jsx(Rf,{value:"create-receipts",className:"mt-6",children:Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center gap-2",children:[Ce.jsx(Sn,{className:"h-5 w-5 text-staff"}),"Completed Appointments - Create Receipts"]}),Ce.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:'Click "Create Receipt" for completed appointments that don\'t have a receipt yet'})]}),Ce.jsx(sd,{children:a?Ce.jsx("div",{className:"flex justify-center items-center py-12",children:Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-staff"})}):0===r.length?Ce.jsxs("div",{className:"text-center py-12",children:[Ce.jsx(ln,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("p",{className:"text-gray-600",children:"No completed appointments found"})]}):Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Date & Time"}),Ce.jsx(Jm,{children:"Patient"}),Ce.jsx(Jm,{children:"Type"}),Ce.jsx(Jm,{children:"Optometrist"}),Ce.jsx(Jm,{children:"Receipt Status"}),Ce.jsx(Jm,{children:"Actions"})]})}),Ce.jsx(Xm,{children:r.map(t=>{var r,n;return Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex flex-col",children:[Ce.jsx("span",{className:"font-medium",children:(n=t.appointment_date,new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))}),Ce.jsxs("span",{className:"text-sm text-gray-600",children:[o(t.start_time)," - ",o(t.end_time)]})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(da,{className:"h-4 w-4 text-gray-400"}),Ce.jsxs("div",{children:[Ce.jsx("div",{className:"font-medium",children:t.patient.name}),Ce.jsx("div",{className:"text-sm text-gray-600",children:t.patient.email})]})]})}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{variant:"outline",className:"capitalize",children:t.type.replace(/_/g," ")})}),Ce.jsx(Zm,{children:Ce.jsx("div",{className:"text-sm",children:(null==(r=t.optometrist)?void 0:r.name)||"Not assigned"})}),Ce.jsx(Zm,{children:t.has_receipt?Ce.jsxs(Yd,{className:"bg-green-100 text-green-800",children:[Ce.jsx(Un,{className:"h-3 w-3 mr-1"}),"Has Receipt"]}):Ce.jsx(Yd,{variant:"outline",className:"text-orange-600 border-orange-300",children:"No Receipt"})}),Ce.jsx(Zm,{children:Ce.jsx("div",{className:"flex items-center gap-2",children:t.has_receipt?Ce.jsxs(Hc,{variant:"outline",size:"sm",disabled:!0,className:"text-gray-500",children:[Ce.jsx(Un,{className:"h-3 w-3 mr-1"}),"Receipt Created"]}):Ce.jsxs(Hc,{variant:"default",size:"sm",onClick:()=>{return r=t.id,void e(`/staff/create-receipt/${r}`);var r},className:"bg-green-600 hover:bg-green-700 text-white",children:[Ce.jsx(Sn,{className:"h-3 w-3 mr-1"}),"Create Receipt"]})})})]},t.id)})})]})})]})}),Ce.jsx(Rf,{value:"transaction-history",className:"mt-6",children:Ce.jsx(dK,{})})]})},hK=()=>{const[e,t]=Ct.useState("reservations");return Ce.jsxs("div",{className:"p-6 space-y-6",children:[Ce.jsx("div",{className:"flex justify-between items-center",children:Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reservations & Transactions"}),Ce.jsx("p",{className:"text-gray-600 mt-1",children:"Manage customer reservations, transactions, and receipts"})]})}),Ce.jsxs(Mf,{value:e,onValueChange:t,className:"w-full",children:[Ce.jsxs(Df,{className:"grid w-full grid-cols-3 lg:w-auto",children:[Ce.jsxs(If,{value:"reservations",className:"flex items-center gap-2",children:[Ce.jsx(Jn,{className:"h-4 w-4"}),Ce.jsx("span",{className:"hidden sm:inline",children:"Product Reservations"}),Ce.jsx("span",{className:"sm:hidden",children:"Reservations"})]}),Ce.jsxs(If,{value:"transactions",className:"flex items-center gap-2",children:[Ce.jsx(Un,{className:"h-4 w-4"}),Ce.jsx("span",{className:"hidden sm:inline",children:"Receipts & Transactions"}),Ce.jsx("span",{className:"sm:hidden",children:"Receipts"})]}),Ce.jsxs(If,{value:"totals",className:"flex items-center gap-2",children:[Ce.jsx(nn,{className:"h-4 w-4"}),Ce.jsx("span",{className:"hidden sm:inline",children:"Totals & Summary"}),Ce.jsx("span",{className:"sm:hidden",children:"Summary"})]})]}),Ce.jsx(Rf,{value:"reservations",className:"mt-6",children:Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center gap-2",children:[Ce.jsx(Jn,{className:"h-5 w-5 text-staff"}),"Customer Product Reservations"]}),Ce.jsx(ad,{children:"Approve, reject, and manage customer product reservations from your branch"})]}),Ce.jsx(sd,{className:"p-0",children:Ce.jsx(eK,{})})]})}),Ce.jsx(Rf,{value:"transactions",className:"mt-6",children:Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center gap-2",children:[Ce.jsx(Un,{className:"h-5 w-5 text-staff"}),"Appointments & Receipts"]}),Ce.jsx(ad,{children:"Create receipts for completed appointments and view all patient transaction history"})]}),Ce.jsx(sd,{className:"p-0",children:Ce.jsx(uK,{})})]})}),Ce.jsx(Rf,{value:"totals",className:"mt-6",children:Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center gap-2",children:[Ce.jsx(nn,{className:"h-5 w-5 text-staff"}),"Totals & Summary"]}),Ce.jsx(ad,{children:"Overview of reservations and transactions totals"})]}),Ce.jsx(sd,{children:Ce.jsx(mK,{})})]})})]})]})},mK=()=>{const[e,t]=At.useState({totalReservations:0,pendingValue:0,approvedValue:0,completedValue:0}),[r,n]=At.useState({totalTransactions:0,totalRevenue:0,avgTransaction:0}),[a,s]=At.useState(!0);At.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const e={}.VITE_API_URL||"http://127.0.0.1:8000/api",r=sessionStorage.getItem("auth_token"),n=await fetch(`${e}/reservations`,{headers:{Authorization:r?`Bearer ${r}`:""}});if(n.ok){const e=await n.json(),r=e.filter(e=>"pending"===e.status),a=e.filter(e=>"approved"===e.status),s=e.filter(e=>"completed"===e.status),i=e=>e.reduce((e,t)=>e+t.quantity*Number(t.product.price),0);t({totalReservations:e.length,pendingValue:i(r),approvedValue:i(a),completedValue:i(s)})}}catch(e){console.error("Error fetching summary data:",e)}finally{s(!1)}};return a?Ce.jsx("div",{className:"flex justify-center items-center py-12",children:Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-staff"})}):Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{children:[Ce.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Reservation Totals"}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Ce.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-100",children:[Ce.jsx("div",{className:"text-sm text-blue-600 font-medium mb-1",children:"Total Reservations"}),Ce.jsx("div",{className:"text-3xl font-bold text-blue-700",children:e.totalReservations})]}),Ce.jsxs("div",{className:"bg-yellow-50 p-6 rounded-lg border border-yellow-100",children:[Ce.jsx("div",{className:"text-sm text-yellow-600 font-medium mb-1",children:"Pending Value"}),Ce.jsxs("div",{className:"text-3xl font-bold text-yellow-700",children:["₱",e.pendingValue.toFixed(2)]})]}),Ce.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-100",children:[Ce.jsx("div",{className:"text-sm text-green-600 font-medium mb-1",children:"Approved Value"}),Ce.jsxs("div",{className:"text-3xl font-bold text-green-700",children:["₱",e.approvedValue.toFixed(2)]})]}),Ce.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg border border-purple-100",children:[Ce.jsx("div",{className:"text-sm text-purple-600 font-medium mb-1",children:"Completed Value"}),Ce.jsxs("div",{className:"text-3xl font-bold text-purple-700",children:["₱",e.completedValue.toFixed(2)]})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Transaction Totals"}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Ce.jsxs("div",{className:"bg-indigo-50 p-6 rounded-lg border border-indigo-100",children:[Ce.jsx("div",{className:"text-sm text-indigo-600 font-medium mb-1",children:"Total Transactions"}),Ce.jsx("div",{className:"text-3xl font-bold text-indigo-700",children:r.totalTransactions})]}),Ce.jsxs("div",{className:"bg-teal-50 p-6 rounded-lg border border-teal-100",children:[Ce.jsx("div",{className:"text-sm text-teal-600 font-medium mb-1",children:"Total Revenue"}),Ce.jsxs("div",{className:"text-3xl font-bold text-teal-700",children:["₱",r.totalRevenue.toFixed(2)]})]}),Ce.jsxs("div",{className:"bg-rose-50 p-6 rounded-lg border border-rose-100",children:[Ce.jsx("div",{className:"text-sm text-rose-600 font-medium mb-1",children:"Avg Transaction"}),Ce.jsxs("div",{className:"text-3xl font-bold text-rose-700",children:["₱",r.avgTransaction.toFixed(2)]})]})]})]}),Ce.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[Ce.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Insights"}),Ce.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[Ce.jsxs("p",{children:[Ce.jsx("span",{className:"font-medium",children:"Total Potential Revenue:"})," ","₱",(e.pendingValue+e.approvedValue+e.completedValue).toFixed(2)]}),Ce.jsxs("p",{children:[Ce.jsx("span",{className:"font-medium",children:"Conversion Rate:"})," ",e.totalReservations>0?(e.completedValue/(e.pendingValue+e.approvedValue+e.completedValue)*100).toFixed(1):0,"%"]})]})]})]})},pK=()=>{Lc();const[e,t]=Ct.useState([]),[r,n]=Ct.useState([]),[a,s]=Ct.useState(!0),[i,o]=Ct.useState(null),[l,c]=Ct.useState("all"),[d,u]=Ct.useState(!1),[h,m]=Ct.useState(null),[p,f]=Ct.useState(0),[x,y]=Ct.useState(""),[v,g]=Ct.useState(!1);Ct.useEffect(()=>{b(),j()},[l]);const b=async()=>{try{s(!0),o(null);const e={}.VITE_API_URL||"http://127.0.0.1:8000/api",r=sessionStorage.getItem("auth_token");let n=`${e}/restock-requests`;"all"!==l&&(n+=`?status=${l}`);const a=await fetch(n,{headers:{Authorization:`Bearer ${r}`}});if(!a.ok)throw new Error("Failed to fetch restock requests");const i=await a.json();t(i)}catch(e){console.error("Error fetching requests:",e),o("Failed to load restock requests")}finally{s(!1)}},j=async()=>{try{const e={}.VITE_API_URL||"http://127.0.0.1:8000/api",t=sessionStorage.getItem("auth_token"),r=await fetch(`${e}/branch-stock/low-stock`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error("Failed to fetch low stock items");const a=await r.json();n(a.low_stock_items||[])}catch(e){console.error("Error fetching low stock items:",e)}},w=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"fulfilled":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},N=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return a?Ce.jsx("div",{className:"p-4",children:Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),Ce.jsx("p",{className:"mt-2",children:"Loading restock requests..."})]})}):Ce.jsxs("div",{className:"p-4",children:[Ce.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ce.jsx("h2",{className:"text-2xl font-bold",children:"Restock Requests"}),Ce.jsx("button",{onClick:()=>u(!0),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",children:"Request Restock"})]}),i&&Ce.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:i}),r.length>0&&Ce.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[Ce.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"Low Stock Alert"}),Ce.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"The following items are running low on stock:"}),Ce.jsxs("div",{className:"space-y-2",children:[r.slice(0,3).map(e=>Ce.jsxs("div",{className:"text-sm text-yellow-700",children:["• ",e.product.name," - ",e.available_quantity," available"]},e.id)),r.length>3&&Ce.jsxs("div",{className:"text-sm text-yellow-700",children:["... and ",r.length-3," more items"]})]})]}),Ce.jsx("div",{className:"mb-6",children:Ce.jsxs("select",{value:l,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Ce.jsx("option",{value:"all",children:"All Requests"}),Ce.jsx("option",{value:"pending",children:"Pending"}),Ce.jsx("option",{value:"approved",children:"Approved"}),Ce.jsx("option",{value:"rejected",children:"Rejected"}),Ce.jsx("option",{value:"fulfilled",children:"Fulfilled"})]})}),Ce.jsx("div",{className:"space-y-4",children:0===e.length?Ce.jsx("div",{className:"text-center py-8 text-gray-500",children:Ce.jsx("p",{children:"No restock requests found."})}):e.map(e=>{return Ce.jsx("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:Ce.jsxs("div",{className:"flex items-start space-x-4",children:[Ce.jsx("div",{className:"flex-shrink-0",children:e.product.image_paths&&e.product.image_paths.length>0?Ce.jsx("img",{src:(t=e.product.image_paths[0],`${({}.VITE_API_URL||"http://127.0.0.1:8000/api").replace("/api","")}/storage/${t.startsWith("/")?t.substring(1):t}`),alt:e.product.name,className:"w-16 h-16 object-cover rounded border",onError:e=>{e.currentTarget.style.display="none"}}):Ce.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded border flex items-center justify-center text-gray-500 text-xs",children:"No Image"})}),Ce.jsx("div",{className:"flex-1 min-w-0",children:Ce.jsxs("div",{className:"flex items-start justify-between",children:[Ce.jsxs("div",{children:[Ce.jsx("h3",{className:"font-semibold text-lg",children:e.product.name}),Ce.jsx("p",{className:"text-gray-600 text-sm mb-2",children:e.product.description}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Current Stock:"})," ",e.current_stock]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Requested:"})," ",e.requested_quantity]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Requested By:"})," ",e.requestedBy.name]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"font-medium",children:"Date:"})," ",N(e.created_at)]})]}),e.notes&&Ce.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[Ce.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.notes]}),e.approvedBy&&Ce.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[Ce.jsx("span",{className:"font-medium",children:"Approved by:"})," ",e.approvedBy.name," on ",N(e.approved_at)]})]}),Ce.jsx("div",{className:"flex flex-col items-end space-y-2",children:Ce.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]})})]})},e.id);var t})}),d&&Ce.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Ce.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:Ce.jsxs("div",{className:"p-6",children:[Ce.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Ce.jsx("h3",{className:"text-lg font-bold",children:"Request Restock"}),Ce.jsx("button",{onClick:()=>{u(!1),m(null),f(0),y("")},className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),Ce.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!h||p<=0)alert("Please select a product and enter a valid quantity");else try{g(!0);const e={}.VITE_API_URL||"http://127.0.0.1:8000/api",t=sessionStorage.getItem("auth_token"),r=await fetch(`${e}/restock-requests`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({product_id:h.product_id,requested_quantity:p,notes:x||null})});if(!r.ok){const e=await r.json();throw new Error(e.message||"Failed to create restock request")}await b(),await j(),u(!1),m(null),f(0),y(""),alert("Restock request created successfully!")}catch(t){console.error("Error creating request:",t),alert(t instanceof Error?t.message:"Failed to create restock request")}finally{g(!1)}},className:"space-y-4",children:[Ce.jsxs("div",{children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Product *"}),Ce.jsxs("select",{value:(null==h?void 0:h.id)||"",onChange:e=>{const t=r.find(t=>t.id===Number(e.target.value));m(t||null),f(0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[Ce.jsx("option",{value:"",children:"Choose a product..."}),r.map(e=>Ce.jsxs("option",{value:e.id,children:[e.product.name," - Current: ",e.available_quantity]},e.id))]})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requested Quantity *"}),Ce.jsx("input",{type:"number",min:"1",value:p,onChange:e=>f(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),Ce.jsx("textarea",{value:x,onChange:e=>y(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Any additional information..."})]}),Ce.jsxs("div",{className:"flex space-x-3",children:[Ce.jsx("button",{type:"button",onClick:()=>{u(!1),m(null),f(0),y("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),Ce.jsx("button",{type:"submit",disabled:v||!h,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-400",children:v?"Submitting...":"Submit Request"})]})]})]})})})]})};var fK="Checkbox",[xK,yK]=Pe(fK),[vK,gK]=xK(fK);function bK(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:s,form:i,name:o,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:u}=e,[h,m]=De({prop:r,defaultProp:a??!1,onChange:l,caller:fK}),[p,f]=Ct.useState(null),[x,y]=Ct.useState(null),v=Ct.useRef(!1),g=!p||(!!i||!!p.closest("form")),b={checked:h,disabled:s,setChecked:m,control:p,setControl:f,name:o,form:i,value:d,hasConsumerStoppedPropagationRef:v,required:c,defaultChecked:!AK(a)&&a,isFormControl:g,bubbleInput:x,setBubbleInput:y};return Ce.jsx(vK,{scope:t,...b,children:CK(u)?u(b):n})}var jK="CheckboxTrigger",wK=Ct.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:s,value:i,disabled:o,checked:l,required:c,setControl:d,setChecked:u,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:p}=gK(jK,e),f=Te(a,d),x=Ct.useRef(l);return Ct.useEffect(()=>{const e=null==s?void 0:s.form;if(e){const t=()=>u(x.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[s,u]),Ce.jsx(Ae.button,{type:"button",role:"checkbox","aria-checked":AK(l)?"mixed":l,"aria-required":c,"data-state":EK(l),"data-disabled":o?"":void 0,disabled:o,value:i,...n,ref:f,onKeyDown:Le(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:Le(r,e=>{u(e=>!!AK(e)||!e),p&&m&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())})})});wK.displayName=jK;var NK=Ct.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:s,required:i,disabled:o,value:l,onCheckedChange:c,form:d,...u}=e;return Ce.jsx(bK,{__scopeCheckbox:r,checked:a,defaultChecked:s,disabled:o,required:i,onCheckedChange:c,name:n,form:d,value:l,internal_do_not_use_render:({isFormControl:e})=>Ce.jsxs(Ce.Fragment,{children:[Ce.jsx(wK,{...u,ref:t,__scopeCheckbox:r}),e&&Ce.jsx(OK,{__scopeCheckbox:r})]})})});NK.displayName=fK;var SK="CheckboxIndicator",_K=Ct.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,s=gK(SK,r);return Ce.jsx(Ie,{present:n||AK(s.checked)||!0===s.checked,children:Ce.jsx(Ae.span,{"data-state":EK(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});_K.displayName=SK;var kK="CheckboxBubbleInput",OK=Ct.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:s,defaultChecked:i,required:o,disabled:l,name:c,value:d,form:u,bubbleInput:h,setBubbleInput:m}=gK(kK,e),p=Te(r,m),f=yh(s),x=kt(n);Ct.useEffect(()=>{const e=h;if(!e)return;const t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set,n=!a.current;if(f!==s&&r){const t=new Event("click",{bubbles:n});e.indeterminate=AK(s),r.call(e,!AK(s)&&s),e.dispatchEvent(t)}},[h,f,s,a]);const y=Ct.useRef(!AK(s)&&s);return Ce.jsx(Ae.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??y.current,required:o,disabled:l,name:c,value:d,form:u,...t,tabIndex:-1,ref:p,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function CK(e){return"function"==typeof e}function AK(e){return"indeterminate"===e}function EK(e){return AK(e)?"indeterminate":e?"checked":"unchecked"}function PK(...e){return is(Vr(e))}OK.displayName=kK;const TK=Ct.forwardRef(({className:e,...t},r)=>Ce.jsx(NK,{ref:r,className:PK("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:Ce.jsx(_K,{className:PK("flex items-center justify-center text-current"),children:Ce.jsx(hn,{className:"h-4 w-4"})})}));TK.displayName=NK.displayName;const MK=({appointmentId:e,defaultCustomerName:t,defaultAddress:r,customerId:n})=>{const{toast:a}=Jt(),[s,i]=Ct.useState("cash"),[o,l]=Ct.useState((new Date).toISOString().slice(0,10)),[c,d]=Ct.useState(t),[u,h]=Ct.useState(""),[m,p]=Ct.useState(r||""),[f,x]=Ct.useState([{description:"",qty:1,unit_price:0,amount:0}]),[y,v]=Ct.useState(0),[g,b]=Ct.useState(0),[j,w]=Ct.useState(!1),[N,S]=Ct.useState(null),[_,k]=Ct.useState(null),[O,C]=Ct.useState({frameType:"",lensType:"",lensCoating:"",blueLightFilter:!1,progressiveLens:!1,bifocalLens:!1,singleVision:!1,lensMaterial:"",frameMaterial:"",frameColor:"",lensColor:"",specialInstructions:"",manufacturerNotes:""});Ct.useEffect(()=>{(async()=>{if(n)try{const e={}.VITE_API_URL||"http://localhost:8000/api",t=sessionStorage.getItem("auth_token"),r=await fetch(`${e}/patients/${n}`,{headers:{Authorization:t?`Bearer ${t}`:"","Content-Type":"application/json"}});if(r.ok){const e=await r.json();S(e)}const a=await fetch(`${e}/prescriptions/patient/${n}`,{headers:{Authorization:t?`Bearer ${t}`:"","Content-Type":"application/json"}});if(a.ok){const e=await a.json();if(e.length>0){const t=e[0];k(t),t.lens_type&&C(e=>({...e,lensType:t.lens_type,lensCoating:t.coating||"",recommendations:t.recommendations||""}))}}}catch(e){console.error("Error loading patient data:",e)}})()},[n]),Ct.useEffect(()=>{(async()=>{if(n)try{w(!0);const r={}.VITE_API_URL||"http://localhost:8000/api",s=sessionStorage.getItem("auth_token");console.log(`Loading reservations for customer ID: ${n}, Appointment ID: ${e}`);const i=await fetch(`${r}/reservations?status=approved`,{headers:{Authorization:s?`Bearer ${s}`:"","Content-Type":"application/json"}});if(!i.ok)throw new Error("Failed to fetch reservations");const o=(await i.json()).filter(e=>{var t;return((null==(t=e.user)?void 0:t.id)||e.user_id)===n});if(console.log(`Found ${o.length} approved reservation(s) for customer ${t} (ID: ${n})`),o&&o.length>0){const e=o.map(e=>{const t=e.product;let r=t.name||"Reserved Product";return t.brand&&(r+=` - ${t.brand}`),t.model&&(r+=` (${t.model})`),t.description&&(r+=` - ${t.description}`),console.log(`Adding reserved product: ${r} (Qty: ${e.quantity}, Price: ${t.price})`),{description:r,qty:e.quantity,unit_price:Number(t.price),amount:Number(t.price)*e.quantity}});x([{description:"Eye Examination",qty:1,unit_price:500,amount:500},...e]),a({title:"Reserved Products Loaded",description:`${e.length} reserved product(s) for ${t} added to receipt`})}else console.log(`No approved reservations found for customer ${t} (ID: ${n})`),x([{description:"Eye Examination",qty:1,unit_price:500,amount:500}]),a({title:"No Reserved Products",description:`${t} has no approved product reservations.`,variant:"default"})}catch(r){console.error("Error loading reserved products:",r),a({title:"Note",description:"Could not load reserved products. You can add them manually.",variant:"default"}),x([{description:"Eye Examination",qty:1,unit_price:500,amount:500}])}finally{w(!1)}else console.warn("No customer ID provided, skipping reservation load")})()},[n,e,t,a]);const A=Ct.useMemo(()=>{const e=f.reduce((e,t)=>e+(Number(t.amount)||0),0),t=e/1.12;return{subtotal:e,vatableSales:t,vatAmount:e-t,netOfVat:t,totalDue:e-y-g}},[f,y,g]),E=(e,t)=>{x(r=>r.map((r,n)=>n===e?{...r,...t,amount:Number(t.unit_price??r.unit_price)*Number(t.qty??r.qty)}:r))};return Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(da,{className:"h-5 w-5 text-blue-600"}),Ce.jsx("span",{children:"Patient Information"})]})}),Ce.jsxs(sd,{className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Patient Name"}),Ce.jsx(Yc,{value:c,onChange:e=>d(e.target.value)})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"TIN"}),Ce.jsx(Yc,{value:u,onChange:e=>h(e.target.value)})]}),Ce.jsxs("div",{className:"col-span-2",children:[Ce.jsx(Zc,{children:"Address"}),Ce.jsx(Yc,{value:m,onChange:e=>p(e.target.value)})]})]}),N&&Ce.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[Ce.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Additional Patient Details"}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(Dn,{className:"h-4 w-4 text-blue-600"}),Ce.jsx("span",{children:N.email})]}),N.phone&&Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(qn,{className:"h-4 w-4 text-blue-600"}),Ce.jsx("span",{children:N.phone})]}),N.date_of_birth&&Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-4 w-4 text-blue-600"}),Ce.jsxs("span",{children:["DOB: ",new Date(N.date_of_birth).toLocaleDateString()]})]})]})]})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(Jn,{className:"h-5 w-5 text-blue-600"}),Ce.jsx("span",{children:"Customer's Chosen Products"})]}),Ce.jsx(CardDescription,{children:"Products that the customer has reserved and will be included in this receipt."})]}),Ce.jsx(sd,{className:"space-y-4",children:j?Ce.jsxs("div",{className:"flex items-center justify-center p-4",children:[Ce.jsx(Loader2,{className:"h-6 w-6 animate-spin text-blue-500"}),Ce.jsx("span",{className:"ml-2 text-gray-600",children:"Loading customer's products..."})]}):Ce.jsxs("div",{className:"space-y-3",children:[f.filter(e=>"Eye Examination"!==e.description).map((e,t)=>Ce.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border-l-4 border-blue-400",children:Ce.jsxs("div",{className:"flex justify-between items-start",children:[Ce.jsxs("div",{className:"flex-1",children:[Ce.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:e.description}),Ce.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[Ce.jsxs("div",{children:[Ce.jsx("span",{className:"text-blue-600 font-medium",children:"Quantity:"}),Ce.jsx("span",{className:"ml-2",children:e.qty})]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"text-blue-600 font-medium",children:"Unit Price:"}),Ce.jsxs("span",{className:"ml-2",children:["₱",e.unit_price.toFixed(2)]})]}),Ce.jsxs("div",{children:[Ce.jsx("span",{className:"text-blue-600 font-medium",children:"Total:"}),Ce.jsxs("span",{className:"ml-2 font-semibold",children:["₱",e.amount.toFixed(2)]})]})]})]}),Ce.jsx("div",{className:"ml-4",children:Ce.jsx("div",{className:"bg-blue-100 px-3 py-1 rounded-full text-blue-800 text-sm font-medium",children:"Reserved Product"})})]})},t)),0===f.filter(e=>"Eye Examination"!==e.description).length&&Ce.jsxs("div",{className:"text-center text-gray-500 p-6 border-2 border-dashed rounded-lg",children:[Ce.jsx(Jn,{className:"h-8 w-8 text-gray-400 mx-auto mb-3"}),Ce.jsx("h4",{className:"font-semibold text-gray-600 mb-2",children:"No Reserved Products"}),Ce.jsx("p",{className:"text-sm",children:"This customer has not reserved any products yet. Only the eye examination will be charged."})]})]})})]}),_&&Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(wn,{className:"h-5 w-5 text-green-600"}),Ce.jsx("span",{children:"Vision Prescription Details"})]}),Ce.jsx(CardDescription,{children:"Critical vision data to guide lens manufacturing for optimal customer vision correction."})]}),Ce.jsxs(sd,{className:"space-y-6",children:[Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{className:"text-sm font-medium text-gray-700",children:"Prescription Issue Date"}),Ce.jsx(Yc,{value:_.issue_date||"N/A",readOnly:!0,className:"bg-gray-50"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{className:"text-sm font-medium text-gray-700",children:"Prescription Expiry Date"}),Ce.jsx(Yc,{value:_.expiry_date||"N/A",readOnly:!0,className:"bg-gray-50"})]})]}),Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsx("h4",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Vision Measurements"}),Ce.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[Ce.jsx(Zc,{className:"text-base font-semibold text-blue-800 mb-3 block",children:"Right Eye (OD - Oculus Dexter)"}),Ce.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:_.right_eye&&"object"==typeof _.right_eye?Object.entries(_.right_eye).map(([e,t])=>Ce.jsxs("div",{children:[Ce.jsx(Zc,{className:"text-xs text-blue-600 font-medium",children:e.replace(/_/g," ").toUpperCase()}),Ce.jsx(Yc,{value:String(t||"N/A"),readOnly:!0,className:"bg-white text-sm"})]},e)):Ce.jsx("div",{className:"col-span-4",children:Ce.jsx(Yc,{value:String(_.right_eye||"N/A"),readOnly:!0,className:"bg-white"})})})]}),Ce.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[Ce.jsx(Zc,{className:"text-base font-semibold text-green-800 mb-3 block",children:"Left Eye (OS - Oculus Sinister)"}),Ce.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:_.left_eye&&"object"==typeof _.left_eye?Object.entries(_.left_eye).map(([e,t])=>Ce.jsxs("div",{children:[Ce.jsx(Zc,{className:"text-xs text-green-600 font-medium",children:e.replace(/_/g," ").toUpperCase()}),Ce.jsx(Yc,{value:String(t||"N/A"),readOnly:!0,className:"bg-white text-sm"})]},e)):Ce.jsx("div",{className:"col-span-4",children:Ce.jsx(Yc,{value:String(_.left_eye||"N/A"),readOnly:!0,className:"bg-white"})})})]})]}),Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsx("h4",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Optometrist Recommendations"}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{className:"text-sm font-medium text-gray-700",children:"Recommended Lens Type"}),Ce.jsx(Yc,{value:_.lens_type||"N/A",readOnly:!0,className:"bg-gray-50"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{className:"text-sm font-medium text-gray-700",children:"Recommended Coating"}),Ce.jsx(Yc,{value:_.coating||"N/A",readOnly:!0,className:"bg-gray-50"})]})]})]}),Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsx("h4",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Additional Information"}),_.recommendations&&Ce.jsxs("div",{children:[Ce.jsx(Zc,{className:"text-sm font-medium text-gray-700",children:"Optometrist Recommendations"}),Ce.jsx("div",{className:"bg-green-50 p-3 rounded text-sm border-l-4 border-green-400",children:_.recommendations})]}),_.additional_notes&&Ce.jsxs("div",{children:[Ce.jsx(Zc,{className:"text-sm font-medium text-gray-700",children:"Additional Notes"}),Ce.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm border-l-4 border-gray-400",children:_.additional_notes})]})]}),Ce.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400",children:[Ce.jsx("h5",{className:"font-semibold text-yellow-800 mb-2",children:"📋 Manufacturing Guidelines"}),Ce.jsx("p",{className:"text-sm text-yellow-700",children:"Use this prescription data to ensure the manufactured lenses provide optimal vision correction. Pay special attention to the specific measurements for each eye and follow the optometrist's recommendations for lens type and coating."})]})]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(Fn,{className:"h-5 w-5 text-purple-600"}),Ce.jsx("span",{children:"Glass Order Specifications"})]})}),Ce.jsxs(sd,{className:"space-y-6",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Lens Type"}),Ce.jsxs(Dm,{value:O.lensType,onValueChange:e=>C(t=>({...t,lensType:e})),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select lens type"})}),Ce.jsx(Bm,{children:["Single Vision","Progressive (Multifocal)","Bifocal","Trifocal","Reading Glasses","Computer Glasses","Sunglasses","Safety Glasses"].map(e=>Ce.jsx(qm,{value:e,children:e},e))})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Lens Material"}),Ce.jsxs(Dm,{value:O.lensMaterial,onValueChange:e=>C(t=>({...t,lensMaterial:e})),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select lens material"})}),Ce.jsx(Bm,{children:["CR-39 Plastic","Polycarbonate","Trivex","High Index 1.60","High Index 1.67","High Index 1.74","Glass"].map(e=>Ce.jsx(qm,{value:e,children:e},e))})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Lens Coatings & Features"}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[Ce.jsx("div",{children:Ce.jsxs(Dm,{value:O.lensCoating,onValueChange:e=>C(t=>({...t,lensCoating:e})),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select coating"})}),Ce.jsx(Bm,{children:["Anti-Reflective","Blue Light Filter","UV Protection","Scratch Resistant","Anti-Fog","Photochromic","Polarized"].map(e=>Ce.jsx(qm,{value:e,children:e},e))})]})}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(TK,{id:"blueLight",checked:O.blueLightFilter,onCheckedChange:e=>C(t=>({...t,blueLightFilter:!!e}))}),Ce.jsx(Zc,{htmlFor:"blueLight",children:"Blue Light Filter"})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(TK,{id:"progressive",checked:O.progressiveLens,onCheckedChange:e=>C(t=>({...t,progressiveLens:!!e}))}),Ce.jsx(Zc,{htmlFor:"progressive",children:"Progressive Lens"})]})]})]})]}),Ce.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Frame Material"}),Ce.jsxs(Dm,{value:O.frameMaterial,onValueChange:e=>C(t=>({...t,frameMaterial:e})),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select frame material"})}),Ce.jsx(Bm,{children:["Acetate","Metal","Titanium","Stainless Steel","Carbon Fiber","Wood","Horn","Plastic"].map(e=>Ce.jsx(qm,{value:e,children:e},e))})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Frame Color"}),Ce.jsx(Yc,{placeholder:"e.g., Black, Brown, Silver",value:O.frameColor,onChange:e=>C(t=>({...t,frameColor:e.target.value}))})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Lens Color"}),Ce.jsx(Yc,{placeholder:"e.g., Clear, Tinted, Gradient",value:O.lensColor,onChange:e=>C(t=>({...t,lensColor:e.target.value}))})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Special Instructions for Manufacturer"}),Ce.jsx(fh,{placeholder:"Any specific requirements, measurements, or special instructions for the manufacturer...",value:O.specialInstructions,onChange:e=>C(t=>({...t,specialInstructions:e.target.value})),rows:3})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Manufacturer Contact Notes"}),Ce.jsx(fh,{placeholder:"Additional notes for contacting the manufacturer, priority level, delivery requirements...",value:O.manufacturerNotes,onChange:e=>C(t=>({...t,manufacturerNotes:e.target.value})),rows:2})]})]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(Sn,{className:"h-5 w-5 text-orange-600"}),Ce.jsx("span",{children:"Service Invoice"})]})}),Ce.jsxs(sd,{className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Sales Type"}),Ce.jsxs(Dm,{value:s,onValueChange:e=>i(e),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"cash",children:"Cash"}),Ce.jsx(qm,{value:"charge",children:"Charge"})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{children:"Date"}),Ce.jsx(Yc,{type:"date",value:o,onChange:e=>l(e.target.value)})]})]}),Ce.jsxs("div",{children:[Ce.jsxs("div",{className:"grid grid-cols-12 gap-2 font-medium",children:[Ce.jsx("div",{className:"col-span-6",children:"Item Description / Nature of Service"}),Ce.jsx("div",{className:"col-span-2",children:"QTY"}),Ce.jsx("div",{className:"col-span-2",children:"Unit Price"}),Ce.jsx("div",{className:"col-span-2",children:"Amount"})]}),f.map((e,t)=>Ce.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center mt-2",children:[Ce.jsx("div",{className:"col-span-6",children:Ce.jsx(Yc,{value:e.description,onChange:e=>E(t,{description:e.target.value})})}),Ce.jsx("div",{className:"col-span-2",children:Ce.jsx(Yc,{type:"number",value:e.qty,onChange:e=>E(t,{qty:Number(e.target.value)})})}),Ce.jsx("div",{className:"col-span-2",children:Ce.jsx(Yc,{type:"number",value:e.unit_price,onChange:e=>E(t,{unit_price:Number(e.target.value)})})}),Ce.jsxs("div",{className:"col-span-2 flex gap-2",children:[Ce.jsx(Yc,{type:"number",value:e.amount,onChange:e=>E(t,{amount:Number(e.target.value)})}),Ce.jsx(Hc,{variant:"ghost",onClick:()=>(e=>x(t=>t.filter((t,r)=>r!==e)))(t),children:"Remove"})]})]},t)),Ce.jsx("div",{className:"mt-2",children:Ce.jsx(Hc,{variant:"secondary",onClick:()=>x(e=>[...e,{description:"",qty:1,unit_price:0,amount:0}]),children:"Add Item"})})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{children:"Vatable Sales"}),Ce.jsxs("span",{children:["₱",A.vatableSales.toFixed(2)]})]}),Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{children:"VAT"}),Ce.jsxs("span",{children:["₱",A.vatAmount.toFixed(2)]})]}),Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{children:"Zero Rated Sales"}),Ce.jsx("span",{children:"₱0.00"})]}),Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{children:"VAT-Exempt Sales"}),Ce.jsx("span",{children:"₱0.00"})]})]}),Ce.jsxs("div",{children:[Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{children:"Less: Discount"}),Ce.jsx(Yc,{className:"w-28",type:"number",value:y,onChange:e=>v(Number(e.target.value))})]}),Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{children:"Add: VAT"}),Ce.jsxs("span",{children:["₱",A.vatAmount.toFixed(2)]})]}),Ce.jsxs("div",{className:"flex justify-between",children:[Ce.jsx("span",{children:"Less: Withholding Tax"}),Ce.jsx(Yc,{className:"w-28",type:"number",value:g,onChange:e=>b(Number(e.target.value))})]}),Ce.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[Ce.jsx("span",{children:"Total Amount Due"}),Ce.jsxs("span",{children:["₱",A.totalDue.toFixed(2)]})]})]})]}),Ce.jsx("div",{className:"flex justify-end",children:Ce.jsx(Hc,{onClick:async()=>{try{const t={appointment_id:e,sales_type:s,date:o,customer_name:c,tin:u||void 0,address:m||void 0,items:f,totals:{vatable_sales:Number(A.vatableSales.toFixed(2)),vat_amount:Number(A.vatAmount.toFixed(2)),zero_rated_sales:0,vat_exempt_sales:0,net_of_vat:Number(A.netOfVat.toFixed(2)),less_vat:Number(A.vatAmount.toFixed(2)),add_vat:Number(A.vatAmount.toFixed(2)),discount:Number(y),withholding_tax:Number(g),total_due:Number(A.totalDue.toFixed(2))}},r=await async function(e){const t=await fetch(FH("/receipts"),{method:"POST",headers:BH(),body:JSON.stringify(e)});if(!t.ok){const e=await t.text();throw new Error(e||"Failed to create receipt")}return t.json()}(t);if(n&&f.length>1){const t={}.VITE_API_URL||"http://localhost:8000/api",s=sessionStorage.getItem("auth_token"),i=f.filter(e=>"Eye Examination"!==e.description),o={appointment_id:e,patient_id:n,prescription_id:(null==_?void 0:_.id)||null,receipt_id:r.id||null,reserved_products:i.map(e=>({description:e.description,quantity:e.qty,unit_price:e.unit_price,amount:e.amount})),prescription_data:_?{right_eye:_.right_eye,left_eye:_.left_eye,lens_type:_.lens_type,coating:_.coating,recommendations:_.recommendations,additional_notes:_.additional_notes}:null,frame_type:O.frameType,lens_type:O.lensType,lens_coating:O.lensCoating,blue_light_filter:O.blueLightFilter,progressive_lens:O.progressiveLens,bifocal_lens:O.bifocalLens,lens_material:O.lensMaterial,frame_material:O.frameMaterial,frame_color:O.frameColor,lens_color:O.lensColor,special_instructions:O.specialInstructions,manufacturer_notes:O.manufacturerNotes,priority:"normal"},l=await fetch(`${t}/glass-orders`,{method:"POST",headers:{Authorization:s?`Bearer ${s}`:"","Content-Type":"application/json"},body:JSON.stringify(o)});if(l.ok){const e=await l.json();a({title:"Receipt & Glass Order saved successfully",description:`Receipt created and glass order ${e.data.formatted_number} is ready for manufacturer contact. Complete patient record with reserved products and prescription details has been saved.`})}else a({title:"Receipt saved, Glass Order failed",description:"Receipt was saved but glass order creation failed. You can create it manually from patient management."})}else a({title:"Receipt saved successfully",description:"Receipt has been saved. No glass order needed as no reserved products were found."})}catch(t){a({title:"Failed to save receipt",description:t.message,variant:"destructive"})}},className:"bg-green-600 hover:bg-green-700",children:"Save Receipt & Glass Order"})})]})]})]})},DK=()=>{const[e,t]=Ct.useState([]),[r,n]=Ct.useState(!0),[a,s]=Ct.useState({}),[i,o]=Ct.useState(!1);Ct.useEffect(()=>{l()},[]);const l=async()=>{try{const e=await fetch("http://127.0.0.1:8000/api-mysql.php/branch-stock",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const r=await e.json();t(r.stock||[])}else Es.error("Failed to fetch branch stock data")}catch(e){Es.error("Failed to fetch branch stock data")}finally{n(!1)}},c=e=>{switch(e){case"out-of-stock":return"text-red-600 bg-red-100";case"low-stock":return"text-yellow-600 bg-yellow-100";case"in-stock":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},d=e=>{switch(e){case"out-of-stock":return Ce.jsx(aa,{className:"w-4 h-4"});case"low-stock":return Ce.jsx(Jr,{className:"w-4 h-4"});case"in-stock":return Ce.jsx(sa,{className:"w-4 h-4"});default:return null}};return r?Ce.jsx("div",{className:"flex items-center justify-center h-64",children:Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):Ce.jsxs("div",{className:"p-6",children:[Ce.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ce.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Stock Management"}),Ce.jsxs("button",{onClick:l,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[Ce.jsx(Vn,{className:"w-4 h-4"}),"Refresh"]})]}),Ce.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:Ce.jsx("div",{className:"overflow-x-auto",children:Ce.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ce.jsx("thead",{className:"bg-gray-50",children:Ce.jsxs("tr",{children:[Ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),Ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branch"}),Ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Quantity"}),Ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reserved"}),Ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available"}),Ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),Ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),Ce.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{const t=(e=>{const t=e.stock_quantity-e.reserved_quantity;return t<=0?"out-of-stock":t<=5?"low-stock":"in-stock"})(e),r=e.stock_quantity-e.reserved_quantity,n=void 0!==a[e.id];return Ce.jsxs("tr",{className:"hover:bg-gray-50",children:[Ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ce.jsxs("div",{className:"flex items-center",children:[Ce.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.product.image_url?Ce.jsx("img",{className:"h-10 w-10 rounded-lg object-cover",src:e.product.image_url,alt:e.product.name}):Ce.jsx("div",{className:"h-10 w-10 rounded-lg bg-gray-200 flex items-center justify-center",children:Ce.jsx("span",{className:"text-gray-400 text-xs",children:"No Image"})})}),Ce.jsxs("div",{className:"ml-4",children:[Ce.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.product.name}),Ce.jsx("div",{className:"text-sm text-gray-500",children:e.product.brand})]})]})}),Ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.branch.name}),Ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n?Ce.jsx("input",{type:"number",min:"0",value:a[e.id],onChange:t=>{return r=e.id,n=parseInt(t.target.value)||0,void s(e=>({...e,[r]:n}));var r,n},className:"w-20 px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"}):Ce.jsx("span",{className:"text-sm text-gray-900",children:e.stock_quantity})}),Ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.reserved_quantity}),Ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r}),Ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ce.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c(t)}`,children:[d(t),Ce.jsx("span",{className:"ml-1 capitalize",children:t.replace("-"," ")})]})}),Ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n?Ce.jsxs("button",{onClick:()=>(async e=>{const t=a[e.id];if(void 0===t||t<0)Es.error("Please enter a valid quantity");else{o(!0);try{const r=await fetch("http://127.0.0.1:8000/api-mysql.php/branch-stock",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({product_id:e.product_id,branch_id:e.branch_id,stock_quantity:t})});if(r.ok)Es.success("Stock updated successfully"),l(),s(t=>{const r={...t};return delete r[e.id],r});else{const e=await r.json();Es.error(e.message||"Failed to update stock")}}catch(r){Es.error("Failed to update stock")}finally{o(!1)}}})(e),disabled:i,className:"text-green-600 hover:text-green-900 disabled:opacity-50 flex items-center gap-1",children:[Ce.jsx(Hn,{className:"w-4 h-4"}),i?"Saving...":"Save"]}):Ce.jsx("button",{onClick:()=>s(t=>({...t,[e.id]:e.stock_quantity})),className:"text-blue-600 hover:text-blue-900",children:"Edit"})})]},e.id)})})]})})}),0===e.length&&Ce.jsxs("div",{className:"text-center py-12",children:[Ce.jsx("div",{className:"text-gray-500 text-lg",children:"No stock data available"}),Ce.jsx("div",{className:"text-gray-400 text-sm mt-2",children:"Add some products and set their stock levels across branches"})]})]})},IK=()=>{const{selectedBranchId:e}=$p(),[t,r]=Ct.useState([]),[n,a]=Ct.useState(!0),[s,i]=Ct.useState(!1),[o,l]=Ct.useState(null),[c,d]=Ct.useState({name:"",description:"",price:"",category_id:"",branch_stocks:{},is_active:!0}),[u,h]=Ct.useState([]),[m,p]=Ct.useState([]),[f,x]=Ct.useState(!1),[y,v]=Ct.useState(null),[g,b]=Ct.useState([]),[j,w]=Ct.useState(!1),[N,S]=Ct.useState({}),[_,k]=Ct.useState(!1),O=Ct.useRef(null),[C,A]=Ct.useState(""),[E,P]=Ct.useState("grid"),[T,M]=Ct.useState(new Set),[D,I]=Ct.useState("all"),[R,L]=Ct.useState([]),[F,B]=Ct.useState([]);Ct.useEffect(()=>{q(),(async()=>{try{const e={}.VITE_API_URL||"http://127.0.0.1:8000/api-mysql.php",t=sessionStorage.getItem("auth_token"),r=await fetch(`${e}/product-categories`,{headers:{Authorization:t?`Bearer ${t}`:"",Accept:"application/json"}});if(r.ok){const e=await r.json(),t=Array.isArray(e)?e:e.data||[];L(t.map(e=>({id:e.id,name:e.name})))}}catch{}})(),(async()=>{try{const e={}.VITE_API_URL||"http://127.0.0.1:8000/api-mysql.php",t=sessionStorage.getItem("auth_token"),r=await fetch(`${e}/branches`,{headers:{Authorization:t?`Bearer ${t}`:"",Accept:"application/json"}});if(r.ok){const e=await r.json(),t=Array.isArray(e)?e:e.data||[];B(t.map(e=>({id:e.id,name:e.name,code:e.code||""})))}}catch{}})();const e=setInterval(()=>{WH()||q()},3e4);return()=>clearInterval(e)},[e]);const q=async()=>{try{a(!0);const e=await kp(""),t=(Array.isArray(e)?e:[]).filter(e=>!T.has(e.id));r(t)}catch(e){console.error("Error fetching products:",e),Es.error("Failed to fetch products"),r([])}finally{a(!1)}},$=(e,t)=>{var r,n,a;e.preventDefault(),e.stopPropagation(),console.log("Edit clicked for product:",t.id),l(t),d({name:t.name||"",description:t.description||"",price:(null==(r=t.price)?void 0:r.toString())||"0",stock_quantity:(null==(n=t.stock_quantity)?void 0:n.toString())||"0",category_id:((null==(a=t.category_details)?void 0:a.id)||"").toString(),is_active:t.is_active??!0}),h([]),i(!0)},z=async(e,t)=>{var n,a;if(e.preventDefault(),e.stopPropagation(),console.log("Delete clicked for product:",t),confirm("Are you sure you want to delete this product? This action cannot be undone."))try{await Ap(String(t)),KH(t),M(e=>new Set([...e,t])),r(e=>e.filter(e=>e.id!==t)),Es.success("Product deleted successfully")}catch(s){console.error("Delete error:",s);let e="Failed to delete product";(null==(a=null==(n=null==s?void 0:s.response)?void 0:n.data)?void 0:a.message)?(e=s.response.data.message,s.response.data.active_reservations&&(e+=` (${s.response.data.active_reservations} active reservations)`)):(null==s?void 0:s.message)&&(e=s.message),Es.error(e)}},U=async(e,t)=>{e.preventDefault(),e.stopPropagation(),console.log("Toggle status clicked for product:",t.id);try{const e=new FormData;e.append("is_active",t.is_active?"0":"1"),await Cp(String(t.id),e),Es.success(`Product ${t.is_active?"deactivated":"activated"} successfully`),WH()?r(e=>e.map(e=>e.id===t.id?{...e,is_active:!t.is_active}:e)):q()}catch(n){console.error("Toggle status error:",n),Es.error((null==n?void 0:n.message)||"Failed to update product status")}},V=async(e,t)=>{var r,n;e.preventDefault(),e.stopPropagation(),console.log("Manage stock clicked for product:",t.id),v(t),w(!0);try{const e={}.VITE_API_URL||"http://127.0.0.1:8000/api-mysql.php",r=sessionStorage.getItem("auth_token");if(!r)throw new Error("No authentication token found. Please login again.");const[n,a]=await Promise.all([fetch(`${e}/branches`,{headers:{Authorization:`Bearer ${r}`,Accept:"application/json","Content-Type":"application/json"}}),fetch(`${e}/branch-stock`,{headers:{Authorization:`Bearer ${r}`,Accept:"application/json","Content-Type":"application/json"}})]);if(!n.ok){const e=await n.text();throw console.error("Branches API error:",e),new Error(`Failed to load branches (${n.status}): ${n.statusText}`)}if(!a.ok){const e=await a.text();throw console.error("Stock API error:",e),new Error(`Failed to load branch stock (${a.status}): ${a.statusText}`)}const s=await n.json(),i=await a.json();console.log("Branches response:",s),console.log("Stock response:",i);const o=(s.data||s||[]).map(e=>({id:e.id,name:e.name,code:e.code})),l=(i.stock||i||[]).filter(e=>e.product_id===t.id);b(o);const c=o.map(e=>{const r=l.find(t=>t.branch_id===e.id);return{id:null==r?void 0:r.id,product_id:t.id,branch_id:e.id,stock_quantity:(null==r?void 0:r.stock_quantity)??0,reserved_quantity:(null==r?void 0:r.reserved_quantity)??0,branch:{id:e.id,name:e.name,code:e.code}}});p(c);const d={};c.forEach(e=>{d[e.branch_id]=e.stock_quantity}),S(d),x(!0)}catch(a){console.error("Manage stock error:",a);const e=(null==a?void 0:a.message)||"Failed to fetch branch stock";Es.error(e),((null==(r=null==a?void 0:a.message)?void 0:r.includes("403"))||(null==(n=null==a?void 0:a.message)?void 0:n.includes("authentication")))&&Es.error("Authentication error. Please try logging in again.")}finally{w(!1)}},W=e=>{h(t=>[...t,e])},H=()=>{d({name:"",description:"",price:"",category_id:"",branch_stocks:{},is_active:!0}),h([]),l(null),i(!1),O.current&&(O.current.value="")};return n?Ce.jsx("div",{className:"flex items-center justify-center h-64",children:Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):Ce.jsxs("div",{className:"p-6",children:[Ce.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Product Management"}),"all"!==e&&Ce.jsx(Yd,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Branch Filtered"})]}),Ce.jsxs("div",{className:"flex items-center gap-4",children:[Ce.jsx(Fp,{selectedBranchId:e,onBranchChange:e=>{},useAdminData:!0}),Ce.jsxs(Hc,{onClick:async()=>{HH(),await q(),Es.success("Products refreshed successfully")},variant:"outline",disabled:n,className:"flex items-center gap-2",children:[Ce.jsx(Vn,{className:"h-4 w-4 "+(n?"animate-spin":"")}),"Refresh"]}),Ce.jsxs(Hc,{onClick:()=>i(!0),className:"bg-blue-600 hover:bg-blue-700",children:[Ce.jsx(zn,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})]}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Total Products"}),Ce.jsx(Fn,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:t.length}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all branches"})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Active Products"}),Ce.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:t.filter(e=>e.is_active).length}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently available"})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Branches"}),Ce.jsx(sn,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:g.length}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Branch locations"})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Low Stock Items"}),Ce.jsx(Jr,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:m.filter(e=>e.stock_quantity<5).length}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Need restocking"})]})]})]}),Ce.jsxs("div",{className:"mb-6 flex gap-4 items-center",children:[Ce.jsxs("div",{className:"flex-1 relative",children:[Ce.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),Ce.jsx(Yc,{type:"text",placeholder:"Search products by name...",value:C,onChange:e=>A(e.target.value),className:"pl-10"})]}),Ce.jsxs("div",{className:"flex gap-2",children:[Ce.jsx(Hc,{variant:"all"===D?"default":"outline",size:"sm",onClick:()=>I("all"),children:"All"}),Ce.jsx(Hc,{variant:"frames"===D?"default":"outline",size:"sm",onClick:()=>I("frames"),children:"Frames"}),Ce.jsx(Hc,{variant:"sunglasses"===D?"default":"outline",size:"sm",onClick:()=>I("sunglasses"),children:"Sunglasses"}),Ce.jsx(Hc,{variant:"contact_lenses"===D?"default":"outline",size:"sm",onClick:()=>I("contact_lenses"),children:"Contact Lenses"}),Ce.jsx(Hc,{variant:"eye_care"===D?"default":"outline",size:"sm",onClick:()=>I("eye_care"),children:"Eye Care"}),Ce.jsx(Hc,{variant:"others"===D?"default":"outline",size:"sm",onClick:()=>I("others"),children:"Other Products"})]}),Ce.jsxs("div",{className:"flex gap-2",children:[Ce.jsx(Hc,{variant:"grid"===E?"default":"outline",size:"sm",onClick:()=>P("grid"),children:Ce.jsx(On,{className:"h-4 w-4"})}),Ce.jsx(Hc,{variant:"list"===E?"default":"outline",size:"sm",onClick:()=>P("list"),children:Ce.jsx(Pn,{className:"h-4 w-4"})})]})]}),Ce.jsx("div",{className:"grid"===E?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:t.filter(e=>{const t=e.name.toLowerCase().includes(C.toLowerCase()),r=(e.category||e.category_name||"").toString().toLowerCase(),n=`${e.name} ${e.description||""}`.toLowerCase(),a=r.includes("frame")||n.includes("frame"),s=r.includes("sunglass")||n.includes("sunglass")||n.includes("sun glasses"),i=r.includes("contact")||n.includes("contact lens")||n.includes("contacts"),o=r.includes("care")||r.includes("solution")||n.includes("solution")||n.includes("drop")||n.includes("cleaner");let l=!0;switch(D){case"frames":l=a&&!s;break;case"sunglasses":l=s;break;case"contact_lenses":l=i;break;case"eye_care":l=o;break;case"others":l=!(a||s||i||o);break;default:l=!0}return t&&l}).map(e=>Ce.jsxs(td,{className:"overflow-hidden hover:shadow-lg transition-shadow "+("list"===E?"flex flex-row":""),children:[Ce.jsxs("div",{className:"relative bg-gray-100 "+("list"===E?"w-32 h-32":"h-48"),children:[(()=>{let t=e.image_paths;if("string"==typeof t)try{t=JSON.parse(t)}catch(r){console.error("Failed to parse image_paths:",r),t=[]}return t&&t.length>0?Ce.jsx("img",{className:"w-full h-full object-cover",src:UH(t[0]),alt:e.name}):Ce.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-400",children:[Ce.jsx(Fn,{className:("list"===E?"h-8 w-8":"h-16 w-16")+" mb-2"}),Ce.jsx("span",{className:"text-xs",children:"No Image"})]})})(),"grid"===E&&Ce.jsx("div",{className:"absolute top-2 right-2",children:Ce.jsx("span",{className:"inline-flex px-3 py-1 text-xs font-semibold rounded-full "+(e.is_active?"bg-green-500 text-white":"bg-red-500 text-white"),children:e.is_active?"Active":"Inactive"})})]}),Ce.jsx(sd,{className:""+("list"===E?"flex-1 p-4 flex items-center":"p-4"),children:"list"===E?Ce.jsxs("div",{className:"flex items-center justify-between w-full gap-4",children:[Ce.jsxs("div",{className:"flex-1 min-w-0",children:[Ce.jsx("h3",{className:"font-semibold text-lg text-gray-900 truncate mb-1",title:e.name,children:e.name}),Ce.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[Ce.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["₱",e.price.toLocaleString()]}),Ce.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"})]})]}),Ce.jsxs("div",{className:"flex items-center gap-6",children:[Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"text-xs text-gray-500",children:"Stock"}),Ce.jsx("div",{className:"text-lg font-bold",children:e.total_stock||0})]}),Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"text-xs text-gray-500",children:"Available"}),Ce.jsx("div",{className:"text-lg font-bold text-green-600",children:e.total_available||0})]}),Ce.jsxs("div",{className:"text-center min-w-[100px]",children:[Ce.jsx("div",{className:"text-xs text-gray-500",children:"Branches"}),Ce.jsx("div",{className:"text-sm font-semibold",children:e.branch_availability&&e.branch_availability.length>0?`${e.branch_availability.filter(e=>e.is_available).length}/${e.branch_availability.length}`:"0/0"})]})]}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsxs(Hc,{onClick:t=>V(t,e),className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[Ce.jsx(sn,{className:"w-4 h-4 mr-2"}),"Stock"]}),Ce.jsx(Hc,{onClick:t=>$(t,e),variant:"outline",size:"sm",className:"text-blue-600",title:"Edit",children:Ce.jsx(Bn,{className:"w-4 h-4"})}),Ce.jsx(Hc,{onClick:t=>U(t,e),variant:"outline",size:"sm",className:"text-yellow-600",title:e.is_active?"Deactivate":"Activate",children:e.is_active?Ce.jsx(jn,{className:"w-4 h-4"}):Ce.jsx(wn,{className:"w-4 h-4"})}),Ce.jsx(Hc,{onClick:t=>z(t,e.id),variant:"outline",size:"sm",className:"text-red-600",title:"Delete",children:Ce.jsx(na,{className:"w-4 h-4"})})]})]}):Ce.jsxs(Ce.Fragment,{children:[Ce.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2 truncate",title:e.name,children:e.name}),Ce.jsx("div",{className:"mb-3",children:Ce.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["₱",e.price.toLocaleString()]})}),Ce.jsxs("div",{className:"space-y-2 mb-4 p-3 bg-gray-50 rounded-lg",children:[Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsxs("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[Ce.jsx(Fn,{className:"h-4 w-4"}),"Total Stock:"]}),Ce.jsx("span",{className:"font-bold text-gray-900",children:e.total_stock||0})]}),Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsx("span",{className:"text-sm text-gray-600",children:"Available:"}),Ce.jsx("span",{className:"font-semibold text-green-600",children:e.total_available||0})]}),(e.total_reserved||0)>0&&Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsx("span",{className:"text-sm text-gray-600",children:"Reserved:"}),Ce.jsx("span",{className:"font-semibold text-orange-600",children:e.total_reserved})]}),Ce.jsx("div",{className:"pt-2 border-t border-gray-200",children:Ce.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[Ce.jsx(sn,{className:"h-4 w-4"}),Ce.jsx("span",{children:e.branch_availability&&e.branch_availability.length>0?`${e.branch_availability.filter(e=>e.is_available).length}/${e.branch_availability.length} branches`:"No stock data"})]})})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs(Hc,{onClick:t=>V(t,e),className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[Ce.jsx(sn,{className:"w-4 h-4 mr-2"}),"Manage Stock"]}),Ce.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[Ce.jsx(Hc,{onClick:t=>$(t,e),variant:"outline",size:"sm",className:"text-blue-600 hover:bg-blue-50",title:"Edit Product",children:Ce.jsx(Bn,{className:"w-4 h-4"})}),Ce.jsx(Hc,{onClick:t=>U(t,e),variant:"outline",size:"sm",className:"text-yellow-600 hover:bg-yellow-50",title:e.is_active?"Deactivate":"Activate",children:e.is_active?Ce.jsx(jn,{className:"w-4 h-4"}):Ce.jsx(wn,{className:"w-4 h-4"})}),Ce.jsx(Hc,{onClick:t=>z(t,e.id),variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50",title:"Delete Product",children:Ce.jsx(na,{className:"w-4 h-4"})})]})]})]})})]},e.id))}),0===t.length&&!n&&Ce.jsxs(td,{className:"p-12 text-center",children:[Ce.jsx(Fn,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Products Found"}),Ce.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by adding your first product to the gallery."}),Ce.jsxs(Hc,{onClick:()=>{H(),i(!0)},children:[Ce.jsx(zn,{className:"w-4 h-4 mr-2"}),"Add First Product"]})]}),s&&Ce.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:Ce.jsx("div",{className:"relative top-20 mx-auto p-5 border w-[600px] shadow-lg rounded-md bg-white",children:Ce.jsxs("div",{className:"mt-3",children:[Ce.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Ce.jsx("h3",{className:"text-lg font-medium text-gray-900",children:o?"Edit Product":"Add New Product"}),Ce.jsx("button",{onClick:H,className:"text-gray-400 hover:text-gray-600",children:Ce.jsx(pa,{className:"w-6 h-6"})})]}),Ce.jsxs("form",{onSubmit:async e=>{var t,r,n,a;if(e.preventDefault(),c.name&&c.name.trim())if(!c.price||parseFloat(c.price)<0)Es.error("Valid price is required");else if(!c.stock_quantity||parseInt(c.stock_quantity)<0)Es.error("Valid stock quantity is required");else try{const e=new FormData;if(e.append("name",c.name.trim()),e.append("description",(c.description||"").trim()),e.append("price",parseFloat(c.price).toString()),e.append("is_active",c.is_active?"1":"0"),c.category_id){const t=R.find(e=>e.id.toString()===c.category_id);t&&e.append("category",t.name)}const t=Object.entries(c.branch_stocks||{}).filter(([e,t])=>t>0).map(([e,t])=>({branch_id:parseInt(e),stock_quantity:t}));t.length>0&&e.append("branch_stocks",JSON.stringify(t)),u.forEach((t,r)=>{e.append(`images[${r}]`,t)}),o?(await Cp(String(o.id),e),Es.success("Product updated successfully"),await q()):(await Op(e),Es.success("Product created successfully"),await q()),H()}catch(s){console.error("Product creation error:",s);let e="Failed to save product";if(null==(r=null==(t=null==s?void 0:s.response)?void 0:t.data)?void 0:r.message)e=s.response.data.message;else if(null==(a=null==(n=null==s?void 0:s.response)?void 0:n.data)?void 0:a.errors){const t=s.response.data.errors;if("object"==typeof t&&null!==t)try{e=Object.values(t).flat().join(", ")}catch(i){e="Validation errors occurred"}}else(null==s?void 0:s.message)&&(e=s.message);Es.error(e)}else Es.error("Product name is required")},className:"space-y-4",children:[Ce.jsxs("div",{children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product Name"}),Ce.jsx("input",{type:"text",value:c.name,onChange:e=>d({...c,name:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),Ce.jsx("textarea",{value:c.description,onChange:e=>d({...c,description:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price"}),Ce.jsx("input",{type:"number",step:"0.01",min:"0",value:c.price,onChange:e=>d({...c,price:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Stock Quantity"}),Ce.jsx("input",{type:"number",min:"0",value:c.stock_quantity,onChange:e=>d({...c,stock_quantity:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),Ce.jsxs(Dm,{value:c.category_id,onValueChange:e=>d({...c,category_id:e}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select category"})}),Ce.jsx(Bm,{children:R.map(e=>Ce.jsx(qm,{value:e.id.toString(),children:e.name},e.id))})]})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Stock Distribution"}),Ce.jsxs("div",{className:"mb-3",children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Quick Assign to All Branches"}),Ce.jsx("input",{type:"number",min:"0",placeholder:"Enter total stock quantity",onChange:e=>{const t=parseInt(e.target.value)||0,r=Math.floor(t/(F.length||1)),n={};F.forEach(e=>{n[e.id]=r}),d({...c,branch_stocks:n})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),Ce.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a number to automatically distribute stock equally across all branches"})]}),Ce.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Individual Branch Stock"}),Ce.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto border border-gray-200 rounded-md p-3",children:(F||[]).map(e=>{var t;return Ce.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[Ce.jsx("div",{className:"flex-1",children:Ce.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[e.name," ",e.code&&`(${e.code})`]})}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx("input",{type:"number",min:"0",placeholder:"0",value:(null==(t=c.branch_stocks)?void 0:t[e.id])||"",onChange:t=>{const r=""===t.target.value?0:parseInt(t.target.value),n=c.branch_stocks||{};d({...c,branch_stocks:{...n,[e.id]:r}})},className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),Ce.jsx("span",{className:"text-xs text-gray-500",children:"units"})]})]},e.id)})}),Ce.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-md",children:Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Total Stock:"}),Ce.jsxs("span",{className:"text-sm font-bold text-blue-900",children:[Object.values(c.branch_stocks||{}).reduce((e,t)=>e+(t||0),0)," units"]})]})}),Ce.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter stock quantity for each branch. Leave as 0 if no stock should be assigned to that branch."})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product Images"}),u.length>0&&Ce.jsx("div",{className:"mt-2 mb-3",children:Ce.jsx("div",{className:"flex gap-2 flex-wrap",children:u.map((e,t)=>Ce.jsxs("div",{className:"relative",children:[Ce.jsx("img",{src:URL.createObjectURL(e),alt:`Preview ${t+1}`,className:"h-32 w-32 object-cover rounded-lg border border-gray-300"}),Ce.jsx("button",{type:"button",onClick:()=>{h(e=>e.filter((e,r)=>r!==t))},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]},t))})}),Ce.jsxs("div",{className:"flex gap-2",children:[Ce.jsxs("button",{type:"button",onClick:()=>{var e;return null==(e=O.current)?void 0:e.click()},disabled:_,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[_?Ce.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):Ce.jsx(oa,{className:"w-4 h-4"}),"Select Images"]}),Ce.jsx("input",{ref:O,type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=e.target.files;if(t&&t.length>0)for(let r=0;r<t.length;r++){const e=t[r];if(e.type.startsWith("image/"))if(e.size>2097152)Es.error(`Image ${e.name} size must be less than 2MB`);else{if(u.length>=4){Es.error("Maximum 4 images allowed");break}W(e)}else Es.error(`File ${e.name} is not an image`)}},className:"hidden"})]})]}),Ce.jsxs("div",{className:"flex items-center",children:[Ce.jsx("input",{type:"checkbox",id:"is_active",checked:c.is_active,onChange:e=>d({...c,is_active:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),Ce.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),Ce.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[Ce.jsx("button",{type:"button",onClick:H,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),Ce.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-blue-700",children:o?"Update":"Create"})]})]})]})})}),f&&y&&Ce.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:Ce.jsx("div",{className:"relative top-20 mx-auto p-5 border w-2/3 shadow-lg rounded-md bg-white",children:Ce.jsxs("div",{className:"mt-3",children:[Ce.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Ce.jsxs("div",{children:[Ce.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[Ce.jsx(sn,{className:"h-5 w-5 text-blue-600"}),"Branch Stock Management"]}),Ce.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Manage product availability across all branches: ",Ce.jsx("strong",{children:y.name})]})]}),Ce.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:Ce.jsx(pa,{className:"w-6 h-6"})})]}),j?Ce.jsxs("div",{className:"py-8 text-center",children:[Ce.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),Ce.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading branch stock..."})]}):Ce.jsxs("div",{children:[Ce.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:[Ce.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Quick Actions"}),Ce.jsxs("div",{className:"flex items-center space-x-4",children:[Ce.jsx("button",{onClick:()=>{const e={};m.forEach(t=>{e[t.branch_id]=10}),S(e)},className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"Set All to 10"}),Ce.jsx("button",{onClick:()=>{const e={};m.forEach(t=>{e[t.branch_id]=0}),S(e)},className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"Set All to 0"}),Ce.jsx("span",{className:"text-xs text-blue-700",children:'Click individual "Save" buttons to update each branch'})]})]}),Ce.jsx("div",{className:"overflow-x-auto",children:Ce.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ce.jsx("thead",{className:"bg-gray-50",children:Ce.jsxs("tr",{children:[Ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branch"}),Ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Quantity"}),Ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available"}),Ce.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),Ce.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(e=>Ce.jsxs("tr",{children:[Ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.branch.name}),Ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ce.jsx("input",{type:"number",value:N[e.branch_id]??e.stock_quantity,onChange:t=>{const r=parseInt(t.target.value||"0");S(t=>({...t,[e.branch_id]:isNaN(r)?0:r}))},className:"w-24 px-2 py-1 border rounded",min:0})}),Ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ce.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+((N[e.branch_id]??e.stock_quantity)-(e.reserved_quantity??0)>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:(N[e.branch_id]??e.stock_quantity)-(e.reserved_quantity??0)})}),Ce.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:Ce.jsx("button",{className:"text-blue-600 hover:text-blue-900",onClick:async()=>{try{const t={}.VITE_API_URL||"http://127.0.0.1:8000/api-mysql.php",r=sessionStorage.getItem("auth_token"),n=N[e.branch_id]??e.stock_quantity;if(!(await fetch(`${t}/branch-stock`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:r?`Bearer ${r}`:""},body:JSON.stringify({product_id:y.id,branch_id:e.branch_id,stock_quantity:n})})).ok)throw new Error("Update failed");Es.success("Stock updated"),p(t=>t.map(t=>t.branch_id===e.branch_id?{...t,stock_quantity:n}:t))}catch(t){Es.error("Failed to update stock")}},children:"Save"})})]},e.branch_id))})]})})]})]})})})]})},RK=Ct.createContext(null),LK=({children:e})=>Ce.jsx(RK.Provider,{value:null,children:e}),FK=["eye_exam","contact_fitting","follow_up","consultation","emergency"],BK=["scheduled","confirmed","in_progress","completed","cancelled","no_show"],qK=({appointment:e,onSuccess:t,onCancel:r})=>{const[n,a]=Ct.useState(!1),[s,i]=Ct.useState({sphere:"",cylinder:"",axis:"",pd:"",add:""}),[o,l]=Ct.useState({sphere:"",cylinder:"",axis:"",pd:"",add:""}),[c,d]=Ct.useState({vision_acuity:"",additional_notes:"",recommendations:"",lens_type:"",coating:"",follow_up_date:"",follow_up_notes:""}),[u,h]=Ct.useState(""),[m,p]=Ct.useState(!1),[f,x]=Ct.useState(""),[y,v]=Ct.useState(""),g=(e,t,r)=>{"right"===e?i(e=>({...e,[t]:r})):l(e=>({...e,[t]:r}))},b=e=>{if(!e)return 20;const t=e.match(/20\/(\d+)/);return t?parseInt(t[1]):20};Ct.useEffect(()=>{const e=parseFloat(o.sphere)||0,t=parseFloat(s.sphere)||0,r=parseFloat(o.cylinder)||0,n=parseFloat(s.cylinder)||0,a=parseFloat(o.add)||0,i=parseFloat(s.add)||0,l=b(c.vision_acuity),d=b(c.vision_acuity);if(!(o.sphere||s.sphere||o.cylinder||s.cylinder||o.add||s.add||c.vision_acuity))return void v("");let u="";c.vision_acuity&&(l>40||d>40)&&(u="Amblyopia"),!u&&(Math.abs(e-t)>=2||Math.abs(r-n)>=2)&&(u="Anisometropia"),!u&&(a>=1||i>=1)&&(u="Presbyopia"),!u&&(e<=-.5||t<=-.5)&&(u="Myopia"),!u&&(e>=.5||t>=.5)&&(u="Hyperopia"),!u&&(r<=-.5||n<=-.5)&&(u="Astigmatism"),u||0!==e||0!==t||0!==r||0!==n||0!==a||0!==i||(u="None"),u||0===e&&0===t&&0===r&&0===n||(u=Math.abs(e)>Math.abs(r)||Math.abs(t)>Math.abs(n)?e<0||t<0?"Myopia":"Hyperopia":"Astigmatism"),v(u)},[o.sphere,s.sphere,o.cylinder,s.cylinder,o.add,s.add,c.vision_acuity]);return Ce.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:Ce.jsxs("div",{className:"relative top-4 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[Ce.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ce.jsxs("div",{children:[Ce.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[Ce.jsx(wn,{className:"h-6 w-6 text-blue-600"}),"Create Prescription"]}),Ce.jsxs("p",{className:"text-gray-600 mt-1",children:["Patient: ",Ce.jsx("strong",{children:e.patient.name})," | Date: ",e.appointment_date," | Time: ",e.start_time]})]}),Ce.jsx(Hc,{variant:"ghost",onClick:r,children:Ce.jsx(pa,{className:"h-5 w-5"})})]}),Ce.jsxs("form",{onSubmit:async r=>{r.preventDefault(),a(!0);try{const r=sessionStorage.getItem("auth_token");if(!r)throw new Error("No authentication token found. Please log in again.");const a=sessionStorage.getItem("auth_current_user");let l=null;if(a)try{l=JSON.parse(a)}catch(n){console.warn("Could not parse user data:",n)}console.log("Creating prescription with token:",r.substring(0,20)+"..."),console.log("User data:",l);const d=new Date(e.appointment_date),h=new Date(d);h.setFullYear(h.getFullYear()+2);const p={appointment_id:e.id,right_eye:s,left_eye:o,...c,issue_date:e.appointment_date,expiry_date:h.toISOString().split("T")[0],condition:u,trackable:m,referral_notes:f};console.log("Request body:",p),console.log("API URL:",`${{}.VITE_API_URL||"http://localhost:8000/api"}/prescriptions`);const x=await fetch(`${{}.VITE_API_URL||"http://localhost:8000/api"}/prescriptions`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(p)});if(console.log("Response status:",x.status),console.log("Response headers:",Object.fromEntries(x.headers.entries())),!x.ok){let e="Failed to create prescription";const t=x.clone();try{const t=await x.json();e=t.message||t.error||e,console.error("Error response:",t),console.error("Full error object:",JSON.stringify(t,null,2))}catch(n){try{const r=await t.text();console.error("Error text:",r),e=`HTTP ${x.status}: ${r}`}catch(i){console.error("Could not read response as text:",i),e=`HTTP ${x.status}: Unable to read error details`}}throw 401===x.status&&(e="Authentication failed (401). Token may be invalid or expired. Please log out and log back in."),new Error(e)}const y=await x.json();console.log("Prescription created successfully:",y),Es.success("Prescription created successfully"),t()}catch(l){console.error("Prescription creation error:",l),Es.error(l.message||"Failed to create prescription")}finally{a(!1)}},className:"space-y-6",children:[Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{className:"text-lg",children:"Eye Examination Results"})}),Ce.jsxs(sd,{className:"space-y-6",children:[Ce.jsxs("div",{children:[Ce.jsx("h3",{className:"text-md font-semibold mb-4 text-blue-700",children:"Right Eye (OD)"}),Ce.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"right_sphere",children:"Sphere"}),Ce.jsx(Yc,{id:"right_sphere",type:"number",step:"0.25",value:s.sphere,onChange:e=>g("right","sphere",e.target.value),placeholder:"e.g., -2.50"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"right_cylinder",children:"Cylinder"}),Ce.jsx(Yc,{id:"right_cylinder",type:"number",step:"0.25",value:s.cylinder,onChange:e=>g("right","cylinder",e.target.value),placeholder:"e.g., -1.25"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"right_axis",children:"Axis"}),Ce.jsx(Yc,{id:"right_axis",type:"number",min:"0",max:"180",value:s.axis,onChange:e=>g("right","axis",e.target.value),placeholder:"e.g., 90"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"right_add",children:"Add"}),Ce.jsx(Yc,{id:"right_add",type:"number",step:"0.25",min:"0",max:"4.00",value:s.add,onChange:e=>g("right","add",e.target.value),placeholder:"e.g., +2.00"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"right_pd",children:"PD"}),Ce.jsx(Yc,{id:"right_pd",type:"number",step:"0.5",value:s.pd,onChange:e=>g("right","pd",e.target.value),placeholder:"e.g., 32.5"})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx("h3",{className:"text-md font-semibold mb-4 text-green-700",children:"Left Eye (OS)"}),Ce.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"left_sphere",children:"Sphere"}),Ce.jsx(Yc,{id:"left_sphere",type:"number",step:"0.25",value:o.sphere,onChange:e=>g("left","sphere",e.target.value),placeholder:"e.g., -2.50"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"left_cylinder",children:"Cylinder"}),Ce.jsx(Yc,{id:"left_cylinder",type:"number",step:"0.25",value:o.cylinder,onChange:e=>g("left","cylinder",e.target.value),placeholder:"e.g., -1.25"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"left_axis",children:"Axis"}),Ce.jsx(Yc,{id:"left_axis",type:"number",min:"0",max:"180",value:o.axis,onChange:e=>g("left","axis",e.target.value),placeholder:"e.g., 90"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"left_add",children:"Add"}),Ce.jsx(Yc,{id:"left_add",type:"number",step:"0.25",min:"0",max:"4.00",value:o.add,onChange:e=>g("left","add",e.target.value),placeholder:"e.g., +2.00"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"left_pd",children:"PD"}),Ce.jsx(Yc,{id:"left_pd",type:"number",step:"0.5",value:o.pd,onChange:e=>g("left","pd",e.target.value),placeholder:"e.g., 32.5"})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"vision_acuity",children:"Vision Acuity"}),Ce.jsx(Yc,{id:"vision_acuity",value:c.vision_acuity,onChange:e=>d(t=>({...t,vision_acuity:e.target.value})),placeholder:"e.g., 20/20, 20/25"})]}),Ce.jsxs("div",{children:[Ce.jsxs(Zc,{htmlFor:"condition",children:["Condition ",y&&"(Suggested)"]}),Ce.jsxs(Dm,{value:u||y,onValueChange:e=>{h(e);p(["None","Other","Myopia","Hyperopia","Astigmatism","Presbyopia","Anisometropia","Amblyopia"].includes(e)),x("")},children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"-- Select Condition --"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"None",children:"None"}),Ce.jsx(qm,{value:"Other",children:"Other"}),Ce.jsx("div",{className:"px-2 py-1.5 text-sm font-semibold text-gray-500 border-t mt-1 pt-2",children:"Trackable Conditions"}),Ce.jsx(qm,{value:"Myopia",children:"Myopia"}),Ce.jsx(qm,{value:"Hyperopia",children:"Hyperopia"}),Ce.jsx(qm,{value:"Astigmatism",children:"Astigmatism"}),Ce.jsx(qm,{value:"Presbyopia",children:"Presbyopia"}),Ce.jsx(qm,{value:"Anisometropia",children:"Anisometropia"}),Ce.jsx(qm,{value:"Amblyopia",children:"Amblyopia"}),Ce.jsx("div",{className:"px-2 py-1.5 text-sm font-semibold text-gray-500 border-t mt-1 pt-2",children:"Referral Conditions"}),Ce.jsx(qm,{value:"Strabismus",children:"Strabismus"}),Ce.jsx(qm,{value:"Keratoconus",children:"Keratoconus"}),Ce.jsx(qm,{value:"Cataract",children:"Cataract"}),Ce.jsx(qm,{value:"Glaucoma",children:"Glaucoma"}),Ce.jsx(qm,{value:"Macular Degeneration",children:"Macular Degeneration"}),Ce.jsx(qm,{value:"Corneal Scar/Disease",children:"Corneal Scar/Disease"}),Ce.jsx(qm,{value:"Post-surgery / Trauma",children:"Post-surgery / Trauma"})]})]}),y&&Ce.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["💡 System Suggestion: ",y]})]}),u&&!m&&Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"referral_notes",children:"Referral Notes"}),Ce.jsx(fh,{id:"referral_notes",value:f,onChange:e=>x(e.target.value),placeholder:"Enter referral notes if needed",rows:3})]})]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{className:"text-lg",children:"Prescription Recommendations"})}),Ce.jsxs(sd,{className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"lens_type",children:"Lens Type"}),Ce.jsxs(Dm,{value:c.lens_type,onValueChange:e=>d(t=>({...t,lens_type:e})),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select lens type"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"single",children:"Single Vision"}),Ce.jsx(qm,{value:"bifocal",children:"Bifocal"}),Ce.jsx(qm,{value:"progressive",children:"Progressive"}),Ce.jsx(qm,{value:"reading",children:"Reading"}),Ce.jsx(qm,{value:"computer",children:"Computer"})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"coating",children:"Coating"}),Ce.jsxs(Dm,{value:c.coating,onValueChange:e=>d(t=>({...t,coating:e})),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select coating"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"none",children:"None"}),Ce.jsx(qm,{value:"anti_reflective",children:"Anti-Reflective"}),Ce.jsx(qm,{value:"uv_protection",children:"UV Protection"}),Ce.jsx(qm,{value:"blue_light",children:"Blue Light Filter"}),Ce.jsx(qm,{value:"photochromic",children:"Photochromic"})]})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"recommendations",children:"Recommendations"}),Ce.jsx(fh,{id:"recommendations",value:c.recommendations,onChange:e=>d(t=>({...t,recommendations:e.target.value})),placeholder:"Enter any specific recommendations for the patient...",rows:3})]})]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{className:"text-lg",children:"Additional Information"})}),Ce.jsxs(sd,{className:"space-y-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"additional_notes",children:"Additional Notes"}),Ce.jsx(fh,{id:"additional_notes",value:c.additional_notes,onChange:e=>d(t=>({...t,additional_notes:e.target.value})),placeholder:"Enter any additional notes about the examination...",rows:3})]}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"follow_up_date",children:"Follow-up Date"}),Ce.jsx(Yc,{id:"follow_up_date",type:"date",value:c.follow_up_date,onChange:e=>d(t=>({...t,follow_up_date:e.target.value})),min:(new Date).toISOString().split("T")[0]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"follow_up_notes",children:"Follow-up Notes"}),Ce.jsx(Yc,{id:"follow_up_notes",value:c.follow_up_notes,onChange:e=>d(t=>({...t,follow_up_notes:e.target.value})),placeholder:"Follow-up instructions..."})]})]})]})]}),Ce.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[Ce.jsx(Hc,{type:"button",variant:"outline",onClick:r,disabled:n,children:"Cancel"}),Ce.jsxs(Hc,{type:"submit",disabled:n,className:"flex items-center gap-2",children:[n?Ce.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):Ce.jsx(Hn,{className:"h-4 w-4"}),n?"Creating...":"Create Prescription"]})]})]})]})})},$K=()=>{const{user:e}=Lc(),[t,r]=Ct.useState("all"),[n,a]=Ct.useState("all"),[s,i]=Ct.useState("all"),[o,l]=Ct.useState(!1),[c,d]=Ct.useState(null),{appointments:u,loading:h,error:m,refetch:p}=oh({status:"all"!==t?t:void 0,type:"all"!==n?n:void 0,branch_id:"all"!==s?s:void 0}),f=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-green-100 text-green-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"no_show":return"bg-orange-100 text-orange-800"}},x=e=>{switch(e){case"eye_exam":return"bg-purple-100 text-purple-800";case"contact_fitting":return"bg-indigo-100 text-indigo-800";case"follow_up":return"bg-cyan-100 text-cyan-800";case"consultation":return"bg-teal-100 text-teal-800";case"emergency":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return h?Ce.jsx("div",{className:"flex items-center justify-center h-64",children:Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Ce.jsx("p",{className:"mt-4 text-gray-600",children:"Loading appointments..."})]})}):m?Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx("p",{className:"text-red-600 mb-4",children:m}),Ce.jsxs(Hc,{onClick:p,children:[Ce.jsx(Vn,{className:"h-4 w-4 mr-2"}),"Try Again"]})]}):Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"All Appointments"}),Ce.jsx("p",{className:"text-gray-600",children:"Manage all appointments - you can proceed with any appointment"})]}),Ce.jsxs(Hc,{children:[Ce.jsx(ln,{className:"h-4 w-4 mr-2"}),"Schedule New Appointment"]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(wn,{className:"h-5 w-5"}),Ce.jsx("span",{children:"Filters"})]})}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ce.jsxs(Dm,{value:t,onValueChange:r,children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Filter by status"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"all",children:"All Statuses"}),BK.map(e=>Ce.jsx(qm,{value:e,children:e.replace("_"," ").toUpperCase()},e))]})]}),Ce.jsxs(Dm,{value:n,onValueChange:a,children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Filter by type"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"all",children:"All Types"}),FK.map(e=>Ce.jsx(qm,{value:e,children:e.replace("_"," ").toUpperCase()},e))]})]}),Ce.jsx(Fp,{selectedBranchId:s,onBranchChange:i,showAllOption:!0,label:"Filter by Branch",placeholder:"All Branches",useAdminData:!1}),Ce.jsx(Hc,{variant:"outline",onClick:()=>{r("all"),a("all"),i("all")},children:"Clear Filters"})]})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{children:["All Appointments (",u.length,")"]}),Ce.jsxs(ad,{children:["Showing all appointments across all branches and optometrists","all"!==t&&` • Filtered by status: ${t}`,"all"!==n&&` • Filtered by type: ${n}`,"all"!==s&&` • Filtered by branch: ${s}`]})]}),Ce.jsxs(sd,{children:[Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Patient"}),Ce.jsx(Jm,{children:"Branch"}),Ce.jsx(Jm,{children:"Date & Time"}),Ce.jsx(Jm,{children:"Type"}),Ce.jsx(Jm,{children:"Status"}),Ce.jsx(Jm,{children:"Assigned To"}),Ce.jsx(Jm,{children:"Actions"})]})}),Ce.jsx(Xm,{children:u.map(t=>{var r,n,a,s,i,o,c;return Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(da,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{className:"font-medium",children:(null==(r=t.patient)?void 0:r.name)||"Unknown Patient"})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(sn,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{className:"font-medium",children:(null==(n=t.branch)?void 0:n.name)||"Unknown Branch"})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{children:(c=t.appointment_date,new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))}),Ce.jsx(yn,{className:"h-4 w-4 text-gray-400 ml-2"}),Ce.jsx("span",{children:(o=t.start_time,new Date(`1970-01-01T${o}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}))})]})}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{className:x(t.type),children:String(t.type).replace("_"," ")})}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{className:f(t.status),children:String(t.status).replace("_"," ")})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(da,{className:"h-4 w-4 text-gray-400"}),Ce.jsxs("span",{className:"font-medium "+((null==(a=t.optometrist)?void 0:a.id)===(null==e?void 0:e.id)?"text-green-600":t.optometrist?"text-blue-600":"text-gray-500"),children:[(null==(s=t.optometrist)?void 0:s.name)||"Unassigned",(null==(i=t.optometrist)?void 0:i.id)===(null==e?void 0:e.id)&&" (You)"]})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsxs(Hc,{size:"sm",variant:"outline",children:[Ce.jsx(wn,{className:"h-4 w-4 mr-1"}),"View"]}),"scheduled"===t.status||"confirmed"===t.status?Ce.jsxs(Hc,{size:"sm",variant:"default",className:"bg-blue-600 hover:bg-blue-700",children:[Ce.jsx(da,{className:"h-4 w-4 mr-1"}),"Take Over"]}):"in_progress"===t.status&&Ce.jsxs(Hc,{size:"sm",variant:"default",onClick:()=>(e=>{d(e),l(!0)})(t),className:"bg-green-600 hover:bg-green-700",children:[Ce.jsx(wn,{className:"h-4 w-4 mr-1"}),"Create Prescription"]})]})})]},t.id)})})]}),0===u.length&&Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(ln,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("p",{className:"text-gray-600",children:"No appointments found"})]})]})]}),o&&c&&Ce.jsx(qK,{appointment:c,onSuccess:()=>{l(!1),d(null),p()},onCancel:()=>{l(!1),d(null)}})]})},zK=()=>{var e;const{user:t}=Lc(),{toast:r}=Jt();Dt();const[n,a]=Ct.useState(""),[s,i]=Ct.useState("all"),[o,l]=Ct.useState("all"),[c,d]=Ct.useState(null),[u,h]=Ct.useState(!1),[m,p]=Ct.useState(!1),[f,x]=Ct.useState(null),{appointments:y,loading:v,error:g,refetch:b}=oh({status:"all"!==s?s:void 0,type:"all"!==o?o:void 0,patient_name:n||void 0});console.log("StaffAppointments - appointments data:",y),console.log("StaffAppointments - user:",t);const{update:j,loading:w}=ch(),N=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-green-100 text-green-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"no_show":return"bg-orange-100 text-orange-800"}},S=e=>{switch(e){case"eye_exam":return"bg-purple-100 text-purple-800";case"contact_fitting":return"bg-indigo-100 text-indigo-800";case"follow_up":return"bg-cyan-100 text-cyan-800";case"consultation":return"bg-teal-100 text-teal-800";case"emergency":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),k=e=>new Date(`1970-01-01T${e}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),O=async(e,t)=>{try{await j(e,{status:t}),r({title:"Status Updated",description:`Appointment status changed to ${t.replace("_"," ")}`}),b()}catch(n){r({title:"Error",description:"Failed to update appointment status",variant:"destructive"})}};return v?Ce.jsx("div",{className:"flex items-center justify-center h-64",children:Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Ce.jsx("p",{className:"mt-4 text-gray-600",children:"Loading appointments..."})]})}):g?Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx("p",{className:"text-red-600 mb-4",children:g}),Ce.jsx(Hc,{onClick:b,children:"Try Again"})]}):Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{children:[Ce.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Appointment Management"}),Ce.jsxs("p",{className:"text-gray-600",children:["Manage appointments for your branch - ",(null==(e=null==t?void 0:t.branch)?void 0:e.name)||"Current Branch"]})]}),Ce.jsxs("div",{className:"flex gap-2",children:[Ce.jsxs(Hc,{variant:"outline",onClick:()=>h(!0),children:[Ce.jsx(zn,{className:"h-4 w-4 mr-2"}),"New Walk-in"]}),Ce.jsxs(Hc,{onClick:b,disabled:v,children:[Ce.jsx(ln,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(_n,{className:"h-5 w-5"}),Ce.jsx("span",{children:"Filters"})]})}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ce.jsxs("div",{className:"relative",children:[Ce.jsx(Yn,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Ce.jsx(Yc,{placeholder:"Search by patient name...",value:n,onChange:e=>a(e.target.value),className:"pl-10"})]}),Ce.jsxs(Dm,{value:s,onValueChange:i,children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Filter by status"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"all",children:"All Statuses"}),BK.map(e=>Ce.jsx(qm,{value:e,children:e.replace("_"," ").toUpperCase()},e))]})]}),Ce.jsxs(Dm,{value:o,onValueChange:l,children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Filter by type"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"all",children:"All Types"}),FK.map(e=>Ce.jsx(qm,{value:e,children:e.replace("_"," ").toUpperCase()},e))]})]}),Ce.jsx(Hc,{variant:"outline",onClick:()=>{a(""),i("all"),l("all")},children:"Clear Filters"})]})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{children:["Appointments (",y.length,")"]}),Ce.jsxs(ad,{children:["all"!==s&&`Filtered by status: ${s}`,"all"!==o&&`, type: ${o}`]})]}),Ce.jsxs(sd,{children:[Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{className:"w-[150px]",children:"Patient"}),Ce.jsx(Jm,{className:"w-[150px]",children:"Optometrist"}),Ce.jsx(Jm,{className:"w-[180px]",children:"Date & Time"}),Ce.jsx(Jm,{className:"w-[120px]",children:"Type"}),Ce.jsx(Jm,{className:"w-[100px]",children:"Status"}),Ce.jsx(Jm,{className:"w-[300px]",children:"Actions"})]})}),Ce.jsx(Xm,{children:y.map(e=>{var t,r,n,a;return Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(da,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{className:"font-medium",children:(null==(t=e.patient)?void 0:t.name)||"Unknown Patient"})]})}),Ce.jsx(Zm,{children:(null==(r=e.optometrist)?void 0:r.name)||"Unknown Optometrist"}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{children:_(e.appointment_date)}),Ce.jsx(yn,{className:"h-4 w-4 text-gray-400 ml-2"}),Ce.jsx("span",{children:k(e.start_time)})]})}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{className:S(e.type),children:e.type.replace("_"," ")})}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{className:N(e.status),children:e.status.replace("_"," ")})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-1",children:[Ce.jsxs(Xp,{children:[Ce.jsx(Qp,{asChild:!0,children:Ce.jsx(Hc,{variant:"ghost",size:"sm",onClick:()=>d(e),children:Ce.jsx(wn,{className:"h-4 w-4"})})}),Ce.jsxs(ef,{className:"max-w-2xl",children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Appointment Details"}),Ce.jsx(af,{children:"View detailed information about this appointment"})]}),c&&Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Patient"}),Ce.jsx("p",{className:"text-sm text-gray-900",children:(null==(n=c.patient)?void 0:n.name)||"Unknown Patient"})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Optometrist"}),Ce.jsx("p",{className:"text-sm text-gray-900",children:(null==(a=c.optometrist)?void 0:a.name)||"Unknown Optometrist"})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date"}),Ce.jsx("p",{className:"text-sm text-gray-900",children:_(c.appointment_date)})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Time"}),Ce.jsxs("p",{className:"text-sm text-gray-900",children:[k(c.start_time)," - ",k(c.end_time)]})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Type"}),Ce.jsx(Yd,{className:S(c.type),children:c.type.replace("_"," ")})]}),Ce.jsxs("div",{children:[Ce.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),Ce.jsx(Yd,{className:N(c.status),children:c.status.replace("_"," ")})]})]}),c.notes&&Ce.jsxs("div",{children:[Ce.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notes"}),Ce.jsx("p",{className:"text-sm text-gray-900 mt-1",children:c.notes})]})]})]})]}),Ce.jsxs("div",{className:"flex flex-wrap gap-1",children:["scheduled"===e.status&&Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>O(e.id.toString(),"confirmed"),disabled:w,className:"text-green-700 border-green-200 hover:bg-green-50",children:[Ce.jsx(dn,{className:"h-3 w-3 mr-1"}),"Confirm"]}),"confirmed"===e.status&&Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>O(e.id.toString(),"in_progress"),disabled:w,className:"text-blue-700 border-blue-200 hover:bg-blue-50",children:[Ce.jsx(yn,{className:"h-3 w-3 mr-1"}),"Start"]}),"in_progress"===e.status&&Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>O(e.id.toString(),"completed"),disabled:w,className:"text-green-700 border-green-200 hover:bg-green-50",children:[Ce.jsx(dn,{className:"h-3 w-3 mr-1"}),"Complete"]}),["scheduled","confirmed"].includes(e.status)&&Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(e=>{x({appointmentId:e.id.toString(),newDate:e.appointment_date,newTime:e.start_time}),p(!0)})(e),className:"text-orange-700 border-orange-200 hover:bg-orange-50",children:[Ce.jsx(Wn,{className:"h-3 w-3 mr-1"}),"Reschedule"]}),["scheduled","confirmed"].includes(e.status)&&Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(async e=>{confirm("Cancel this appointment? This action cannot be undone.")&&await O(e,"cancelled")})(e.id.toString()),disabled:w,className:"text-red-700 border-red-200 hover:bg-red-50",children:[Ce.jsx(ma,{className:"h-3 w-3 mr-1"}),"Cancel"]}),["scheduled","confirmed"].includes(e.status)&&Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(async e=>{confirm('Mark this appointment as "No Show"? This action cannot be undone.')&&await O(e,"no_show")})(e.id.toString()),disabled:w,className:"text-amber-700 border-amber-200 hover:bg-amber-50",children:[Ce.jsx(da,{className:"h-3 w-3 mr-1"}),"No Show"]})]})]})})]},e.id)})})]}),0===y.length&&Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(ln,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("p",{className:"text-gray-600",children:"No appointments found"})]})]})]}),Ce.jsx(Xp,{open:m,onOpenChange:p,children:Ce.jsxs(ef,{children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Reschedule Appointment"}),Ce.jsx(af,{children:"Select a new date and time for this appointment"})]}),f&&Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"reschedule-date",children:"New Date"}),Ce.jsx(Yc,{id:"reschedule-date",type:"date",value:f.newDate,onChange:e=>x({...f,newDate:e.target.value}),min:(new Date).toISOString().split("T")[0]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"reschedule-time",children:"New Time"}),Ce.jsx(Yc,{id:"reschedule-time",type:"time",value:f.newTime,onChange:e=>x({...f,newTime:e.target.value})})]}),Ce.jsxs("div",{className:"flex justify-end space-x-2",children:[Ce.jsx(Hc,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),Ce.jsx(Hc,{onClick:async()=>{if(f)try{const[e,t]=f.newTime.split(":"),n=`${e}:${t}`,a=`${parseInt(e)+1}:${t}`;await j(f.appointmentId,{appointment_date:f.newDate,start_time:n,end_time:a}),r({title:"Appointment Rescheduled",description:"The appointment has been successfully rescheduled"}),p(!1),x(null),b()}catch(e){r({title:"Error",description:"Failed to reschedule appointment",variant:"destructive"})}},disabled:w,children:w?"Rescheduling...":"Reschedule"})]})]})]})}),Ce.jsx(Xp,{open:u,onOpenChange:h,children:Ce.jsxs(ef,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"New Walk-in Appointment"}),Ce.jsx(af,{children:"Create a new appointment for a walk-in customer"})]}),Ce.jsx(vH,{onSuccess:()=>{h(!1),b(),r({title:"Appointment Created",description:"Walk-in appointment has been successfully created"})}})]})})]})},UK={}.VITE_API_URL||"http://127.0.0.1:8000/api",VK=Ac.create({baseURL:UK,headers:{"Content-Type":"application/json",Accept:"application/json"}});VK.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),VK.interceptors.response.use(e=>e,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const WK=()=>{const{user:e}=Lc(),[t,r]=Ct.useState([]),[n,a]=Ct.useState(!0),[s,i]=Ct.useState(null),[o,l]=Ct.useState(""),[c,d]=Ct.useState(null),[u,h]=Ct.useState(null),[m,p]=Ct.useState(!1);Ct.useEffect(()=>{(null==e?void 0:e.id)?f():null===e&&a(!1)},[null==e?void 0:e.id,e]);const f=async()=>{var e,t;try{a(!0),i(null);const e=await(async()=>(await VK.get("/optometrist/patients")).data)();r(e.data||[])}catch(n){console.error("Error loading patients:",n),r([]),401===(null==(e=n.response)?void 0:e.status)?i("Please log in to view patient records"):403===(null==(t=n.response)?void 0:t.status)?i("You do not have permission to view patient records"):i(n instanceof Error?n.message:"Failed to load patients")}finally{a(!1)}},x=async e=>{try{p(!0);const t=await(async e=>(await VK.get(`/optometrist/patients/${e}`)).data)(e);h(t)}catch(t){console.error("Error loading patient details:",t)}finally{p(!1)}},y=(t||[]).filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.email.toLowerCase().includes(o.toLowerCase())||e.phone&&e.phone.includes(o)),v=e=>"active"===e?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800";return n?Ce.jsxs("div",{className:"p-6 flex items-center justify-center",children:[Ce.jsx(Tn,{className:"h-8 w-8 animate-spin"}),Ce.jsx("span",{className:"ml-2",children:"Loading patients..."})]}):s?Ce.jsxs("div",{className:"p-6",children:[Ce.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-4",children:[Ce.jsx(Qr,{className:"h-5 w-5"}),Ce.jsxs("span",{children:["Error: ",s]})]}),Ce.jsx(Hc,{onClick:f,children:"Retry"})]}):Ce.jsxs("div",{className:"p-6",children:[Ce.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ce.jsx("h1",{className:"text-2xl font-bold",children:"Patient Records"}),Ce.jsxs(Hc,{children:[Ce.jsx(da,{className:"mr-2 h-4 w-4"}),"Add New Patient"]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"Patient Management"}),Ce.jsx(ad,{children:"Manage your patient records and medical history"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"mb-4",children:Ce.jsxs("div",{className:"relative",children:[Ce.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),Ce.jsx(Yc,{placeholder:"Search patients by name, email, or phone...",value:o,onChange:e=>l(e.target.value),className:"pl-10"})]})}),0===y.length?Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(da,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Patients Found"}),Ce.jsx("p",{className:"text-gray-600",children:"No patients match your search criteria."})]}):Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Patient"}),Ce.jsx(Jm,{children:"Last Visit"}),Ce.jsx(Jm,{children:"Prescriptions"}),Ce.jsx(Jm,{children:"Status"}),Ce.jsx(Jm,{children:"Actions"})]})}),Ce.jsx(Xm,{children:y.map(e=>{var t,r,n,a;return Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{children:Ce.jsxs("div",{children:[Ce.jsx("p",{className:"font-medium",children:e.name}),Ce.jsx("p",{className:"text-sm text-gray-500",children:e.email})]})}),Ce.jsx(Zm,{children:e.last_visit?Ju(new Date(e.last_visit),"MMM d, yyyy"):"N/A"}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{variant:"outline",children:e.total_prescriptions})}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{className:v(e.status),children:e.status})}),Ce.jsx(Zm,{children:Ce.jsxs(Xp,{children:[Ce.jsx(Qp,{asChild:!0,children:Ce.jsx(Hc,{size:"sm",variant:"outline",onClick:()=>{d(e),x(e.id)},children:Ce.jsx(Sn,{className:"h-4 w-4"})})}),Ce.jsxs(ef,{className:"max-w-4xl",children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Patient Details & Prescription History"}),Ce.jsx(af,{children:"Complete patient information and prescription history"})]}),c&&u&&Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{children:[Ce.jsx("h3",{className:"font-semibold mb-2",children:"Basic Information"}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium",children:"Name"}),Ce.jsx("p",{children:(null==(t=u.patient)?void 0:t.name)||"N/A"})]}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium",children:"Email"}),Ce.jsx("p",{children:(null==(r=u.patient)?void 0:r.email)||"N/A"})]}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium",children:"Phone"}),Ce.jsx("p",{children:(null==(n=u.patient)?void 0:n.phone)||"N/A"})]}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium",children:"Date of Birth"}),Ce.jsx("p",{children:(null==(a=u.patient)?void 0:a.date_of_birth)||"N/A"})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx("h3",{className:"font-semibold mb-4",children:"Appointment History"}),u.appointments&&0!==u.appointments.length?Ce.jsx("div",{className:"space-y-2",children:u.appointments.map(e=>Ce.jsx(td,{children:Ce.jsxs(sd,{className:"p-3",children:[Ce.jsxs("div",{className:"flex justify-between items-start",children:[Ce.jsxs("div",{children:[Ce.jsx("p",{className:"font-medium",children:e.type}),Ce.jsxs("p",{className:"text-sm text-gray-500",children:[Ju(new Date(e.date),"MMM d, yyyy")," at ",e.time]}),e.branch&&Ce.jsx("p",{className:"text-sm text-gray-500",children:e.branch.name})]}),Ce.jsx(Yd,{className:v(e.status),children:e.status})]}),e.notes&&Ce.jsx("p",{className:"text-sm mt-2 text-gray-600",children:e.notes})]})},e.id))}):Ce.jsx("p",{className:"text-gray-500",children:"No appointments found for this patient."})]}),Ce.jsxs("div",{children:[Ce.jsx("h3",{className:"font-semibold mb-4",children:"Prescription History"}),m?Ce.jsxs("div",{className:"flex items-center justify-center py-4",children:[Ce.jsx(Tn,{className:"h-6 w-6 animate-spin"}),Ce.jsx("span",{className:"ml-2",children:"Loading prescriptions..."})]}):u.prescriptions&&0!==u.prescriptions.length?Ce.jsx("div",{className:"space-y-3",children:u.prescriptions.map(e=>{var t,r,n,a,s,i,o,l,c;return Ce.jsx(td,{children:Ce.jsxs(sd,{className:"p-4",children:[Ce.jsxs("div",{className:"flex justify-between items-start mb-2",children:[Ce.jsxs("div",{children:[Ce.jsx("p",{className:"font-medium",children:null==(t=e.type)?void 0:t.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}),Ce.jsx("p",{className:"text-sm text-gray-500",children:Ju(new Date(e.issue_date),"MMM d, yyyy")})]}),Ce.jsx(Yd,{className:v(e.status),children:e.status})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ce.jsxs("div",{children:[Ce.jsx("h5",{className:"font-medium",children:"Right Eye (OD)"}),Ce.jsxs("p",{children:["S: ",(null==(r=e.right_eye)?void 0:r.sphere)||"N/A"]}),Ce.jsxs("p",{children:["C: ",(null==(n=e.right_eye)?void 0:n.cylinder)||"N/A"]}),Ce.jsxs("p",{children:["A: ",(null==(a=e.right_eye)?void 0:a.axis)||"N/A"]}),Ce.jsxs("p",{children:["PD: ",(null==(s=e.right_eye)?void 0:s.pd)||"N/A"]})]}),Ce.jsxs("div",{children:[Ce.jsx("h5",{className:"font-medium",children:"Left Eye (OS)"}),Ce.jsxs("p",{children:["S: ",(null==(i=e.left_eye)?void 0:i.sphere)||"N/A"]}),Ce.jsxs("p",{children:["C: ",(null==(o=e.left_eye)?void 0:o.cylinder)||"N/A"]}),Ce.jsxs("p",{children:["A: ",(null==(l=e.left_eye)?void 0:l.axis)||"N/A"]}),Ce.jsxs("p",{children:["PD: ",(null==(c=e.left_eye)?void 0:c.pd)||"N/A"]})]})]}),e.vision_acuity&&Ce.jsx("div",{className:"mt-2 text-sm",children:Ce.jsxs("p",{children:[Ce.jsx("strong",{children:"Vision Acuity:"})," ",e.vision_acuity]})}),e.additional_notes&&Ce.jsx("div",{className:"mt-2 text-sm",children:Ce.jsxs("p",{children:[Ce.jsx("strong",{children:"Notes:"})," ",e.additional_notes]})}),e.recommendations&&Ce.jsx("div",{className:"mt-2 text-sm",children:Ce.jsxs("p",{children:[Ce.jsx("strong",{children:"Recommendations:"})," ",e.recommendations]})})]})},e.id)})}):Ce.jsx("p",{className:"text-gray-500",children:"No prescriptions found for this patient."})]})]})]})]})})]},e.id)})})]})]})]})]})},HK=()=>{var e,t;const{user:r}=Lc();Jt();const[n,a]=Ct.useState([]),[s,i]=Ct.useState([]),[o,l]=Ct.useState(!0),[c,d]=Ct.useState(null),[u,h]=Ct.useState(!1),[m,p]=Ct.useState(null);Ct.useEffect(()=>{(null==r?void 0:r.id)?f():null===r&&l(!1)},[null==r?void 0:r.id,r]);const f=async()=>{try{l(!0),d(null),await Promise.all([x(),y()])}catch(e){console.error("Error loading data:",e),d(e instanceof Error?e.message:"Failed to load data")}finally{l(!1)}},x=async()=>{var e,t;try{const e=await(async()=>(await VK.get("/optometrist/prescriptions")).data)();a(e.data||[])}catch(r){throw console.error("Error loading prescriptions:",r),a([]),401===(null==(e=r.response)?void 0:e.status)?d("Please log in to view prescriptions"):403===(null==(t=r.response)?void 0:t.status)?d("You do not have permission to view prescriptions"):d(r instanceof Error?r.message:"Failed to load prescriptions"),r}},y=async()=>{try{const e=((await(async()=>(await VK.get("/optometrist/appointments")).data)()).data||[]).filter(e=>"in_progress"===e.status);i(e)}catch(e){throw console.error("Error loading appointments:",e),i([]),e}},v=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";case"updated":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return o?Ce.jsxs("div",{className:"p-6 flex items-center justify-center",children:[Ce.jsx(Tn,{className:"h-8 w-8 animate-spin"}),Ce.jsx("span",{className:"ml-2",children:"Loading prescriptions..."})]}):c?Ce.jsxs("div",{className:"p-6",children:[Ce.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-4",children:[Ce.jsx(Qr,{className:"h-5 w-5"}),Ce.jsxs("span",{children:["Error: ",c]})]}),Ce.jsx(Hc,{onClick:f,children:"Retry"})]}):Ce.jsxs("div",{className:"p-6",children:[u&&m&&Ce.jsx(qK,{appointment:{id:m.id,patient:{id:(null==(e=m.patient)?void 0:e.id)||0,name:(null==(t=m.patient)?void 0:t.name)||"Unknown"},appointment_date:m.date,start_time:m.start_time,type:m.type},onSuccess:async()=>{h(!1),p(null),await f()},onCancel:()=>{h(!1),p(null)}}),Ce.jsx("div",{className:"flex justify-between items-center mb-6",children:Ce.jsx("h1",{className:"text-2xl font-bold",children:"Prescription Management"})}),s&&s.length>0&&Ce.jsxs(td,{className:"mb-6",children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"In-Progress Appointments"}),Ce.jsx(ad,{children:"Create prescriptions for these appointments"})]}),Ce.jsx(sd,{children:Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Patient"}),Ce.jsx(Jm,{children:"Date"}),Ce.jsx(Jm,{children:"Time"}),Ce.jsx(Jm,{children:"Type"}),Ce.jsx(Jm,{children:"Branch"}),Ce.jsx(Jm,{children:"Action"})]})}),Ce.jsx(Xm,{children:s.map(e=>{var t,r,n;return Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{children:Ce.jsxs("div",{children:[Ce.jsx("p",{className:"font-medium",children:(null==(t=e.patient)?void 0:t.name)||"Unknown"}),Ce.jsx("p",{className:"text-sm text-gray-500",children:null==(r=e.patient)?void 0:r.email})]})}),Ce.jsx(Zm,{children:Ju(new Date(e.date),"MMM d, yyyy")}),Ce.jsx(Zm,{children:e.start_time}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{variant:"outline",children:e.type})}),Ce.jsx(Zm,{children:(null==(n=e.branch)?void 0:n.name)||"N/A"}),Ce.jsx(Zm,{children:Ce.jsxs(Hc,{size:"sm",onClick:()=>(e=>{p(e),h(!0)})(e),className:"flex items-center gap-2",children:[Ce.jsx(zn,{className:"h-4 w-4"}),"Create Prescription"]})})]},e.id)})})]})})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"All Prescriptions"}),Ce.jsx(ad,{children:"Manage and track all patient prescriptions"})]}),Ce.jsx(sd,{children:n&&0!==n.length?Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Patient"}),Ce.jsx(Jm,{children:"Date"}),Ce.jsx(Jm,{children:"Type"}),Ce.jsx(Jm,{children:"Right Eye (OD)"}),Ce.jsx(Jm,{children:"Left Eye (OS)"}),Ce.jsx(Jm,{children:"Vision Acuity"}),Ce.jsx(Jm,{children:"Status"}),Ce.jsx(Jm,{children:"Actions"})]})}),Ce.jsx(Xm,{children:n.map(e=>{var t,r,n,a,s,i,o,l,c,d,u;return Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{children:Ce.jsxs("div",{children:[Ce.jsx("p",{className:"font-medium",children:(null==(t=e.patient)?void 0:t.name)||"Unknown"}),Ce.jsx("p",{className:"text-sm text-gray-500",children:null==(r=e.patient)?void 0:r.email})]})}),Ce.jsx(Zm,{children:Ju(new Date(e.issue_date),"MMM d, yyyy")}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{variant:"outline",children:null==(n=e.type)?void 0:n.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"text-sm",children:[Ce.jsxs("p",{children:["S: ",(null==(a=e.right_eye)?void 0:a.sphere)||"N/A"]}),Ce.jsxs("p",{children:["C: ",(null==(s=e.right_eye)?void 0:s.cylinder)||"N/A"]}),Ce.jsxs("p",{children:["A: ",(null==(i=e.right_eye)?void 0:i.axis)||"N/A"]}),Ce.jsxs("p",{children:["PD: ",(null==(o=e.right_eye)?void 0:o.pd)||"N/A"]})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"text-sm",children:[Ce.jsxs("p",{children:["S: ",(null==(l=e.left_eye)?void 0:l.sphere)||"N/A"]}),Ce.jsxs("p",{children:["C: ",(null==(c=e.left_eye)?void 0:c.cylinder)||"N/A"]}),Ce.jsxs("p",{children:["A: ",(null==(d=e.left_eye)?void 0:d.axis)||"N/A"]}),Ce.jsxs("p",{children:["PD: ",(null==(u=e.left_eye)?void 0:u.pd)||"N/A"]})]})}),Ce.jsx(Zm,{children:e.vision_acuity||"N/A"}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{className:v(e.status),children:e.status})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex space-x-2",children:[Ce.jsx(Hc,{size:"sm",variant:"outline",children:Ce.jsx(Bn,{className:"h-4 w-4"})}),Ce.jsx(Hc,{size:"sm",variant:"outline",children:Ce.jsx(na,{className:"h-4 w-4"})})]})})]},e.id)})})]}):Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(Sn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Prescriptions Found"}),Ce.jsx("p",{className:"text-gray-600",children:"Create your first prescription to get started."})]})})]})]})},KK=({isOpen:e,onOpenChange:t,dayOfWeek:r,currentSchedule:n,onSuccess:a})=>{var s;const{user:i}=Lc(),{toast:o}=Jt(),[l,c]=Ct.useState(!1),[d,u]=Ct.useState(!0),[h,m]=Ct.useState([]),[p,f]=Ct.useState({branch_id:(null==n?void 0:n.branch_id)||null,start_time:(null==n?void 0:n.start_time)||"",end_time:(null==n?void 0:n.end_time)||"",reason:""}),x=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][r-1];Ct.useEffect(()=>{(async()=>{try{u(!0);const e=await Lp();m(Array.isArray(e)?e:[])}catch(e){console.error("Error loading branches:",e),m([])}finally{u(!1)}})()},[]),Ct.useEffect(()=>{e&&f({branch_id:(null==n?void 0:n.branch_id)||null,start_time:(null==n?void 0:n.start_time)||"",end_time:(null==n?void 0:n.end_time)||"",reason:""})},[e,n]);const y=(e,t)=>{f(r=>({...r,[e]:t}))},v=null!==p.branch_id,g=h.find(e=>e.id===p.branch_id);return Ce.jsx(Xp,{open:e,onOpenChange:t,children:Ce.jsxs(ef,{className:"max-w-md",children:[Ce.jsxs(tf,{children:[Ce.jsxs(nf,{className:"flex items-center space-x-2",children:[Ce.jsx(Bn,{className:"h-5 w-5"}),Ce.jsxs("span",{children:["Edit ",x," Schedule"]})]}),Ce.jsx(af,{children:"admin"===(null==i?void 0:i.role)?"Update the schedule directly":"Request a schedule change (requires admin approval)"})]}),Ce.jsxs("form",{onSubmit:async e=>{var n,s;if(e.preventDefault(),v&&0===h.length)o({title:"Branches Not Available",description:"Unable to load branch information. Please contact your administrator.",variant:"destructive"});else if(p.start_time&&p.end_time)if(p.start_time>=p.end_time)o({title:"Validation Error",description:"End time must be after start time",variant:"destructive"});else{c(!0);try{if("admin"===(null==i?void 0:i.role))await(async(e,t,r,n,a)=>{try{const s=sessionStorage.getItem("auth_token");return(await Ac.put(`${ep}/schedules/doctor/${e}`,{day_of_week:t,branch_id:r,start_time:n,end_time:a},{headers:{Authorization:s?`Bearer ${s}`:"","Content-Type":"application/json"}})).data}catch(s){throw console.error("Error updating schedule directly:",s),s}})(i.id,r,p.branch_id,p.start_time,p.end_time),o({title:"Schedule Updated",description:`Schedule for ${x} has been updated successfully`});else{if(!p.reason.trim())return void o({title:"Validation Error",description:"Please provide a reason for the schedule change",variant:"destructive"});await(async e=>{try{const t=sessionStorage.getItem("auth_token");return(await Ac.post(`${ep}/schedule-change-requests`,e,{headers:{Authorization:t?`Bearer ${t}`:"","Content-Type":"application/json"}})).data}catch(t){throw console.error("Error submitting schedule change request:",t),t}})({optometrist_id:(null==i?void 0:i.id)||0,day_of_week:r,branch_id:p.branch_id,start_time:p.start_time,end_time:p.end_time,reason:p.reason}),o({title:"Change Request Submitted",description:`Schedule change request for ${x} has been submitted for admin approval. You'll be notified when it's reviewed.`})}null==a||a(),t(!1)}catch(l){console.error("Error updating schedule:",l),o({title:"Error",description:(null==(s=null==(n=l.response)?void 0:n.data)?void 0:s.message)||"Failed to update schedule",variant:"destructive"})}finally{c(!1)}}else o({title:"Validation Error",description:"Please provide both start and end times",variant:"destructive"})},className:"space-y-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{children:"Availability"}),Ce.jsxs("div",{className:"flex items-center space-x-4",children:[Ce.jsx(Hc,{type:"button",variant:v?"default":"outline",size:"sm",onClick:()=>y("branch_id",v?null:1),children:"Available"}),Ce.jsx(Hc,{type:"button",variant:v?"outline":"default",size:"sm",onClick:()=>y("branch_id",null),children:"Not Available"})]})]}),v&&Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"branch",children:"Branch"}),d?Ce.jsx("div",{className:"p-3 text-center text-sm text-gray-500",children:"Loading branches..."}):0===h.length?Ce.jsx("div",{className:"p-3 text-center text-sm text-gray-500 border rounded-md",children:"Branches not available. Please contact your administrator."}):Ce.jsxs(Dm,{value:(null==(s=p.branch_id)?void 0:s.toString())||"",onValueChange:e=>y("branch_id",e?parseInt(e):null),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select a branch"})}),Ce.jsx(Bm,{children:h.map(e=>Ce.jsx(qm,{value:e.id.toString(),children:Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(In,{className:"h-4 w-4"}),Ce.jsxs("span",{children:[e.name," (",e.code,")"]})]})},e.id))})]})]}),v&&Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"start_time",children:"Start Time"}),Ce.jsxs("div",{className:"relative",children:[Ce.jsx(yn,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Ce.jsx(Yc,{id:"start_time",type:"time",value:p.start_time,onChange:e=>y("start_time",e.target.value),className:"pl-10",required:!0})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"end_time",children:"End Time"}),Ce.jsxs("div",{className:"relative",children:[Ce.jsx(yn,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),Ce.jsx(Yc,{id:"end_time",type:"time",value:p.end_time,onChange:e=>y("end_time",e.target.value),className:"pl-10",required:!0})]})]})]}),"optometrist"===(null==i?void 0:i.role)&&Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"reason",children:"Reason for Change"}),Ce.jsx(fh,{id:"reason",placeholder:"Please explain why you need to change this schedule...",value:p.reason,onChange:e=>y("reason",e.target.value),rows:3,required:!0})]}),Ce.jsx(td,{children:Ce.jsxs(sd,{className:"p-4",children:[Ce.jsx("h4",{className:"font-medium mb-2",children:"Preview"}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-4 w-4 text-gray-500"}),Ce.jsx("span",{className:"text-sm",children:x})]}),v?Ce.jsxs(Ce.Fragment,{children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(In,{className:"h-4 w-4 text-gray-500"}),Ce.jsx("span",{className:"text-sm",children:(null==g?void 0:g.name)||(0===h.length?"Branches not available":"Select a branch")})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(yn,{className:"h-4 w-4 text-gray-500"}),Ce.jsxs("span",{className:"text-sm",children:[p.start_time," - ",p.end_time]})]}),Ce.jsx(Yd,{variant:"default",className:"text-xs",children:"Available"})]}):Ce.jsx(Yd,{variant:"secondary",className:"text-xs",children:"Not Available"})]})]})}),Ce.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[Ce.jsxs(Hc,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l,children:[Ce.jsx(pa,{className:"h-4 w-4 mr-2"}),"Cancel"]}),Ce.jsxs(Hc,{type:"submit",disabled:l,children:[l?Ce.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):Ce.jsx(Hn,{className:"h-4 w-4 mr-2"}),"admin"===(null==i?void 0:i.role)?"Update Schedule":"Submit Request"]})]})]})]})})},YK=()=>{var e;const{user:t}=Lc(),[r,n]=Ct.useState(new Date),[a,s]=Ct.useState(null),[i,o]=Ct.useState(!1),[l,c]=Ct.useState([]),[d,u]=Ct.useState([]),[h,m]=Ct.useState("schedule"),{data:p,isLoading:f,error:x,refetch:y}=mo({queryKey:["weekly-schedule"],queryFn:fH});Ct.useEffect(()=>{(async()=>{if(null==t?void 0:t.id)try{const e=await np(t.id);u(e),c(e.filter(e=>"pending"===e.status))}catch(e){console.error("Error fetching requests:",e)}})()},[null==t?void 0:t.id]);const v=(e=>{const t=new Date(e);t.setDate(e.getDate()-e.getDay()+1);const r=[];for(let n=0;n<7;n++){const e=new Date(t);e.setDate(t.getDate()+n),r.push(e)}return r})(r),g=new Date,b=(e,t)=>e.available?t.toDateString()===g.toDateString()?"bg-blue-100 text-blue-800 border-blue-200":"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-400",j=(e,t)=>e.available?t.toDateString()===g.toDateString()?"Today":"Available":"Not Available",w=e=>{const t=new Date(r);t.setDate(r.getDate()+("next"===e?7:-7)),n(t)},N=e=>l.some(t=>t.day_of_week===e),S=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"approved":return"bg-green-100 text-green-800 border-green-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},_=e=>{switch(e){case"pending":return Ce.jsx(Qr,{className:"h-4 w-4"});case"approved":return Ce.jsx(dn,{className:"h-4 w-4"});case"rejected":return Ce.jsx(ma,{className:"h-4 w-4"});default:return null}};if(f)return Ce.jsx("div",{className:"max-w-6xl mx-auto p-6",children:Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-6 w-6 text-blue-600"}),Ce.jsx(nd,{children:"Optometrist Schedule"})]}),Ce.jsx(ad,{children:"Loading weekly schedule..."})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"flex items-center justify-center py-8",children:Ce.jsx(Vn,{className:"h-8 w-8 animate-spin text-blue-600"})})})]})});if(x)return Ce.jsx("div",{className:"max-w-6xl mx-auto p-6",children:Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-6 w-6 text-red-600"}),Ce.jsx(nd,{children:"Optometrist Schedule"})]}),Ce.jsx(ad,{children:"Error loading schedule"})]}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load schedule data"}),Ce.jsxs(Hc,{onClick:()=>y(),variant:"outline",children:[Ce.jsx(Vn,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})]})});const k=((null==(e=null==p?void 0:p.data)?void 0:e.weekly_schedule)||[]).find(e=>e.optometrist.name.includes("Samuel"));return k?Ce.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[Ce.jsxs(Mf,{value:h,onValueChange:m,className:"w-full",children:[Ce.jsxs(Df,{className:"grid w-full grid-cols-2",children:[Ce.jsx(If,{value:"schedule",children:"My Schedule"}),Ce.jsxs(If,{value:"requests",children:["My Requests (",d.length,")"]})]}),Ce.jsx(Rf,{value:"schedule",className:"space-y-6",children:Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-6 w-6 text-blue-600"}),Ce.jsxs("div",{children:[Ce.jsx(nd,{children:"Dr. Samuel Loreto Prieto - Weekly Schedule"}),Ce.jsx(ad,{children:"Weekly rotation across 4 branches"})]})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>w("prev"),children:"← Previous Week"}),Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>n(new Date),children:"This Week"}),Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>w("next"),children:"Next Week →"})]})]})}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"mb-6",children:Ce.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ce.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Week of ",v[0].toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),l.length>0&&Ce.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:[Ce.jsx(Qr,{className:"h-4 w-4 text-yellow-600"}),Ce.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:[l.length," pending request",l.length>1?"s":""]})]})]})}),Ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:v.map((e,t)=>{var r,n,a,i;const l=k.schedule[t],c=e.toDateString()===g.toDateString(),d=t+1;return Ce.jsxs("div",{className:"border rounded-xl p-4 relative transition-all duration-200 hover:shadow-md "+(c?"ring-2 ring-blue-500 bg-blue-50/30":"bg-white hover:bg-gray-50"),children:[Ce.jsx("div",{className:"absolute top-3 right-3",children:Ce.jsx(Hc,{variant:"ghost",size:"sm",onClick:()=>(e=>{s(e),o(!0)})(d),className:"h-8 w-8 p-0 hover:bg-blue-100 hover:text-blue-600 transition-colors duration-200",children:Ce.jsx(Bn,{className:"h-4 w-4"})})}),N(d)&&Ce.jsx("div",{className:"absolute top-3 left-3",children:Ce.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:[Ce.jsx(Qr,{className:"h-3 w-3"}),Ce.jsx("span",{children:"Pending"})]})}),Ce.jsxs("div",{className:"text-center mb-4",children:[Ce.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:e.toLocaleDateString("en-US",{weekday:"short"})}),Ce.jsx("div",{className:"text-2xl font-bold "+(c?"text-blue-600":"text-gray-900"),children:e.getDate()}),c&&Ce.jsx("div",{className:"text-xs text-blue-500 font-medium mt-1",children:"Today"})]}),(null==l?void 0:l.available)?Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsx(Yd,{variant:"secondary",className:`w-full justify-center py-1.5 ${b(l,e)} font-medium`,children:j(l,e)}),Ce.jsxs("div",{className:"space-y-3",children:[Ce.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-green-50 rounded-lg",children:[Ce.jsx(In,{className:"h-4 w-4 text-green-600"}),Ce.jsx("span",{className:"text-sm font-semibold text-green-800",children:null==(r=l.branch)?void 0:r.name})]}),Ce.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-blue-50 rounded-lg",children:[Ce.jsx(yn,{className:"h-4 w-4 text-blue-600"}),Ce.jsxs("span",{className:"text-sm font-semibold text-blue-800",children:[null==(n=l.schedule)?void 0:n.start_time," - ",null==(a=l.schedule)?void 0:a.end_time]})]}),Ce.jsx("div",{className:"text-center",children:Ce.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium text-gray-600 bg-gray-100 rounded-full",children:null==(i=l.branch)?void 0:i.code})})]})]}):Ce.jsxs("div",{className:"text-center space-y-3",children:[Ce.jsx(Yd,{variant:"secondary",className:"w-full justify-center py-1.5 bg-gray-100 text-gray-500 font-medium",children:"Not Available"}),Ce.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-400",children:[Ce.jsx(pa,{className:"h-4 w-4"}),Ce.jsx("span",{className:"text-sm",children:"No work scheduled"})]})]})]},e.toISOString())})}),Ce.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[Ce.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Schedule Summary"}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[Ce.jsxs("div",{children:[Ce.jsx("strong",{children:"Total Working Days:"})," ",k.schedule.filter(e=>e.available).length," days"]}),Ce.jsxs("div",{children:[Ce.jsx("strong",{children:"Branches Covered:"})," ",new Set(k.schedule.filter(e=>e.available).map(e=>{var t;return null==(t=e.branch)?void 0:t.name})).size," branches"]})]})]})]})]})}),Ce.jsx(Rf,{value:"requests",className:"space-y-6",children:Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center space-x-2",children:[Ce.jsx(yn,{className:"h-5 w-5 text-blue-600"}),Ce.jsx("span",{children:"My Schedule Change Requests"})]}),Ce.jsx(ad,{children:"View and track your schedule change requests"})]}),Ce.jsx(sd,{children:0===d.length?Ce.jsxs("div",{className:"text-center py-8",children:[Ce.jsx(ln,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Requests"}),Ce.jsx("p",{className:"text-gray-600",children:"You haven't submitted any schedule change requests yet."})]}):Ce.jsx("div",{className:"space-y-4",children:d.map(e=>{return Ce.jsx(td,{className:`border-l-4 ${S(e.status)}`,children:Ce.jsx(sd,{className:"p-4",children:Ce.jsx("div",{className:"flex items-start justify-between",children:Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[_(e.status),Ce.jsx("h3",{className:"font-semibold text-gray-900",children:(t=e.day_of_week,["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][t-1]||"Unknown")}),Ce.jsx(Yd,{variant:"outline",className:S(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(yn,{className:"h-4 w-4 text-gray-400"}),Ce.jsxs("span",{children:[e.start_time," - ",e.end_time]})]}),e.branch&&Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(In,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{children:e.branch.name})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]})]}),Ce.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[Ce.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Your Reason:"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:e.reason})]}),e.admin_notes&&Ce.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[Ce.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Admin Response:"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:e.admin_notes})]})]})})})},e.id);var t})})})]})})]}),Ce.jsx(KK,{isOpen:i,onOpenChange:o,dayOfWeek:a||1,currentSchedule:void 0,onSuccess:()=>{y(),(null==t?void 0:t.id)&&np(t.id).then(e=>{u(e),c(e.filter(e=>"pending"===e.status))}).catch(e=>{console.error("Error refreshing requests:",e)})}})]}):Ce.jsx("div",{className:"max-w-6xl mx-auto p-6",children:Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ln,{className:"h-6 w-6 text-yellow-600"}),Ce.jsx(nd,{children:"Optometrist Schedule"})]}),Ce.jsx(ad,{children:"No schedule data found"})]}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"text-center py-8",children:Ce.jsx("p",{className:"text-yellow-600",children:"No schedule found for Dr. Samuel Loreto Prieto"})})})]})})},GK=()=>{const{user:e}=Lc();if(!e)return Ce.jsx("div",{children:"Loading..."});return Ce.jsx("div",{className:"space-y-6",children:Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsxs(nd,{className:"flex items-center gap-2",children:[Ce.jsx(da,{className:"h-5 w-5"}),"Profile Information"]}),Ce.jsx(ad,{children:"Your account details and branch assignment"})]}),Ce.jsxs(sd,{className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),Ce.jsx("p",{className:"text-sm font-medium",children:e.name})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(Dn,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("p",{className:"text-sm font-medium",children:e.email})]})]}),e.phone&&Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone Number"}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(qn,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("p",{className:"text-sm font-medium",children:e.phone})]})]}),e.social_media&&Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Social Media"}),Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(Rn,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("p",{className:"text-sm font-medium",children:e.social_media})]})]}),"customer"===e.role&&!e.phone&&Ce.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:Ce.jsxs("p",{className:"text-sm text-blue-800",children:[Ce.jsx("strong",{children:"Contact Information:"})," Add your phone number and social media handle when booking your next appointment to help us communicate with you better."]})}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Role"}),Ce.jsxs(Yd,{className:`${(e=>{switch(e.toLowerCase()){case"admin":return"bg-red-100 text-red-800 border-red-200";case"optometrist":return"bg-blue-100 text-blue-800 border-blue-200";case"staff":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.role)} flex items-center gap-1 w-fit`,children:[(t=e.role,"admin"===t.toLowerCase()?Ce.jsx(Xn,{className:"h-4 w-4"}):Ce.jsx(da,{className:"h-4 w-4"})),e.role.charAt(0).toUpperCase()+e.role.slice(1)]})]}),e.branch&&Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Assigned Branch"}),Ce.jsxs("div",{className:"space-y-1",children:[Ce.jsxs("div",{className:"flex items-center gap-2",children:[Ce.jsx(sn,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("p",{className:"text-sm font-medium",children:e.branch.name})]}),Ce.jsxs("div",{className:"flex items-center gap-2 ml-6",children:[Ce.jsx(In,{className:"h-3 w-3 text-gray-400"}),Ce.jsx("p",{className:"text-xs text-gray-500",children:e.branch.address})]})]})]})]}),!e.branch&&"customer"!==e.role&&Ce.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:Ce.jsxs("p",{className:"text-sm text-yellow-800",children:[Ce.jsx("strong",{children:"No Branch Assigned:"})," You haven't been assigned to a branch yet. Please contact your administrator to get assigned to a branch."]})})]})]})});var t},XK=()=>{const{toast:e}=Jt();io();const[t,r]=Ct.useState(""),[n,a]=Ct.useState(null),[s,i]=Ct.useState(!1),[o,l]=Ct.useState(!1),[c,d]=Ct.useState([]),[u,h]=Ct.useState(!0),[m,p]=Ct.useState(new Set),[f,x]=Ct.useState(!1),[y,v]=Ct.useState(new Set),{data:g=[]}=mo({queryKey:["branches"],queryFn:Rp}),[b,j]=Ct.useState({name:"",email:"",password:"",password_confirmation:"",role:"customer",branch_id:"",is_approved:!0});Ct.useEffect(()=>{w()},[]);const w=async()=>{try{h(!0);const e=sessionStorage.getItem("auth_token");console.log("Fetching users with token:",e?"Present":"Missing");const t=await fetch(`${LH}/admin/users`,{headers:BH()});if(console.log("Users API response status:",t.status),!t.ok){const e=await t.json();throw console.error("API Error:",e),new Error(e.message||`Failed to fetch users: ${t.status}`)}const r=await t.json();console.log("Users data received:",r);const n=(r.data||[]).filter(e=>!y.has(e.id));d(n)}catch(t){console.error("Error fetching users:",t),e({title:"Error",description:t instanceof Error?t.message:"Failed to fetch users",variant:"destructive"})}finally{h(!1)}},N=()=>{j({name:"",email:"",password:"",password_confirmation:"",role:"customer",branch_id:"",is_approved:!0})},S=e=>{const t=e.trim();return t.toLowerCase().endsWith(" user")?'Please do not add "User" to the name - enter the person\'s actual name only':t.length<2?"Name must be at least 2 characters long":null},_=e=>{switch(e.toLowerCase()){case"admin":return"bg-red-100 text-red-800 border-red-200";case"optometrist":return"bg-blue-100 text-blue-800 border-blue-200";case"staff":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},k=c.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.email.toLowerCase().includes(t.toLowerCase())||e.role.toLowerCase().includes(t.toLowerCase()));Ct.useEffect(()=>{x(m.size===k.length&&k.length>0)},[m,k]);return u?Ce.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:Ce.jsx("div",{className:"flex items-center justify-center h-64",children:Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),Ce.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})})}):Ce.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[Ce.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ua,{className:"h-6 w-6 text-blue-600"}),Ce.jsx("h1",{className:"text-2xl font-bold",children:"User Management"})]}),Ce.jsxs("div",{className:"flex space-x-2",children:[Ce.jsx(Hc,{variant:"outline",onClick:w,disabled:u,children:u?"Loading...":"Refresh"}),Ce.jsxs(Xp,{open:s,onOpenChange:i,children:[Ce.jsx(Qp,{asChild:!0,children:Ce.jsxs(Hc,{onClick:N,children:[Ce.jsx(zn,{className:"mr-2 h-4 w-4"}),"Add User"]})}),Ce.jsxs(ef,{className:"max-w-2xl",children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Add New User"}),Ce.jsx(af,{children:"Create a new user account with role and branch assignment."})]}),Ce.jsxs("form",{onSubmit:async t=>{t.preventDefault();const r=S(b.name);if(r)e({title:"Validation Error",description:r,variant:"destructive"});else if(b.password===b.password_confirmation)try{sessionStorage.getItem("auth_token");const t={...b,branch_id:b.branch_id&&"none"!==b.branch_id?parseInt(b.branch_id):null};console.log("Creating user with data:",t);const r=await fetch(`${LH}/admin/users`,{method:"POST",headers:BH(),body:JSON.stringify(t)});if(console.log("Create user response status:",r.status),!r.ok){const e=await r.json();throw console.error("Create user error:",e),new Error(e.message||`Failed to create user: ${r.status}`)}const n=await r.json();console.log("User created successfully:",n),e({title:"Success",description:"User created successfully"}),i(!1),N(),w()}catch(n){console.error("Error creating user:",n),e({title:"Error",description:n.message||"Failed to create user",variant:"destructive"})}else e({title:"Validation Error",description:"Passwords do not match",variant:"destructive"})},className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"name",children:"Full Name"}),Ce.jsx(Yc,{id:"name",value:b.name,onChange:e=>j({...b,name:e.target.value}),placeholder:"Enter full name (e.g., John Smith)",required:!0}),Ce.jsx("p",{className:"text-xs text-gray-500",children:'Enter the person\'s actual name - do not add "User" suffix'})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"email",children:"Email"}),Ce.jsx(Yc,{id:"email",type:"email",value:b.email,onChange:e=>j({...b,email:e.target.value}),required:!0})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"password",children:"Password"}),Ce.jsx(Yc,{id:"password",type:"password",value:b.password,onChange:e=>j({...b,password:e.target.value}),required:!0})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"password_confirmation",children:"Confirm Password"}),Ce.jsx(Yc,{id:"password_confirmation",type:"password",value:b.password_confirmation,onChange:e=>j({...b,password_confirmation:e.target.value}),required:!0})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"role",children:"Role"}),Ce.jsxs(Dm,{value:b.role,onValueChange:e=>j({...b,role:e}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select role"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"customer",children:"Customer"}),Ce.jsx(qm,{value:"staff",children:"Staff"}),Ce.jsx(qm,{value:"optometrist",children:"Optometrist"}),Ce.jsx(qm,{value:"admin",children:"Admin"})]})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"branch",children:"Branch"}),Ce.jsxs(Dm,{value:b.branch_id,onValueChange:e=>j({...b,branch_id:e}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select branch"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"none",children:"No Branch"}),g.map(e=>Ce.jsx(qm,{value:e.id.toString(),children:e.name},e.id))]})]})]})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx("input",{type:"checkbox",id:"is_approved",checked:b.is_approved,onChange:e=>j({...b,is_approved:e.target.checked}),className:"rounded"}),Ce.jsx(Zc,{htmlFor:"is_approved",children:"Approved"})]}),Ce.jsxs("div",{className:"flex justify-end space-x-2",children:[Ce.jsx(Hc,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),Ce.jsx(Hc,{type:"submit",children:"Create User"})]})]})]})]})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"All Users"}),Ce.jsx(ad,{children:"Manage user accounts, roles, and branch assignments"})]}),Ce.jsxs(sd,{children:[Ce.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(Yn,{className:"h-4 w-4 text-gray-400"}),Ce.jsx(Yc,{placeholder:"Search users...",value:t,onChange:e=>r(e.target.value),className:"max-w-sm"})]}),m.size>0&&Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsxs("span",{className:"text-sm text-gray-600",children:[m.size," user(s) selected"]}),Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:async()=>{if(0!==m.size)try{sessionStorage.getItem("auth_token");const t=Array.from(m).map(e=>fetch(`${LH}/admin/users/${e}/approve`,{method:"POST",headers:BH()})),r=(await Promise.all(t)).filter(e=>!e.ok);if(r.length>0)throw new Error(`Failed to approve ${r.length} user(s)`);e({title:"Success",description:`Successfully approved ${m.size} user(s).`}),p(new Set),x(!1),w()}catch(t){console.error("Error approving users:",t),e({title:"Error",description:t instanceof Error?t.message:"Failed to approve users",variant:"destructive"})}else e({title:"No users selected",description:"Please select users to approve.",variant:"destructive"})},className:"text-green-600 hover:text-green-700",children:[Ce.jsx(la,{className:"h-4 w-4 mr-1"}),"Approve All"]}),Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:async()=>{if(0!==m.size){if(confirm(`Are you sure you want to delete ${m.size} user(s)? This action cannot be undone.`))try{sessionStorage.getItem("auth_token");const t=Array.from(m).map(e=>fetch(`${LH}/admin/users/${e}`,{method:"DELETE",headers:BH()})),r=(await Promise.all(t)).filter(e=>!e.ok);if(r.length>0)throw new Error(`Failed to delete ${r.length} user(s)`);v(e=>new Set([...e,...m])),d(e=>e.filter(e=>!m.has(e.id))),e({title:"Success",description:`Successfully deleted ${m.size} user(s).`}),p(new Set),x(!1)}catch(t){console.error("Error deleting users:",t),e({title:"Error",description:t instanceof Error?t.message:"Failed to delete users",variant:"destructive"})}}else e({title:"No users selected",description:"Please select users to delete.",variant:"destructive"})},className:"text-red-600 hover:text-red-700",children:[Ce.jsx(na,{className:"h-4 w-4 mr-1"}),"Delete All"]})]})]}),Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{className:"w-12",children:Ce.jsx("button",{onClick:()=>{if(f)p(new Set),x(!1);else{const e=new Set(k.map(e=>e.id));p(e),x(!0)}},className:"flex items-center justify-center w-4 h-4 rounded border border-gray-300 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",children:f?Ce.jsx(un,{className:"h-4 w-4 text-blue-600"}):Ce.jsx(Zn,{className:"h-4 w-4 text-gray-400"})})}),Ce.jsx(Jm,{children:"Name"}),Ce.jsx(Jm,{children:"Email"}),Ce.jsx(Jm,{children:"Role"}),Ce.jsx(Jm,{children:"Branch"}),Ce.jsx(Jm,{children:"Status"}),Ce.jsx(Jm,{children:"Created"}),Ce.jsx(Jm,{children:"Actions"})]})}),Ce.jsx(Xm,{children:k.map(t=>Ce.jsxs(Qm,{className:m.has(t.id)?"bg-blue-50":"",children:[Ce.jsx(Zm,{children:Ce.jsx("button",{onClick:()=>(e=>{const t=new Set(m);t.has(e)?t.delete(e):t.add(e),p(t),x(t.size===k.length&&k.length>0)})(t.id),className:"flex items-center justify-center w-4 h-4 rounded border border-gray-300 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",children:m.has(t.id)?Ce.jsx(un,{className:"h-4 w-4 text-blue-600"}):Ce.jsx(Zn,{className:"h-4 w-4 text-gray-400"})})}),Ce.jsx(Zm,{className:"font-medium",children:t.name}),Ce.jsx(Zm,{children:t.email}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{className:_(t.role),children:t.role.charAt(0).toUpperCase()+t.role.slice(1)})}),Ce.jsx(Zm,{children:t.branch?Ce.jsxs("div",{className:"flex items-center space-x-1",children:[Ce.jsx(sn,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{className:"text-sm",children:t.branch.name})]}):Ce.jsx("span",{className:"text-sm text-gray-500",children:"No Branch"})}),Ce.jsx(Zm,{children:Ce.jsx(Yd,{variant:t.is_approved?"default":"secondary",children:t.is_approved?"Approved":"Pending"})}),Ce.jsx(Zm,{className:"text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex space-x-2",children:[Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(e=>{var t,r;a(e),j({name:e.name,email:e.email,password:"",password_confirmation:"",role:e.role,branch_id:(null==(r=null==(t=e.branch)?void 0:t.id)?void 0:r.toString())||"none",is_approved:e.is_approved}),l(!0)})(t),children:Ce.jsx(Bn,{className:"h-4 w-4"})}),Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(async t=>{if(confirm("Are you sure you want to delete this user?"))try{const r=sessionStorage.getItem("auth_token");if(console.log("Deleting user ID:",t),console.log("Auth token present:",r?"Yes":"No"),console.log("Auth token value:",r),!r)return void e({title:"Authentication Error",description:"Please log in again to perform this action",variant:"destructive"});const n=await fetch(`${LH}/admin/users/${t}`,{method:"DELETE",headers:BH()});if(console.log("Delete user response status:",n.status),console.log("Delete user response headers:",Object.fromEntries(n.headers.entries())),!n.ok){const t=await n.json();if(console.error("Delete user error:",t),401===n.status)return void e({title:"Authentication Error",description:"Your session has expired. Please log in again.",variant:"destructive"});throw new Error(t.message||`Failed to delete user: ${n.status}`)}const a=await n.json();console.log("User deleted successfully:",a),v(e=>new Set([...e,t])),d(e=>e.filter(e=>e.id!==t)),e({title:"Success",description:"User deleted successfully"})}catch(r){console.error("Error deleting user:",r),e({title:"Error",description:r.message||"Failed to delete user",variant:"destructive"})}})(t.id),className:"text-red-600 hover:text-red-700",children:Ce.jsx(na,{className:"h-4 w-4"})})]})})]},t.id))})]})]})]}),Ce.jsx(Xp,{open:o,onOpenChange:l,children:Ce.jsxs(ef,{className:"max-w-2xl",children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Edit User"}),Ce.jsx(af,{children:"Update user information, role, and branch assignment."})]}),Ce.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!n)return;const r=S(b.name);if(r)e({title:"Validation Error",description:r,variant:"destructive"});else if(b.password&&b.password!==b.password_confirmation)e({title:"Validation Error",description:"Passwords do not match",variant:"destructive"});else try{sessionStorage.getItem("auth_token");const t={name:b.name,email:b.email,role:b.role,is_approved:b.is_approved,branch_id:b.branch_id&&"none"!==b.branch_id?parseInt(b.branch_id):null};b.password&&""!==b.password.trim()&&(t.password=b.password),console.log("Updating user with data:",t);const r=await fetch(`${LH}/admin/users/${n.id}`,{method:"PUT",headers:BH(),body:JSON.stringify(t)});if(console.log("Update user response status:",r.status),!r.ok){const e=await r.json();throw console.error("Update user error:",e),new Error(e.message||`Failed to update user: ${r.status}`)}const s=await r.json();console.log("User updated successfully:",s),e({title:"Success",description:"User updated successfully"}),l(!1),a(null),N(),w()}catch(s){console.error("Error updating user:",s),e({title:"Error",description:s.message||"Failed to update user",variant:"destructive"})}},className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit-name",children:"Full Name"}),Ce.jsx(Yc,{id:"edit-name",value:b.name,onChange:e=>j({...b,name:e.target.value}),placeholder:"Enter full name (e.g., John Smith)",required:!0}),Ce.jsx("p",{className:"text-xs text-gray-500",children:'Enter the person\'s actual name - do not add "User" suffix'})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit-email",children:"Email"}),Ce.jsx(Yc,{id:"edit-email",type:"email",value:b.email,onChange:e=>j({...b,email:e.target.value}),required:!0})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit-password",children:"New Password (leave blank to keep current)"}),Ce.jsx(Yc,{id:"edit-password",type:"password",value:b.password,onChange:e=>j({...b,password:e.target.value}),placeholder:"Enter new password or leave blank"})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit-password-confirmation",children:"Confirm New Password"}),Ce.jsx(Yc,{id:"edit-password-confirmation",type:"password",value:b.password_confirmation,onChange:e=>j({...b,password_confirmation:e.target.value}),placeholder:"Confirm new password"})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit-role",children:"Role"}),Ce.jsxs(Dm,{value:b.role,onValueChange:e=>j({...b,role:e}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select role"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"customer",children:"Customer"}),Ce.jsx(qm,{value:"staff",children:"Staff"}),Ce.jsx(qm,{value:"optometrist",children:"Optometrist"}),Ce.jsx(qm,{value:"admin",children:"Admin"})]})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit-branch",children:"Branch"}),Ce.jsxs(Dm,{value:b.branch_id,onValueChange:e=>j({...b,branch_id:e}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select branch"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"none",children:"No Branch"}),g.map(e=>Ce.jsx(qm,{value:e.id.toString(),children:e.name},e.id))]})]})]})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx("input",{type:"checkbox",id:"edit-is_approved",checked:b.is_approved,onChange:e=>j({...b,is_approved:e.target.checked}),className:"rounded"}),Ce.jsx(Zc,{htmlFor:"edit-is_approved",children:"Approved"})]}),Ce.jsxs("div",{className:"flex justify-end space-x-2",children:[Ce.jsx(Hc,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),Ce.jsx(Hc,{type:"submit",children:"Update User"})]})]})]})})]})},QK=()=>{const{toast:e}=Jt(),t=io(),[r,n]=Ct.useState(""),[a,s]=Ct.useState(null),[i,o]=Ct.useState(!1),[l,c]=Ct.useState(!1),[d,u]=Ct.useState(!1),{data:h=[],isLoading:m,refetch:p}=mo({queryKey:["branches"],queryFn:Rp}),[f,x]=Ct.useState({name:"",code:"",address:"",phone:"",email:"",is_active:!0}),y=()=>{x({name:"",code:"",address:"",phone:"",email:"",is_active:!0})},v=h.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())||e.code.toLowerCase().includes(r.toLowerCase())||e.address.toLowerCase().includes(r.toLowerCase()));return m?Ce.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:Ce.jsx("div",{className:"flex items-center justify-center h-64",children:Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),Ce.jsx("p",{className:"text-gray-600",children:"Loading branches..."})]})})}):Ce.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[Ce.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(sn,{className:"h-6 w-6 text-blue-600"}),Ce.jsx("h1",{className:"text-2xl font-bold",children:"Branch Management"})]}),Ce.jsxs(Xp,{open:i,onOpenChange:o,children:[Ce.jsx(Qp,{asChild:!0,children:Ce.jsxs(Hc,{onClick:y,className:"bg-green-600 hover:bg-green-700 text-white min-w-[120px]",children:[Ce.jsx(zn,{className:"mr-2 h-4 w-4"}),"Add Branch"]})}),Ce.jsxs(ef,{className:"max-w-2xl",children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Add New Branch"}),Ce.jsx(af,{children:"Create a new branch location with contact information."})]}),Ce.jsxs("form",{onSubmit:async r=>{r.preventDefault();try{u(!0);const r=sessionStorage.getItem("auth_token"),n={}.VITE_API_URL||"http://127.0.0.1:8000/api-mysql.php",a=await fetch(`${n}/branches`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(f)});if(!a.ok){const e=await a.json();throw new Error(e.message||"Failed to create branch")}e({title:"Success",description:"Branch created successfully"}),o(!1),y(),t.invalidateQueries({queryKey:["branches"]})}catch(n){e({title:"Error",description:n.message||"Failed to create branch",variant:"destructive"})}finally{u(!1)}},className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"name",children:"Branch Name"}),Ce.jsx(Yc,{id:"name",value:f.name,onChange:e=>x({...f,name:e.target.value}),required:!0})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"code",children:"Branch Code"}),Ce.jsx(Yc,{id:"code",value:f.code,onChange:e=>x({...f,code:e.target.value.toUpperCase()}),placeholder:"e.g., MAIN, STA_ROSA",required:!0})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"address",children:"Address"}),Ce.jsx(Yc,{id:"address",value:f.address,onChange:e=>x({...f,address:e.target.value}),required:!0})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"phone",children:"Phone"}),Ce.jsx(Yc,{id:"phone",value:f.phone,onChange:e=>x({...f,phone:e.target.value}),placeholder:"0912-345-6789"})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"email",children:"Email"}),Ce.jsx(Yc,{id:"email",type:"email",value:f.email,onChange:e=>x({...f,email:e.target.value}),placeholder:"branch@everbright.com"})]})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:e=>x({...f,is_active:e.target.checked}),className:"rounded"}),Ce.jsx(Zc,{htmlFor:"is_active",children:"Active"})]}),Ce.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[Ce.jsx(Hc,{type:"button",variant:"outline",onClick:()=>o(!1),className:"min-w-[100px]",children:"Cancel"}),Ce.jsx(Hc,{type:"submit",disabled:d,className:"min-w-[120px] bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:d?Ce.jsxs(Ce.Fragment,{children:[Ce.jsx(Vn,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Branch"})]})]})]})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{children:[Ce.jsx(nd,{children:"All Branches"}),Ce.jsx(ad,{children:"Manage branch locations, contact information, and status"})]}),Ce.jsxs(sd,{children:[Ce.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ce.jsx(Yn,{className:"h-4 w-4 text-gray-400"}),Ce.jsx(Yc,{placeholder:"Search branches...",value:r,onChange:e=>n(e.target.value),className:"max-w-sm"})]}),Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Name"}),Ce.jsx(Jm,{children:"Code"}),Ce.jsx(Jm,{children:"Address"}),Ce.jsx(Jm,{children:"Contact"}),Ce.jsx(Jm,{children:"Status"}),Ce.jsx(Jm,{children:"Created"}),Ce.jsx(Jm,{className:"text-center",children:"Actions"})]})}),Ce.jsx(Xm,{children:v.map(r=>Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{className:"font-medium",children:r.name}),Ce.jsx(Zm,{children:Ce.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:r.code})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center space-x-1",children:[Ce.jsx(In,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{className:"text-sm",children:r.address})]})}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"space-y-1",children:[r.phone&&Ce.jsxs("div",{className:"flex items-center space-x-1",children:[Ce.jsx(qn,{className:"h-3 w-3 text-gray-400"}),Ce.jsx("span",{className:"text-xs",children:r.phone})]}),r.email&&Ce.jsxs("div",{className:"flex items-center space-x-1",children:[Ce.jsx(Dn,{className:"h-3 w-3 text-gray-400"}),Ce.jsx("span",{className:"text-xs",children:r.email})]})]})}),Ce.jsx(Zm,{children:Ce.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(r.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:r.is_active?"Active":"Inactive"})}),Ce.jsx(Zm,{className:"text-sm text-gray-500",children:new Date(r.created_at).toLocaleDateString()}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(e=>{s(e),x({name:e.name||"",code:e.code||"",address:e.address||"",phone:e.phone||"",email:e.email||"",is_active:e.is_active??!0}),c(!0)})(r),className:"h-8 w-8 p-0 hover:bg-blue-50 hover:border-blue-300",title:"Edit Branch",children:Ce.jsx(Bn,{className:"h-4 w-4"})}),Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(async r=>{if(confirm("Are you sure you want to delete this branch? This action cannot be undone."))try{u(!0);const n=sessionStorage.getItem("auth_token"),a={}.VITE_API_URL||"http://127.0.0.1:8000/api-mysql.php",s=await fetch(`${a}/branches/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`,Accept:"application/json"}});if(!s.ok){const e=await s.json();throw new Error(e.message||"Failed to delete branch")}e({title:"Success",description:"Branch deleted successfully"}),t.invalidateQueries({queryKey:["branches"]})}catch(n){e({title:"Error",description:n.message||"Failed to delete branch",variant:"destructive"})}finally{u(!1)}})(r.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50 hover:border-red-300",title:"Delete Branch",children:Ce.jsx(na,{className:"h-4 w-4"})})]})})]},r.id))})]})]})]}),Ce.jsx(Xp,{open:l,onOpenChange:c,children:Ce.jsxs(ef,{className:"max-w-2xl",children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Edit Branch"}),Ce.jsx(af,{children:"Update branch information and contact details."})]}),Ce.jsxs("form",{onSubmit:async r=>{if(r.preventDefault(),a)try{u(!0);const r=sessionStorage.getItem("auth_token"),n={}.VITE_API_URL||"http://127.0.0.1:8000/api-mysql.php",i=await fetch(`${n}/branches/${a.id}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(f)});if(!i.ok){const e=await i.json();throw new Error(e.message||"Failed to update branch")}e({title:"Success",description:"Branch updated successfully"}),c(!1),s(null),y(),t.invalidateQueries({queryKey:["branches"]})}catch(n){e({title:"Error",description:n.message||"Failed to update branch",variant:"destructive"})}finally{u(!1)}},className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit-name",children:"Branch Name"}),Ce.jsx(Yc,{id:"edit-name",value:f.name,onChange:e=>x({...f,name:e.target.value}),required:!0})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit-code",children:"Branch Code"}),Ce.jsx(Yc,{id:"edit-code",value:f.code,onChange:e=>x({...f,code:e.target.value.toUpperCase()}),required:!0})]})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit-address",children:"Address"}),Ce.jsx(Yc,{id:"edit-address",value:f.address,onChange:e=>x({...f,address:e.target.value}),required:!0})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit-phone",children:"Phone"}),Ce.jsx(Yc,{id:"edit-phone",value:f.phone,onChange:e=>x({...f,phone:e.target.value})})]}),Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsx(Zc,{htmlFor:"edit-email",children:"Email"}),Ce.jsx(Yc,{id:"edit-email",type:"email",value:f.email,onChange:e=>x({...f,email:e.target.value})})]})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx("input",{type:"checkbox",id:"edit-is_active",checked:f.is_active,onChange:e=>x({...f,is_active:e.target.checked}),className:"rounded"}),Ce.jsx(Zc,{htmlFor:"edit-is_active",children:"Active"})]}),Ce.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[Ce.jsx(Hc,{type:"button",variant:"outline",onClick:()=>c(!1),className:"min-w-[100px]",children:"Cancel"}),Ce.jsx(Hc,{type:"submit",disabled:d,className:"min-w-[120px] bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:d?Ce.jsxs(Ce.Fragment,{children:[Ce.jsx(Vn,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Branch"})]})]})]})})]})},JK={}.VITE_API_URL||"http://127.0.0.1:8000/api",ZK=()=>({Authorization:`Bearer ${sessionStorage.getItem("auth_token")}`,"Content-Type":"application/json"}),eY=()=>{var e;const{toast:t}=Jt(),[r,n]=Ct.useState([]),[a,s]=Ct.useState([]),[i,o]=Ct.useState([]),[l,c]=Ct.useState([]),[d,u]=Ct.useState(!0),[h,m]=Ct.useState("all"),[p,f]=Ct.useState("all"),[x,y]=Ct.useState("all"),[v,g]=Ct.useState(null),[b,j]=Ct.useState(""),[w,N]=Ct.useState(!1),[S,_]=Ct.useState(!1),[k,O]=Ct.useState(!1),[C,A]=Ct.useState(null),[E,P]=Ct.useState({staff_id:"",staff_role:"optometrist",branch_id:"",day_of_week:1,start_time:"09:00",end_time:"17:00",is_active:!0});Ct.useEffect(()=>{T(),M(),D(),I()},[h,p,x]);const T=async()=>{try{const e=await(async e=>{try{const t=new URLSearchParams;return(null==e?void 0:e.role)&&t.append("role",e.role),(null==e?void 0:e.branch_id)&&t.append("branch_id",e.branch_id),(await Ac.get(`${JK}/staff-schedules/staff-members?${t}`,{headers:ZK()})).data}catch(t){throw console.error("Error fetching staff members:",t),t}})({role:"all"!==p?p:void 0,branch_id:"all"!==h?h:void 0});n(e.staff_members||[])}catch(e){console.error("Error fetching employees:",e),t({title:"Error",description:"Failed to fetch employees",variant:"destructive"})}},M=async()=>{try{const e=await(async()=>{try{return(await Ac.get(`${JK}/staff-schedules/branches`,{headers:ZK()})).data}catch(e){throw console.error("Error fetching branches:",e),e}})();c(e.branches||[])}catch(e){console.error("Error fetching branches:",e)}},D=async()=>{try{if("all"!==h){const e=await(async e=>{try{return(await Ac.get(`${JK}/staff-schedules/branch/${e}`,{headers:ZK()})).data}catch(t){throw console.error("Error fetching branch staff schedules:",t),t}})(parseInt(h));s(e.staff_schedules||[])}else{const e=await(async()=>{try{return(await Ac.get(`${JK}/staff-schedules/all`,{headers:ZK()})).data}catch(e){throw console.error("Error fetching all staff schedules:",e),e}})();s(e.staff_schedules||[])}}catch(e){console.error("Error fetching schedules:",e),t({title:"Error",description:"Failed to fetch schedules",variant:"destructive"})}},I=async()=>{try{const e=await(async e=>{try{const t=new URLSearchParams;return(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.staff_role)&&t.append("staff_role",e.staff_role),(null==e?void 0:e.branch_id)&&t.append("branch_id",e.branch_id),(await Ac.get(`${JK}/staff-schedules/change-requests?${t}`,{headers:ZK()})).data}catch(t){throw console.error("Error fetching change requests:",t),t}})({status:void 0,staff_role:"all"!==p?p:void 0,branch_id:"all"!==h?h:void 0});o(e.change_requests||[])}catch(e){console.error("Error fetching requests:",e),t({title:"Error",description:"Failed to fetch schedule change requests",variant:"destructive"})}finally{u(!1)}},R=async(e,r)=>{try{N(!0),"approved"===r?await(async(e,t)=>{try{return(await Ac.put(`${JK}/staff-schedules/change-requests/${e}/approve`,{admin_notes:t},{headers:ZK()})).data}catch(r){throw console.error("Error approving change request:",r),r}})(e,b):await(async(e,t)=>{try{return(await Ac.put(`${JK}/staff-schedules/change-requests/${e}/reject`,{admin_notes:t},{headers:ZK()})).data}catch(r){throw console.error("Error rejecting change request:",r),r}})(e,b),t({title:`Request ${r}`,description:`Schedule change request has been ${r}`}),o(t=>t.map(t=>t.id===e?{...t,status:r,admin_notes:b}:t)),g(null),j(""),_(!1),D()}catch(n){console.error("Error updating request:",n),t({title:"Error",description:n.message||"Failed to update request",variant:"destructive"})}finally{N(!1)}},L=async e=>{try{await(async e=>{try{return(await Ac.delete(`${JK}/staff-schedules/${e}`,{headers:ZK()})).data}catch(t){throw console.error("Error deleting schedule:",t),t}})(e),t({title:"Schedule Deleted",description:"Employee schedule has been deleted successfully"}),D()}catch(r){console.error("Error deleting schedule:",r),t({title:"Error",description:r.message||"Failed to delete schedule",variant:"destructive"})}},F=e=>{switch(e){case"pending":return"border-yellow-200 bg-yellow-50";case"approved":return"border-green-200 bg-green-50";case"rejected":return"border-red-200 bg-red-50";default:return"border-gray-200 bg-gray-50"}},B=e=>{switch(e){case"pending":return Ce.jsx(Qr,{className:"h-4 w-4 text-yellow-600"});case"approved":return Ce.jsx(dn,{className:"h-4 w-4 text-green-600"});case"rejected":return Ce.jsx(ma,{className:"h-4 w-4 text-red-600"});default:return null}},q=e=>["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][e-1]||"Unknown",$=a.filter(e=>{var t;const r="all"===h||(null==(t=e.branch)?void 0:t.id.toString())===h,n="all"===x||e.staff_id.toString()===x,a="all"===p||e.staff_role===p;return r&&n&&a}),z=i.filter(e=>{var t;const r="all"===h||(null==(t=e.branch)?void 0:t.id.toString())===h,n="all"===x||e.staff_id.toString()===x,a="all"===p||e.staff_role===p;return r&&n&&a}),U=z.filter(e=>"pending"===e.status),V=z.filter(e=>"approved"===e.status),W=z.filter(e=>"rejected"===e.status),H=r.filter(e=>{var t;const r="all"===h||(null==(t=e.branch)?void 0:t.id.toString())===h,n="all"===p||e.role===p;return r&&n});return d?Ce.jsx("div",{className:"flex items-center justify-center h-64",children:Ce.jsxs("div",{className:"text-center",children:[Ce.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),Ce.jsx("p",{className:"text-gray-600",children:"Loading employee schedules..."})]})}):Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{children:[Ce.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Employee Schedule Management"}),Ce.jsx("p",{className:"text-gray-600",children:"Manage schedules for all employees (optometrists and staff) across all branches"})]}),Ce.jsxs("div",{className:"flex space-x-2",children:[Ce.jsxs(Hc,{onClick:D,variant:"outline",size:"sm",children:[Ce.jsx(yn,{className:"h-4 w-4 mr-2"}),"Refresh"]}),Ce.jsxs(Hc,{onClick:()=>O(!0),size:"sm",children:[Ce.jsx(zn,{className:"h-4 w-4 mr-2"}),"Add Schedule"]})]})]}),Ce.jsx(td,{className:"p-4",children:Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"branch-filter",children:"Branch"}),Ce.jsxs(Dm,{value:h,onValueChange:m,children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"All Branches"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"all",children:"All Branches"}),l.map(e=>Ce.jsx(qm,{value:e.id.toString(),children:e.name},e.id))]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"role-filter",children:"Role"}),Ce.jsxs(Dm,{value:p,onValueChange:f,children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"All Roles"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"all",children:"All Roles"}),Ce.jsx(qm,{value:"optometrist",children:"Optometrists"}),Ce.jsx(qm,{value:"staff",children:"Staff"})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"employee-filter",children:"Employee"}),Ce.jsxs(Dm,{value:x,onValueChange:y,children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"All Employees"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"all",children:"All Employees"}),H.map(e=>Ce.jsxs(qm,{value:e.id.toString(),children:[e.name," (",e.role,")"]},e.id))]})]})]}),Ce.jsx("div",{className:"flex items-end",children:Ce.jsxs(Hc,{variant:"outline",onClick:()=>{m("all"),f("all"),y("all")},className:"w-full",children:[Ce.jsx(_n,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})})]})}),Ce.jsxs(Mf,{defaultValue:"schedules",className:"w-full",children:[Ce.jsxs(Df,{className:"grid w-full grid-cols-4",children:[Ce.jsxs(If,{value:"schedules",children:["Schedules (",$.length,")"]}),Ce.jsxs(If,{value:"pending",children:["Pending (",U.length,")"]}),Ce.jsxs(If,{value:"approved",children:["Approved (",V.length,")"]}),Ce.jsxs(If,{value:"rejected",children:["Rejected (",W.length,")"]})]}),Ce.jsx(Rf,{value:"schedules",className:"space-y-4",children:0===$.length?Ce.jsx(td,{children:Ce.jsxs(sd,{className:"p-8 text-center",children:[Ce.jsx(ln,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Schedules Found"}),Ce.jsx("p",{className:"text-gray-600",children:"No employee schedules match your current filters"})]})}):Ce.jsx("div",{className:"grid gap-4",children:$.map(e=>Ce.jsx(td,{className:"border-l-4 border-blue-200 bg-blue-50",children:Ce.jsx(sd,{className:"p-6",children:Ce.jsxs("div",{className:"flex items-start justify-between",children:[Ce.jsxs("div",{className:"space-y-3",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(da,{className:"h-4 w-4 text-blue-600"}),Ce.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.staff.name}),Ce.jsx(Yd,{variant:"outline",className:"text-xs",children:e.staff_role}),Ce.jsx(Yd,{variant:"outline",className:"text-xs",children:q(e.day_of_week)})]}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(yn,{className:"h-4 w-4 text-gray-400"}),Ce.jsxs("span",{children:[e.start_time," - ",e.end_time]})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(In,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{children:e.branch.name})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(da,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{children:e.staff.email})]})]})]}),Ce.jsxs("div",{className:"flex space-x-2",children:[Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>A(e),children:[Ce.jsx(Bn,{className:"h-4 w-4 mr-2"}),"Edit"]}),Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>L(e.id),children:[Ce.jsx(na,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})},e.id))})}),Ce.jsx(Rf,{value:"pending",className:"space-y-4",children:0===U.length?Ce.jsx(td,{children:Ce.jsxs(sd,{className:"p-8 text-center",children:[Ce.jsx(ln,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Pending Requests"}),Ce.jsx("p",{className:"text-gray-600",children:"All schedule change requests have been processed"})]})}):Ce.jsx("div",{className:"grid gap-4",children:U.map(e=>Ce.jsx(td,{className:`border-l-4 ${F(e.status)}`,children:Ce.jsx(sd,{className:"p-6",children:Ce.jsxs("div",{className:"flex items-start justify-between",children:[Ce.jsxs("div",{className:"space-y-3",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[B(e.status),Ce.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.staff.name}),Ce.jsx(Yd,{variant:"outline",className:"text-xs",children:e.staff_role}),Ce.jsx(Yd,{variant:"outline",className:"text-xs",children:q(e.day_of_week)})]}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(yn,{className:"h-4 w-4 text-gray-400"}),Ce.jsxs("span",{children:[e.start_time," - ",e.end_time]})]}),e.branch&&Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(In,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{children:e.branch.name})]}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(da,{className:"h-4 w-4 text-gray-400"}),Ce.jsx("span",{children:e.staff.email})]})]}),Ce.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[Ce.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Reason:"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:e.reason})]})]}),Ce.jsx("div",{className:"flex space-x-2",children:Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>(e=>{g(e),j(e.admin_notes||""),_(!0)})(e),children:[Ce.jsx(wn,{className:"h-4 w-4 mr-2"}),"Review"]})})]})})},e.id))})}),Ce.jsx(Rf,{value:"approved",className:"space-y-4",children:0===V.length?Ce.jsx(td,{children:Ce.jsxs(sd,{className:"p-8 text-center",children:[Ce.jsx(dn,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Approved Requests"}),Ce.jsx("p",{className:"text-gray-600",children:"No schedule change requests have been approved yet"})]})}):Ce.jsx("div",{className:"space-y-4",children:V.map(e=>{var t;return Ce.jsx(td,{className:"border-l-4 border-green-200 bg-green-50",children:Ce.jsx(sd,{className:"p-6",children:Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(dn,{className:"h-4 w-4 text-green-600"}),Ce.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[e.staff.name," - ",q(e.day_of_week)]}),Ce.jsx(Yd,{variant:"outline",className:"text-xs",children:e.staff_role})]}),Ce.jsxs("div",{className:"text-sm text-gray-600",children:[e.start_time," - ",e.end_time," • ",(null==(t=e.branch)?void 0:t.name)||"No Branch"]}),e.admin_notes&&Ce.jsxs("div",{className:"bg-green-100 p-2 rounded text-sm",children:[Ce.jsx("strong",{children:"Admin Notes:"})," ",e.admin_notes]})]}),Ce.jsx("div",{className:"text-sm text-gray-500",children:e.reviewed_at?new Date(e.reviewed_at).toLocaleDateString():"N/A"})]})})},e.id)})})}),Ce.jsx(Rf,{value:"rejected",className:"space-y-4",children:0===W.length?Ce.jsx(td,{children:Ce.jsxs(sd,{className:"p-8 text-center",children:[Ce.jsx(ma,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ce.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Rejected Requests"}),Ce.jsx("p",{className:"text-gray-600",children:"No schedule change requests have been rejected"})]})}):Ce.jsx("div",{className:"space-y-4",children:W.map(e=>{var t;return Ce.jsx(td,{className:"border-l-4 border-red-200 bg-red-50",children:Ce.jsx(sd,{className:"p-6",children:Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsxs("div",{className:"space-y-2",children:[Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(ma,{className:"h-4 w-4 text-red-600"}),Ce.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[e.staff.name," - ",q(e.day_of_week)]}),Ce.jsx(Yd,{variant:"outline",className:"text-xs",children:e.staff_role})]}),Ce.jsxs("div",{className:"text-sm text-gray-600",children:[e.start_time," - ",e.end_time," • ",(null==(t=e.branch)?void 0:t.name)||"No Branch"]}),e.admin_notes&&Ce.jsxs("div",{className:"bg-red-100 p-2 rounded text-sm",children:[Ce.jsx("strong",{children:"Admin Notes:"})," ",e.admin_notes]})]}),Ce.jsx("div",{className:"text-sm text-gray-500",children:e.reviewed_at?new Date(e.reviewed_at).toLocaleDateString():"N/A"})]})})},e.id)})})})]}),Ce.jsx(Xp,{open:S,onOpenChange:_,children:Ce.jsxs(ef,{className:"max-w-2xl",children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Review Schedule Change Request"}),Ce.jsxs(af,{children:["Review and respond to the schedule change request from ",null==v?void 0:v.staff.name," (",null==v?void 0:v.staff_role,")"]})]}),v&&Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{className:"text-sm font-medium",children:"Day"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:q(v.day_of_week)})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{className:"text-sm font-medium",children:"Time"}),Ce.jsxs("p",{className:"text-sm text-gray-600",children:[v.start_time," - ",v.end_time]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{className:"text-sm font-medium",children:"Branch"}),Ce.jsx("p",{className:"text-sm text-gray-600",children:(null==(e=v.branch)?void 0:e.name)||"No Branch"})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{className:"text-sm font-medium",children:"Employee"}),Ce.jsxs("p",{className:"text-sm text-gray-600",children:[v.staff.name," (",v.staff_role,")"]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{className:"text-sm font-medium",children:"Reason"}),Ce.jsx("div",{className:"bg-gray-50 p-3 rounded-lg mt-1",children:Ce.jsx("p",{className:"text-sm text-gray-600",children:v.reason})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"admin-notes",className:"text-sm font-medium",children:"Admin Notes (Optional)"}),Ce.jsx(fh,{id:"admin-notes",placeholder:"Add your notes or reason for approval/rejection...",value:b,onChange:e=>j(e.target.value),className:"mt-1",rows:3})]})]}),Ce.jsxs(rf,{className:"flex space-x-2",children:[Ce.jsx(Hc,{variant:"outline",onClick:()=>_(!1),disabled:w,children:"Cancel"}),Ce.jsxs(Hc,{variant:"destructive",onClick:()=>R(v.id,"rejected"),disabled:w,children:[Ce.jsx(ma,{className:"h-4 w-4 mr-2"}),"Reject"]}),Ce.jsxs(Hc,{onClick:()=>R(v.id,"approved"),disabled:w,children:[Ce.jsx(dn,{className:"h-4 w-4 mr-2"}),"Approve"]})]})]})}),Ce.jsx(Xp,{open:k,onOpenChange:O,children:Ce.jsxs(ef,{className:"max-w-2xl",children:[Ce.jsxs(tf,{children:[Ce.jsx(nf,{children:"Create New Schedule"}),Ce.jsx(af,{children:"Create a new schedule for an employee"})]}),Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"staff-select",children:"Employee"}),Ce.jsxs(Dm,{value:E.staff_id,onValueChange:e=>P({...E,staff_id:e}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select employee"})}),Ce.jsx(Bm,{children:H.map(e=>Ce.jsxs(qm,{value:e.id.toString(),children:[e.name," (",e.role,")"]},e.id))})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"role-select",children:"Role"}),Ce.jsxs(Dm,{value:E.staff_role,onValueChange:e=>P({...E,staff_role:e}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select role"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"optometrist",children:"Optometrist"}),Ce.jsx(qm,{value:"staff",children:"Staff"})]})]})]})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"branch-select",children:"Branch"}),Ce.jsxs(Dm,{value:E.branch_id,onValueChange:e=>P({...E,branch_id:e}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select branch"})}),Ce.jsx(Bm,{children:l.map(e=>Ce.jsx(qm,{value:e.id.toString(),children:e.name},e.id))})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"day-select",children:"Day of Week"}),Ce.jsxs(Dm,{value:E.day_of_week.toString(),onValueChange:e=>P({...E,day_of_week:parseInt(e)}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"Select day"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"1",children:"Monday"}),Ce.jsx(qm,{value:"2",children:"Tuesday"}),Ce.jsx(qm,{value:"3",children:"Wednesday"}),Ce.jsx(qm,{value:"4",children:"Thursday"}),Ce.jsx(qm,{value:"5",children:"Friday"}),Ce.jsx(qm,{value:"6",children:"Saturday"}),Ce.jsx(qm,{value:"7",children:"Sunday"})]})]})]})]}),Ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"start-time",children:"Start Time"}),Ce.jsx(Yc,{id:"start-time",type:"time",value:E.start_time,onChange:e=>P({...E,start_time:e.target.value})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"end-time",children:"End Time"}),Ce.jsx(Yc,{id:"end-time",type:"time",value:E.end_time,onChange:e=>P({...E,end_time:e.target.value})})]})]})]}),Ce.jsxs(rf,{children:[Ce.jsx(Hc,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),Ce.jsx(Hc,{onClick:async()=>{try{await(async e=>{try{return(await Ac.post(`${JK}/staff-schedules`,e,{headers:ZK()})).data}catch(t){throw console.error("Error creating/updating schedule:",t),t}})({staff_id:parseInt(E.staff_id),staff_role:E.staff_role,branch_id:parseInt(E.branch_id),day_of_week:E.day_of_week,start_time:E.start_time,end_time:E.end_time,is_active:E.is_active}),t({title:"Schedule Created",description:"Employee schedule has been created successfully"}),O(!1),P({staff_id:"",staff_role:"optometrist",branch_id:"",day_of_week:1,start_time:"09:00",end_time:"17:00",is_active:!0}),D()}catch(e){console.error("Error creating schedule:",e),t({title:"Error",description:e.message||"Failed to create schedule",variant:"destructive"})}},disabled:!E.staff_id||!E.branch_id,children:"Create Schedule"})]})]})})]})},tY=()=>{const{user:e}=Lc(),{toast:t}=Jt(),[r,n]=Ct.useState([]),[a,s]=Ct.useState(!0),[i,o]=Ct.useState({status:"all",date_from:"",date_to:""}),[l,c]=Ct.useState(null),[d,u]=Ct.useState(!1),[h,m]=Ct.useState(!1),[p,f]=Ct.useState({customer_id:0,branch_id:(null==e?void 0:e.branch_id)||0,total_amount:0,payment_method:"Cash",notes:""}),[x,y]=Ct.useState({sales_type:"cash",customer_name:"",tin:"",address:"",eye_exam_fee:0});Ct.useEffect(()=>{v()},[i]);const v=async()=>{try{s(!0);const e=await nK(i);n(e.transactions.data||[])}catch(e){t({title:"Error",description:"Failed to load transactions",variant:"destructive"})}finally{s(!1)}};return Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsx("h1",{className:"text-3xl font-bold",children:"Transaction Management"}),Ce.jsxs(Xp,{open:d,onOpenChange:u,children:[Ce.jsx(Qp,{asChild:!0,children:Ce.jsxs(Hc,{children:[Ce.jsx(zn,{className:"w-4 h-4 mr-2"}),"Create Transaction"]})}),Ce.jsxs(ef,{className:"max-w-md",children:[Ce.jsx(tf,{children:Ce.jsx(nf,{children:"Create New Transaction"})}),Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"customer_id",children:"Customer ID"}),Ce.jsx(Yc,{id:"customer_id",type:"number",value:p.customer_id,onChange:e=>f({...p,customer_id:parseInt(e.target.value)})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"total_amount",children:"Total Amount"}),Ce.jsx(Yc,{id:"total_amount",type:"number",step:"0.01",value:p.total_amount,onChange:e=>f({...p,total_amount:parseFloat(e.target.value)})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"payment_method",children:"Payment Method"}),Ce.jsxs(Dm,{value:p.payment_method,onValueChange:e=>f({...p,payment_method:e}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"Cash",children:"Cash"}),Ce.jsx(qm,{value:"Credit Card",children:"Credit Card"}),Ce.jsx(qm,{value:"Debit Card",children:"Debit Card"}),Ce.jsx(qm,{value:"Online Payment",children:"Online Payment"})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"notes",children:"Notes"}),Ce.jsx(Yc,{id:"notes",value:p.notes,onChange:e=>f({...p,notes:e.target.value})})]}),Ce.jsx(Hc,{onClick:async()=>{try{await aK(p),t({title:"Success",description:"Transaction created successfully"}),u(!1),f({customer_id:0,branch_id:(null==e?void 0:e.branch_id)||0,total_amount:0,payment_method:"Cash",notes:""}),v()}catch(r){t({title:"Error",description:"Failed to create transaction",variant:"destructive"})}},className:"w-full",children:"Create Transaction"})]})]})]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Filters"})}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"status",children:"Status"}),Ce.jsxs(Dm,{value:i.status,onValueChange:e=>o({...i,status:e}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"All Status"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"all",children:"All Status"}),Ce.jsx(qm,{value:"Pending",children:"Pending"}),Ce.jsx(qm,{value:"Completed",children:"Completed"}),Ce.jsx(qm,{value:"Cancelled",children:"Cancelled"})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"date_from",children:"From Date"}),Ce.jsx(Yc,{id:"date_from",type:"date",value:i.date_from,onChange:e=>o({...i,date_from:e.target.value})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"date_to",children:"To Date"}),Ce.jsx(Yc,{id:"date_to",type:"date",value:i.date_to,onChange:e=>o({...i,date_to:e.target.value})})]}),Ce.jsx("div",{className:"flex items-end",children:Ce.jsx(Hc,{onClick:v,className:"w-full",children:"Apply Filters"})})]})})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Transactions"})}),Ce.jsx(sd,{children:a?Ce.jsx("div",{className:"text-center py-8",children:"Loading transactions..."}):Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Transaction Code"}),Ce.jsx(Jm,{children:"Customer"}),Ce.jsx(Jm,{children:"Amount"}),Ce.jsx(Jm,{children:"Status"}),Ce.jsx(Jm,{children:"Payment Method"}),Ce.jsx(Jm,{children:"Created"}),Ce.jsx(Jm,{children:"Actions"})]})}),Ce.jsx(Xm,{children:r.map(e=>{var r,n,a,s;return Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{className:"font-mono",children:e.transaction_code}),Ce.jsx(Zm,{children:(null==(r=e.customer)?void 0:r.name)||"N/A"}),Ce.jsx(Zm,{children:(s=e.total_amount,new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(s))}),Ce.jsx(Zm,{children:(a=e.status,Ce.jsx(Yd,{variant:{Pending:"default",Completed:"default",Cancelled:"destructive"}[a]||"default",children:a}))}),Ce.jsx(Zm,{children:e.payment_method}),Ce.jsx(Zm,{children:(n=e.created_at,new Date(n).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex space-x-2",children:[Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>c(e),children:Ce.jsx(wn,{className:"w-4 h-4"})}),"Pending"===e.status&&Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>{var t;c(e),y({sales_type:"cash",customer_name:(null==(t=e.customer)?void 0:t.name)||"",tin:"",address:"",eye_exam_fee:0}),m(!0)},children:"Finalize"}),"Completed"===e.status&&e.receipt&&Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{const t=await lK(e),r=window.URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=`receipt_${e}.pdf`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n)}catch(r){t({title:"Error",description:"Failed to download receipt",variant:"destructive"})}})(e.id),children:Ce.jsx(bn,{className:"w-4 h-4"})})]})})]},e.id)})})]})})]}),Ce.jsx(Xp,{open:h,onOpenChange:m,children:Ce.jsxs(ef,{className:"max-w-md",children:[Ce.jsx(tf,{children:Ce.jsx(nf,{children:"Finalize Transaction"})}),Ce.jsxs("div",{className:"space-y-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"sales_type",children:"Sales Type"}),Ce.jsxs(Dm,{value:x.sales_type,onValueChange:e=>y({...x,sales_type:e}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"cash",children:"Cash"}),Ce.jsx(qm,{value:"charge",children:"Charge"})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"customer_name",children:"Customer Name"}),Ce.jsx(Yc,{id:"customer_name",value:x.customer_name,onChange:e=>y({...x,customer_name:e.target.value})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"tin",children:"TIN"}),Ce.jsx(Yc,{id:"tin",value:x.tin,onChange:e=>y({...x,tin:e.target.value})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"address",children:"Address"}),Ce.jsx(Yc,{id:"address",value:x.address,onChange:e=>y({...x,address:e.target.value})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"eye_exam_fee",children:"Eye Exam Fee"}),Ce.jsx(Yc,{id:"eye_exam_fee",type:"number",step:"0.01",value:x.eye_exam_fee,onChange:e=>y({...x,eye_exam_fee:parseFloat(e.target.value)})})]}),Ce.jsx(Hc,{onClick:async()=>{if(l)try{await sK(l.id,x),t({title:"Success",description:"Transaction finalized successfully"}),m(!1),c(null),y({sales_type:"cash",customer_name:"",tin:"",address:"",eye_exam_fee:0}),v()}catch(e){t({title:"Error",description:"Failed to finalize transaction",variant:"destructive"})}},className:"w-full",children:"Finalize Transaction"})]})]})})]})},rY=()=>{const{toast:e}=Jt(),[t,r]=Ct.useState(null),[n,a]=Ct.useState([]),[s,i]=Ct.useState(!0),[o,l]=Ct.useState({date_from:new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString().split("T")[0],date_to:(new Date).toISOString().split("T")[0],branch_id:"all"});Ct.useEffect(()=>{c(),d()},[o]);const c=async()=>{try{i(!0);const e=await oK(o.date_from,o.date_to,o.branch_id&&"all"!==o.branch_id?parseInt(o.branch_id):void 0);r(e.analytics)}catch(t){e({title:"Error",description:"Failed to load analytics",variant:"destructive"})}finally{i(!1)}},d=async()=>{try{const e=await nK({date_from:o.date_from,date_to:o.date_to,branch_id:o.branch_id?parseInt(o.branch_id):void 0});a(e.transactions.data||[])}catch(t){e({title:"Error",description:"Failed to load transactions",variant:"destructive"})}},u=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e),h=e=>{switch(e){case"Completed":return"text-green-600";case"Pending":return"text-yellow-600";case"Cancelled":return"text-red-600";default:return"text-gray-600"}};return Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsx("h1",{className:"text-3xl font-bold",children:"Transaction Analytics"}),Ce.jsxs(Hc,{onClick:c,disabled:s,children:[Ce.jsx(sa,{className:"w-4 h-4 mr-2"}),"Refresh Analytics"]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Analytics Filters"})}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"date_from",children:"From Date"}),Ce.jsx(Yc,{id:"date_from",type:"date",value:o.date_from,onChange:e=>l({...o,date_from:e.target.value})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"date_to",children:"To Date"}),Ce.jsx(Yc,{id:"date_to",type:"date",value:o.date_to,onChange:e=>l({...o,date_to:e.target.value})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"branch_id",children:"Branch"}),Ce.jsxs(Dm,{value:o.branch_id,onValueChange:e=>l({...o,branch_id:e}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"All Branches"})}),Ce.jsx(Bm,{children:Ce.jsx(qm,{value:"all",children:"All Branches"})})]})]}),Ce.jsx("div",{className:"flex items-end",children:Ce.jsx(Hc,{onClick:c,className:"w-full",children:"Apply Filters"})})]})})]}),t&&Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Total Income"}),Ce.jsx(gn,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:u(t.total_income)}),Ce.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.completed_transactions," completed transactions"]})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Total Transactions"}),Ce.jsx(ua,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:t.total_transactions}),Ce.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.pending_transactions," pending, ",t.cancelled_transactions," cancelled"]})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Average Transaction"}),Ce.jsx(sa,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:u(t.average_transaction_value)}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Per completed transaction"})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Completion Rate"}),Ce.jsx(ln,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsxs("div",{className:"text-2xl font-bold",children:[t.total_transactions>0?Math.round(t.completed_transactions/t.total_transactions*100):0,"%"]}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Transactions completed"})]})]})]}),t&&t.sales_by_branch.length>0&&Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Sales by Branch"})}),Ce.jsx(sd,{children:Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Branch"}),Ce.jsx(Jm,{children:"Total Sales"}),Ce.jsx(Jm,{children:"Percentage"})]})}),Ce.jsx(Xm,{children:t.sales_by_branch.map((e,r)=>Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{className:"font-medium",children:e.name}),Ce.jsx(Zm,{children:u(e.total_sales)}),Ce.jsxs(Zm,{children:[t.total_income>0?Math.round(e.total_sales/t.total_income*100):0,"%"]})]},r))})]})})]}),t&&t.sales_by_payment_method.length>0&&Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Sales by Payment Method"})}),Ce.jsx(sd,{children:Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Payment Method"}),Ce.jsx(Jm,{children:"Total Sales"}),Ce.jsx(Jm,{children:"Transaction Count"}),Ce.jsx(Jm,{children:"Average per Transaction"})]})}),Ce.jsx(Xm,{children:t.sales_by_payment_method.map((e,t)=>Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{className:"font-medium",children:e.payment_method}),Ce.jsx(Zm,{children:u(e.total_sales)}),Ce.jsx(Zm,{children:e.transaction_count}),Ce.jsx(Zm,{children:u(e.total_sales/e.transaction_count)})]},t))})]})})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Recent Transactions"})}),Ce.jsx(sd,{children:s?Ce.jsx("div",{className:"text-center py-8",children:"Loading transactions..."}):Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Transaction Code"}),Ce.jsx(Jm,{children:"Customer"}),Ce.jsx(Jm,{children:"Amount"}),Ce.jsx(Jm,{children:"Status"}),Ce.jsx(Jm,{children:"Payment Method"}),Ce.jsx(Jm,{children:"Date"})]})}),Ce.jsx(Xm,{children:n.slice(0,10).map(e=>{var t,r;return Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{className:"font-mono",children:e.transaction_code}),Ce.jsx(Zm,{children:(null==(t=e.customer)?void 0:t.name)||"N/A"}),Ce.jsx(Zm,{children:u(e.total_amount)}),Ce.jsx(Zm,{children:Ce.jsx("span",{className:h(e.status),children:e.status})}),Ce.jsx(Zm,{children:e.payment_method}),Ce.jsx(Zm,{children:(r=e.created_at,new Date(r).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}))})]},e.id)})})]})})]})]})},nY=()=>{const{toast:e}=Jt(),[t,r]=Ct.useState([]),[n,a]=Ct.useState(!0),[s,i]=Ct.useState({status:"all",date_from:"",date_to:""});Ct.useEffect(()=>{o()},[s]);const o=async()=>{try{a(!0);const e=await iK(s);r(e.transactions.data||[])}catch(t){e({title:"Error",description:"Failed to load transaction history",variant:"destructive"})}finally{a(!1)}},l=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e),c=e=>{var t;const r=[];if(e.appointment&&r.push("Eye Examination"),e.reservation){const n=(null==(t=e.reservation.product)?void 0:t.name)||"Product",a=e.reservation.quantity||1;r.push(`${n} (${a}x)`)}return r.length>0?r.join(", "):"Transaction"};return Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsxs("div",{className:"flex justify-between items-center",children:[Ce.jsx("h1",{className:"text-3xl font-bold",children:"My Transaction History"}),Ce.jsxs(Hc,{onClick:o,disabled:n,children:[Ce.jsx(ln,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Filter Transactions"})}),Ce.jsx(sd,{children:Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"status",children:"Status"}),Ce.jsxs(Dm,{value:s.status,onValueChange:e=>i({...s,status:e}),children:[Ce.jsx(Rm,{children:Ce.jsx(Im,{placeholder:"All Status"})}),Ce.jsxs(Bm,{children:[Ce.jsx(qm,{value:"all",children:"All Status"}),Ce.jsx(qm,{value:"Pending",children:"Pending"}),Ce.jsx(qm,{value:"Completed",children:"Completed"}),Ce.jsx(qm,{value:"Cancelled",children:"Cancelled"})]})]})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"date_from",children:"From Date"}),Ce.jsx(Yc,{id:"date_from",type:"date",value:s.date_from,onChange:e=>i({...s,date_from:e.target.value})})]}),Ce.jsxs("div",{children:[Ce.jsx(Zc,{htmlFor:"date_to",children:"To Date"}),Ce.jsx(Yc,{id:"date_to",type:"date",value:s.date_to,onChange:e=>i({...s,date_to:e.target.value})})]}),Ce.jsx("div",{className:"flex items-end",children:Ce.jsx(Hc,{onClick:o,className:"w-full",children:"Apply Filters"})})]})})]}),Ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Total Transactions"}),Ce.jsx(Un,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:t.length}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"All time transactions"})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Total Spent"}),Ce.jsx(Un,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:l(t.reduce((e,t)=>e+t.total_amount,0))}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Total amount spent"})]})]}),Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:"Completed"}),Ce.jsx(Un,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:t.filter(e=>"Completed"===e.status).length}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed transactions"})]})]})]}),Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Transaction History"})}),Ce.jsx(sd,{children:n?Ce.jsx("div",{className:"text-center py-8",children:"Loading transaction history..."}):0===t.length?Ce.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No transactions found"}):Ce.jsxs(Ym,{children:[Ce.jsx(Gm,{children:Ce.jsxs(Qm,{children:[Ce.jsx(Jm,{children:"Transaction Code"}),Ce.jsx(Jm,{children:"Services/Products"}),Ce.jsx(Jm,{children:"Amount"}),Ce.jsx(Jm,{children:"Status"}),Ce.jsx(Jm,{children:"Payment Method"}),Ce.jsx(Jm,{children:"Date"}),Ce.jsx(Jm,{children:"Actions"})]})}),Ce.jsx(Xm,{children:t.map(t=>{return Ce.jsxs(Qm,{children:[Ce.jsx(Zm,{className:"font-mono",children:t.transaction_code}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"max-w-xs",children:[Ce.jsx("p",{className:"text-sm",children:c(t)}),t.branch&&Ce.jsxs("p",{className:"text-xs text-muted-foreground",children:["at ",t.branch.name]})]})}),Ce.jsx(Zm,{children:l(t.total_amount)}),Ce.jsx(Zm,{children:(n=t.status,Ce.jsx(Yd,{variant:{Pending:"default",Completed:"default",Cancelled:"destructive"}[n]||"default",children:n}))}),Ce.jsx(Zm,{children:t.payment_method}),Ce.jsx(Zm,{children:(r=t.created_at,new Date(r).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),Ce.jsx(Zm,{children:Ce.jsxs("div",{className:"flex space-x-2",children:[Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>{console.log("View transaction details:",t)},children:Ce.jsx(wn,{className:"w-4 h-4"})}),"Completed"===t.status&&t.receipt&&Ce.jsx(Hc,{variant:"outline",size:"sm",onClick:()=>(async t=>{try{const e=await lK(t),r=window.URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`receipt_${t}.pdf`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n)}catch(r){e({title:"Error",description:"Failed to download receipt",variant:"destructive"})}})(t.id),children:Ce.jsx(bn,{className:"w-4 h-4"})})]})})]},t.id);var r,n})})]})})]})]})},aY=({transaction:e,onViewDetails:t,onDownloadReceipt:r})=>{var n,a;return Ce.jsxs(td,{className:"w-full max-w-md",children:[Ce.jsx(rd,{className:"pb-3",children:Ce.jsxs("div",{className:"flex items-center justify-between",children:[Ce.jsx(nd,{className:"text-lg",children:"Transaction Update"}),Ce.jsxs("div",{className:"flex items-center space-x-2",children:[Ce.jsx(dn,{className:"w-5 h-5 text-green-600"}),Ce.jsx(Yd,{className:(e=>{switch(e){case"Completed":return"text-green-600 bg-green-50";case"Pending":return"text-yellow-600 bg-yellow-50";case"Cancelled":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}})(e.status),children:e.status})]})]})}),Ce.jsxs(sd,{className:"space-y-4",children:[Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Transaction Code"}),Ce.jsx("p",{className:"font-mono text-lg",children:e.transaction_code})]}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Services/Products"}),Ce.jsx("p",{className:"text-sm",children:(e=>{var t;const r=[];if(e.appointment&&r.push("Eye Examination"),e.reservation){const n=(null==(t=e.reservation.product)?void 0:t.name)||"Product",a=e.reservation.quantity||1;r.push(`${n} (${a}x)`)}return r.length>0?r.join(", "):"Transaction"})(e)})]}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Amount"}),Ce.jsx("p",{className:"text-lg font-semibold",children:(i=e.total_amount,new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(i))})]}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Payment Method"}),Ce.jsx("p",{className:"text-sm",children:e.payment_method})]}),Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Date"}),Ce.jsx("p",{className:"text-sm",children:(s=e.created_at,new Date(s).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),e.branch&&Ce.jsxs("div",{children:[Ce.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Branch"}),Ce.jsx("p",{className:"text-sm",children:(null==(n=e.branch)?void 0:n.name)||"N/A"})]}),"Completed"===e.status&&Ce.jsxs("div",{className:"pt-2 border-t",children:[Ce.jsx("p",{className:"text-sm font-medium text-green-600 mb-2",children:"✓ Transaction completed successfully"}),e.receipt&&Ce.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:["Receipt #",(null==(a=e.receipt)?void 0:a.id)||"N/A"," has been generated"]})]}),Ce.jsxs("div",{className:"flex space-x-2 pt-2",children:[Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>t(e),className:"flex-1",children:[Ce.jsx(wn,{className:"w-4 h-4 mr-2"}),"View Details"]}),"Completed"===e.status&&e.receipt&&Ce.jsxs(Hc,{variant:"outline",size:"sm",onClick:()=>r(e.id),className:"flex-1",children:[Ce.jsx(bn,{className:"w-4 h-4 mr-2"}),"Download Receipt"]})]})]})]});var s,i},sY=()=>{const{user:e}=Lc(),{toast:t}=Jt(),[r,n]=Ct.useState([]),[a,s]=Ct.useState(!0);Ct.useEffect(()=>{i()},[]);const i=async()=>{var e;try{s(!0);const t=await nK({date_from:new Date(Date.now()-6048e5).toISOString().split("T")[0]});n((null==(e=t.transactions.data)?void 0:e.slice(0,5))||[])}catch(t){console.error("Failed to load recent transactions:",t)}finally{s(!1)}},o=e=>{console.log("View transaction details:",e),t({title:"Transaction Details",description:`Viewing details for transaction ${e.transaction_code}`})},l=async e=>{try{const r=await lK(e),n=window.URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download=`receipt_${e}.pdf`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(n),document.body.removeChild(a),t({title:"Success",description:"Receipt downloaded successfully"})}catch(r){t({title:"Error",description:"Failed to download receipt",variant:"destructive"})}},c=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e);return Ce.jsxs("div",{className:"space-y-6",children:[Ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(()=>{if("customer"===(null==e?void 0:e.role)){const e=r.reduce((e,t)=>e+t.total_amount,0),t=r.filter(e=>"Completed"===e.status).length;return[{title:"Recent Transactions",value:r.length,icon:Un,description:"Last 7 days"},{title:"Total Spent",value:c(e),icon:sa,description:"Last 7 days"},{title:"Completed",value:t,icon:wn,description:"Completed transactions"}]}const t=r.reduce((e,t)=>e+t.total_amount,0),n=r.filter(e=>"Completed"===e.status).length,a=r.filter(e=>"Pending"===e.status).length;return[{title:"Recent Transactions",value:r.length,icon:Un,description:"Last 7 days"},{title:"Total Revenue",value:c(t),icon:sa,description:"Last 7 days"},{title:"Completed",value:n,icon:wn,description:"Completed transactions"},{title:"Pending",value:a,icon:ua,description:"Pending transactions"}]})().map((e,t)=>Ce.jsxs(td,{children:[Ce.jsxs(rd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Ce.jsx(nd,{className:"text-sm font-medium",children:e.title}),Ce.jsx(e.icon,{className:"h-4 w-4 text-muted-foreground"})]}),Ce.jsxs(sd,{children:[Ce.jsx("div",{className:"text-2xl font-bold",children:e.value}),Ce.jsx("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},t))}),r.length>0&&Ce.jsxs(td,{children:[Ce.jsx(rd,{children:Ce.jsx(nd,{children:"Recent Transaction Updates"})}),Ce.jsx(sd,{children:Ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>Ce.jsx(aY,{transaction:e,onViewDetails:o,onDownloadReceipt:l},e.id))})})]}),(()=>{switch(null==e?void 0:e.role){case"admin":return Ce.jsxs(Mf,{defaultValue:"analytics",className:"space-y-6",children:[Ce.jsxs(Df,{children:[Ce.jsx(If,{value:"analytics",children:"Analytics"}),Ce.jsx(If,{value:"management",children:"Transaction Management"})]}),Ce.jsx(Rf,{value:"analytics",children:Ce.jsx(rY,{})}),Ce.jsx(Rf,{value:"management",children:Ce.jsx(tY,{})})]});case"staff":case"optometrist":return Ce.jsxs(Mf,{defaultValue:"management",className:"space-y-6",children:[Ce.jsxs(Df,{children:[Ce.jsx(If,{value:"management",children:"Transaction Management"}),Ce.jsx(If,{value:"patients",children:"Patient Transactions"})]}),Ce.jsx(Rf,{value:"management",children:Ce.jsx(tY,{})}),Ce.jsx(Rf,{value:"patients",children:Ce.jsx(dK,{})})]});case"customer":return Ce.jsx(nY,{});default:return Ce.jsx(td,{children:Ce.jsx(sd,{className:"text-center py-8",children:Ce.jsx("p",{className:"text-muted-foreground",children:"No transaction access for your role."})})})}})()]})},iY=new Zi;Ac.interceptors.response.use(e=>e,e=>{var t;return 401!==(null==(t=e.response)?void 0:t.status)||zc||(zc=!0,console.log("Global 401 interceptor: Token expired or invalid, clearing auth data"),sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_current_user"),window.dispatchEvent(new CustomEvent("auth:token-expired")),setTimeout(()=>{zc=!1},1e3),"/login"!==window.location.pathname&&(window.location.href="/login")),Promise.reject(e)});const oY=()=>Ce.jsx(oo,{client:iY,children:Ce.jsx(Rc,{children:Ce.jsx($c,{children:Ce.jsx(qp,{children:Ce.jsx(LK,{children:Ce.jsxs(ui,{children:[Ce.jsx(fs,{}),Ce.jsx(Bs,{}),Ce.jsx(qt,{children:Ce.jsxs($t,{children:[Ce.jsx(zt,{path:"/",element:Ce.jsx(dH,{})}),Ce.jsx(zt,{path:"/login",element:Ce.jsx(od,{})}),Ce.jsx(zt,{path:"/register",element:Ce.jsx(ld,{})}),Ce.jsx(zt,{path:"/faq",element:Ce.jsx(hH,{})}),Ce.jsxs(zt,{path:"/customer",element:Ce.jsx(Uc,{allowedRoles:["customer"],children:Ce.jsx(ah,{})}),children:[Ce.jsx(zt,{path:"dashboard",element:Ce.jsx(Hm,{})}),Ce.jsx(zt,{path:"appointments",element:Ce.jsx(wH,{})}),Ce.jsx(zt,{path:"book-appointment",element:Ce.jsx(gH,{})}),Ce.jsx(zt,{path:"history",element:Ce.jsx(MH,{})}),Ce.jsx(zt,{path:"prescriptions",element:Ce.jsx(IH,{})}),Ce.jsx(zt,{path:"receipts",element:Ce.jsx($H,{})}),Ce.jsx(zt,{path:"feedback",element:Ce.jsx(RH,{})}),Ce.jsx(zt,{path:"notifications",element:Ce.jsx(tx,{})}),Ce.jsx(zt,{path:"products",element:Ce.jsx(YH,{})}),Ce.jsx(zt,{path:"products/:productId",element:Ce.jsx(XH,{})}),Ce.jsx(zt,{path:"profile",element:Ce.jsx(GK,{})}),Ce.jsx(zt,{path:"reservations",element:Ce.jsx(JH,{})})]}),Ce.jsxs(zt,{path:"/optometrist",element:Ce.jsx(Uc,{allowedRoles:["optometrist"],children:Ce.jsx(ah,{})}),children:[Ce.jsx(zt,{index:!0,element:Ce.jsx(Mt,{to:"dashboard",replace:!0})}),Ce.jsx(zt,{path:"dashboard",element:Ce.jsx(ap,{})}),Ce.jsx(zt,{path:"appointments",element:Ce.jsx($K,{})}),Ce.jsx(zt,{path:"patients",element:Ce.jsx(WK,{})}),Ce.jsx(zt,{path:"prescriptions",element:Ce.jsx(HK,{})}),Ce.jsx(zt,{path:"schedule",element:Ce.jsx(YK,{})}),Ce.jsx(zt,{path:"notifications",element:Ce.jsx(tx,{})}),Ce.jsx(zt,{path:"profile",element:Ce.jsx(GK,{})})]}),Ce.jsxs(zt,{path:"/staff",element:Ce.jsx(Uc,{allowedRoles:["staff"],children:Ce.jsx(ah,{})}),children:[Ce.jsx(zt,{path:"dashboard",element:Ce.jsx(Mp,{})}),Ce.jsx(zt,{path:"appointments",element:Ce.jsx(zK,{})}),Ce.jsx(zt,{path:"reservations",element:Ce.jsx(hK,{})}),Ce.jsx(zt,{path:"create-receipt/:appointmentId",element:Ce.jsx(lY,{})}),Ce.jsx(zt,{path:"restock-requests",element:Ce.jsx(pK,{})}),Ce.jsx(zt,{path:"inventory",element:Ce.jsx(mf,{})}),Ce.jsx(zt,{path:"inventory/legacy",element:Ce.jsx(uf,{})}),Ce.jsx(zt,{path:"patients",element:Ce.jsx(rx,{})}),Ce.jsx(zt,{path:"profile",element:Ce.jsx(GK,{})}),Ce.jsx(zt,{path:"notifications",element:Ce.jsx(tx,{})})]}),Ce.jsxs(zt,{path:"/admin",element:Ce.jsx(Uc,{allowedRoles:["admin"],children:Ce.jsx(ah,{})}),children:[Ce.jsx(zt,{path:"dashboard",element:Ce.jsx(Yp,{})}),Ce.jsx(zt,{path:"analytics",element:Ce.jsx(lH,{})}),Ce.jsx(zt,{path:"users",element:Ce.jsx(XK,{})}),Ce.jsx(zt,{path:"branches",element:Ce.jsx(QK,{})}),Ce.jsx(zt,{path:"inventory",element:Ce.jsx(Ff,{})}),Ce.jsx(zt,{path:"inventory/consolidated",element:Ce.jsx(ex,{})}),Ce.jsx(zt,{path:"stock-management",element:Ce.jsx(DK,{})}),Ce.jsx(zt,{path:"products",element:Ce.jsx(ZH,{children:Ce.jsx(IK,{})})}),Ce.jsx(zt,{path:"notifications",element:Ce.jsx(tx,{})}),Ce.jsx(zt,{path:"patients",element:Ce.jsx(rx,{})}),Ce.jsx(zt,{path:"sales",element:Ce.jsx(lH,{})}),Ce.jsx(zt,{path:"employee-schedules",element:Ce.jsx(eY,{})}),Ce.jsx(zt,{path:"transactions",element:Ce.jsx(sY,{})}),Ce.jsx(zt,{path:"profile",element:Ce.jsx(GK,{})})]}),Ce.jsx(zt,{path:"*",element:Ce.jsx(uH,{})})]})})]})})})})})});function lY(){var e,t,r;const{appointmentId:n}=Bt(),a=Number(n);Lc();const{data:s}=mo({queryKey:["appointment",a],enabled:!!a,queryFn:async()=>{const e=await fetch(FH(`/appointments/${a}`),{headers:BH()});if(!e.ok)throw new Error("Failed to load appointment");return e.json()}}),i=(null==(e=null==s?void 0:s.patient)?void 0:e.name)||"",o=(null==(t=null==s?void 0:s.patient)?void 0:t.address)||"",l=(null==(r=null==s?void 0:s.patient)?void 0:r.id)||(null==s?void 0:s.customer_id);return Ce.jsx(MK,{appointmentId:a,defaultCustomerName:i,defaultAddress:o,customerId:l})}je(document.getElementById("root")).render(Ce.jsx(oY,{}));
